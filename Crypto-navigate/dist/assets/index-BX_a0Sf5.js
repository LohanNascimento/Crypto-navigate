var Is=Object.defineProperty;var $s=_=>{throw TypeError(_)};var Ms=(_,$,_e)=>$ in _?Is(_,$,{enumerable:!0,configurable:!0,writable:!0,value:_e}):_[$]=_e;var vn=(_,$,_e)=>Ms(_,typeof $!="symbol"?$+"":$,_e),ws=(_,$,_e)=>$.has(_)||$s("Cannot "+_e);var tn=(_,$,_e)=>(ws(_,$,"read from private field"),_e?_e.call(_):$.get(_)),xn=(_,$,_e)=>$.has(_)?$s("Cannot add the same private member more than once"):$ instanceof WeakSet?$.add(_):$.set(_,_e),dn=(_,$,_e,et)=>(ws(_,$,"write to private field"),et?et.call(_,_e):$.set(_,_e),_e),Fn=(_,$,_e)=>(ws(_,$,"access private method"),_e);var vs=(_,$,_e,et)=>({set _(tt){dn(_,$,tt,_e)},get _(){return tn(_,$,et)}});import*as ccxt from"ccxt";function _mergeNamespaces(_,$){for(var _e=0;_e<$.length;_e++){const et=$[_e];if(typeof et!="string"&&!Array.isArray(et)){for(const tt in et)if(tt!=="default"&&!(tt in _)){const rt=Object.getOwnPropertyDescriptor(et,tt);rt&&Object.defineProperty(_,tt,rt.get?rt:{enumerable:!0,get:()=>et[tt]})}}}return Object.freeze(Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}))}(function(){const $=document.createElement("link").relList;if($&&$.supports&&$.supports("modulepreload"))return;for(const tt of document.querySelectorAll('link[rel="modulepreload"]'))et(tt);new MutationObserver(tt=>{for(const rt of tt)if(rt.type==="childList")for(const nt of rt.addedNodes)nt.tagName==="LINK"&&nt.rel==="modulepreload"&&et(nt)}).observe(document,{childList:!0,subtree:!0});function _e(tt){const rt={};return tt.integrity&&(rt.integrity=tt.integrity),tt.referrerPolicy&&(rt.referrerPolicy=tt.referrerPolicy),tt.crossOrigin==="use-credentials"?rt.credentials="include":tt.crossOrigin==="anonymous"?rt.credentials="omit":rt.credentials="same-origin",rt}function et(tt){if(tt.ep)return;tt.ep=!0;const rt=_e(tt);fetch(tt.href,rt)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}function getAugmentedNamespace(_){if(_.__esModule)return _;var $=_.default;if(typeof $=="function"){var _e=function et(){return this instanceof et?Reflect.construct($,arguments,this.constructor):$.apply(this,arguments)};_e.prototype=$.prototype}else _e={};return Object.defineProperty(_e,"__esModule",{value:!0}),Object.keys(_).forEach(function(et){var tt=Object.getOwnPropertyDescriptor(_,et);Object.defineProperty(_e,et,tt.get?tt:{enumerable:!0,get:function(){return _[et]}})}),_e}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$2=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$1(_){return _===null||typeof _!="object"?null:(_=z$2&&_[z$2]||_["@@iterator"],typeof _=="function"?_:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$2={};function E$2(_,$,_e){this.props=_,this.context=$,this.refs=D$2,this.updater=_e||B$1}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(_,$){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,$,"setState")};E$2.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function F(){}F.prototype=E$2.prototype;function G$1(_,$,_e){this.props=_,this.context=$,this.refs=D$2,this.updater=_e||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$2.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$1(_,$,_e){var et,tt={},rt=null,nt=null;if($!=null)for(et in $.ref!==void 0&&(nt=$.ref),$.key!==void 0&&(rt=""+$.key),$)J.call($,et)&&!L$2.hasOwnProperty(et)&&(tt[et]=$[et]);var it=arguments.length-2;if(it===1)tt.children=_e;else if(1<it){for(var st=Array(it),at=0;at<it;at++)st[at]=arguments[at+2];tt.children=st}if(_&&_.defaultProps)for(et in it=_.defaultProps,it)tt[et]===void 0&&(tt[et]=it[et]);return{$$typeof:l$2,type:_,key:rt,ref:nt,props:tt,_owner:K$1.current}}function N$1(_,$){return{$$typeof:l$2,type:_.type,key:$,ref:_.ref,props:_.props,_owner:_._owner}}function O$1(_){return typeof _=="object"&&_!==null&&_.$$typeof===l$2}function escape(_){var $={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(_e){return $[_e]})}var P$3=/\/+/g;function Q$1(_,$){return typeof _=="object"&&_!==null&&_.key!=null?escape(""+_.key):$.toString(36)}function R$1(_,$,_e,et,tt){var rt=typeof _;(rt==="undefined"||rt==="boolean")&&(_=null);var nt=!1;if(_===null)nt=!0;else switch(rt){case"string":case"number":nt=!0;break;case"object":switch(_.$$typeof){case l$2:case n$3:nt=!0}}if(nt)return nt=_,tt=tt(nt),_=et===""?"."+Q$1(nt,0):et,I$1(tt)?(_e="",_!=null&&(_e=_.replace(P$3,"$&/")+"/"),R$1(tt,$,_e,"",function(at){return at})):tt!=null&&(O$1(tt)&&(tt=N$1(tt,_e+(!tt.key||nt&&nt.key===tt.key?"":(""+tt.key).replace(P$3,"$&/")+"/")+_)),$.push(tt)),1;if(nt=0,et=et===""?".":et+":",I$1(_))for(var it=0;it<_.length;it++){rt=_[it];var st=et+Q$1(rt,it);nt+=R$1(rt,$,_e,st,tt)}else if(st=A$1(_),typeof st=="function")for(_=st.call(_),it=0;!(rt=_.next()).done;)rt=rt.value,st=et+Q$1(rt,it++),nt+=R$1(rt,$,_e,st,tt);else if(rt==="object")throw $=String(_),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return nt}function S$1(_,$,_e){if(_==null)return _;var et=[],tt=0;return R$1(_,et,"","",function(rt){return $.call(_e,rt,tt++)}),et}function T$1(_){if(_._status===-1){var $=_._result;$=$(),$.then(function(_e){(_._status===0||_._status===-1)&&(_._status=1,_._result=_e)},function(_e){(_._status===0||_._status===-1)&&(_._status=2,_._result=_e)}),_._status===-1&&(_._status=0,_._result=$)}if(_._status===1)return _._result.default;throw _._result}var U$2={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$2(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(_,$,_e){S$1(_,function(){$.apply(this,arguments)},_e)},count:function(_){var $=0;return S$1(_,function(){$++}),$},toArray:function(_){return S$1(_,function($){return $})||[]},only:function(_){if(!O$1(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};react_production_min.Component=E$2;react_production_min.Fragment=p$4;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$2;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$2;react_production_min.cloneElement=function(_,$,_e){if(_==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_+".");var et=C$1({},_.props),tt=_.key,rt=_.ref,nt=_._owner;if($!=null){if($.ref!==void 0&&(rt=$.ref,nt=K$1.current),$.key!==void 0&&(tt=""+$.key),_.type&&_.type.defaultProps)var it=_.type.defaultProps;for(st in $)J.call($,st)&&!L$2.hasOwnProperty(st)&&(et[st]=$[st]===void 0&&it!==void 0?it[st]:$[st])}var st=arguments.length-2;if(st===1)et.children=_e;else if(1<st){it=Array(st);for(var at=0;at<st;at++)it[at]=arguments[at+2];et.children=it}return{$$typeof:l$2,type:_.type,key:tt,ref:rt,props:et,_owner:nt}};react_production_min.createContext=function(_){return _={$$typeof:u$1,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_.Provider={$$typeof:t$2,_context:_},_.Consumer=_};react_production_min.createElement=M$1;react_production_min.createFactory=function(_){var $=M$1.bind(null,_);return $.type=_,$};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_){return{$$typeof:v$3,render:_}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(_){return{$$typeof:y$1,_payload:{_status:-1,_result:_},_init:T$1}};react_production_min.memo=function(_,$){return{$$typeof:x$1,type:_,compare:$===void 0?null:$}};react_production_min.startTransition=function(_){var $=V$1.transition;V$1.transition={};try{_()}finally{V$1.transition=$}};react_production_min.unstable_act=X$2;react_production_min.useCallback=function(_,$){return U$2.current.useCallback(_,$)};react_production_min.useContext=function(_){return U$2.current.useContext(_)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(_){return U$2.current.useDeferredValue(_)};react_production_min.useEffect=function(_,$){return U$2.current.useEffect(_,$)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(_,$,_e){return U$2.current.useImperativeHandle(_,$,_e)};react_production_min.useInsertionEffect=function(_,$){return U$2.current.useInsertionEffect(_,$)};react_production_min.useLayoutEffect=function(_,$){return U$2.current.useLayoutEffect(_,$)};react_production_min.useMemo=function(_,$){return U$2.current.useMemo(_,$)};react_production_min.useReducer=function(_,$,_e){return U$2.current.useReducer(_,$,_e)};react_production_min.useRef=function(_){return U$2.current.useRef(_)};react_production_min.useState=function(_){return U$2.current.useState(_)};react_production_min.useSyncExternalStore=function(_,$,_e){return U$2.current.useSyncExternalStore(_,$,_e)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs$1(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$2=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$2=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q$1(_,$,_e){var et,tt={},rt=null,nt=null;_e!==void 0&&(rt=""+_e),$.key!==void 0&&(rt=""+$.key),$.ref!==void 0&&(nt=$.ref);for(et in $)m$2.call($,et)&&!p$3.hasOwnProperty(et)&&(tt[et]=$[et]);if(_&&_.defaultProps)for(et in $=_.defaultProps,$)tt[et]===void 0&&(tt[et]=$[et]);return{$$typeof:k$2,type:_,key:rt,ref:nt,props:tt,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_){function $(Pt,Tt){var pt=Pt.length;Pt.push(Tt);e:for(;0<pt;){var Rt=pt-1>>>1,zt=Pt[Rt];if(0<tt(zt,Tt))Pt[Rt]=Tt,Pt[pt]=zt,pt=Rt;else break e}}function _e(Pt){return Pt.length===0?null:Pt[0]}function et(Pt){if(Pt.length===0)return null;var Tt=Pt[0],pt=Pt.pop();if(pt!==Tt){Pt[0]=pt;e:for(var Rt=0,zt=Pt.length,Yt=zt>>>1;Rt<Yt;){var ir=2*(Rt+1)-1,ur=Pt[ir],cr=ir+1,rr=Pt[cr];if(0>tt(ur,pt))cr<zt&&0>tt(rr,ur)?(Pt[Rt]=rr,Pt[cr]=pt,Rt=cr):(Pt[Rt]=ur,Pt[ir]=pt,Rt=ir);else if(cr<zt&&0>tt(rr,pt))Pt[Rt]=rr,Pt[cr]=pt,Rt=cr;else break e}}return Tt}function tt(Pt,Tt){var pt=Pt.sortIndex-Tt.sortIndex;return pt!==0?pt:Pt.id-Tt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var rt=performance;_.unstable_now=function(){return rt.now()}}else{var nt=Date,it=nt.now();_.unstable_now=function(){return nt.now()-it}}var st=[],at=[],ot=1,dt=null,ht=3,yt=!1,vt=!1,xt=!1,wt=typeof setTimeout=="function"?setTimeout:null,Et=typeof clearTimeout=="function"?clearTimeout:null,At=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function jt(Pt){for(var Tt=_e(at);Tt!==null;){if(Tt.callback===null)et(at);else if(Tt.startTime<=Pt)et(at),Tt.sortIndex=Tt.expirationTime,$(st,Tt);else break;Tt=_e(at)}}function kt(Pt){if(xt=!1,jt(Pt),!vt)if(_e(st)!==null)vt=!0,St(Lt);else{var Tt=_e(at);Tt!==null&&Nt(kt,Tt.startTime-Pt)}}function Lt(Pt,Tt){vt=!1,xt&&(xt=!1,Et(er),er=-1),yt=!0;var pt=ht;try{for(jt(Tt),dt=_e(st);dt!==null&&(!(dt.expirationTime>Tt)||Pt&&!Mt());){var Rt=dt.callback;if(typeof Rt=="function"){dt.callback=null,ht=dt.priorityLevel;var zt=Rt(dt.expirationTime<=Tt);Tt=_.unstable_now(),typeof zt=="function"?dt.callback=zt:dt===_e(st)&&et(st),jt(Tt)}else et(st);dt=_e(st)}if(dt!==null)var Yt=!0;else{var ir=_e(at);ir!==null&&Nt(kt,ir.startTime-Tt),Yt=!1}return Yt}finally{dt=null,ht=pt,yt=!1}}var Bt=!1,Gt=null,er=-1,tr=5,ar=-1;function Mt(){return!(_.unstable_now()-ar<tr)}function lt(){if(Gt!==null){var Pt=_.unstable_now();ar=Pt;var Tt=!0;try{Tt=Gt(!0,Pt)}finally{Tt?mt():(Bt=!1,Gt=null)}}else Bt=!1}var mt;if(typeof At=="function")mt=function(){At(lt)};else if(typeof MessageChannel<"u"){var gt=new MessageChannel,bt=gt.port2;gt.port1.onmessage=lt,mt=function(){bt.postMessage(null)}}else mt=function(){wt(lt,0)};function St(Pt){Gt=Pt,Bt||(Bt=!0,mt())}function Nt(Pt,Tt){er=wt(function(){Pt(_.unstable_now())},Tt)}_.unstable_IdlePriority=5,_.unstable_ImmediatePriority=1,_.unstable_LowPriority=4,_.unstable_NormalPriority=3,_.unstable_Profiling=null,_.unstable_UserBlockingPriority=2,_.unstable_cancelCallback=function(Pt){Pt.callback=null},_.unstable_continueExecution=function(){vt||yt||(vt=!0,St(Lt))},_.unstable_forceFrameRate=function(Pt){0>Pt||125<Pt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):tr=0<Pt?Math.floor(1e3/Pt):5},_.unstable_getCurrentPriorityLevel=function(){return ht},_.unstable_getFirstCallbackNode=function(){return _e(st)},_.unstable_next=function(Pt){switch(ht){case 1:case 2:case 3:var Tt=3;break;default:Tt=ht}var pt=ht;ht=Tt;try{return Pt()}finally{ht=pt}},_.unstable_pauseExecution=function(){},_.unstable_requestPaint=function(){},_.unstable_runWithPriority=function(Pt,Tt){switch(Pt){case 1:case 2:case 3:case 4:case 5:break;default:Pt=3}var pt=ht;ht=Pt;try{return Tt()}finally{ht=pt}},_.unstable_scheduleCallback=function(Pt,Tt,pt){var Rt=_.unstable_now();switch(typeof pt=="object"&&pt!==null?(pt=pt.delay,pt=typeof pt=="number"&&0<pt?Rt+pt:Rt):pt=Rt,Pt){case 1:var zt=-1;break;case 2:zt=250;break;case 5:zt=1073741823;break;case 4:zt=1e4;break;default:zt=5e3}return zt=pt+zt,Pt={id:ot++,callback:Tt,priorityLevel:Pt,startTime:pt,expirationTime:zt,sortIndex:-1},pt>Rt?(Pt.sortIndex=pt,$(at,Pt),_e(st)===null&&Pt===_e(at)&&(xt?(Et(er),er=-1):xt=!0,Nt(kt,pt-Rt))):(Pt.sortIndex=zt,$(st,Pt),vt||yt||(vt=!0,St(Lt))),Pt},_.unstable_shouldYield=Mt,_.unstable_wrapCallback=function(Pt){var Tt=ht;return function(){var pt=ht;ht=Tt;try{return Pt.apply(this,arguments)}finally{ht=pt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$2(_){for(var $="https://reactjs.org/docs/error-decoder.html?invariant="+_,_e=1;_e<arguments.length;_e++)$+="&args[]="+encodeURIComponent(arguments[_e]);return"Minified React error #"+_+"; visit "+$+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(_,$){ha(_,$),ha(_+"Capture",$)}function ha(_,$){for(ea[_]=$,_=0;_<$.length;_++)da.add($[_])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(_){return ja.call(ma,_)?!0:ja.call(la,_)?!1:ka$1.test(_)?ma[_]=!0:(la[_]=!0,!1)}function pa(_,$,_e,et){if(_e!==null&&_e.type===0)return!1;switch(typeof $){case"function":case"symbol":return!0;case"boolean":return et?!1:_e!==null?!_e.acceptsBooleans:(_=_.toLowerCase().slice(0,5),_!=="data-"&&_!=="aria-");default:return!1}}function qa(_,$,_e,et){if($===null||typeof $>"u"||pa(_,$,_e,et))return!0;if(et)return!1;if(_e!==null)switch(_e.type){case 3:return!$;case 4:return $===!1;case 5:return isNaN($);case 6:return isNaN($)||1>$}return!1}function v$2(_,$,_e,et,tt,rt,nt){this.acceptsBooleans=$===2||$===3||$===4,this.attributeName=et,this.attributeNamespace=tt,this.mustUseProperty=_e,this.propertyName=_,this.type=$,this.sanitizeURL=rt,this.removeEmptyString=nt}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_){z$1[_]=new v$2(_,0,!1,_,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_){var $=_[0];z$1[$]=new v$2($,1,!1,_[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_){z$1[_]=new v$2(_,2,!1,_.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_){z$1[_]=new v$2(_,2,!1,_,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_){z$1[_]=new v$2(_,3,!1,_.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_){z$1[_]=new v$2(_,3,!0,_,null,!1,!1)});["capture","download"].forEach(function(_){z$1[_]=new v$2(_,4,!1,_,null,!1,!1)});["cols","rows","size","span"].forEach(function(_){z$1[_]=new v$2(_,6,!1,_,null,!1,!1)});["rowSpan","start"].forEach(function(_){z$1[_]=new v$2(_,5,!1,_.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(_){return _[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_){var $=_.replace(ra,sa);z$1[$]=new v$2($,1,!1,_,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_){var $=_.replace(ra,sa);z$1[$]=new v$2($,1,!1,_,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_){var $=_.replace(ra,sa);z$1[$]=new v$2($,1,!1,_,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_){z$1[_]=new v$2(_,1,!1,_.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_){z$1[_]=new v$2(_,1,!1,_.toLowerCase(),null,!0,!0)});function ta(_,$,_e,et){var tt=z$1.hasOwnProperty($)?z$1[$]:null;(tt!==null?tt.type!==0:et||!(2<$.length)||$[0]!=="o"&&$[0]!=="O"||$[1]!=="n"&&$[1]!=="N")&&(qa($,_e,tt,et)&&(_e=null),et||tt===null?oa($)&&(_e===null?_.removeAttribute($):_.setAttribute($,""+_e)):tt.mustUseProperty?_[tt.propertyName]=_e===null?tt.type===3?!1:"":_e:($=tt.attributeName,et=tt.attributeNamespace,_e===null?_.removeAttribute($):(tt=tt.type,_e=tt===3||tt===4&&_e===!0?"":""+_e,et?_.setAttributeNS(et,$,_e):_.setAttribute($,_e))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(_){return _===null||typeof _!="object"?null:(_=Ja&&_[Ja]||_["@@iterator"],typeof _=="function"?_:null)}var A=Object.assign,La;function Ma(_){if(La===void 0)try{throw Error()}catch(_e){var $=_e.stack.trim().match(/\n( *(at )?)/);La=$&&$[1]||""}return`
`+La+_}var Na=!1;function Oa(_,$){if(!_||Na)return"";Na=!0;var _e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if($)if($=function(){throw Error()},Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(at){var et=at}Reflect.construct(_,[],$)}else{try{$.call()}catch(at){et=at}_.call($.prototype)}else{try{throw Error()}catch(at){et=at}_()}}catch(at){if(at&&et&&typeof at.stack=="string"){for(var tt=at.stack.split(`
`),rt=et.stack.split(`
`),nt=tt.length-1,it=rt.length-1;1<=nt&&0<=it&&tt[nt]!==rt[it];)it--;for(;1<=nt&&0<=it;nt--,it--)if(tt[nt]!==rt[it]){if(nt!==1||it!==1)do if(nt--,it--,0>it||tt[nt]!==rt[it]){var st=`
`+tt[nt].replace(" at new "," at ");return _.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",_.displayName)),st}while(1<=nt&&0<=it);break}}}finally{Na=!1,Error.prepareStackTrace=_e}return(_=_?_.displayName||_.name:"")?Ma(_):""}function Pa(_){switch(_.tag){case 5:return Ma(_.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return _=Oa(_.type,!1),_;case 11:return _=Oa(_.type.render,!1),_;case 1:return _=Oa(_.type,!0),_;default:return""}}function Qa(_){if(_==null)return null;if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _;switch(_){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof _=="object")switch(_.$$typeof){case Ca:return(_.displayName||"Context")+".Consumer";case Ba:return(_._context.displayName||"Context")+".Provider";case Da:var $=_.render;return _=_.displayName,_||(_=$.displayName||$.name||"",_=_!==""?"ForwardRef("+_+")":"ForwardRef"),_;case Ga:return $=_.displayName||null,$!==null?$:Qa(_.type)||"Memo";case Ha:$=_._payload,_=_._init;try{return Qa(_($))}catch{}}return null}function Ra(_){var $=_.type;switch(_.tag){case 24:return"Cache";case 9:return($.displayName||"Context")+".Consumer";case 10:return($._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _=$.render,_=_.displayName||_.name||"",$.displayName||(_!==""?"ForwardRef("+_+")":"ForwardRef");case 7:return"Fragment";case 5:return $;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa($);case 8:return $===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof $=="function")return $.displayName||$.name||null;if(typeof $=="string")return $}return null}function Sa(_){switch(typeof _){case"boolean":case"number":case"string":case"undefined":return _;case"object":return _;default:return""}}function Ta(_){var $=_.type;return(_=_.nodeName)&&_.toLowerCase()==="input"&&($==="checkbox"||$==="radio")}function Ua(_){var $=Ta(_)?"checked":"value",_e=Object.getOwnPropertyDescriptor(_.constructor.prototype,$),et=""+_[$];if(!_.hasOwnProperty($)&&typeof _e<"u"&&typeof _e.get=="function"&&typeof _e.set=="function"){var tt=_e.get,rt=_e.set;return Object.defineProperty(_,$,{configurable:!0,get:function(){return tt.call(this)},set:function(nt){et=""+nt,rt.call(this,nt)}}),Object.defineProperty(_,$,{enumerable:_e.enumerable}),{getValue:function(){return et},setValue:function(nt){et=""+nt},stopTracking:function(){_._valueTracker=null,delete _[$]}}}}function Va(_){_._valueTracker||(_._valueTracker=Ua(_))}function Wa(_){if(!_)return!1;var $=_._valueTracker;if(!$)return!0;var _e=$.getValue(),et="";return _&&(et=Ta(_)?_.checked?"true":"false":_.value),_=et,_!==_e?($.setValue(_),!0):!1}function Xa(_){if(_=_||(typeof document<"u"?document:void 0),typeof _>"u")return null;try{return _.activeElement||_.body}catch{return _.body}}function Ya(_,$){var _e=$.checked;return A({},$,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_e??_._wrapperState.initialChecked})}function Za(_,$){var _e=$.defaultValue==null?"":$.defaultValue,et=$.checked!=null?$.checked:$.defaultChecked;_e=Sa($.value!=null?$.value:_e),_._wrapperState={initialChecked:et,initialValue:_e,controlled:$.type==="checkbox"||$.type==="radio"?$.checked!=null:$.value!=null}}function ab(_,$){$=$.checked,$!=null&&ta(_,"checked",$,!1)}function bb(_,$){ab(_,$);var _e=Sa($.value),et=$.type;if(_e!=null)et==="number"?(_e===0&&_.value===""||_.value!=_e)&&(_.value=""+_e):_.value!==""+_e&&(_.value=""+_e);else if(et==="submit"||et==="reset"){_.removeAttribute("value");return}$.hasOwnProperty("value")?cb(_,$.type,_e):$.hasOwnProperty("defaultValue")&&cb(_,$.type,Sa($.defaultValue)),$.checked==null&&$.defaultChecked!=null&&(_.defaultChecked=!!$.defaultChecked)}function db(_,$,_e){if($.hasOwnProperty("value")||$.hasOwnProperty("defaultValue")){var et=$.type;if(!(et!=="submit"&&et!=="reset"||$.value!==void 0&&$.value!==null))return;$=""+_._wrapperState.initialValue,_e||$===_.value||(_.value=$),_.defaultValue=$}_e=_.name,_e!==""&&(_.name=""),_.defaultChecked=!!_._wrapperState.initialChecked,_e!==""&&(_.name=_e)}function cb(_,$,_e){($!=="number"||Xa(_.ownerDocument)!==_)&&(_e==null?_.defaultValue=""+_._wrapperState.initialValue:_.defaultValue!==""+_e&&(_.defaultValue=""+_e))}var eb=Array.isArray;function fb(_,$,_e,et){if(_=_.options,$){$={};for(var tt=0;tt<_e.length;tt++)$["$"+_e[tt]]=!0;for(_e=0;_e<_.length;_e++)tt=$.hasOwnProperty("$"+_[_e].value),_[_e].selected!==tt&&(_[_e].selected=tt),tt&&et&&(_[_e].defaultSelected=!0)}else{for(_e=""+Sa(_e),$=null,tt=0;tt<_.length;tt++){if(_[tt].value===_e){_[tt].selected=!0,et&&(_[tt].defaultSelected=!0);return}$!==null||_[tt].disabled||($=_[tt])}$!==null&&($.selected=!0)}}function gb(_,$){if($.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A({},$,{value:void 0,defaultValue:void 0,children:""+_._wrapperState.initialValue})}function hb(_,$){var _e=$.value;if(_e==null){if(_e=$.children,$=$.defaultValue,_e!=null){if($!=null)throw Error(p$2(92));if(eb(_e)){if(1<_e.length)throw Error(p$2(93));_e=_e[0]}$=_e}$==null&&($=""),_e=$}_._wrapperState={initialValue:Sa(_e)}}function ib(_,$){var _e=Sa($.value),et=Sa($.defaultValue);_e!=null&&(_e=""+_e,_e!==_.value&&(_.value=_e),$.defaultValue==null&&_.defaultValue!==_e&&(_.defaultValue=_e)),et!=null&&(_.defaultValue=""+et)}function jb(_){var $=_.textContent;$===_._wrapperState.initialValue&&$!==""&&$!==null&&(_.value=$)}function kb(_){switch(_){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(_,$){return _==null||_==="http://www.w3.org/1999/xhtml"?kb($):_==="http://www.w3.org/2000/svg"&&$==="foreignObject"?"http://www.w3.org/1999/xhtml":_}var mb,nb=function(_){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function($,_e,et,tt){MSApp.execUnsafeLocalFunction(function(){return _($,_e,et,tt)})}:_}(function(_,$){if(_.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _)_.innerHTML=$;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+$.valueOf().toString()+"</svg>",$=mb.firstChild;_.firstChild;)_.removeChild(_.firstChild);for(;$.firstChild;)_.appendChild($.firstChild)}});function ob(_,$){if($){var _e=_.firstChild;if(_e&&_e===_.lastChild&&_e.nodeType===3){_e.nodeValue=$;return}}_.textContent=$}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(_){qb.forEach(function($){$=$+_.charAt(0).toUpperCase()+_.substring(1),pb[$]=pb[_]})});function rb(_,$,_e){return $==null||typeof $=="boolean"||$===""?"":_e||typeof $!="number"||$===0||pb.hasOwnProperty(_)&&pb[_]?(""+$).trim():$+"px"}function sb(_,$){_=_.style;for(var _e in $)if($.hasOwnProperty(_e)){var et=_e.indexOf("--")===0,tt=rb(_e,$[_e],et);_e==="float"&&(_e="cssFloat"),et?_.setProperty(_e,tt):_[_e]=tt}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(_,$){if($){if(tb[_]&&($.children!=null||$.dangerouslySetInnerHTML!=null))throw Error(p$2(137,_));if($.dangerouslySetInnerHTML!=null){if($.children!=null)throw Error(p$2(60));if(typeof $.dangerouslySetInnerHTML!="object"||!("__html"in $.dangerouslySetInnerHTML))throw Error(p$2(61))}if($.style!=null&&typeof $.style!="object")throw Error(p$2(62))}}function vb(_,$){if(_.indexOf("-")===-1)return typeof $.is=="string";switch(_){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(_){return _=_.target||_.srcElement||window,_.correspondingUseElement&&(_=_.correspondingUseElement),_.nodeType===3?_.parentNode:_}var yb=null,zb=null,Ab=null;function Bb(_){if(_=Cb(_)){if(typeof yb!="function")throw Error(p$2(280));var $=_.stateNode;$&&($=Db($),yb(_.stateNode,_.type,$))}}function Eb(_){zb?Ab?Ab.push(_):Ab=[_]:zb=_}function Fb(){if(zb){var _=zb,$=Ab;if(Ab=zb=null,Bb(_),$)for(_=0;_<$.length;_++)Bb($[_])}}function Gb(_,$){return _($)}function Hb(){}var Ib=!1;function Jb(_,$,_e){if(Ib)return _($,_e);Ib=!0;try{return Gb(_,$,_e)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(_,$){var _e=_.stateNode;if(_e===null)return null;var et=Db(_e);if(et===null)return null;_e=et[$];e:switch($){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(et=!et.disabled)||(_=_.type,et=!(_==="button"||_==="input"||_==="select"||_==="textarea")),_=!et;break e;default:_=!1}if(_)return null;if(_e&&typeof _e!="function")throw Error(p$2(231,$,typeof _e));return _e}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(_,$,_e,et,tt,rt,nt,it,st){var at=Array.prototype.slice.call(arguments,3);try{$.apply(_e,at)}catch(ot){this.onError(ot)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(_){Ob=!0,Pb=_}};function Tb(_,$,_e,et,tt,rt,nt,it,st){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(_,$,_e,et,tt,rt,nt,it,st){if(Tb.apply(this,arguments),Ob){if(Ob){var at=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=at)}}function Vb(_){var $=_,_e=_;if(_.alternate)for(;$.return;)$=$.return;else{_=$;do $=_,$.flags&4098&&(_e=$.return),_=$.return;while(_)}return $.tag===3?_e:null}function Wb(_){if(_.tag===13){var $=_.memoizedState;if($===null&&(_=_.alternate,_!==null&&($=_.memoizedState)),$!==null)return $.dehydrated}return null}function Xb(_){if(Vb(_)!==_)throw Error(p$2(188))}function Yb(_){var $=_.alternate;if(!$){if($=Vb(_),$===null)throw Error(p$2(188));return $!==_?null:_}for(var _e=_,et=$;;){var tt=_e.return;if(tt===null)break;var rt=tt.alternate;if(rt===null){if(et=tt.return,et!==null){_e=et;continue}break}if(tt.child===rt.child){for(rt=tt.child;rt;){if(rt===_e)return Xb(tt),_;if(rt===et)return Xb(tt),$;rt=rt.sibling}throw Error(p$2(188))}if(_e.return!==et.return)_e=tt,et=rt;else{for(var nt=!1,it=tt.child;it;){if(it===_e){nt=!0,_e=tt,et=rt;break}if(it===et){nt=!0,et=tt,_e=rt;break}it=it.sibling}if(!nt){for(it=rt.child;it;){if(it===_e){nt=!0,_e=rt,et=tt;break}if(it===et){nt=!0,et=rt,_e=tt;break}it=it.sibling}if(!nt)throw Error(p$2(189))}}if(_e.alternate!==et)throw Error(p$2(190))}if(_e.tag!==3)throw Error(p$2(188));return _e.stateNode.current===_e?_:$}function Zb(_){return _=Yb(_),_!==null?$b(_):null}function $b(_){if(_.tag===5||_.tag===6)return _;for(_=_.child;_!==null;){var $=$b(_);if($!==null)return $;_=_.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec$1=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(_){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,_,void 0,(_.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(_){return _>>>=0,_===0?32:31-(pc(_)/qc|0)|0}var rc=64,sc=4194304;function tc(_){switch(_&-_){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _}}function uc(_,$){var _e=_.pendingLanes;if(_e===0)return 0;var et=0,tt=_.suspendedLanes,rt=_.pingedLanes,nt=_e&268435455;if(nt!==0){var it=nt&~tt;it!==0?et=tc(it):(rt&=nt,rt!==0&&(et=tc(rt)))}else nt=_e&~tt,nt!==0?et=tc(nt):rt!==0&&(et=tc(rt));if(et===0)return 0;if($!==0&&$!==et&&!($&tt)&&(tt=et&-et,rt=$&-$,tt>=rt||tt===16&&(rt&4194240)!==0))return $;if(et&4&&(et|=_e&16),$=_.entangledLanes,$!==0)for(_=_.entanglements,$&=et;0<$;)_e=31-oc($),tt=1<<_e,et|=_[_e],$&=~tt;return et}function vc(_,$){switch(_){case 1:case 2:case 4:return $+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return $+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(_,$){for(var _e=_.suspendedLanes,et=_.pingedLanes,tt=_.expirationTimes,rt=_.pendingLanes;0<rt;){var nt=31-oc(rt),it=1<<nt,st=tt[nt];st===-1?(!(it&_e)||it&et)&&(tt[nt]=vc(it,$)):st<=$&&(_.expiredLanes|=it),rt&=~it}}function xc(_){return _=_.pendingLanes&-1073741825,_!==0?_:_&1073741824?1073741824:0}function yc(){var _=rc;return rc<<=1,!(rc&4194240)&&(rc=64),_}function zc(_){for(var $=[],_e=0;31>_e;_e++)$.push(_);return $}function Ac(_,$,_e){_.pendingLanes|=$,$!==536870912&&(_.suspendedLanes=0,_.pingedLanes=0),_=_.eventTimes,$=31-oc($),_[$]=_e}function Bc(_,$){var _e=_.pendingLanes&~$;_.pendingLanes=$,_.suspendedLanes=0,_.pingedLanes=0,_.expiredLanes&=$,_.mutableReadLanes&=$,_.entangledLanes&=$,$=_.entanglements;var et=_.eventTimes;for(_=_.expirationTimes;0<_e;){var tt=31-oc(_e),rt=1<<tt;$[tt]=0,et[tt]=-1,_[tt]=-1,_e&=~rt}}function Cc(_,$){var _e=_.entangledLanes|=$;for(_=_.entanglements;_e;){var et=31-oc(_e),tt=1<<et;tt&$|_[et]&$&&(_[et]|=$),_e&=~tt}}var C=0;function Dc(_){return _&=-_,1<_?4<_?_&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(_,$){switch(_){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete($.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete($.pointerId)}}function Tc(_,$,_e,et,tt,rt){return _===null||_.nativeEvent!==rt?(_={blockedOn:$,domEventName:_e,eventSystemFlags:et,nativeEvent:rt,targetContainers:[tt]},$!==null&&($=Cb($),$!==null&&Fc($)),_):(_.eventSystemFlags|=et,$=_.targetContainers,tt!==null&&$.indexOf(tt)===-1&&$.push(tt),_)}function Uc(_,$,_e,et,tt){switch($){case"focusin":return Lc=Tc(Lc,_,$,_e,et,tt),!0;case"dragenter":return Mc=Tc(Mc,_,$,_e,et,tt),!0;case"mouseover":return Nc=Tc(Nc,_,$,_e,et,tt),!0;case"pointerover":var rt=tt.pointerId;return Oc.set(rt,Tc(Oc.get(rt)||null,_,$,_e,et,tt)),!0;case"gotpointercapture":return rt=tt.pointerId,Pc.set(rt,Tc(Pc.get(rt)||null,_,$,_e,et,tt)),!0}return!1}function Vc(_){var $=Wc(_.target);if($!==null){var _e=Vb($);if(_e!==null){if($=_e.tag,$===13){if($=Wb(_e),$!==null){_.blockedOn=$,Ic(_.priority,function(){Gc(_e)});return}}else if($===3&&_e.stateNode.current.memoizedState.isDehydrated){_.blockedOn=_e.tag===3?_e.stateNode.containerInfo:null;return}}}_.blockedOn=null}function Xc(_){if(_.blockedOn!==null)return!1;for(var $=_.targetContainers;0<$.length;){var _e=Yc(_.domEventName,_.eventSystemFlags,$[0],_.nativeEvent);if(_e===null){_e=_.nativeEvent;var et=new _e.constructor(_e.type,_e);wb=et,_e.target.dispatchEvent(et),wb=null}else return $=Cb(_e),$!==null&&Fc($),_.blockedOn=_e,!1;$.shift()}return!0}function Zc(_,$,_e){Xc(_)&&_e.delete($)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(_,$){_.blockedOn===$&&(_.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(_){function $(tt){return ad(tt,_)}if(0<Kc.length){ad(Kc[0],_);for(var _e=1;_e<Kc.length;_e++){var et=Kc[_e];et.blockedOn===_&&(et.blockedOn=null)}}for(Lc!==null&&ad(Lc,_),Mc!==null&&ad(Mc,_),Nc!==null&&ad(Nc,_),Oc.forEach($),Pc.forEach($),_e=0;_e<Qc.length;_e++)et=Qc[_e],et.blockedOn===_&&(et.blockedOn=null);for(;0<Qc.length&&(_e=Qc[0],_e.blockedOn===null);)Vc(_e),_e.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(_,$,_e,et){var tt=C,rt=cd.transition;cd.transition=null;try{C=1,fd(_,$,_e,et)}finally{C=tt,cd.transition=rt}}function gd(_,$,_e,et){var tt=C,rt=cd.transition;cd.transition=null;try{C=4,fd(_,$,_e,et)}finally{C=tt,cd.transition=rt}}function fd(_,$,_e,et){if(dd){var tt=Yc(_,$,_e,et);if(tt===null)hd(_,$,et,id,_e),Sc(_,et);else if(Uc(tt,_,$,_e,et))et.stopPropagation();else if(Sc(_,et),$&4&&-1<Rc.indexOf(_)){for(;tt!==null;){var rt=Cb(tt);if(rt!==null&&Ec(rt),rt=Yc(_,$,_e,et),rt===null&&hd(_,$,et,id,_e),rt===tt)break;tt=rt}tt!==null&&et.stopPropagation()}else hd(_,$,et,null,_e)}}var id=null;function Yc(_,$,_e,et){if(id=null,_=xb(et),_=Wc(_),_!==null)if($=Vb(_),$===null)_=null;else if(_e=$.tag,_e===13){if(_=Wb($),_!==null)return _;_=null}else if(_e===3){if($.stateNode.current.memoizedState.isDehydrated)return $.tag===3?$.stateNode.containerInfo:null;_=null}else $!==_&&(_=null);return id=_,null}function jd(_){switch(_){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var _,$=ld,_e=$.length,et,tt="value"in kd?kd.value:kd.textContent,rt=tt.length;for(_=0;_<_e&&$[_]===tt[_];_++);var nt=_e-_;for(et=1;et<=nt&&$[_e-et]===tt[rt-et];et++);return md=tt.slice(_,1<et?1-et:void 0)}function od(_){var $=_.keyCode;return"charCode"in _?(_=_.charCode,_===0&&$===13&&(_=13)):_=$,_===10&&(_=13),32<=_||_===13?_:0}function pd(){return!0}function qd(){return!1}function rd(_){function $(_e,et,tt,rt,nt){this._reactName=_e,this._targetInst=tt,this.type=et,this.nativeEvent=rt,this.target=nt,this.currentTarget=null;for(var it in _)_.hasOwnProperty(it)&&(_e=_[it],this[it]=_e?_e(rt):rt[it]);return this.isDefaultPrevented=(rt.defaultPrevented!=null?rt.defaultPrevented:rt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A($.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _e=this.nativeEvent;_e&&(_e.preventDefault?_e.preventDefault():typeof _e.returnValue!="unknown"&&(_e.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var _e=this.nativeEvent;_e&&(_e.stopPropagation?_e.stopPropagation():typeof _e.cancelBubble!="unknown"&&(_e.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),$}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_){return _.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(_){return _.relatedTarget===void 0?_.fromElement===_.srcElement?_.toElement:_.fromElement:_.relatedTarget},movementX:function(_){return"movementX"in _?_.movementX:(_!==yd&&(yd&&_.type==="mousemove"?(wd=_.screenX-yd.screenX,xd=_.screenY-yd.screenY):xd=wd=0,yd=_),wd)},movementY:function(_){return"movementY"in _?_.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(_){return"clipboardData"in _?_.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_){var $=this.nativeEvent;return $.getModifierState?$.getModifierState(_):(_=Od[_])?!!$[_]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(_){if(_.key){var $=Md[_.key]||_.key;if($!=="Unidentified")return $}return _.type==="keypress"?(_=od(_),_===13?"Enter":String.fromCharCode(_)):_.type==="keydown"||_.type==="keyup"?Nd[_.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(_){return _.type==="keypress"?od(_):0},keyCode:function(_){return _.type==="keydown"||_.type==="keyup"?_.keyCode:0},which:function(_){return _.type==="keypress"?od(_):_.type==="keydown"||_.type==="keyup"?_.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(_){return"deltaX"in _?_.deltaX:"wheelDeltaX"in _?-_.wheelDeltaX:0},deltaY:function(_){return"deltaY"in _?_.deltaY:"wheelDeltaY"in _?-_.wheelDeltaY:"wheelDelta"in _?-_.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae$1||be&&8<be&&11>=be),ee$1=" ",fe=!1;function ge(_,$){switch(_){case"keyup":return $d.indexOf($.keyCode)!==-1;case"keydown":return $.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(_){return _=_.detail,typeof _=="object"&&"data"in _?_.data:null}var ie=!1;function je(_,$){switch(_){case"compositionend":return he($);case"keypress":return $.which!==32?null:(fe=!0,ee$1);case"textInput":return _=$.data,_===ee$1&&fe?null:_;default:return null}}function ke(_,$){if(ie)return _==="compositionend"||!ae$1&&ge(_,$)?(_=nd(),md=ld=kd=null,ie=!1,_):null;switch(_){case"paste":return null;case"keypress":if(!($.ctrlKey||$.altKey||$.metaKey)||$.ctrlKey&&$.altKey){if($.char&&1<$.char.length)return $.char;if($.which)return String.fromCharCode($.which)}return null;case"compositionend":return de&&$.locale!=="ko"?null:$.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(_){var $=_&&_.nodeName&&_.nodeName.toLowerCase();return $==="input"?!!le[_.type]:$==="textarea"}function ne$1(_,$,_e,et){Eb(et),$=oe$1($,"onChange"),0<$.length&&(_e=new td("onChange","change",null,_e,et),_.push({event:_e,listeners:$}))}var pe=null,qe=null;function re$1(_){se$1(_,0)}function te$1(_){var $=ue(_);if(Wa($))return _}function ve(_,$){if(_==="change")return $}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(_){if(_.propertyName==="value"&&te$1(qe)){var $=[];ne$1($,qe,_,xb(_)),Jb(re$1,$)}}function Ce(_,$,_e){_==="focusin"?(Ae(),pe=$,qe=_e,pe.attachEvent("onpropertychange",Be)):_==="focusout"&&Ae()}function De(_){if(_==="selectionchange"||_==="keyup"||_==="keydown")return te$1(qe)}function Ee(_,$){if(_==="click")return te$1($)}function Fe(_,$){if(_==="input"||_==="change")return te$1($)}function Ge(_,$){return _===$&&(_!==0||1/_===1/$)||_!==_&&$!==$}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(_,$){if(He(_,$))return!0;if(typeof _!="object"||_===null||typeof $!="object"||$===null)return!1;var _e=Object.keys(_),et=Object.keys($);if(_e.length!==et.length)return!1;for(et=0;et<_e.length;et++){var tt=_e[et];if(!ja.call($,tt)||!He(_[tt],$[tt]))return!1}return!0}function Je(_){for(;_&&_.firstChild;)_=_.firstChild;return _}function Ke(_,$){var _e=Je(_);_=0;for(var et;_e;){if(_e.nodeType===3){if(et=_+_e.textContent.length,_<=$&&et>=$)return{node:_e,offset:$-_};_=et}e:{for(;_e;){if(_e.nextSibling){_e=_e.nextSibling;break e}_e=_e.parentNode}_e=void 0}_e=Je(_e)}}function Le(_,$){return _&&$?_===$?!0:_&&_.nodeType===3?!1:$&&$.nodeType===3?Le(_,$.parentNode):"contains"in _?_.contains($):_.compareDocumentPosition?!!(_.compareDocumentPosition($)&16):!1:!1}function Me(){for(var _=window,$=Xa();$ instanceof _.HTMLIFrameElement;){try{var _e=typeof $.contentWindow.location.href=="string"}catch{_e=!1}if(_e)_=$.contentWindow;else break;$=Xa(_.document)}return $}function Ne(_){var $=_&&_.nodeName&&_.nodeName.toLowerCase();return $&&($==="input"&&(_.type==="text"||_.type==="search"||_.type==="tel"||_.type==="url"||_.type==="password")||$==="textarea"||_.contentEditable==="true")}function Oe(_){var $=Me(),_e=_.focusedElem,et=_.selectionRange;if($!==_e&&_e&&_e.ownerDocument&&Le(_e.ownerDocument.documentElement,_e)){if(et!==null&&Ne(_e)){if($=et.start,_=et.end,_===void 0&&(_=$),"selectionStart"in _e)_e.selectionStart=$,_e.selectionEnd=Math.min(_,_e.value.length);else if(_=($=_e.ownerDocument||document)&&$.defaultView||window,_.getSelection){_=_.getSelection();var tt=_e.textContent.length,rt=Math.min(et.start,tt);et=et.end===void 0?rt:Math.min(et.end,tt),!_.extend&&rt>et&&(tt=et,et=rt,rt=tt),tt=Ke(_e,rt);var nt=Ke(_e,et);tt&&nt&&(_.rangeCount!==1||_.anchorNode!==tt.node||_.anchorOffset!==tt.offset||_.focusNode!==nt.node||_.focusOffset!==nt.offset)&&($=$.createRange(),$.setStart(tt.node,tt.offset),_.removeAllRanges(),rt>et?(_.addRange($),_.extend(nt.node,nt.offset)):($.setEnd(nt.node,nt.offset),_.addRange($)))}}for($=[],_=_e;_=_.parentNode;)_.nodeType===1&&$.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<$.length;_e++)_=$[_e],_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te$1=!1;function Ue(_,$,_e){var et=_e.window===_e?_e.document:_e.nodeType===9?_e:_e.ownerDocument;Te$1||Qe==null||Qe!==Xa(et)||(et=Qe,"selectionStart"in et&&Ne(et)?et={start:et.selectionStart,end:et.selectionEnd}:(et=(et.ownerDocument&&et.ownerDocument.defaultView||window).getSelection(),et={anchorNode:et.anchorNode,anchorOffset:et.anchorOffset,focusNode:et.focusNode,focusOffset:et.focusOffset}),Se&&Ie(Se,et)||(Se=et,et=oe$1(Re,"onSelect"),0<et.length&&($=new td("onSelect","select",null,$,_e),_.push({event:$,listeners:et}),$.target=Qe)))}function Ve(_,$){var _e={};return _e[_.toLowerCase()]=$.toLowerCase(),_e["Webkit"+_]="webkit"+$,_e["Moz"+_]="moz"+$,_e}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(_){if(Xe[_])return Xe[_];if(!We[_])return _;var $=We[_],_e;for(_e in $)if($.hasOwnProperty(_e)&&_e in Ye)return Xe[_]=$[_e];return _}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(_,$){df.set(_,$),fa($,[_])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(_,$,_e){var et=_.type||"unknown-event";_.currentTarget=_e,Ub(et,$,void 0,_),_.currentTarget=null}function se$1(_,$){$=($&4)!==0;for(var _e=0;_e<_.length;_e++){var et=_[_e],tt=et.event;et=et.listeners;e:{var rt=void 0;if($)for(var nt=et.length-1;0<=nt;nt--){var it=et[nt],st=it.instance,at=it.currentTarget;if(it=it.listener,st!==rt&&tt.isPropagationStopped())break e;nf(tt,it,at),rt=st}else for(nt=0;nt<et.length;nt++){if(it=et[nt],st=it.instance,at=it.currentTarget,it=it.listener,st!==rt&&tt.isPropagationStopped())break e;nf(tt,it,at),rt=st}}}if(Qb)throw _=Rb,Qb=!1,Rb=null,_}function D$1(_,$){var _e=$[of];_e===void 0&&(_e=$[of]=new Set);var et=_+"__bubble";_e.has(et)||(pf($,_,2,!1),_e.add(et))}function qf(_,$,_e){var et=0;$&&(et|=4),pf(_e,_,et,$)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(_){if(!_[rf]){_[rf]=!0,da.forEach(function(_e){_e!=="selectionchange"&&(mf.has(_e)||qf(_e,!1,_),qf(_e,!0,_))});var $=_.nodeType===9?_:_.ownerDocument;$===null||$[rf]||($[rf]=!0,qf("selectionchange",!1,$))}}function pf(_,$,_e,et){switch(jd($)){case 1:var tt=ed;break;case 4:tt=gd;break;default:tt=fd}_e=tt.bind(null,$,_e,_),tt=void 0,!Lb||$!=="touchstart"&&$!=="touchmove"&&$!=="wheel"||(tt=!0),et?tt!==void 0?_.addEventListener($,_e,{capture:!0,passive:tt}):_.addEventListener($,_e,!0):tt!==void 0?_.addEventListener($,_e,{passive:tt}):_.addEventListener($,_e,!1)}function hd(_,$,_e,et,tt){var rt=et;if(!($&1)&&!($&2)&&et!==null)e:for(;;){if(et===null)return;var nt=et.tag;if(nt===3||nt===4){var it=et.stateNode.containerInfo;if(it===tt||it.nodeType===8&&it.parentNode===tt)break;if(nt===4)for(nt=et.return;nt!==null;){var st=nt.tag;if((st===3||st===4)&&(st=nt.stateNode.containerInfo,st===tt||st.nodeType===8&&st.parentNode===tt))return;nt=nt.return}for(;it!==null;){if(nt=Wc(it),nt===null)return;if(st=nt.tag,st===5||st===6){et=rt=nt;continue e}it=it.parentNode}}et=et.return}Jb(function(){var at=rt,ot=xb(_e),dt=[];e:{var ht=df.get(_);if(ht!==void 0){var yt=td,vt=_;switch(_){case"keypress":if(od(_e)===0)break e;case"keydown":case"keyup":yt=Rd;break;case"focusin":vt="focus",yt=Fd;break;case"focusout":vt="blur",yt=Fd;break;case"beforeblur":case"afterblur":yt=Fd;break;case"click":if(_e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=Vd;break;case $e:case af:case bf:yt=Hd;break;case cf:yt=Xd;break;case"scroll":yt=vd;break;case"wheel":yt=Zd;break;case"copy":case"cut":case"paste":yt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=Td}var xt=($&4)!==0,wt=!xt&&_==="scroll",Et=xt?ht!==null?ht+"Capture":null:ht;xt=[];for(var At=at,jt;At!==null;){jt=At;var kt=jt.stateNode;if(jt.tag===5&&kt!==null&&(jt=kt,Et!==null&&(kt=Kb(At,Et),kt!=null&&xt.push(tf$1(At,kt,jt)))),wt)break;At=At.return}0<xt.length&&(ht=new yt(ht,vt,null,_e,ot),dt.push({event:ht,listeners:xt}))}}if(!($&7)){e:{if(ht=_==="mouseover"||_==="pointerover",yt=_==="mouseout"||_==="pointerout",ht&&_e!==wb&&(vt=_e.relatedTarget||_e.fromElement)&&(Wc(vt)||vt[uf]))break e;if((yt||ht)&&(ht=ot.window===ot?ot:(ht=ot.ownerDocument)?ht.defaultView||ht.parentWindow:window,yt?(vt=_e.relatedTarget||_e.toElement,yt=at,vt=vt?Wc(vt):null,vt!==null&&(wt=Vb(vt),vt!==wt||vt.tag!==5&&vt.tag!==6)&&(vt=null)):(yt=null,vt=at),yt!==vt)){if(xt=Bd,kt="onMouseLeave",Et="onMouseEnter",At="mouse",(_==="pointerout"||_==="pointerover")&&(xt=Td,kt="onPointerLeave",Et="onPointerEnter",At="pointer"),wt=yt==null?ht:ue(yt),jt=vt==null?ht:ue(vt),ht=new xt(kt,At+"leave",yt,_e,ot),ht.target=wt,ht.relatedTarget=jt,kt=null,Wc(ot)===at&&(xt=new xt(Et,At+"enter",vt,_e,ot),xt.target=jt,xt.relatedTarget=wt,kt=xt),wt=kt,yt&&vt)t:{for(xt=yt,Et=vt,At=0,jt=xt;jt;jt=vf(jt))At++;for(jt=0,kt=Et;kt;kt=vf(kt))jt++;for(;0<At-jt;)xt=vf(xt),At--;for(;0<jt-At;)Et=vf(Et),jt--;for(;At--;){if(xt===Et||Et!==null&&xt===Et.alternate)break t;xt=vf(xt),Et=vf(Et)}xt=null}else xt=null;yt!==null&&wf(dt,ht,yt,xt,!1),vt!==null&&wt!==null&&wf(dt,wt,vt,xt,!0)}}e:{if(ht=at?ue(at):window,yt=ht.nodeName&&ht.nodeName.toLowerCase(),yt==="select"||yt==="input"&&ht.type==="file")var Lt=ve;else if(me(ht))if(we)Lt=Fe;else{Lt=De;var Bt=Ce}else(yt=ht.nodeName)&&yt.toLowerCase()==="input"&&(ht.type==="checkbox"||ht.type==="radio")&&(Lt=Ee);if(Lt&&(Lt=Lt(_,at))){ne$1(dt,Lt,_e,ot);break e}Bt&&Bt(_,ht,at),_==="focusout"&&(Bt=ht._wrapperState)&&Bt.controlled&&ht.type==="number"&&cb(ht,"number",ht.value)}switch(Bt=at?ue(at):window,_){case"focusin":(me(Bt)||Bt.contentEditable==="true")&&(Qe=Bt,Re=at,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue(dt,_e,ot);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(dt,_e,ot)}var Gt;if(ae$1)e:{switch(_){case"compositionstart":var er="onCompositionStart";break e;case"compositionend":er="onCompositionEnd";break e;case"compositionupdate":er="onCompositionUpdate";break e}er=void 0}else ie?ge(_,_e)&&(er="onCompositionEnd"):_==="keydown"&&_e.keyCode===229&&(er="onCompositionStart");er&&(de&&_e.locale!=="ko"&&(ie||er!=="onCompositionStart"?er==="onCompositionEnd"&&ie&&(Gt=nd()):(kd=ot,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Bt=oe$1(at,er),0<Bt.length&&(er=new Ld(er,_,null,_e,ot),dt.push({event:er,listeners:Bt}),Gt?er.data=Gt:(Gt=he(_e),Gt!==null&&(er.data=Gt)))),(Gt=ce?je(_,_e):ke(_,_e))&&(at=oe$1(at,"onBeforeInput"),0<at.length&&(ot=new Ld("onBeforeInput","beforeinput",null,_e,ot),dt.push({event:ot,listeners:at}),ot.data=Gt))}se$1(dt,$)})}function tf$1(_,$,_e){return{instance:_,listener:$,currentTarget:_e}}function oe$1(_,$){for(var _e=$+"Capture",et=[];_!==null;){var tt=_,rt=tt.stateNode;tt.tag===5&&rt!==null&&(tt=rt,rt=Kb(_,_e),rt!=null&&et.unshift(tf$1(_,rt,tt)),rt=Kb(_,$),rt!=null&&et.push(tf$1(_,rt,tt))),_=_.return}return et}function vf(_){if(_===null)return null;do _=_.return;while(_&&_.tag!==5);return _||null}function wf(_,$,_e,et,tt){for(var rt=$._reactName,nt=[];_e!==null&&_e!==et;){var it=_e,st=it.alternate,at=it.stateNode;if(st!==null&&st===et)break;it.tag===5&&at!==null&&(it=at,tt?(st=Kb(_e,rt),st!=null&&nt.unshift(tf$1(_e,st,it))):tt||(st=Kb(_e,rt),st!=null&&nt.push(tf$1(_e,st,it)))),_e=_e.return}nt.length!==0&&_.push({event:$,listeners:nt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(_){return(typeof _=="string"?_:""+_).replace(xf,`
`).replace(yf,"")}function Af(_,$,_e){if($=zf($),zf(_)!==$&&_e)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(_,$){return _==="textarea"||_==="noscript"||typeof $.children=="string"||typeof $.children=="number"||typeof $.dangerouslySetInnerHTML=="object"&&$.dangerouslySetInnerHTML!==null&&$.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(_){return Hf.resolve(null).then(_).catch(If)}:Ff;function If(_){setTimeout(function(){throw _})}function Kf(_,$){var _e=$,et=0;do{var tt=_e.nextSibling;if(_.removeChild(_e),tt&&tt.nodeType===8)if(_e=tt.data,_e==="/$"){if(et===0){_.removeChild(tt),bd($);return}et--}else _e!=="$"&&_e!=="$?"&&_e!=="$!"||et++;_e=tt}while(_e);bd($)}function Lf(_){for(;_!=null;_=_.nextSibling){var $=_.nodeType;if($===1||$===3)break;if($===8){if($=_.data,$==="$"||$==="$!"||$==="$?")break;if($==="/$")return null}}return _}function Mf(_){_=_.previousSibling;for(var $=0;_;){if(_.nodeType===8){var _e=_.data;if(_e==="$"||_e==="$!"||_e==="$?"){if($===0)return _;$--}else _e==="/$"&&$++}_=_.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(_){var $=_[Of];if($)return $;for(var _e=_.parentNode;_e;){if($=_e[uf]||_e[Of]){if(_e=$.alternate,$.child!==null||_e!==null&&_e.child!==null)for(_=Mf(_);_!==null;){if(_e=_[Of])return _e;_=Mf(_)}return $}_=_e,_e=_.parentNode}return null}function Cb(_){return _=_[Of]||_[uf],!_||_.tag!==5&&_.tag!==6&&_.tag!==13&&_.tag!==3?null:_}function ue(_){if(_.tag===5||_.tag===6)return _.stateNode;throw Error(p$2(33))}function Db(_){return _[Pf]||null}var Sf=[],Tf=-1;function Uf(_){return{current:_}}function E$1(_){0>Tf||(_.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(_,$){Tf++,Sf[Tf]=_.current,_.current=$}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(_,$){var _e=_.type.contextTypes;if(!_e)return Vf;var et=_.stateNode;if(et&&et.__reactInternalMemoizedUnmaskedChildContext===$)return et.__reactInternalMemoizedMaskedChildContext;var tt={},rt;for(rt in _e)tt[rt]=$[rt];return et&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=$,_.__reactInternalMemoizedMaskedChildContext=tt),tt}function Zf(_){return _=_.childContextTypes,_!=null}function $f(){E$1(Wf),E$1(H)}function ag(_,$,_e){if(H.current!==Vf)throw Error(p$2(168));G(H,$),G(Wf,_e)}function bg(_,$,_e){var et=_.stateNode;if($=$.childContextTypes,typeof et.getChildContext!="function")return _e;et=et.getChildContext();for(var tt in et)if(!(tt in $))throw Error(p$2(108,Ra(_)||"Unknown",tt));return A({},_e,et)}function cg(_){return _=(_=_.stateNode)&&_.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,_),G(Wf,Wf.current),!0}function dg(_,$,_e){var et=_.stateNode;if(!et)throw Error(p$2(169));_e?(_=bg(_,$,Xf),et.__reactInternalMemoizedMergedChildContext=_,E$1(Wf),E$1(H),G(H,_)):E$1(Wf),G(Wf,_e)}var eg=null,fg=!1,gg=!1;function hg(_){eg===null?eg=[_]:eg.push(_)}function ig(_){fg=!0,hg(_)}function jg(){if(!gg&&eg!==null){gg=!0;var _=0,$=C;try{var _e=eg;for(C=1;_<_e.length;_++){var et=_e[_];do et=et(!0);while(et!==null)}eg=null,fg=!1}catch(tt){throw eg!==null&&(eg=eg.slice(_+1)),ac(fc,jg),tt}finally{C=$,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(_,$){kg[lg++]=ng,kg[lg++]=mg,mg=_,ng=$}function ug(_,$,_e){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=_;var et=rg;_=sg;var tt=32-oc(et)-1;et&=~(1<<tt),_e+=1;var rt=32-oc($)+tt;if(30<rt){var nt=tt-tt%5;rt=(et&(1<<nt)-1).toString(32),et>>=nt,tt-=nt,rg=1<<32-oc($)+tt|_e<<tt|et,sg=rt+_}else rg=1<<rt|_e<<tt|et,sg=_}function vg(_){_.return!==null&&(tg(_,1),ug(_,1,0))}function wg(_){for(;_===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;_===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(_,$){var _e=Bg(5,null,null,0);_e.elementType="DELETED",_e.stateNode=$,_e.return=_,$=_.deletions,$===null?(_.deletions=[_e],_.flags|=16):$.push(_e)}function Cg(_,$){switch(_.tag){case 5:var _e=_.type;return $=$.nodeType!==1||_e.toLowerCase()!==$.nodeName.toLowerCase()?null:$,$!==null?(_.stateNode=$,xg=_,yg=Lf($.firstChild),!0):!1;case 6:return $=_.pendingProps===""||$.nodeType!==3?null:$,$!==null?(_.stateNode=$,xg=_,yg=null,!0):!1;case 13:return $=$.nodeType!==8?null:$,$!==null?(_e=qg!==null?{id:rg,overflow:sg}:null,_.memoizedState={dehydrated:$,treeContext:_e,retryLane:1073741824},_e=Bg(18,null,null,0),_e.stateNode=$,_e.return=_,_.child=_e,xg=_,yg=null,!0):!1;default:return!1}}function Dg(_){return(_.mode&1)!==0&&(_.flags&128)===0}function Eg(_){if(I){var $=yg;if($){var _e=$;if(!Cg(_,$)){if(Dg(_))throw Error(p$2(418));$=Lf(_e.nextSibling);var et=xg;$&&Cg(_,$)?Ag(et,_e):(_.flags=_.flags&-4097|2,I=!1,xg=_)}}else{if(Dg(_))throw Error(p$2(418));_.flags=_.flags&-4097|2,I=!1,xg=_}}}function Fg(_){for(_=_.return;_!==null&&_.tag!==5&&_.tag!==3&&_.tag!==13;)_=_.return;xg=_}function Gg(_){if(_!==xg)return!1;if(!I)return Fg(_),I=!0,!1;var $;if(($=_.tag!==3)&&!($=_.tag!==5)&&($=_.type,$=$!=="head"&&$!=="body"&&!Ef(_.type,_.memoizedProps)),$&&($=yg)){if(Dg(_))throw Hg(),Error(p$2(418));for(;$;)Ag(_,$),$=Lf($.nextSibling)}if(Fg(_),_.tag===13){if(_=_.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(p$2(317));e:{for(_=_.nextSibling,$=0;_;){if(_.nodeType===8){var _e=_.data;if(_e==="/$"){if($===0){yg=Lf(_.nextSibling);break e}$--}else _e!=="$"&&_e!=="$!"&&_e!=="$?"||$++}_=_.nextSibling}yg=null}}else yg=xg?Lf(_.stateNode.nextSibling):null;return!0}function Hg(){for(var _=yg;_;)_=Lf(_.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(_){zg===null?zg=[_]:zg.push(_)}var Kg=ua.ReactCurrentBatchConfig;function Lg(_,$,_e){if(_=_e.ref,_!==null&&typeof _!="function"&&typeof _!="object"){if(_e._owner){if(_e=_e._owner,_e){if(_e.tag!==1)throw Error(p$2(309));var et=_e.stateNode}if(!et)throw Error(p$2(147,_));var tt=et,rt=""+_;return $!==null&&$.ref!==null&&typeof $.ref=="function"&&$.ref._stringRef===rt?$.ref:($=function(nt){var it=tt.refs;nt===null?delete it[rt]:it[rt]=nt},$._stringRef=rt,$)}if(typeof _!="string")throw Error(p$2(284));if(!_e._owner)throw Error(p$2(290,_))}return _}function Mg(_,$){throw _=Object.prototype.toString.call($),Error(p$2(31,_==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":_))}function Ng(_){var $=_._init;return $(_._payload)}function Og(_){function $(Et,At){if(_){var jt=Et.deletions;jt===null?(Et.deletions=[At],Et.flags|=16):jt.push(At)}}function _e(Et,At){if(!_)return null;for(;At!==null;)$(Et,At),At=At.sibling;return null}function et(Et,At){for(Et=new Map;At!==null;)At.key!==null?Et.set(At.key,At):Et.set(At.index,At),At=At.sibling;return Et}function tt(Et,At){return Et=Pg(Et,At),Et.index=0,Et.sibling=null,Et}function rt(Et,At,jt){return Et.index=jt,_?(jt=Et.alternate,jt!==null?(jt=jt.index,jt<At?(Et.flags|=2,At):jt):(Et.flags|=2,At)):(Et.flags|=1048576,At)}function nt(Et){return _&&Et.alternate===null&&(Et.flags|=2),Et}function it(Et,At,jt,kt){return At===null||At.tag!==6?(At=Qg(jt,Et.mode,kt),At.return=Et,At):(At=tt(At,jt),At.return=Et,At)}function st(Et,At,jt,kt){var Lt=jt.type;return Lt===ya?ot(Et,At,jt.props.children,kt,jt.key):At!==null&&(At.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===Ha&&Ng(Lt)===At.type)?(kt=tt(At,jt.props),kt.ref=Lg(Et,At,jt),kt.return=Et,kt):(kt=Rg(jt.type,jt.key,jt.props,null,Et.mode,kt),kt.ref=Lg(Et,At,jt),kt.return=Et,kt)}function at(Et,At,jt,kt){return At===null||At.tag!==4||At.stateNode.containerInfo!==jt.containerInfo||At.stateNode.implementation!==jt.implementation?(At=Sg(jt,Et.mode,kt),At.return=Et,At):(At=tt(At,jt.children||[]),At.return=Et,At)}function ot(Et,At,jt,kt,Lt){return At===null||At.tag!==7?(At=Tg(jt,Et.mode,kt,Lt),At.return=Et,At):(At=tt(At,jt),At.return=Et,At)}function dt(Et,At,jt){if(typeof At=="string"&&At!==""||typeof At=="number")return At=Qg(""+At,Et.mode,jt),At.return=Et,At;if(typeof At=="object"&&At!==null){switch(At.$$typeof){case va:return jt=Rg(At.type,At.key,At.props,null,Et.mode,jt),jt.ref=Lg(Et,null,At),jt.return=Et,jt;case wa:return At=Sg(At,Et.mode,jt),At.return=Et,At;case Ha:var kt=At._init;return dt(Et,kt(At._payload),jt)}if(eb(At)||Ka(At))return At=Tg(At,Et.mode,jt,null),At.return=Et,At;Mg(Et,At)}return null}function ht(Et,At,jt,kt){var Lt=At!==null?At.key:null;if(typeof jt=="string"&&jt!==""||typeof jt=="number")return Lt!==null?null:it(Et,At,""+jt,kt);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case va:return jt.key===Lt?st(Et,At,jt,kt):null;case wa:return jt.key===Lt?at(Et,At,jt,kt):null;case Ha:return Lt=jt._init,ht(Et,At,Lt(jt._payload),kt)}if(eb(jt)||Ka(jt))return Lt!==null?null:ot(Et,At,jt,kt,null);Mg(Et,jt)}return null}function yt(Et,At,jt,kt,Lt){if(typeof kt=="string"&&kt!==""||typeof kt=="number")return Et=Et.get(jt)||null,it(At,Et,""+kt,Lt);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case va:return Et=Et.get(kt.key===null?jt:kt.key)||null,st(At,Et,kt,Lt);case wa:return Et=Et.get(kt.key===null?jt:kt.key)||null,at(At,Et,kt,Lt);case Ha:var Bt=kt._init;return yt(Et,At,jt,Bt(kt._payload),Lt)}if(eb(kt)||Ka(kt))return Et=Et.get(jt)||null,ot(At,Et,kt,Lt,null);Mg(At,kt)}return null}function vt(Et,At,jt,kt){for(var Lt=null,Bt=null,Gt=At,er=At=0,tr=null;Gt!==null&&er<jt.length;er++){Gt.index>er?(tr=Gt,Gt=null):tr=Gt.sibling;var ar=ht(Et,Gt,jt[er],kt);if(ar===null){Gt===null&&(Gt=tr);break}_&&Gt&&ar.alternate===null&&$(Et,Gt),At=rt(ar,At,er),Bt===null?Lt=ar:Bt.sibling=ar,Bt=ar,Gt=tr}if(er===jt.length)return _e(Et,Gt),I&&tg(Et,er),Lt;if(Gt===null){for(;er<jt.length;er++)Gt=dt(Et,jt[er],kt),Gt!==null&&(At=rt(Gt,At,er),Bt===null?Lt=Gt:Bt.sibling=Gt,Bt=Gt);return I&&tg(Et,er),Lt}for(Gt=et(Et,Gt);er<jt.length;er++)tr=yt(Gt,Et,er,jt[er],kt),tr!==null&&(_&&tr.alternate!==null&&Gt.delete(tr.key===null?er:tr.key),At=rt(tr,At,er),Bt===null?Lt=tr:Bt.sibling=tr,Bt=tr);return _&&Gt.forEach(function(Mt){return $(Et,Mt)}),I&&tg(Et,er),Lt}function xt(Et,At,jt,kt){var Lt=Ka(jt);if(typeof Lt!="function")throw Error(p$2(150));if(jt=Lt.call(jt),jt==null)throw Error(p$2(151));for(var Bt=Lt=null,Gt=At,er=At=0,tr=null,ar=jt.next();Gt!==null&&!ar.done;er++,ar=jt.next()){Gt.index>er?(tr=Gt,Gt=null):tr=Gt.sibling;var Mt=ht(Et,Gt,ar.value,kt);if(Mt===null){Gt===null&&(Gt=tr);break}_&&Gt&&Mt.alternate===null&&$(Et,Gt),At=rt(Mt,At,er),Bt===null?Lt=Mt:Bt.sibling=Mt,Bt=Mt,Gt=tr}if(ar.done)return _e(Et,Gt),I&&tg(Et,er),Lt;if(Gt===null){for(;!ar.done;er++,ar=jt.next())ar=dt(Et,ar.value,kt),ar!==null&&(At=rt(ar,At,er),Bt===null?Lt=ar:Bt.sibling=ar,Bt=ar);return I&&tg(Et,er),Lt}for(Gt=et(Et,Gt);!ar.done;er++,ar=jt.next())ar=yt(Gt,Et,er,ar.value,kt),ar!==null&&(_&&ar.alternate!==null&&Gt.delete(ar.key===null?er:ar.key),At=rt(ar,At,er),Bt===null?Lt=ar:Bt.sibling=ar,Bt=ar);return _&&Gt.forEach(function(lt){return $(Et,lt)}),I&&tg(Et,er),Lt}function wt(Et,At,jt,kt){if(typeof jt=="object"&&jt!==null&&jt.type===ya&&jt.key===null&&(jt=jt.props.children),typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case va:e:{for(var Lt=jt.key,Bt=At;Bt!==null;){if(Bt.key===Lt){if(Lt=jt.type,Lt===ya){if(Bt.tag===7){_e(Et,Bt.sibling),At=tt(Bt,jt.props.children),At.return=Et,Et=At;break e}}else if(Bt.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===Ha&&Ng(Lt)===Bt.type){_e(Et,Bt.sibling),At=tt(Bt,jt.props),At.ref=Lg(Et,Bt,jt),At.return=Et,Et=At;break e}_e(Et,Bt);break}else $(Et,Bt);Bt=Bt.sibling}jt.type===ya?(At=Tg(jt.props.children,Et.mode,kt,jt.key),At.return=Et,Et=At):(kt=Rg(jt.type,jt.key,jt.props,null,Et.mode,kt),kt.ref=Lg(Et,At,jt),kt.return=Et,Et=kt)}return nt(Et);case wa:e:{for(Bt=jt.key;At!==null;){if(At.key===Bt)if(At.tag===4&&At.stateNode.containerInfo===jt.containerInfo&&At.stateNode.implementation===jt.implementation){_e(Et,At.sibling),At=tt(At,jt.children||[]),At.return=Et,Et=At;break e}else{_e(Et,At);break}else $(Et,At);At=At.sibling}At=Sg(jt,Et.mode,kt),At.return=Et,Et=At}return nt(Et);case Ha:return Bt=jt._init,wt(Et,At,Bt(jt._payload),kt)}if(eb(jt))return vt(Et,At,jt,kt);if(Ka(jt))return xt(Et,At,jt,kt);Mg(Et,jt)}return typeof jt=="string"&&jt!==""||typeof jt=="number"?(jt=""+jt,At!==null&&At.tag===6?(_e(Et,At.sibling),At=tt(At,jt),At.return=Et,Et=At):(_e(Et,At),At=Qg(jt,Et.mode,kt),At.return=Et,Et=At),nt(Et)):_e(Et,At)}return wt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(_){var $=Wg.current;E$1(Wg),_._currentValue=$}function bh(_,$,_e){for(;_!==null;){var et=_.alternate;if((_.childLanes&$)!==$?(_.childLanes|=$,et!==null&&(et.childLanes|=$)):et!==null&&(et.childLanes&$)!==$&&(et.childLanes|=$),_===_e)break;_=_.return}}function ch(_,$){Xg=_,Zg=Yg=null,_=_.dependencies,_!==null&&_.firstContext!==null&&(_.lanes&$&&(dh$1=!0),_.firstContext=null)}function eh(_){var $=_._currentValue;if(Zg!==_)if(_={context:_,memoizedValue:$,next:null},Yg===null){if(Xg===null)throw Error(p$2(308));Yg=_,Xg.dependencies={lanes:0,firstContext:_}}else Yg=Yg.next=_;return $}var fh=null;function gh(_){fh===null?fh=[_]:fh.push(_)}function hh(_,$,_e,et){var tt=$.interleaved;return tt===null?(_e.next=_e,gh($)):(_e.next=tt.next,tt.next=_e),$.interleaved=_e,ih(_,et)}function ih(_,$){_.lanes|=$;var _e=_.alternate;for(_e!==null&&(_e.lanes|=$),_e=_,_=_.return;_!==null;)_.childLanes|=$,_e=_.alternate,_e!==null&&(_e.childLanes|=$),_e=_,_=_.return;return _e.tag===3?_e.stateNode:null}var jh=!1;function kh(_){_.updateQueue={baseState:_.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(_,$){_=_.updateQueue,$.updateQueue===_&&($.updateQueue={baseState:_.baseState,firstBaseUpdate:_.firstBaseUpdate,lastBaseUpdate:_.lastBaseUpdate,shared:_.shared,effects:_.effects})}function mh(_,$){return{eventTime:_,lane:$,tag:0,payload:null,callback:null,next:null}}function nh(_,$,_e){var et=_.updateQueue;if(et===null)return null;if(et=et.shared,K&2){var tt=et.pending;return tt===null?$.next=$:($.next=tt.next,tt.next=$),et.pending=$,ih(_,_e)}return tt=et.interleaved,tt===null?($.next=$,gh(et)):($.next=tt.next,tt.next=$),et.interleaved=$,ih(_,_e)}function oh(_,$,_e){if($=$.updateQueue,$!==null&&($=$.shared,(_e&4194240)!==0)){var et=$.lanes;et&=_.pendingLanes,_e|=et,$.lanes=_e,Cc(_,_e)}}function ph(_,$){var _e=_.updateQueue,et=_.alternate;if(et!==null&&(et=et.updateQueue,_e===et)){var tt=null,rt=null;if(_e=_e.firstBaseUpdate,_e!==null){do{var nt={eventTime:_e.eventTime,lane:_e.lane,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null};rt===null?tt=rt=nt:rt=rt.next=nt,_e=_e.next}while(_e!==null);rt===null?tt=rt=$:rt=rt.next=$}else tt=rt=$;_e={baseState:et.baseState,firstBaseUpdate:tt,lastBaseUpdate:rt,shared:et.shared,effects:et.effects},_.updateQueue=_e;return}_=_e.lastBaseUpdate,_===null?_e.firstBaseUpdate=$:_.next=$,_e.lastBaseUpdate=$}function qh(_,$,_e,et){var tt=_.updateQueue;jh=!1;var rt=tt.firstBaseUpdate,nt=tt.lastBaseUpdate,it=tt.shared.pending;if(it!==null){tt.shared.pending=null;var st=it,at=st.next;st.next=null,nt===null?rt=at:nt.next=at,nt=st;var ot=_.alternate;ot!==null&&(ot=ot.updateQueue,it=ot.lastBaseUpdate,it!==nt&&(it===null?ot.firstBaseUpdate=at:it.next=at,ot.lastBaseUpdate=st))}if(rt!==null){var dt=tt.baseState;nt=0,ot=at=st=null,it=rt;do{var ht=it.lane,yt=it.eventTime;if((et&ht)===ht){ot!==null&&(ot=ot.next={eventTime:yt,lane:0,tag:it.tag,payload:it.payload,callback:it.callback,next:null});e:{var vt=_,xt=it;switch(ht=$,yt=_e,xt.tag){case 1:if(vt=xt.payload,typeof vt=="function"){dt=vt.call(yt,dt,ht);break e}dt=vt;break e;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=xt.payload,ht=typeof vt=="function"?vt.call(yt,dt,ht):vt,ht==null)break e;dt=A({},dt,ht);break e;case 2:jh=!0}}it.callback!==null&&it.lane!==0&&(_.flags|=64,ht=tt.effects,ht===null?tt.effects=[it]:ht.push(it))}else yt={eventTime:yt,lane:ht,tag:it.tag,payload:it.payload,callback:it.callback,next:null},ot===null?(at=ot=yt,st=dt):ot=ot.next=yt,nt|=ht;if(it=it.next,it===null){if(it=tt.shared.pending,it===null)break;ht=it,it=ht.next,ht.next=null,tt.lastBaseUpdate=ht,tt.shared.pending=null}}while(!0);if(ot===null&&(st=dt),tt.baseState=st,tt.firstBaseUpdate=at,tt.lastBaseUpdate=ot,$=tt.shared.interleaved,$!==null){tt=$;do nt|=tt.lane,tt=tt.next;while(tt!==$)}else rt===null&&(tt.shared.lanes=0);rh|=nt,_.lanes=nt,_.memoizedState=dt}}function sh(_,$,_e){if(_=$.effects,$.effects=null,_!==null)for($=0;$<_.length;$++){var et=_[$],tt=et.callback;if(tt!==null){if(et.callback=null,et=_e,typeof tt!="function")throw Error(p$2(191,tt));tt.call(et)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(_){if(_===th)throw Error(p$2(174));return _}function yh(_,$){switch(G(wh,$),G(vh,_),G(uh,th),_=$.nodeType,_){case 9:case 11:$=($=$.documentElement)?$.namespaceURI:lb(null,"");break;default:_=_===8?$.parentNode:$,$=_.namespaceURI||null,_=_.tagName,$=lb($,_)}E$1(uh),G(uh,$)}function zh(){E$1(uh),E$1(vh),E$1(wh)}function Ah(_){xh(wh.current);var $=xh(uh.current),_e=lb($,_.type);$!==_e&&(G(vh,_),G(uh,_e))}function Bh(_){vh.current===_&&(E$1(uh),E$1(vh))}var L$1=Uf(0);function Ch(_){for(var $=_;$!==null;){if($.tag===13){var _e=$.memoizedState;if(_e!==null&&(_e=_e.dehydrated,_e===null||_e.data==="$?"||_e.data==="$!"))return $}else if($.tag===19&&$.memoizedProps.revealOrder!==void 0){if($.flags&128)return $}else if($.child!==null){$.child.return=$,$=$.child;continue}if($===_)break;for(;$.sibling===null;){if($.return===null||$.return===_)return null;$=$.return}$.sibling.return=$.return,$=$.sibling}return null}var Dh=[];function Eh(){for(var _=0;_<Dh.length;_++)Dh[_]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$2(){throw Error(p$2(321))}function Mh(_,$){if($===null)return!1;for(var _e=0;_e<$.length&&_e<_.length;_e++)if(!He(_[_e],$[_e]))return!1;return!0}function Nh(_,$,_e,et,tt,rt){if(Hh=rt,M=$,$.memoizedState=null,$.updateQueue=null,$.lanes=0,Fh.current=_===null||_.memoizedState===null?Oh:Ph,_=_e(et,tt),Jh){rt=0;do{if(Jh=!1,Kh=0,25<=rt)throw Error(p$2(301));rt+=1,O=N=null,$.updateQueue=null,Fh.current=Qh,_=_e(et,tt)}while(Jh)}if(Fh.current=Rh,$=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,$)throw Error(p$2(300));return _}function Sh(){var _=Kh!==0;return Kh=0,_}function Th(){var _={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=_:O=O.next=_,O}function Uh(){if(N===null){var _=M.alternate;_=_!==null?_.memoizedState:null}else _=N.next;var $=O===null?M.memoizedState:O.next;if($!==null)O=$,N=_;else{if(_===null)throw Error(p$2(310));N=_,_={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=_:O=O.next=_}return O}function Vh(_,$){return typeof $=="function"?$(_):$}function Wh(_){var $=Uh(),_e=$.queue;if(_e===null)throw Error(p$2(311));_e.lastRenderedReducer=_;var et=N,tt=et.baseQueue,rt=_e.pending;if(rt!==null){if(tt!==null){var nt=tt.next;tt.next=rt.next,rt.next=nt}et.baseQueue=tt=rt,_e.pending=null}if(tt!==null){rt=tt.next,et=et.baseState;var it=nt=null,st=null,at=rt;do{var ot=at.lane;if((Hh&ot)===ot)st!==null&&(st=st.next={lane:0,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null}),et=at.hasEagerState?at.eagerState:_(et,at.action);else{var dt={lane:ot,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null};st===null?(it=st=dt,nt=et):st=st.next=dt,M.lanes|=ot,rh|=ot}at=at.next}while(at!==null&&at!==rt);st===null?nt=et:st.next=it,He(et,$.memoizedState)||(dh$1=!0),$.memoizedState=et,$.baseState=nt,$.baseQueue=st,_e.lastRenderedState=et}if(_=_e.interleaved,_!==null){tt=_;do rt=tt.lane,M.lanes|=rt,rh|=rt,tt=tt.next;while(tt!==_)}else tt===null&&(_e.lanes=0);return[$.memoizedState,_e.dispatch]}function Xh(_){var $=Uh(),_e=$.queue;if(_e===null)throw Error(p$2(311));_e.lastRenderedReducer=_;var et=_e.dispatch,tt=_e.pending,rt=$.memoizedState;if(tt!==null){_e.pending=null;var nt=tt=tt.next;do rt=_(rt,nt.action),nt=nt.next;while(nt!==tt);He(rt,$.memoizedState)||(dh$1=!0),$.memoizedState=rt,$.baseQueue===null&&($.baseState=rt),_e.lastRenderedState=rt}return[rt,et]}function Yh(){}function Zh(_,$){var _e=M,et=Uh(),tt=$(),rt=!He(et.memoizedState,tt);if(rt&&(et.memoizedState=tt,dh$1=!0),et=et.queue,$h(ai.bind(null,_e,et,_),[_]),et.getSnapshot!==$||rt||O!==null&&O.memoizedState.tag&1){if(_e.flags|=2048,bi(9,ci.bind(null,_e,et,tt,$),void 0,null),Q===null)throw Error(p$2(349));Hh&30||di(_e,$,tt)}return tt}function di(_,$,_e){_.flags|=16384,_={getSnapshot:$,value:_e},$=M.updateQueue,$===null?($={lastEffect:null,stores:null},M.updateQueue=$,$.stores=[_]):(_e=$.stores,_e===null?$.stores=[_]:_e.push(_))}function ci(_,$,_e,et){$.value=_e,$.getSnapshot=et,ei($)&&fi(_)}function ai(_,$,_e){return _e(function(){ei($)&&fi(_)})}function ei(_){var $=_.getSnapshot;_=_.value;try{var _e=$();return!He(_,_e)}catch{return!0}}function fi(_){var $=ih(_,1);$!==null&&gi($,_,1,-1)}function hi(_){var $=Th();return typeof _=="function"&&(_=_()),$.memoizedState=$.baseState=_,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:_},$.queue=_,_=_.dispatch=ii.bind(null,M,_),[$.memoizedState,_]}function bi(_,$,_e,et){return _={tag:_,create:$,destroy:_e,deps:et,next:null},$=M.updateQueue,$===null?($={lastEffect:null,stores:null},M.updateQueue=$,$.lastEffect=_.next=_):(_e=$.lastEffect,_e===null?$.lastEffect=_.next=_:(et=_e.next,_e.next=_,_.next=et,$.lastEffect=_)),_}function ji(){return Uh().memoizedState}function ki(_,$,_e,et){var tt=Th();M.flags|=_,tt.memoizedState=bi(1|$,_e,void 0,et===void 0?null:et)}function li(_,$,_e,et){var tt=Uh();et=et===void 0?null:et;var rt=void 0;if(N!==null){var nt=N.memoizedState;if(rt=nt.destroy,et!==null&&Mh(et,nt.deps)){tt.memoizedState=bi($,_e,rt,et);return}}M.flags|=_,tt.memoizedState=bi(1|$,_e,rt,et)}function mi(_,$){return ki(8390656,8,_,$)}function $h(_,$){return li(2048,8,_,$)}function ni(_,$){return li(4,2,_,$)}function oi(_,$){return li(4,4,_,$)}function pi$2(_,$){if(typeof $=="function")return _=_(),$(_),function(){$(null)};if($!=null)return _=_(),$.current=_,function(){$.current=null}}function qi(_,$,_e){return _e=_e!=null?_e.concat([_]):null,li(4,4,pi$2.bind(null,$,_),_e)}function ri(){}function si(_,$){var _e=Uh();$=$===void 0?null:$;var et=_e.memoizedState;return et!==null&&$!==null&&Mh($,et[1])?et[0]:(_e.memoizedState=[_,$],_)}function ti(_,$){var _e=Uh();$=$===void 0?null:$;var et=_e.memoizedState;return et!==null&&$!==null&&Mh($,et[1])?et[0]:(_=_(),_e.memoizedState=[_,$],_)}function ui(_,$,_e){return Hh&21?(He(_e,$)||(_e=yc(),M.lanes|=_e,rh|=_e,_.baseState=!0),$):(_.baseState&&(_.baseState=!1,dh$1=!0),_.memoizedState=_e)}function vi(_,$){var _e=C;C=_e!==0&&4>_e?_e:4,_(!0);var et=Gh.transition;Gh.transition={};try{_(!1),$()}finally{C=_e,Gh.transition=et}}function wi(){return Uh().memoizedState}function xi(_,$,_e){var et=yi(_);if(_e={lane:et,action:_e,hasEagerState:!1,eagerState:null,next:null},zi(_))Ai($,_e);else if(_e=hh(_,$,_e,et),_e!==null){var tt=R();gi(_e,_,et,tt),Bi(_e,$,et)}}function ii(_,$,_e){var et=yi(_),tt={lane:et,action:_e,hasEagerState:!1,eagerState:null,next:null};if(zi(_))Ai($,tt);else{var rt=_.alternate;if(_.lanes===0&&(rt===null||rt.lanes===0)&&(rt=$.lastRenderedReducer,rt!==null))try{var nt=$.lastRenderedState,it=rt(nt,_e);if(tt.hasEagerState=!0,tt.eagerState=it,He(it,nt)){var st=$.interleaved;st===null?(tt.next=tt,gh($)):(tt.next=st.next,st.next=tt),$.interleaved=tt;return}}catch{}finally{}_e=hh(_,$,tt,et),_e!==null&&(tt=R(),gi(_e,_,et,tt),Bi(_e,$,et))}}function zi(_){var $=_.alternate;return _===M||$!==null&&$===M}function Ai(_,$){Jh=Ih=!0;var _e=_.pending;_e===null?$.next=$:($.next=_e.next,_e.next=$),_.pending=$}function Bi(_,$,_e){if(_e&4194240){var et=$.lanes;et&=_.pendingLanes,_e|=et,$.lanes=_e,Cc(_,_e)}}var Rh={readContext:eh,useCallback:P$2,useContext:P$2,useEffect:P$2,useImperativeHandle:P$2,useInsertionEffect:P$2,useLayoutEffect:P$2,useMemo:P$2,useReducer:P$2,useRef:P$2,useState:P$2,useDebugValue:P$2,useDeferredValue:P$2,useTransition:P$2,useMutableSource:P$2,useSyncExternalStore:P$2,useId:P$2,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(_,$){return Th().memoizedState=[_,$===void 0?null:$],_},useContext:eh,useEffect:mi,useImperativeHandle:function(_,$,_e){return _e=_e!=null?_e.concat([_]):null,ki(4194308,4,pi$2.bind(null,$,_),_e)},useLayoutEffect:function(_,$){return ki(4194308,4,_,$)},useInsertionEffect:function(_,$){return ki(4,2,_,$)},useMemo:function(_,$){var _e=Th();return $=$===void 0?null:$,_=_(),_e.memoizedState=[_,$],_},useReducer:function(_,$,_e){var et=Th();return $=_e!==void 0?_e($):$,et.memoizedState=et.baseState=$,_={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_,lastRenderedState:$},et.queue=_,_=_.dispatch=xi.bind(null,M,_),[et.memoizedState,_]},useRef:function(_){var $=Th();return _={current:_},$.memoizedState=_},useState:hi,useDebugValue:ri,useDeferredValue:function(_){return Th().memoizedState=_},useTransition:function(){var _=hi(!1),$=_[0];return _=vi.bind(null,_[1]),Th().memoizedState=_,[$,_]},useMutableSource:function(){},useSyncExternalStore:function(_,$,_e){var et=M,tt=Th();if(I){if(_e===void 0)throw Error(p$2(407));_e=_e()}else{if(_e=$(),Q===null)throw Error(p$2(349));Hh&30||di(et,$,_e)}tt.memoizedState=_e;var rt={value:_e,getSnapshot:$};return tt.queue=rt,mi(ai.bind(null,et,rt,_),[_]),et.flags|=2048,bi(9,ci.bind(null,et,rt,_e,$),void 0,null),_e},useId:function(){var _=Th(),$=Q.identifierPrefix;if(I){var _e=sg,et=rg;_e=(et&~(1<<32-oc(et)-1)).toString(32)+_e,$=":"+$+"R"+_e,_e=Kh++,0<_e&&($+="H"+_e.toString(32)),$+=":"}else _e=Lh++,$=":"+$+"r"+_e.toString(32)+":";return _.memoizedState=$},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(_){var $=Uh();return ui($,N.memoizedState,_)},useTransition:function(){var _=Wh(Vh)[0],$=Uh().memoizedState;return[_,$]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(_){var $=Uh();return N===null?$.memoizedState=_:ui($,N.memoizedState,_)},useTransition:function(){var _=Xh(Vh)[0],$=Uh().memoizedState;return[_,$]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(_,$){if(_&&_.defaultProps){$=A({},$),_=_.defaultProps;for(var _e in _)$[_e]===void 0&&($[_e]=_[_e]);return $}return $}function Di(_,$,_e,et){$=_.memoizedState,_e=_e(et,$),_e=_e==null?$:A({},$,_e),_.memoizedState=_e,_.lanes===0&&(_.updateQueue.baseState=_e)}var Ei={isMounted:function(_){return(_=_._reactInternals)?Vb(_)===_:!1},enqueueSetState:function(_,$,_e){_=_._reactInternals;var et=R(),tt=yi(_),rt=mh(et,tt);rt.payload=$,_e!=null&&(rt.callback=_e),$=nh(_,rt,tt),$!==null&&(gi($,_,tt,et),oh($,_,tt))},enqueueReplaceState:function(_,$,_e){_=_._reactInternals;var et=R(),tt=yi(_),rt=mh(et,tt);rt.tag=1,rt.payload=$,_e!=null&&(rt.callback=_e),$=nh(_,rt,tt),$!==null&&(gi($,_,tt,et),oh($,_,tt))},enqueueForceUpdate:function(_,$){_=_._reactInternals;var _e=R(),et=yi(_),tt=mh(_e,et);tt.tag=2,$!=null&&(tt.callback=$),$=nh(_,tt,et),$!==null&&(gi($,_,et,_e),oh($,_,et))}};function Fi(_,$,_e,et,tt,rt,nt){return _=_.stateNode,typeof _.shouldComponentUpdate=="function"?_.shouldComponentUpdate(et,rt,nt):$.prototype&&$.prototype.isPureReactComponent?!Ie(_e,et)||!Ie(tt,rt):!0}function Gi(_,$,_e){var et=!1,tt=Vf,rt=$.contextType;return typeof rt=="object"&&rt!==null?rt=eh(rt):(tt=Zf($)?Xf:H.current,et=$.contextTypes,rt=(et=et!=null)?Yf(_,tt):Vf),$=new $(_e,rt),_.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,$.updater=Ei,_.stateNode=$,$._reactInternals=_,et&&(_=_.stateNode,_.__reactInternalMemoizedUnmaskedChildContext=tt,_.__reactInternalMemoizedMaskedChildContext=rt),$}function Hi(_,$,_e,et){_=$.state,typeof $.componentWillReceiveProps=="function"&&$.componentWillReceiveProps(_e,et),typeof $.UNSAFE_componentWillReceiveProps=="function"&&$.UNSAFE_componentWillReceiveProps(_e,et),$.state!==_&&Ei.enqueueReplaceState($,$.state,null)}function Ii(_,$,_e,et){var tt=_.stateNode;tt.props=_e,tt.state=_.memoizedState,tt.refs={},kh(_);var rt=$.contextType;typeof rt=="object"&&rt!==null?tt.context=eh(rt):(rt=Zf($)?Xf:H.current,tt.context=Yf(_,rt)),tt.state=_.memoizedState,rt=$.getDerivedStateFromProps,typeof rt=="function"&&(Di(_,$,rt,_e),tt.state=_.memoizedState),typeof $.getDerivedStateFromProps=="function"||typeof tt.getSnapshotBeforeUpdate=="function"||typeof tt.UNSAFE_componentWillMount!="function"&&typeof tt.componentWillMount!="function"||($=tt.state,typeof tt.componentWillMount=="function"&&tt.componentWillMount(),typeof tt.UNSAFE_componentWillMount=="function"&&tt.UNSAFE_componentWillMount(),$!==tt.state&&Ei.enqueueReplaceState(tt,tt.state,null),qh(_,_e,tt,et),tt.state=_.memoizedState),typeof tt.componentDidMount=="function"&&(_.flags|=4194308)}function Ji(_,$){try{var _e="",et=$;do _e+=Pa(et),et=et.return;while(et);var tt=_e}catch(rt){tt=`
Error generating stack: `+rt.message+`
`+rt.stack}return{value:_,source:$,stack:tt,digest:null}}function Ki(_,$,_e){return{value:_,source:null,stack:_e??null,digest:$??null}}function Li(_,$){try{console.error($.value)}catch(_e){setTimeout(function(){throw _e})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(_,$,_e){_e=mh(-1,_e),_e.tag=3,_e.payload={element:null};var et=$.value;return _e.callback=function(){Oi||(Oi=!0,Pi=et),Li(_,$)},_e}function Qi(_,$,_e){_e=mh(-1,_e),_e.tag=3;var et=_.type.getDerivedStateFromError;if(typeof et=="function"){var tt=$.value;_e.payload=function(){return et(tt)},_e.callback=function(){Li(_,$)}}var rt=_.stateNode;return rt!==null&&typeof rt.componentDidCatch=="function"&&(_e.callback=function(){Li(_,$),typeof et!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var nt=$.stack;this.componentDidCatch($.value,{componentStack:nt!==null?nt:""})}),_e}function Si(_,$,_e){var et=_.pingCache;if(et===null){et=_.pingCache=new Mi;var tt=new Set;et.set($,tt)}else tt=et.get($),tt===void 0&&(tt=new Set,et.set($,tt));tt.has(_e)||(tt.add(_e),_=Ti.bind(null,_,$,_e),$.then(_,_))}function Ui(_){do{var $;if(($=_.tag===13)&&($=_.memoizedState,$=$!==null?$.dehydrated!==null:!0),$)return _;_=_.return}while(_!==null);return null}function Vi(_,$,_e,et,tt){return _.mode&1?(_.flags|=65536,_.lanes=tt,_):(_===$?_.flags|=65536:(_.flags|=128,_e.flags|=131072,_e.flags&=-52805,_e.tag===1&&(_e.alternate===null?_e.tag=17:($=mh(-1,1),$.tag=2,nh(_e,$,1))),_e.lanes|=1),_)}var Wi=ua.ReactCurrentOwner,dh$1=!1;function Xi(_,$,_e,et){$.child=_===null?Vg($,null,_e,et):Ug($,_.child,_e,et)}function Yi(_,$,_e,et,tt){_e=_e.render;var rt=$.ref;return ch($,tt),et=Nh(_,$,_e,et,rt,tt),_e=Sh(),_!==null&&!dh$1?($.updateQueue=_.updateQueue,$.flags&=-2053,_.lanes&=~tt,Zi(_,$,tt)):(I&&_e&&vg($),$.flags|=1,Xi(_,$,et,tt),$.child)}function $i(_,$,_e,et,tt){if(_===null){var rt=_e.type;return typeof rt=="function"&&!aj(rt)&&rt.defaultProps===void 0&&_e.compare===null&&_e.defaultProps===void 0?($.tag=15,$.type=rt,bj(_,$,rt,et,tt)):(_=Rg(_e.type,null,et,$,$.mode,tt),_.ref=$.ref,_.return=$,$.child=_)}if(rt=_.child,!(_.lanes&tt)){var nt=rt.memoizedProps;if(_e=_e.compare,_e=_e!==null?_e:Ie,_e(nt,et)&&_.ref===$.ref)return Zi(_,$,tt)}return $.flags|=1,_=Pg(rt,et),_.ref=$.ref,_.return=$,$.child=_}function bj(_,$,_e,et,tt){if(_!==null){var rt=_.memoizedProps;if(Ie(rt,et)&&_.ref===$.ref)if(dh$1=!1,$.pendingProps=et=rt,(_.lanes&tt)!==0)_.flags&131072&&(dh$1=!0);else return $.lanes=_.lanes,Zi(_,$,tt)}return cj(_,$,_e,et,tt)}function dj(_,$,_e){var et=$.pendingProps,tt=et.children,rt=_!==null?_.memoizedState:null;if(et.mode==="hidden")if(!($.mode&1))$.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=_e;else{if(!(_e&1073741824))return _=rt!==null?rt.baseLanes|_e:_e,$.lanes=$.childLanes=1073741824,$.memoizedState={baseLanes:_,cachePool:null,transitions:null},$.updateQueue=null,G(ej,fj),fj|=_,null;$.memoizedState={baseLanes:0,cachePool:null,transitions:null},et=rt!==null?rt.baseLanes:_e,G(ej,fj),fj|=et}else rt!==null?(et=rt.baseLanes|_e,$.memoizedState=null):et=_e,G(ej,fj),fj|=et;return Xi(_,$,tt,_e),$.child}function gj(_,$){var _e=$.ref;(_===null&&_e!==null||_!==null&&_.ref!==_e)&&($.flags|=512,$.flags|=2097152)}function cj(_,$,_e,et,tt){var rt=Zf(_e)?Xf:H.current;return rt=Yf($,rt),ch($,tt),_e=Nh(_,$,_e,et,rt,tt),et=Sh(),_!==null&&!dh$1?($.updateQueue=_.updateQueue,$.flags&=-2053,_.lanes&=~tt,Zi(_,$,tt)):(I&&et&&vg($),$.flags|=1,Xi(_,$,_e,tt),$.child)}function hj(_,$,_e,et,tt){if(Zf(_e)){var rt=!0;cg($)}else rt=!1;if(ch($,tt),$.stateNode===null)ij(_,$),Gi($,_e,et),Ii($,_e,et,tt),et=!0;else if(_===null){var nt=$.stateNode,it=$.memoizedProps;nt.props=it;var st=nt.context,at=_e.contextType;typeof at=="object"&&at!==null?at=eh(at):(at=Zf(_e)?Xf:H.current,at=Yf($,at));var ot=_e.getDerivedStateFromProps,dt=typeof ot=="function"||typeof nt.getSnapshotBeforeUpdate=="function";dt||typeof nt.UNSAFE_componentWillReceiveProps!="function"&&typeof nt.componentWillReceiveProps!="function"||(it!==et||st!==at)&&Hi($,nt,et,at),jh=!1;var ht=$.memoizedState;nt.state=ht,qh($,et,nt,tt),st=$.memoizedState,it!==et||ht!==st||Wf.current||jh?(typeof ot=="function"&&(Di($,_e,ot,et),st=$.memoizedState),(it=jh||Fi($,_e,it,et,ht,st,at))?(dt||typeof nt.UNSAFE_componentWillMount!="function"&&typeof nt.componentWillMount!="function"||(typeof nt.componentWillMount=="function"&&nt.componentWillMount(),typeof nt.UNSAFE_componentWillMount=="function"&&nt.UNSAFE_componentWillMount()),typeof nt.componentDidMount=="function"&&($.flags|=4194308)):(typeof nt.componentDidMount=="function"&&($.flags|=4194308),$.memoizedProps=et,$.memoizedState=st),nt.props=et,nt.state=st,nt.context=at,et=it):(typeof nt.componentDidMount=="function"&&($.flags|=4194308),et=!1)}else{nt=$.stateNode,lh(_,$),it=$.memoizedProps,at=$.type===$.elementType?it:Ci($.type,it),nt.props=at,dt=$.pendingProps,ht=nt.context,st=_e.contextType,typeof st=="object"&&st!==null?st=eh(st):(st=Zf(_e)?Xf:H.current,st=Yf($,st));var yt=_e.getDerivedStateFromProps;(ot=typeof yt=="function"||typeof nt.getSnapshotBeforeUpdate=="function")||typeof nt.UNSAFE_componentWillReceiveProps!="function"&&typeof nt.componentWillReceiveProps!="function"||(it!==dt||ht!==st)&&Hi($,nt,et,st),jh=!1,ht=$.memoizedState,nt.state=ht,qh($,et,nt,tt);var vt=$.memoizedState;it!==dt||ht!==vt||Wf.current||jh?(typeof yt=="function"&&(Di($,_e,yt,et),vt=$.memoizedState),(at=jh||Fi($,_e,at,et,ht,vt,st)||!1)?(ot||typeof nt.UNSAFE_componentWillUpdate!="function"&&typeof nt.componentWillUpdate!="function"||(typeof nt.componentWillUpdate=="function"&&nt.componentWillUpdate(et,vt,st),typeof nt.UNSAFE_componentWillUpdate=="function"&&nt.UNSAFE_componentWillUpdate(et,vt,st)),typeof nt.componentDidUpdate=="function"&&($.flags|=4),typeof nt.getSnapshotBeforeUpdate=="function"&&($.flags|=1024)):(typeof nt.componentDidUpdate!="function"||it===_.memoizedProps&&ht===_.memoizedState||($.flags|=4),typeof nt.getSnapshotBeforeUpdate!="function"||it===_.memoizedProps&&ht===_.memoizedState||($.flags|=1024),$.memoizedProps=et,$.memoizedState=vt),nt.props=et,nt.state=vt,nt.context=st,et=at):(typeof nt.componentDidUpdate!="function"||it===_.memoizedProps&&ht===_.memoizedState||($.flags|=4),typeof nt.getSnapshotBeforeUpdate!="function"||it===_.memoizedProps&&ht===_.memoizedState||($.flags|=1024),et=!1)}return jj(_,$,_e,et,rt,tt)}function jj(_,$,_e,et,tt,rt){gj(_,$);var nt=($.flags&128)!==0;if(!et&&!nt)return tt&&dg($,_e,!1),Zi(_,$,rt);et=$.stateNode,Wi.current=$;var it=nt&&typeof _e.getDerivedStateFromError!="function"?null:et.render();return $.flags|=1,_!==null&&nt?($.child=Ug($,_.child,null,rt),$.child=Ug($,null,it,rt)):Xi(_,$,it,rt),$.memoizedState=et.state,tt&&dg($,_e,!0),$.child}function kj(_){var $=_.stateNode;$.pendingContext?ag(_,$.pendingContext,$.pendingContext!==$.context):$.context&&ag(_,$.context,!1),yh(_,$.containerInfo)}function lj(_,$,_e,et,tt){return Ig(),Jg(tt),$.flags|=256,Xi(_,$,_e,et),$.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(_){return{baseLanes:_,cachePool:null,transitions:null}}function oj(_,$,_e){var et=$.pendingProps,tt=L$1.current,rt=!1,nt=($.flags&128)!==0,it;if((it=nt)||(it=_!==null&&_.memoizedState===null?!1:(tt&2)!==0),it?(rt=!0,$.flags&=-129):(_===null||_.memoizedState!==null)&&(tt|=1),G(L$1,tt&1),_===null)return Eg($),_=$.memoizedState,_!==null&&(_=_.dehydrated,_!==null)?($.mode&1?_.data==="$!"?$.lanes=8:$.lanes=1073741824:$.lanes=1,null):(nt=et.children,_=et.fallback,rt?(et=$.mode,rt=$.child,nt={mode:"hidden",children:nt},!(et&1)&&rt!==null?(rt.childLanes=0,rt.pendingProps=nt):rt=pj(nt,et,0,null),_=Tg(_,et,_e,null),rt.return=$,_.return=$,rt.sibling=_,$.child=rt,$.child.memoizedState=nj(_e),$.memoizedState=mj,_):qj($,nt));if(tt=_.memoizedState,tt!==null&&(it=tt.dehydrated,it!==null))return rj(_,$,nt,et,it,tt,_e);if(rt){rt=et.fallback,nt=$.mode,tt=_.child,it=tt.sibling;var st={mode:"hidden",children:et.children};return!(nt&1)&&$.child!==tt?(et=$.child,et.childLanes=0,et.pendingProps=st,$.deletions=null):(et=Pg(tt,st),et.subtreeFlags=tt.subtreeFlags&14680064),it!==null?rt=Pg(it,rt):(rt=Tg(rt,nt,_e,null),rt.flags|=2),rt.return=$,et.return=$,et.sibling=rt,$.child=et,et=rt,rt=$.child,nt=_.child.memoizedState,nt=nt===null?nj(_e):{baseLanes:nt.baseLanes|_e,cachePool:null,transitions:nt.transitions},rt.memoizedState=nt,rt.childLanes=_.childLanes&~_e,$.memoizedState=mj,et}return rt=_.child,_=rt.sibling,et=Pg(rt,{mode:"visible",children:et.children}),!($.mode&1)&&(et.lanes=_e),et.return=$,et.sibling=null,_!==null&&(_e=$.deletions,_e===null?($.deletions=[_],$.flags|=16):_e.push(_)),$.child=et,$.memoizedState=null,et}function qj(_,$){return $=pj({mode:"visible",children:$},_.mode,0,null),$.return=_,_.child=$}function sj(_,$,_e,et){return et!==null&&Jg(et),Ug($,_.child,null,_e),_=qj($,$.pendingProps.children),_.flags|=2,$.memoizedState=null,_}function rj(_,$,_e,et,tt,rt,nt){if(_e)return $.flags&256?($.flags&=-257,et=Ki(Error(p$2(422))),sj(_,$,nt,et)):$.memoizedState!==null?($.child=_.child,$.flags|=128,null):(rt=et.fallback,tt=$.mode,et=pj({mode:"visible",children:et.children},tt,0,null),rt=Tg(rt,tt,nt,null),rt.flags|=2,et.return=$,rt.return=$,et.sibling=rt,$.child=et,$.mode&1&&Ug($,_.child,null,nt),$.child.memoizedState=nj(nt),$.memoizedState=mj,rt);if(!($.mode&1))return sj(_,$,nt,null);if(tt.data==="$!"){if(et=tt.nextSibling&&tt.nextSibling.dataset,et)var it=et.dgst;return et=it,rt=Error(p$2(419)),et=Ki(rt,et,void 0),sj(_,$,nt,et)}if(it=(nt&_.childLanes)!==0,dh$1||it){if(et=Q,et!==null){switch(nt&-nt){case 4:tt=2;break;case 16:tt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:tt=32;break;case 536870912:tt=268435456;break;default:tt=0}tt=tt&(et.suspendedLanes|nt)?0:tt,tt!==0&&tt!==rt.retryLane&&(rt.retryLane=tt,ih(_,tt),gi(et,_,tt,-1))}return tj(),et=Ki(Error(p$2(421))),sj(_,$,nt,et)}return tt.data==="$?"?($.flags|=128,$.child=_.child,$=uj.bind(null,_),tt._reactRetry=$,null):(_=rt.treeContext,yg=Lf(tt.nextSibling),xg=$,I=!0,zg=null,_!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=_.id,sg=_.overflow,qg=$),$=qj($,et.children),$.flags|=4096,$)}function vj(_,$,_e){_.lanes|=$;var et=_.alternate;et!==null&&(et.lanes|=$),bh(_.return,$,_e)}function wj(_,$,_e,et,tt){var rt=_.memoizedState;rt===null?_.memoizedState={isBackwards:$,rendering:null,renderingStartTime:0,last:et,tail:_e,tailMode:tt}:(rt.isBackwards=$,rt.rendering=null,rt.renderingStartTime=0,rt.last=et,rt.tail=_e,rt.tailMode=tt)}function xj(_,$,_e){var et=$.pendingProps,tt=et.revealOrder,rt=et.tail;if(Xi(_,$,et.children,_e),et=L$1.current,et&2)et=et&1|2,$.flags|=128;else{if(_!==null&&_.flags&128)e:for(_=$.child;_!==null;){if(_.tag===13)_.memoizedState!==null&&vj(_,_e,$);else if(_.tag===19)vj(_,_e,$);else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===$)break e;for(;_.sibling===null;){if(_.return===null||_.return===$)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}et&=1}if(G(L$1,et),!($.mode&1))$.memoizedState=null;else switch(tt){case"forwards":for(_e=$.child,tt=null;_e!==null;)_=_e.alternate,_!==null&&Ch(_)===null&&(tt=_e),_e=_e.sibling;_e=tt,_e===null?(tt=$.child,$.child=null):(tt=_e.sibling,_e.sibling=null),wj($,!1,tt,_e,rt);break;case"backwards":for(_e=null,tt=$.child,$.child=null;tt!==null;){if(_=tt.alternate,_!==null&&Ch(_)===null){$.child=tt;break}_=tt.sibling,tt.sibling=_e,_e=tt,tt=_}wj($,!0,_e,null,rt);break;case"together":wj($,!1,null,null,void 0);break;default:$.memoizedState=null}return $.child}function ij(_,$){!($.mode&1)&&_!==null&&(_.alternate=null,$.alternate=null,$.flags|=2)}function Zi(_,$,_e){if(_!==null&&($.dependencies=_.dependencies),rh|=$.lanes,!(_e&$.childLanes))return null;if(_!==null&&$.child!==_.child)throw Error(p$2(153));if($.child!==null){for(_=$.child,_e=Pg(_,_.pendingProps),$.child=_e,_e.return=$;_.sibling!==null;)_=_.sibling,_e=_e.sibling=Pg(_,_.pendingProps),_e.return=$;_e.sibling=null}return $.child}function yj(_,$,_e){switch($.tag){case 3:kj($),Ig();break;case 5:Ah($);break;case 1:Zf($.type)&&cg($);break;case 4:yh($,$.stateNode.containerInfo);break;case 10:var et=$.type._context,tt=$.memoizedProps.value;G(Wg,et._currentValue),et._currentValue=tt;break;case 13:if(et=$.memoizedState,et!==null)return et.dehydrated!==null?(G(L$1,L$1.current&1),$.flags|=128,null):_e&$.child.childLanes?oj(_,$,_e):(G(L$1,L$1.current&1),_=Zi(_,$,_e),_!==null?_.sibling:null);G(L$1,L$1.current&1);break;case 19:if(et=(_e&$.childLanes)!==0,_.flags&128){if(et)return xj(_,$,_e);$.flags|=128}if(tt=$.memoizedState,tt!==null&&(tt.rendering=null,tt.tail=null,tt.lastEffect=null),G(L$1,L$1.current),et)break;return null;case 22:case 23:return $.lanes=0,dj(_,$,_e)}return Zi(_,$,_e)}var zj,Aj,Bj,Cj;zj=function(_,$){for(var _e=$.child;_e!==null;){if(_e.tag===5||_e.tag===6)_.appendChild(_e.stateNode);else if(_e.tag!==4&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===$)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===$)return;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}};Aj=function(){};Bj=function(_,$,_e,et){var tt=_.memoizedProps;if(tt!==et){_=$.stateNode,xh(uh.current);var rt=null;switch(_e){case"input":tt=Ya(_,tt),et=Ya(_,et),rt=[];break;case"select":tt=A({},tt,{value:void 0}),et=A({},et,{value:void 0}),rt=[];break;case"textarea":tt=gb(_,tt),et=gb(_,et),rt=[];break;default:typeof tt.onClick!="function"&&typeof et.onClick=="function"&&(_.onclick=Bf)}ub(_e,et);var nt;_e=null;for(at in tt)if(!et.hasOwnProperty(at)&&tt.hasOwnProperty(at)&&tt[at]!=null)if(at==="style"){var it=tt[at];for(nt in it)it.hasOwnProperty(nt)&&(_e||(_e={}),_e[nt]="")}else at!=="dangerouslySetInnerHTML"&&at!=="children"&&at!=="suppressContentEditableWarning"&&at!=="suppressHydrationWarning"&&at!=="autoFocus"&&(ea.hasOwnProperty(at)?rt||(rt=[]):(rt=rt||[]).push(at,null));for(at in et){var st=et[at];if(it=tt!=null?tt[at]:void 0,et.hasOwnProperty(at)&&st!==it&&(st!=null||it!=null))if(at==="style")if(it){for(nt in it)!it.hasOwnProperty(nt)||st&&st.hasOwnProperty(nt)||(_e||(_e={}),_e[nt]="");for(nt in st)st.hasOwnProperty(nt)&&it[nt]!==st[nt]&&(_e||(_e={}),_e[nt]=st[nt])}else _e||(rt||(rt=[]),rt.push(at,_e)),_e=st;else at==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,it=it?it.__html:void 0,st!=null&&it!==st&&(rt=rt||[]).push(at,st)):at==="children"?typeof st!="string"&&typeof st!="number"||(rt=rt||[]).push(at,""+st):at!=="suppressContentEditableWarning"&&at!=="suppressHydrationWarning"&&(ea.hasOwnProperty(at)?(st!=null&&at==="onScroll"&&D$1("scroll",_),rt||it===st||(rt=[])):(rt=rt||[]).push(at,st))}_e&&(rt=rt||[]).push("style",_e);var at=rt;($.updateQueue=at)&&($.flags|=4)}};Cj=function(_,$,_e,et){_e!==et&&($.flags|=4)};function Dj(_,$){if(!I)switch(_.tailMode){case"hidden":$=_.tail;for(var _e=null;$!==null;)$.alternate!==null&&(_e=$),$=$.sibling;_e===null?_.tail=null:_e.sibling=null;break;case"collapsed":_e=_.tail;for(var et=null;_e!==null;)_e.alternate!==null&&(et=_e),_e=_e.sibling;et===null?$||_.tail===null?_.tail=null:_.tail.sibling=null:et.sibling=null}}function S(_){var $=_.alternate!==null&&_.alternate.child===_.child,_e=0,et=0;if($)for(var tt=_.child;tt!==null;)_e|=tt.lanes|tt.childLanes,et|=tt.subtreeFlags&14680064,et|=tt.flags&14680064,tt.return=_,tt=tt.sibling;else for(tt=_.child;tt!==null;)_e|=tt.lanes|tt.childLanes,et|=tt.subtreeFlags,et|=tt.flags,tt.return=_,tt=tt.sibling;return _.subtreeFlags|=et,_.childLanes=_e,$}function Ej(_,$,_e){var et=$.pendingProps;switch(wg($),$.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S($),null;case 1:return Zf($.type)&&$f(),S($),null;case 3:return et=$.stateNode,zh(),E$1(Wf),E$1(H),Eh(),et.pendingContext&&(et.context=et.pendingContext,et.pendingContext=null),(_===null||_.child===null)&&(Gg($)?$.flags|=4:_===null||_.memoizedState.isDehydrated&&!($.flags&256)||($.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(_,$),S($),null;case 5:Bh($);var tt=xh(wh.current);if(_e=$.type,_!==null&&$.stateNode!=null)Bj(_,$,_e,et,tt),_.ref!==$.ref&&($.flags|=512,$.flags|=2097152);else{if(!et){if($.stateNode===null)throw Error(p$2(166));return S($),null}if(_=xh(uh.current),Gg($)){et=$.stateNode,_e=$.type;var rt=$.memoizedProps;switch(et[Of]=$,et[Pf]=rt,_=($.mode&1)!==0,_e){case"dialog":D$1("cancel",et),D$1("close",et);break;case"iframe":case"object":case"embed":D$1("load",et);break;case"video":case"audio":for(tt=0;tt<lf.length;tt++)D$1(lf[tt],et);break;case"source":D$1("error",et);break;case"img":case"image":case"link":D$1("error",et),D$1("load",et);break;case"details":D$1("toggle",et);break;case"input":Za(et,rt),D$1("invalid",et);break;case"select":et._wrapperState={wasMultiple:!!rt.multiple},D$1("invalid",et);break;case"textarea":hb(et,rt),D$1("invalid",et)}ub(_e,rt),tt=null;for(var nt in rt)if(rt.hasOwnProperty(nt)){var it=rt[nt];nt==="children"?typeof it=="string"?et.textContent!==it&&(rt.suppressHydrationWarning!==!0&&Af(et.textContent,it,_),tt=["children",it]):typeof it=="number"&&et.textContent!==""+it&&(rt.suppressHydrationWarning!==!0&&Af(et.textContent,it,_),tt=["children",""+it]):ea.hasOwnProperty(nt)&&it!=null&&nt==="onScroll"&&D$1("scroll",et)}switch(_e){case"input":Va(et),db(et,rt,!0);break;case"textarea":Va(et),jb(et);break;case"select":case"option":break;default:typeof rt.onClick=="function"&&(et.onclick=Bf)}et=tt,$.updateQueue=et,et!==null&&($.flags|=4)}else{nt=tt.nodeType===9?tt:tt.ownerDocument,_==="http://www.w3.org/1999/xhtml"&&(_=kb(_e)),_==="http://www.w3.org/1999/xhtml"?_e==="script"?(_=nt.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild)):typeof et.is=="string"?_=nt.createElement(_e,{is:et.is}):(_=nt.createElement(_e),_e==="select"&&(nt=_,et.multiple?nt.multiple=!0:et.size&&(nt.size=et.size))):_=nt.createElementNS(_,_e),_[Of]=$,_[Pf]=et,zj(_,$,!1,!1),$.stateNode=_;e:{switch(nt=vb(_e,et),_e){case"dialog":D$1("cancel",_),D$1("close",_),tt=et;break;case"iframe":case"object":case"embed":D$1("load",_),tt=et;break;case"video":case"audio":for(tt=0;tt<lf.length;tt++)D$1(lf[tt],_);tt=et;break;case"source":D$1("error",_),tt=et;break;case"img":case"image":case"link":D$1("error",_),D$1("load",_),tt=et;break;case"details":D$1("toggle",_),tt=et;break;case"input":Za(_,et),tt=Ya(_,et),D$1("invalid",_);break;case"option":tt=et;break;case"select":_._wrapperState={wasMultiple:!!et.multiple},tt=A({},et,{value:void 0}),D$1("invalid",_);break;case"textarea":hb(_,et),tt=gb(_,et),D$1("invalid",_);break;default:tt=et}ub(_e,tt),it=tt;for(rt in it)if(it.hasOwnProperty(rt)){var st=it[rt];rt==="style"?sb(_,st):rt==="dangerouslySetInnerHTML"?(st=st?st.__html:void 0,st!=null&&nb(_,st)):rt==="children"?typeof st=="string"?(_e!=="textarea"||st!=="")&&ob(_,st):typeof st=="number"&&ob(_,""+st):rt!=="suppressContentEditableWarning"&&rt!=="suppressHydrationWarning"&&rt!=="autoFocus"&&(ea.hasOwnProperty(rt)?st!=null&&rt==="onScroll"&&D$1("scroll",_):st!=null&&ta(_,rt,st,nt))}switch(_e){case"input":Va(_),db(_,et,!1);break;case"textarea":Va(_),jb(_);break;case"option":et.value!=null&&_.setAttribute("value",""+Sa(et.value));break;case"select":_.multiple=!!et.multiple,rt=et.value,rt!=null?fb(_,!!et.multiple,rt,!1):et.defaultValue!=null&&fb(_,!!et.multiple,et.defaultValue,!0);break;default:typeof tt.onClick=="function"&&(_.onclick=Bf)}switch(_e){case"button":case"input":case"select":case"textarea":et=!!et.autoFocus;break e;case"img":et=!0;break e;default:et=!1}}et&&($.flags|=4)}$.ref!==null&&($.flags|=512,$.flags|=2097152)}return S($),null;case 6:if(_&&$.stateNode!=null)Cj(_,$,_.memoizedProps,et);else{if(typeof et!="string"&&$.stateNode===null)throw Error(p$2(166));if(_e=xh(wh.current),xh(uh.current),Gg($)){if(et=$.stateNode,_e=$.memoizedProps,et[Of]=$,(rt=et.nodeValue!==_e)&&(_=xg,_!==null))switch(_.tag){case 3:Af(et.nodeValue,_e,(_.mode&1)!==0);break;case 5:_.memoizedProps.suppressHydrationWarning!==!0&&Af(et.nodeValue,_e,(_.mode&1)!==0)}rt&&($.flags|=4)}else et=(_e.nodeType===9?_e:_e.ownerDocument).createTextNode(et),et[Of]=$,$.stateNode=et}return S($),null;case 13:if(E$1(L$1),et=$.memoizedState,_===null||_.memoizedState!==null&&_.memoizedState.dehydrated!==null){if(I&&yg!==null&&$.mode&1&&!($.flags&128))Hg(),Ig(),$.flags|=98560,rt=!1;else if(rt=Gg($),et!==null&&et.dehydrated!==null){if(_===null){if(!rt)throw Error(p$2(318));if(rt=$.memoizedState,rt=rt!==null?rt.dehydrated:null,!rt)throw Error(p$2(317));rt[Of]=$}else Ig(),!($.flags&128)&&($.memoizedState=null),$.flags|=4;S($),rt=!1}else zg!==null&&(Fj(zg),zg=null),rt=!0;if(!rt)return $.flags&65536?$:null}return $.flags&128?($.lanes=_e,$):(et=et!==null,et!==(_!==null&&_.memoizedState!==null)&&et&&($.child.flags|=8192,$.mode&1&&(_===null||L$1.current&1?T===0&&(T=3):tj())),$.updateQueue!==null&&($.flags|=4),S($),null);case 4:return zh(),Aj(_,$),_===null&&sf($.stateNode.containerInfo),S($),null;case 10:return ah($.type._context),S($),null;case 17:return Zf($.type)&&$f(),S($),null;case 19:if(E$1(L$1),rt=$.memoizedState,rt===null)return S($),null;if(et=($.flags&128)!==0,nt=rt.rendering,nt===null)if(et)Dj(rt,!1);else{if(T!==0||_!==null&&_.flags&128)for(_=$.child;_!==null;){if(nt=Ch(_),nt!==null){for($.flags|=128,Dj(rt,!1),et=nt.updateQueue,et!==null&&($.updateQueue=et,$.flags|=4),$.subtreeFlags=0,et=_e,_e=$.child;_e!==null;)rt=_e,_=et,rt.flags&=14680066,nt=rt.alternate,nt===null?(rt.childLanes=0,rt.lanes=_,rt.child=null,rt.subtreeFlags=0,rt.memoizedProps=null,rt.memoizedState=null,rt.updateQueue=null,rt.dependencies=null,rt.stateNode=null):(rt.childLanes=nt.childLanes,rt.lanes=nt.lanes,rt.child=nt.child,rt.subtreeFlags=0,rt.deletions=null,rt.memoizedProps=nt.memoizedProps,rt.memoizedState=nt.memoizedState,rt.updateQueue=nt.updateQueue,rt.type=nt.type,_=nt.dependencies,rt.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext}),_e=_e.sibling;return G(L$1,L$1.current&1|2),$.child}_=_.sibling}rt.tail!==null&&B()>Gj&&($.flags|=128,et=!0,Dj(rt,!1),$.lanes=4194304)}else{if(!et)if(_=Ch(nt),_!==null){if($.flags|=128,et=!0,_e=_.updateQueue,_e!==null&&($.updateQueue=_e,$.flags|=4),Dj(rt,!0),rt.tail===null&&rt.tailMode==="hidden"&&!nt.alternate&&!I)return S($),null}else 2*B()-rt.renderingStartTime>Gj&&_e!==1073741824&&($.flags|=128,et=!0,Dj(rt,!1),$.lanes=4194304);rt.isBackwards?(nt.sibling=$.child,$.child=nt):(_e=rt.last,_e!==null?_e.sibling=nt:$.child=nt,rt.last=nt)}return rt.tail!==null?($=rt.tail,rt.rendering=$,rt.tail=$.sibling,rt.renderingStartTime=B(),$.sibling=null,_e=L$1.current,G(L$1,et?_e&1|2:_e&1),$):(S($),null);case 22:case 23:return Hj(),et=$.memoizedState!==null,_!==null&&_.memoizedState!==null!==et&&($.flags|=8192),et&&$.mode&1?fj&1073741824&&(S($),$.subtreeFlags&6&&($.flags|=8192)):S($),null;case 24:return null;case 25:return null}throw Error(p$2(156,$.tag))}function Ij(_,$){switch(wg($),$.tag){case 1:return Zf($.type)&&$f(),_=$.flags,_&65536?($.flags=_&-65537|128,$):null;case 3:return zh(),E$1(Wf),E$1(H),Eh(),_=$.flags,_&65536&&!(_&128)?($.flags=_&-65537|128,$):null;case 5:return Bh($),null;case 13:if(E$1(L$1),_=$.memoizedState,_!==null&&_.dehydrated!==null){if($.alternate===null)throw Error(p$2(340));Ig()}return _=$.flags,_&65536?($.flags=_&-65537|128,$):null;case 19:return E$1(L$1),null;case 4:return zh(),null;case 10:return ah($.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(_,$){var _e=_.ref;if(_e!==null)if(typeof _e=="function")try{_e(null)}catch(et){W(_,$,et)}else _e.current=null}function Mj(_,$,_e){try{_e()}catch(et){W(_,$,et)}}var Nj=!1;function Oj(_,$){if(Cf=dd,_=Me(),Ne(_)){if("selectionStart"in _)var _e={start:_.selectionStart,end:_.selectionEnd};else e:{_e=(_e=_.ownerDocument)&&_e.defaultView||window;var et=_e.getSelection&&_e.getSelection();if(et&&et.rangeCount!==0){_e=et.anchorNode;var tt=et.anchorOffset,rt=et.focusNode;et=et.focusOffset;try{_e.nodeType,rt.nodeType}catch{_e=null;break e}var nt=0,it=-1,st=-1,at=0,ot=0,dt=_,ht=null;t:for(;;){for(var yt;dt!==_e||tt!==0&&dt.nodeType!==3||(it=nt+tt),dt!==rt||et!==0&&dt.nodeType!==3||(st=nt+et),dt.nodeType===3&&(nt+=dt.nodeValue.length),(yt=dt.firstChild)!==null;)ht=dt,dt=yt;for(;;){if(dt===_)break t;if(ht===_e&&++at===tt&&(it=nt),ht===rt&&++ot===et&&(st=nt),(yt=dt.nextSibling)!==null)break;dt=ht,ht=dt.parentNode}dt=yt}_e=it===-1||st===-1?null:{start:it,end:st}}else _e=null}_e=_e||{start:0,end:0}}else _e=null;for(Df={focusedElem:_,selectionRange:_e},dd=!1,V=$;V!==null;)if($=V,_=$.child,($.subtreeFlags&1028)!==0&&_!==null)_.return=$,V=_;else for(;V!==null;){$=V;try{var vt=$.alternate;if($.flags&1024)switch($.tag){case 0:case 11:case 15:break;case 1:if(vt!==null){var xt=vt.memoizedProps,wt=vt.memoizedState,Et=$.stateNode,At=Et.getSnapshotBeforeUpdate($.elementType===$.type?xt:Ci($.type,xt),wt);Et.__reactInternalSnapshotBeforeUpdate=At}break;case 3:var jt=$.stateNode.containerInfo;jt.nodeType===1?jt.textContent="":jt.nodeType===9&&jt.documentElement&&jt.removeChild(jt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(kt){W($,$.return,kt)}if(_=$.sibling,_!==null){_.return=$.return,V=_;break}V=$.return}return vt=Nj,Nj=!1,vt}function Pj(_,$,_e){var et=$.updateQueue;if(et=et!==null?et.lastEffect:null,et!==null){var tt=et=et.next;do{if((tt.tag&_)===_){var rt=tt.destroy;tt.destroy=void 0,rt!==void 0&&Mj($,_e,rt)}tt=tt.next}while(tt!==et)}}function Qj(_,$){if($=$.updateQueue,$=$!==null?$.lastEffect:null,$!==null){var _e=$=$.next;do{if((_e.tag&_)===_){var et=_e.create;_e.destroy=et()}_e=_e.next}while(_e!==$)}}function Rj(_){var $=_.ref;if($!==null){var _e=_.stateNode;switch(_.tag){case 5:_=_e;break;default:_=_e}typeof $=="function"?$(_):$.current=_}}function Sj(_){var $=_.alternate;$!==null&&(_.alternate=null,Sj($)),_.child=null,_.deletions=null,_.sibling=null,_.tag===5&&($=_.stateNode,$!==null&&(delete $[Of],delete $[Pf],delete $[of],delete $[Qf],delete $[Rf])),_.stateNode=null,_.return=null,_.dependencies=null,_.memoizedProps=null,_.memoizedState=null,_.pendingProps=null,_.stateNode=null,_.updateQueue=null}function Tj(_){return _.tag===5||_.tag===3||_.tag===4}function Uj(_){e:for(;;){for(;_.sibling===null;){if(_.return===null||Tj(_.return))return null;_=_.return}for(_.sibling.return=_.return,_=_.sibling;_.tag!==5&&_.tag!==6&&_.tag!==18;){if(_.flags&2||_.child===null||_.tag===4)continue e;_.child.return=_,_=_.child}if(!(_.flags&2))return _.stateNode}}function Vj(_,$,_e){var et=_.tag;if(et===5||et===6)_=_.stateNode,$?_e.nodeType===8?_e.parentNode.insertBefore(_,$):_e.insertBefore(_,$):(_e.nodeType===8?($=_e.parentNode,$.insertBefore(_,_e)):($=_e,$.appendChild(_)),_e=_e._reactRootContainer,_e!=null||$.onclick!==null||($.onclick=Bf));else if(et!==4&&(_=_.child,_!==null))for(Vj(_,$,_e),_=_.sibling;_!==null;)Vj(_,$,_e),_=_.sibling}function Wj(_,$,_e){var et=_.tag;if(et===5||et===6)_=_.stateNode,$?_e.insertBefore(_,$):_e.appendChild(_);else if(et!==4&&(_=_.child,_!==null))for(Wj(_,$,_e),_=_.sibling;_!==null;)Wj(_,$,_e),_=_.sibling}var X$1=null,Xj=!1;function Yj(_,$,_e){for(_e=_e.child;_e!==null;)Zj(_,$,_e),_e=_e.sibling}function Zj(_,$,_e){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,_e)}catch{}switch(_e.tag){case 5:U$1||Lj(_e,$);case 6:var et=X$1,tt=Xj;X$1=null,Yj(_,$,_e),X$1=et,Xj=tt,X$1!==null&&(Xj?(_=X$1,_e=_e.stateNode,_.nodeType===8?_.parentNode.removeChild(_e):_.removeChild(_e)):X$1.removeChild(_e.stateNode));break;case 18:X$1!==null&&(Xj?(_=X$1,_e=_e.stateNode,_.nodeType===8?Kf(_.parentNode,_e):_.nodeType===1&&Kf(_,_e),bd(_)):Kf(X$1,_e.stateNode));break;case 4:et=X$1,tt=Xj,X$1=_e.stateNode.containerInfo,Xj=!0,Yj(_,$,_e),X$1=et,Xj=tt;break;case 0:case 11:case 14:case 15:if(!U$1&&(et=_e.updateQueue,et!==null&&(et=et.lastEffect,et!==null))){tt=et=et.next;do{var rt=tt,nt=rt.destroy;rt=rt.tag,nt!==void 0&&(rt&2||rt&4)&&Mj(_e,$,nt),tt=tt.next}while(tt!==et)}Yj(_,$,_e);break;case 1:if(!U$1&&(Lj(_e,$),et=_e.stateNode,typeof et.componentWillUnmount=="function"))try{et.props=_e.memoizedProps,et.state=_e.memoizedState,et.componentWillUnmount()}catch(it){W(_e,$,it)}Yj(_,$,_e);break;case 21:Yj(_,$,_e);break;case 22:_e.mode&1?(U$1=(et=U$1)||_e.memoizedState!==null,Yj(_,$,_e),U$1=et):Yj(_,$,_e);break;default:Yj(_,$,_e)}}function ak(_){var $=_.updateQueue;if($!==null){_.updateQueue=null;var _e=_.stateNode;_e===null&&(_e=_.stateNode=new Kj),$.forEach(function(et){var tt=bk.bind(null,_,et);_e.has(et)||(_e.add(et),et.then(tt,tt))})}}function ck(_,$){var _e=$.deletions;if(_e!==null)for(var et=0;et<_e.length;et++){var tt=_e[et];try{var rt=_,nt=$,it=nt;e:for(;it!==null;){switch(it.tag){case 5:X$1=it.stateNode,Xj=!1;break e;case 3:X$1=it.stateNode.containerInfo,Xj=!0;break e;case 4:X$1=it.stateNode.containerInfo,Xj=!0;break e}it=it.return}if(X$1===null)throw Error(p$2(160));Zj(rt,nt,tt),X$1=null,Xj=!1;var st=tt.alternate;st!==null&&(st.return=null),tt.return=null}catch(at){W(tt,$,at)}}if($.subtreeFlags&12854)for($=$.child;$!==null;)dk($,_),$=$.sibling}function dk(_,$){var _e=_.alternate,et=_.flags;switch(_.tag){case 0:case 11:case 14:case 15:if(ck($,_),ek(_),et&4){try{Pj(3,_,_.return),Qj(3,_)}catch(xt){W(_,_.return,xt)}try{Pj(5,_,_.return)}catch(xt){W(_,_.return,xt)}}break;case 1:ck($,_),ek(_),et&512&&_e!==null&&Lj(_e,_e.return);break;case 5:if(ck($,_),ek(_),et&512&&_e!==null&&Lj(_e,_e.return),_.flags&32){var tt=_.stateNode;try{ob(tt,"")}catch(xt){W(_,_.return,xt)}}if(et&4&&(tt=_.stateNode,tt!=null)){var rt=_.memoizedProps,nt=_e!==null?_e.memoizedProps:rt,it=_.type,st=_.updateQueue;if(_.updateQueue=null,st!==null)try{it==="input"&&rt.type==="radio"&&rt.name!=null&&ab(tt,rt),vb(it,nt);var at=vb(it,rt);for(nt=0;nt<st.length;nt+=2){var ot=st[nt],dt=st[nt+1];ot==="style"?sb(tt,dt):ot==="dangerouslySetInnerHTML"?nb(tt,dt):ot==="children"?ob(tt,dt):ta(tt,ot,dt,at)}switch(it){case"input":bb(tt,rt);break;case"textarea":ib(tt,rt);break;case"select":var ht=tt._wrapperState.wasMultiple;tt._wrapperState.wasMultiple=!!rt.multiple;var yt=rt.value;yt!=null?fb(tt,!!rt.multiple,yt,!1):ht!==!!rt.multiple&&(rt.defaultValue!=null?fb(tt,!!rt.multiple,rt.defaultValue,!0):fb(tt,!!rt.multiple,rt.multiple?[]:"",!1))}tt[Pf]=rt}catch(xt){W(_,_.return,xt)}}break;case 6:if(ck($,_),ek(_),et&4){if(_.stateNode===null)throw Error(p$2(162));tt=_.stateNode,rt=_.memoizedProps;try{tt.nodeValue=rt}catch(xt){W(_,_.return,xt)}}break;case 3:if(ck($,_),ek(_),et&4&&_e!==null&&_e.memoizedState.isDehydrated)try{bd($.containerInfo)}catch(xt){W(_,_.return,xt)}break;case 4:ck($,_),ek(_);break;case 13:ck($,_),ek(_),tt=_.child,tt.flags&8192&&(rt=tt.memoizedState!==null,tt.stateNode.isHidden=rt,!rt||tt.alternate!==null&&tt.alternate.memoizedState!==null||(fk=B())),et&4&&ak(_);break;case 22:if(ot=_e!==null&&_e.memoizedState!==null,_.mode&1?(U$1=(at=U$1)||ot,ck($,_),U$1=at):ck($,_),ek(_),et&8192){if(at=_.memoizedState!==null,(_.stateNode.isHidden=at)&&!ot&&_.mode&1)for(V=_,ot=_.child;ot!==null;){for(dt=V=ot;V!==null;){switch(ht=V,yt=ht.child,ht.tag){case 0:case 11:case 14:case 15:Pj(4,ht,ht.return);break;case 1:Lj(ht,ht.return);var vt=ht.stateNode;if(typeof vt.componentWillUnmount=="function"){et=ht,_e=ht.return;try{$=et,vt.props=$.memoizedProps,vt.state=$.memoizedState,vt.componentWillUnmount()}catch(xt){W(et,_e,xt)}}break;case 5:Lj(ht,ht.return);break;case 22:if(ht.memoizedState!==null){gk(dt);continue}}yt!==null?(yt.return=ht,V=yt):gk(dt)}ot=ot.sibling}e:for(ot=null,dt=_;;){if(dt.tag===5){if(ot===null){ot=dt;try{tt=dt.stateNode,at?(rt=tt.style,typeof rt.setProperty=="function"?rt.setProperty("display","none","important"):rt.display="none"):(it=dt.stateNode,st=dt.memoizedProps.style,nt=st!=null&&st.hasOwnProperty("display")?st.display:null,it.style.display=rb("display",nt))}catch(xt){W(_,_.return,xt)}}}else if(dt.tag===6){if(ot===null)try{dt.stateNode.nodeValue=at?"":dt.memoizedProps}catch(xt){W(_,_.return,xt)}}else if((dt.tag!==22&&dt.tag!==23||dt.memoizedState===null||dt===_)&&dt.child!==null){dt.child.return=dt,dt=dt.child;continue}if(dt===_)break e;for(;dt.sibling===null;){if(dt.return===null||dt.return===_)break e;ot===dt&&(ot=null),dt=dt.return}ot===dt&&(ot=null),dt.sibling.return=dt.return,dt=dt.sibling}}break;case 19:ck($,_),ek(_),et&4&&ak(_);break;case 21:break;default:ck($,_),ek(_)}}function ek(_){var $=_.flags;if($&2){try{e:{for(var _e=_.return;_e!==null;){if(Tj(_e)){var et=_e;break e}_e=_e.return}throw Error(p$2(160))}switch(et.tag){case 5:var tt=et.stateNode;et.flags&32&&(ob(tt,""),et.flags&=-33);var rt=Uj(_);Wj(_,rt,tt);break;case 3:case 4:var nt=et.stateNode.containerInfo,it=Uj(_);Vj(_,it,nt);break;default:throw Error(p$2(161))}}catch(st){W(_,_.return,st)}_.flags&=-3}$&4096&&(_.flags&=-4097)}function hk(_,$,_e){V=_,ik(_)}function ik(_,$,_e){for(var et=(_.mode&1)!==0;V!==null;){var tt=V,rt=tt.child;if(tt.tag===22&&et){var nt=tt.memoizedState!==null||Jj;if(!nt){var it=tt.alternate,st=it!==null&&it.memoizedState!==null||U$1;it=Jj;var at=U$1;if(Jj=nt,(U$1=st)&&!at)for(V=tt;V!==null;)nt=V,st=nt.child,nt.tag===22&&nt.memoizedState!==null?jk(tt):st!==null?(st.return=nt,V=st):jk(tt);for(;rt!==null;)V=rt,ik(rt),rt=rt.sibling;V=tt,Jj=it,U$1=at}kk(_)}else tt.subtreeFlags&8772&&rt!==null?(rt.return=tt,V=rt):kk(_)}}function kk(_){for(;V!==null;){var $=V;if($.flags&8772){var _e=$.alternate;try{if($.flags&8772)switch($.tag){case 0:case 11:case 15:U$1||Qj(5,$);break;case 1:var et=$.stateNode;if($.flags&4&&!U$1)if(_e===null)et.componentDidMount();else{var tt=$.elementType===$.type?_e.memoizedProps:Ci($.type,_e.memoizedProps);et.componentDidUpdate(tt,_e.memoizedState,et.__reactInternalSnapshotBeforeUpdate)}var rt=$.updateQueue;rt!==null&&sh($,rt,et);break;case 3:var nt=$.updateQueue;if(nt!==null){if(_e=null,$.child!==null)switch($.child.tag){case 5:_e=$.child.stateNode;break;case 1:_e=$.child.stateNode}sh($,nt,_e)}break;case 5:var it=$.stateNode;if(_e===null&&$.flags&4){_e=it;var st=$.memoizedProps;switch($.type){case"button":case"input":case"select":case"textarea":st.autoFocus&&_e.focus();break;case"img":st.src&&(_e.src=st.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if($.memoizedState===null){var at=$.alternate;if(at!==null){var ot=at.memoizedState;if(ot!==null){var dt=ot.dehydrated;dt!==null&&bd(dt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U$1||$.flags&512&&Rj($)}catch(ht){W($,$.return,ht)}}if($===_){V=null;break}if(_e=$.sibling,_e!==null){_e.return=$.return,V=_e;break}V=$.return}}function gk(_){for(;V!==null;){var $=V;if($===_){V=null;break}var _e=$.sibling;if(_e!==null){_e.return=$.return,V=_e;break}V=$.return}}function jk(_){for(;V!==null;){var $=V;try{switch($.tag){case 0:case 11:case 15:var _e=$.return;try{Qj(4,$)}catch(st){W($,_e,st)}break;case 1:var et=$.stateNode;if(typeof et.componentDidMount=="function"){var tt=$.return;try{et.componentDidMount()}catch(st){W($,tt,st)}}var rt=$.return;try{Rj($)}catch(st){W($,rt,st)}break;case 5:var nt=$.return;try{Rj($)}catch(st){W($,nt,st)}}}catch(st){W($,$.return,st)}if($===_){V=null;break}var it=$.sibling;if(it!==null){it.return=$.return,V=it;break}V=$.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(_){return _.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(_=C,_!==0||(_=window.event,_=_===void 0?16:jd(_.type)),_):1}function gi(_,$,_e,et){if(50<yk)throw yk=0,zk=null,Error(p$2(185));Ac(_,_e,et),(!(K&2)||_!==Q)&&(_===Q&&(!(K&2)&&(qk|=_e),T===4&&Ck(_,Z)),Dk(_,et),_e===1&&K===0&&!($.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(_,$){var _e=_.callbackNode;wc(_,$);var et=uc(_,_===Q?Z:0);if(et===0)_e!==null&&bc(_e),_.callbackNode=null,_.callbackPriority=0;else if($=et&-et,_.callbackPriority!==$){if(_e!=null&&bc(_e),$===1)_.tag===0?ig(Ek.bind(null,_)):hg(Ek.bind(null,_)),Jf(function(){!(K&6)&&jg()}),_e=null;else{switch(Dc(et)){case 1:_e=fc;break;case 4:_e=gc;break;case 16:_e=hc;break;case 536870912:_e=jc;break;default:_e=hc}_e=Fk(_e,Gk.bind(null,_))}_.callbackPriority=$,_.callbackNode=_e}}function Gk(_,$){if(Ak=-1,Bk=0,K&6)throw Error(p$2(327));var _e=_.callbackNode;if(Hk()&&_.callbackNode!==_e)return null;var et=uc(_,_===Q?Z:0);if(et===0)return null;if(et&30||et&_.expiredLanes||$)$=Ik(_,et);else{$=et;var tt=K;K|=2;var rt=Jk();(Q!==_||Z!==$)&&(uk=null,Gj=B()+500,Kk(_,$));do try{Lk();break}catch(it){Mk(_,it)}while(!0);$g(),mk.current=rt,K=tt,Y!==null?$=0:(Q=null,Z=0,$=T)}if($!==0){if($===2&&(tt=xc(_),tt!==0&&(et=tt,$=Nk(_,tt))),$===1)throw _e=pk,Kk(_,0),Ck(_,et),Dk(_,B()),_e;if($===6)Ck(_,et);else{if(tt=_.current.alternate,!(et&30)&&!Ok(tt)&&($=Ik(_,et),$===2&&(rt=xc(_),rt!==0&&(et=rt,$=Nk(_,rt))),$===1))throw _e=pk,Kk(_,0),Ck(_,et),Dk(_,B()),_e;switch(_.finishedWork=tt,_.finishedLanes=et,$){case 0:case 1:throw Error(p$2(345));case 2:Pk(_,tk,uk);break;case 3:if(Ck(_,et),(et&130023424)===et&&($=fk+500-B(),10<$)){if(uc(_,0)!==0)break;if(tt=_.suspendedLanes,(tt&et)!==et){R(),_.pingedLanes|=_.suspendedLanes&tt;break}_.timeoutHandle=Ff(Pk.bind(null,_,tk,uk),$);break}Pk(_,tk,uk);break;case 4:if(Ck(_,et),(et&4194240)===et)break;for($=_.eventTimes,tt=-1;0<et;){var nt=31-oc(et);rt=1<<nt,nt=$[nt],nt>tt&&(tt=nt),et&=~rt}if(et=tt,et=B()-et,et=(120>et?120:480>et?480:1080>et?1080:1920>et?1920:3e3>et?3e3:4320>et?4320:1960*lk(et/1960))-et,10<et){_.timeoutHandle=Ff(Pk.bind(null,_,tk,uk),et);break}Pk(_,tk,uk);break;case 5:Pk(_,tk,uk);break;default:throw Error(p$2(329))}}}return Dk(_,B()),_.callbackNode===_e?Gk.bind(null,_):null}function Nk(_,$){var _e=sk;return _.current.memoizedState.isDehydrated&&(Kk(_,$).flags|=256),_=Ik(_,$),_!==2&&($=tk,tk=_e,$!==null&&Fj($)),_}function Fj(_){tk===null?tk=_:tk.push.apply(tk,_)}function Ok(_){for(var $=_;;){if($.flags&16384){var _e=$.updateQueue;if(_e!==null&&(_e=_e.stores,_e!==null))for(var et=0;et<_e.length;et++){var tt=_e[et],rt=tt.getSnapshot;tt=tt.value;try{if(!He(rt(),tt))return!1}catch{return!1}}}if(_e=$.child,$.subtreeFlags&16384&&_e!==null)_e.return=$,$=_e;else{if($===_)break;for(;$.sibling===null;){if($.return===null||$.return===_)return!0;$=$.return}$.sibling.return=$.return,$=$.sibling}}return!0}function Ck(_,$){for($&=~rk,$&=~qk,_.suspendedLanes|=$,_.pingedLanes&=~$,_=_.expirationTimes;0<$;){var _e=31-oc($),et=1<<_e;_[_e]=-1,$&=~et}}function Ek(_){if(K&6)throw Error(p$2(327));Hk();var $=uc(_,0);if(!($&1))return Dk(_,B()),null;var _e=Ik(_,$);if(_.tag!==0&&_e===2){var et=xc(_);et!==0&&($=et,_e=Nk(_,et))}if(_e===1)throw _e=pk,Kk(_,0),Ck(_,$),Dk(_,B()),_e;if(_e===6)throw Error(p$2(345));return _.finishedWork=_.current.alternate,_.finishedLanes=$,Pk(_,tk,uk),Dk(_,B()),null}function Qk(_,$){var _e=K;K|=1;try{return _($)}finally{K=_e,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(_){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var $=K;K|=1;var _e=ok.transition,et=C;try{if(ok.transition=null,C=1,_)return _()}finally{C=et,ok.transition=_e,K=$,!(K&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk(_,$){_.finishedWork=null,_.finishedLanes=0;var _e=_.timeoutHandle;if(_e!==-1&&(_.timeoutHandle=-1,Gf(_e)),Y!==null)for(_e=Y.return;_e!==null;){var et=_e;switch(wg(et),et.tag){case 1:et=et.type.childContextTypes,et!=null&&$f();break;case 3:zh(),E$1(Wf),E$1(H),Eh();break;case 5:Bh(et);break;case 4:zh();break;case 13:E$1(L$1);break;case 19:E$1(L$1);break;case 10:ah(et.type._context);break;case 22:case 23:Hj()}_e=_e.return}if(Q=_,Y=_=Pg(_.current,null),Z=fj=$,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for($=0;$<fh.length;$++)if(_e=fh[$],et=_e.interleaved,et!==null){_e.interleaved=null;var tt=et.next,rt=_e.pending;if(rt!==null){var nt=rt.next;rt.next=tt,et.next=nt}_e.pending=et}fh=null}return _}function Mk(_,$){do{var _e=Y;try{if($g(),Fh.current=Rh,Ih){for(var et=M.memoizedState;et!==null;){var tt=et.queue;tt!==null&&(tt.pending=null),et=et.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,_e===null||_e.return===null){T=1,pk=$,Y=null;break}e:{var rt=_,nt=_e.return,it=_e,st=$;if($=Z,it.flags|=32768,st!==null&&typeof st=="object"&&typeof st.then=="function"){var at=st,ot=it,dt=ot.tag;if(!(ot.mode&1)&&(dt===0||dt===11||dt===15)){var ht=ot.alternate;ht?(ot.updateQueue=ht.updateQueue,ot.memoizedState=ht.memoizedState,ot.lanes=ht.lanes):(ot.updateQueue=null,ot.memoizedState=null)}var yt=Ui(nt);if(yt!==null){yt.flags&=-257,Vi(yt,nt,it,rt,$),yt.mode&1&&Si(rt,at,$),$=yt,st=at;var vt=$.updateQueue;if(vt===null){var xt=new Set;xt.add(st),$.updateQueue=xt}else vt.add(st);break e}else{if(!($&1)){Si(rt,at,$),tj();break e}st=Error(p$2(426))}}else if(I&&it.mode&1){var wt=Ui(nt);if(wt!==null){!(wt.flags&65536)&&(wt.flags|=256),Vi(wt,nt,it,rt,$),Jg(Ji(st,it));break e}}rt=st=Ji(st,it),T!==4&&(T=2),sk===null?sk=[rt]:sk.push(rt),rt=nt;do{switch(rt.tag){case 3:rt.flags|=65536,$&=-$,rt.lanes|=$;var Et=Ni(rt,st,$);ph(rt,Et);break e;case 1:it=st;var At=rt.type,jt=rt.stateNode;if(!(rt.flags&128)&&(typeof At.getDerivedStateFromError=="function"||jt!==null&&typeof jt.componentDidCatch=="function"&&(Ri===null||!Ri.has(jt)))){rt.flags|=65536,$&=-$,rt.lanes|=$;var kt=Qi(rt,it,$);ph(rt,kt);break e}}rt=rt.return}while(rt!==null)}Sk(_e)}catch(Lt){$=Lt,Y===_e&&_e!==null&&(Y=_e=_e.return);continue}break}while(!0)}function Jk(){var _=mk.current;return mk.current=Rh,_===null?Rh:_}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(_,$){var _e=K;K|=2;var et=Jk();(Q!==_||Z!==$)&&(uk=null,Kk(_,$));do try{Tk();break}catch(tt){Mk(_,tt)}while(!0);if($g(),K=_e,mk.current=et,Y!==null)throw Error(p$2(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(_){var $=Vk(_.alternate,_,fj);_.memoizedProps=_.pendingProps,$===null?Sk(_):Y=$,nk.current=null}function Sk(_){var $=_;do{var _e=$.alternate;if(_=$.return,$.flags&32768){if(_e=Ij(_e,$),_e!==null){_e.flags&=32767,Y=_e;return}if(_!==null)_.flags|=32768,_.subtreeFlags=0,_.deletions=null;else{T=6,Y=null;return}}else if(_e=Ej(_e,$,fj),_e!==null){Y=_e;return}if($=$.sibling,$!==null){Y=$;return}Y=$=_}while($!==null);T===0&&(T=5)}function Pk(_,$,_e){var et=C,tt=ok.transition;try{ok.transition=null,C=1,Wk(_,$,_e,et)}finally{ok.transition=tt,C=et}return null}function Wk(_,$,_e,et){do Hk();while(wk!==null);if(K&6)throw Error(p$2(327));_e=_.finishedWork;var tt=_.finishedLanes;if(_e===null)return null;if(_.finishedWork=null,_.finishedLanes=0,_e===_.current)throw Error(p$2(177));_.callbackNode=null,_.callbackPriority=0;var rt=_e.lanes|_e.childLanes;if(Bc(_,rt),_===Q&&(Y=Q=null,Z=0),!(_e.subtreeFlags&2064)&&!(_e.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),rt=(_e.flags&15990)!==0,_e.subtreeFlags&15990||rt){rt=ok.transition,ok.transition=null;var nt=C;C=1;var it=K;K|=4,nk.current=null,Oj(_,_e),dk(_e,_),Oe(Df),dd=!!Cf,Df=Cf=null,_.current=_e,hk(_e),dc(),K=it,C=nt,ok.transition=rt}else _.current=_e;if(vk&&(vk=!1,wk=_,xk=tt),rt=_.pendingLanes,rt===0&&(Ri=null),mc(_e.stateNode),Dk(_,B()),$!==null)for(et=_.onRecoverableError,_e=0;_e<$.length;_e++)tt=$[_e],et(tt.value,{componentStack:tt.stack,digest:tt.digest});if(Oi)throw Oi=!1,_=Pi,Pi=null,_;return xk&1&&_.tag!==0&&Hk(),rt=_.pendingLanes,rt&1?_===zk?yk++:(yk=0,zk=_):yk=0,jg(),null}function Hk(){if(wk!==null){var _=Dc(xk),$=ok.transition,_e=C;try{if(ok.transition=null,C=16>_?16:_,wk===null)var et=!1;else{if(_=wk,wk=null,xk=0,K&6)throw Error(p$2(331));var tt=K;for(K|=4,V=_.current;V!==null;){var rt=V,nt=rt.child;if(V.flags&16){var it=rt.deletions;if(it!==null){for(var st=0;st<it.length;st++){var at=it[st];for(V=at;V!==null;){var ot=V;switch(ot.tag){case 0:case 11:case 15:Pj(8,ot,rt)}var dt=ot.child;if(dt!==null)dt.return=ot,V=dt;else for(;V!==null;){ot=V;var ht=ot.sibling,yt=ot.return;if(Sj(ot),ot===at){V=null;break}if(ht!==null){ht.return=yt,V=ht;break}V=yt}}}var vt=rt.alternate;if(vt!==null){var xt=vt.child;if(xt!==null){vt.child=null;do{var wt=xt.sibling;xt.sibling=null,xt=wt}while(xt!==null)}}V=rt}}if(rt.subtreeFlags&2064&&nt!==null)nt.return=rt,V=nt;else e:for(;V!==null;){if(rt=V,rt.flags&2048)switch(rt.tag){case 0:case 11:case 15:Pj(9,rt,rt.return)}var Et=rt.sibling;if(Et!==null){Et.return=rt.return,V=Et;break e}V=rt.return}}var At=_.current;for(V=At;V!==null;){nt=V;var jt=nt.child;if(nt.subtreeFlags&2064&&jt!==null)jt.return=nt,V=jt;else e:for(nt=At;V!==null;){if(it=V,it.flags&2048)try{switch(it.tag){case 0:case 11:case 15:Qj(9,it)}}catch(Lt){W(it,it.return,Lt)}if(it===nt){V=null;break e}var kt=it.sibling;if(kt!==null){kt.return=it.return,V=kt;break e}V=it.return}}if(K=tt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,_)}catch{}et=!0}return et}finally{C=_e,ok.transition=$}}return!1}function Xk(_,$,_e){$=Ji(_e,$),$=Ni(_,$,1),_=nh(_,$,1),$=R(),_!==null&&(Ac(_,1,$),Dk(_,$))}function W(_,$,_e){if(_.tag===3)Xk(_,_,_e);else for(;$!==null;){if($.tag===3){Xk($,_,_e);break}else if($.tag===1){var et=$.stateNode;if(typeof $.type.getDerivedStateFromError=="function"||typeof et.componentDidCatch=="function"&&(Ri===null||!Ri.has(et))){_=Ji(_e,_),_=Qi($,_,1),$=nh($,_,1),_=R(),$!==null&&(Ac($,1,_),Dk($,_));break}}$=$.return}}function Ti(_,$,_e){var et=_.pingCache;et!==null&&et.delete($),$=R(),_.pingedLanes|=_.suspendedLanes&_e,Q===_&&(Z&_e)===_e&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(_,0):rk|=_e),Dk(_,$)}function Yk(_,$){$===0&&(_.mode&1?($=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):$=1);var _e=R();_=ih(_,$),_!==null&&(Ac(_,$,_e),Dk(_,_e))}function uj(_){var $=_.memoizedState,_e=0;$!==null&&(_e=$.retryLane),Yk(_,_e)}function bk(_,$){var _e=0;switch(_.tag){case 13:var et=_.stateNode,tt=_.memoizedState;tt!==null&&(_e=tt.retryLane);break;case 19:et=_.stateNode;break;default:throw Error(p$2(314))}et!==null&&et.delete($),Yk(_,_e)}var Vk;Vk=function(_,$,_e){if(_!==null)if(_.memoizedProps!==$.pendingProps||Wf.current)dh$1=!0;else{if(!(_.lanes&_e)&&!($.flags&128))return dh$1=!1,yj(_,$,_e);dh$1=!!(_.flags&131072)}else dh$1=!1,I&&$.flags&1048576&&ug($,ng,$.index);switch($.lanes=0,$.tag){case 2:var et=$.type;ij(_,$),_=$.pendingProps;var tt=Yf($,H.current);ch($,_e),tt=Nh(null,$,et,_,tt,_e);var rt=Sh();return $.flags|=1,typeof tt=="object"&&tt!==null&&typeof tt.render=="function"&&tt.$$typeof===void 0?($.tag=1,$.memoizedState=null,$.updateQueue=null,Zf(et)?(rt=!0,cg($)):rt=!1,$.memoizedState=tt.state!==null&&tt.state!==void 0?tt.state:null,kh($),tt.updater=Ei,$.stateNode=tt,tt._reactInternals=$,Ii($,et,_,_e),$=jj(null,$,et,!0,rt,_e)):($.tag=0,I&&rt&&vg($),Xi(null,$,tt,_e),$=$.child),$;case 16:et=$.elementType;e:{switch(ij(_,$),_=$.pendingProps,tt=et._init,et=tt(et._payload),$.type=et,tt=$.tag=Zk(et),_=Ci(et,_),tt){case 0:$=cj(null,$,et,_,_e);break e;case 1:$=hj(null,$,et,_,_e);break e;case 11:$=Yi(null,$,et,_,_e);break e;case 14:$=$i(null,$,et,Ci(et.type,_),_e);break e}throw Error(p$2(306,et,""))}return $;case 0:return et=$.type,tt=$.pendingProps,tt=$.elementType===et?tt:Ci(et,tt),cj(_,$,et,tt,_e);case 1:return et=$.type,tt=$.pendingProps,tt=$.elementType===et?tt:Ci(et,tt),hj(_,$,et,tt,_e);case 3:e:{if(kj($),_===null)throw Error(p$2(387));et=$.pendingProps,rt=$.memoizedState,tt=rt.element,lh(_,$),qh($,et,null,_e);var nt=$.memoizedState;if(et=nt.element,rt.isDehydrated)if(rt={element:et,isDehydrated:!1,cache:nt.cache,pendingSuspenseBoundaries:nt.pendingSuspenseBoundaries,transitions:nt.transitions},$.updateQueue.baseState=rt,$.memoizedState=rt,$.flags&256){tt=Ji(Error(p$2(423)),$),$=lj(_,$,et,_e,tt);break e}else if(et!==tt){tt=Ji(Error(p$2(424)),$),$=lj(_,$,et,_e,tt);break e}else for(yg=Lf($.stateNode.containerInfo.firstChild),xg=$,I=!0,zg=null,_e=Vg($,null,et,_e),$.child=_e;_e;)_e.flags=_e.flags&-3|4096,_e=_e.sibling;else{if(Ig(),et===tt){$=Zi(_,$,_e);break e}Xi(_,$,et,_e)}$=$.child}return $;case 5:return Ah($),_===null&&Eg($),et=$.type,tt=$.pendingProps,rt=_!==null?_.memoizedProps:null,nt=tt.children,Ef(et,tt)?nt=null:rt!==null&&Ef(et,rt)&&($.flags|=32),gj(_,$),Xi(_,$,nt,_e),$.child;case 6:return _===null&&Eg($),null;case 13:return oj(_,$,_e);case 4:return yh($,$.stateNode.containerInfo),et=$.pendingProps,_===null?$.child=Ug($,null,et,_e):Xi(_,$,et,_e),$.child;case 11:return et=$.type,tt=$.pendingProps,tt=$.elementType===et?tt:Ci(et,tt),Yi(_,$,et,tt,_e);case 7:return Xi(_,$,$.pendingProps,_e),$.child;case 8:return Xi(_,$,$.pendingProps.children,_e),$.child;case 12:return Xi(_,$,$.pendingProps.children,_e),$.child;case 10:e:{if(et=$.type._context,tt=$.pendingProps,rt=$.memoizedProps,nt=tt.value,G(Wg,et._currentValue),et._currentValue=nt,rt!==null)if(He(rt.value,nt)){if(rt.children===tt.children&&!Wf.current){$=Zi(_,$,_e);break e}}else for(rt=$.child,rt!==null&&(rt.return=$);rt!==null;){var it=rt.dependencies;if(it!==null){nt=rt.child;for(var st=it.firstContext;st!==null;){if(st.context===et){if(rt.tag===1){st=mh(-1,_e&-_e),st.tag=2;var at=rt.updateQueue;if(at!==null){at=at.shared;var ot=at.pending;ot===null?st.next=st:(st.next=ot.next,ot.next=st),at.pending=st}}rt.lanes|=_e,st=rt.alternate,st!==null&&(st.lanes|=_e),bh(rt.return,_e,$),it.lanes|=_e;break}st=st.next}}else if(rt.tag===10)nt=rt.type===$.type?null:rt.child;else if(rt.tag===18){if(nt=rt.return,nt===null)throw Error(p$2(341));nt.lanes|=_e,it=nt.alternate,it!==null&&(it.lanes|=_e),bh(nt,_e,$),nt=rt.sibling}else nt=rt.child;if(nt!==null)nt.return=rt;else for(nt=rt;nt!==null;){if(nt===$){nt=null;break}if(rt=nt.sibling,rt!==null){rt.return=nt.return,nt=rt;break}nt=nt.return}rt=nt}Xi(_,$,tt.children,_e),$=$.child}return $;case 9:return tt=$.type,et=$.pendingProps.children,ch($,_e),tt=eh(tt),et=et(tt),$.flags|=1,Xi(_,$,et,_e),$.child;case 14:return et=$.type,tt=Ci(et,$.pendingProps),tt=Ci(et.type,tt),$i(_,$,et,tt,_e);case 15:return bj(_,$,$.type,$.pendingProps,_e);case 17:return et=$.type,tt=$.pendingProps,tt=$.elementType===et?tt:Ci(et,tt),ij(_,$),$.tag=1,Zf(et)?(_=!0,cg($)):_=!1,ch($,_e),Gi($,et,tt),Ii($,et,tt,_e),jj(null,$,et,!0,_,_e);case 19:return xj(_,$,_e);case 22:return dj(_,$,_e)}throw Error(p$2(156,$.tag))};function Fk(_,$){return ac(_,$)}function $k(_,$,_e,et){this.tag=_,this.key=_e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=$,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=et,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(_,$,_e,et){return new $k(_,$,_e,et)}function aj(_){return _=_.prototype,!(!_||!_.isReactComponent)}function Zk(_){if(typeof _=="function")return aj(_)?1:0;if(_!=null){if(_=_.$$typeof,_===Da)return 11;if(_===Ga)return 14}return 2}function Pg(_,$){var _e=_.alternate;return _e===null?(_e=Bg(_.tag,$,_.key,_.mode),_e.elementType=_.elementType,_e.type=_.type,_e.stateNode=_.stateNode,_e.alternate=_,_.alternate=_e):(_e.pendingProps=$,_e.type=_.type,_e.flags=0,_e.subtreeFlags=0,_e.deletions=null),_e.flags=_.flags&14680064,_e.childLanes=_.childLanes,_e.lanes=_.lanes,_e.child=_.child,_e.memoizedProps=_.memoizedProps,_e.memoizedState=_.memoizedState,_e.updateQueue=_.updateQueue,$=_.dependencies,_e.dependencies=$===null?null:{lanes:$.lanes,firstContext:$.firstContext},_e.sibling=_.sibling,_e.index=_.index,_e.ref=_.ref,_e}function Rg(_,$,_e,et,tt,rt){var nt=2;if(et=_,typeof _=="function")aj(_)&&(nt=1);else if(typeof _=="string")nt=5;else e:switch(_){case ya:return Tg(_e.children,tt,rt,$);case za:nt=8,tt|=8;break;case Aa:return _=Bg(12,_e,$,tt|2),_.elementType=Aa,_.lanes=rt,_;case Ea:return _=Bg(13,_e,$,tt),_.elementType=Ea,_.lanes=rt,_;case Fa:return _=Bg(19,_e,$,tt),_.elementType=Fa,_.lanes=rt,_;case Ia:return pj(_e,tt,rt,$);default:if(typeof _=="object"&&_!==null)switch(_.$$typeof){case Ba:nt=10;break e;case Ca:nt=9;break e;case Da:nt=11;break e;case Ga:nt=14;break e;case Ha:nt=16,et=null;break e}throw Error(p$2(130,_==null?_:typeof _,""))}return $=Bg(nt,_e,$,tt),$.elementType=_,$.type=et,$.lanes=rt,$}function Tg(_,$,_e,et){return _=Bg(7,_,et,$),_.lanes=_e,_}function pj(_,$,_e,et){return _=Bg(22,_,et,$),_.elementType=Ia,_.lanes=_e,_.stateNode={isHidden:!1},_}function Qg(_,$,_e){return _=Bg(6,_,null,$),_.lanes=_e,_}function Sg(_,$,_e){return $=Bg(4,_.children!==null?_.children:[],_.key,$),$.lanes=_e,$.stateNode={containerInfo:_.containerInfo,pendingChildren:null,implementation:_.implementation},$}function al(_,$,_e,et,tt){this.tag=$,this.containerInfo=_,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=et,this.onRecoverableError=tt,this.mutableSourceEagerHydrationData=null}function bl(_,$,_e,et,tt,rt,nt,it,st){return _=new al(_,$,_e,it,st),$===1?($=1,rt===!0&&($|=8)):$=0,rt=Bg(3,null,null,$),_.current=rt,rt.stateNode=_,rt.memoizedState={element:et,isDehydrated:_e,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(rt),_}function cl(_,$,_e){var et=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:et==null?null:""+et,children:_,containerInfo:$,implementation:_e}}function dl(_){if(!_)return Vf;_=_._reactInternals;e:{if(Vb(_)!==_||_.tag!==1)throw Error(p$2(170));var $=_;do{switch($.tag){case 3:$=$.stateNode.context;break e;case 1:if(Zf($.type)){$=$.stateNode.__reactInternalMemoizedMergedChildContext;break e}}$=$.return}while($!==null);throw Error(p$2(171))}if(_.tag===1){var _e=_.type;if(Zf(_e))return bg(_,_e,$)}return $}function el(_,$,_e,et,tt,rt,nt,it,st){return _=bl(_e,et,!0,_,tt,rt,nt,it,st),_.context=dl(null),_e=_.current,et=R(),tt=yi(_e),rt=mh(et,tt),rt.callback=$??null,nh(_e,rt,tt),_.current.lanes=tt,Ac(_,tt,et),Dk(_,et),_}function fl(_,$,_e,et){var tt=$.current,rt=R(),nt=yi(tt);return _e=dl(_e),$.context===null?$.context=_e:$.pendingContext=_e,$=mh(rt,nt),$.payload={element:_},et=et===void 0?null:et,et!==null&&($.callback=et),_=nh(tt,$,nt),_!==null&&(gi(_,tt,nt,rt),oh(_,tt,nt)),nt}function gl(_){if(_=_.current,!_.child)return null;switch(_.child.tag){case 5:return _.child.stateNode;default:return _.child.stateNode}}function hl(_,$){if(_=_.memoizedState,_!==null&&_.dehydrated!==null){var _e=_.retryLane;_.retryLane=_e!==0&&_e<$?_e:$}}function il(_,$){hl(_,$),(_=_.alternate)&&hl(_,$)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(_){console.error(_)};function ll(_){this._internalRoot=_}ml.prototype.render=ll.prototype.render=function(_){var $=this._internalRoot;if($===null)throw Error(p$2(409));fl(_,$,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var _=this._internalRoot;if(_!==null){this._internalRoot=null;var $=_.containerInfo;Rk(function(){fl(null,_,null,null)}),$[uf]=null}};function ml(_){this._internalRoot=_}ml.prototype.unstable_scheduleHydration=function(_){if(_){var $=Hc();_={blockedOn:null,target:_,priority:$};for(var _e=0;_e<Qc.length&&$!==0&&$<Qc[_e].priority;_e++);Qc.splice(_e,0,_),_e===0&&Vc(_)}};function nl(_){return!(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)}function ol(_){return!(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11&&(_.nodeType!==8||_.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(_,$,_e,et,tt){if(tt){if(typeof et=="function"){var rt=et;et=function(){var at=gl(nt);rt.call(at)}}var nt=el($,et,_,0,null,!1,!1,"",pl);return _._reactRootContainer=nt,_[uf]=nt.current,sf(_.nodeType===8?_.parentNode:_),Rk(),nt}for(;tt=_.lastChild;)_.removeChild(tt);if(typeof et=="function"){var it=et;et=function(){var at=gl(st);it.call(at)}}var st=bl(_,0,!1,null,null,!1,!1,"",pl);return _._reactRootContainer=st,_[uf]=st.current,sf(_.nodeType===8?_.parentNode:_),Rk(function(){fl($,st,_e,et)}),st}function rl(_,$,_e,et,tt){var rt=_e._reactRootContainer;if(rt){var nt=rt;if(typeof tt=="function"){var it=tt;tt=function(){var st=gl(nt);it.call(st)}}fl($,nt,_,tt)}else nt=ql(_e,$,_,tt,et);return gl(nt)}Ec=function(_){switch(_.tag){case 3:var $=_.stateNode;if($.current.memoizedState.isDehydrated){var _e=tc($.pendingLanes);_e!==0&&(Cc($,_e|1),Dk($,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var et=ih(_,1);if(et!==null){var tt=R();gi(et,_,1,tt)}}),il(_,1)}};Fc=function(_){if(_.tag===13){var $=ih(_,134217728);if($!==null){var _e=R();gi($,_,134217728,_e)}il(_,134217728)}};Gc=function(_){if(_.tag===13){var $=yi(_),_e=ih(_,$);if(_e!==null){var et=R();gi(_e,_,$,et)}il(_,$)}};Hc=function(){return C};Ic=function(_,$){var _e=C;try{return C=_,$()}finally{C=_e}};yb=function(_,$,_e){switch($){case"input":if(bb(_,_e),$=_e.name,_e.type==="radio"&&$!=null){for(_e=_;_e.parentNode;)_e=_e.parentNode;for(_e=_e.querySelectorAll("input[name="+JSON.stringify(""+$)+'][type="radio"]'),$=0;$<_e.length;$++){var et=_e[$];if(et!==_&&et.form===_.form){var tt=Db(et);if(!tt)throw Error(p$2(90));Wa(et),bb(et,tt)}}}break;case"textarea":ib(_,_e);break;case"select":$=_e.value,$!=null&&fb(_,!!_e.multiple,$,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(_){return _=Zb(_),_===null?null:_.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(_,$){var _e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl($))throw Error(p$2(200));return cl(_,$,null,_e)};reactDom_production_min.createRoot=function(_,$){if(!nl(_))throw Error(p$2(299));var _e=!1,et="",tt=kl;return $!=null&&($.unstable_strictMode===!0&&(_e=!0),$.identifierPrefix!==void 0&&(et=$.identifierPrefix),$.onRecoverableError!==void 0&&(tt=$.onRecoverableError)),$=bl(_,1,!1,null,null,_e,!1,et,tt),_[uf]=$.current,sf(_.nodeType===8?_.parentNode:_),new ll($)};reactDom_production_min.findDOMNode=function(_){if(_==null)return null;if(_.nodeType===1)return _;var $=_._reactInternals;if($===void 0)throw typeof _.render=="function"?Error(p$2(188)):(_=Object.keys(_).join(","),Error(p$2(268,_)));return _=Zb($),_=_===null?null:_.stateNode,_};reactDom_production_min.flushSync=function(_){return Rk(_)};reactDom_production_min.hydrate=function(_,$,_e){if(!ol($))throw Error(p$2(200));return rl(null,_,$,!0,_e)};reactDom_production_min.hydrateRoot=function(_,$,_e){if(!nl(_))throw Error(p$2(405));var et=_e!=null&&_e.hydratedSources||null,tt=!1,rt="",nt=kl;if(_e!=null&&(_e.unstable_strictMode===!0&&(tt=!0),_e.identifierPrefix!==void 0&&(rt=_e.identifierPrefix),_e.onRecoverableError!==void 0&&(nt=_e.onRecoverableError)),$=el($,null,_,1,_e??null,tt,!1,rt,nt),_[uf]=$.current,sf(_),et)for(_=0;_<et.length;_++)_e=et[_],tt=_e._getVersion,tt=tt(_e._source),$.mutableSourceEagerHydrationData==null?$.mutableSourceEagerHydrationData=[_e,tt]:$.mutableSourceEagerHydrationData.push(_e,tt);return new ml($)};reactDom_production_min.render=function(_,$,_e){if(!ol($))throw Error(p$2(200));return rl(null,_,$,!1,_e)};reactDom_production_min.unmountComponentAtNode=function(_){if(!ol(_))throw Error(p$2(40));return _._reactRootContainer?(Rk(function(){rl(null,null,_,!1,function(){_._reactRootContainer=null,_[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_,$,_e,et){if(!ol(_e))throw Error(p$2(200));if(_==null||_._reactInternals===void 0)throw Error(p$2(38));return rl(_,$,_e,!1,et)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_){console.error(_)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs$1(reactDomExports);var createRoot,m$1=reactDomExports;createRoot=m$1.createRoot,m$1.hydrateRoot;const TOAST_LIMIT=1,TOAST_REMOVE_DELAY=1e6;let count$3=0;function genId(){return count$3=(count$3+1)%Number.MAX_SAFE_INTEGER,count$3.toString()}const toastTimeouts=new Map,addToRemoveQueue=_=>{if(toastTimeouts.has(_))return;const $=setTimeout(()=>{toastTimeouts.delete(_),dispatch({type:"REMOVE_TOAST",toastId:_})},TOAST_REMOVE_DELAY);toastTimeouts.set(_,$)},reducer=(_,$)=>{switch($.type){case"ADD_TOAST":return{..._,toasts:[$.toast,..._.toasts].slice(0,TOAST_LIMIT)};case"UPDATE_TOAST":return{..._,toasts:_.toasts.map(_e=>_e.id===$.toast.id?{..._e,...$.toast}:_e)};case"DISMISS_TOAST":{const{toastId:_e}=$;return _e?addToRemoveQueue(_e):_.toasts.forEach(et=>{addToRemoveQueue(et.id)}),{..._,toasts:_.toasts.map(et=>et.id===_e||_e===void 0?{...et,open:!1}:et)}}case"REMOVE_TOAST":return $.toastId===void 0?{..._,toasts:[]}:{..._,toasts:_.toasts.filter(_e=>_e.id!==$.toastId)}}},listeners=[];let memoryState={toasts:[]};function dispatch(_){memoryState=reducer(memoryState,_),listeners.forEach($=>{$(memoryState)})}function toast({..._}){const $=genId(),_e=tt=>dispatch({type:"UPDATE_TOAST",toast:{...tt,id:$}}),et=()=>dispatch({type:"DISMISS_TOAST",toastId:$});return dispatch({type:"ADD_TOAST",toast:{..._,id:$,open:!0,onOpenChange:tt=>{tt||et()}}}),{id:$,dismiss:et,update:_e}}function useToast(){const[_,$]=reactExports.useState(memoryState);return reactExports.useEffect(()=>(listeners.push($),()=>{const _e=listeners.indexOf($);_e>-1&&listeners.splice(_e,1)}),[_]),{..._,toast,dismiss:_e=>dispatch({type:"DISMISS_TOAST",toastId:_e})}}function composeEventHandlers(_,$,{checkForDefaultPrevented:_e=!0}={}){return function(tt){if(_==null||_(tt),_e===!1||!tt.defaultPrevented)return $==null?void 0:$(tt)}}function setRef(_,$){typeof _=="function"?_($):_!=null&&(_.current=$)}function composeRefs(..._){return $=>_.forEach(_e=>setRef(_e,$))}function useComposedRefs(..._){return reactExports.useCallback(composeRefs(..._),_)}function createContextScope$4(_,$=[]){let _e=[];function et(rt,nt){const it=reactExports.createContext(nt),st=_e.length;_e=[..._e,nt];function at(dt){const{scope:ht,children:yt,...vt}=dt,xt=(ht==null?void 0:ht[_][st])||it,wt=reactExports.useMemo(()=>vt,Object.values(vt));return jsxRuntimeExports.jsx(xt.Provider,{value:wt,children:yt})}function ot(dt,ht){const yt=(ht==null?void 0:ht[_][st])||it,vt=reactExports.useContext(yt);if(vt)return vt;if(nt!==void 0)return nt;throw new Error(`\`${dt}\` must be used within \`${rt}\``)}return at.displayName=rt+"Provider",[at,ot]}const tt=()=>{const rt=_e.map(nt=>reactExports.createContext(nt));return function(it){const st=(it==null?void 0:it[_])||rt;return reactExports.useMemo(()=>({[`__scope${_}`]:{...it,[_]:st}}),[it,st])}};return tt.scopeName=_,[et,composeContextScopes$4(tt,...$)]}function composeContextScopes$4(..._){const $=_[0];if(_.length===1)return $;const _e=()=>{const et=_.map(tt=>({useScope:tt(),scopeName:tt.scopeName}));return function(rt){const nt=et.reduce((it,{useScope:st,scopeName:at})=>{const dt=st(rt)[`__scope${at}`];return{...it,...dt}},{});return reactExports.useMemo(()=>({[`__scope${$.scopeName}`]:nt}),[nt])}};return _e.scopeName=$.scopeName,_e}var Slot=reactExports.forwardRef((_,$)=>{const{children:_e,...et}=_,tt=reactExports.Children.toArray(_e),rt=tt.find(isSlottable);if(rt){const nt=rt.props.children,it=tt.map(st=>st===rt?reactExports.Children.count(nt)>1?reactExports.Children.only(null):reactExports.isValidElement(nt)?nt.props.children:null:st);return jsxRuntimeExports.jsx(SlotClone,{...et,ref:$,children:reactExports.isValidElement(nt)?reactExports.cloneElement(nt,void 0,it):null})}return jsxRuntimeExports.jsx(SlotClone,{...et,ref:$,children:_e})});Slot.displayName="Slot";var SlotClone=reactExports.forwardRef((_,$)=>{const{children:_e,...et}=_;if(reactExports.isValidElement(_e)){const tt=getElementRef$1(_e);return reactExports.cloneElement(_e,{...mergeProps(et,_e.props),ref:$?composeRefs($,tt):tt})}return reactExports.Children.count(_e)>1?reactExports.Children.only(null):null});SlotClone.displayName="SlotClone";var Slottable=({children:_})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_});function isSlottable(_){return reactExports.isValidElement(_)&&_.type===Slottable}function mergeProps(_,$){const _e={...$};for(const et in $){const tt=_[et],rt=$[et];/^on[A-Z]/.test(et)?tt&&rt?_e[et]=(...it)=>{rt(...it),tt(...it)}:tt&&(_e[et]=tt):et==="style"?_e[et]={...tt,...rt}:et==="className"&&(_e[et]=[tt,rt].filter(Boolean).join(" "))}return{..._,..._e}}function getElementRef$1(_){var et,tt;let $=(et=Object.getOwnPropertyDescriptor(_.props,"ref"))==null?void 0:et.get,_e=$&&"isReactWarning"in $&&$.isReactWarning;return _e?_.ref:($=(tt=Object.getOwnPropertyDescriptor(_,"ref"))==null?void 0:tt.get,_e=$&&"isReactWarning"in $&&$.isReactWarning,_e?_.props.ref:_.props.ref||_.ref)}function createCollection(_){const $=_+"CollectionProvider",[_e,et]=createContextScope$4($),[tt,rt]=_e($,{collectionRef:{current:null},itemMap:new Map}),nt=yt=>{const{scope:vt,children:xt}=yt,wt=React.useRef(null),Et=React.useRef(new Map).current;return jsxRuntimeExports.jsx(tt,{scope:vt,itemMap:Et,collectionRef:wt,children:xt})};nt.displayName=$;const it=_+"CollectionSlot",st=React.forwardRef((yt,vt)=>{const{scope:xt,children:wt}=yt,Et=rt(it,xt),At=useComposedRefs(vt,Et.collectionRef);return jsxRuntimeExports.jsx(Slot,{ref:At,children:wt})});st.displayName=it;const at=_+"CollectionItemSlot",ot="data-radix-collection-item",dt=React.forwardRef((yt,vt)=>{const{scope:xt,children:wt,...Et}=yt,At=React.useRef(null),jt=useComposedRefs(vt,At),kt=rt(at,xt);return React.useEffect(()=>(kt.itemMap.set(At,{ref:At,...Et}),()=>void kt.itemMap.delete(At))),jsxRuntimeExports.jsx(Slot,{[ot]:"",ref:jt,children:wt})});dt.displayName=at;function ht(yt){const vt=rt(_+"CollectionConsumer",yt);return React.useCallback(()=>{const wt=vt.collectionRef.current;if(!wt)return[];const Et=Array.from(wt.querySelectorAll(`[${ot}]`));return Array.from(vt.itemMap.values()).sort((kt,Lt)=>Et.indexOf(kt.ref.current)-Et.indexOf(Lt.ref.current))},[vt.collectionRef,vt.itemMap])}return[{Provider:nt,Slot:st,ItemSlot:dt},ht,et]}function createContext2(_,$){const _e=reactExports.createContext($),et=rt=>{const{children:nt,...it}=rt,st=reactExports.useMemo(()=>it,Object.values(it));return jsxRuntimeExports.jsx(_e.Provider,{value:st,children:nt})};et.displayName=_+"Provider";function tt(rt){const nt=reactExports.useContext(_e);if(nt)return nt;if($!==void 0)return $;throw new Error(`\`${rt}\` must be used within \`${_}\``)}return[et,tt]}function createContextScope$3(_,$=[]){let _e=[];function et(rt,nt){const it=reactExports.createContext(nt),st=_e.length;_e=[..._e,nt];const at=dt=>{var Et;const{scope:ht,children:yt,...vt}=dt,xt=((Et=ht==null?void 0:ht[_])==null?void 0:Et[st])||it,wt=reactExports.useMemo(()=>vt,Object.values(vt));return jsxRuntimeExports.jsx(xt.Provider,{value:wt,children:yt})};at.displayName=rt+"Provider";function ot(dt,ht){var xt;const yt=((xt=ht==null?void 0:ht[_])==null?void 0:xt[st])||it,vt=reactExports.useContext(yt);if(vt)return vt;if(nt!==void 0)return nt;throw new Error(`\`${dt}\` must be used within \`${rt}\``)}return[at,ot]}const tt=()=>{const rt=_e.map(nt=>reactExports.createContext(nt));return function(it){const st=(it==null?void 0:it[_])||rt;return reactExports.useMemo(()=>({[`__scope${_}`]:{...it,[_]:st}}),[it,st])}};return tt.scopeName=_,[et,composeContextScopes$3(tt,...$)]}function composeContextScopes$3(..._){const $=_[0];if(_.length===1)return $;const _e=()=>{const et=_.map(tt=>({useScope:tt(),scopeName:tt.scopeName}));return function(rt){const nt=et.reduce((it,{useScope:st,scopeName:at})=>{const dt=st(rt)[`__scope${at}`];return{...it,...dt}},{});return reactExports.useMemo(()=>({[`__scope${$.scopeName}`]:nt}),[nt])}};return _e.scopeName=$.scopeName,_e}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive=NODES.reduce((_,$)=>{const _e=reactExports.forwardRef((et,tt)=>{const{asChild:rt,...nt}=et,it=rt?Slot:$;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(it,{...nt,ref:tt})});return _e.displayName=`Primitive.${$}`,{..._,[$]:_e}},{});function dispatchDiscreteCustomEvent(_,$){_&&reactDomExports.flushSync(()=>_.dispatchEvent($))}function useCallbackRef$1(_){const $=reactExports.useRef(_);return reactExports.useEffect(()=>{$.current=_}),reactExports.useMemo(()=>(..._e)=>{var et;return(et=$.current)==null?void 0:et.call($,..._e)},[])}function useEscapeKeydown(_,$=globalThis==null?void 0:globalThis.document){const _e=useCallbackRef$1(_);reactExports.useEffect(()=>{const et=tt=>{tt.key==="Escape"&&_e(tt)};return $.addEventListener("keydown",et,{capture:!0}),()=>$.removeEventListener("keydown",et,{capture:!0})},[_e,$])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((_,$)=>{const{disableOutsidePointerEvents:_e=!1,onEscapeKeyDown:et,onPointerDownOutside:tt,onFocusOutside:rt,onInteractOutside:nt,onDismiss:it,...st}=_,at=reactExports.useContext(DismissableLayerContext),[ot,dt]=reactExports.useState(null),ht=(ot==null?void 0:ot.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,yt]=reactExports.useState({}),vt=useComposedRefs($,Gt=>dt(Gt)),xt=Array.from(at.layers),[wt]=[...at.layersWithOutsidePointerEventsDisabled].slice(-1),Et=xt.indexOf(wt),At=ot?xt.indexOf(ot):-1,jt=at.layersWithOutsidePointerEventsDisabled.size>0,kt=At>=Et,Lt=usePointerDownOutside(Gt=>{const er=Gt.target,tr=[...at.branches].some(ar=>ar.contains(er));!kt||tr||(tt==null||tt(Gt),nt==null||nt(Gt),Gt.defaultPrevented||it==null||it())},ht),Bt=useFocusOutside(Gt=>{const er=Gt.target;[...at.branches].some(ar=>ar.contains(er))||(rt==null||rt(Gt),nt==null||nt(Gt),Gt.defaultPrevented||it==null||it())},ht);return useEscapeKeydown(Gt=>{At===at.layers.size-1&&(et==null||et(Gt),!Gt.defaultPrevented&&it&&(Gt.preventDefault(),it()))},ht),reactExports.useEffect(()=>{if(ot)return _e&&(at.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=ht.body.style.pointerEvents,ht.body.style.pointerEvents="none"),at.layersWithOutsidePointerEventsDisabled.add(ot)),at.layers.add(ot),dispatchUpdate(),()=>{_e&&at.layersWithOutsidePointerEventsDisabled.size===1&&(ht.body.style.pointerEvents=originalBodyPointerEvents)}},[ot,ht,_e,at]),reactExports.useEffect(()=>()=>{ot&&(at.layers.delete(ot),at.layersWithOutsidePointerEventsDisabled.delete(ot),dispatchUpdate())},[ot,at]),reactExports.useEffect(()=>{const Gt=()=>yt({});return document.addEventListener(CONTEXT_UPDATE,Gt),()=>document.removeEventListener(CONTEXT_UPDATE,Gt)},[]),jsxRuntimeExports.jsx(Primitive.div,{...st,ref:vt,style:{pointerEvents:jt?kt?"auto":"none":void 0,..._.style},onFocusCapture:composeEventHandlers(_.onFocusCapture,Bt.onFocusCapture),onBlurCapture:composeEventHandlers(_.onBlurCapture,Bt.onBlurCapture),onPointerDownCapture:composeEventHandlers(_.onPointerDownCapture,Lt.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((_,$)=>{const _e=reactExports.useContext(DismissableLayerContext),et=reactExports.useRef(null),tt=useComposedRefs($,et);return reactExports.useEffect(()=>{const rt=et.current;if(rt)return _e.branches.add(rt),()=>{_e.branches.delete(rt)}},[_e.branches]),jsxRuntimeExports.jsx(Primitive.div,{..._,ref:tt})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(_,$=globalThis==null?void 0:globalThis.document){const _e=useCallbackRef$1(_),et=reactExports.useRef(!1),tt=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const rt=it=>{if(it.target&&!et.current){let st=function(){handleAndDispatchCustomEvent$1(POINTER_DOWN_OUTSIDE,_e,at,{discrete:!0})};const at={originalEvent:it};it.pointerType==="touch"?($.removeEventListener("click",tt.current),tt.current=st,$.addEventListener("click",tt.current,{once:!0})):st()}else $.removeEventListener("click",tt.current);et.current=!1},nt=window.setTimeout(()=>{$.addEventListener("pointerdown",rt)},0);return()=>{window.clearTimeout(nt),$.removeEventListener("pointerdown",rt),$.removeEventListener("click",tt.current)}},[$,_e]),{onPointerDownCapture:()=>et.current=!0}}function useFocusOutside(_,$=globalThis==null?void 0:globalThis.document){const _e=useCallbackRef$1(_),et=reactExports.useRef(!1);return reactExports.useEffect(()=>{const tt=rt=>{rt.target&&!et.current&&handleAndDispatchCustomEvent$1(FOCUS_OUTSIDE,_e,{originalEvent:rt},{discrete:!1})};return $.addEventListener("focusin",tt),()=>$.removeEventListener("focusin",tt)},[$,_e]),{onFocusCapture:()=>et.current=!0,onBlurCapture:()=>et.current=!1}}function dispatchUpdate(){const _=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(_)}function handleAndDispatchCustomEvent$1(_,$,_e,{discrete:et}){const tt=_e.originalEvent.target,rt=new CustomEvent(_,{bubbles:!1,cancelable:!0,detail:_e});$&&tt.addEventListener(_,$,{once:!0}),et?dispatchDiscreteCustomEvent(tt,rt):tt.dispatchEvent(rt)}var Root$a=DismissableLayer,Branch=DismissableLayerBranch,useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},PORTAL_NAME$5="Portal",Portal$3=reactExports.forwardRef((_,$)=>{var it;const{container:_e,...et}=_,[tt,rt]=reactExports.useState(!1);useLayoutEffect2(()=>rt(!0),[]);const nt=_e||tt&&((it=globalThis==null?void 0:globalThis.document)==null?void 0:it.body);return nt?ReactDOM.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...et,ref:$}),nt):null});Portal$3.displayName=PORTAL_NAME$5;function useStateMachine$1(_,$){return reactExports.useReducer((_e,et)=>$[_e][et]??_e,_)}var Presence=_=>{const{present:$,children:_e}=_,et=usePresence($),tt=typeof _e=="function"?_e({present:et.isPresent}):reactExports.Children.only(_e),rt=useComposedRefs(et.ref,getElementRef(tt));return typeof _e=="function"||et.isPresent?reactExports.cloneElement(tt,{ref:rt}):null};Presence.displayName="Presence";function usePresence(_){const[$,_e]=reactExports.useState(),et=reactExports.useRef({}),tt=reactExports.useRef(_),rt=reactExports.useRef("none"),nt=_?"mounted":"unmounted",[it,st]=useStateMachine$1(nt,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const at=getAnimationName(et.current);rt.current=it==="mounted"?at:"none"},[it]),useLayoutEffect2(()=>{const at=et.current,ot=tt.current;if(ot!==_){const ht=rt.current,yt=getAnimationName(at);_?st("MOUNT"):yt==="none"||(at==null?void 0:at.display)==="none"?st("UNMOUNT"):st(ot&&ht!==yt?"ANIMATION_OUT":"UNMOUNT"),tt.current=_}},[_,st]),useLayoutEffect2(()=>{if($){let at;const ot=$.ownerDocument.defaultView??window,dt=yt=>{const xt=getAnimationName(et.current).includes(yt.animationName);if(yt.target===$&&xt&&(st("ANIMATION_END"),!tt.current)){const wt=$.style.animationFillMode;$.style.animationFillMode="forwards",at=ot.setTimeout(()=>{$.style.animationFillMode==="forwards"&&($.style.animationFillMode=wt)})}},ht=yt=>{yt.target===$&&(rt.current=getAnimationName(et.current))};return $.addEventListener("animationstart",ht),$.addEventListener("animationcancel",dt),$.addEventListener("animationend",dt),()=>{ot.clearTimeout(at),$.removeEventListener("animationstart",ht),$.removeEventListener("animationcancel",dt),$.removeEventListener("animationend",dt)}}else st("ANIMATION_END")},[$,st]),{isPresent:["mounted","unmountSuspended"].includes(it),ref:reactExports.useCallback(at=>{at&&(et.current=getComputedStyle(at)),_e(at)},[])}}function getAnimationName(_){return(_==null?void 0:_.animationName)||"none"}function getElementRef(_){var et,tt;let $=(et=Object.getOwnPropertyDescriptor(_.props,"ref"))==null?void 0:et.get,_e=$&&"isReactWarning"in $&&$.isReactWarning;return _e?_.ref:($=(tt=Object.getOwnPropertyDescriptor(_,"ref"))==null?void 0:tt.get,_e=$&&"isReactWarning"in $&&$.isReactWarning,_e?_.props.ref:_.props.ref||_.ref)}function useControllableState({prop:_,defaultProp:$,onChange:_e=()=>{}}){const[et,tt]=useUncontrolledState({defaultProp:$,onChange:_e}),rt=_!==void 0,nt=rt?_:et,it=useCallbackRef$1(_e),st=reactExports.useCallback(at=>{if(rt){const dt=typeof at=="function"?at(_):at;dt!==_&&it(dt)}else tt(at)},[rt,_,tt,it]);return[nt,st]}function useUncontrolledState({defaultProp:_,onChange:$}){const _e=reactExports.useState(_),[et]=_e,tt=reactExports.useRef(et),rt=useCallbackRef$1($);return reactExports.useEffect(()=>{tt.current!==et&&(rt(et),tt.current=et)},[et,tt,rt]),_e}var NAME$3="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((_,$)=>jsxRuntimeExports.jsx(Primitive.span,{..._,ref:$,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",..._.style}}));VisuallyHidden.displayName=NAME$3;var Root$9=VisuallyHidden,PROVIDER_NAME$1="ToastProvider",[Collection$4,useCollection$4,createCollectionScope$4]=createCollection("Toast"),[createToastContext,createToastScope]=createContextScope$3("Toast",[createCollectionScope$4]),[ToastProviderProvider,useToastProviderContext]=createToastContext(PROVIDER_NAME$1),ToastProvider$1=_=>{const{__scopeToast:$,label:_e="Notification",duration:et=5e3,swipeDirection:tt="right",swipeThreshold:rt=50,children:nt}=_,[it,st]=reactExports.useState(null),[at,ot]=reactExports.useState(0),dt=reactExports.useRef(!1),ht=reactExports.useRef(!1);return _e.trim()||console.error(`Invalid prop \`label\` supplied to \`${PROVIDER_NAME$1}\`. Expected non-empty \`string\`.`),jsxRuntimeExports.jsx(Collection$4.Provider,{scope:$,children:jsxRuntimeExports.jsx(ToastProviderProvider,{scope:$,label:_e,duration:et,swipeDirection:tt,swipeThreshold:rt,toastCount:at,viewport:it,onViewportChange:st,onToastAdd:reactExports.useCallback(()=>ot(yt=>yt+1),[]),onToastRemove:reactExports.useCallback(()=>ot(yt=>yt-1),[]),isFocusedToastEscapeKeyDownRef:dt,isClosePausedRef:ht,children:nt})})};ToastProvider$1.displayName=PROVIDER_NAME$1;var VIEWPORT_NAME$2="ToastViewport",VIEWPORT_DEFAULT_HOTKEY=["F8"],VIEWPORT_PAUSE="toast.viewportPause",VIEWPORT_RESUME="toast.viewportResume",ToastViewport$1=reactExports.forwardRef((_,$)=>{const{__scopeToast:_e,hotkey:et=VIEWPORT_DEFAULT_HOTKEY,label:tt="Notifications ({hotkey})",...rt}=_,nt=useToastProviderContext(VIEWPORT_NAME$2,_e),it=useCollection$4(_e),st=reactExports.useRef(null),at=reactExports.useRef(null),ot=reactExports.useRef(null),dt=reactExports.useRef(null),ht=useComposedRefs($,dt,nt.onViewportChange),yt=et.join("+").replace(/Key/g,"").replace(/Digit/g,""),vt=nt.toastCount>0;reactExports.useEffect(()=>{const wt=Et=>{var jt;et.length!==0&&et.every(kt=>Et[kt]||Et.code===kt)&&((jt=dt.current)==null||jt.focus())};return document.addEventListener("keydown",wt),()=>document.removeEventListener("keydown",wt)},[et]),reactExports.useEffect(()=>{const wt=st.current,Et=dt.current;if(vt&&wt&&Et){const At=()=>{if(!nt.isClosePausedRef.current){const Bt=new CustomEvent(VIEWPORT_PAUSE);Et.dispatchEvent(Bt),nt.isClosePausedRef.current=!0}},jt=()=>{if(nt.isClosePausedRef.current){const Bt=new CustomEvent(VIEWPORT_RESUME);Et.dispatchEvent(Bt),nt.isClosePausedRef.current=!1}},kt=Bt=>{!wt.contains(Bt.relatedTarget)&&jt()},Lt=()=>{wt.contains(document.activeElement)||jt()};return wt.addEventListener("focusin",At),wt.addEventListener("focusout",kt),wt.addEventListener("pointermove",At),wt.addEventListener("pointerleave",Lt),window.addEventListener("blur",At),window.addEventListener("focus",jt),()=>{wt.removeEventListener("focusin",At),wt.removeEventListener("focusout",kt),wt.removeEventListener("pointermove",At),wt.removeEventListener("pointerleave",Lt),window.removeEventListener("blur",At),window.removeEventListener("focus",jt)}}},[vt,nt.isClosePausedRef]);const xt=reactExports.useCallback(({tabbingDirection:wt})=>{const At=it().map(jt=>{const kt=jt.ref.current,Lt=[kt,...getTabbableCandidates$1(kt)];return wt==="forwards"?Lt:Lt.reverse()});return(wt==="forwards"?At.reverse():At).flat()},[it]);return reactExports.useEffect(()=>{const wt=dt.current;if(wt){const Et=At=>{var Lt,Bt,Gt;const jt=At.altKey||At.ctrlKey||At.metaKey;if(At.key==="Tab"&&!jt){const er=document.activeElement,tr=At.shiftKey;if(At.target===wt&&tr){(Lt=at.current)==null||Lt.focus();return}const lt=xt({tabbingDirection:tr?"backwards":"forwards"}),mt=lt.findIndex(gt=>gt===er);focusFirst$3(lt.slice(mt+1))?At.preventDefault():tr?(Bt=at.current)==null||Bt.focus():(Gt=ot.current)==null||Gt.focus()}};return wt.addEventListener("keydown",Et),()=>wt.removeEventListener("keydown",Et)}},[it,xt]),jsxRuntimeExports.jsxs(Branch,{ref:st,role:"region","aria-label":tt.replace("{hotkey}",yt),tabIndex:-1,style:{pointerEvents:vt?void 0:"none"},children:[vt&&jsxRuntimeExports.jsx(FocusProxy,{ref:at,onFocusFromOutsideViewport:()=>{const wt=xt({tabbingDirection:"forwards"});focusFirst$3(wt)}}),jsxRuntimeExports.jsx(Collection$4.Slot,{scope:_e,children:jsxRuntimeExports.jsx(Primitive.ol,{tabIndex:-1,...rt,ref:ht})}),vt&&jsxRuntimeExports.jsx(FocusProxy,{ref:ot,onFocusFromOutsideViewport:()=>{const wt=xt({tabbingDirection:"backwards"});focusFirst$3(wt)}})]})});ToastViewport$1.displayName=VIEWPORT_NAME$2;var FOCUS_PROXY_NAME="ToastFocusProxy",FocusProxy=reactExports.forwardRef((_,$)=>{const{__scopeToast:_e,onFocusFromOutsideViewport:et,...tt}=_,rt=useToastProviderContext(FOCUS_PROXY_NAME,_e);return jsxRuntimeExports.jsx(VisuallyHidden,{"aria-hidden":!0,tabIndex:0,...tt,ref:$,style:{position:"fixed"},onFocus:nt=>{var at;const it=nt.relatedTarget;!((at=rt.viewport)!=null&&at.contains(it))&&et()}})});FocusProxy.displayName=FOCUS_PROXY_NAME;var TOAST_NAME="Toast",TOAST_SWIPE_START="toast.swipeStart",TOAST_SWIPE_MOVE="toast.swipeMove",TOAST_SWIPE_CANCEL="toast.swipeCancel",TOAST_SWIPE_END="toast.swipeEnd",Toast$1=reactExports.forwardRef((_,$)=>{const{forceMount:_e,open:et,defaultOpen:tt,onOpenChange:rt,...nt}=_,[it=!0,st]=useControllableState({prop:et,defaultProp:tt,onChange:rt});return jsxRuntimeExports.jsx(Presence,{present:_e||it,children:jsxRuntimeExports.jsx(ToastImpl,{open:it,...nt,ref:$,onClose:()=>st(!1),onPause:useCallbackRef$1(_.onPause),onResume:useCallbackRef$1(_.onResume),onSwipeStart:composeEventHandlers(_.onSwipeStart,at=>{at.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:composeEventHandlers(_.onSwipeMove,at=>{const{x:ot,y:dt}=at.detail.delta;at.currentTarget.setAttribute("data-swipe","move"),at.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${ot}px`),at.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${dt}px`)}),onSwipeCancel:composeEventHandlers(_.onSwipeCancel,at=>{at.currentTarget.setAttribute("data-swipe","cancel"),at.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),at.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),at.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),at.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:composeEventHandlers(_.onSwipeEnd,at=>{const{x:ot,y:dt}=at.detail.delta;at.currentTarget.setAttribute("data-swipe","end"),at.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),at.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),at.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${ot}px`),at.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${dt}px`),st(!1)})})})});Toast$1.displayName=TOAST_NAME;var[ToastInteractiveProvider,useToastInteractiveContext]=createToastContext(TOAST_NAME,{onClose(){}}),ToastImpl=reactExports.forwardRef((_,$)=>{const{__scopeToast:_e,type:et="foreground",duration:tt,open:rt,onClose:nt,onEscapeKeyDown:it,onPause:st,onResume:at,onSwipeStart:ot,onSwipeMove:dt,onSwipeCancel:ht,onSwipeEnd:yt,...vt}=_,xt=useToastProviderContext(TOAST_NAME,_e),[wt,Et]=reactExports.useState(null),At=useComposedRefs($,gt=>Et(gt)),jt=reactExports.useRef(null),kt=reactExports.useRef(null),Lt=tt||xt.duration,Bt=reactExports.useRef(0),Gt=reactExports.useRef(Lt),er=reactExports.useRef(0),{onToastAdd:tr,onToastRemove:ar}=xt,Mt=useCallbackRef$1(()=>{var bt;(wt==null?void 0:wt.contains(document.activeElement))&&((bt=xt.viewport)==null||bt.focus()),nt()}),lt=reactExports.useCallback(gt=>{!gt||gt===1/0||(window.clearTimeout(er.current),Bt.current=new Date().getTime(),er.current=window.setTimeout(Mt,gt))},[Mt]);reactExports.useEffect(()=>{const gt=xt.viewport;if(gt){const bt=()=>{lt(Gt.current),at==null||at()},St=()=>{const Nt=new Date().getTime()-Bt.current;Gt.current=Gt.current-Nt,window.clearTimeout(er.current),st==null||st()};return gt.addEventListener(VIEWPORT_PAUSE,St),gt.addEventListener(VIEWPORT_RESUME,bt),()=>{gt.removeEventListener(VIEWPORT_PAUSE,St),gt.removeEventListener(VIEWPORT_RESUME,bt)}}},[xt.viewport,Lt,st,at,lt]),reactExports.useEffect(()=>{rt&&!xt.isClosePausedRef.current&&lt(Lt)},[rt,Lt,xt.isClosePausedRef,lt]),reactExports.useEffect(()=>(tr(),()=>ar()),[tr,ar]);const mt=reactExports.useMemo(()=>wt?getAnnounceTextContent(wt):null,[wt]);return xt.viewport?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[mt&&jsxRuntimeExports.jsx(ToastAnnounce,{__scopeToast:_e,role:"status","aria-live":et==="foreground"?"assertive":"polite","aria-atomic":!0,children:mt}),jsxRuntimeExports.jsx(ToastInteractiveProvider,{scope:_e,onClose:Mt,children:reactDomExports.createPortal(jsxRuntimeExports.jsx(Collection$4.ItemSlot,{scope:_e,children:jsxRuntimeExports.jsx(Root$a,{asChild:!0,onEscapeKeyDown:composeEventHandlers(it,()=>{xt.isFocusedToastEscapeKeyDownRef.current||Mt(),xt.isFocusedToastEscapeKeyDownRef.current=!1}),children:jsxRuntimeExports.jsx(Primitive.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":rt?"open":"closed","data-swipe-direction":xt.swipeDirection,...vt,ref:At,style:{userSelect:"none",touchAction:"none",..._.style},onKeyDown:composeEventHandlers(_.onKeyDown,gt=>{gt.key==="Escape"&&(it==null||it(gt.nativeEvent),gt.nativeEvent.defaultPrevented||(xt.isFocusedToastEscapeKeyDownRef.current=!0,Mt()))}),onPointerDown:composeEventHandlers(_.onPointerDown,gt=>{gt.button===0&&(jt.current={x:gt.clientX,y:gt.clientY})}),onPointerMove:composeEventHandlers(_.onPointerMove,gt=>{if(!jt.current)return;const bt=gt.clientX-jt.current.x,St=gt.clientY-jt.current.y,Nt=!!kt.current,Pt=["left","right"].includes(xt.swipeDirection),Tt=["left","up"].includes(xt.swipeDirection)?Math.min:Math.max,pt=Pt?Tt(0,bt):0,Rt=Pt?0:Tt(0,St),zt=gt.pointerType==="touch"?10:2,Yt={x:pt,y:Rt},ir={originalEvent:gt,delta:Yt};Nt?(kt.current=Yt,handleAndDispatchCustomEvent(TOAST_SWIPE_MOVE,dt,ir,{discrete:!1})):isDeltaInDirection(Yt,xt.swipeDirection,zt)?(kt.current=Yt,handleAndDispatchCustomEvent(TOAST_SWIPE_START,ot,ir,{discrete:!1}),gt.target.setPointerCapture(gt.pointerId)):(Math.abs(bt)>zt||Math.abs(St)>zt)&&(jt.current=null)}),onPointerUp:composeEventHandlers(_.onPointerUp,gt=>{const bt=kt.current,St=gt.target;if(St.hasPointerCapture(gt.pointerId)&&St.releasePointerCapture(gt.pointerId),kt.current=null,jt.current=null,bt){const Nt=gt.currentTarget,Pt={originalEvent:gt,delta:bt};isDeltaInDirection(bt,xt.swipeDirection,xt.swipeThreshold)?handleAndDispatchCustomEvent(TOAST_SWIPE_END,yt,Pt,{discrete:!0}):handleAndDispatchCustomEvent(TOAST_SWIPE_CANCEL,ht,Pt,{discrete:!0}),Nt.addEventListener("click",Tt=>Tt.preventDefault(),{once:!0})}})})})}),xt.viewport)})]}):null}),ToastAnnounce=_=>{const{__scopeToast:$,children:_e,...et}=_,tt=useToastProviderContext(TOAST_NAME,$),[rt,nt]=reactExports.useState(!1),[it,st]=reactExports.useState(!1);return useNextFrame(()=>nt(!0)),reactExports.useEffect(()=>{const at=window.setTimeout(()=>st(!0),1e3);return()=>window.clearTimeout(at)},[]),it?null:jsxRuntimeExports.jsx(Portal$3,{asChild:!0,children:jsxRuntimeExports.jsx(VisuallyHidden,{...et,children:rt&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[tt.label," ",_e]})})})},TITLE_NAME$1="ToastTitle",ToastTitle$1=reactExports.forwardRef((_,$)=>{const{__scopeToast:_e,...et}=_;return jsxRuntimeExports.jsx(Primitive.div,{...et,ref:$})});ToastTitle$1.displayName=TITLE_NAME$1;var DESCRIPTION_NAME$1="ToastDescription",ToastDescription$1=reactExports.forwardRef((_,$)=>{const{__scopeToast:_e,...et}=_;return jsxRuntimeExports.jsx(Primitive.div,{...et,ref:$})});ToastDescription$1.displayName=DESCRIPTION_NAME$1;var ACTION_NAME="ToastAction",ToastAction$1=reactExports.forwardRef((_,$)=>{const{altText:_e,...et}=_;return _e.trim()?jsxRuntimeExports.jsx(ToastAnnounceExclude,{altText:_e,asChild:!0,children:jsxRuntimeExports.jsx(ToastClose$1,{...et,ref:$})}):(console.error(`Invalid prop \`altText\` supplied to \`${ACTION_NAME}\`. Expected non-empty \`string\`.`),null)});ToastAction$1.displayName=ACTION_NAME;var CLOSE_NAME$1="ToastClose",ToastClose$1=reactExports.forwardRef((_,$)=>{const{__scopeToast:_e,...et}=_,tt=useToastInteractiveContext(CLOSE_NAME$1,_e);return jsxRuntimeExports.jsx(ToastAnnounceExclude,{asChild:!0,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",...et,ref:$,onClick:composeEventHandlers(_.onClick,tt.onClose)})})});ToastClose$1.displayName=CLOSE_NAME$1;var ToastAnnounceExclude=reactExports.forwardRef((_,$)=>{const{__scopeToast:_e,altText:et,...tt}=_;return jsxRuntimeExports.jsx(Primitive.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":et||void 0,...tt,ref:$})});function getAnnounceTextContent(_){const $=[];return Array.from(_.childNodes).forEach(et=>{if(et.nodeType===et.TEXT_NODE&&et.textContent&&$.push(et.textContent),isHTMLElement$2(et)){const tt=et.ariaHidden||et.hidden||et.style.display==="none",rt=et.dataset.radixToastAnnounceExclude==="";if(!tt)if(rt){const nt=et.dataset.radixToastAnnounceAlt;nt&&$.push(nt)}else $.push(...getAnnounceTextContent(et))}}),$}function handleAndDispatchCustomEvent(_,$,_e,{discrete:et}){const tt=_e.originalEvent.currentTarget,rt=new CustomEvent(_,{bubbles:!0,cancelable:!0,detail:_e});$&&tt.addEventListener(_,$,{once:!0}),et?dispatchDiscreteCustomEvent(tt,rt):tt.dispatchEvent(rt)}var isDeltaInDirection=(_,$,_e=0)=>{const et=Math.abs(_.x),tt=Math.abs(_.y),rt=et>tt;return $==="left"||$==="right"?rt&&et>_e:!rt&&tt>_e};function useNextFrame(_=()=>{}){const $=useCallbackRef$1(_);useLayoutEffect2(()=>{let _e=0,et=0;return _e=window.requestAnimationFrame(()=>et=window.requestAnimationFrame($)),()=>{window.cancelAnimationFrame(_e),window.cancelAnimationFrame(et)}},[$])}function isHTMLElement$2(_){return _.nodeType===_.ELEMENT_NODE}function getTabbableCandidates$1(_){const $=[],_e=document.createTreeWalker(_,NodeFilter.SHOW_ELEMENT,{acceptNode:et=>{const tt=et.tagName==="INPUT"&&et.type==="hidden";return et.disabled||et.hidden||tt?NodeFilter.FILTER_SKIP:et.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;_e.nextNode();)$.push(_e.currentNode);return $}function focusFirst$3(_){const $=document.activeElement;return _.some(_e=>_e===$?!0:(_e.focus(),document.activeElement!==$))}var Provider$1=ToastProvider$1,Viewport$2=ToastViewport$1,Root2$4=Toast$1,Title$1=ToastTitle$1,Description$1=ToastDescription$1,Action$1=ToastAction$1,Close$1=ToastClose$1;function r$1(_){var $,_e,et="";if(typeof _=="string"||typeof _=="number")et+=_;else if(typeof _=="object")if(Array.isArray(_)){var tt=_.length;for($=0;$<tt;$++)_[$]&&(_e=r$1(_[$]))&&(et&&(et+=" "),et+=_e)}else for(_e in _)_[_e]&&(et&&(et+=" "),et+=_e);return et}function clsx(){for(var _,$,_e=0,et="",tt=arguments.length;_e<tt;_e++)(_=arguments[_e])&&($=r$1(_))&&(et&&(et+=" "),et+=$);return et}const falsyToString=_=>typeof _=="boolean"?`${_}`:_===0?"0":_,cx=clsx,cva=(_,$)=>_e=>{var et;if(($==null?void 0:$.variants)==null)return cx(_,_e==null?void 0:_e.class,_e==null?void 0:_e.className);const{variants:tt,defaultVariants:rt}=$,nt=Object.keys(tt).map(at=>{const ot=_e==null?void 0:_e[at],dt=rt==null?void 0:rt[at];if(ot===null)return null;const ht=falsyToString(ot)||falsyToString(dt);return tt[at][ht]}),it=_e&&Object.entries(_e).reduce((at,ot)=>{let[dt,ht]=ot;return ht===void 0||(at[dt]=ht),at},{}),st=$==null||(et=$.compoundVariants)===null||et===void 0?void 0:et.reduce((at,ot)=>{let{class:dt,className:ht,...yt}=ot;return Object.entries(yt).every(vt=>{let[xt,wt]=vt;return Array.isArray(wt)?wt.includes({...rt,...it}[xt]):{...rt,...it}[xt]===wt})?[...at,dt,ht]:at},[]);return cx(_,nt,st,_e==null?void 0:_e.class,_e==null?void 0:_e.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=_=>_.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(..._)=>_.filter(($,_e,et)=>!!$&&$.trim()!==""&&et.indexOf($)===_e).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon$1=reactExports.forwardRef(({color:_="currentColor",size:$=24,strokeWidth:_e=2,absoluteStrokeWidth:et,className:tt="",children:rt,iconNode:nt,...it},st)=>reactExports.createElement("svg",{ref:st,...defaultAttributes,width:$,height:$,stroke:_,strokeWidth:et?Number(_e)*24/Number($):_e,className:mergeClasses("lucide",tt),...it},[...nt.map(([at,ot])=>reactExports.createElement(at,ot)),...Array.isArray(rt)?rt:[rt]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(_,$)=>{const _e=reactExports.forwardRef(({className:et,...tt},rt)=>reactExports.createElement(Icon$1,{ref:rt,iconNode:$,className:mergeClasses(`lucide-${toKebabCase(_)}`,et),...tt}));return _e.displayName=`${_}`,_e};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Activity=createLucideIcon("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowDown=createLucideIcon("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowUp=createLucideIcon("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Award=createLucideIcon("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BellOff=createLucideIcon("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BellRing=createLucideIcon("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bell=createLucideIcon("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChartArea=createLucideIcon("ChartArea",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z",key:"q0gr47"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChartNoAxesColumnIncreasing=createLucideIcon("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Check=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronDown=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronRight=createLucideIcon("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronUp=createLucideIcon("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleAlert=createLucideIcon("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleCheckBig=createLucideIcon("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleHelp=createLucideIcon("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleX=createLucideIcon("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Circle=createLucideIcon("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Clock=createLucideIcon("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cpu=createLucideIcon("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DollarSign=createLucideIcon("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Download=createLucideIcon("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eye=createLucideIcon("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Filter=createLucideIcon("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gauge=createLucideIcon("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const History$2=createLucideIcon("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Info=createLucideIcon("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Layers=createLucideIcon("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mail=createLucideIcon("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Menu$1=createLucideIcon("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Moon=createLucideIcon("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PencilLine=createLucideIcon("PencilLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Plus=createLucideIcon("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RefreshCw=createLucideIcon("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Settings$1=createLucideIcon("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Shield=createLucideIcon("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sun=createLucideIcon("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TriangleAlert=createLucideIcon("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const User=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zap=createLucideIcon("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),CLASS_PART_SEPARATOR="-",createClassGroupUtils=_=>{const $=createClassMap(_),{conflictingClassGroups:_e,conflictingClassGroupModifiers:et}=_;return{getClassGroupId:nt=>{const it=nt.split(CLASS_PART_SEPARATOR);return it[0]===""&&it.length!==1&&it.shift(),getGroupRecursive(it,$)||getGroupIdForArbitraryProperty(nt)},getConflictingClassGroupIds:(nt,it)=>{const st=_e[nt]||[];return it&&et[nt]?[...st,...et[nt]]:st}}},getGroupRecursive=(_,$)=>{var nt;if(_.length===0)return $.classGroupId;const _e=_[0],et=$.nextPart.get(_e),tt=et?getGroupRecursive(_.slice(1),et):void 0;if(tt)return tt;if($.validators.length===0)return;const rt=_.join(CLASS_PART_SEPARATOR);return(nt=$.validators.find(({validator:it})=>it(rt)))==null?void 0:nt.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=_=>{if(arbitraryPropertyRegex.test(_)){const $=arbitraryPropertyRegex.exec(_)[1],_e=$==null?void 0:$.substring(0,$.indexOf(":"));if(_e)return"arbitrary.."+_e}},createClassMap=_=>{const{theme:$,prefix:_e}=_,et={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(_.classGroups),_e).forEach(([rt,nt])=>{processClassesRecursively(nt,et,rt,$)}),et},processClassesRecursively=(_,$,_e,et)=>{_.forEach(tt=>{if(typeof tt=="string"){const rt=tt===""?$:getPart($,tt);rt.classGroupId=_e;return}if(typeof tt=="function"){if(isThemeGetter(tt)){processClassesRecursively(tt(et),$,_e,et);return}$.validators.push({validator:tt,classGroupId:_e});return}Object.entries(tt).forEach(([rt,nt])=>{processClassesRecursively(nt,getPart($,rt),_e,et)})})},getPart=(_,$)=>{let _e=_;return $.split(CLASS_PART_SEPARATOR).forEach(et=>{_e.nextPart.has(et)||_e.nextPart.set(et,{nextPart:new Map,validators:[]}),_e=_e.nextPart.get(et)}),_e},isThemeGetter=_=>_.isThemeGetter,getPrefixedClassGroupEntries=(_,$)=>$?_.map(([_e,et])=>{const tt=et.map(rt=>typeof rt=="string"?$+rt:typeof rt=="object"?Object.fromEntries(Object.entries(rt).map(([nt,it])=>[$+nt,it])):rt);return[_e,tt]}):_,createLruCache=_=>{if(_<1)return{get:()=>{},set:()=>{}};let $=0,_e=new Map,et=new Map;const tt=(rt,nt)=>{_e.set(rt,nt),$++,$>_&&($=0,et=_e,_e=new Map)};return{get(rt){let nt=_e.get(rt);if(nt!==void 0)return nt;if((nt=et.get(rt))!==void 0)return tt(rt,nt),nt},set(rt,nt){_e.has(rt)?_e.set(rt,nt):tt(rt,nt)}}},IMPORTANT_MODIFIER="!",createParseClassName=_=>{const{separator:$,experimentalParseClassName:_e}=_,et=$.length===1,tt=$[0],rt=$.length,nt=it=>{const st=[];let at=0,ot=0,dt;for(let wt=0;wt<it.length;wt++){let Et=it[wt];if(at===0){if(Et===tt&&(et||it.slice(wt,wt+rt)===$)){st.push(it.slice(ot,wt)),ot=wt+rt;continue}if(Et==="/"){dt=wt;continue}}Et==="["?at++:Et==="]"&&at--}const ht=st.length===0?it:it.substring(ot),yt=ht.startsWith(IMPORTANT_MODIFIER),vt=yt?ht.substring(1):ht,xt=dt&&dt>ot?dt-ot:void 0;return{modifiers:st,hasImportantModifier:yt,baseClassName:vt,maybePostfixModifierPosition:xt}};return _e?it=>_e({className:it,parseClassName:nt}):nt},sortModifiers=_=>{if(_.length<=1)return _;const $=[];let _e=[];return _.forEach(et=>{et[0]==="["?($.push(..._e.sort(),et),_e=[]):_e.push(et)}),$.push(..._e.sort()),$},createConfigUtils=_=>({cache:createLruCache(_.cacheSize),parseClassName:createParseClassName(_),...createClassGroupUtils(_)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(_,$)=>{const{parseClassName:_e,getClassGroupId:et,getConflictingClassGroupIds:tt}=$,rt=[],nt=_.trim().split(SPLIT_CLASSES_REGEX);let it="";for(let st=nt.length-1;st>=0;st-=1){const at=nt[st],{modifiers:ot,hasImportantModifier:dt,baseClassName:ht,maybePostfixModifierPosition:yt}=_e(at);let vt=!!yt,xt=et(vt?ht.substring(0,yt):ht);if(!xt){if(!vt){it=at+(it.length>0?" "+it:it);continue}if(xt=et(ht),!xt){it=at+(it.length>0?" "+it:it);continue}vt=!1}const wt=sortModifiers(ot).join(":"),Et=dt?wt+IMPORTANT_MODIFIER:wt,At=Et+xt;if(rt.includes(At))continue;rt.push(At);const jt=tt(xt,vt);for(let kt=0;kt<jt.length;++kt){const Lt=jt[kt];rt.push(Et+Lt)}it=at+(it.length>0?" "+it:it)}return it};function twJoin(){let _=0,$,_e,et="";for(;_<arguments.length;)($=arguments[_++])&&(_e=toValue($))&&(et&&(et+=" "),et+=_e);return et}const toValue=_=>{if(typeof _=="string")return _;let $,_e="";for(let et=0;et<_.length;et++)_[et]&&($=toValue(_[et]))&&(_e&&(_e+=" "),_e+=$);return _e};function createTailwindMerge(_,...$){let _e,et,tt,rt=nt;function nt(st){const at=$.reduce((ot,dt)=>dt(ot),_());return _e=createConfigUtils(at),et=_e.cache.get,tt=_e.cache.set,rt=it,it(st)}function it(st){const at=et(st);if(at)return at;const ot=mergeClassList(st,_e);return tt(st,ot),ot}return function(){return rt(twJoin.apply(null,arguments))}}const fromTheme=_=>{const $=_e=>_e[_]||[];return $.isThemeGetter=!0,$},arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isLength$4=_=>isNumber$6(_)||stringLengths.has(_)||fractionRegex.test(_),isArbitraryLength=_=>getIsArbitraryValue(_,"length",isLengthOnly),isNumber$6=_=>!!_&&!Number.isNaN(Number(_)),isArbitraryNumber=_=>getIsArbitraryValue(_,"number",isNumber$6),isInteger$1=_=>!!_&&Number.isInteger(Number(_)),isPercent$1=_=>_.endsWith("%")&&isNumber$6(_.slice(0,-1)),isArbitraryValue=_=>arbitraryValueRegex.test(_),isTshirtSize=_=>tshirtUnitRegex.test(_),sizeLabels=new Set(["length","size","percentage"]),isArbitrarySize=_=>getIsArbitraryValue(_,sizeLabels,isNever),isArbitraryPosition=_=>getIsArbitraryValue(_,"position",isNever),imageLabels=new Set(["image","url"]),isArbitraryImage=_=>getIsArbitraryValue(_,imageLabels,isImage),isArbitraryShadow=_=>getIsArbitraryValue(_,"",isShadow),isAny=()=>!0,getIsArbitraryValue=(_,$,_e)=>{const et=arbitraryValueRegex.exec(_);return et?et[1]?typeof $=="string"?et[1]===$:$.has(et[1]):_e(et[2]):!1},isLengthOnly=_=>lengthUnitRegex.test(_)&&!colorFunctionRegex.test(_),isNever=()=>!1,isShadow=_=>shadowRegex.test(_),isImage=_=>imageRegex.test(_),getDefaultConfig=()=>{const _=fromTheme("colors"),$=fromTheme("spacing"),_e=fromTheme("blur"),et=fromTheme("brightness"),tt=fromTheme("borderColor"),rt=fromTheme("borderRadius"),nt=fromTheme("borderSpacing"),it=fromTheme("borderWidth"),st=fromTheme("contrast"),at=fromTheme("grayscale"),ot=fromTheme("hueRotate"),dt=fromTheme("invert"),ht=fromTheme("gap"),yt=fromTheme("gradientColorStops"),vt=fromTheme("gradientColorStopPositions"),xt=fromTheme("inset"),wt=fromTheme("margin"),Et=fromTheme("opacity"),At=fromTheme("padding"),jt=fromTheme("saturate"),kt=fromTheme("scale"),Lt=fromTheme("sepia"),Bt=fromTheme("skew"),Gt=fromTheme("space"),er=fromTheme("translate"),tr=()=>["auto","contain","none"],ar=()=>["auto","hidden","clip","visible","scroll"],Mt=()=>["auto",isArbitraryValue,$],lt=()=>[isArbitraryValue,$],mt=()=>["",isLength$4,isArbitraryLength],gt=()=>["auto",isNumber$6,isArbitraryValue],bt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],St=()=>["solid","dashed","dotted","double","none"],Nt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Pt=()=>["start","end","center","between","around","evenly","stretch"],Tt=()=>["","0",isArbitraryValue],pt=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Rt=()=>[isNumber$6,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength$4,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:Rt(),borderColor:[_],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:lt(),borderWidth:mt(),contrast:Rt(),grayscale:Tt(),hueRotate:Rt(),invert:Tt(),gap:lt(),gradientColorStops:[_],gradientColorStopPositions:[isPercent$1,isArbitraryLength],inset:Mt(),margin:Mt(),opacity:Rt(),padding:lt(),saturate:Rt(),scale:Rt(),sepia:Tt(),skew:Rt(),space:lt(),translate:lt()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":pt()}],"break-before":[{"break-before":pt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...bt(),isArbitraryValue]}],overflow:[{overflow:ar()}],"overflow-x":[{"overflow-x":ar()}],"overflow-y":[{"overflow-y":ar()}],overscroll:[{overscroll:tr()}],"overscroll-x":[{"overscroll-x":tr()}],"overscroll-y":[{"overscroll-y":tr()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[xt]}],"inset-x":[{"inset-x":[xt]}],"inset-y":[{"inset-y":[xt]}],start:[{start:[xt]}],end:[{end:[xt]}],top:[{top:[xt]}],right:[{right:[xt]}],bottom:[{bottom:[xt]}],left:[{left:[xt]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger$1,isArbitraryValue]}],basis:[{basis:Mt()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:Tt()}],shrink:[{shrink:Tt()}],order:[{order:["first","last","none",isInteger$1,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger$1,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":gt()}],"col-end":[{"col-end":gt()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger$1,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":gt()}],"row-end":[{"row-end":gt()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[ht]}],"gap-x":[{"gap-x":[ht]}],"gap-y":[{"gap-y":[ht]}],"justify-content":[{justify:["normal",...Pt()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Pt(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Pt(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[At]}],px:[{px:[At]}],py:[{py:[At]}],ps:[{ps:[At]}],pe:[{pe:[At]}],pt:[{pt:[At]}],pr:[{pr:[At]}],pb:[{pb:[At]}],pl:[{pl:[At]}],m:[{m:[wt]}],mx:[{mx:[wt]}],my:[{my:[wt]}],ms:[{ms:[wt]}],me:[{me:[wt]}],mt:[{mt:[wt]}],mr:[{mr:[wt]}],mb:[{mb:[wt]}],ml:[{ml:[wt]}],"space-x":[{"space-x":[Gt]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Gt]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,$]}],"min-w":[{"min-w":[isArbitraryValue,$,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,$,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,$,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,$,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,$,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,$,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber$6,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength$4,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[_]}],"placeholder-opacity":[{"placeholder-opacity":[Et]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[_]}],"text-opacity":[{"text-opacity":[Et]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...St(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength$4,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength$4,isArbitraryValue]}],"text-decoration-color":[{decoration:[_]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:lt()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[Et]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...bt(),isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[_]}],"gradient-from-pos":[{from:[vt]}],"gradient-via-pos":[{via:[vt]}],"gradient-to-pos":[{to:[vt]}],"gradient-from":[{from:[yt]}],"gradient-via":[{via:[yt]}],"gradient-to":[{to:[yt]}],rounded:[{rounded:[rt]}],"rounded-s":[{"rounded-s":[rt]}],"rounded-e":[{"rounded-e":[rt]}],"rounded-t":[{"rounded-t":[rt]}],"rounded-r":[{"rounded-r":[rt]}],"rounded-b":[{"rounded-b":[rt]}],"rounded-l":[{"rounded-l":[rt]}],"rounded-ss":[{"rounded-ss":[rt]}],"rounded-se":[{"rounded-se":[rt]}],"rounded-ee":[{"rounded-ee":[rt]}],"rounded-es":[{"rounded-es":[rt]}],"rounded-tl":[{"rounded-tl":[rt]}],"rounded-tr":[{"rounded-tr":[rt]}],"rounded-br":[{"rounded-br":[rt]}],"rounded-bl":[{"rounded-bl":[rt]}],"border-w":[{border:[it]}],"border-w-x":[{"border-x":[it]}],"border-w-y":[{"border-y":[it]}],"border-w-s":[{"border-s":[it]}],"border-w-e":[{"border-e":[it]}],"border-w-t":[{"border-t":[it]}],"border-w-r":[{"border-r":[it]}],"border-w-b":[{"border-b":[it]}],"border-w-l":[{"border-l":[it]}],"border-opacity":[{"border-opacity":[Et]}],"border-style":[{border:[...St(),"hidden"]}],"divide-x":[{"divide-x":[it]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[it]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[Et]}],"divide-style":[{divide:St()}],"border-color":[{border:[tt]}],"border-color-x":[{"border-x":[tt]}],"border-color-y":[{"border-y":[tt]}],"border-color-s":[{"border-s":[tt]}],"border-color-e":[{"border-e":[tt]}],"border-color-t":[{"border-t":[tt]}],"border-color-r":[{"border-r":[tt]}],"border-color-b":[{"border-b":[tt]}],"border-color-l":[{"border-l":[tt]}],"divide-color":[{divide:[tt]}],"outline-style":[{outline:["",...St()]}],"outline-offset":[{"outline-offset":[isLength$4,isArbitraryValue]}],"outline-w":[{outline:[isLength$4,isArbitraryLength]}],"outline-color":[{outline:[_]}],"ring-w":[{ring:mt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[_]}],"ring-opacity":[{"ring-opacity":[Et]}],"ring-offset-w":[{"ring-offset":[isLength$4,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[_]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[Et]}],"mix-blend":[{"mix-blend":[...Nt(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Nt()}],filter:[{filter:["","none"]}],blur:[{blur:[_e]}],brightness:[{brightness:[et]}],contrast:[{contrast:[st]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[at]}],"hue-rotate":[{"hue-rotate":[ot]}],invert:[{invert:[dt]}],saturate:[{saturate:[jt]}],sepia:[{sepia:[Lt]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[_e]}],"backdrop-brightness":[{"backdrop-brightness":[et]}],"backdrop-contrast":[{"backdrop-contrast":[st]}],"backdrop-grayscale":[{"backdrop-grayscale":[at]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ot]}],"backdrop-invert":[{"backdrop-invert":[dt]}],"backdrop-opacity":[{"backdrop-opacity":[Et]}],"backdrop-saturate":[{"backdrop-saturate":[jt]}],"backdrop-sepia":[{"backdrop-sepia":[Lt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[nt]}],"border-spacing-x":[{"border-spacing-x":[nt]}],"border-spacing-y":[{"border-spacing-y":[nt]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:Rt()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:Rt()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[kt]}],"scale-x":[{"scale-x":[kt]}],"scale-y":[{"scale-y":[kt]}],rotate:[{rotate:[isInteger$1,isArbitraryValue]}],"translate-x":[{"translate-x":[er]}],"translate-y":[{"translate-y":[er]}],"skew-x":[{"skew-x":[Bt]}],"skew-y":[{"skew-y":[Bt]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",_]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[_]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":lt()}],"scroll-mx":[{"scroll-mx":lt()}],"scroll-my":[{"scroll-my":lt()}],"scroll-ms":[{"scroll-ms":lt()}],"scroll-me":[{"scroll-me":lt()}],"scroll-mt":[{"scroll-mt":lt()}],"scroll-mr":[{"scroll-mr":lt()}],"scroll-mb":[{"scroll-mb":lt()}],"scroll-ml":[{"scroll-ml":lt()}],"scroll-p":[{"scroll-p":lt()}],"scroll-px":[{"scroll-px":lt()}],"scroll-py":[{"scroll-py":lt()}],"scroll-ps":[{"scroll-ps":lt()}],"scroll-pe":[{"scroll-pe":lt()}],"scroll-pt":[{"scroll-pt":lt()}],"scroll-pr":[{"scroll-pr":lt()}],"scroll-pb":[{"scroll-pb":lt()}],"scroll-pl":[{"scroll-pl":lt()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[_,"none"]}],"stroke-w":[{stroke:[isLength$4,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[_,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},twMerge=createTailwindMerge(getDefaultConfig);function cn(..._){return twMerge(clsx(_))}const ToastProvider=Provider$1,ToastViewport=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx(Viewport$2,{ref:_e,className:cn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",_),...$}));ToastViewport.displayName=Viewport$2.displayName;const toastVariants=cva("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Toast=reactExports.forwardRef(({className:_,variant:$,..._e},et)=>jsxRuntimeExports.jsx(Root2$4,{ref:et,className:cn(toastVariants({variant:$}),_),..._e}));Toast.displayName=Root2$4.displayName;const ToastAction=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx(Action$1,{ref:_e,className:cn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",_),...$}));ToastAction.displayName=Action$1.displayName;const ToastClose=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx(Close$1,{ref:_e,className:cn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",_),"toast-close":"",...$,children:jsxRuntimeExports.jsx(X,{className:"h-4 w-4"})}));ToastClose.displayName=Close$1.displayName;const ToastTitle=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx(Title$1,{ref:_e,className:cn("text-sm font-semibold",_),...$}));ToastTitle.displayName=Title$1.displayName;const ToastDescription=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx(Description$1,{ref:_e,className:cn("text-sm opacity-90",_),...$}));ToastDescription.displayName=Description$1.displayName;function Toaster$1(){const{toasts:_}=useToast();return jsxRuntimeExports.jsxs(ToastProvider,{children:[_.map(function({id:$,title:_e,description:et,action:tt,...rt}){return jsxRuntimeExports.jsxs(Toast,{...rt,children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-1",children:[_e&&jsxRuntimeExports.jsx(ToastTitle,{children:_e}),et&&jsxRuntimeExports.jsx(ToastDescription,{children:et})]}),tt,jsxRuntimeExports.jsx(ToastClose,{})]},$)}),jsxRuntimeExports.jsx(ToastViewport,{})]})}var P$1=["light","dark"],E="(prefers-color-scheme: dark)",L=reactExports.createContext(void 0),D={setTheme:_=>{},themes:[]},j=()=>{var _;return(_=reactExports.useContext(L))!=null?_:D};reactExports.memo(({forcedTheme:_,storageKey:$,attribute:_e,enableSystem:et,enableColorScheme:tt,defaultTheme:rt,value:nt,attrs:it,nonce:st})=>{let at=rt==="system",ot=_e==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${it.map(vt=>`'${vt}'`).join(",")})`};`:`var d=document.documentElement,n='${_e}',s='setAttribute';`,dt=tt?P$1.includes(rt)&&rt?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${rt}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",ht=(vt,xt=!1,wt=!0)=>{let Et=nt?nt[vt]:vt,At=xt?vt+"|| ''":`'${Et}'`,jt="";return tt&&wt&&!xt&&P$1.includes(vt)&&(jt+=`d.style.colorScheme = '${vt}';`),_e==="class"?xt||Et?jt+=`c.add(${At})`:jt+="null":Et&&(jt+=`d[s](n,${At})`),jt},yt=_?`!function(){${ot}${ht(_)}}()`:et?`!function(){try{${ot}var e=localStorage.getItem('${$}');if('system'===e||(!e&&${at})){var t='${E}',m=window.matchMedia(t);if(m.media!==t||m.matches){${ht("dark")}}else{${ht("light")}}}else if(e){${nt?`var x=${JSON.stringify(nt)};`:""}${ht(nt?"x[e]":"e",!0)}}${at?"":"else{"+ht(rt,!1,!1)+"}"}${dt}}catch(e){}}()`:`!function(){try{${ot}var e=localStorage.getItem('${$}');if(e){${nt?`var x=${JSON.stringify(nt)};`:""}${ht(nt?"x[e]":"e",!0)}}else{${ht(rt,!1,!1)};}${dt}}catch(t){}}();`;return reactExports.createElement("script",{nonce:st,dangerouslySetInnerHTML:{__html:yt}})});var Ct=_=>{switch(_){case"success":return $t;case"info":return _t;case"warning":return Wt;case"error":return Ut;default:return null}},Ft=Array(12).fill(0),It=({visible:_})=>React.createElement("div",{className:"sonner-loading-wrapper","data-visible":_},React.createElement("div",{className:"sonner-spinner"},Ft.map(($,_e)=>React.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${_e}`})))),$t=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Wt=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),_t=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Ut=React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},React.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Dt=()=>{let[_,$]=React.useState(document.hidden);return React.useEffect(()=>{let _e=()=>{$(document.hidden)};return document.addEventListener("visibilitychange",_e),()=>window.removeEventListener("visibilitychange",_e)},[]),_},ct=1,ut=class{constructor(){this.subscribe=_=>(this.subscribers.push(_),()=>{let $=this.subscribers.indexOf(_);this.subscribers.splice($,1)}),this.publish=_=>{this.subscribers.forEach($=>$(_))},this.addToast=_=>{this.publish(_),this.toasts=[...this.toasts,_]},this.create=_=>{var $;let{message:_e,...et}=_,tt=typeof(_==null?void 0:_.id)=="number"||(($=_.id)==null?void 0:$.length)>0?_.id:ct++,rt=this.toasts.find(it=>it.id===tt),nt=_.dismissible===void 0?!0:_.dismissible;return rt?this.toasts=this.toasts.map(it=>it.id===tt?(this.publish({...it,..._,id:tt,title:_e}),{...it,..._,id:tt,dismissible:nt,title:_e}):it):this.addToast({title:_e,...et,dismissible:nt,id:tt}),tt},this.dismiss=_=>(_||this.toasts.forEach($=>{this.subscribers.forEach(_e=>_e({id:$.id,dismiss:!0}))}),this.subscribers.forEach($=>$({id:_,dismiss:!0})),_),this.message=(_,$)=>this.create({...$,message:_}),this.error=(_,$)=>this.create({...$,message:_,type:"error"}),this.success=(_,$)=>this.create({...$,type:"success",message:_}),this.info=(_,$)=>this.create({...$,type:"info",message:_}),this.warning=(_,$)=>this.create({...$,type:"warning",message:_}),this.loading=(_,$)=>this.create({...$,type:"loading",message:_}),this.promise=(_,$)=>{if(!$)return;let _e;$.loading!==void 0&&(_e=this.create({...$,promise:_,type:"loading",message:$.loading,description:typeof $.description!="function"?$.description:void 0}));let et=_ instanceof Promise?_:_(),tt=_e!==void 0;return et.then(async rt=>{if(Ot(rt)&&!rt.ok){tt=!1;let nt=typeof $.error=="function"?await $.error(`HTTP error! status: ${rt.status}`):$.error,it=typeof $.description=="function"?await $.description(`HTTP error! status: ${rt.status}`):$.description;this.create({id:_e,type:"error",message:nt,description:it})}else if($.success!==void 0){tt=!1;let nt=typeof $.success=="function"?await $.success(rt):$.success,it=typeof $.description=="function"?await $.description(rt):$.description;this.create({id:_e,type:"success",message:nt,description:it})}}).catch(async rt=>{if($.error!==void 0){tt=!1;let nt=typeof $.error=="function"?await $.error(rt):$.error,it=typeof $.description=="function"?await $.description(rt):$.description;this.create({id:_e,type:"error",message:nt,description:it})}}).finally(()=>{var rt;tt&&(this.dismiss(_e),_e=void 0),(rt=$.finally)==null||rt.call($)}),_e},this.custom=(_,$)=>{let _e=($==null?void 0:$.id)||ct++;return this.create({jsx:_(_e),id:_e,...$}),_e},this.subscribers=[],this.toasts=[]}},v$1=new ut,Vt=(_,$)=>{let _e=($==null?void 0:$.id)||ct++;return v$1.addToast({title:_,...$,id:_e}),_e},Ot=_=>_&&typeof _=="object"&&"ok"in _&&typeof _.ok=="boolean"&&"status"in _&&typeof _.status=="number",Kt=Vt,Xt=()=>v$1.toasts,Jt=Object.assign(Kt,{success:v$1.success,info:v$1.info,warning:v$1.warning,error:v$1.error,custom:v$1.custom,message:v$1.message,promise:v$1.promise,dismiss:v$1.dismiss,loading:v$1.loading},{getHistory:Xt});function ft(_,{insertAt:$}={}){if(typeof document>"u")return;let _e=document.head||document.getElementsByTagName("head")[0],et=document.createElement("style");et.type="text/css",$==="top"&&_e.firstChild?_e.insertBefore(et,_e.firstChild):_e.appendChild(et),et.styleSheet?et.styleSheet.cssText=_:et.appendChild(document.createTextNode(_))}ft(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function U(_){return _.label!==void 0}var qt=3,Qt="32px",Zt=4e3,te=356,ee=14,oe=20,ae=200;function ne(..._){return _.filter(Boolean).join(" ")}var se=_=>{var $,_e,et,tt,rt,nt,it,st,at,ot;let{invert:dt,toast:ht,unstyled:yt,interacting:vt,setHeights:xt,visibleToasts:wt,heights:Et,index:At,toasts:jt,expanded:kt,removeToast:Lt,defaultRichColors:Bt,closeButton:Gt,style:er,cancelButtonStyle:tr,actionButtonStyle:ar,className:Mt="",descriptionClassName:lt="",duration:mt,position:gt,gap:bt,loadingIcon:St,expandByDefault:Nt,classNames:Pt,icons:Tt,closeButtonAriaLabel:pt="Close toast",pauseWhenPageIsHidden:Rt,cn:zt}=_,[Yt,ir]=React.useState(!1),[ur,cr]=React.useState(!1),[rr,fr]=React.useState(!1),[dr,gr]=React.useState(!1),[hr,or]=React.useState(0),[br,Rr]=React.useState(0),_r=React.useRef(null),Er=React.useRef(null),Hr=At===0,xr=At+1<=wt,yr=ht.type,Ar=ht.dismissible!==!1,$r=ht.className||"",Tr=ht.descriptionClassName||"",jr=React.useMemo(()=>Et.findIndex(rn=>rn.toastId===ht.id)||0,[Et,ht.id]),Cr=React.useMemo(()=>{var rn;return(rn=ht.closeButton)!=null?rn:Gt},[ht.closeButton,Gt]),Nr=React.useMemo(()=>ht.duration||mt||Zt,[ht.duration,mt]),nn=React.useRef(0),Mr=React.useRef(0),Lr=React.useRef(0),an=React.useRef(null),[pr,nr]=gt.split("-"),lr=React.useMemo(()=>Et.reduce((rn,Ir,Or)=>Or>=jr?rn:rn+Ir.height,0),[Et,jr]),vr=Dt(),wr=ht.invert||dt,Pr=yr==="loading";Mr.current=React.useMemo(()=>jr*bt+lr,[jr,lr]),React.useEffect(()=>{ir(!0)},[]),React.useLayoutEffect(()=>{if(!Yt)return;let rn=Er.current,Ir=rn.style.height;rn.style.height="auto";let Or=rn.getBoundingClientRect().height;rn.style.height=Ir,Rr(Or),xt(sn=>sn.find(Fr=>Fr.toastId===ht.id)?sn.map(Fr=>Fr.toastId===ht.id?{...Fr,height:Or}:Fr):[{toastId:ht.id,height:Or,position:ht.position},...sn])},[Yt,ht.title,ht.description,xt,ht.id]);let Sr=React.useCallback(()=>{cr(!0),or(Mr.current),xt(rn=>rn.filter(Ir=>Ir.toastId!==ht.id)),setTimeout(()=>{Lt(ht)},ae)},[ht,Lt,xt,Mr]);React.useEffect(()=>{if(ht.promise&&yr==="loading"||ht.duration===1/0||ht.type==="loading")return;let rn,Ir=Nr;return kt||vt||Rt&&vr?(()=>{if(Lr.current<nn.current){let Or=new Date().getTime()-nn.current;Ir=Ir-Or}Lr.current=new Date().getTime()})():Ir!==1/0&&(nn.current=new Date().getTime(),rn=setTimeout(()=>{var Or;(Or=ht.onAutoClose)==null||Or.call(ht,ht),Sr()},Ir)),()=>clearTimeout(rn)},[kt,vt,Nt,ht,Nr,Sr,ht.promise,yr,Rt,vr]),React.useEffect(()=>{let rn=Er.current;if(rn){let Ir=rn.getBoundingClientRect().height;return Rr(Ir),xt(Or=>[{toastId:ht.id,height:Ir,position:ht.position},...Or]),()=>xt(Or=>Or.filter(sn=>sn.toastId!==ht.id))}},[xt,ht.id]),React.useEffect(()=>{ht.delete&&Sr()},[Sr,ht.delete]);function Dr(){return Tt!=null&&Tt.loading?React.createElement("div",{className:"sonner-loader","data-visible":yr==="loading"},Tt.loading):St?React.createElement("div",{className:"sonner-loader","data-visible":yr==="loading"},St):React.createElement(It,{visible:yr==="loading"})}return React.createElement("li",{"aria-live":ht.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Er,className:zt(Mt,$r,Pt==null?void 0:Pt.toast,($=ht==null?void 0:ht.classNames)==null?void 0:$.toast,Pt==null?void 0:Pt.default,Pt==null?void 0:Pt[yr],(_e=ht==null?void 0:ht.classNames)==null?void 0:_e[yr]),"data-sonner-toast":"","data-rich-colors":(et=ht.richColors)!=null?et:Bt,"data-styled":!(ht.jsx||ht.unstyled||yt),"data-mounted":Yt,"data-promise":!!ht.promise,"data-removed":ur,"data-visible":xr,"data-y-position":pr,"data-x-position":nr,"data-index":At,"data-front":Hr,"data-swiping":rr,"data-dismissible":Ar,"data-type":yr,"data-invert":wr,"data-swipe-out":dr,"data-expanded":!!(kt||Nt&&Yt),style:{"--index":At,"--toasts-before":At,"--z-index":jt.length-At,"--offset":`${ur?hr:Mr.current}px`,"--initial-height":Nt?"auto":`${br}px`,...er,...ht.style},onPointerDown:rn=>{Pr||!Ar||(_r.current=new Date,or(Mr.current),rn.target.setPointerCapture(rn.pointerId),rn.target.tagName!=="BUTTON"&&(fr(!0),an.current={x:rn.clientX,y:rn.clientY}))},onPointerUp:()=>{var rn,Ir,Or,sn;if(dr||!Ar)return;an.current=null;let Fr=Number(((rn=Er.current)==null?void 0:rn.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Kr=new Date().getTime()-((Ir=_r.current)==null?void 0:Ir.getTime()),fn=Math.abs(Fr)/Kr;if(Math.abs(Fr)>=oe||fn>.11){or(Mr.current),(Or=ht.onDismiss)==null||Or.call(ht,ht),Sr(),gr(!0);return}(sn=Er.current)==null||sn.style.setProperty("--swipe-amount","0px"),fr(!1)},onPointerMove:rn=>{var Ir;if(!an.current||!Ar)return;let Or=rn.clientY-an.current.y,sn=rn.clientX-an.current.x,Fr=(pr==="top"?Math.min:Math.max)(0,Or),Kr=rn.pointerType==="touch"?10:2;Math.abs(Fr)>Kr?(Ir=Er.current)==null||Ir.style.setProperty("--swipe-amount",`${Or}px`):Math.abs(sn)>Kr&&(an.current=null)}},Cr&&!ht.jsx?React.createElement("button",{"aria-label":pt,"data-disabled":Pr,"data-close-button":!0,onClick:Pr||!Ar?()=>{}:()=>{var rn;Sr(),(rn=ht.onDismiss)==null||rn.call(ht,ht)},className:zt(Pt==null?void 0:Pt.closeButton,(tt=ht==null?void 0:ht.classNames)==null?void 0:tt.closeButton)},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),React.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,ht.jsx||React.isValidElement(ht.title)?ht.jsx||ht.title:React.createElement(React.Fragment,null,yr||ht.icon||ht.promise?React.createElement("div",{"data-icon":"",className:zt(Pt==null?void 0:Pt.icon,(rt=ht==null?void 0:ht.classNames)==null?void 0:rt.icon)},ht.promise||ht.type==="loading"&&!ht.icon?ht.icon||Dr():null,ht.type!=="loading"?ht.icon||(Tt==null?void 0:Tt[yr])||Ct(yr):null):null,React.createElement("div",{"data-content":"",className:zt(Pt==null?void 0:Pt.content,(nt=ht==null?void 0:ht.classNames)==null?void 0:nt.content)},React.createElement("div",{"data-title":"",className:zt(Pt==null?void 0:Pt.title,(it=ht==null?void 0:ht.classNames)==null?void 0:it.title)},ht.title),ht.description?React.createElement("div",{"data-description":"",className:zt(lt,Tr,Pt==null?void 0:Pt.description,(st=ht==null?void 0:ht.classNames)==null?void 0:st.description)},ht.description):null),React.isValidElement(ht.cancel)?ht.cancel:ht.cancel&&U(ht.cancel)?React.createElement("button",{"data-button":!0,"data-cancel":!0,style:ht.cancelButtonStyle||tr,onClick:rn=>{var Ir,Or;U(ht.cancel)&&Ar&&((Or=(Ir=ht.cancel).onClick)==null||Or.call(Ir,rn),Sr())},className:zt(Pt==null?void 0:Pt.cancelButton,(at=ht==null?void 0:ht.classNames)==null?void 0:at.cancelButton)},ht.cancel.label):null,React.isValidElement(ht.action)?ht.action:ht.action&&U(ht.action)?React.createElement("button",{"data-button":!0,"data-action":!0,style:ht.actionButtonStyle||ar,onClick:rn=>{var Ir,Or;U(ht.action)&&(rn.defaultPrevented||((Or=(Ir=ht.action).onClick)==null||Or.call(Ir,rn),Sr()))},className:zt(Pt==null?void 0:Pt.actionButton,(ot=ht==null?void 0:ht.classNames)==null?void 0:ot.actionButton)},ht.action.label):null))};function Ht(){if(typeof window>"u"||typeof document>"u")return"ltr";let _=document.documentElement.getAttribute("dir");return _==="auto"||!_?window.getComputedStyle(document.documentElement).direction:_}var Te=_=>{let{invert:$,position:_e="bottom-right",hotkey:et=["altKey","KeyT"],expand:tt,closeButton:rt,className:nt,offset:it,theme:st="light",richColors:at,duration:ot,style:dt,visibleToasts:ht=qt,toastOptions:yt,dir:vt=Ht(),gap:xt=ee,loadingIcon:wt,icons:Et,containerAriaLabel:At="Notifications",pauseWhenPageIsHidden:jt,cn:kt=ne}=_,[Lt,Bt]=React.useState([]),Gt=React.useMemo(()=>Array.from(new Set([_e].concat(Lt.filter(Rt=>Rt.position).map(Rt=>Rt.position)))),[Lt,_e]),[er,tr]=React.useState([]),[ar,Mt]=React.useState(!1),[lt,mt]=React.useState(!1),[gt,bt]=React.useState(st!=="system"?st:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),St=React.useRef(null),Nt=et.join("+").replace(/Key/g,"").replace(/Digit/g,""),Pt=React.useRef(null),Tt=React.useRef(!1),pt=React.useCallback(Rt=>{var zt;(zt=Lt.find(Yt=>Yt.id===Rt.id))!=null&&zt.delete||v$1.dismiss(Rt.id),Bt(Yt=>Yt.filter(({id:ir})=>ir!==Rt.id))},[Lt]);return React.useEffect(()=>v$1.subscribe(Rt=>{if(Rt.dismiss){Bt(zt=>zt.map(Yt=>Yt.id===Rt.id?{...Yt,delete:!0}:Yt));return}setTimeout(()=>{ReactDOM.flushSync(()=>{Bt(zt=>{let Yt=zt.findIndex(ir=>ir.id===Rt.id);return Yt!==-1?[...zt.slice(0,Yt),{...zt[Yt],...Rt},...zt.slice(Yt+1)]:[Rt,...zt]})})})}),[]),React.useEffect(()=>{if(st!=="system"){bt(st);return}st==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?bt("dark"):bt("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:Rt})=>{bt(Rt?"dark":"light")})},[st]),React.useEffect(()=>{Lt.length<=1&&Mt(!1)},[Lt]),React.useEffect(()=>{let Rt=zt=>{var Yt,ir;et.every(ur=>zt[ur]||zt.code===ur)&&(Mt(!0),(Yt=St.current)==null||Yt.focus()),zt.code==="Escape"&&(document.activeElement===St.current||(ir=St.current)!=null&&ir.contains(document.activeElement))&&Mt(!1)};return document.addEventListener("keydown",Rt),()=>document.removeEventListener("keydown",Rt)},[et]),React.useEffect(()=>{if(St.current)return()=>{Pt.current&&(Pt.current.focus({preventScroll:!0}),Pt.current=null,Tt.current=!1)}},[St.current]),Lt.length?React.createElement("section",{"aria-label":`${At} ${Nt}`,tabIndex:-1},Gt.map((Rt,zt)=>{var Yt;let[ir,ur]=Rt.split("-");return React.createElement("ol",{key:Rt,dir:vt==="auto"?Ht():vt,tabIndex:-1,ref:St,className:nt,"data-sonner-toaster":!0,"data-theme":gt,"data-y-position":ir,"data-x-position":ur,style:{"--front-toast-height":`${((Yt=er[0])==null?void 0:Yt.height)||0}px`,"--offset":typeof it=="number"?`${it}px`:it||Qt,"--width":`${te}px`,"--gap":`${xt}px`,...dt},onBlur:cr=>{Tt.current&&!cr.currentTarget.contains(cr.relatedTarget)&&(Tt.current=!1,Pt.current&&(Pt.current.focus({preventScroll:!0}),Pt.current=null))},onFocus:cr=>{cr.target instanceof HTMLElement&&cr.target.dataset.dismissible==="false"||Tt.current||(Tt.current=!0,Pt.current=cr.relatedTarget)},onMouseEnter:()=>Mt(!0),onMouseMove:()=>Mt(!0),onMouseLeave:()=>{lt||Mt(!1)},onPointerDown:cr=>{cr.target instanceof HTMLElement&&cr.target.dataset.dismissible==="false"||mt(!0)},onPointerUp:()=>mt(!1)},Lt.filter(cr=>!cr.position&&zt===0||cr.position===Rt).map((cr,rr)=>{var fr,dr;return React.createElement(se,{key:cr.id,icons:Et,index:rr,toast:cr,defaultRichColors:at,duration:(fr=yt==null?void 0:yt.duration)!=null?fr:ot,className:yt==null?void 0:yt.className,descriptionClassName:yt==null?void 0:yt.descriptionClassName,invert:$,visibleToasts:ht,closeButton:(dr=yt==null?void 0:yt.closeButton)!=null?dr:rt,interacting:lt,position:Rt,style:yt==null?void 0:yt.style,unstyled:yt==null?void 0:yt.unstyled,classNames:yt==null?void 0:yt.classNames,cancelButtonStyle:yt==null?void 0:yt.cancelButtonStyle,actionButtonStyle:yt==null?void 0:yt.actionButtonStyle,removeToast:pt,toasts:Lt.filter(gr=>gr.position==cr.position),heights:er.filter(gr=>gr.position==cr.position),setHeights:tr,expandByDefault:tt,gap:xt,loadingIcon:wt,expanded:ar,pauseWhenPageIsHidden:jt,cn:kt})}))})):null};const Toaster=({..._})=>{const{theme:$="system"}=j();return jsxRuntimeExports.jsx(Te,{theme:$,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},..._})};var useReactId=React$1.useId||(()=>{}),count$2=0;function useId(_){const[$,_e]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{_e(et=>et??String(count$2++))},[_]),$?`radix-${$}`:""}const sides=["top","right","bottom","left"],min$8=Math.min,max$8=Math.max,round$6=Math.round,floor$4=Math.floor,createCoords=_=>({x:_,y:_}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$2(_,$,_e){return max$8(_,min$8($,_e))}function evaluate(_,$){return typeof _=="function"?_($):_}function getSide(_){return _.split("-")[0]}function getAlignment(_){return _.split("-")[1]}function getOppositeAxis(_){return _==="x"?"y":"x"}function getAxisLength(_){return _==="y"?"height":"width"}function getSideAxis(_){return["top","bottom"].includes(getSide(_))?"y":"x"}function getAlignmentAxis(_){return getOppositeAxis(getSideAxis(_))}function getAlignmentSides(_,$,_e){_e===void 0&&(_e=!1);const et=getAlignment(_),tt=getAlignmentAxis(_),rt=getAxisLength(tt);let nt=tt==="x"?et===(_e?"end":"start")?"right":"left":et==="start"?"bottom":"top";return $.reference[rt]>$.floating[rt]&&(nt=getOppositePlacement(nt)),[nt,getOppositePlacement(nt)]}function getExpandedPlacements(_){const $=getOppositePlacement(_);return[getOppositeAlignmentPlacement(_),$,getOppositeAlignmentPlacement($)]}function getOppositeAlignmentPlacement(_){return _.replace(/start|end/g,$=>oppositeAlignmentMap[$])}function getSideList(_,$,_e){const et=["left","right"],tt=["right","left"],rt=["top","bottom"],nt=["bottom","top"];switch(_){case"top":case"bottom":return _e?$?tt:et:$?et:tt;case"left":case"right":return $?rt:nt;default:return[]}}function getOppositeAxisPlacements(_,$,_e,et){const tt=getAlignment(_);let rt=getSideList(getSide(_),_e==="start",et);return tt&&(rt=rt.map(nt=>nt+"-"+tt),$&&(rt=rt.concat(rt.map(getOppositeAlignmentPlacement)))),rt}function getOppositePlacement(_){return _.replace(/left|right|bottom|top/g,$=>oppositeSideMap[$])}function expandPaddingObject(_){return{top:0,right:0,bottom:0,left:0,..._}}function getPaddingObject(_){return typeof _!="number"?expandPaddingObject(_):{top:_,right:_,bottom:_,left:_}}function rectToClientRect(_){const{x:$,y:_e,width:et,height:tt}=_;return{width:et,height:tt,top:_e,left:$,right:$+et,bottom:_e+tt,x:$,y:_e}}function computeCoordsFromPlacement(_,$,_e){let{reference:et,floating:tt}=_;const rt=getSideAxis($),nt=getAlignmentAxis($),it=getAxisLength(nt),st=getSide($),at=rt==="y",ot=et.x+et.width/2-tt.width/2,dt=et.y+et.height/2-tt.height/2,ht=et[it]/2-tt[it]/2;let yt;switch(st){case"top":yt={x:ot,y:et.y-tt.height};break;case"bottom":yt={x:ot,y:et.y+et.height};break;case"right":yt={x:et.x+et.width,y:dt};break;case"left":yt={x:et.x-tt.width,y:dt};break;default:yt={x:et.x,y:et.y}}switch(getAlignment($)){case"start":yt[nt]-=ht*(_e&&at?-1:1);break;case"end":yt[nt]+=ht*(_e&&at?-1:1);break}return yt}const computePosition$1=async(_,$,_e)=>{const{placement:et="bottom",strategy:tt="absolute",middleware:rt=[],platform:nt}=_e,it=rt.filter(Boolean),st=await(nt.isRTL==null?void 0:nt.isRTL($));let at=await nt.getElementRects({reference:_,floating:$,strategy:tt}),{x:ot,y:dt}=computeCoordsFromPlacement(at,et,st),ht=et,yt={},vt=0;for(let xt=0;xt<it.length;xt++){const{name:wt,fn:Et}=it[xt],{x:At,y:jt,data:kt,reset:Lt}=await Et({x:ot,y:dt,initialPlacement:et,placement:ht,strategy:tt,middlewareData:yt,rects:at,platform:nt,elements:{reference:_,floating:$}});ot=At??ot,dt=jt??dt,yt={...yt,[wt]:{...yt[wt],...kt}},Lt&&vt<=50&&(vt++,typeof Lt=="object"&&(Lt.placement&&(ht=Lt.placement),Lt.rects&&(at=Lt.rects===!0?await nt.getElementRects({reference:_,floating:$,strategy:tt}):Lt.rects),{x:ot,y:dt}=computeCoordsFromPlacement(at,ht,st)),xt=-1)}return{x:ot,y:dt,placement:ht,strategy:tt,middlewareData:yt}};async function detectOverflow(_,$){var _e;$===void 0&&($={});const{x:et,y:tt,platform:rt,rects:nt,elements:it,strategy:st}=_,{boundary:at="clippingAncestors",rootBoundary:ot="viewport",elementContext:dt="floating",altBoundary:ht=!1,padding:yt=0}=evaluate($,_),vt=getPaddingObject(yt),wt=it[ht?dt==="floating"?"reference":"floating":dt],Et=rectToClientRect(await rt.getClippingRect({element:(_e=await(rt.isElement==null?void 0:rt.isElement(wt)))==null||_e?wt:wt.contextElement||await(rt.getDocumentElement==null?void 0:rt.getDocumentElement(it.floating)),boundary:at,rootBoundary:ot,strategy:st})),At=dt==="floating"?{x:et,y:tt,width:nt.floating.width,height:nt.floating.height}:nt.reference,jt=await(rt.getOffsetParent==null?void 0:rt.getOffsetParent(it.floating)),kt=await(rt.isElement==null?void 0:rt.isElement(jt))?await(rt.getScale==null?void 0:rt.getScale(jt))||{x:1,y:1}:{x:1,y:1},Lt=rectToClientRect(rt.convertOffsetParentRelativeRectToViewportRelativeRect?await rt.convertOffsetParentRelativeRectToViewportRelativeRect({elements:it,rect:At,offsetParent:jt,strategy:st}):At);return{top:(Et.top-Lt.top+vt.top)/kt.y,bottom:(Lt.bottom-Et.bottom+vt.bottom)/kt.y,left:(Et.left-Lt.left+vt.left)/kt.x,right:(Lt.right-Et.right+vt.right)/kt.x}}const arrow$3=_=>({name:"arrow",options:_,async fn($){const{x:_e,y:et,placement:tt,rects:rt,platform:nt,elements:it,middlewareData:st}=$,{element:at,padding:ot=0}=evaluate(_,$)||{};if(at==null)return{};const dt=getPaddingObject(ot),ht={x:_e,y:et},yt=getAlignmentAxis(tt),vt=getAxisLength(yt),xt=await nt.getDimensions(at),wt=yt==="y",Et=wt?"top":"left",At=wt?"bottom":"right",jt=wt?"clientHeight":"clientWidth",kt=rt.reference[vt]+rt.reference[yt]-ht[yt]-rt.floating[vt],Lt=ht[yt]-rt.reference[yt],Bt=await(nt.getOffsetParent==null?void 0:nt.getOffsetParent(at));let Gt=Bt?Bt[jt]:0;(!Gt||!await(nt.isElement==null?void 0:nt.isElement(Bt)))&&(Gt=it.floating[jt]||rt.floating[vt]);const er=kt/2-Lt/2,tr=Gt/2-xt[vt]/2-1,ar=min$8(dt[Et],tr),Mt=min$8(dt[At],tr),lt=ar,mt=Gt-xt[vt]-Mt,gt=Gt/2-xt[vt]/2+er,bt=clamp$2(lt,gt,mt),St=!st.arrow&&getAlignment(tt)!=null&&gt!==bt&&rt.reference[vt]/2-(gt<lt?ar:Mt)-xt[vt]/2<0,Nt=St?gt<lt?gt-lt:gt-mt:0;return{[yt]:ht[yt]+Nt,data:{[yt]:bt,centerOffset:gt-bt-Nt,...St&&{alignmentOffset:Nt}},reset:St}}}),flip$2=function(_){return _===void 0&&(_={}),{name:"flip",options:_,async fn($){var _e,et;const{placement:tt,middlewareData:rt,rects:nt,initialPlacement:it,platform:st,elements:at}=$,{mainAxis:ot=!0,crossAxis:dt=!0,fallbackPlacements:ht,fallbackStrategy:yt="bestFit",fallbackAxisSideDirection:vt="none",flipAlignment:xt=!0,...wt}=evaluate(_,$);if((_e=rt.arrow)!=null&&_e.alignmentOffset)return{};const Et=getSide(tt),At=getSideAxis(it),jt=getSide(it)===it,kt=await(st.isRTL==null?void 0:st.isRTL(at.floating)),Lt=ht||(jt||!xt?[getOppositePlacement(it)]:getExpandedPlacements(it)),Bt=vt!=="none";!ht&&Bt&&Lt.push(...getOppositeAxisPlacements(it,xt,vt,kt));const Gt=[it,...Lt],er=await detectOverflow($,wt),tr=[];let ar=((et=rt.flip)==null?void 0:et.overflows)||[];if(ot&&tr.push(er[Et]),dt){const gt=getAlignmentSides(tt,nt,kt);tr.push(er[gt[0]],er[gt[1]])}if(ar=[...ar,{placement:tt,overflows:tr}],!tr.every(gt=>gt<=0)){var Mt,lt;const gt=(((Mt=rt.flip)==null?void 0:Mt.index)||0)+1,bt=Gt[gt];if(bt)return{data:{index:gt,overflows:ar},reset:{placement:bt}};let St=(lt=ar.filter(Nt=>Nt.overflows[0]<=0).sort((Nt,Pt)=>Nt.overflows[1]-Pt.overflows[1])[0])==null?void 0:lt.placement;if(!St)switch(yt){case"bestFit":{var mt;const Nt=(mt=ar.filter(Pt=>{if(Bt){const Tt=getSideAxis(Pt.placement);return Tt===At||Tt==="y"}return!0}).map(Pt=>[Pt.placement,Pt.overflows.filter(Tt=>Tt>0).reduce((Tt,pt)=>Tt+pt,0)]).sort((Pt,Tt)=>Pt[1]-Tt[1])[0])==null?void 0:mt[0];Nt&&(St=Nt);break}case"initialPlacement":St=it;break}if(tt!==St)return{reset:{placement:St}}}return{}}}};function getSideOffsets(_,$){return{top:_.top-$.height,right:_.right-$.width,bottom:_.bottom-$.height,left:_.left-$.width}}function isAnySideFullyClipped(_){return sides.some($=>_[$]>=0)}const hide$2=function(_){return _===void 0&&(_={}),{name:"hide",options:_,async fn($){const{rects:_e}=$,{strategy:et="referenceHidden",...tt}=evaluate(_,$);switch(et){case"referenceHidden":{const rt=await detectOverflow($,{...tt,elementContext:"reference"}),nt=getSideOffsets(rt,_e.reference);return{data:{referenceHiddenOffsets:nt,referenceHidden:isAnySideFullyClipped(nt)}}}case"escaped":{const rt=await detectOverflow($,{...tt,altBoundary:!0}),nt=getSideOffsets(rt,_e.floating);return{data:{escapedOffsets:nt,escaped:isAnySideFullyClipped(nt)}}}default:return{}}}}};async function convertValueToCoords(_,$){const{placement:_e,platform:et,elements:tt}=_,rt=await(et.isRTL==null?void 0:et.isRTL(tt.floating)),nt=getSide(_e),it=getAlignment(_e),st=getSideAxis(_e)==="y",at=["left","top"].includes(nt)?-1:1,ot=rt&&st?-1:1,dt=evaluate($,_);let{mainAxis:ht,crossAxis:yt,alignmentAxis:vt}=typeof dt=="number"?{mainAxis:dt,crossAxis:0,alignmentAxis:null}:{mainAxis:dt.mainAxis||0,crossAxis:dt.crossAxis||0,alignmentAxis:dt.alignmentAxis};return it&&typeof vt=="number"&&(yt=it==="end"?vt*-1:vt),st?{x:yt*ot,y:ht*at}:{x:ht*at,y:yt*ot}}const offset$2=function(_){return _===void 0&&(_=0),{name:"offset",options:_,async fn($){var _e,et;const{x:tt,y:rt,placement:nt,middlewareData:it}=$,st=await convertValueToCoords($,_);return nt===((_e=it.offset)==null?void 0:_e.placement)&&(et=it.arrow)!=null&&et.alignmentOffset?{}:{x:tt+st.x,y:rt+st.y,data:{...st,placement:nt}}}}},shift$2=function(_){return _===void 0&&(_={}),{name:"shift",options:_,async fn($){const{x:_e,y:et,placement:tt}=$,{mainAxis:rt=!0,crossAxis:nt=!1,limiter:it={fn:wt=>{let{x:Et,y:At}=wt;return{x:Et,y:At}}},...st}=evaluate(_,$),at={x:_e,y:et},ot=await detectOverflow($,st),dt=getSideAxis(getSide(tt)),ht=getOppositeAxis(dt);let yt=at[ht],vt=at[dt];if(rt){const wt=ht==="y"?"top":"left",Et=ht==="y"?"bottom":"right",At=yt+ot[wt],jt=yt-ot[Et];yt=clamp$2(At,yt,jt)}if(nt){const wt=dt==="y"?"top":"left",Et=dt==="y"?"bottom":"right",At=vt+ot[wt],jt=vt-ot[Et];vt=clamp$2(At,vt,jt)}const xt=it.fn({...$,[ht]:yt,[dt]:vt});return{...xt,data:{x:xt.x-_e,y:xt.y-et,enabled:{[ht]:rt,[dt]:nt}}}}}},limitShift$2=function(_){return _===void 0&&(_={}),{options:_,fn($){const{x:_e,y:et,placement:tt,rects:rt,middlewareData:nt}=$,{offset:it=0,mainAxis:st=!0,crossAxis:at=!0}=evaluate(_,$),ot={x:_e,y:et},dt=getSideAxis(tt),ht=getOppositeAxis(dt);let yt=ot[ht],vt=ot[dt];const xt=evaluate(it,$),wt=typeof xt=="number"?{mainAxis:xt,crossAxis:0}:{mainAxis:0,crossAxis:0,...xt};if(st){const jt=ht==="y"?"height":"width",kt=rt.reference[ht]-rt.floating[jt]+wt.mainAxis,Lt=rt.reference[ht]+rt.reference[jt]-wt.mainAxis;yt<kt?yt=kt:yt>Lt&&(yt=Lt)}if(at){var Et,At;const jt=ht==="y"?"width":"height",kt=["top","left"].includes(getSide(tt)),Lt=rt.reference[dt]-rt.floating[jt]+(kt&&((Et=nt.offset)==null?void 0:Et[dt])||0)+(kt?0:wt.crossAxis),Bt=rt.reference[dt]+rt.reference[jt]+(kt?0:((At=nt.offset)==null?void 0:At[dt])||0)-(kt?wt.crossAxis:0);vt<Lt?vt=Lt:vt>Bt&&(vt=Bt)}return{[ht]:yt,[dt]:vt}}}},size$2=function(_){return _===void 0&&(_={}),{name:"size",options:_,async fn($){var _e,et;const{placement:tt,rects:rt,platform:nt,elements:it}=$,{apply:st=()=>{},...at}=evaluate(_,$),ot=await detectOverflow($,at),dt=getSide(tt),ht=getAlignment(tt),yt=getSideAxis(tt)==="y",{width:vt,height:xt}=rt.floating;let wt,Et;dt==="top"||dt==="bottom"?(wt=dt,Et=ht===(await(nt.isRTL==null?void 0:nt.isRTL(it.floating))?"start":"end")?"left":"right"):(Et=dt,wt=ht==="end"?"top":"bottom");const At=xt-ot.top-ot.bottom,jt=vt-ot.left-ot.right,kt=min$8(xt-ot[wt],At),Lt=min$8(vt-ot[Et],jt),Bt=!$.middlewareData.shift;let Gt=kt,er=Lt;if((_e=$.middlewareData.shift)!=null&&_e.enabled.x&&(er=jt),(et=$.middlewareData.shift)!=null&&et.enabled.y&&(Gt=At),Bt&&!ht){const ar=max$8(ot.left,0),Mt=max$8(ot.right,0),lt=max$8(ot.top,0),mt=max$8(ot.bottom,0);yt?er=vt-2*(ar!==0||Mt!==0?ar+Mt:max$8(ot.left,ot.right)):Gt=xt-2*(lt!==0||mt!==0?lt+mt:max$8(ot.top,ot.bottom))}await st({...$,availableWidth:er,availableHeight:Gt});const tr=await nt.getDimensions(it.floating);return vt!==tr.width||xt!==tr.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(_){return isNode(_)?(_.nodeName||"").toLowerCase():"#document"}function getWindow(_){var $;return(_==null||($=_.ownerDocument)==null?void 0:$.defaultView)||window}function getDocumentElement(_){var $;return($=(isNode(_)?_.ownerDocument:_.document)||window.document)==null?void 0:$.documentElement}function isNode(_){return hasWindow()?_ instanceof Node||_ instanceof getWindow(_).Node:!1}function isElement(_){return hasWindow()?_ instanceof Element||_ instanceof getWindow(_).Element:!1}function isHTMLElement$1(_){return hasWindow()?_ instanceof HTMLElement||_ instanceof getWindow(_).HTMLElement:!1}function isShadowRoot(_){return!hasWindow()||typeof ShadowRoot>"u"?!1:_ instanceof ShadowRoot||_ instanceof getWindow(_).ShadowRoot}function isOverflowElement(_){const{overflow:$,overflowX:_e,overflowY:et,display:tt}=getComputedStyle$1(_);return/auto|scroll|overlay|hidden|clip/.test($+et+_e)&&!["inline","contents"].includes(tt)}function isTableElement(_){return["table","td","th"].includes(getNodeName(_))}function isTopLayer(_){return[":popover-open",":modal"].some($=>{try{return _.matches($)}catch{return!1}})}function isContainingBlock(_){const $=isWebKit(),_e=isElement(_)?getComputedStyle$1(_):_;return _e.transform!=="none"||_e.perspective!=="none"||(_e.containerType?_e.containerType!=="normal":!1)||!$&&(_e.backdropFilter?_e.backdropFilter!=="none":!1)||!$&&(_e.filter?_e.filter!=="none":!1)||["transform","perspective","filter"].some(et=>(_e.willChange||"").includes(et))||["paint","layout","strict","content"].some(et=>(_e.contain||"").includes(et))}function getContainingBlock(_){let $=getParentNode(_);for(;isHTMLElement$1($)&&!isLastTraversableNode($);){if(isContainingBlock($))return $;if(isTopLayer($))return null;$=getParentNode($)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(_){return["html","body","#document"].includes(getNodeName(_))}function getComputedStyle$1(_){return getWindow(_).getComputedStyle(_)}function getNodeScroll(_){return isElement(_)?{scrollLeft:_.scrollLeft,scrollTop:_.scrollTop}:{scrollLeft:_.scrollX,scrollTop:_.scrollY}}function getParentNode(_){if(getNodeName(_)==="html")return _;const $=_.assignedSlot||_.parentNode||isShadowRoot(_)&&_.host||getDocumentElement(_);return isShadowRoot($)?$.host:$}function getNearestOverflowAncestor(_){const $=getParentNode(_);return isLastTraversableNode($)?_.ownerDocument?_.ownerDocument.body:_.body:isHTMLElement$1($)&&isOverflowElement($)?$:getNearestOverflowAncestor($)}function getOverflowAncestors(_,$,_e){var et;$===void 0&&($=[]),_e===void 0&&(_e=!0);const tt=getNearestOverflowAncestor(_),rt=tt===((et=_.ownerDocument)==null?void 0:et.body),nt=getWindow(tt);if(rt){const it=getFrameElement(nt);return $.concat(nt,nt.visualViewport||[],isOverflowElement(tt)?tt:[],it&&_e?getOverflowAncestors(it):[])}return $.concat(tt,getOverflowAncestors(tt,[],_e))}function getFrameElement(_){return _.parent&&Object.getPrototypeOf(_.parent)?_.frameElement:null}function getCssDimensions(_){const $=getComputedStyle$1(_);let _e=parseFloat($.width)||0,et=parseFloat($.height)||0;const tt=isHTMLElement$1(_),rt=tt?_.offsetWidth:_e,nt=tt?_.offsetHeight:et,it=round$6(_e)!==rt||round$6(et)!==nt;return it&&(_e=rt,et=nt),{width:_e,height:et,$:it}}function unwrapElement(_){return isElement(_)?_:_.contextElement}function getScale(_){const $=unwrapElement(_);if(!isHTMLElement$1($))return createCoords(1);const _e=$.getBoundingClientRect(),{width:et,height:tt,$:rt}=getCssDimensions($);let nt=(rt?round$6(_e.width):_e.width)/et,it=(rt?round$6(_e.height):_e.height)/tt;return(!nt||!Number.isFinite(nt))&&(nt=1),(!it||!Number.isFinite(it))&&(it=1),{x:nt,y:it}}const noOffsets=createCoords(0);function getVisualOffsets(_){const $=getWindow(_);return!isWebKit()||!$.visualViewport?noOffsets:{x:$.visualViewport.offsetLeft,y:$.visualViewport.offsetTop}}function shouldAddVisualOffsets(_,$,_e){return $===void 0&&($=!1),!_e||$&&_e!==getWindow(_)?!1:$}function getBoundingClientRect(_,$,_e,et){$===void 0&&($=!1),_e===void 0&&(_e=!1);const tt=_.getBoundingClientRect(),rt=unwrapElement(_);let nt=createCoords(1);$&&(et?isElement(et)&&(nt=getScale(et)):nt=getScale(_));const it=shouldAddVisualOffsets(rt,_e,et)?getVisualOffsets(rt):createCoords(0);let st=(tt.left+it.x)/nt.x,at=(tt.top+it.y)/nt.y,ot=tt.width/nt.x,dt=tt.height/nt.y;if(rt){const ht=getWindow(rt),yt=et&&isElement(et)?getWindow(et):et;let vt=ht,xt=getFrameElement(vt);for(;xt&&et&&yt!==vt;){const wt=getScale(xt),Et=xt.getBoundingClientRect(),At=getComputedStyle$1(xt),jt=Et.left+(xt.clientLeft+parseFloat(At.paddingLeft))*wt.x,kt=Et.top+(xt.clientTop+parseFloat(At.paddingTop))*wt.y;st*=wt.x,at*=wt.y,ot*=wt.x,dt*=wt.y,st+=jt,at+=kt,vt=getWindow(xt),xt=getFrameElement(vt)}}return rectToClientRect({width:ot,height:dt,x:st,y:at})}function convertOffsetParentRelativeRectToViewportRelativeRect(_){let{elements:$,rect:_e,offsetParent:et,strategy:tt}=_;const rt=tt==="fixed",nt=getDocumentElement(et),it=$?isTopLayer($.floating):!1;if(et===nt||it&&rt)return _e;let st={scrollLeft:0,scrollTop:0},at=createCoords(1);const ot=createCoords(0),dt=isHTMLElement$1(et);if((dt||!dt&&!rt)&&((getNodeName(et)!=="body"||isOverflowElement(nt))&&(st=getNodeScroll(et)),isHTMLElement$1(et))){const ht=getBoundingClientRect(et);at=getScale(et),ot.x=ht.x+et.clientLeft,ot.y=ht.y+et.clientTop}return{width:_e.width*at.x,height:_e.height*at.y,x:_e.x*at.x-st.scrollLeft*at.x+ot.x,y:_e.y*at.y-st.scrollTop*at.y+ot.y}}function getClientRects(_){return Array.from(_.getClientRects())}function getWindowScrollBarX(_,$){const _e=getNodeScroll(_).scrollLeft;return $?$.left+_e:getBoundingClientRect(getDocumentElement(_)).left+_e}function getDocumentRect(_){const $=getDocumentElement(_),_e=getNodeScroll(_),et=_.ownerDocument.body,tt=max$8($.scrollWidth,$.clientWidth,et.scrollWidth,et.clientWidth),rt=max$8($.scrollHeight,$.clientHeight,et.scrollHeight,et.clientHeight);let nt=-_e.scrollLeft+getWindowScrollBarX(_);const it=-_e.scrollTop;return getComputedStyle$1(et).direction==="rtl"&&(nt+=max$8($.clientWidth,et.clientWidth)-tt),{width:tt,height:rt,x:nt,y:it}}function getViewportRect(_,$){const _e=getWindow(_),et=getDocumentElement(_),tt=_e.visualViewport;let rt=et.clientWidth,nt=et.clientHeight,it=0,st=0;if(tt){rt=tt.width,nt=tt.height;const at=isWebKit();(!at||at&&$==="fixed")&&(it=tt.offsetLeft,st=tt.offsetTop)}return{width:rt,height:nt,x:it,y:st}}function getInnerBoundingClientRect(_,$){const _e=getBoundingClientRect(_,!0,$==="fixed"),et=_e.top+_.clientTop,tt=_e.left+_.clientLeft,rt=isHTMLElement$1(_)?getScale(_):createCoords(1),nt=_.clientWidth*rt.x,it=_.clientHeight*rt.y,st=tt*rt.x,at=et*rt.y;return{width:nt,height:it,x:st,y:at}}function getClientRectFromClippingAncestor(_,$,_e){let et;if($==="viewport")et=getViewportRect(_,_e);else if($==="document")et=getDocumentRect(getDocumentElement(_));else if(isElement($))et=getInnerBoundingClientRect($,_e);else{const tt=getVisualOffsets(_);et={...$,x:$.x-tt.x,y:$.y-tt.y}}return rectToClientRect(et)}function hasFixedPositionAncestor(_,$){const _e=getParentNode(_);return _e===$||!isElement(_e)||isLastTraversableNode(_e)?!1:getComputedStyle$1(_e).position==="fixed"||hasFixedPositionAncestor(_e,$)}function getClippingElementAncestors(_,$){const _e=$.get(_);if(_e)return _e;let et=getOverflowAncestors(_,[],!1).filter(it=>isElement(it)&&getNodeName(it)!=="body"),tt=null;const rt=getComputedStyle$1(_).position==="fixed";let nt=rt?getParentNode(_):_;for(;isElement(nt)&&!isLastTraversableNode(nt);){const it=getComputedStyle$1(nt),st=isContainingBlock(nt);!st&&it.position==="fixed"&&(tt=null),(rt?!st&&!tt:!st&&it.position==="static"&&!!tt&&["absolute","fixed"].includes(tt.position)||isOverflowElement(nt)&&!st&&hasFixedPositionAncestor(_,nt))?et=et.filter(ot=>ot!==nt):tt=it,nt=getParentNode(nt)}return $.set(_,et),et}function getClippingRect(_){let{element:$,boundary:_e,rootBoundary:et,strategy:tt}=_;const nt=[..._e==="clippingAncestors"?isTopLayer($)?[]:getClippingElementAncestors($,this._c):[].concat(_e),et],it=nt[0],st=nt.reduce((at,ot)=>{const dt=getClientRectFromClippingAncestor($,ot,tt);return at.top=max$8(dt.top,at.top),at.right=min$8(dt.right,at.right),at.bottom=min$8(dt.bottom,at.bottom),at.left=max$8(dt.left,at.left),at},getClientRectFromClippingAncestor($,it,tt));return{width:st.right-st.left,height:st.bottom-st.top,x:st.left,y:st.top}}function getDimensions(_){const{width:$,height:_e}=getCssDimensions(_);return{width:$,height:_e}}function getRectRelativeToOffsetParent(_,$,_e){const et=isHTMLElement$1($),tt=getDocumentElement($),rt=_e==="fixed",nt=getBoundingClientRect(_,!0,rt,$);let it={scrollLeft:0,scrollTop:0};const st=createCoords(0);if(et||!et&&!rt)if((getNodeName($)!=="body"||isOverflowElement(tt))&&(it=getNodeScroll($)),et){const yt=getBoundingClientRect($,!0,rt,$);st.x=yt.x+$.clientLeft,st.y=yt.y+$.clientTop}else tt&&(st.x=getWindowScrollBarX(tt));let at=0,ot=0;if(tt&&!et&&!rt){const yt=tt.getBoundingClientRect();ot=yt.top+it.scrollTop,at=yt.left+it.scrollLeft-getWindowScrollBarX(tt,yt)}const dt=nt.left+it.scrollLeft-st.x-at,ht=nt.top+it.scrollTop-st.y-ot;return{x:dt,y:ht,width:nt.width,height:nt.height}}function isStaticPositioned(_){return getComputedStyle$1(_).position==="static"}function getTrueOffsetParent(_,$){if(!isHTMLElement$1(_)||getComputedStyle$1(_).position==="fixed")return null;if($)return $(_);let _e=_.offsetParent;return getDocumentElement(_)===_e&&(_e=_e.ownerDocument.body),_e}function getOffsetParent(_,$){const _e=getWindow(_);if(isTopLayer(_))return _e;if(!isHTMLElement$1(_)){let tt=getParentNode(_);for(;tt&&!isLastTraversableNode(tt);){if(isElement(tt)&&!isStaticPositioned(tt))return tt;tt=getParentNode(tt)}return _e}let et=getTrueOffsetParent(_,$);for(;et&&isTableElement(et)&&isStaticPositioned(et);)et=getTrueOffsetParent(et,$);return et&&isLastTraversableNode(et)&&isStaticPositioned(et)&&!isContainingBlock(et)?_e:et||getContainingBlock(_)||_e}const getElementRects=async function(_){const $=this.getOffsetParent||getOffsetParent,_e=this.getDimensions,et=await _e(_.floating);return{reference:getRectRelativeToOffsetParent(_.reference,await $(_.floating),_.strategy),floating:{x:0,y:0,width:et.width,height:et.height}}};function isRTL(_){return getComputedStyle$1(_).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(_,$){let _e=null,et;const tt=getDocumentElement(_);function rt(){var it;clearTimeout(et),(it=_e)==null||it.disconnect(),_e=null}function nt(it,st){it===void 0&&(it=!1),st===void 0&&(st=1),rt();const{left:at,top:ot,width:dt,height:ht}=_.getBoundingClientRect();if(it||$(),!dt||!ht)return;const yt=floor$4(ot),vt=floor$4(tt.clientWidth-(at+dt)),xt=floor$4(tt.clientHeight-(ot+ht)),wt=floor$4(at),At={rootMargin:-yt+"px "+-vt+"px "+-xt+"px "+-wt+"px",threshold:max$8(0,min$8(1,st))||1};let jt=!0;function kt(Lt){const Bt=Lt[0].intersectionRatio;if(Bt!==st){if(!jt)return nt();Bt?nt(!1,Bt):et=setTimeout(()=>{nt(!1,1e-7)},1e3)}jt=!1}try{_e=new IntersectionObserver(kt,{...At,root:tt.ownerDocument})}catch{_e=new IntersectionObserver(kt,At)}_e.observe(_)}return nt(!0),rt}function autoUpdate(_,$,_e,et){et===void 0&&(et={});const{ancestorScroll:tt=!0,ancestorResize:rt=!0,elementResize:nt=typeof ResizeObserver=="function",layoutShift:it=typeof IntersectionObserver=="function",animationFrame:st=!1}=et,at=unwrapElement(_),ot=tt||rt?[...at?getOverflowAncestors(at):[],...getOverflowAncestors($)]:[];ot.forEach(Et=>{tt&&Et.addEventListener("scroll",_e,{passive:!0}),rt&&Et.addEventListener("resize",_e)});const dt=at&&it?observeMove(at,_e):null;let ht=-1,yt=null;nt&&(yt=new ResizeObserver(Et=>{let[At]=Et;At&&At.target===at&&yt&&(yt.unobserve($),cancelAnimationFrame(ht),ht=requestAnimationFrame(()=>{var jt;(jt=yt)==null||jt.observe($)})),_e()}),at&&!st&&yt.observe(at),yt.observe($));let vt,xt=st?getBoundingClientRect(_):null;st&&wt();function wt(){const Et=getBoundingClientRect(_);xt&&(Et.x!==xt.x||Et.y!==xt.y||Et.width!==xt.width||Et.height!==xt.height)&&_e(),xt=Et,vt=requestAnimationFrame(wt)}return _e(),()=>{var Et;ot.forEach(At=>{tt&&At.removeEventListener("scroll",_e),rt&&At.removeEventListener("resize",_e)}),dt==null||dt(),(Et=yt)==null||Et.disconnect(),yt=null,st&&cancelAnimationFrame(vt)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(_,$,_e)=>{const et=new Map,tt={platform,..._e},rt={...tt.platform,_c:et};return computePosition$1(_,$,{...tt,platform:rt})};var index$1=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual$2(_,$){if(_===$)return!0;if(typeof _!=typeof $)return!1;if(typeof _=="function"&&_.toString()===$.toString())return!0;let _e,et,tt;if(_&&$&&typeof _=="object"){if(Array.isArray(_)){if(_e=_.length,_e!==$.length)return!1;for(et=_e;et--!==0;)if(!deepEqual$2(_[et],$[et]))return!1;return!0}if(tt=Object.keys(_),_e=tt.length,_e!==Object.keys($).length)return!1;for(et=_e;et--!==0;)if(!{}.hasOwnProperty.call($,tt[et]))return!1;for(et=_e;et--!==0;){const rt=tt[et];if(!(rt==="_owner"&&_.$$typeof)&&!deepEqual$2(_[rt],$[rt]))return!1}return!0}return _!==_&&$!==$}function getDPR(_){return typeof window>"u"?1:(_.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(_,$){const _e=getDPR(_);return Math.round($*_e)/_e}function useLatestRef(_){const $=reactExports.useRef(_);return index$1(()=>{$.current=_}),$}function useFloating(_){_===void 0&&(_={});const{placement:$="bottom",strategy:_e="absolute",middleware:et=[],platform:tt,elements:{reference:rt,floating:nt}={},transform:it=!0,whileElementsMounted:st,open:at}=_,[ot,dt]=reactExports.useState({x:0,y:0,strategy:_e,placement:$,middlewareData:{},isPositioned:!1}),[ht,yt]=reactExports.useState(et);deepEqual$2(ht,et)||yt(et);const[vt,xt]=reactExports.useState(null),[wt,Et]=reactExports.useState(null),At=reactExports.useCallback(Pt=>{Pt!==Bt.current&&(Bt.current=Pt,xt(Pt))},[]),jt=reactExports.useCallback(Pt=>{Pt!==Gt.current&&(Gt.current=Pt,Et(Pt))},[]),kt=rt||vt,Lt=nt||wt,Bt=reactExports.useRef(null),Gt=reactExports.useRef(null),er=reactExports.useRef(ot),tr=st!=null,ar=useLatestRef(st),Mt=useLatestRef(tt),lt=useLatestRef(at),mt=reactExports.useCallback(()=>{if(!Bt.current||!Gt.current)return;const Pt={placement:$,strategy:_e,middleware:ht};Mt.current&&(Pt.platform=Mt.current),computePosition(Bt.current,Gt.current,Pt).then(Tt=>{const pt={...Tt,isPositioned:lt.current!==!1};gt.current&&!deepEqual$2(er.current,pt)&&(er.current=pt,reactDomExports.flushSync(()=>{dt(pt)}))})},[ht,$,_e,Mt,lt]);index$1(()=>{at===!1&&er.current.isPositioned&&(er.current.isPositioned=!1,dt(Pt=>({...Pt,isPositioned:!1})))},[at]);const gt=reactExports.useRef(!1);index$1(()=>(gt.current=!0,()=>{gt.current=!1}),[]),index$1(()=>{if(kt&&(Bt.current=kt),Lt&&(Gt.current=Lt),kt&&Lt){if(ar.current)return ar.current(kt,Lt,mt);mt()}},[kt,Lt,mt,ar,tr]);const bt=reactExports.useMemo(()=>({reference:Bt,floating:Gt,setReference:At,setFloating:jt}),[At,jt]),St=reactExports.useMemo(()=>({reference:kt,floating:Lt}),[kt,Lt]),Nt=reactExports.useMemo(()=>{const Pt={position:_e,left:0,top:0};if(!St.floating)return Pt;const Tt=roundByDPR(St.floating,ot.x),pt=roundByDPR(St.floating,ot.y);return it?{...Pt,transform:"translate("+Tt+"px, "+pt+"px)",...getDPR(St.floating)>=1.5&&{willChange:"transform"}}:{position:_e,left:Tt,top:pt}},[_e,it,St.floating,ot.x,ot.y]);return reactExports.useMemo(()=>({...ot,update:mt,refs:bt,elements:St,floatingStyles:Nt}),[ot,mt,bt,St,Nt])}const arrow$1=_=>{function $(_e){return{}.hasOwnProperty.call(_e,"current")}return{name:"arrow",options:_,fn(_e){const{element:et,padding:tt}=typeof _=="function"?_(_e):_;return et&&$(et)?et.current!=null?arrow$2({element:et.current,padding:tt}).fn(_e):{}:et?arrow$2({element:et,padding:tt}).fn(_e):{}}}},offset=(_,$)=>({...offset$1(_),options:[_,$]}),shift=(_,$)=>({...shift$1(_),options:[_,$]}),limitShift=(_,$)=>({...limitShift$1(_),options:[_,$]}),flip=(_,$)=>({...flip$1(_),options:[_,$]}),size=(_,$)=>({...size$1(_),options:[_,$]}),hide=(_,$)=>({...hide$1(_),options:[_,$]}),arrow=(_,$)=>({...arrow$1(_),options:[_,$]});var NAME$2="Arrow",Arrow$1=reactExports.forwardRef((_,$)=>{const{children:_e,width:et=10,height:tt=5,...rt}=_;return jsxRuntimeExports.jsx(Primitive.svg,{...rt,ref:$,width:et,height:tt,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:_.asChild?_e:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$2;var Root$8=Arrow$1;function createContextScope$2(_,$=[]){let _e=[];function et(rt,nt){const it=reactExports.createContext(nt),st=_e.length;_e=[..._e,nt];function at(dt){const{scope:ht,children:yt,...vt}=dt,xt=(ht==null?void 0:ht[_][st])||it,wt=reactExports.useMemo(()=>vt,Object.values(vt));return jsxRuntimeExports.jsx(xt.Provider,{value:wt,children:yt})}function ot(dt,ht){const yt=(ht==null?void 0:ht[_][st])||it,vt=reactExports.useContext(yt);if(vt)return vt;if(nt!==void 0)return nt;throw new Error(`\`${dt}\` must be used within \`${rt}\``)}return at.displayName=rt+"Provider",[at,ot]}const tt=()=>{const rt=_e.map(nt=>reactExports.createContext(nt));return function(it){const st=(it==null?void 0:it[_])||rt;return reactExports.useMemo(()=>({[`__scope${_}`]:{...it,[_]:st}}),[it,st])}};return tt.scopeName=_,[et,composeContextScopes$2(tt,...$)]}function composeContextScopes$2(..._){const $=_[0];if(_.length===1)return $;const _e=()=>{const et=_.map(tt=>({useScope:tt(),scopeName:tt.scopeName}));return function(rt){const nt=et.reduce((it,{useScope:st,scopeName:at})=>{const dt=st(rt)[`__scope${at}`];return{...it,...dt}},{});return reactExports.useMemo(()=>({[`__scope${$.scopeName}`]:nt}),[nt])}};return _e.scopeName=$.scopeName,_e}function useSize(_){const[$,_e]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(_){_e({width:_.offsetWidth,height:_.offsetHeight});const et=new ResizeObserver(tt=>{if(!Array.isArray(tt)||!tt.length)return;const rt=tt[0];let nt,it;if("borderBoxSize"in rt){const st=rt.borderBoxSize,at=Array.isArray(st)?st[0]:st;nt=at.inlineSize,it=at.blockSize}else nt=_.offsetWidth,it=_.offsetHeight;_e({width:nt,height:it})});return et.observe(_,{box:"border-box"}),()=>et.unobserve(_)}else _e(void 0)},[_]),$}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope$2(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=_=>{const{__scopePopper:$,children:_e}=_,[et,tt]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:$,anchor:et,onAnchorChange:tt,children:_e})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME$1="PopperAnchor",PopperAnchor=reactExports.forwardRef((_,$)=>{const{__scopePopper:_e,virtualRef:et,...tt}=_,rt=usePopperContext(ANCHOR_NAME$1,_e),nt=reactExports.useRef(null),it=useComposedRefs($,nt);return reactExports.useEffect(()=>{rt.onAnchorChange((et==null?void 0:et.current)||nt.current)}),et?null:jsxRuntimeExports.jsx(Primitive.div,{...tt,ref:it})});PopperAnchor.displayName=ANCHOR_NAME$1;var CONTENT_NAME$6="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$6),PopperContent=reactExports.forwardRef((_,$)=>{var rr,fr,dr,gr,hr,or;const{__scopePopper:_e,side:et="bottom",sideOffset:tt=0,align:rt="center",alignOffset:nt=0,arrowPadding:it=0,avoidCollisions:st=!0,collisionBoundary:at=[],collisionPadding:ot=0,sticky:dt="partial",hideWhenDetached:ht=!1,updatePositionStrategy:yt="optimized",onPlaced:vt,...xt}=_,wt=usePopperContext(CONTENT_NAME$6,_e),[Et,At]=reactExports.useState(null),jt=useComposedRefs($,br=>At(br)),[kt,Lt]=reactExports.useState(null),Bt=useSize(kt),Gt=(Bt==null?void 0:Bt.width)??0,er=(Bt==null?void 0:Bt.height)??0,tr=et+(rt!=="center"?"-"+rt:""),ar=typeof ot=="number"?ot:{top:0,right:0,bottom:0,left:0,...ot},Mt=Array.isArray(at)?at:[at],lt=Mt.length>0,mt={padding:ar,boundary:Mt.filter(isNotNull),altBoundary:lt},{refs:gt,floatingStyles:bt,placement:St,isPositioned:Nt,middlewareData:Pt}=useFloating({strategy:"fixed",placement:tr,whileElementsMounted:(...br)=>autoUpdate(...br,{animationFrame:yt==="always"}),elements:{reference:wt.anchor},middleware:[offset({mainAxis:tt+er,alignmentAxis:nt}),st&&shift({mainAxis:!0,crossAxis:!1,limiter:dt==="partial"?limitShift():void 0,...mt}),st&&flip({...mt}),size({...mt,apply:({elements:br,rects:Rr,availableWidth:_r,availableHeight:Er})=>{const{width:Hr,height:xr}=Rr.reference,yr=br.floating.style;yr.setProperty("--radix-popper-available-width",`${_r}px`),yr.setProperty("--radix-popper-available-height",`${Er}px`),yr.setProperty("--radix-popper-anchor-width",`${Hr}px`),yr.setProperty("--radix-popper-anchor-height",`${xr}px`)}}),kt&&arrow({element:kt,padding:it}),transformOrigin({arrowWidth:Gt,arrowHeight:er}),ht&&hide({strategy:"referenceHidden",...mt})]}),[Tt,pt]=getSideAndAlignFromPlacement(St),Rt=useCallbackRef$1(vt);useLayoutEffect2(()=>{Nt&&(Rt==null||Rt())},[Nt,Rt]);const zt=(rr=Pt.arrow)==null?void 0:rr.x,Yt=(fr=Pt.arrow)==null?void 0:fr.y,ir=((dr=Pt.arrow)==null?void 0:dr.centerOffset)!==0,[ur,cr]=reactExports.useState();return useLayoutEffect2(()=>{Et&&cr(window.getComputedStyle(Et).zIndex)},[Et]),jsxRuntimeExports.jsx("div",{ref:gt.setFloating,"data-radix-popper-content-wrapper":"",style:{...bt,transform:Nt?bt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ur,"--radix-popper-transform-origin":[(gr=Pt.transformOrigin)==null?void 0:gr.x,(hr=Pt.transformOrigin)==null?void 0:hr.y].join(" "),...((or=Pt.hide)==null?void 0:or.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:_.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:_e,placedSide:Tt,onArrowChange:Lt,arrowX:zt,arrowY:Yt,shouldHideArrow:ir,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":Tt,"data-align":pt,...xt,ref:jt,style:{...xt.style,animation:Nt?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$6;var ARROW_NAME$4="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function($,_e){const{__scopePopper:et,...tt}=$,rt=useContentContext(ARROW_NAME$4,et),nt=OPPOSITE_SIDE[rt.placedSide];return jsxRuntimeExports.jsx("span",{ref:rt.onArrowChange,style:{position:"absolute",left:rt.arrowX,top:rt.arrowY,[nt]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[rt.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[rt.placedSide],visibility:rt.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$8,{...tt,ref:_e,style:{...tt.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$4;function isNotNull(_){return _!==null}var transformOrigin=_=>({name:"transformOrigin",options:_,fn($){var wt,Et,At;const{placement:_e,rects:et,middlewareData:tt}=$,nt=((wt=tt.arrow)==null?void 0:wt.centerOffset)!==0,it=nt?0:_.arrowWidth,st=nt?0:_.arrowHeight,[at,ot]=getSideAndAlignFromPlacement(_e),dt={start:"0%",center:"50%",end:"100%"}[ot],ht=(((Et=tt.arrow)==null?void 0:Et.x)??0)+it/2,yt=(((At=tt.arrow)==null?void 0:At.y)??0)+st/2;let vt="",xt="";return at==="bottom"?(vt=nt?dt:`${ht}px`,xt=`${-st}px`):at==="top"?(vt=nt?dt:`${ht}px`,xt=`${et.floating.height+st}px`):at==="right"?(vt=`${-st}px`,xt=nt?dt:`${yt}px`):at==="left"&&(vt=`${et.floating.width+st}px`,xt=nt?dt:`${yt}px`),{data:{x:vt,y:xt}}}});function getSideAndAlignFromPlacement(_){const[$,_e="center"]=_.split("-");return[$,_e]}var Root2$3=Popper,Anchor=PopperAnchor,Content$2=PopperContent,Arrow=PopperArrow,[createTooltipContext,createTooltipScope]=createContextScope$3("Tooltip",[createPopperScope]),usePopperScope$2=createPopperScope(),PROVIDER_NAME="TooltipProvider",DEFAULT_DELAY_DURATION=700,TOOLTIP_OPEN="tooltip.open",[TooltipProviderContextProvider,useTooltipProviderContext]=createTooltipContext(PROVIDER_NAME),TooltipProvider$1=_=>{const{__scopeTooltip:$,delayDuration:_e=DEFAULT_DELAY_DURATION,skipDelayDuration:et=300,disableHoverableContent:tt=!1,children:rt}=_,[nt,it]=reactExports.useState(!0),st=reactExports.useRef(!1),at=reactExports.useRef(0);return reactExports.useEffect(()=>{const ot=at.current;return()=>window.clearTimeout(ot)},[]),jsxRuntimeExports.jsx(TooltipProviderContextProvider,{scope:$,isOpenDelayed:nt,delayDuration:_e,onOpen:reactExports.useCallback(()=>{window.clearTimeout(at.current),it(!1)},[]),onClose:reactExports.useCallback(()=>{window.clearTimeout(at.current),at.current=window.setTimeout(()=>it(!0),et)},[et]),isPointerInTransitRef:st,onPointerInTransitChange:reactExports.useCallback(ot=>{st.current=ot},[]),disableHoverableContent:tt,children:rt})};TooltipProvider$1.displayName=PROVIDER_NAME;var TOOLTIP_NAME="Tooltip",[TooltipContextProvider,useTooltipContext]=createTooltipContext(TOOLTIP_NAME),TRIGGER_NAME$4="TooltipTrigger",TooltipTrigger=reactExports.forwardRef((_,$)=>{const{__scopeTooltip:_e,...et}=_,tt=useTooltipContext(TRIGGER_NAME$4,_e),rt=useTooltipProviderContext(TRIGGER_NAME$4,_e),nt=usePopperScope$2(_e),it=reactExports.useRef(null),st=useComposedRefs($,it,tt.onTriggerChange),at=reactExports.useRef(!1),ot=reactExports.useRef(!1),dt=reactExports.useCallback(()=>at.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",dt),[dt]),jsxRuntimeExports.jsx(Anchor,{asChild:!0,...nt,children:jsxRuntimeExports.jsx(Primitive.button,{"aria-describedby":tt.open?tt.contentId:void 0,"data-state":tt.stateAttribute,...et,ref:st,onPointerMove:composeEventHandlers(_.onPointerMove,ht=>{ht.pointerType!=="touch"&&!ot.current&&!rt.isPointerInTransitRef.current&&(tt.onTriggerEnter(),ot.current=!0)}),onPointerLeave:composeEventHandlers(_.onPointerLeave,()=>{tt.onTriggerLeave(),ot.current=!1}),onPointerDown:composeEventHandlers(_.onPointerDown,()=>{at.current=!0,document.addEventListener("pointerup",dt,{once:!0})}),onFocus:composeEventHandlers(_.onFocus,()=>{at.current||tt.onOpen()}),onBlur:composeEventHandlers(_.onBlur,tt.onClose),onClick:composeEventHandlers(_.onClick,tt.onClose)})})});TooltipTrigger.displayName=TRIGGER_NAME$4;var PORTAL_NAME$4="TooltipPortal",[PortalProvider$2,usePortalContext$2]=createTooltipContext(PORTAL_NAME$4,{forceMount:void 0}),CONTENT_NAME$5="TooltipContent",TooltipContent$1=reactExports.forwardRef((_,$)=>{const _e=usePortalContext$2(CONTENT_NAME$5,_.__scopeTooltip),{forceMount:et=_e.forceMount,side:tt="top",...rt}=_,nt=useTooltipContext(CONTENT_NAME$5,_.__scopeTooltip);return jsxRuntimeExports.jsx(Presence,{present:et||nt.open,children:nt.disableHoverableContent?jsxRuntimeExports.jsx(TooltipContentImpl,{side:tt,...rt,ref:$}):jsxRuntimeExports.jsx(TooltipContentHoverable,{side:tt,...rt,ref:$})})}),TooltipContentHoverable=reactExports.forwardRef((_,$)=>{const _e=useTooltipContext(CONTENT_NAME$5,_.__scopeTooltip),et=useTooltipProviderContext(CONTENT_NAME$5,_.__scopeTooltip),tt=reactExports.useRef(null),rt=useComposedRefs($,tt),[nt,it]=reactExports.useState(null),{trigger:st,onClose:at}=_e,ot=tt.current,{onPointerInTransitChange:dt}=et,ht=reactExports.useCallback(()=>{it(null),dt(!1)},[dt]),yt=reactExports.useCallback((vt,xt)=>{const wt=vt.currentTarget,Et={x:vt.clientX,y:vt.clientY},At=getExitSideFromRect(Et,wt.getBoundingClientRect()),jt=getPaddedExitPoints(Et,At),kt=getPointsFromRect(xt.getBoundingClientRect()),Lt=getHull([...jt,...kt]);it(Lt),dt(!0)},[dt]);return reactExports.useEffect(()=>()=>ht(),[ht]),reactExports.useEffect(()=>{if(st&&ot){const vt=wt=>yt(wt,ot),xt=wt=>yt(wt,st);return st.addEventListener("pointerleave",vt),ot.addEventListener("pointerleave",xt),()=>{st.removeEventListener("pointerleave",vt),ot.removeEventListener("pointerleave",xt)}}},[st,ot,yt,ht]),reactExports.useEffect(()=>{if(nt){const vt=xt=>{const wt=xt.target,Et={x:xt.clientX,y:xt.clientY},At=(st==null?void 0:st.contains(wt))||(ot==null?void 0:ot.contains(wt)),jt=!isPointInPolygon$1(Et,nt);At?ht():jt&&(ht(),at())};return document.addEventListener("pointermove",vt),()=>document.removeEventListener("pointermove",vt)}},[st,ot,nt,at,ht]),jsxRuntimeExports.jsx(TooltipContentImpl,{..._,ref:rt})}),[VisuallyHiddenContentContextProvider,useVisuallyHiddenContentContext]=createTooltipContext(TOOLTIP_NAME,{isInside:!1}),TooltipContentImpl=reactExports.forwardRef((_,$)=>{const{__scopeTooltip:_e,children:et,"aria-label":tt,onEscapeKeyDown:rt,onPointerDownOutside:nt,...it}=_,st=useTooltipContext(CONTENT_NAME$5,_e),at=usePopperScope$2(_e),{onClose:ot}=st;return reactExports.useEffect(()=>(document.addEventListener(TOOLTIP_OPEN,ot),()=>document.removeEventListener(TOOLTIP_OPEN,ot)),[ot]),reactExports.useEffect(()=>{if(st.trigger){const dt=ht=>{const yt=ht.target;yt!=null&&yt.contains(st.trigger)&&ot()};return window.addEventListener("scroll",dt,{capture:!0}),()=>window.removeEventListener("scroll",dt,{capture:!0})}},[st.trigger,ot]),jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:rt,onPointerDownOutside:nt,onFocusOutside:dt=>dt.preventDefault(),onDismiss:ot,children:jsxRuntimeExports.jsxs(Content$2,{"data-state":st.stateAttribute,...at,...it,ref:$,style:{...it.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[jsxRuntimeExports.jsx(Slottable,{children:et}),jsxRuntimeExports.jsx(VisuallyHiddenContentContextProvider,{scope:_e,isInside:!0,children:jsxRuntimeExports.jsx(Root$9,{id:st.contentId,role:"tooltip",children:tt||et})})]})})});TooltipContent$1.displayName=CONTENT_NAME$5;var ARROW_NAME$3="TooltipArrow",TooltipArrow=reactExports.forwardRef((_,$)=>{const{__scopeTooltip:_e,...et}=_,tt=usePopperScope$2(_e);return useVisuallyHiddenContentContext(ARROW_NAME$3,_e).isInside?null:jsxRuntimeExports.jsx(Arrow,{...tt,...et,ref:$})});TooltipArrow.displayName=ARROW_NAME$3;function getExitSideFromRect(_,$){const _e=Math.abs($.top-_.y),et=Math.abs($.bottom-_.y),tt=Math.abs($.right-_.x),rt=Math.abs($.left-_.x);switch(Math.min(_e,et,tt,rt)){case rt:return"left";case tt:return"right";case _e:return"top";case et:return"bottom";default:throw new Error("unreachable")}}function getPaddedExitPoints(_,$,_e=5){const et=[];switch($){case"top":et.push({x:_.x-_e,y:_.y+_e},{x:_.x+_e,y:_.y+_e});break;case"bottom":et.push({x:_.x-_e,y:_.y-_e},{x:_.x+_e,y:_.y-_e});break;case"left":et.push({x:_.x+_e,y:_.y-_e},{x:_.x+_e,y:_.y+_e});break;case"right":et.push({x:_.x-_e,y:_.y-_e},{x:_.x-_e,y:_.y+_e});break}return et}function getPointsFromRect(_){const{top:$,right:_e,bottom:et,left:tt}=_;return[{x:tt,y:$},{x:_e,y:$},{x:_e,y:et},{x:tt,y:et}]}function isPointInPolygon$1(_,$){const{x:_e,y:et}=_;let tt=!1;for(let rt=0,nt=$.length-1;rt<$.length;nt=rt++){const it=$[rt].x,st=$[rt].y,at=$[nt].x,ot=$[nt].y;st>et!=ot>et&&_e<(at-it)*(et-st)/(ot-st)+it&&(tt=!tt)}return tt}function getHull(_){const $=_.slice();return $.sort((_e,et)=>_e.x<et.x?-1:_e.x>et.x?1:_e.y<et.y?-1:_e.y>et.y?1:0),getHullPresorted($)}function getHullPresorted(_){if(_.length<=1)return _.slice();const $=[];for(let et=0;et<_.length;et++){const tt=_[et];for(;$.length>=2;){const rt=$[$.length-1],nt=$[$.length-2];if((rt.x-nt.x)*(tt.y-nt.y)>=(rt.y-nt.y)*(tt.x-nt.x))$.pop();else break}$.push(tt)}$.pop();const _e=[];for(let et=_.length-1;et>=0;et--){const tt=_[et];for(;_e.length>=2;){const rt=_e[_e.length-1],nt=_e[_e.length-2];if((rt.x-nt.x)*(tt.y-nt.y)>=(rt.y-nt.y)*(tt.x-nt.x))_e.pop();else break}_e.push(tt)}return _e.pop(),$.length===1&&_e.length===1&&$[0].x===_e[0].x&&$[0].y===_e[0].y?$:$.concat(_e)}var Provider=TooltipProvider$1,Content2$3=TooltipContent$1;const TooltipProvider=Provider,TooltipContent=reactExports.forwardRef(({className:_,sideOffset:$=4,..._e},et)=>jsxRuntimeExports.jsx(Content2$3,{ref:et,sideOffset:$,className:cn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",_),..._e}));TooltipContent.displayName=Content2$3.displayName;var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(_){return this.listeners.add(_),this.onSubscribe(),()=>{this.listeners.delete(_),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},isServer=typeof window>"u"||"Deno"in globalThis;function noop$4(){}function functionalUpdate(_,$){return typeof _=="function"?_($):_}function isValidTimeout(_){return typeof _=="number"&&_>=0&&_!==1/0}function timeUntilStale(_,$){return Math.max(_+($||0)-Date.now(),0)}function resolveStaleTime(_,$){return typeof _=="function"?_($):_}function resolveEnabled(_,$){return typeof _=="function"?_($):_}function matchQuery(_,$){const{type:_e="all",exact:et,fetchStatus:tt,predicate:rt,queryKey:nt,stale:it}=_;if(nt){if(et){if($.queryHash!==hashQueryKeyByOptions(nt,$.options))return!1}else if(!partialMatchKey($.queryKey,nt))return!1}if(_e!=="all"){const st=$.isActive();if(_e==="active"&&!st||_e==="inactive"&&st)return!1}return!(typeof it=="boolean"&&$.isStale()!==it||tt&&tt!==$.state.fetchStatus||rt&&!rt($))}function matchMutation(_,$){const{exact:_e,status:et,predicate:tt,mutationKey:rt}=_;if(rt){if(!$.options.mutationKey)return!1;if(_e){if(hashKey($.options.mutationKey)!==hashKey(rt))return!1}else if(!partialMatchKey($.options.mutationKey,rt))return!1}return!(et&&$.state.status!==et||tt&&!tt($))}function hashQueryKeyByOptions(_,$){return(($==null?void 0:$.queryKeyHashFn)||hashKey)(_)}function hashKey(_){return JSON.stringify(_,($,_e)=>isPlainObject$3(_e)?Object.keys(_e).sort().reduce((et,tt)=>(et[tt]=_e[tt],et),{}):_e)}function partialMatchKey(_,$){return _===$?!0:typeof _!=typeof $?!1:_&&$&&typeof _=="object"&&typeof $=="object"?!Object.keys($).some(_e=>!partialMatchKey(_[_e],$[_e])):!1}function replaceEqualDeep(_,$){if(_===$)return _;const _e=isPlainArray(_)&&isPlainArray($);if(_e||isPlainObject$3(_)&&isPlainObject$3($)){const et=_e?_:Object.keys(_),tt=et.length,rt=_e?$:Object.keys($),nt=rt.length,it=_e?[]:{};let st=0;for(let at=0;at<nt;at++){const ot=_e?at:rt[at];(!_e&&et.includes(ot)||_e)&&_[ot]===void 0&&$[ot]===void 0?(it[ot]=void 0,st++):(it[ot]=replaceEqualDeep(_[ot],$[ot]),it[ot]===_[ot]&&_[ot]!==void 0&&st++)}return tt===nt&&st===tt?_:it}return $}function isPlainArray(_){return Array.isArray(_)&&_.length===Object.keys(_).length}function isPlainObject$3(_){if(!hasObjectPrototype(_))return!1;const $=_.constructor;if($===void 0)return!0;const _e=$.prototype;return!(!hasObjectPrototype(_e)||!_e.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(_)!==Object.prototype)}function hasObjectPrototype(_){return Object.prototype.toString.call(_)==="[object Object]"}function sleep(_){return new Promise($=>{setTimeout($,_)})}function replaceData(_,$,_e){return typeof _e.structuralSharing=="function"?_e.structuralSharing(_,$):_e.structuralSharing!==!1?replaceEqualDeep(_,$):$}function addToEnd(_,$,_e=0){const et=[..._,$];return _e&&et.length>_e?et.slice(1):et}function addToStart(_,$,_e=0){const et=[$,..._];return _e&&et.length>_e?et.slice(0,-1):et}var skipToken=Symbol();function ensureQueryFn(_,$){return!_.queryFn&&($!=null&&$.initialPromise)?()=>$.initialPromise:!_.queryFn||_.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${_.queryHash}'`)):_.queryFn}var ns,Xn,os,Ss,FocusManager=(Ss=class extends Subscribable{constructor(){super();xn(this,ns);xn(this,Xn);xn(this,os);dn(this,os,$=>{if(!isServer&&window.addEventListener){const _e=()=>$();return window.addEventListener("visibilitychange",_e,!1),()=>{window.removeEventListener("visibilitychange",_e)}}})}onSubscribe(){tn(this,Xn)||this.setEventListener(tn(this,os))}onUnsubscribe(){var $;this.hasListeners()||(($=tn(this,Xn))==null||$.call(this),dn(this,Xn,void 0))}setEventListener($){var _e;dn(this,os,$),(_e=tn(this,Xn))==null||_e.call(this),dn(this,Xn,$(et=>{typeof et=="boolean"?this.setFocused(et):this.onFocus()}))}setFocused($){tn(this,ns)!==$&&(dn(this,ns,$),this.onFocus())}onFocus(){const $=this.isFocused();this.listeners.forEach(_e=>{_e($)})}isFocused(){var $;return typeof tn(this,ns)=="boolean"?tn(this,ns):(($=globalThis.document)==null?void 0:$.visibilityState)!=="hidden"}},ns=new WeakMap,Xn=new WeakMap,os=new WeakMap,Ss),focusManager=new FocusManager,ls,Yn,us,Es,OnlineManager=(Es=class extends Subscribable{constructor(){super();xn(this,ls,!0);xn(this,Yn);xn(this,us);dn(this,us,$=>{if(!isServer&&window.addEventListener){const _e=()=>$(!0),et=()=>$(!1);return window.addEventListener("online",_e,!1),window.addEventListener("offline",et,!1),()=>{window.removeEventListener("online",_e),window.removeEventListener("offline",et)}}})}onSubscribe(){tn(this,Yn)||this.setEventListener(tn(this,us))}onUnsubscribe(){var $;this.hasListeners()||(($=tn(this,Yn))==null||$.call(this),dn(this,Yn,void 0))}setEventListener($){var _e;dn(this,us,$),(_e=tn(this,Yn))==null||_e.call(this),dn(this,Yn,$(this.setOnline.bind(this)))}setOnline($){tn(this,ls)!==$&&(dn(this,ls,$),this.listeners.forEach(et=>{et($)}))}isOnline(){return tn(this,ls)}},ls=new WeakMap,Yn=new WeakMap,us=new WeakMap,Es),onlineManager=new OnlineManager;function pendingThenable(){let _,$;const _e=new Promise((tt,rt)=>{_=tt,$=rt});_e.status="pending",_e.catch(()=>{});function et(tt){Object.assign(_e,tt),delete _e.resolve,delete _e.reject}return _e.resolve=tt=>{et({status:"fulfilled",value:tt}),_(tt)},_e.reject=tt=>{et({status:"rejected",reason:tt}),$(tt)},_e}function defaultRetryDelay(_){return Math.min(1e3*2**_,3e4)}function canFetch(_){return(_??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(_){super("CancelledError"),this.revert=_==null?void 0:_.revert,this.silent=_==null?void 0:_.silent}};function isCancelledError(_){return _ instanceof CancelledError}function createRetryer(_){let $=!1,_e=0,et=!1,tt;const rt=pendingThenable(),nt=xt=>{var wt;et||(ht(new CancelledError(xt)),(wt=_.abort)==null||wt.call(_))},it=()=>{$=!0},st=()=>{$=!1},at=()=>focusManager.isFocused()&&(_.networkMode==="always"||onlineManager.isOnline())&&_.canRun(),ot=()=>canFetch(_.networkMode)&&_.canRun(),dt=xt=>{var wt;et||(et=!0,(wt=_.onSuccess)==null||wt.call(_,xt),tt==null||tt(),rt.resolve(xt))},ht=xt=>{var wt;et||(et=!0,(wt=_.onError)==null||wt.call(_,xt),tt==null||tt(),rt.reject(xt))},yt=()=>new Promise(xt=>{var wt;tt=Et=>{(et||at())&&xt(Et)},(wt=_.onPause)==null||wt.call(_)}).then(()=>{var xt;tt=void 0,et||(xt=_.onContinue)==null||xt.call(_)}),vt=()=>{if(et)return;let xt;const wt=_e===0?_.initialPromise:void 0;try{xt=wt??_.fn()}catch(Et){xt=Promise.reject(Et)}Promise.resolve(xt).then(dt).catch(Et=>{var Bt;if(et)return;const At=_.retry??(isServer?0:3),jt=_.retryDelay??defaultRetryDelay,kt=typeof jt=="function"?jt(_e,Et):jt,Lt=At===!0||typeof At=="number"&&_e<At||typeof At=="function"&&At(_e,Et);if($||!Lt){ht(Et);return}_e++,(Bt=_.onFail)==null||Bt.call(_,_e,Et),sleep(kt).then(()=>at()?void 0:yt()).then(()=>{$?ht(Et):vt()})})};return{promise:rt,cancel:nt,continue:()=>(tt==null||tt(),rt),cancelRetry:it,continueRetry:st,canStart:ot,start:()=>(ot()?vt():yt().then(vt),rt)}}function createNotifyManager(){let _=[],$=0,_e=it=>{it()},et=it=>{it()},tt=it=>setTimeout(it,0);const rt=it=>{$?_.push(it):tt(()=>{_e(it)})},nt=()=>{const it=_;_=[],it.length&&tt(()=>{et(()=>{it.forEach(st=>{_e(st)})})})};return{batch:it=>{let st;$++;try{st=it()}finally{$--,$||nt()}return st},batchCalls:it=>(...st)=>{rt(()=>{it(...st)})},schedule:rt,setNotifyFunction:it=>{_e=it},setBatchNotifyFunction:it=>{et=it},setScheduler:it=>{tt=it}}}var notifyManager=createNotifyManager(),is,_s,Removable=(_s=class{constructor(){xn(this,is)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&dn(this,is,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(_){this.gcTime=Math.max(this.gcTime||0,_??(isServer?1/0:5*60*1e3))}clearGcTimeout(){tn(this,is)&&(clearTimeout(tn(this,is)),dn(this,is,void 0))}},is=new WeakMap,_s),cs,fs,Un,Bn,gs,ss,qn,Kn,Ts,Query=(Ts=class extends Removable{constructor($){super();xn(this,qn);xn(this,cs);xn(this,fs);xn(this,Un);xn(this,Bn);xn(this,gs);xn(this,ss);dn(this,ss,!1),dn(this,gs,$.defaultOptions),this.setOptions($.options),this.observers=[],dn(this,Un,$.cache),this.queryKey=$.queryKey,this.queryHash=$.queryHash,dn(this,cs,getDefaultState$1(this.options)),this.state=$.state??tn(this,cs),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var $;return($=tn(this,Bn))==null?void 0:$.promise}setOptions($){this.options={...tn(this,gs),...$},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&tn(this,Un).remove(this)}setData($,_e){const et=replaceData(this.state.data,$,this.options);return Fn(this,qn,Kn).call(this,{data:et,type:"success",dataUpdatedAt:_e==null?void 0:_e.updatedAt,manual:_e==null?void 0:_e.manual}),et}setState($,_e){Fn(this,qn,Kn).call(this,{type:"setState",state:$,setStateOptions:_e})}cancel($){var et,tt;const _e=(et=tn(this,Bn))==null?void 0:et.promise;return(tt=tn(this,Bn))==null||tt.cancel($),_e?_e.then(noop$4).catch(noop$4):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(tn(this,cs))}isActive(){return this.observers.some($=>resolveEnabled($.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some($=>$.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime($=0){return this.state.isInvalidated||this.state.data===void 0||!timeUntilStale(this.state.dataUpdatedAt,$)}onFocus(){var _e;const $=this.observers.find(et=>et.shouldFetchOnWindowFocus());$==null||$.refetch({cancelRefetch:!1}),(_e=tn(this,Bn))==null||_e.continue()}onOnline(){var _e;const $=this.observers.find(et=>et.shouldFetchOnReconnect());$==null||$.refetch({cancelRefetch:!1}),(_e=tn(this,Bn))==null||_e.continue()}addObserver($){this.observers.includes($)||(this.observers.push($),this.clearGcTimeout(),tn(this,Un).notify({type:"observerAdded",query:this,observer:$}))}removeObserver($){this.observers.includes($)&&(this.observers=this.observers.filter(_e=>_e!==$),this.observers.length||(tn(this,Bn)&&(tn(this,ss)?tn(this,Bn).cancel({revert:!0}):tn(this,Bn).cancelRetry()),this.scheduleGc()),tn(this,Un).notify({type:"observerRemoved",query:this,observer:$}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Fn(this,qn,Kn).call(this,{type:"invalidate"})}fetch($,_e){var st,at,ot;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(_e!=null&&_e.cancelRefetch))this.cancel({silent:!0});else if(tn(this,Bn))return tn(this,Bn).continueRetry(),tn(this,Bn).promise}if($&&this.setOptions($),!this.options.queryFn){const dt=this.observers.find(ht=>ht.options.queryFn);dt&&this.setOptions(dt.options)}const et=new AbortController,tt=dt=>{Object.defineProperty(dt,"signal",{enumerable:!0,get:()=>(dn(this,ss,!0),et.signal)})},rt=()=>{const dt=ensureQueryFn(this.options,_e),ht={queryKey:this.queryKey,meta:this.meta};return tt(ht),dn(this,ss,!1),this.options.persister?this.options.persister(dt,ht,this):dt(ht)},nt={fetchOptions:_e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:rt};tt(nt),(st=this.options.behavior)==null||st.onFetch(nt,this),dn(this,fs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((at=nt.fetchOptions)==null?void 0:at.meta))&&Fn(this,qn,Kn).call(this,{type:"fetch",meta:(ot=nt.fetchOptions)==null?void 0:ot.meta});const it=dt=>{var ht,yt,vt,xt;isCancelledError(dt)&&dt.silent||Fn(this,qn,Kn).call(this,{type:"error",error:dt}),isCancelledError(dt)||((yt=(ht=tn(this,Un).config).onError)==null||yt.call(ht,dt,this),(xt=(vt=tn(this,Un).config).onSettled)==null||xt.call(vt,this.state.data,dt,this)),this.scheduleGc()};return dn(this,Bn,createRetryer({initialPromise:_e==null?void 0:_e.initialPromise,fn:nt.fetchFn,abort:et.abort.bind(et),onSuccess:dt=>{var ht,yt,vt,xt;if(dt===void 0){it(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(dt)}catch(wt){it(wt);return}(yt=(ht=tn(this,Un).config).onSuccess)==null||yt.call(ht,dt,this),(xt=(vt=tn(this,Un).config).onSettled)==null||xt.call(vt,dt,this.state.error,this),this.scheduleGc()},onError:it,onFail:(dt,ht)=>{Fn(this,qn,Kn).call(this,{type:"failed",failureCount:dt,error:ht})},onPause:()=>{Fn(this,qn,Kn).call(this,{type:"pause"})},onContinue:()=>{Fn(this,qn,Kn).call(this,{type:"continue"})},retry:nt.options.retry,retryDelay:nt.options.retryDelay,networkMode:nt.options.networkMode,canRun:()=>!0})),tn(this,Bn).start()}},cs=new WeakMap,fs=new WeakMap,Un=new WeakMap,Bn=new WeakMap,gs=new WeakMap,ss=new WeakMap,qn=new WeakSet,Kn=function($){const _e=et=>{switch($.type){case"failed":return{...et,fetchFailureCount:$.failureCount,fetchFailureReason:$.error};case"pause":return{...et,fetchStatus:"paused"};case"continue":return{...et,fetchStatus:"fetching"};case"fetch":return{...et,...fetchState(et.data,this.options),fetchMeta:$.meta??null};case"success":return{...et,data:$.data,dataUpdateCount:et.dataUpdateCount+1,dataUpdatedAt:$.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!$.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const tt=$.error;return isCancelledError(tt)&&tt.revert&&tn(this,fs)?{...tn(this,fs),fetchStatus:"idle"}:{...et,error:tt,errorUpdateCount:et.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:et.fetchFailureCount+1,fetchFailureReason:tt,fetchStatus:"idle",status:"error"};case"invalidate":return{...et,isInvalidated:!0};case"setState":return{...et,...$.state}}};this.state=_e(this.state),notifyManager.batch(()=>{this.observers.forEach(et=>{et.onQueryUpdate()}),tn(this,Un).notify({query:this,type:"updated",action:$})})},Ts);function fetchState(_,$){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch($.networkMode)?"fetching":"paused",..._===void 0&&{error:null,status:"pending"}}}function getDefaultState$1(_){const $=typeof _.initialData=="function"?_.initialData():_.initialData,_e=$!==void 0,et=_e?typeof _.initialDataUpdatedAt=="function"?_.initialDataUpdatedAt():_.initialDataUpdatedAt:0;return{data:$,dataUpdateCount:0,dataUpdatedAt:_e?et??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:_e?"success":"pending",fetchStatus:"idle"}}var Gn,Cs,QueryCache=(Cs=class extends Subscribable{constructor($={}){super();xn(this,Gn);this.config=$,dn(this,Gn,new Map)}build($,_e,et){const tt=_e.queryKey,rt=_e.queryHash??hashQueryKeyByOptions(tt,_e);let nt=this.get(rt);return nt||(nt=new Query({cache:this,queryKey:tt,queryHash:rt,options:$.defaultQueryOptions(_e),state:et,defaultOptions:$.getQueryDefaults(tt)}),this.add(nt)),nt}add($){tn(this,Gn).has($.queryHash)||(tn(this,Gn).set($.queryHash,$),this.notify({type:"added",query:$}))}remove($){const _e=tn(this,Gn).get($.queryHash);_e&&($.destroy(),_e===$&&tn(this,Gn).delete($.queryHash),this.notify({type:"removed",query:$}))}clear(){notifyManager.batch(()=>{this.getAll().forEach($=>{this.remove($)})})}get($){return tn(this,Gn).get($)}getAll(){return[...tn(this,Gn).values()]}find($){const _e={exact:!0,...$};return this.getAll().find(et=>matchQuery(_e,et))}findAll($={}){const _e=this.getAll();return Object.keys($).length>0?_e.filter(et=>matchQuery($,et)):_e}notify($){notifyManager.batch(()=>{this.listeners.forEach(_e=>{_e($)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach($=>{$.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach($=>{$.onOnline()})})}},Gn=new WeakMap,Cs),Wn,zn,as,Hn,Zn,As,Mutation=(As=class extends Removable{constructor($){super();xn(this,Hn);xn(this,Wn);xn(this,zn);xn(this,as);this.mutationId=$.mutationId,dn(this,zn,$.mutationCache),dn(this,Wn,[]),this.state=$.state||getDefaultState(),this.setOptions($.options),this.scheduleGc()}setOptions($){this.options=$,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver($){tn(this,Wn).includes($)||(tn(this,Wn).push($),this.clearGcTimeout(),tn(this,zn).notify({type:"observerAdded",mutation:this,observer:$}))}removeObserver($){dn(this,Wn,tn(this,Wn).filter(_e=>_e!==$)),this.scheduleGc(),tn(this,zn).notify({type:"observerRemoved",mutation:this,observer:$})}optionalRemove(){tn(this,Wn).length||(this.state.status==="pending"?this.scheduleGc():tn(this,zn).remove(this))}continue(){var $;return(($=tn(this,as))==null?void 0:$.continue())??this.execute(this.state.variables)}async execute($){var tt,rt,nt,it,st,at,ot,dt,ht,yt,vt,xt,wt,Et,At,jt,kt,Lt,Bt,Gt;dn(this,as,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn($):Promise.reject(new Error("No mutationFn found")),onFail:(er,tr)=>{Fn(this,Hn,Zn).call(this,{type:"failed",failureCount:er,error:tr})},onPause:()=>{Fn(this,Hn,Zn).call(this,{type:"pause"})},onContinue:()=>{Fn(this,Hn,Zn).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>tn(this,zn).canRun(this)}));const _e=this.state.status==="pending",et=!tn(this,as).canStart();try{if(!_e){Fn(this,Hn,Zn).call(this,{type:"pending",variables:$,isPaused:et}),await((rt=(tt=tn(this,zn).config).onMutate)==null?void 0:rt.call(tt,$,this));const tr=await((it=(nt=this.options).onMutate)==null?void 0:it.call(nt,$));tr!==this.state.context&&Fn(this,Hn,Zn).call(this,{type:"pending",context:tr,variables:$,isPaused:et})}const er=await tn(this,as).start();return await((at=(st=tn(this,zn).config).onSuccess)==null?void 0:at.call(st,er,$,this.state.context,this)),await((dt=(ot=this.options).onSuccess)==null?void 0:dt.call(ot,er,$,this.state.context)),await((yt=(ht=tn(this,zn).config).onSettled)==null?void 0:yt.call(ht,er,null,this.state.variables,this.state.context,this)),await((xt=(vt=this.options).onSettled)==null?void 0:xt.call(vt,er,null,$,this.state.context)),Fn(this,Hn,Zn).call(this,{type:"success",data:er}),er}catch(er){try{throw await((Et=(wt=tn(this,zn).config).onError)==null?void 0:Et.call(wt,er,$,this.state.context,this)),await((jt=(At=this.options).onError)==null?void 0:jt.call(At,er,$,this.state.context)),await((Lt=(kt=tn(this,zn).config).onSettled)==null?void 0:Lt.call(kt,void 0,er,this.state.variables,this.state.context,this)),await((Gt=(Bt=this.options).onSettled)==null?void 0:Gt.call(Bt,void 0,er,$,this.state.context)),er}finally{Fn(this,Hn,Zn).call(this,{type:"error",error:er})}}finally{tn(this,zn).runNext(this)}}},Wn=new WeakMap,zn=new WeakMap,as=new WeakMap,Hn=new WeakSet,Zn=function($){const _e=et=>{switch($.type){case"failed":return{...et,failureCount:$.failureCount,failureReason:$.error};case"pause":return{...et,isPaused:!0};case"continue":return{...et,isPaused:!1};case"pending":return{...et,context:$.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:$.isPaused,status:"pending",variables:$.variables,submittedAt:Date.now()};case"success":return{...et,data:$.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...et,data:void 0,error:$.error,failureCount:et.failureCount+1,failureReason:$.error,isPaused:!1,status:"error"}}};this.state=_e(this.state),notifyManager.batch(()=>{tn(this,Wn).forEach(et=>{et.onMutationUpdate($)}),tn(this,zn).notify({mutation:this,type:"updated",action:$})})},As);function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Vn,ys,Rs,MutationCache=(Rs=class extends Subscribable{constructor($={}){super();xn(this,Vn);xn(this,ys);this.config=$,dn(this,Vn,new Map),dn(this,ys,Date.now())}build($,_e,et){const tt=new Mutation({mutationCache:this,mutationId:++vs(this,ys)._,options:$.defaultMutationOptions(_e),state:et});return this.add(tt),tt}add($){const _e=scopeFor($),et=tn(this,Vn).get(_e)??[];et.push($),tn(this,Vn).set(_e,et),this.notify({type:"added",mutation:$})}remove($){var et;const _e=scopeFor($);if(tn(this,Vn).has(_e)){const tt=(et=tn(this,Vn).get(_e))==null?void 0:et.filter(rt=>rt!==$);tt&&(tt.length===0?tn(this,Vn).delete(_e):tn(this,Vn).set(_e,tt))}this.notify({type:"removed",mutation:$})}canRun($){var et;const _e=(et=tn(this,Vn).get(scopeFor($)))==null?void 0:et.find(tt=>tt.state.status==="pending");return!_e||_e===$}runNext($){var et;const _e=(et=tn(this,Vn).get(scopeFor($)))==null?void 0:et.find(tt=>tt!==$&&tt.state.isPaused);return(_e==null?void 0:_e.continue())??Promise.resolve()}clear(){notifyManager.batch(()=>{this.getAll().forEach($=>{this.remove($)})})}getAll(){return[...tn(this,Vn).values()].flat()}find($){const _e={exact:!0,...$};return this.getAll().find(et=>matchMutation(_e,et))}findAll($={}){return this.getAll().filter(_e=>matchMutation($,_e))}notify($){notifyManager.batch(()=>{this.listeners.forEach(_e=>{_e($)})})}resumePausedMutations(){const $=this.getAll().filter(_e=>_e.state.isPaused);return notifyManager.batch(()=>Promise.all($.map(_e=>_e.continue().catch(noop$4))))}},Vn=new WeakMap,ys=new WeakMap,Rs);function scopeFor(_){var $;return(($=_.options.scope)==null?void 0:$.id)??String(_.mutationId)}function infiniteQueryBehavior(_){return{onFetch:($,_e)=>{var ot,dt,ht,yt,vt;const et=$.options,tt=(ht=(dt=(ot=$.fetchOptions)==null?void 0:ot.meta)==null?void 0:dt.fetchMore)==null?void 0:ht.direction,rt=((yt=$.state.data)==null?void 0:yt.pages)||[],nt=((vt=$.state.data)==null?void 0:vt.pageParams)||[];let it={pages:[],pageParams:[]},st=0;const at=async()=>{let xt=!1;const wt=jt=>{Object.defineProperty(jt,"signal",{enumerable:!0,get:()=>($.signal.aborted?xt=!0:$.signal.addEventListener("abort",()=>{xt=!0}),$.signal)})},Et=ensureQueryFn($.options,$.fetchOptions),At=async(jt,kt,Lt)=>{if(xt)return Promise.reject();if(kt==null&&jt.pages.length)return Promise.resolve(jt);const Bt={queryKey:$.queryKey,pageParam:kt,direction:Lt?"backward":"forward",meta:$.options.meta};wt(Bt);const Gt=await Et(Bt),{maxPages:er}=$.options,tr=Lt?addToStart:addToEnd;return{pages:tr(jt.pages,Gt,er),pageParams:tr(jt.pageParams,kt,er)}};if(tt&&rt.length){const jt=tt==="backward",kt=jt?getPreviousPageParam:getNextPageParam,Lt={pages:rt,pageParams:nt},Bt=kt(et,Lt);it=await At(Lt,Bt,jt)}else{const jt=_??rt.length;do{const kt=st===0?nt[0]??et.initialPageParam:getNextPageParam(et,it);if(st>0&&kt==null)break;it=await At(it,kt),st++}while(st<jt)}return it};$.options.persister?$.fetchFn=()=>{var xt,wt;return(wt=(xt=$.options).persister)==null?void 0:wt.call(xt,at,{queryKey:$.queryKey,meta:$.options.meta,signal:$.signal},_e)}:$.fetchFn=at}}}function getNextPageParam(_,{pages:$,pageParams:_e}){const et=$.length-1;return $.length>0?_.getNextPageParam($[et],$,_e[et],_e):void 0}function getPreviousPageParam(_,{pages:$,pageParams:_e}){var et;return $.length>0?(et=_.getPreviousPageParam)==null?void 0:et.call(_,$[0],$,_e[0],_e):void 0}var Ln,Qn,Jn,ds,hs,_i,ps,ms,Ns,QueryClient=(Ns=class{constructor(_={}){xn(this,Ln);xn(this,Qn);xn(this,Jn);xn(this,ds);xn(this,hs);xn(this,_i);xn(this,ps);xn(this,ms);dn(this,Ln,_.queryCache||new QueryCache),dn(this,Qn,_.mutationCache||new MutationCache),dn(this,Jn,_.defaultOptions||{}),dn(this,ds,new Map),dn(this,hs,new Map),dn(this,_i,0)}mount(){vs(this,_i)._++,tn(this,_i)===1&&(dn(this,ps,focusManager.subscribe(async _=>{_&&(await this.resumePausedMutations(),tn(this,Ln).onFocus())})),dn(this,ms,onlineManager.subscribe(async _=>{_&&(await this.resumePausedMutations(),tn(this,Ln).onOnline())})))}unmount(){var _,$;vs(this,_i)._--,tn(this,_i)===0&&((_=tn(this,ps))==null||_.call(this),dn(this,ps,void 0),($=tn(this,ms))==null||$.call(this),dn(this,ms,void 0))}isFetching(_){return tn(this,Ln).findAll({..._,fetchStatus:"fetching"}).length}isMutating(_){return tn(this,Qn).findAll({..._,status:"pending"}).length}getQueryData(_){var _e;const $=this.defaultQueryOptions({queryKey:_});return(_e=tn(this,Ln).get($.queryHash))==null?void 0:_e.state.data}ensureQueryData(_){const $=this.getQueryData(_.queryKey);if($===void 0)return this.fetchQuery(_);{const _e=this.defaultQueryOptions(_),et=tn(this,Ln).build(this,_e);return _.revalidateIfStale&&et.isStaleByTime(resolveStaleTime(_e.staleTime,et))&&this.prefetchQuery(_e),Promise.resolve($)}}getQueriesData(_){return tn(this,Ln).findAll(_).map(({queryKey:$,state:_e})=>{const et=_e.data;return[$,et]})}setQueryData(_,$,_e){const et=this.defaultQueryOptions({queryKey:_}),tt=tn(this,Ln).get(et.queryHash),rt=tt==null?void 0:tt.state.data,nt=functionalUpdate($,rt);if(nt!==void 0)return tn(this,Ln).build(this,et).setData(nt,{..._e,manual:!0})}setQueriesData(_,$,_e){return notifyManager.batch(()=>tn(this,Ln).findAll(_).map(({queryKey:et})=>[et,this.setQueryData(et,$,_e)]))}getQueryState(_){var _e;const $=this.defaultQueryOptions({queryKey:_});return(_e=tn(this,Ln).get($.queryHash))==null?void 0:_e.state}removeQueries(_){const $=tn(this,Ln);notifyManager.batch(()=>{$.findAll(_).forEach(_e=>{$.remove(_e)})})}resetQueries(_,$){const _e=tn(this,Ln),et={type:"active",..._};return notifyManager.batch(()=>(_e.findAll(_).forEach(tt=>{tt.reset()}),this.refetchQueries(et,$)))}cancelQueries(_={},$={}){const _e={revert:!0,...$},et=notifyManager.batch(()=>tn(this,Ln).findAll(_).map(tt=>tt.cancel(_e)));return Promise.all(et).then(noop$4).catch(noop$4)}invalidateQueries(_={},$={}){return notifyManager.batch(()=>{if(tn(this,Ln).findAll(_).forEach(et=>{et.invalidate()}),_.refetchType==="none")return Promise.resolve();const _e={..._,type:_.refetchType??_.type??"active"};return this.refetchQueries(_e,$)})}refetchQueries(_={},$){const _e={...$,cancelRefetch:($==null?void 0:$.cancelRefetch)??!0},et=notifyManager.batch(()=>tn(this,Ln).findAll(_).filter(tt=>!tt.isDisabled()).map(tt=>{let rt=tt.fetch(void 0,_e);return _e.throwOnError||(rt=rt.catch(noop$4)),tt.state.fetchStatus==="paused"?Promise.resolve():rt}));return Promise.all(et).then(noop$4)}fetchQuery(_){const $=this.defaultQueryOptions(_);$.retry===void 0&&($.retry=!1);const _e=tn(this,Ln).build(this,$);return _e.isStaleByTime(resolveStaleTime($.staleTime,_e))?_e.fetch($):Promise.resolve(_e.state.data)}prefetchQuery(_){return this.fetchQuery(_).then(noop$4).catch(noop$4)}fetchInfiniteQuery(_){return _.behavior=infiniteQueryBehavior(_.pages),this.fetchQuery(_)}prefetchInfiniteQuery(_){return this.fetchInfiniteQuery(_).then(noop$4).catch(noop$4)}ensureInfiniteQueryData(_){return _.behavior=infiniteQueryBehavior(_.pages),this.ensureQueryData(_)}resumePausedMutations(){return onlineManager.isOnline()?tn(this,Qn).resumePausedMutations():Promise.resolve()}getQueryCache(){return tn(this,Ln)}getMutationCache(){return tn(this,Qn)}getDefaultOptions(){return tn(this,Jn)}setDefaultOptions(_){dn(this,Jn,_)}setQueryDefaults(_,$){tn(this,ds).set(hashKey(_),{queryKey:_,defaultOptions:$})}getQueryDefaults(_){const $=[...tn(this,ds).values()];let _e={};return $.forEach(et=>{partialMatchKey(_,et.queryKey)&&(_e={..._e,...et.defaultOptions})}),_e}setMutationDefaults(_,$){tn(this,hs).set(hashKey(_),{mutationKey:_,defaultOptions:$})}getMutationDefaults(_){const $=[...tn(this,hs).values()];let _e={};return $.forEach(et=>{partialMatchKey(_,et.mutationKey)&&(_e={..._e,...et.defaultOptions})}),_e}defaultQueryOptions(_){if(_._defaulted)return _;const $={...tn(this,Jn).queries,...this.getQueryDefaults(_.queryKey),..._,_defaulted:!0};return $.queryHash||($.queryHash=hashQueryKeyByOptions($.queryKey,$)),$.refetchOnReconnect===void 0&&($.refetchOnReconnect=$.networkMode!=="always"),$.throwOnError===void 0&&($.throwOnError=!!$.suspense),!$.networkMode&&$.persister&&($.networkMode="offlineFirst"),$.enabled!==!0&&$.queryFn===skipToken&&($.enabled=!1),$}defaultMutationOptions(_){return _!=null&&_._defaulted?_:{...tn(this,Jn).mutations,...(_==null?void 0:_.mutationKey)&&this.getMutationDefaults(_.mutationKey),..._,_defaulted:!0}}clear(){tn(this,Ln).clear(),tn(this,Qn).clear()}},Ln=new WeakMap,Qn=new WeakMap,Jn=new WeakMap,ds=new WeakMap,hs=new WeakMap,_i=new WeakMap,ps=new WeakMap,ms=new WeakMap,Ns),QueryClientContext=reactExports.createContext(void 0),QueryClientProvider=({client:_,children:$})=>(reactExports.useEffect(()=>(_.mount(),()=>{_.unmount()}),[_]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:_,children:$}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$t(){return _extends$t=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$t.apply(this,arguments)}var Action;(function(_){_.Pop="POP",_.Push="PUSH",_.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(_){_===void 0&&(_={});function $(et,tt){let{pathname:rt,search:nt,hash:it}=et.location;return createLocation("",{pathname:rt,search:nt,hash:it},tt.state&&tt.state.usr||null,tt.state&&tt.state.key||"default")}function _e(et,tt){return typeof tt=="string"?tt:createPath(tt)}return getUrlBasedHistory($,_e,null,_)}function invariant$1(_,$){if(_===!1||_===null||typeof _>"u")throw new Error($)}function warning(_,$){if(!_){typeof console<"u"&&console.warn($);try{throw new Error($)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(_,$){return{usr:_.state,key:_.key,idx:$}}function createLocation(_,$,_e,et){return _e===void 0&&(_e=null),_extends$t({pathname:typeof _=="string"?_:_.pathname,search:"",hash:""},typeof $=="string"?parsePath($):$,{state:_e,key:$&&$.key||et||createKey()})}function createPath(_){let{pathname:$="/",search:_e="",hash:et=""}=_;return _e&&_e!=="?"&&($+=_e.charAt(0)==="?"?_e:"?"+_e),et&&et!=="#"&&($+=et.charAt(0)==="#"?et:"#"+et),$}function parsePath(_){let $={};if(_){let _e=_.indexOf("#");_e>=0&&($.hash=_.substr(_e),_=_.substr(0,_e));let et=_.indexOf("?");et>=0&&($.search=_.substr(et),_=_.substr(0,et)),_&&($.pathname=_)}return $}function getUrlBasedHistory(_,$,_e,et){et===void 0&&(et={});let{window:tt=document.defaultView,v5Compat:rt=!1}=et,nt=tt.history,it=Action.Pop,st=null,at=ot();at==null&&(at=0,nt.replaceState(_extends$t({},nt.state,{idx:at}),""));function ot(){return(nt.state||{idx:null}).idx}function dt(){it=Action.Pop;let wt=ot(),Et=wt==null?null:wt-at;at=wt,st&&st({action:it,location:xt.location,delta:Et})}function ht(wt,Et){it=Action.Push;let At=createLocation(xt.location,wt,Et);at=ot()+1;let jt=getHistoryState(At,at),kt=xt.createHref(At);try{nt.pushState(jt,"",kt)}catch(Lt){if(Lt instanceof DOMException&&Lt.name==="DataCloneError")throw Lt;tt.location.assign(kt)}rt&&st&&st({action:it,location:xt.location,delta:1})}function yt(wt,Et){it=Action.Replace;let At=createLocation(xt.location,wt,Et);at=ot();let jt=getHistoryState(At,at),kt=xt.createHref(At);nt.replaceState(jt,"",kt),rt&&st&&st({action:it,location:xt.location,delta:0})}function vt(wt){let Et=tt.location.origin!=="null"?tt.location.origin:tt.location.href,At=typeof wt=="string"?wt:createPath(wt);return At=At.replace(/ $/,"%20"),invariant$1(Et,"No window.location.(origin|href) available to create URL for href: "+At),new URL(At,Et)}let xt={get action(){return it},get location(){return _(tt,nt)},listen(wt){if(st)throw new Error("A history only accepts one active listener");return tt.addEventListener(PopStateEventType,dt),st=wt,()=>{tt.removeEventListener(PopStateEventType,dt),st=null}},createHref(wt){return $(tt,wt)},createURL:vt,encodeLocation(wt){let Et=vt(wt);return{pathname:Et.pathname,search:Et.search,hash:Et.hash}},push:ht,replace:yt,go(wt){return nt.go(wt)}};return xt}var ResultType;(function(_){_.data="data",_.deferred="deferred",_.redirect="redirect",_.error="error"})(ResultType||(ResultType={}));function matchRoutes(_,$,_e){return _e===void 0&&(_e="/"),matchRoutesImpl(_,$,_e,!1)}function matchRoutesImpl(_,$,_e,et){let tt=typeof $=="string"?parsePath($):$,rt=stripBasename(tt.pathname||"/",_e);if(rt==null)return null;let nt=flattenRoutes(_);rankRouteBranches(nt);let it=null;for(let st=0;it==null&&st<nt.length;++st){let at=decodePath(rt);it=matchRouteBranch(nt[st],at,et)}return it}function flattenRoutes(_,$,_e,et){$===void 0&&($=[]),_e===void 0&&(_e=[]),et===void 0&&(et="");let tt=(rt,nt,it)=>{let st={relativePath:it===void 0?rt.path||"":it,caseSensitive:rt.caseSensitive===!0,childrenIndex:nt,route:rt};st.relativePath.startsWith("/")&&(invariant$1(st.relativePath.startsWith(et),'Absolute route path "'+st.relativePath+'" nested under path '+('"'+et+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),st.relativePath=st.relativePath.slice(et.length));let at=joinPaths([et,st.relativePath]),ot=_e.concat(st);rt.children&&rt.children.length>0&&(invariant$1(rt.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+at+'".')),flattenRoutes(rt.children,$,ot,at)),!(rt.path==null&&!rt.index)&&$.push({path:at,score:computeScore(at,rt.index),routesMeta:ot})};return _.forEach((rt,nt)=>{var it;if(rt.path===""||!((it=rt.path)!=null&&it.includes("?")))tt(rt,nt);else for(let st of explodeOptionalSegments(rt.path))tt(rt,nt,st)}),$}function explodeOptionalSegments(_){let $=_.split("/");if($.length===0)return[];let[_e,...et]=$,tt=_e.endsWith("?"),rt=_e.replace(/\?$/,"");if(et.length===0)return tt?[rt,""]:[rt];let nt=explodeOptionalSegments(et.join("/")),it=[];return it.push(...nt.map(st=>st===""?rt:[rt,st].join("/"))),tt&&it.push(...nt),it.map(st=>_.startsWith("/")&&st===""?"/":st)}function rankRouteBranches(_){_.sort(($,_e)=>$.score!==_e.score?_e.score-$.score:compareIndexes($.routesMeta.map(et=>et.childrenIndex),_e.routesMeta.map(et=>et.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=_=>_==="*";function computeScore(_,$){let _e=_.split("/"),et=_e.length;return _e.some(isSplat)&&(et+=splatPenalty),$&&(et+=indexRouteValue),_e.filter(tt=>!isSplat(tt)).reduce((tt,rt)=>tt+(paramRe.test(rt)?dynamicSegmentValue:rt===""?emptySegmentValue:staticSegmentValue),et)}function compareIndexes(_,$){return _.length===$.length&&_.slice(0,-1).every((et,tt)=>et===$[tt])?_[_.length-1]-$[$.length-1]:0}function matchRouteBranch(_,$,_e){let{routesMeta:et}=_,tt={},rt="/",nt=[];for(let it=0;it<et.length;++it){let st=et[it],at=it===et.length-1,ot=rt==="/"?$:$.slice(rt.length)||"/",dt=matchPath({path:st.relativePath,caseSensitive:st.caseSensitive,end:at},ot),ht=st.route;if(!dt&&at&&_e&&!et[et.length-1].route.index&&(dt=matchPath({path:st.relativePath,caseSensitive:st.caseSensitive,end:!1},ot)),!dt)return null;Object.assign(tt,dt.params),nt.push({params:tt,pathname:joinPaths([rt,dt.pathname]),pathnameBase:normalizePathname(joinPaths([rt,dt.pathnameBase])),route:ht}),dt.pathnameBase!=="/"&&(rt=joinPaths([rt,dt.pathnameBase]))}return nt}function matchPath(_,$){typeof _=="string"&&(_={path:_,caseSensitive:!1,end:!0});let[_e,et]=compilePath(_.path,_.caseSensitive,_.end),tt=$.match(_e);if(!tt)return null;let rt=tt[0],nt=rt.replace(/(.)\/+$/,"$1"),it=tt.slice(1);return{params:et.reduce((at,ot,dt)=>{let{paramName:ht,isOptional:yt}=ot;if(ht==="*"){let xt=it[dt]||"";nt=rt.slice(0,rt.length-xt.length).replace(/(.)\/+$/,"$1")}const vt=it[dt];return yt&&!vt?at[ht]=void 0:at[ht]=(vt||"").replace(/%2F/g,"/"),at},{}),pathname:rt,pathnameBase:nt,pattern:_}}function compilePath(_,$,_e){$===void 0&&($=!1),_e===void 0&&(_e=!0),warning(_==="*"||!_.endsWith("*")||_.endsWith("/*"),'Route path "'+_+'" will be treated as if it were '+('"'+_.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+_.replace(/\*$/,"/*")+'".'));let et=[],tt="^"+_.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(nt,it,st)=>(et.push({paramName:it,isOptional:st!=null}),st?"/?([^\\/]+)?":"/([^\\/]+)"));return _.endsWith("*")?(et.push({paramName:"*"}),tt+=_==="*"||_==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):_e?tt+="\\/*$":_!==""&&_!=="/"&&(tt+="(?:(?=\\/|$))"),[new RegExp(tt,$?void 0:"i"),et]}function decodePath(_){try{return _.split("/").map($=>decodeURIComponent($).replace(/\//g,"%2F")).join("/")}catch($){return warning(!1,'The URL path "'+_+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+$+").")),_}}function stripBasename(_,$){if($==="/")return _;if(!_.toLowerCase().startsWith($.toLowerCase()))return null;let _e=$.endsWith("/")?$.length-1:$.length,et=_.charAt(_e);return et&&et!=="/"?null:_.slice(_e)||"/"}function resolvePath(_,$){$===void 0&&($="/");let{pathname:_e,search:et="",hash:tt=""}=typeof _=="string"?parsePath(_):_;return{pathname:_e?_e.startsWith("/")?_e:resolvePathname(_e,$):$,search:normalizeSearch(et),hash:normalizeHash(tt)}}function resolvePathname(_,$){let _e=$.replace(/\/+$/,"").split("/");return _.split("/").forEach(tt=>{tt===".."?_e.length>1&&_e.pop():tt!=="."&&_e.push(tt)}),_e.length>1?_e.join("/"):"/"}function getInvalidPathError(_,$,_e,et){return"Cannot include a '"+_+"' character in a manually specified "+("`to."+$+"` field ["+JSON.stringify(et)+"].  Please separate it out to the ")+("`to."+_e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(_){return _.filter(($,_e)=>_e===0||$.route.path&&$.route.path.length>0)}function getResolveToMatches(_,$){let _e=getPathContributingMatches(_);return $?_e.map((et,tt)=>tt===_e.length-1?et.pathname:et.pathnameBase):_e.map(et=>et.pathnameBase)}function resolveTo(_,$,_e,et){et===void 0&&(et=!1);let tt;typeof _=="string"?tt=parsePath(_):(tt=_extends$t({},_),invariant$1(!tt.pathname||!tt.pathname.includes("?"),getInvalidPathError("?","pathname","search",tt)),invariant$1(!tt.pathname||!tt.pathname.includes("#"),getInvalidPathError("#","pathname","hash",tt)),invariant$1(!tt.search||!tt.search.includes("#"),getInvalidPathError("#","search","hash",tt)));let rt=_===""||tt.pathname==="",nt=rt?"/":tt.pathname,it;if(nt==null)it=_e;else{let dt=$.length-1;if(!et&&nt.startsWith("..")){let ht=nt.split("/");for(;ht[0]==="..";)ht.shift(),dt-=1;tt.pathname=ht.join("/")}it=dt>=0?$[dt]:"/"}let st=resolvePath(tt,it),at=nt&&nt!=="/"&&nt.endsWith("/"),ot=(rt||nt===".")&&_e.endsWith("/");return!st.pathname.endsWith("/")&&(at||ot)&&(st.pathname+="/"),st}const joinPaths=_=>_.join("/").replace(/\/\/+/g,"/"),normalizePathname=_=>_.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=_=>!_||_==="?"?"":_.startsWith("?")?_:"?"+_,normalizeHash=_=>!_||_==="#"?"":_.startsWith("#")?_:"#"+_;function isRouteErrorResponse(_){return _!=null&&typeof _.status=="number"&&typeof _.statusText=="string"&&typeof _.internal=="boolean"&&"data"in _}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$s(){return _extends$s=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$s.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(_,$){let{relative:_e}=$===void 0?{}:$;useInRouterContext()||invariant$1(!1);let{basename:et,navigator:tt}=reactExports.useContext(NavigationContext),{hash:rt,pathname:nt,search:it}=useResolvedPath(_,{relative:_e}),st=nt;return et!=="/"&&(st=nt==="/"?et:joinPaths([et,nt])),tt.createHref({pathname:st,search:it,hash:rt})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$1(_){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(_)}function useNavigate(){let{isDataRoute:_}=reactExports.useContext(RouteContext);return _?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$1(!1);let _=reactExports.useContext(DataRouterContext),{basename:$,future:_e,navigator:et}=reactExports.useContext(NavigationContext),{matches:tt}=reactExports.useContext(RouteContext),{pathname:rt}=useLocation(),nt=JSON.stringify(getResolveToMatches(tt,_e.v7_relativeSplatPath)),it=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{it.current=!0}),reactExports.useCallback(function(at,ot){if(ot===void 0&&(ot={}),!it.current)return;if(typeof at=="number"){et.go(at);return}let dt=resolveTo(at,JSON.parse(nt),rt,ot.relative==="path");_==null&&$!=="/"&&(dt.pathname=dt.pathname==="/"?$:joinPaths([$,dt.pathname])),(ot.replace?et.replace:et.push)(dt,ot.state,ot)},[$,et,nt,rt,_])}const OutletContext=reactExports.createContext(null);function useOutlet(_){let $=reactExports.useContext(RouteContext).outlet;return $&&reactExports.createElement(OutletContext.Provider,{value:_},$)}function useResolvedPath(_,$){let{relative:_e}=$===void 0?{}:$,{future:et}=reactExports.useContext(NavigationContext),{matches:tt}=reactExports.useContext(RouteContext),{pathname:rt}=useLocation(),nt=JSON.stringify(getResolveToMatches(tt,et.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(_,JSON.parse(nt),rt,_e==="path"),[_,nt,rt,_e])}function useRoutes(_,$){return useRoutesImpl(_,$)}function useRoutesImpl(_,$,_e,et){useInRouterContext()||invariant$1(!1);let{navigator:tt}=reactExports.useContext(NavigationContext),{matches:rt}=reactExports.useContext(RouteContext),nt=rt[rt.length-1],it=nt?nt.params:{};nt&&nt.pathname;let st=nt?nt.pathnameBase:"/";nt&&nt.route;let at=useLocation(),ot;if($){var dt;let wt=typeof $=="string"?parsePath($):$;st==="/"||(dt=wt.pathname)!=null&&dt.startsWith(st)||invariant$1(!1),ot=wt}else ot=at;let ht=ot.pathname||"/",yt=ht;if(st!=="/"){let wt=st.replace(/^\//,"").split("/");yt="/"+ht.replace(/^\//,"").split("/").slice(wt.length).join("/")}let vt=matchRoutes(_,{pathname:yt}),xt=_renderMatches(vt&&vt.map(wt=>Object.assign({},wt,{params:Object.assign({},it,wt.params),pathname:joinPaths([st,tt.encodeLocation?tt.encodeLocation(wt.pathname).pathname:wt.pathname]),pathnameBase:wt.pathnameBase==="/"?st:joinPaths([st,tt.encodeLocation?tt.encodeLocation(wt.pathnameBase).pathname:wt.pathnameBase])})),rt,_e,et);return $&&xt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$s({pathname:"/",search:"",hash:"",state:null,key:"default"},ot),navigationType:Action.Pop}},xt):xt}function DefaultErrorComponent(){let _=useRouteError(),$=isRouteErrorResponse(_)?_.status+" "+_.statusText:_ instanceof Error?_.message:JSON.stringify(_),_e=_ instanceof Error?_.stack:null,tt={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},$),_e?reactExports.createElement("pre",{style:tt},_e):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor($){super($),this.state={location:$.location,revalidation:$.revalidation,error:$.error}}static getDerivedStateFromError($){return{error:$}}static getDerivedStateFromProps($,_e){return _e.location!==$.location||_e.revalidation!=="idle"&&$.revalidation==="idle"?{error:$.error,location:$.location,revalidation:$.revalidation}:{error:$.error!==void 0?$.error:_e.error,location:_e.location,revalidation:$.revalidation||_e.revalidation}}componentDidCatch($,_e){console.error("React Router caught the following error during render",$,_e)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(_){let{routeContext:$,match:_e,children:et}=_,tt=reactExports.useContext(DataRouterContext);return tt&&tt.static&&tt.staticContext&&(_e.route.errorElement||_e.route.ErrorBoundary)&&(tt.staticContext._deepestRenderedBoundaryId=_e.route.id),reactExports.createElement(RouteContext.Provider,{value:$},et)}function _renderMatches(_,$,_e,et){var tt;if($===void 0&&($=[]),_e===void 0&&(_e=null),et===void 0&&(et=null),_==null){var rt;if(!_e)return null;if(_e.errors)_=_e.matches;else if((rt=et)!=null&&rt.v7_partialHydration&&$.length===0&&!_e.initialized&&_e.matches.length>0)_=_e.matches;else return null}let nt=_,it=(tt=_e)==null?void 0:tt.errors;if(it!=null){let ot=nt.findIndex(dt=>dt.route.id&&(it==null?void 0:it[dt.route.id])!==void 0);ot>=0||invariant$1(!1),nt=nt.slice(0,Math.min(nt.length,ot+1))}let st=!1,at=-1;if(_e&&et&&et.v7_partialHydration)for(let ot=0;ot<nt.length;ot++){let dt=nt[ot];if((dt.route.HydrateFallback||dt.route.hydrateFallbackElement)&&(at=ot),dt.route.id){let{loaderData:ht,errors:yt}=_e,vt=dt.route.loader&&ht[dt.route.id]===void 0&&(!yt||yt[dt.route.id]===void 0);if(dt.route.lazy||vt){st=!0,at>=0?nt=nt.slice(0,at+1):nt=[nt[0]];break}}}return nt.reduceRight((ot,dt,ht)=>{let yt,vt=!1,xt=null,wt=null;_e&&(yt=it&&dt.route.id?it[dt.route.id]:void 0,xt=dt.route.errorElement||defaultErrorElement,st&&(at<0&&ht===0?(vt=!0,wt=null):at===ht&&(vt=!0,wt=dt.route.hydrateFallbackElement||null)));let Et=$.concat(nt.slice(0,ht+1)),At=()=>{let jt;return yt?jt=xt:vt?jt=wt:dt.route.Component?jt=reactExports.createElement(dt.route.Component,null):dt.route.element?jt=dt.route.element:jt=ot,reactExports.createElement(RenderedRoute,{match:dt,routeContext:{outlet:ot,matches:Et,isDataRoute:_e!=null},children:jt})};return _e&&(dt.route.ErrorBoundary||dt.route.errorElement||ht===0)?reactExports.createElement(RenderErrorBoundary,{location:_e.location,revalidation:_e.revalidation,component:xt,error:yt,children:At(),routeContext:{outlet:null,matches:Et,isDataRoute:!0}}):At()},null)}var DataRouterHook$1=function(_){return _.UseBlocker="useBlocker",_.UseRevalidator="useRevalidator",_.UseNavigateStable="useNavigate",_}(DataRouterHook$1||{}),DataRouterStateHook$1=function(_){return _.UseBlocker="useBlocker",_.UseLoaderData="useLoaderData",_.UseActionData="useActionData",_.UseRouteError="useRouteError",_.UseNavigation="useNavigation",_.UseRouteLoaderData="useRouteLoaderData",_.UseMatches="useMatches",_.UseRevalidator="useRevalidator",_.UseNavigateStable="useNavigate",_.UseRouteId="useRouteId",_}(DataRouterStateHook$1||{});function useDataRouterContext(_){let $=reactExports.useContext(DataRouterContext);return $||invariant$1(!1),$}function useDataRouterState(_){let $=reactExports.useContext(DataRouterStateContext);return $||invariant$1(!1),$}function useRouteContext(_){let $=reactExports.useContext(RouteContext);return $||invariant$1(!1),$}function useCurrentRouteId(_){let $=useRouteContext(),_e=$.matches[$.matches.length-1];return _e.route.id||invariant$1(!1),_e.route.id}function useRouteError(){var _;let $=reactExports.useContext(RouteErrorContext),_e=useDataRouterState(DataRouterStateHook$1.UseRouteError),et=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return $!==void 0?$:(_=_e.errors)==null?void 0:_[et]}function useNavigateStable(){let{router:_}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),$=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),_e=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{_e.current=!0}),reactExports.useCallback(function(tt,rt){rt===void 0&&(rt={}),_e.current&&(typeof tt=="number"?_.navigate(tt):_.navigate(tt,_extends$s({fromRouteId:$},rt)))},[_,$])}function Navigate(_){let{to:$,replace:_e,state:et,relative:tt}=_;useInRouterContext()||invariant$1(!1);let{future:rt,static:nt}=reactExports.useContext(NavigationContext),{matches:it}=reactExports.useContext(RouteContext),{pathname:st}=useLocation(),at=useNavigate(),ot=resolveTo($,getResolveToMatches(it,rt.v7_relativeSplatPath),st,tt==="path"),dt=JSON.stringify(ot);return reactExports.useEffect(()=>at(JSON.parse(dt),{replace:_e,state:et,relative:tt}),[at,dt,tt,_e,et]),null}function Outlet(_){return useOutlet(_.context)}function Route(_){invariant$1(!1)}function Router(_){let{basename:$="/",children:_e=null,location:et,navigationType:tt=Action.Pop,navigator:rt,static:nt=!1,future:it}=_;useInRouterContext()&&invariant$1(!1);let st=$.replace(/^\/*/,"/"),at=reactExports.useMemo(()=>({basename:st,navigator:rt,static:nt,future:_extends$s({v7_relativeSplatPath:!1},it)}),[st,it,rt,nt]);typeof et=="string"&&(et=parsePath(et));let{pathname:ot="/",search:dt="",hash:ht="",state:yt=null,key:vt="default"}=et,xt=reactExports.useMemo(()=>{let wt=stripBasename(ot,st);return wt==null?null:{location:{pathname:wt,search:dt,hash:ht,state:yt,key:vt},navigationType:tt}},[st,ot,dt,ht,yt,vt,tt]);return xt==null?null:reactExports.createElement(NavigationContext.Provider,{value:at},reactExports.createElement(LocationContext.Provider,{children:_e,value:xt}))}function Routes(_){let{children:$,location:_e}=_;return useRoutes(createRoutesFromChildren($),_e)}new Promise(()=>{});function createRoutesFromChildren(_,$){$===void 0&&($=[]);let _e=[];return reactExports.Children.forEach(_,(et,tt)=>{if(!reactExports.isValidElement(et))return;let rt=[...$,tt];if(et.type===reactExports.Fragment){_e.push.apply(_e,createRoutesFromChildren(et.props.children,rt));return}et.type!==Route&&invariant$1(!1),!et.props.index||!et.props.children||invariant$1(!1);let nt={id:et.props.id||rt.join("-"),caseSensitive:et.props.caseSensitive,element:et.props.element,Component:et.props.Component,index:et.props.index,path:et.props.path,loader:et.props.loader,action:et.props.action,errorElement:et.props.errorElement,ErrorBoundary:et.props.ErrorBoundary,hasErrorBoundary:et.props.ErrorBoundary!=null||et.props.errorElement!=null,shouldRevalidate:et.props.shouldRevalidate,handle:et.props.handle,lazy:et.props.lazy};et.props.children&&(nt.children=createRoutesFromChildren(et.props.children,rt)),_e.push(nt)}),_e}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$r(){return _extends$r=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$r.apply(this,arguments)}function _objectWithoutPropertiesLoose$i(_,$){if(_==null)return{};var _e={},et=Object.keys(_),tt,rt;for(rt=0;rt<et.length;rt++)tt=et[rt],!($.indexOf(tt)>=0)&&(_e[tt]=_[tt]);return _e}function isModifiedEvent(_){return!!(_.metaKey||_.altKey||_.ctrlKey||_.shiftKey)}function shouldProcessLinkClick(_,$){return _.button===0&&(!$||$==="_self")&&!isModifiedEvent(_)}const _excluded$i=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function BrowserRouter(_){let{basename:$,children:_e,future:et,window:tt}=_,rt=reactExports.useRef();rt.current==null&&(rt.current=createBrowserHistory({window:tt,v5Compat:!0}));let nt=rt.current,[it,st]=reactExports.useState({action:nt.action,location:nt.location}),{v7_startTransition:at}=et||{},ot=reactExports.useCallback(dt=>{at&&startTransitionImpl?startTransitionImpl(()=>st(dt)):st(dt)},[st,at]);return reactExports.useLayoutEffect(()=>nt.listen(ot),[nt,ot]),reactExports.createElement(Router,{basename:$,children:_e,location:it.location,navigationType:it.action,navigator:nt,future:et})}const isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$1=reactExports.forwardRef(function($,_e){let{onClick:et,relative:tt,reloadDocument:rt,replace:nt,state:it,target:st,to:at,preventScrollReset:ot,viewTransition:dt}=$,ht=_objectWithoutPropertiesLoose$i($,_excluded$i),{basename:yt}=reactExports.useContext(NavigationContext),vt,xt=!1;if(typeof at=="string"&&ABSOLUTE_URL_REGEX.test(at)&&(vt=at,isBrowser$1))try{let jt=new URL(window.location.href),kt=at.startsWith("//")?new URL(jt.protocol+at):new URL(at),Lt=stripBasename(kt.pathname,yt);kt.origin===jt.origin&&Lt!=null?at=Lt+kt.search+kt.hash:xt=!0}catch{}let wt=useHref(at,{relative:tt}),Et=useLinkClickHandler(at,{replace:nt,state:it,target:st,preventScrollReset:ot,relative:tt,viewTransition:dt});function At(jt){et&&et(jt),jt.defaultPrevented||Et(jt)}return reactExports.createElement("a",_extends$r({},ht,{href:vt||wt,onClick:xt||rt?et:At,ref:_e,target:st}))});var DataRouterHook;(function(_){_.UseScrollRestoration="useScrollRestoration",_.UseSubmit="useSubmit",_.UseSubmitFetcher="useSubmitFetcher",_.UseFetcher="useFetcher",_.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(_){_.UseFetcher="useFetcher",_.UseFetchers="useFetchers",_.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(_,$){let{target:_e,replace:et,state:tt,preventScrollReset:rt,relative:nt,viewTransition:it}=$===void 0?{}:$,st=useNavigate(),at=useLocation(),ot=useResolvedPath(_,{relative:nt});return reactExports.useCallback(dt=>{if(shouldProcessLinkClick(dt,_e)){dt.preventDefault();let ht=et!==void 0?et:createPath(at)===createPath(ot);st(_,{replace:ht,state:tt,preventScrollReset:rt,relative:nt,viewTransition:it})}},[at,st,ot,et,tt,_e,_,rt,nt,it])}const AuthContext=reactExports.createContext(void 0),AuthProvider=({children:_})=>{const[$,_e]=reactExports.useState(null),[et,tt]=reactExports.useState(!0);reactExports.useEffect(()=>{const st=localStorage.getItem("user");st&&_e(JSON.parse(st)),tt(!1)},[]);const rt=async(st,at)=>{try{tt(!0);const ot=localStorage.getItem("credentials");if(ot){const{email:dt,password:ht}=JSON.parse(ot);if(st===dt&&at===ht){const yt={id:Date.now().toString(),name:st.split("@")[0],email:st,avatar:"https://github.com/shadcn.png"};_e(yt),localStorage.setItem("user",JSON.stringify(yt)),Jt.success("Login realizado com sucesso!");return}}if(st==="test@example.com"&&at==="password"){const dt={id:"1",name:"Test User",email:"test@example.com",avatar:"https://github.com/shadcn.png"};_e(dt),localStorage.setItem("user",JSON.stringify(dt)),Jt.success("Login realizado com sucesso!")}else throw new Error("Credenciais inválidas")}catch(ot){throw Jt.error("Falha no login. Verifique suas credenciais."),ot}finally{tt(!1)}},nt=()=>{_e(null),localStorage.removeItem("user")},it=st=>{if($){const at={...$,...st};_e(at),localStorage.setItem("user",JSON.stringify(at))}};return jsxRuntimeExports.jsx(AuthContext.Provider,{value:{user:$,isLoading:et,login:rt,logout:nt,updateUser:it},children:_})},useAuth=()=>{const _=reactExports.useContext(AuthContext);if(_===void 0)throw new Error("useAuth must be used within an AuthProvider");return _};function useLocalStorage(_,$){const _e=()=>{if(typeof window>"u")return $;try{const nt=window.localStorage.getItem(_);return nt?JSON.parse(nt):$}catch(nt){return console.warn(`Error reading localStorage key "${_}":`,nt),$}},[et,tt]=reactExports.useState(_e),rt=nt=>{try{const it=nt instanceof Function?nt(et):nt;tt(it),typeof window<"u"&&window.localStorage.setItem(_,JSON.stringify(it))}catch(it){console.warn(`Error setting localStorage key "${_}":`,it)}};return reactExports.useEffect(()=>{const nt=it=>{it.key===_&&tt(it.newValue?JSON.parse(it.newValue):$)};return window.addEventListener("storage",nt),()=>window.removeEventListener("storage",nt)},[_,$]),[et,rt]}const ThemeContext=reactExports.createContext(void 0),ThemeProvider=({children:_})=>{var rt,nt;const{user:$}=useAuth(),[_e,et]=useLocalStorage("crypto-app-theme",((rt=$==null?void 0:$.settings)==null?void 0:rt.theme)||"dark");reactExports.useEffect(()=>{const it=window.document.documentElement;it.classList.remove("light","dark"),it.classList.add(_e)},[_e]),reactExports.useEffect(()=>{var it;(it=$==null?void 0:$.settings)!=null&&it.theme&&$.settings.theme!==_e&&et($.settings.theme)},[(nt=$==null?void 0:$.settings)==null?void 0:nt.theme]);const tt=it=>{et(it)};return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:{theme:_e,setTheme:tt},children:_})},useTheme=()=>{const _=reactExports.useContext(ThemeContext);if(_===void 0)throw new Error("useTheme must be used within a ThemeProvider");return _},buttonVariants=cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Button=reactExports.forwardRef(({className:_,variant:$,size:_e,asChild:et=!1,...tt},rt)=>{const nt=et?Slot:"button";return jsxRuntimeExports.jsx(nt,{className:cn(buttonVariants({variant:$,size:_e,className:_})),ref:rt,...tt})});Button.displayName="Button";const Sidebar=()=>{const _=useLocation(),[$,_e]=reactExports.useState(!1),et=()=>{_e(rt=>!rt)},tt=[{name:"Dashboard",path:"/dashboard",icon:jsxRuntimeExports.jsx(Gauge,{size:20})},{name:"Strategies",path:"/strategies",icon:jsxRuntimeExports.jsx(Activity,{size:20})},{name:"Trading History",path:"/history",icon:jsxRuntimeExports.jsx(History$2,{size:20})},{name:"Alerts",path:"/alerts",icon:jsxRuntimeExports.jsx(BellRing,{size:20})},{name:"Settings",path:"/settings",icon:jsxRuntimeExports.jsx(Settings$1,{size:20})},{name:"About",path:"/about",icon:jsxRuntimeExports.jsx(CircleHelp,{size:20})}];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"md:hidden fixed top-0 left-0 z-30 p-4",children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:et,className:"bg-background/80 backdrop-blur-sm",children:$?jsxRuntimeExports.jsx(X,{size:20}):jsxRuntimeExports.jsx(Menu$1,{size:20})})}),jsxRuntimeExports.jsxs("div",{className:cn("bg-sidebar text-sidebar-foreground fixed inset-y-0 left-0 z-20 w-64 flex-col border-r border-sidebar-border transition-transform duration-300 md:translate-x-0 md:relative",$?"translate-x-0":"-translate-x-full"),children:[jsxRuntimeExports.jsx("div",{className:"flex h-16 items-center border-b border-sidebar-border px-6",children:jsxRuntimeExports.jsxs(Link$1,{to:"/dashboard",className:"flex items-center space-x-2",onClick:()=>_e(!1),children:[jsxRuntimeExports.jsx(ChartArea,{className:"h-6 w-6 text-cryptoBlue"}),jsxRuntimeExports.jsx("span",{className:"font-bold text-lg",children:"CryptoSuite"})]})}),jsxRuntimeExports.jsx("nav",{className:"flex-1 overflow-auto p-4",children:jsxRuntimeExports.jsx("ul",{className:"space-y-1",children:tt.map(rt=>jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs(Link$1,{to:rt.path,onClick:()=>_e(!1),className:cn("flex items-center space-x-3 rounded-md px-3 py-2 text-sm font-medium transition-colors",_.pathname===rt.path?"bg-sidebar-accent text-sidebar-accent-foreground":"hover:bg-sidebar-accent/50 hover:text-sidebar-accent-foreground"),children:[rt.icon,jsxRuntimeExports.jsx("span",{children:rt.name})]})},rt.path))})}),jsxRuntimeExports.jsx("div",{className:"border-t border-sidebar-border p-4",children:jsxRuntimeExports.jsxs("div",{className:"rounded-md bg-sidebar-accent/50 p-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[jsxRuntimeExports.jsx(Layers,{size:18}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Account Status"})]}),jsxRuntimeExports.jsxs("div",{className:"text-xs opacity-90",children:[jsxRuntimeExports.jsx("p",{children:"Connected to Binance"}),jsxRuntimeExports.jsx("p",{children:"5 Active Strategies"}),jsxRuntimeExports.jsx("p",{children:"2 Open Positions"})]})]})})]}),$&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-10 bg-black/50 md:hidden",onClick:()=>_e(!1)})]})},ThemeToggle=()=>{const{theme:_,setTheme:$}=useTheme(),_e=()=>{$(_==="light"?"dark":"light")};return jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:_e,children:_==="light"?jsxRuntimeExports.jsx(Moon,{size:20}):jsxRuntimeExports.jsx(Sun,{size:20})})};var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS$1={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((_,$)=>{const{loop:_e=!1,trapped:et=!1,onMountAutoFocus:tt,onUnmountAutoFocus:rt,...nt}=_,[it,st]=reactExports.useState(null),at=useCallbackRef$1(tt),ot=useCallbackRef$1(rt),dt=reactExports.useRef(null),ht=useComposedRefs($,xt=>st(xt)),yt=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(et){let xt=function(jt){if(yt.paused||!it)return;const kt=jt.target;it.contains(kt)?dt.current=kt:focus(dt.current,{select:!0})},wt=function(jt){if(yt.paused||!it)return;const kt=jt.relatedTarget;kt!==null&&(it.contains(kt)||focus(dt.current,{select:!0}))},Et=function(jt){if(document.activeElement===document.body)for(const Lt of jt)Lt.removedNodes.length>0&&focus(it)};document.addEventListener("focusin",xt),document.addEventListener("focusout",wt);const At=new MutationObserver(Et);return it&&At.observe(it,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",xt),document.removeEventListener("focusout",wt),At.disconnect()}}},[et,it,yt.paused]),reactExports.useEffect(()=>{if(it){focusScopesStack.add(yt);const xt=document.activeElement;if(!it.contains(xt)){const Et=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS$1);it.addEventListener(AUTOFOCUS_ON_MOUNT,at),it.dispatchEvent(Et),Et.defaultPrevented||(focusFirst$2(removeLinks(getTabbableCandidates(it)),{select:!0}),document.activeElement===xt&&focus(it))}return()=>{it.removeEventListener(AUTOFOCUS_ON_MOUNT,at),setTimeout(()=>{const Et=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS$1);it.addEventListener(AUTOFOCUS_ON_UNMOUNT,ot),it.dispatchEvent(Et),Et.defaultPrevented||focus(xt??document.body,{select:!0}),it.removeEventListener(AUTOFOCUS_ON_UNMOUNT,ot),focusScopesStack.remove(yt)},0)}}},[it,at,ot,yt]);const vt=reactExports.useCallback(xt=>{if(!_e&&!et||yt.paused)return;const wt=xt.key==="Tab"&&!xt.altKey&&!xt.ctrlKey&&!xt.metaKey,Et=document.activeElement;if(wt&&Et){const At=xt.currentTarget,[jt,kt]=getTabbableEdges(At);jt&&kt?!xt.shiftKey&&Et===kt?(xt.preventDefault(),_e&&focus(jt,{select:!0})):xt.shiftKey&&Et===jt&&(xt.preventDefault(),_e&&focus(kt,{select:!0})):Et===At&&xt.preventDefault()}},[_e,et,yt.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,...nt,ref:ht,onKeyDown:vt})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst$2(_,{select:$=!1}={}){const _e=document.activeElement;for(const et of _)if(focus(et,{select:$}),document.activeElement!==_e)return}function getTabbableEdges(_){const $=getTabbableCandidates(_),_e=findVisible($,_),et=findVisible($.reverse(),_);return[_e,et]}function getTabbableCandidates(_){const $=[],_e=document.createTreeWalker(_,NodeFilter.SHOW_ELEMENT,{acceptNode:et=>{const tt=et.tagName==="INPUT"&&et.type==="hidden";return et.disabled||et.hidden||tt?NodeFilter.FILTER_SKIP:et.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;_e.nextNode();)$.push(_e.currentNode);return $}function findVisible(_,$){for(const _e of _)if(!isHidden(_e,{upTo:$}))return _e}function isHidden(_,{upTo:$}){if(getComputedStyle(_).visibility==="hidden")return!0;for(;_;){if($!==void 0&&_===$)return!1;if(getComputedStyle(_).display==="none")return!0;_=_.parentElement}return!1}function isSelectableInput(_){return _ instanceof HTMLInputElement&&"select"in _}function focus(_,{select:$=!1}={}){if(_&&_.focus){const _e=document.activeElement;_.focus({preventScroll:!0}),_!==_e&&isSelectableInput(_)&&$&&_.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let _=[];return{add($){const _e=_[0];$!==_e&&(_e==null||_e.pause()),_=arrayRemove(_,$),_.unshift($)},remove($){var _e;_=arrayRemove(_,$),(_e=_[0])==null||_e.resume()}}}function arrayRemove(_,$){const _e=[..._],et=_e.indexOf($);return et!==-1&&_e.splice(et,1),_e}function removeLinks(_){return _.filter($=>$.tagName!=="A")}var count$1=0;function useFocusGuards(){reactExports.useEffect(()=>{const _=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",_[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",_[1]??createFocusGuard()),count$1++,()=>{count$1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach($=>$.remove()),count$1--}},[])}function createFocusGuard(){const _=document.createElement("span");return _.setAttribute("data-radix-focus-guard",""),_.tabIndex=0,_.style.outline="none",_.style.opacity="0",_.style.position="fixed",_.style.pointerEvents="none",_}var __assign=function(){return __assign=Object.assign||function($){for(var _e,et=1,tt=arguments.length;et<tt;et++){_e=arguments[et];for(var rt in _e)Object.prototype.hasOwnProperty.call(_e,rt)&&($[rt]=_e[rt])}return $},__assign.apply(this,arguments)};function __rest$1(_,$){var _e={};for(var et in _)Object.prototype.hasOwnProperty.call(_,et)&&$.indexOf(et)<0&&(_e[et]=_[et]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var tt=0,et=Object.getOwnPropertySymbols(_);tt<et.length;tt++)$.indexOf(et[tt])<0&&Object.prototype.propertyIsEnumerable.call(_,et[tt])&&(_e[et[tt]]=_[et[tt]]);return _e}function __spreadArray(_,$,_e){if(_e||arguments.length===2)for(var et=0,tt=$.length,rt;et<tt;et++)(rt||!(et in $))&&(rt||(rt=Array.prototype.slice.call($,0,et)),rt[et]=$[et]);return _.concat(rt||Array.prototype.slice.call($))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(_,$){return typeof _=="function"?_($):_&&(_.current=$),_}function useCallbackRef(_,$){var _e=reactExports.useState(function(){return{value:_,callback:$,facade:{get current(){return _e.value},set current(et){var tt=_e.value;tt!==et&&(_e.value=et,_e.callback(et,tt))}}}})[0];return _e.callback=$,_e.facade}var useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(_,$){var _e=useCallbackRef(null,function(et){return _.forEach(function(tt){return assignRef(tt,et)})});return useIsomorphicLayoutEffect(function(){var et=currentValues.get(_e);if(et){var tt=new Set(et),rt=new Set(_),nt=_e.current;tt.forEach(function(it){rt.has(it)||assignRef(it,null)}),rt.forEach(function(it){tt.has(it)||assignRef(it,nt)})}currentValues.set(_e,_)},[_]),_e}function ItoI(_){return _}function innerCreateMedium(_,$){$===void 0&&($=ItoI);var _e=[],et=!1,tt={read:function(){if(et)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return _e.length?_e[_e.length-1]:_},useMedium:function(rt){var nt=$(rt,et);return _e.push(nt),function(){_e=_e.filter(function(it){return it!==nt})}},assignSyncMedium:function(rt){for(et=!0;_e.length;){var nt=_e;_e=[],nt.forEach(rt)}_e={push:function(it){return rt(it)},filter:function(){return _e}}},assignMedium:function(rt){et=!0;var nt=[];if(_e.length){var it=_e;_e=[],it.forEach(rt),nt=_e}var st=function(){var ot=nt;nt=[],ot.forEach(rt)},at=function(){return Promise.resolve().then(st)};at(),_e={push:function(ot){nt.push(ot),at()},filter:function(ot){return nt=nt.filter(ot),_e}}}};return tt}function createSidecarMedium(_){_===void 0&&(_={});var $=innerCreateMedium(null);return $.options=__assign({async:!0,ssr:!1},_),$}var SideCar$1=function(_){var $=_.sideCar,_e=__rest$1(_,["sideCar"]);if(!$)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var et=$.read();if(!et)throw new Error("Sidecar medium not found");return reactExports.createElement(et,__assign({},_e))};SideCar$1.isSideCarExport=!0;function exportSidecar(_,$){return _.useMedium($),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(_,$){var _e=reactExports.useRef(null),et=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),tt=et[0],rt=et[1],nt=_.forwardProps,it=_.children,st=_.className,at=_.removeScrollBar,ot=_.enabled,dt=_.shards,ht=_.sideCar,yt=_.noIsolation,vt=_.inert,xt=_.allowPinchZoom,wt=_.as,Et=wt===void 0?"div":wt,At=_.gapMode,jt=__rest$1(_,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),kt=ht,Lt=useMergeRefs([_e,$]),Bt=__assign(__assign({},jt),tt);return reactExports.createElement(reactExports.Fragment,null,ot&&reactExports.createElement(kt,{sideCar:effectCar,removeScrollBar:at,shards:dt,noIsolation:yt,inert:vt,setCallbacks:rt,allowPinchZoom:!!xt,lockRef:_e,gapMode:At}),nt?reactExports.cloneElement(reactExports.Children.only(it),__assign(__assign({},Bt),{ref:Lt})):reactExports.createElement(Et,__assign({},Bt,{className:st,ref:Lt}),it))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var _=document.createElement("style");_.type="text/css";var $=getNonce();return $&&_.setAttribute("nonce",$),_}function injectStyles(_,$){_.styleSheet?_.styleSheet.cssText=$:_.appendChild(document.createTextNode($))}function insertStyleTag(_){var $=document.head||document.getElementsByTagName("head")[0];$.appendChild(_)}var stylesheetSingleton=function(){var _=0,$=null;return{add:function(_e){_==0&&($=makeStyleTag())&&(injectStyles($,_e),insertStyleTag($)),_++},remove:function(){_--,!_&&$&&($.parentNode&&$.parentNode.removeChild($),$=null)}}},styleHookSingleton=function(){var _=stylesheetSingleton();return function($,_e){reactExports.useEffect(function(){return _.add($),function(){_.remove()}},[$&&_e])}},styleSingleton=function(){var _=styleHookSingleton(),$=function(_e){var et=_e.styles,tt=_e.dynamic;return _(et,tt),null};return $},zeroGap={left:0,top:0,right:0,gap:0},parse=function(_){return parseInt(_||"",10)||0},getOffset$1=function(_){var $=window.getComputedStyle(document.body),_e=$[_==="padding"?"paddingLeft":"marginLeft"],et=$[_==="padding"?"paddingTop":"marginTop"],tt=$[_==="padding"?"paddingRight":"marginRight"];return[parse(_e),parse(et),parse(tt)]},getGapWidth=function(_){if(_===void 0&&(_="margin"),typeof window>"u")return zeroGap;var $=getOffset$1(_),_e=document.documentElement.clientWidth,et=window.innerWidth;return{left:$[0],top:$[1],right:$[2],gap:Math.max(0,et-_e+$[2]-$[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(_,$,_e,et){var tt=_.left,rt=_.top,nt=_.right,it=_.gap;return _e===void 0&&(_e="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(et,`;
   padding-right: `).concat(it,"px ").concat(et,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(et,`;
    overscroll-behavior: contain;
    `).concat([$&&"position: relative ".concat(et,";"),_e==="margin"&&`
    padding-left: `.concat(tt,`px;
    padding-top: `).concat(rt,`px;
    padding-right: `).concat(nt,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(it,"px ").concat(et,`;
    `),_e==="padding"&&"padding-right: ".concat(it,"px ").concat(et,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(it,"px ").concat(et,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(it,"px ").concat(et,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(et,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(et,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(it,`px;
  }
`)},getCurrentUseCounter=function(){var _=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(_)?_:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var _=getCurrentUseCounter()-1;_<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,_.toString())}},[])},RemoveScrollBar=function(_){var $=_.noRelative,_e=_.noImportant,et=_.gapMode,tt=et===void 0?"margin":et;useLockAttribute();var rt=reactExports.useMemo(function(){return getGapWidth(tt)},[tt]);return reactExports.createElement(Style,{styles:getStyles(rt,!$,tt,_e?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(_){return _.tagName==="TEXTAREA"},elementCanBeScrolled=function(_,$){if(!(_ instanceof Element))return!1;var _e=window.getComputedStyle(_);return _e[$]!=="hidden"&&!(_e.overflowY===_e.overflowX&&!alwaysContainsScroll(_)&&_e[$]==="visible")},elementCouldBeVScrolled=function(_){return elementCanBeScrolled(_,"overflowY")},elementCouldBeHScrolled=function(_){return elementCanBeScrolled(_,"overflowX")},locationCouldBeScrolled=function(_,$){var _e=$.ownerDocument,et=$;do{typeof ShadowRoot<"u"&&et instanceof ShadowRoot&&(et=et.host);var tt=elementCouldBeScrolled(_,et);if(tt){var rt=getScrollVariables(_,et),nt=rt[1],it=rt[2];if(nt>it)return!0}et=et.parentNode}while(et&&et!==_e.body);return!1},getVScrollVariables=function(_){var $=_.scrollTop,_e=_.scrollHeight,et=_.clientHeight;return[$,_e,et]},getHScrollVariables=function(_){var $=_.scrollLeft,_e=_.scrollWidth,et=_.clientWidth;return[$,_e,et]},elementCouldBeScrolled=function(_,$){return _==="v"?elementCouldBeVScrolled($):elementCouldBeHScrolled($)},getScrollVariables=function(_,$){return _==="v"?getVScrollVariables($):getHScrollVariables($)},getDirectionFactor=function(_,$){return _==="h"&&$==="rtl"?-1:1},handleScroll=function(_,$,_e,et,tt){var rt=getDirectionFactor(_,window.getComputedStyle($).direction),nt=rt*et,it=_e.target,st=$.contains(it),at=!1,ot=nt>0,dt=0,ht=0;do{var yt=getScrollVariables(_,it),vt=yt[0],xt=yt[1],wt=yt[2],Et=xt-wt-rt*vt;(vt||Et)&&elementCouldBeScrolled(_,it)&&(dt+=Et,ht+=vt),it instanceof ShadowRoot?it=it.host:it=it.parentNode}while(!st&&it!==document.body||st&&($.contains(it)||$===it));return(ot&&(Math.abs(dt)<1||!tt)||!ot&&(Math.abs(ht)<1||!tt))&&(at=!0),at},getTouchXY=function(_){return"changedTouches"in _?[_.changedTouches[0].clientX,_.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(_){return[_.deltaX,_.deltaY]},extractRef=function(_){return _&&"current"in _?_.current:_},deltaCompare=function(_,$){return _[0]===$[0]&&_[1]===$[1]},generateStyle=function(_){return`
  .block-interactivity-`.concat(_,` {pointer-events: none;}
  .allow-interactivity-`).concat(_,` {pointer-events: all;}
`)},idCounter$1=0,lockStack=[];function RemoveScrollSideCar(_){var $=reactExports.useRef([]),_e=reactExports.useRef([0,0]),et=reactExports.useRef(),tt=reactExports.useState(idCounter$1++)[0],rt=reactExports.useState(styleSingleton)[0],nt=reactExports.useRef(_);reactExports.useEffect(function(){nt.current=_},[_]),reactExports.useEffect(function(){if(_.inert){document.body.classList.add("block-interactivity-".concat(tt));var xt=__spreadArray([_.lockRef.current],(_.shards||[]).map(extractRef),!0).filter(Boolean);return xt.forEach(function(wt){return wt.classList.add("allow-interactivity-".concat(tt))}),function(){document.body.classList.remove("block-interactivity-".concat(tt)),xt.forEach(function(wt){return wt.classList.remove("allow-interactivity-".concat(tt))})}}},[_.inert,_.lockRef.current,_.shards]);var it=reactExports.useCallback(function(xt,wt){if("touches"in xt&&xt.touches.length===2||xt.type==="wheel"&&xt.ctrlKey)return!nt.current.allowPinchZoom;var Et=getTouchXY(xt),At=_e.current,jt="deltaX"in xt?xt.deltaX:At[0]-Et[0],kt="deltaY"in xt?xt.deltaY:At[1]-Et[1],Lt,Bt=xt.target,Gt=Math.abs(jt)>Math.abs(kt)?"h":"v";if("touches"in xt&&Gt==="h"&&Bt.type==="range")return!1;var er=locationCouldBeScrolled(Gt,Bt);if(!er)return!0;if(er?Lt=Gt:(Lt=Gt==="v"?"h":"v",er=locationCouldBeScrolled(Gt,Bt)),!er)return!1;if(!et.current&&"changedTouches"in xt&&(jt||kt)&&(et.current=Lt),!Lt)return!0;var tr=et.current||Lt;return handleScroll(tr,wt,xt,tr==="h"?jt:kt,!0)},[]),st=reactExports.useCallback(function(xt){var wt=xt;if(!(!lockStack.length||lockStack[lockStack.length-1]!==rt)){var Et="deltaY"in wt?getDeltaXY(wt):getTouchXY(wt),At=$.current.filter(function(Lt){return Lt.name===wt.type&&(Lt.target===wt.target||wt.target===Lt.shadowParent)&&deltaCompare(Lt.delta,Et)})[0];if(At&&At.should){wt.cancelable&&wt.preventDefault();return}if(!At){var jt=(nt.current.shards||[]).map(extractRef).filter(Boolean).filter(function(Lt){return Lt.contains(wt.target)}),kt=jt.length>0?it(wt,jt[0]):!nt.current.noIsolation;kt&&wt.cancelable&&wt.preventDefault()}}},[]),at=reactExports.useCallback(function(xt,wt,Et,At){var jt={name:xt,delta:wt,target:Et,should:At,shadowParent:getOutermostShadowParent(Et)};$.current.push(jt),setTimeout(function(){$.current=$.current.filter(function(kt){return kt!==jt})},1)},[]),ot=reactExports.useCallback(function(xt){_e.current=getTouchXY(xt),et.current=void 0},[]),dt=reactExports.useCallback(function(xt){at(xt.type,getDeltaXY(xt),xt.target,it(xt,_.lockRef.current))},[]),ht=reactExports.useCallback(function(xt){at(xt.type,getTouchXY(xt),xt.target,it(xt,_.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(rt),_.setCallbacks({onScrollCapture:dt,onWheelCapture:dt,onTouchMoveCapture:ht}),document.addEventListener("wheel",st,nonPassive),document.addEventListener("touchmove",st,nonPassive),document.addEventListener("touchstart",ot,nonPassive),function(){lockStack=lockStack.filter(function(xt){return xt!==rt}),document.removeEventListener("wheel",st,nonPassive),document.removeEventListener("touchmove",st,nonPassive),document.removeEventListener("touchstart",ot,nonPassive)}},[]);var yt=_.removeScrollBar,vt=_.inert;return reactExports.createElement(reactExports.Fragment,null,vt?reactExports.createElement(rt,{styles:generateStyle(tt)}):null,yt?reactExports.createElement(RemoveScrollBar,{gapMode:_.gapMode}):null)}function getOutermostShadowParent(_){for(var $=null;_!==null;)_ instanceof ShadowRoot&&($=_.host,_=_.host),_=_.parentNode;return $}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(_,$){return reactExports.createElement(RemoveScroll,__assign({},_,{ref:$,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var getDefaultParent=function(_){if(typeof document>"u")return null;var $=Array.isArray(_)?_[0]:_;return $.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(_){return _&&(_.host||unwrapHost(_.parentNode))},correctTargets=function(_,$){return $.map(function(_e){if(_.contains(_e))return _e;var et=unwrapHost(_e);return et&&_.contains(et)?et:(console.error("aria-hidden",_e,"in not contained inside",_,". Doing nothing"),null)}).filter(function(_e){return!!_e})},applyAttributeToOthers=function(_,$,_e,et){var tt=correctTargets($,Array.isArray(_)?_:[_]);markerMap[_e]||(markerMap[_e]=new WeakMap);var rt=markerMap[_e],nt=[],it=new Set,st=new Set(tt),at=function(dt){!dt||it.has(dt)||(it.add(dt),at(dt.parentNode))};tt.forEach(at);var ot=function(dt){!dt||st.has(dt)||Array.prototype.forEach.call(dt.children,function(ht){if(it.has(ht))ot(ht);else try{var yt=ht.getAttribute(et),vt=yt!==null&&yt!=="false",xt=(counterMap.get(ht)||0)+1,wt=(rt.get(ht)||0)+1;counterMap.set(ht,xt),rt.set(ht,wt),nt.push(ht),xt===1&&vt&&uncontrolledNodes.set(ht,!0),wt===1&&ht.setAttribute(_e,"true"),vt||ht.setAttribute(et,"true")}catch(Et){console.error("aria-hidden: cannot operate on ",ht,Et)}})};return ot($),it.clear(),lockCount++,function(){nt.forEach(function(dt){var ht=counterMap.get(dt)-1,yt=rt.get(dt)-1;counterMap.set(dt,ht),rt.set(dt,yt),ht||(uncontrolledNodes.has(dt)||dt.removeAttribute(et),uncontrolledNodes.delete(dt)),yt||dt.removeAttribute(_e)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(_,$,_e){_e===void 0&&(_e="data-aria-hidden");var et=Array.from(Array.isArray(_)?_:[_]),tt=getDefaultParent(_);return tt?(et.push.apply(et,Array.from(tt.querySelectorAll("[aria-live]"))),applyAttributeToOthers(et,tt,_e,"aria-hidden")):function(){return null}},DIALOG_NAME="Dialog",[createDialogContext,createDialogScope]=createContextScope$3(DIALOG_NAME),[DialogProvider,useDialogContext]=createDialogContext(DIALOG_NAME),Dialog$1=_=>{const{__scopeDialog:$,children:_e,open:et,defaultOpen:tt,onOpenChange:rt,modal:nt=!0}=_,it=reactExports.useRef(null),st=reactExports.useRef(null),[at=!1,ot]=useControllableState({prop:et,defaultProp:tt,onChange:rt});return jsxRuntimeExports.jsx(DialogProvider,{scope:$,triggerRef:it,contentRef:st,contentId:useId(),titleId:useId(),descriptionId:useId(),open:at,onOpenChange:ot,onOpenToggle:reactExports.useCallback(()=>ot(dt=>!dt),[ot]),modal:nt,children:_e})};Dialog$1.displayName=DIALOG_NAME;var TRIGGER_NAME$3="DialogTrigger",DialogTrigger$1=reactExports.forwardRef((_,$)=>{const{__scopeDialog:_e,...et}=_,tt=useDialogContext(TRIGGER_NAME$3,_e),rt=useComposedRefs($,tt.triggerRef);return jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":tt.open,"aria-controls":tt.contentId,"data-state":getState$1(tt.open),...et,ref:rt,onClick:composeEventHandlers(_.onClick,tt.onOpenToggle)})});DialogTrigger$1.displayName=TRIGGER_NAME$3;var PORTAL_NAME$3="DialogPortal",[PortalProvider$1,usePortalContext$1]=createDialogContext(PORTAL_NAME$3,{forceMount:void 0}),DialogPortal$1=_=>{const{__scopeDialog:$,forceMount:_e,children:et,container:tt}=_,rt=useDialogContext(PORTAL_NAME$3,$);return jsxRuntimeExports.jsx(PortalProvider$1,{scope:$,forceMount:_e,children:reactExports.Children.map(et,nt=>jsxRuntimeExports.jsx(Presence,{present:_e||rt.open,children:jsxRuntimeExports.jsx(Portal$3,{asChild:!0,container:tt,children:nt})}))})};DialogPortal$1.displayName=PORTAL_NAME$3;var OVERLAY_NAME="DialogOverlay",DialogOverlay$1=reactExports.forwardRef((_,$)=>{const _e=usePortalContext$1(OVERLAY_NAME,_.__scopeDialog),{forceMount:et=_e.forceMount,...tt}=_,rt=useDialogContext(OVERLAY_NAME,_.__scopeDialog);return rt.modal?jsxRuntimeExports.jsx(Presence,{present:et||rt.open,children:jsxRuntimeExports.jsx(DialogOverlayImpl,{...tt,ref:$})}):null});DialogOverlay$1.displayName=OVERLAY_NAME;var DialogOverlayImpl=reactExports.forwardRef((_,$)=>{const{__scopeDialog:_e,...et}=_,tt=useDialogContext(OVERLAY_NAME,_e);return jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,shards:[tt.contentRef],children:jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState$1(tt.open),...et,ref:$,style:{pointerEvents:"auto",...et.style}})})}),CONTENT_NAME$4="DialogContent",DialogContent$1=reactExports.forwardRef((_,$)=>{const _e=usePortalContext$1(CONTENT_NAME$4,_.__scopeDialog),{forceMount:et=_e.forceMount,...tt}=_,rt=useDialogContext(CONTENT_NAME$4,_.__scopeDialog);return jsxRuntimeExports.jsx(Presence,{present:et||rt.open,children:rt.modal?jsxRuntimeExports.jsx(DialogContentModal,{...tt,ref:$}):jsxRuntimeExports.jsx(DialogContentNonModal,{...tt,ref:$})})});DialogContent$1.displayName=CONTENT_NAME$4;var DialogContentModal=reactExports.forwardRef((_,$)=>{const _e=useDialogContext(CONTENT_NAME$4,_.__scopeDialog),et=reactExports.useRef(null),tt=useComposedRefs($,_e.contentRef,et);return reactExports.useEffect(()=>{const rt=et.current;if(rt)return hideOthers(rt)},[]),jsxRuntimeExports.jsx(DialogContentImpl,{..._,ref:tt,trapFocus:_e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers(_.onCloseAutoFocus,rt=>{var nt;rt.preventDefault(),(nt=_e.triggerRef.current)==null||nt.focus()}),onPointerDownOutside:composeEventHandlers(_.onPointerDownOutside,rt=>{const nt=rt.detail.originalEvent,it=nt.button===0&&nt.ctrlKey===!0;(nt.button===2||it)&&rt.preventDefault()}),onFocusOutside:composeEventHandlers(_.onFocusOutside,rt=>rt.preventDefault())})}),DialogContentNonModal=reactExports.forwardRef((_,$)=>{const _e=useDialogContext(CONTENT_NAME$4,_.__scopeDialog),et=reactExports.useRef(!1),tt=reactExports.useRef(!1);return jsxRuntimeExports.jsx(DialogContentImpl,{..._,ref:$,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:rt=>{var nt,it;(nt=_.onCloseAutoFocus)==null||nt.call(_,rt),rt.defaultPrevented||(et.current||(it=_e.triggerRef.current)==null||it.focus(),rt.preventDefault()),et.current=!1,tt.current=!1},onInteractOutside:rt=>{var st,at;(st=_.onInteractOutside)==null||st.call(_,rt),rt.defaultPrevented||(et.current=!0,rt.detail.originalEvent.type==="pointerdown"&&(tt.current=!0));const nt=rt.target;((at=_e.triggerRef.current)==null?void 0:at.contains(nt))&&rt.preventDefault(),rt.detail.originalEvent.type==="focusin"&&tt.current&&rt.preventDefault()}})}),DialogContentImpl=reactExports.forwardRef((_,$)=>{const{__scopeDialog:_e,trapFocus:et,onOpenAutoFocus:tt,onCloseAutoFocus:rt,...nt}=_,it=useDialogContext(CONTENT_NAME$4,_e),st=reactExports.useRef(null),at=useComposedRefs($,st);return useFocusGuards(),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FocusScope,{asChild:!0,loop:!0,trapped:et,onMountAutoFocus:tt,onUnmountAutoFocus:rt,children:jsxRuntimeExports.jsx(DismissableLayer,{role:"dialog",id:it.contentId,"aria-describedby":it.descriptionId,"aria-labelledby":it.titleId,"data-state":getState$1(it.open),...nt,ref:at,onDismiss:()=>it.onOpenChange(!1)})}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TitleWarning,{titleId:it.titleId}),jsxRuntimeExports.jsx(DescriptionWarning,{contentRef:st,descriptionId:it.descriptionId})]})]})}),TITLE_NAME="DialogTitle",DialogTitle$1=reactExports.forwardRef((_,$)=>{const{__scopeDialog:_e,...et}=_,tt=useDialogContext(TITLE_NAME,_e);return jsxRuntimeExports.jsx(Primitive.h2,{id:tt.titleId,...et,ref:$})});DialogTitle$1.displayName=TITLE_NAME;var DESCRIPTION_NAME="DialogDescription",DialogDescription$1=reactExports.forwardRef((_,$)=>{const{__scopeDialog:_e,...et}=_,tt=useDialogContext(DESCRIPTION_NAME,_e);return jsxRuntimeExports.jsx(Primitive.p,{id:tt.descriptionId,...et,ref:$})});DialogDescription$1.displayName=DESCRIPTION_NAME;var CLOSE_NAME="DialogClose",DialogClose=reactExports.forwardRef((_,$)=>{const{__scopeDialog:_e,...et}=_,tt=useDialogContext(CLOSE_NAME,_e);return jsxRuntimeExports.jsx(Primitive.button,{type:"button",...et,ref:$,onClick:composeEventHandlers(_.onClick,()=>tt.onOpenChange(!1))})});DialogClose.displayName=CLOSE_NAME;function getState$1(_){return _?"open":"closed"}var TITLE_WARNING_NAME="DialogTitleWarning",[WarningProvider,useWarningContext]=createContext2(TITLE_WARNING_NAME,{contentName:CONTENT_NAME$4,titleName:TITLE_NAME,docsSlug:"dialog"}),TitleWarning=({titleId:_})=>{const $=useWarningContext(TITLE_WARNING_NAME),_e=`\`${$.contentName}\` requires a \`${$.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${$.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${$.docsSlug}`;return reactExports.useEffect(()=>{_&&(document.getElementById(_)||console.error(_e))},[_e,_]),null},DESCRIPTION_WARNING_NAME="DialogDescriptionWarning",DescriptionWarning=({contentRef:_,descriptionId:$})=>{const et=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${useWarningContext(DESCRIPTION_WARNING_NAME).contentName}}.`;return reactExports.useEffect(()=>{var rt;const tt=(rt=_.current)==null?void 0:rt.getAttribute("aria-describedby");$&&tt&&(document.getElementById($)||console.warn(et))},[et,_,$]),null},Root$7=Dialog$1,Trigger$3=DialogTrigger$1,Portal$2=DialogPortal$1,Overlay=DialogOverlay$1,Content$1=DialogContent$1,Title=DialogTitle$1,Description=DialogDescription$1,Close=DialogClose;const Dialog=Root$7,DialogTrigger=Trigger$3,DialogPortal=Portal$2,DialogOverlay=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx(Overlay,{ref:_e,className:cn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",_),...$}));DialogOverlay.displayName=Overlay.displayName;const DialogContent=reactExports.forwardRef(({className:_,children:$,..._e},et)=>jsxRuntimeExports.jsxs(DialogPortal,{children:[jsxRuntimeExports.jsx(DialogOverlay,{}),jsxRuntimeExports.jsxs(Content$1,{ref:et,className:cn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",_),..._e,children:[$,jsxRuntimeExports.jsxs(Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[jsxRuntimeExports.jsx(X,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));DialogContent.displayName=Content$1.displayName;const DialogHeader=({className:_,...$})=>jsxRuntimeExports.jsx("div",{className:cn("flex flex-col space-y-1.5 text-center sm:text-left",_),...$});DialogHeader.displayName="DialogHeader";const DialogFooter=({className:_,...$})=>jsxRuntimeExports.jsx("div",{className:cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",_),...$});DialogFooter.displayName="DialogFooter";const DialogTitle=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx(Title,{ref:_e,className:cn("text-lg font-semibold leading-none tracking-tight",_),...$}));DialogTitle.displayName=Title.displayName;const DialogDescription=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx(Description,{ref:_e,className:cn("text-sm text-muted-foreground",_),...$}));DialogDescription.displayName=Description.displayName;var DirectionContext=reactExports.createContext(void 0);function useDirection(_){const $=reactExports.useContext(DirectionContext);return _||$||"ltr"}function clamp$1(_,[$,_e]){return Math.min(_e,Math.max($,_))}function useStateMachine(_,$){return reactExports.useReducer((_e,et)=>$[_e][et]??_e,_)}var SCROLL_AREA_NAME="ScrollArea",[createScrollAreaContext,createScrollAreaScope]=createContextScope$3(SCROLL_AREA_NAME),[ScrollAreaProvider,useScrollAreaContext]=createScrollAreaContext(SCROLL_AREA_NAME),ScrollArea$1=reactExports.forwardRef((_,$)=>{const{__scopeScrollArea:_e,type:et="hover",dir:tt,scrollHideDelay:rt=600,...nt}=_,[it,st]=reactExports.useState(null),[at,ot]=reactExports.useState(null),[dt,ht]=reactExports.useState(null),[yt,vt]=reactExports.useState(null),[xt,wt]=reactExports.useState(null),[Et,At]=reactExports.useState(0),[jt,kt]=reactExports.useState(0),[Lt,Bt]=reactExports.useState(!1),[Gt,er]=reactExports.useState(!1),tr=useComposedRefs($,Mt=>st(Mt)),ar=useDirection(tt);return jsxRuntimeExports.jsx(ScrollAreaProvider,{scope:_e,type:et,dir:ar,scrollHideDelay:rt,scrollArea:it,viewport:at,onViewportChange:ot,content:dt,onContentChange:ht,scrollbarX:yt,onScrollbarXChange:vt,scrollbarXEnabled:Lt,onScrollbarXEnabledChange:Bt,scrollbarY:xt,onScrollbarYChange:wt,scrollbarYEnabled:Gt,onScrollbarYEnabledChange:er,onCornerWidthChange:At,onCornerHeightChange:kt,children:jsxRuntimeExports.jsx(Primitive.div,{dir:ar,...nt,ref:tr,style:{position:"relative","--radix-scroll-area-corner-width":Et+"px","--radix-scroll-area-corner-height":jt+"px",..._.style}})})});ScrollArea$1.displayName=SCROLL_AREA_NAME;var VIEWPORT_NAME$1="ScrollAreaViewport",ScrollAreaViewport=reactExports.forwardRef((_,$)=>{const{__scopeScrollArea:_e,children:et,asChild:tt,nonce:rt,...nt}=_,it=useScrollAreaContext(VIEWPORT_NAME$1,_e),st=reactExports.useRef(null),at=useComposedRefs($,st,it.onViewportChange);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:rt}),jsxRuntimeExports.jsx(Primitive.div,{"data-radix-scroll-area-viewport":"",...nt,asChild:tt,ref:at,style:{overflowX:it.scrollbarXEnabled?"scroll":"hidden",overflowY:it.scrollbarYEnabled?"scroll":"hidden",..._.style},children:getSubtree({asChild:tt,children:et},ot=>jsxRuntimeExports.jsx("div",{"data-radix-scroll-area-content":"",ref:it.onContentChange,style:{minWidth:it.scrollbarXEnabled?"fit-content":void 0},children:ot}))})]})});ScrollAreaViewport.displayName=VIEWPORT_NAME$1;var SCROLLBAR_NAME="ScrollAreaScrollbar",ScrollAreaScrollbar=reactExports.forwardRef((_,$)=>{const{forceMount:_e,...et}=_,tt=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),{onScrollbarXEnabledChange:rt,onScrollbarYEnabledChange:nt}=tt,it=_.orientation==="horizontal";return reactExports.useEffect(()=>(it?rt(!0):nt(!0),()=>{it?rt(!1):nt(!1)}),[it,rt,nt]),tt.type==="hover"?jsxRuntimeExports.jsx(ScrollAreaScrollbarHover,{...et,ref:$,forceMount:_e}):tt.type==="scroll"?jsxRuntimeExports.jsx(ScrollAreaScrollbarScroll,{...et,ref:$,forceMount:_e}):tt.type==="auto"?jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{...et,ref:$,forceMount:_e}):tt.type==="always"?jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{...et,ref:$}):null});ScrollAreaScrollbar.displayName=SCROLLBAR_NAME;var ScrollAreaScrollbarHover=reactExports.forwardRef((_,$)=>{const{forceMount:_e,...et}=_,tt=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),[rt,nt]=reactExports.useState(!1);return reactExports.useEffect(()=>{const it=tt.scrollArea;let st=0;if(it){const at=()=>{window.clearTimeout(st),nt(!0)},ot=()=>{st=window.setTimeout(()=>nt(!1),tt.scrollHideDelay)};return it.addEventListener("pointerenter",at),it.addEventListener("pointerleave",ot),()=>{window.clearTimeout(st),it.removeEventListener("pointerenter",at),it.removeEventListener("pointerleave",ot)}}},[tt.scrollArea,tt.scrollHideDelay]),jsxRuntimeExports.jsx(Presence,{present:_e||rt,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{"data-state":rt?"visible":"hidden",...et,ref:$})})}),ScrollAreaScrollbarScroll=reactExports.forwardRef((_,$)=>{const{forceMount:_e,...et}=_,tt=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),rt=_.orientation==="horizontal",nt=useDebounceCallback(()=>st("SCROLL_END"),100),[it,st]=useStateMachine("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return reactExports.useEffect(()=>{if(it==="idle"){const at=window.setTimeout(()=>st("HIDE"),tt.scrollHideDelay);return()=>window.clearTimeout(at)}},[it,tt.scrollHideDelay,st]),reactExports.useEffect(()=>{const at=tt.viewport,ot=rt?"scrollLeft":"scrollTop";if(at){let dt=at[ot];const ht=()=>{const yt=at[ot];dt!==yt&&(st("SCROLL"),nt()),dt=yt};return at.addEventListener("scroll",ht),()=>at.removeEventListener("scroll",ht)}},[tt.viewport,rt,st,nt]),jsxRuntimeExports.jsx(Presence,{present:_e||it!=="hidden",children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":it==="hidden"?"hidden":"visible",...et,ref:$,onPointerEnter:composeEventHandlers(_.onPointerEnter,()=>st("POINTER_ENTER")),onPointerLeave:composeEventHandlers(_.onPointerLeave,()=>st("POINTER_LEAVE"))})})}),ScrollAreaScrollbarAuto=reactExports.forwardRef((_,$)=>{const _e=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),{forceMount:et,...tt}=_,[rt,nt]=reactExports.useState(!1),it=_.orientation==="horizontal",st=useDebounceCallback(()=>{if(_e.viewport){const at=_e.viewport.offsetWidth<_e.viewport.scrollWidth,ot=_e.viewport.offsetHeight<_e.viewport.scrollHeight;nt(it?at:ot)}},10);return useResizeObserver(_e.viewport,st),useResizeObserver(_e.content,st),jsxRuntimeExports.jsx(Presence,{present:et||rt,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":rt?"visible":"hidden",...tt,ref:$})})}),ScrollAreaScrollbarVisible=reactExports.forwardRef((_,$)=>{const{orientation:_e="vertical",...et}=_,tt=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),rt=reactExports.useRef(null),nt=reactExports.useRef(0),[it,st]=reactExports.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),at=getThumbRatio(it.viewport,it.content),ot={...et,sizes:it,onSizesChange:st,hasThumb:at>0&&at<1,onThumbChange:ht=>rt.current=ht,onThumbPointerUp:()=>nt.current=0,onThumbPointerDown:ht=>nt.current=ht};function dt(ht,yt){return getScrollPositionFromPointer(ht,nt.current,it,yt)}return _e==="horizontal"?jsxRuntimeExports.jsx(ScrollAreaScrollbarX,{...ot,ref:$,onThumbPositionChange:()=>{if(tt.viewport&&rt.current){const ht=tt.viewport.scrollLeft,yt=getThumbOffsetFromScroll(ht,it,tt.dir);rt.current.style.transform=`translate3d(${yt}px, 0, 0)`}},onWheelScroll:ht=>{tt.viewport&&(tt.viewport.scrollLeft=ht)},onDragScroll:ht=>{tt.viewport&&(tt.viewport.scrollLeft=dt(ht,tt.dir))}}):_e==="vertical"?jsxRuntimeExports.jsx(ScrollAreaScrollbarY,{...ot,ref:$,onThumbPositionChange:()=>{if(tt.viewport&&rt.current){const ht=tt.viewport.scrollTop,yt=getThumbOffsetFromScroll(ht,it);rt.current.style.transform=`translate3d(0, ${yt}px, 0)`}},onWheelScroll:ht=>{tt.viewport&&(tt.viewport.scrollTop=ht)},onDragScroll:ht=>{tt.viewport&&(tt.viewport.scrollTop=dt(ht))}}):null}),ScrollAreaScrollbarX=reactExports.forwardRef((_,$)=>{const{sizes:_e,onSizesChange:et,...tt}=_,rt=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),[nt,it]=reactExports.useState(),st=reactExports.useRef(null),at=useComposedRefs($,st,rt.onScrollbarXChange);return reactExports.useEffect(()=>{st.current&&it(getComputedStyle(st.current))},[st]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"horizontal",...tt,ref:at,sizes:_e,style:{bottom:0,left:rt.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:rt.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":getThumbSize(_e)+"px",..._.style},onThumbPointerDown:ot=>_.onThumbPointerDown(ot.x),onDragScroll:ot=>_.onDragScroll(ot.x),onWheelScroll:(ot,dt)=>{if(rt.viewport){const ht=rt.viewport.scrollLeft+ot.deltaX;_.onWheelScroll(ht),isScrollingWithinScrollbarBounds(ht,dt)&&ot.preventDefault()}},onResize:()=>{st.current&&rt.viewport&&nt&&et({content:rt.viewport.scrollWidth,viewport:rt.viewport.offsetWidth,scrollbar:{size:st.current.clientWidth,paddingStart:toInt(nt.paddingLeft),paddingEnd:toInt(nt.paddingRight)}})}})}),ScrollAreaScrollbarY=reactExports.forwardRef((_,$)=>{const{sizes:_e,onSizesChange:et,...tt}=_,rt=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),[nt,it]=reactExports.useState(),st=reactExports.useRef(null),at=useComposedRefs($,st,rt.onScrollbarYChange);return reactExports.useEffect(()=>{st.current&&it(getComputedStyle(st.current))},[st]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"vertical",...tt,ref:at,sizes:_e,style:{top:0,right:rt.dir==="ltr"?0:void 0,left:rt.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":getThumbSize(_e)+"px",..._.style},onThumbPointerDown:ot=>_.onThumbPointerDown(ot.y),onDragScroll:ot=>_.onDragScroll(ot.y),onWheelScroll:(ot,dt)=>{if(rt.viewport){const ht=rt.viewport.scrollTop+ot.deltaY;_.onWheelScroll(ht),isScrollingWithinScrollbarBounds(ht,dt)&&ot.preventDefault()}},onResize:()=>{st.current&&rt.viewport&&nt&&et({content:rt.viewport.scrollHeight,viewport:rt.viewport.offsetHeight,scrollbar:{size:st.current.clientHeight,paddingStart:toInt(nt.paddingTop),paddingEnd:toInt(nt.paddingBottom)}})}})}),[ScrollbarProvider,useScrollbarContext]=createScrollAreaContext(SCROLLBAR_NAME),ScrollAreaScrollbarImpl=reactExports.forwardRef((_,$)=>{const{__scopeScrollArea:_e,sizes:et,hasThumb:tt,onThumbChange:rt,onThumbPointerUp:nt,onThumbPointerDown:it,onThumbPositionChange:st,onDragScroll:at,onWheelScroll:ot,onResize:dt,...ht}=_,yt=useScrollAreaContext(SCROLLBAR_NAME,_e),[vt,xt]=reactExports.useState(null),wt=useComposedRefs($,tr=>xt(tr)),Et=reactExports.useRef(null),At=reactExports.useRef(""),jt=yt.viewport,kt=et.content-et.viewport,Lt=useCallbackRef$1(ot),Bt=useCallbackRef$1(st),Gt=useDebounceCallback(dt,10);function er(tr){if(Et.current){const ar=tr.clientX-Et.current.left,Mt=tr.clientY-Et.current.top;at({x:ar,y:Mt})}}return reactExports.useEffect(()=>{const tr=ar=>{const Mt=ar.target;(vt==null?void 0:vt.contains(Mt))&&Lt(ar,kt)};return document.addEventListener("wheel",tr,{passive:!1}),()=>document.removeEventListener("wheel",tr,{passive:!1})},[jt,vt,kt,Lt]),reactExports.useEffect(Bt,[et,Bt]),useResizeObserver(vt,Gt),useResizeObserver(yt.content,Gt),jsxRuntimeExports.jsx(ScrollbarProvider,{scope:_e,scrollbar:vt,hasThumb:tt,onThumbChange:useCallbackRef$1(rt),onThumbPointerUp:useCallbackRef$1(nt),onThumbPositionChange:Bt,onThumbPointerDown:useCallbackRef$1(it),children:jsxRuntimeExports.jsx(Primitive.div,{...ht,ref:wt,style:{position:"absolute",...ht.style},onPointerDown:composeEventHandlers(_.onPointerDown,tr=>{tr.button===0&&(tr.target.setPointerCapture(tr.pointerId),Et.current=vt.getBoundingClientRect(),At.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",yt.viewport&&(yt.viewport.style.scrollBehavior="auto"),er(tr))}),onPointerMove:composeEventHandlers(_.onPointerMove,er),onPointerUp:composeEventHandlers(_.onPointerUp,tr=>{const ar=tr.target;ar.hasPointerCapture(tr.pointerId)&&ar.releasePointerCapture(tr.pointerId),document.body.style.webkitUserSelect=At.current,yt.viewport&&(yt.viewport.style.scrollBehavior=""),Et.current=null})})})}),THUMB_NAME$2="ScrollAreaThumb",ScrollAreaThumb=reactExports.forwardRef((_,$)=>{const{forceMount:_e,...et}=_,tt=useScrollbarContext(THUMB_NAME$2,_.__scopeScrollArea);return jsxRuntimeExports.jsx(Presence,{present:_e||tt.hasThumb,children:jsxRuntimeExports.jsx(ScrollAreaThumbImpl,{ref:$,...et})})}),ScrollAreaThumbImpl=reactExports.forwardRef((_,$)=>{const{__scopeScrollArea:_e,style:et,...tt}=_,rt=useScrollAreaContext(THUMB_NAME$2,_e),nt=useScrollbarContext(THUMB_NAME$2,_e),{onThumbPositionChange:it}=nt,st=useComposedRefs($,dt=>nt.onThumbChange(dt)),at=reactExports.useRef(),ot=useDebounceCallback(()=>{at.current&&(at.current(),at.current=void 0)},100);return reactExports.useEffect(()=>{const dt=rt.viewport;if(dt){const ht=()=>{if(ot(),!at.current){const yt=addUnlinkedScrollListener(dt,it);at.current=yt,it()}};return it(),dt.addEventListener("scroll",ht),()=>dt.removeEventListener("scroll",ht)}},[rt.viewport,ot,it]),jsxRuntimeExports.jsx(Primitive.div,{"data-state":nt.hasThumb?"visible":"hidden",...tt,ref:st,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...et},onPointerDownCapture:composeEventHandlers(_.onPointerDownCapture,dt=>{const yt=dt.target.getBoundingClientRect(),vt=dt.clientX-yt.left,xt=dt.clientY-yt.top;nt.onThumbPointerDown({x:vt,y:xt})}),onPointerUp:composeEventHandlers(_.onPointerUp,nt.onThumbPointerUp)})});ScrollAreaThumb.displayName=THUMB_NAME$2;var CORNER_NAME="ScrollAreaCorner",ScrollAreaCorner=reactExports.forwardRef((_,$)=>{const _e=useScrollAreaContext(CORNER_NAME,_.__scopeScrollArea),et=!!(_e.scrollbarX&&_e.scrollbarY);return _e.type!=="scroll"&&et?jsxRuntimeExports.jsx(ScrollAreaCornerImpl,{..._,ref:$}):null});ScrollAreaCorner.displayName=CORNER_NAME;var ScrollAreaCornerImpl=reactExports.forwardRef((_,$)=>{const{__scopeScrollArea:_e,...et}=_,tt=useScrollAreaContext(CORNER_NAME,_e),[rt,nt]=reactExports.useState(0),[it,st]=reactExports.useState(0),at=!!(rt&&it);return useResizeObserver(tt.scrollbarX,()=>{var dt;const ot=((dt=tt.scrollbarX)==null?void 0:dt.offsetHeight)||0;tt.onCornerHeightChange(ot),st(ot)}),useResizeObserver(tt.scrollbarY,()=>{var dt;const ot=((dt=tt.scrollbarY)==null?void 0:dt.offsetWidth)||0;tt.onCornerWidthChange(ot),nt(ot)}),at?jsxRuntimeExports.jsx(Primitive.div,{...et,ref:$,style:{width:rt,height:it,position:"absolute",right:tt.dir==="ltr"?0:void 0,left:tt.dir==="rtl"?0:void 0,bottom:0,..._.style}}):null});function toInt(_){return _?parseInt(_,10):0}function getThumbRatio(_,$){const _e=_/$;return isNaN(_e)?0:_e}function getThumbSize(_){const $=getThumbRatio(_.viewport,_.content),_e=_.scrollbar.paddingStart+_.scrollbar.paddingEnd,et=(_.scrollbar.size-_e)*$;return Math.max(et,18)}function getScrollPositionFromPointer(_,$,_e,et="ltr"){const tt=getThumbSize(_e),rt=tt/2,nt=$||rt,it=tt-nt,st=_e.scrollbar.paddingStart+nt,at=_e.scrollbar.size-_e.scrollbar.paddingEnd-it,ot=_e.content-_e.viewport,dt=et==="ltr"?[0,ot]:[ot*-1,0];return linearScale$1([st,at],dt)(_)}function getThumbOffsetFromScroll(_,$,_e="ltr"){const et=getThumbSize($),tt=$.scrollbar.paddingStart+$.scrollbar.paddingEnd,rt=$.scrollbar.size-tt,nt=$.content-$.viewport,it=rt-et,st=_e==="ltr"?[0,nt]:[nt*-1,0],at=clamp$1(_,st);return linearScale$1([0,nt],[0,it])(at)}function linearScale$1(_,$){return _e=>{if(_[0]===_[1]||$[0]===$[1])return $[0];const et=($[1]-$[0])/(_[1]-_[0]);return $[0]+et*(_e-_[0])}}function isScrollingWithinScrollbarBounds(_,$){return _>0&&_<$}var addUnlinkedScrollListener=(_,$=()=>{})=>{let _e={left:_.scrollLeft,top:_.scrollTop},et=0;return function tt(){const rt={left:_.scrollLeft,top:_.scrollTop},nt=_e.left!==rt.left,it=_e.top!==rt.top;(nt||it)&&$(),_e=rt,et=window.requestAnimationFrame(tt)}(),()=>window.cancelAnimationFrame(et)};function useDebounceCallback(_,$){const _e=useCallbackRef$1(_),et=reactExports.useRef(0);return reactExports.useEffect(()=>()=>window.clearTimeout(et.current),[]),reactExports.useCallback(()=>{window.clearTimeout(et.current),et.current=window.setTimeout(_e,$)},[_e,$])}function useResizeObserver(_,$){const _e=useCallbackRef$1($);useLayoutEffect2(()=>{let et=0;if(_){const tt=new ResizeObserver(()=>{cancelAnimationFrame(et),et=window.requestAnimationFrame(_e)});return tt.observe(_),()=>{window.cancelAnimationFrame(et),tt.unobserve(_)}}},[_,_e])}function getSubtree(_,$){const{asChild:_e,children:et}=_;if(!_e)return typeof $=="function"?$(et):$;const tt=reactExports.Children.only(et);return reactExports.cloneElement(tt,{children:typeof $=="function"?$(tt.props.children):$})}var Root$6=ScrollArea$1,Viewport$1=ScrollAreaViewport,Corner=ScrollAreaCorner;const ScrollArea=reactExports.forwardRef(({className:_,children:$,..._e},et)=>jsxRuntimeExports.jsxs(Root$6,{ref:et,className:cn("relative overflow-hidden",_),..._e,children:[jsxRuntimeExports.jsx(Viewport$1,{className:"h-full w-full rounded-[inherit]",children:$}),jsxRuntimeExports.jsx(ScrollBar,{}),jsxRuntimeExports.jsx(Corner,{})]}));ScrollArea.displayName=Root$6.displayName;const ScrollBar=reactExports.forwardRef(({className:_,orientation:$="vertical",..._e},et)=>jsxRuntimeExports.jsx(ScrollAreaScrollbar,{ref:et,orientation:$,className:cn("flex touch-none select-none transition-colors",$==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",$==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",_),..._e,children:jsxRuntimeExports.jsx(ScrollAreaThumb,{className:"relative flex-1 rounded-full bg-border"})}));ScrollBar.displayName=ScrollAreaScrollbar.displayName;const mockNotifications=[{id:"1",title:"Trade executed",description:"Your BTC/USDT buy order has been executed successfully.",type:"success",read:!1,timestamp:new Date(Date.now()-15*6e4)},{id:"2",title:"Price alert",description:"ETH/USDT has dropped below your alert threshold of $2,800.",type:"warning",read:!1,timestamp:new Date(Date.now()-45*6e4)},{id:"3",title:"Strategy activated",description:'Your "BTC Momentum" strategy has been activated.',type:"info",read:!0,timestamp:new Date(Date.now()-120*6e4)},{id:"4",title:"API connection issue",description:"There was a problem connecting to the exchange API.",type:"error",read:!0,timestamp:new Date(Date.now()-240*6e4)}],NotificationsDialog=({open:_,onOpenChange:$})=>{const[_e,et]=React.useState(mockNotifications),tt=st=>{switch(st){case"success":return jsxRuntimeExports.jsx(CircleCheckBig,{className:"h-5 w-5 text-green-500"});case"warning":return jsxRuntimeExports.jsx(TriangleAlert,{className:"h-5 w-5 text-yellow-500"});case"error":return jsxRuntimeExports.jsx(CircleX,{className:"h-5 w-5 text-red-500"});default:return jsxRuntimeExports.jsx(Bell,{className:"h-5 w-5 text-blue-500"})}},rt=st=>{const at=st.getHours(),ot=st.getMinutes();return`${at}:${ot<10?"0"+ot:ot}`},nt=()=>{et(_e.map(st=>({...st,read:!0})))},it=_e.filter(st=>!st.read).length;return jsxRuntimeExports.jsx(Dialog,{open:_,onOpenChange:$,children:jsxRuntimeExports.jsxs(DialogContent,{className:"sm:max-w-md",children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Notifications"}),jsxRuntimeExports.jsxs(DialogDescription,{children:["You have ",it," unread notification",it!==1?"s":""]})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-end mb-2",children:jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:nt,children:"Mark all as read"})}),jsxRuntimeExports.jsx(ScrollArea,{className:"max-h-[60vh]",children:jsxRuntimeExports.jsx("div",{className:"space-y-2",children:_e.length>0?_e.map(st=>jsxRuntimeExports.jsx("div",{className:`p-3 border rounded-md ${st.read?"bg-background":"bg-muted/30"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[tt(st.type),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium",children:st.title}),jsxRuntimeExports.jsx("span",{className:"text-xs text-muted-foreground",children:rt(st.timestamp)})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:st.description})]})]})},st.id)):jsxRuntimeExports.jsx("div",{className:"text-center py-6 text-muted-foreground",children:"No notifications"})})})]})})};function createContextScope$1(_,$=[]){let _e=[];function et(rt,nt){const it=reactExports.createContext(nt),st=_e.length;_e=[..._e,nt];function at(dt){const{scope:ht,children:yt,...vt}=dt,xt=(ht==null?void 0:ht[_][st])||it,wt=reactExports.useMemo(()=>vt,Object.values(vt));return jsxRuntimeExports.jsx(xt.Provider,{value:wt,children:yt})}function ot(dt,ht){const yt=(ht==null?void 0:ht[_][st])||it,vt=reactExports.useContext(yt);if(vt)return vt;if(nt!==void 0)return nt;throw new Error(`\`${dt}\` must be used within \`${rt}\``)}return at.displayName=rt+"Provider",[at,ot]}const tt=()=>{const rt=_e.map(nt=>reactExports.createContext(nt));return function(it){const st=(it==null?void 0:it[_])||rt;return reactExports.useMemo(()=>({[`__scope${_}`]:{...it,[_]:st}}),[it,st])}};return tt.scopeName=_,[et,composeContextScopes$1(tt,...$)]}function composeContextScopes$1(..._){const $=_[0];if(_.length===1)return $;const _e=()=>{const et=_.map(tt=>({useScope:tt(),scopeName:tt.scopeName}));return function(rt){const nt=et.reduce((it,{useScope:st,scopeName:at})=>{const dt=st(rt)[`__scope${at}`];return{...it,...dt}},{});return reactExports.useMemo(()=>({[`__scope${$.scopeName}`]:nt}),[nt])}};return _e.scopeName=$.scopeName,_e}var ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",EVENT_OPTIONS={bubbles:!1,cancelable:!0},GROUP_NAME$3="RovingFocusGroup",[Collection$3,useCollection$3,createCollectionScope$3]=createCollection(GROUP_NAME$3),[createRovingFocusGroupContext,createRovingFocusGroupScope]=createContextScope$1(GROUP_NAME$3,[createCollectionScope$3]),[RovingFocusProvider,useRovingFocusContext]=createRovingFocusGroupContext(GROUP_NAME$3),RovingFocusGroup=reactExports.forwardRef((_,$)=>jsxRuntimeExports.jsx(Collection$3.Provider,{scope:_.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(Collection$3.Slot,{scope:_.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(RovingFocusGroupImpl,{..._,ref:$})})}));RovingFocusGroup.displayName=GROUP_NAME$3;var RovingFocusGroupImpl=reactExports.forwardRef((_,$)=>{const{__scopeRovingFocusGroup:_e,orientation:et,loop:tt=!1,dir:rt,currentTabStopId:nt,defaultCurrentTabStopId:it,onCurrentTabStopIdChange:st,onEntryFocus:at,preventScrollOnEntryFocus:ot=!1,...dt}=_,ht=reactExports.useRef(null),yt=useComposedRefs($,ht),vt=useDirection(rt),[xt=null,wt]=useControllableState({prop:nt,defaultProp:it,onChange:st}),[Et,At]=reactExports.useState(!1),jt=useCallbackRef$1(at),kt=useCollection$3(_e),Lt=reactExports.useRef(!1),[Bt,Gt]=reactExports.useState(0);return reactExports.useEffect(()=>{const er=ht.current;if(er)return er.addEventListener(ENTRY_FOCUS,jt),()=>er.removeEventListener(ENTRY_FOCUS,jt)},[jt]),jsxRuntimeExports.jsx(RovingFocusProvider,{scope:_e,orientation:et,dir:vt,loop:tt,currentTabStopId:xt,onItemFocus:reactExports.useCallback(er=>wt(er),[wt]),onItemShiftTab:reactExports.useCallback(()=>At(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>Gt(er=>er+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>Gt(er=>er-1),[]),children:jsxRuntimeExports.jsx(Primitive.div,{tabIndex:Et||Bt===0?-1:0,"data-orientation":et,...dt,ref:yt,style:{outline:"none",..._.style},onMouseDown:composeEventHandlers(_.onMouseDown,()=>{Lt.current=!0}),onFocus:composeEventHandlers(_.onFocus,er=>{const tr=!Lt.current;if(er.target===er.currentTarget&&tr&&!Et){const ar=new CustomEvent(ENTRY_FOCUS,EVENT_OPTIONS);if(er.currentTarget.dispatchEvent(ar),!ar.defaultPrevented){const Mt=kt().filter(St=>St.focusable),lt=Mt.find(St=>St.active),mt=Mt.find(St=>St.id===xt),bt=[lt,mt,...Mt].filter(Boolean).map(St=>St.ref.current);focusFirst$1(bt,ot)}}Lt.current=!1}),onBlur:composeEventHandlers(_.onBlur,()=>At(!1))})})}),ITEM_NAME$3="RovingFocusGroupItem",RovingFocusGroupItem=reactExports.forwardRef((_,$)=>{const{__scopeRovingFocusGroup:_e,focusable:et=!0,active:tt=!1,tabStopId:rt,...nt}=_,it=useId(),st=rt||it,at=useRovingFocusContext(ITEM_NAME$3,_e),ot=at.currentTabStopId===st,dt=useCollection$3(_e),{onFocusableItemAdd:ht,onFocusableItemRemove:yt}=at;return reactExports.useEffect(()=>{if(et)return ht(),()=>yt()},[et,ht,yt]),jsxRuntimeExports.jsx(Collection$3.ItemSlot,{scope:_e,id:st,focusable:et,active:tt,children:jsxRuntimeExports.jsx(Primitive.span,{tabIndex:ot?0:-1,"data-orientation":at.orientation,...nt,ref:$,onMouseDown:composeEventHandlers(_.onMouseDown,vt=>{et?at.onItemFocus(st):vt.preventDefault()}),onFocus:composeEventHandlers(_.onFocus,()=>at.onItemFocus(st)),onKeyDown:composeEventHandlers(_.onKeyDown,vt=>{if(vt.key==="Tab"&&vt.shiftKey){at.onItemShiftTab();return}if(vt.target!==vt.currentTarget)return;const xt=getFocusIntent(vt,at.orientation,at.dir);if(xt!==void 0){if(vt.metaKey||vt.ctrlKey||vt.altKey||vt.shiftKey)return;vt.preventDefault();let Et=dt().filter(At=>At.focusable).map(At=>At.ref.current);if(xt==="last")Et.reverse();else if(xt==="prev"||xt==="next"){xt==="prev"&&Et.reverse();const At=Et.indexOf(vt.currentTarget);Et=at.loop?wrapArray$2(Et,At+1):Et.slice(At+1)}setTimeout(()=>focusFirst$1(Et))}})})})});RovingFocusGroupItem.displayName=ITEM_NAME$3;var MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function getDirectionAwareKey(_,$){return $!=="rtl"?_:_==="ArrowLeft"?"ArrowRight":_==="ArrowRight"?"ArrowLeft":_}function getFocusIntent(_,$,_e){const et=getDirectionAwareKey(_.key,_e);if(!($==="vertical"&&["ArrowLeft","ArrowRight"].includes(et))&&!($==="horizontal"&&["ArrowUp","ArrowDown"].includes(et)))return MAP_KEY_TO_FOCUS_INTENT[et]}function focusFirst$1(_,$=!1){const _e=document.activeElement;for(const et of _)if(et===_e||(et.focus({preventScroll:$}),document.activeElement!==_e))return}function wrapArray$2(_,$){return _.map((_e,et)=>_[($+et)%_.length])}var Root$5=RovingFocusGroup,Item$2=RovingFocusGroupItem,SELECTION_KEYS$1=["Enter"," "],FIRST_KEYS=["ArrowDown","PageUp","Home"],LAST_KEYS=["ArrowUp","PageDown","End"],FIRST_LAST_KEYS=[...FIRST_KEYS,...LAST_KEYS],SUB_OPEN_KEYS={ltr:[...SELECTION_KEYS$1,"ArrowRight"],rtl:[...SELECTION_KEYS$1,"ArrowLeft"]},SUB_CLOSE_KEYS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},MENU_NAME="Menu",[Collection$2,useCollection$2,createCollectionScope$2]=createCollection(MENU_NAME),[createMenuContext,createMenuScope]=createContextScope$3(MENU_NAME,[createCollectionScope$2,createPopperScope,createRovingFocusGroupScope]),usePopperScope$1=createPopperScope(),useRovingFocusGroupScope$1=createRovingFocusGroupScope(),[MenuProvider,useMenuContext]=createMenuContext(MENU_NAME),[MenuRootProvider,useMenuRootContext]=createMenuContext(MENU_NAME),Menu=_=>{const{__scopeMenu:$,open:_e=!1,children:et,dir:tt,onOpenChange:rt,modal:nt=!0}=_,it=usePopperScope$1($),[st,at]=reactExports.useState(null),ot=reactExports.useRef(!1),dt=useCallbackRef$1(rt),ht=useDirection(tt);return reactExports.useEffect(()=>{const yt=()=>{ot.current=!0,document.addEventListener("pointerdown",vt,{capture:!0,once:!0}),document.addEventListener("pointermove",vt,{capture:!0,once:!0})},vt=()=>ot.current=!1;return document.addEventListener("keydown",yt,{capture:!0}),()=>{document.removeEventListener("keydown",yt,{capture:!0}),document.removeEventListener("pointerdown",vt,{capture:!0}),document.removeEventListener("pointermove",vt,{capture:!0})}},[]),jsxRuntimeExports.jsx(Root2$3,{...it,children:jsxRuntimeExports.jsx(MenuProvider,{scope:$,open:_e,onOpenChange:dt,content:st,onContentChange:at,children:jsxRuntimeExports.jsx(MenuRootProvider,{scope:$,onClose:reactExports.useCallback(()=>dt(!1),[dt]),isUsingKeyboardRef:ot,dir:ht,modal:nt,children:et})})})};Menu.displayName=MENU_NAME;var ANCHOR_NAME="MenuAnchor",MenuAnchor=reactExports.forwardRef((_,$)=>{const{__scopeMenu:_e,...et}=_,tt=usePopperScope$1(_e);return jsxRuntimeExports.jsx(Anchor,{...tt,...et,ref:$})});MenuAnchor.displayName=ANCHOR_NAME;var PORTAL_NAME$2="MenuPortal",[PortalProvider,usePortalContext]=createMenuContext(PORTAL_NAME$2,{forceMount:void 0}),MenuPortal=_=>{const{__scopeMenu:$,forceMount:_e,children:et,container:tt}=_,rt=useMenuContext(PORTAL_NAME$2,$);return jsxRuntimeExports.jsx(PortalProvider,{scope:$,forceMount:_e,children:jsxRuntimeExports.jsx(Presence,{present:_e||rt.open,children:jsxRuntimeExports.jsx(Portal$3,{asChild:!0,container:tt,children:et})})})};MenuPortal.displayName=PORTAL_NAME$2;var CONTENT_NAME$3="MenuContent",[MenuContentProvider,useMenuContentContext]=createMenuContext(CONTENT_NAME$3),MenuContent=reactExports.forwardRef((_,$)=>{const _e=usePortalContext(CONTENT_NAME$3,_.__scopeMenu),{forceMount:et=_e.forceMount,...tt}=_,rt=useMenuContext(CONTENT_NAME$3,_.__scopeMenu),nt=useMenuRootContext(CONTENT_NAME$3,_.__scopeMenu);return jsxRuntimeExports.jsx(Collection$2.Provider,{scope:_.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:et||rt.open,children:jsxRuntimeExports.jsx(Collection$2.Slot,{scope:_.__scopeMenu,children:nt.modal?jsxRuntimeExports.jsx(MenuRootContentModal,{...tt,ref:$}):jsxRuntimeExports.jsx(MenuRootContentNonModal,{...tt,ref:$})})})})}),MenuRootContentModal=reactExports.forwardRef((_,$)=>{const _e=useMenuContext(CONTENT_NAME$3,_.__scopeMenu),et=reactExports.useRef(null),tt=useComposedRefs($,et);return reactExports.useEffect(()=>{const rt=et.current;if(rt)return hideOthers(rt)},[]),jsxRuntimeExports.jsx(MenuContentImpl,{..._,ref:tt,trapFocus:_e.open,disableOutsidePointerEvents:_e.open,disableOutsideScroll:!0,onFocusOutside:composeEventHandlers(_.onFocusOutside,rt=>rt.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>_e.onOpenChange(!1)})}),MenuRootContentNonModal=reactExports.forwardRef((_,$)=>{const _e=useMenuContext(CONTENT_NAME$3,_.__scopeMenu);return jsxRuntimeExports.jsx(MenuContentImpl,{..._,ref:$,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>_e.onOpenChange(!1)})}),MenuContentImpl=reactExports.forwardRef((_,$)=>{const{__scopeMenu:_e,loop:et=!1,trapFocus:tt,onOpenAutoFocus:rt,onCloseAutoFocus:nt,disableOutsidePointerEvents:it,onEntryFocus:st,onEscapeKeyDown:at,onPointerDownOutside:ot,onFocusOutside:dt,onInteractOutside:ht,onDismiss:yt,disableOutsideScroll:vt,...xt}=_,wt=useMenuContext(CONTENT_NAME$3,_e),Et=useMenuRootContext(CONTENT_NAME$3,_e),At=usePopperScope$1(_e),jt=useRovingFocusGroupScope$1(_e),kt=useCollection$2(_e),[Lt,Bt]=reactExports.useState(null),Gt=reactExports.useRef(null),er=useComposedRefs($,Gt,wt.onContentChange),tr=reactExports.useRef(0),ar=reactExports.useRef(""),Mt=reactExports.useRef(0),lt=reactExports.useRef(null),mt=reactExports.useRef("right"),gt=reactExports.useRef(0),bt=vt?ReactRemoveScroll:reactExports.Fragment,St=vt?{as:Slot,allowPinchZoom:!0}:void 0,Nt=Tt=>{var rr,fr;const pt=ar.current+Tt,Rt=kt().filter(dr=>!dr.disabled),zt=document.activeElement,Yt=(rr=Rt.find(dr=>dr.ref.current===zt))==null?void 0:rr.textValue,ir=Rt.map(dr=>dr.textValue),ur=getNextMatch(ir,pt,Yt),cr=(fr=Rt.find(dr=>dr.textValue===ur))==null?void 0:fr.ref.current;(function dr(gr){ar.current=gr,window.clearTimeout(tr.current),gr!==""&&(tr.current=window.setTimeout(()=>dr(""),1e3))})(pt),cr&&setTimeout(()=>cr.focus())};reactExports.useEffect(()=>()=>window.clearTimeout(tr.current),[]),useFocusGuards();const Pt=reactExports.useCallback(Tt=>{var Rt,zt;return mt.current===((Rt=lt.current)==null?void 0:Rt.side)&&isPointerInGraceArea(Tt,(zt=lt.current)==null?void 0:zt.area)},[]);return jsxRuntimeExports.jsx(MenuContentProvider,{scope:_e,searchRef:ar,onItemEnter:reactExports.useCallback(Tt=>{Pt(Tt)&&Tt.preventDefault()},[Pt]),onItemLeave:reactExports.useCallback(Tt=>{var pt;Pt(Tt)||((pt=Gt.current)==null||pt.focus(),Bt(null))},[Pt]),onTriggerLeave:reactExports.useCallback(Tt=>{Pt(Tt)&&Tt.preventDefault()},[Pt]),pointerGraceTimerRef:Mt,onPointerGraceIntentChange:reactExports.useCallback(Tt=>{lt.current=Tt},[]),children:jsxRuntimeExports.jsx(bt,{...St,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:tt,onMountAutoFocus:composeEventHandlers(rt,Tt=>{var pt;Tt.preventDefault(),(pt=Gt.current)==null||pt.focus({preventScroll:!0})}),onUnmountAutoFocus:nt,children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:it,onEscapeKeyDown:at,onPointerDownOutside:ot,onFocusOutside:dt,onInteractOutside:ht,onDismiss:yt,children:jsxRuntimeExports.jsx(Root$5,{asChild:!0,...jt,dir:Et.dir,orientation:"vertical",loop:et,currentTabStopId:Lt,onCurrentTabStopIdChange:Bt,onEntryFocus:composeEventHandlers(st,Tt=>{Et.isUsingKeyboardRef.current||Tt.preventDefault()}),preventScrollOnEntryFocus:!0,children:jsxRuntimeExports.jsx(Content$2,{role:"menu","aria-orientation":"vertical","data-state":getOpenState(wt.open),"data-radix-menu-content":"",dir:Et.dir,...At,...xt,ref:er,style:{outline:"none",...xt.style},onKeyDown:composeEventHandlers(xt.onKeyDown,Tt=>{const Rt=Tt.target.closest("[data-radix-menu-content]")===Tt.currentTarget,zt=Tt.ctrlKey||Tt.altKey||Tt.metaKey,Yt=Tt.key.length===1;Rt&&(Tt.key==="Tab"&&Tt.preventDefault(),!zt&&Yt&&Nt(Tt.key));const ir=Gt.current;if(Tt.target!==ir||!FIRST_LAST_KEYS.includes(Tt.key))return;Tt.preventDefault();const cr=kt().filter(rr=>!rr.disabled).map(rr=>rr.ref.current);LAST_KEYS.includes(Tt.key)&&cr.reverse(),focusFirst(cr)}),onBlur:composeEventHandlers(_.onBlur,Tt=>{Tt.currentTarget.contains(Tt.target)||(window.clearTimeout(tr.current),ar.current="")}),onPointerMove:composeEventHandlers(_.onPointerMove,whenMouse(Tt=>{const pt=Tt.target,Rt=gt.current!==Tt.clientX;if(Tt.currentTarget.contains(pt)&&Rt){const zt=Tt.clientX>gt.current?"right":"left";mt.current=zt,gt.current=Tt.clientX}}))})})})})})})});MenuContent.displayName=CONTENT_NAME$3;var GROUP_NAME$2="MenuGroup",MenuGroup=reactExports.forwardRef((_,$)=>{const{__scopeMenu:_e,...et}=_;return jsxRuntimeExports.jsx(Primitive.div,{role:"group",...et,ref:$})});MenuGroup.displayName=GROUP_NAME$2;var LABEL_NAME$2="MenuLabel",MenuLabel=reactExports.forwardRef((_,$)=>{const{__scopeMenu:_e,...et}=_;return jsxRuntimeExports.jsx(Primitive.div,{...et,ref:$})});MenuLabel.displayName=LABEL_NAME$2;var ITEM_NAME$2="MenuItem",ITEM_SELECT="menu.itemSelect",MenuItem=reactExports.forwardRef((_,$)=>{const{disabled:_e=!1,onSelect:et,...tt}=_,rt=reactExports.useRef(null),nt=useMenuRootContext(ITEM_NAME$2,_.__scopeMenu),it=useMenuContentContext(ITEM_NAME$2,_.__scopeMenu),st=useComposedRefs($,rt),at=reactExports.useRef(!1),ot=()=>{const dt=rt.current;if(!_e&&dt){const ht=new CustomEvent(ITEM_SELECT,{bubbles:!0,cancelable:!0});dt.addEventListener(ITEM_SELECT,yt=>et==null?void 0:et(yt),{once:!0}),dispatchDiscreteCustomEvent(dt,ht),ht.defaultPrevented?at.current=!1:nt.onClose()}};return jsxRuntimeExports.jsx(MenuItemImpl,{...tt,ref:st,disabled:_e,onClick:composeEventHandlers(_.onClick,ot),onPointerDown:dt=>{var ht;(ht=_.onPointerDown)==null||ht.call(_,dt),at.current=!0},onPointerUp:composeEventHandlers(_.onPointerUp,dt=>{var ht;at.current||(ht=dt.currentTarget)==null||ht.click()}),onKeyDown:composeEventHandlers(_.onKeyDown,dt=>{const ht=it.searchRef.current!=="";_e||ht&&dt.key===" "||SELECTION_KEYS$1.includes(dt.key)&&(dt.currentTarget.click(),dt.preventDefault())})})});MenuItem.displayName=ITEM_NAME$2;var MenuItemImpl=reactExports.forwardRef((_,$)=>{const{__scopeMenu:_e,disabled:et=!1,textValue:tt,...rt}=_,nt=useMenuContentContext(ITEM_NAME$2,_e),it=useRovingFocusGroupScope$1(_e),st=reactExports.useRef(null),at=useComposedRefs($,st),[ot,dt]=reactExports.useState(!1),[ht,yt]=reactExports.useState("");return reactExports.useEffect(()=>{const vt=st.current;vt&&yt((vt.textContent??"").trim())},[rt.children]),jsxRuntimeExports.jsx(Collection$2.ItemSlot,{scope:_e,disabled:et,textValue:tt??ht,children:jsxRuntimeExports.jsx(Item$2,{asChild:!0,...it,focusable:!et,children:jsxRuntimeExports.jsx(Primitive.div,{role:"menuitem","data-highlighted":ot?"":void 0,"aria-disabled":et||void 0,"data-disabled":et?"":void 0,...rt,ref:at,onPointerMove:composeEventHandlers(_.onPointerMove,whenMouse(vt=>{et?nt.onItemLeave(vt):(nt.onItemEnter(vt),vt.defaultPrevented||vt.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:composeEventHandlers(_.onPointerLeave,whenMouse(vt=>nt.onItemLeave(vt))),onFocus:composeEventHandlers(_.onFocus,()=>dt(!0)),onBlur:composeEventHandlers(_.onBlur,()=>dt(!1))})})})}),CHECKBOX_ITEM_NAME$1="MenuCheckboxItem",MenuCheckboxItem=reactExports.forwardRef((_,$)=>{const{checked:_e=!1,onCheckedChange:et,...tt}=_;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:_.__scopeMenu,checked:_e,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemcheckbox","aria-checked":isIndeterminate(_e)?"mixed":_e,...tt,ref:$,"data-state":getCheckedState(_e),onSelect:composeEventHandlers(tt.onSelect,()=>et==null?void 0:et(isIndeterminate(_e)?!0:!_e),{checkForDefaultPrevented:!1})})})});MenuCheckboxItem.displayName=CHECKBOX_ITEM_NAME$1;var RADIO_GROUP_NAME$1="MenuRadioGroup",[RadioGroupProvider,useRadioGroupContext]=createMenuContext(RADIO_GROUP_NAME$1,{value:void 0,onValueChange:()=>{}}),MenuRadioGroup=reactExports.forwardRef((_,$)=>{const{value:_e,onValueChange:et,...tt}=_,rt=useCallbackRef$1(et);return jsxRuntimeExports.jsx(RadioGroupProvider,{scope:_.__scopeMenu,value:_e,onValueChange:rt,children:jsxRuntimeExports.jsx(MenuGroup,{...tt,ref:$})})});MenuRadioGroup.displayName=RADIO_GROUP_NAME$1;var RADIO_ITEM_NAME$1="MenuRadioItem",MenuRadioItem=reactExports.forwardRef((_,$)=>{const{value:_e,...et}=_,tt=useRadioGroupContext(RADIO_ITEM_NAME$1,_.__scopeMenu),rt=_e===tt.value;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:_.__scopeMenu,checked:rt,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemradio","aria-checked":rt,...et,ref:$,"data-state":getCheckedState(rt),onSelect:composeEventHandlers(et.onSelect,()=>{var nt;return(nt=tt.onValueChange)==null?void 0:nt.call(tt,_e)},{checkForDefaultPrevented:!1})})})});MenuRadioItem.displayName=RADIO_ITEM_NAME$1;var ITEM_INDICATOR_NAME$1="MenuItemIndicator",[ItemIndicatorProvider,useItemIndicatorContext]=createMenuContext(ITEM_INDICATOR_NAME$1,{checked:!1}),MenuItemIndicator=reactExports.forwardRef((_,$)=>{const{__scopeMenu:_e,forceMount:et,...tt}=_,rt=useItemIndicatorContext(ITEM_INDICATOR_NAME$1,_e);return jsxRuntimeExports.jsx(Presence,{present:et||isIndeterminate(rt.checked)||rt.checked===!0,children:jsxRuntimeExports.jsx(Primitive.span,{...tt,ref:$,"data-state":getCheckedState(rt.checked)})})});MenuItemIndicator.displayName=ITEM_INDICATOR_NAME$1;var SEPARATOR_NAME$2="MenuSeparator",MenuSeparator=reactExports.forwardRef((_,$)=>{const{__scopeMenu:_e,...et}=_;return jsxRuntimeExports.jsx(Primitive.div,{role:"separator","aria-orientation":"horizontal",...et,ref:$})});MenuSeparator.displayName=SEPARATOR_NAME$2;var ARROW_NAME$2="MenuArrow",MenuArrow=reactExports.forwardRef((_,$)=>{const{__scopeMenu:_e,...et}=_,tt=usePopperScope$1(_e);return jsxRuntimeExports.jsx(Arrow,{...tt,...et,ref:$})});MenuArrow.displayName=ARROW_NAME$2;var SUB_NAME="MenuSub",[MenuSubProvider,useMenuSubContext]=createMenuContext(SUB_NAME),SUB_TRIGGER_NAME$1="MenuSubTrigger",MenuSubTrigger=reactExports.forwardRef((_,$)=>{const _e=useMenuContext(SUB_TRIGGER_NAME$1,_.__scopeMenu),et=useMenuRootContext(SUB_TRIGGER_NAME$1,_.__scopeMenu),tt=useMenuSubContext(SUB_TRIGGER_NAME$1,_.__scopeMenu),rt=useMenuContentContext(SUB_TRIGGER_NAME$1,_.__scopeMenu),nt=reactExports.useRef(null),{pointerGraceTimerRef:it,onPointerGraceIntentChange:st}=rt,at={__scopeMenu:_.__scopeMenu},ot=reactExports.useCallback(()=>{nt.current&&window.clearTimeout(nt.current),nt.current=null},[]);return reactExports.useEffect(()=>ot,[ot]),reactExports.useEffect(()=>{const dt=it.current;return()=>{window.clearTimeout(dt),st(null)}},[it,st]),jsxRuntimeExports.jsx(MenuAnchor,{asChild:!0,...at,children:jsxRuntimeExports.jsx(MenuItemImpl,{id:tt.triggerId,"aria-haspopup":"menu","aria-expanded":_e.open,"aria-controls":tt.contentId,"data-state":getOpenState(_e.open),..._,ref:composeRefs($,tt.onTriggerChange),onClick:dt=>{var ht;(ht=_.onClick)==null||ht.call(_,dt),!(_.disabled||dt.defaultPrevented)&&(dt.currentTarget.focus(),_e.open||_e.onOpenChange(!0))},onPointerMove:composeEventHandlers(_.onPointerMove,whenMouse(dt=>{rt.onItemEnter(dt),!dt.defaultPrevented&&!_.disabled&&!_e.open&&!nt.current&&(rt.onPointerGraceIntentChange(null),nt.current=window.setTimeout(()=>{_e.onOpenChange(!0),ot()},100))})),onPointerLeave:composeEventHandlers(_.onPointerLeave,whenMouse(dt=>{var yt,vt;ot();const ht=(yt=_e.content)==null?void 0:yt.getBoundingClientRect();if(ht){const xt=(vt=_e.content)==null?void 0:vt.dataset.side,wt=xt==="right",Et=wt?-5:5,At=ht[wt?"left":"right"],jt=ht[wt?"right":"left"];rt.onPointerGraceIntentChange({area:[{x:dt.clientX+Et,y:dt.clientY},{x:At,y:ht.top},{x:jt,y:ht.top},{x:jt,y:ht.bottom},{x:At,y:ht.bottom}],side:xt}),window.clearTimeout(it.current),it.current=window.setTimeout(()=>rt.onPointerGraceIntentChange(null),300)}else{if(rt.onTriggerLeave(dt),dt.defaultPrevented)return;rt.onPointerGraceIntentChange(null)}})),onKeyDown:composeEventHandlers(_.onKeyDown,dt=>{var yt;const ht=rt.searchRef.current!=="";_.disabled||ht&&dt.key===" "||SUB_OPEN_KEYS[et.dir].includes(dt.key)&&(_e.onOpenChange(!0),(yt=_e.content)==null||yt.focus(),dt.preventDefault())})})})});MenuSubTrigger.displayName=SUB_TRIGGER_NAME$1;var SUB_CONTENT_NAME$1="MenuSubContent",MenuSubContent=reactExports.forwardRef((_,$)=>{const _e=usePortalContext(CONTENT_NAME$3,_.__scopeMenu),{forceMount:et=_e.forceMount,...tt}=_,rt=useMenuContext(CONTENT_NAME$3,_.__scopeMenu),nt=useMenuRootContext(CONTENT_NAME$3,_.__scopeMenu),it=useMenuSubContext(SUB_CONTENT_NAME$1,_.__scopeMenu),st=reactExports.useRef(null),at=useComposedRefs($,st);return jsxRuntimeExports.jsx(Collection$2.Provider,{scope:_.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:et||rt.open,children:jsxRuntimeExports.jsx(Collection$2.Slot,{scope:_.__scopeMenu,children:jsxRuntimeExports.jsx(MenuContentImpl,{id:it.contentId,"aria-labelledby":it.triggerId,...tt,ref:at,align:"start",side:nt.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:ot=>{var dt;nt.isUsingKeyboardRef.current&&((dt=st.current)==null||dt.focus()),ot.preventDefault()},onCloseAutoFocus:ot=>ot.preventDefault(),onFocusOutside:composeEventHandlers(_.onFocusOutside,ot=>{ot.target!==it.trigger&&rt.onOpenChange(!1)}),onEscapeKeyDown:composeEventHandlers(_.onEscapeKeyDown,ot=>{nt.onClose(),ot.preventDefault()}),onKeyDown:composeEventHandlers(_.onKeyDown,ot=>{var yt;const dt=ot.currentTarget.contains(ot.target),ht=SUB_CLOSE_KEYS[nt.dir].includes(ot.key);dt&&ht&&(rt.onOpenChange(!1),(yt=it.trigger)==null||yt.focus(),ot.preventDefault())})})})})})});MenuSubContent.displayName=SUB_CONTENT_NAME$1;function getOpenState(_){return _?"open":"closed"}function isIndeterminate(_){return _==="indeterminate"}function getCheckedState(_){return isIndeterminate(_)?"indeterminate":_?"checked":"unchecked"}function focusFirst(_){const $=document.activeElement;for(const _e of _)if(_e===$||(_e.focus(),document.activeElement!==$))return}function wrapArray$1(_,$){return _.map((_e,et)=>_[($+et)%_.length])}function getNextMatch(_,$,_e){const tt=$.length>1&&Array.from($).every(at=>at===$[0])?$[0]:$,rt=_e?_.indexOf(_e):-1;let nt=wrapArray$1(_,Math.max(rt,0));tt.length===1&&(nt=nt.filter(at=>at!==_e));const st=nt.find(at=>at.toLowerCase().startsWith(tt.toLowerCase()));return st!==_e?st:void 0}function isPointInPolygon(_,$){const{x:_e,y:et}=_;let tt=!1;for(let rt=0,nt=$.length-1;rt<$.length;nt=rt++){const it=$[rt].x,st=$[rt].y,at=$[nt].x,ot=$[nt].y;st>et!=ot>et&&_e<(at-it)*(et-st)/(ot-st)+it&&(tt=!tt)}return tt}function isPointerInGraceArea(_,$){if(!$)return!1;const _e={x:_.clientX,y:_.clientY};return isPointInPolygon(_e,$)}function whenMouse(_){return $=>$.pointerType==="mouse"?_($):void 0}var Root3=Menu,Anchor2=MenuAnchor,Portal$1=MenuPortal,Content2$2=MenuContent,Group=MenuGroup,Label$4=MenuLabel,Item2$1=MenuItem,CheckboxItem=MenuCheckboxItem,RadioGroup=MenuRadioGroup,RadioItem=MenuRadioItem,ItemIndicator$1=MenuItemIndicator,Separator$3=MenuSeparator,Arrow2=MenuArrow,SubTrigger=MenuSubTrigger,SubContent=MenuSubContent,DROPDOWN_MENU_NAME="DropdownMenu",[createDropdownMenuContext,createDropdownMenuScope]=createContextScope$3(DROPDOWN_MENU_NAME,[createMenuScope]),useMenuScope=createMenuScope(),[DropdownMenuProvider,useDropdownMenuContext]=createDropdownMenuContext(DROPDOWN_MENU_NAME),DropdownMenu$1=_=>{const{__scopeDropdownMenu:$,children:_e,dir:et,open:tt,defaultOpen:rt,onOpenChange:nt,modal:it=!0}=_,st=useMenuScope($),at=reactExports.useRef(null),[ot=!1,dt]=useControllableState({prop:tt,defaultProp:rt,onChange:nt});return jsxRuntimeExports.jsx(DropdownMenuProvider,{scope:$,triggerId:useId(),triggerRef:at,contentId:useId(),open:ot,onOpenChange:dt,onOpenToggle:reactExports.useCallback(()=>dt(ht=>!ht),[dt]),modal:it,children:jsxRuntimeExports.jsx(Root3,{...st,open:ot,onOpenChange:dt,dir:et,modal:it,children:_e})})};DropdownMenu$1.displayName=DROPDOWN_MENU_NAME;var TRIGGER_NAME$2="DropdownMenuTrigger",DropdownMenuTrigger$1=reactExports.forwardRef((_,$)=>{const{__scopeDropdownMenu:_e,disabled:et=!1,...tt}=_,rt=useDropdownMenuContext(TRIGGER_NAME$2,_e),nt=useMenuScope(_e);return jsxRuntimeExports.jsx(Anchor2,{asChild:!0,...nt,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",id:rt.triggerId,"aria-haspopup":"menu","aria-expanded":rt.open,"aria-controls":rt.open?rt.contentId:void 0,"data-state":rt.open?"open":"closed","data-disabled":et?"":void 0,disabled:et,...tt,ref:composeRefs($,rt.triggerRef),onPointerDown:composeEventHandlers(_.onPointerDown,it=>{!et&&it.button===0&&it.ctrlKey===!1&&(rt.onOpenToggle(),rt.open||it.preventDefault())}),onKeyDown:composeEventHandlers(_.onKeyDown,it=>{et||(["Enter"," "].includes(it.key)&&rt.onOpenToggle(),it.key==="ArrowDown"&&rt.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(it.key)&&it.preventDefault())})})})});DropdownMenuTrigger$1.displayName=TRIGGER_NAME$2;var PORTAL_NAME$1="DropdownMenuPortal",DropdownMenuPortal=_=>{const{__scopeDropdownMenu:$,..._e}=_,et=useMenuScope($);return jsxRuntimeExports.jsx(Portal$1,{...et,..._e})};DropdownMenuPortal.displayName=PORTAL_NAME$1;var CONTENT_NAME$2="DropdownMenuContent",DropdownMenuContent$1=reactExports.forwardRef((_,$)=>{const{__scopeDropdownMenu:_e,...et}=_,tt=useDropdownMenuContext(CONTENT_NAME$2,_e),rt=useMenuScope(_e),nt=reactExports.useRef(!1);return jsxRuntimeExports.jsx(Content2$2,{id:tt.contentId,"aria-labelledby":tt.triggerId,...rt,...et,ref:$,onCloseAutoFocus:composeEventHandlers(_.onCloseAutoFocus,it=>{var st;nt.current||(st=tt.triggerRef.current)==null||st.focus(),nt.current=!1,it.preventDefault()}),onInteractOutside:composeEventHandlers(_.onInteractOutside,it=>{const st=it.detail.originalEvent,at=st.button===0&&st.ctrlKey===!0,ot=st.button===2||at;(!tt.modal||ot)&&(nt.current=!0)}),style:{..._.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuContent$1.displayName=CONTENT_NAME$2;var GROUP_NAME$1="DropdownMenuGroup",DropdownMenuGroup=reactExports.forwardRef((_,$)=>{const{__scopeDropdownMenu:_e,...et}=_,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(Group,{...tt,...et,ref:$})});DropdownMenuGroup.displayName=GROUP_NAME$1;var LABEL_NAME$1="DropdownMenuLabel",DropdownMenuLabel$1=reactExports.forwardRef((_,$)=>{const{__scopeDropdownMenu:_e,...et}=_,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(Label$4,{...tt,...et,ref:$})});DropdownMenuLabel$1.displayName=LABEL_NAME$1;var ITEM_NAME$1="DropdownMenuItem",DropdownMenuItem$1=reactExports.forwardRef((_,$)=>{const{__scopeDropdownMenu:_e,...et}=_,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(Item2$1,{...tt,...et,ref:$})});DropdownMenuItem$1.displayName=ITEM_NAME$1;var CHECKBOX_ITEM_NAME="DropdownMenuCheckboxItem",DropdownMenuCheckboxItem$1=reactExports.forwardRef((_,$)=>{const{__scopeDropdownMenu:_e,...et}=_,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(CheckboxItem,{...tt,...et,ref:$})});DropdownMenuCheckboxItem$1.displayName=CHECKBOX_ITEM_NAME;var RADIO_GROUP_NAME="DropdownMenuRadioGroup",DropdownMenuRadioGroup=reactExports.forwardRef((_,$)=>{const{__scopeDropdownMenu:_e,...et}=_,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(RadioGroup,{...tt,...et,ref:$})});DropdownMenuRadioGroup.displayName=RADIO_GROUP_NAME;var RADIO_ITEM_NAME="DropdownMenuRadioItem",DropdownMenuRadioItem$1=reactExports.forwardRef((_,$)=>{const{__scopeDropdownMenu:_e,...et}=_,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(RadioItem,{...tt,...et,ref:$})});DropdownMenuRadioItem$1.displayName=RADIO_ITEM_NAME;var INDICATOR_NAME$1="DropdownMenuItemIndicator",DropdownMenuItemIndicator=reactExports.forwardRef((_,$)=>{const{__scopeDropdownMenu:_e,...et}=_,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(ItemIndicator$1,{...tt,...et,ref:$})});DropdownMenuItemIndicator.displayName=INDICATOR_NAME$1;var SEPARATOR_NAME$1="DropdownMenuSeparator",DropdownMenuSeparator$1=reactExports.forwardRef((_,$)=>{const{__scopeDropdownMenu:_e,...et}=_,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(Separator$3,{...tt,...et,ref:$})});DropdownMenuSeparator$1.displayName=SEPARATOR_NAME$1;var ARROW_NAME$1="DropdownMenuArrow",DropdownMenuArrow=reactExports.forwardRef((_,$)=>{const{__scopeDropdownMenu:_e,...et}=_,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(Arrow2,{...tt,...et,ref:$})});DropdownMenuArrow.displayName=ARROW_NAME$1;var SUB_TRIGGER_NAME="DropdownMenuSubTrigger",DropdownMenuSubTrigger$1=reactExports.forwardRef((_,$)=>{const{__scopeDropdownMenu:_e,...et}=_,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(SubTrigger,{...tt,...et,ref:$})});DropdownMenuSubTrigger$1.displayName=SUB_TRIGGER_NAME;var SUB_CONTENT_NAME="DropdownMenuSubContent",DropdownMenuSubContent$1=reactExports.forwardRef((_,$)=>{const{__scopeDropdownMenu:_e,...et}=_,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(SubContent,{...tt,...et,ref:$,style:{..._.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuSubContent$1.displayName=SUB_CONTENT_NAME;var Root2$2=DropdownMenu$1,Trigger$2=DropdownMenuTrigger$1,Portal2=DropdownMenuPortal,Content2$1=DropdownMenuContent$1,Label2=DropdownMenuLabel$1,Item2=DropdownMenuItem$1,CheckboxItem2=DropdownMenuCheckboxItem$1,RadioItem2=DropdownMenuRadioItem$1,ItemIndicator2=DropdownMenuItemIndicator,Separator2=DropdownMenuSeparator$1,SubTrigger2=DropdownMenuSubTrigger$1,SubContent2=DropdownMenuSubContent$1;const DropdownMenu=Root2$2,DropdownMenuTrigger=Trigger$2,DropdownMenuSubTrigger=reactExports.forwardRef(({className:_,inset:$,children:_e,...et},tt)=>jsxRuntimeExports.jsxs(SubTrigger2,{ref:tt,className:cn("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",$&&"pl-8",_),...et,children:[_e,jsxRuntimeExports.jsx(ChevronRight,{className:"ml-auto h-4 w-4"})]}));DropdownMenuSubTrigger.displayName=SubTrigger2.displayName;const DropdownMenuSubContent=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx(SubContent2,{ref:_e,className:cn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",_),...$}));DropdownMenuSubContent.displayName=SubContent2.displayName;const DropdownMenuContent=reactExports.forwardRef(({className:_,sideOffset:$=4,..._e},et)=>jsxRuntimeExports.jsx(Portal2,{children:jsxRuntimeExports.jsx(Content2$1,{ref:et,sideOffset:$,className:cn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",_),..._e})}));DropdownMenuContent.displayName=Content2$1.displayName;const DropdownMenuItem=reactExports.forwardRef(({className:_,inset:$,..._e},et)=>jsxRuntimeExports.jsx(Item2,{ref:et,className:cn("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",$&&"pl-8",_),..._e}));DropdownMenuItem.displayName=Item2.displayName;const DropdownMenuCheckboxItem=reactExports.forwardRef(({className:_,children:$,checked:_e,...et},tt)=>jsxRuntimeExports.jsxs(CheckboxItem2,{ref:tt,className:cn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_),checked:_e,...et,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),$]}));DropdownMenuCheckboxItem.displayName=CheckboxItem2.displayName;const DropdownMenuRadioItem=reactExports.forwardRef(({className:_,children:$,..._e},et)=>jsxRuntimeExports.jsxs(RadioItem2,{ref:et,className:cn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_),..._e,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(Circle,{className:"h-2 w-2 fill-current"})})}),$]}));DropdownMenuRadioItem.displayName=RadioItem2.displayName;const DropdownMenuLabel=reactExports.forwardRef(({className:_,inset:$,..._e},et)=>jsxRuntimeExports.jsx(Label2,{ref:et,className:cn("px-2 py-1.5 text-sm font-semibold",$&&"pl-8",_),..._e}));DropdownMenuLabel.displayName=Label2.displayName;const DropdownMenuSeparator=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx(Separator2,{ref:_e,className:cn("-mx-1 my-1 h-px bg-muted",_),...$}));DropdownMenuSeparator.displayName=Separator2.displayName;const Header=()=>{const{user:_,logout:$}=useAuth(),_e=useNavigate(),[et,tt]=reactExports.useState(!1),rt=()=>{_e("/profile")},nt=()=>{_e("/settings")};return jsxRuntimeExports.jsxs("header",{className:"h-16 border-b flex items-center justify-between px-4 md:px-6 bg-background",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-2",children:jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold hidden md:block",children:"Crypto Trading Suite"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx(ThemeToggle,{}),jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"icon",className:"relative",onClick:()=>tt(!0),children:[jsxRuntimeExports.jsx(Bell,{size:20}),jsxRuntimeExports.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),jsxRuntimeExports.jsx(NotificationsDialog,{open:et,onOpenChange:tt}),jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",className:"rounded-full border",children:jsxRuntimeExports.jsx(User,{size:18})})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{align:"end",className:"w-56",children:[jsxRuntimeExports.jsx(DropdownMenuLabel,{children:(_==null?void 0:_.email)||"User"}),jsxRuntimeExports.jsx(DropdownMenuSeparator,{}),jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:rt,children:[jsxRuntimeExports.jsx(User,{className:"mr-2 h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Profile"})]}),jsxRuntimeExports.jsxs(DropdownMenuItem,{onClick:nt,children:[jsxRuntimeExports.jsx(Settings$1,{className:"mr-2 h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Settings"})]}),jsxRuntimeExports.jsx(DropdownMenuSeparator,{}),jsxRuntimeExports.jsx(DropdownMenuItem,{onClick:()=>$(),children:"Log out"})]})]})]})]})},alertVariants=cva("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Alert=reactExports.forwardRef(({className:_,variant:$,..._e},et)=>jsxRuntimeExports.jsx("div",{ref:et,role:"alert",className:cn(alertVariants({variant:$}),_),..._e}));Alert.displayName="Alert";const AlertTitle=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx("h5",{ref:_e,className:cn("mb-1 font-medium leading-none tracking-tight",_),...$}));AlertTitle.displayName="AlertTitle";const AlertDescription=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx("div",{ref:_e,className:cn("text-sm [&_p]:leading-relaxed",_),...$}));AlertDescription.displayName="AlertDescription";const API_KEY_STORAGE="binance-api-key",API_SECRET_STORAGE="binance-api-secret",es=class es{constructor(){}static getInstance(){return es.instance||(es.instance=new es),es.instance}saveApiCredentials($){localStorage.setItem(API_KEY_STORAGE,$.binanceApiKey),localStorage.setItem(API_SECRET_STORAGE,$.binanceSecretKey)}getApiCredentials(){const $=localStorage.getItem(API_KEY_STORAGE),_e=localStorage.getItem(API_SECRET_STORAGE);return!$||!_e?null:{binanceApiKey:$,binanceSecretKey:_e}}clearApiCredentials(){localStorage.removeItem(API_KEY_STORAGE),localStorage.removeItem(API_SECRET_STORAGE)}hasApiCredentials(){return!!this.getApiCredentials()}};vn(es,"instance");let AuthService=es;const AppLayout=()=>{useTheme();const _=useNavigate(),[$,_e]=reactExports.useState(!1);reactExports.useEffect(()=>{const rt=AuthService.getInstance().hasApiCredentials();_e(!rt)},[]);const et=()=>{_("/settings"),_e(!1)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row bg-background text-foreground",children:[jsxRuntimeExports.jsx(Sidebar,{}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col",children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsxs("main",{className:"flex-1 overflow-auto p-4 md:p-6",children:[$&&jsxRuntimeExports.jsxs(Alert,{variant:"destructive",className:"mb-4",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"h-4 w-4"}),jsxRuntimeExports.jsx(AlertTitle,{children:"Credenciais da API não encontradas"}),jsxRuntimeExports.jsxs(AlertDescription,{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx("p",{children:"Você precisa configurar suas credenciais da API Binance Testnet para usar todas as funcionalidades do aplicativo."}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:et,children:"Configurar API"})})]})]}),jsxRuntimeExports.jsx(Outlet,{})]})]})]})};var isCheckBoxInput=_=>_.type==="checkbox",isDateObject=_=>_ instanceof Date,isNullOrUndefined=_=>_==null;const isObjectType=_=>typeof _=="object";var isObject$9=_=>!isNullOrUndefined(_)&&!Array.isArray(_)&&isObjectType(_)&&!isDateObject(_),getEventValue=_=>isObject$9(_)&&_.target?isCheckBoxInput(_.target)?_.target.checked:_.target.value:_,getNodeParentName=_=>_.substring(0,_.search(/\.\d+(\.|$)/))||_,isNameInFieldArray=(_,$)=>_.has(getNodeParentName($)),isPlainObject$2=_=>{const $=_.constructor&&_.constructor.prototype;return isObject$9($)&&$.hasOwnProperty("isPrototypeOf")},isWeb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cloneObject(_){let $;const _e=Array.isArray(_);if(_ instanceof Date)$=new Date(_);else if(_ instanceof Set)$=new Set(_);else if(!(isWeb&&(_ instanceof Blob||_ instanceof FileList))&&(_e||isObject$9(_)))if($=_e?[]:{},!_e&&!isPlainObject$2(_))$=_;else for(const et in _)_.hasOwnProperty(et)&&($[et]=cloneObject(_[et]));else return _;return $}var compact=_=>Array.isArray(_)?_.filter(Boolean):[],isUndefined=_=>_===void 0,get$6=(_,$,_e)=>{if(!$||!isObject$9(_))return _e;const et=compact($.split(/[,[\].]+?/)).reduce((tt,rt)=>isNullOrUndefined(tt)?tt:tt[rt],_);return isUndefined(et)||et===_?isUndefined(_[$])?_e:_[$]:et},isBoolean$3=_=>typeof _=="boolean",isKey$4=_=>/^\w*$/.test(_),stringToPath$2=_=>compact(_.replace(/["|']|\]/g,"").split(/\.|\[/)),set=(_,$,_e)=>{let et=-1;const tt=isKey$4($)?[$]:stringToPath$2($),rt=tt.length,nt=rt-1;for(;++et<rt;){const it=tt[et];let st=_e;if(et!==nt){const at=_[it];st=isObject$9(at)||Array.isArray(at)?at:isNaN(+tt[et+1])?{}:[]}if(it==="__proto__")return;_[it]=st,_=_[it]}return _};const EVENTS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},VALIDATION_MODE={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},INPUT_VALIDATION_RULES={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},HookFormContext=React.createContext(null),useFormContext=()=>React.useContext(HookFormContext),FormProvider=_=>{const{children:$,..._e}=_;return React.createElement(HookFormContext.Provider,{value:_e},$)};var getProxyFormState=(_,$,_e,et=!0)=>{const tt={defaultValues:$._defaultValues};for(const rt in _)Object.defineProperty(tt,rt,{get:()=>{const nt=rt;return $._proxyFormState[nt]!==VALIDATION_MODE.all&&($._proxyFormState[nt]=!et||VALIDATION_MODE.all),_e&&(_e[nt]=!0),_[nt]}});return tt},isEmptyObject=_=>isObject$9(_)&&!Object.keys(_).length,shouldRenderFormState=(_,$,_e,et)=>{_e(_);const{name:tt,...rt}=_;return isEmptyObject(rt)||Object.keys(rt).length>=Object.keys($).length||Object.keys(rt).find(nt=>$[nt]===(!et||VALIDATION_MODE.all))},convertToArrayPayload=_=>Array.isArray(_)?_:[_],shouldSubscribeByName=(_,$,_e)=>!_||!$||_===$||convertToArrayPayload(_).some(et=>et&&(_e?et===$:et.startsWith($)||$.startsWith(et)));function useSubscribe(_){const $=React.useRef(_);$.current=_,React.useEffect(()=>{const _e=!_.disabled&&$.current.subject&&$.current.subject.subscribe({next:$.current.next});return()=>{_e&&_e.unsubscribe()}},[_.disabled])}function useFormState(_){const $=useFormContext(),{control:_e=$.control,disabled:et,name:tt,exact:rt}=_||{},[nt,it]=React.useState(_e._formState),st=React.useRef(!0),at=React.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),ot=React.useRef(tt);return ot.current=tt,useSubscribe({disabled:et,next:dt=>st.current&&shouldSubscribeByName(ot.current,dt.name,rt)&&shouldRenderFormState(dt,at.current,_e._updateFormState)&&it({..._e._formState,...dt}),subject:_e._subjects.state}),React.useEffect(()=>(st.current=!0,at.current.isValid&&_e._updateValid(!0),()=>{st.current=!1}),[_e]),getProxyFormState(nt,_e,at.current,!1)}var isString$3=_=>typeof _=="string",generateWatchOutput=(_,$,_e,et,tt)=>isString$3(_)?(et&&$.watch.add(_),get$6(_e,_,tt)):Array.isArray(_)?_.map(rt=>(et&&$.watch.add(rt),get$6(_e,rt))):(et&&($.watchAll=!0),_e);function useWatch(_){const $=useFormContext(),{control:_e=$.control,name:et,defaultValue:tt,disabled:rt,exact:nt}=_||{},it=React.useRef(et);it.current=et,useSubscribe({disabled:rt,subject:_e._subjects.values,next:ot=>{shouldSubscribeByName(it.current,ot.name,nt)&&at(cloneObject(generateWatchOutput(it.current,_e._names,ot.values||_e._formValues,!1,tt)))}});const[st,at]=React.useState(_e._getWatch(et,tt));return React.useEffect(()=>_e._removeUnmounted()),st}function useController(_){const $=useFormContext(),{name:_e,disabled:et,control:tt=$.control,shouldUnregister:rt}=_,nt=isNameInFieldArray(tt._names.array,_e),it=useWatch({control:tt,name:_e,defaultValue:get$6(tt._formValues,_e,get$6(tt._defaultValues,_e,_.defaultValue)),exact:!0}),st=useFormState({control:tt,name:_e,exact:!0}),at=React.useRef(tt.register(_e,{..._.rules,value:it,...isBoolean$3(_.disabled)?{disabled:_.disabled}:{}}));return React.useEffect(()=>{const ot=tt._options.shouldUnregister||rt,dt=(ht,yt)=>{const vt=get$6(tt._fields,ht);vt&&vt._f&&(vt._f.mount=yt)};if(dt(_e,!0),ot){const ht=cloneObject(get$6(tt._options.defaultValues,_e));set(tt._defaultValues,_e,ht),isUndefined(get$6(tt._formValues,_e))&&set(tt._formValues,_e,ht)}return()=>{(nt?ot&&!tt._state.action:ot)?tt.unregister(_e):dt(_e,!1)}},[_e,tt,nt,rt]),React.useEffect(()=>{get$6(tt._fields,_e)&&tt._updateDisabledField({disabled:et,fields:tt._fields,name:_e,value:get$6(tt._fields,_e)._f.value})},[et,_e,tt]),{field:{name:_e,value:it,...isBoolean$3(et)||st.disabled?{disabled:st.disabled||et}:{},onChange:React.useCallback(ot=>at.current.onChange({target:{value:getEventValue(ot),name:_e},type:EVENTS.CHANGE}),[_e]),onBlur:React.useCallback(()=>at.current.onBlur({target:{value:get$6(tt._formValues,_e),name:_e},type:EVENTS.BLUR}),[_e,tt]),ref:React.useCallback(ot=>{const dt=get$6(tt._fields,_e);dt&&ot&&(dt._f.ref={focus:()=>ot.focus(),select:()=>ot.select(),setCustomValidity:ht=>ot.setCustomValidity(ht),reportValidity:()=>ot.reportValidity()})},[tt._fields,_e])},formState:st,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!get$6(st.errors,_e)},isDirty:{enumerable:!0,get:()=>!!get$6(st.dirtyFields,_e)},isTouched:{enumerable:!0,get:()=>!!get$6(st.touchedFields,_e)},isValidating:{enumerable:!0,get:()=>!!get$6(st.validatingFields,_e)},error:{enumerable:!0,get:()=>get$6(st.errors,_e)}})}}const Controller=_=>_.render(useController(_));var appendErrors=(_,$,_e,et,tt)=>$?{..._e[_],types:{..._e[_]&&_e[_].types?_e[_].types:{},[et]:tt||!0}}:{},getValidationModes=_=>({isOnSubmit:!_||_===VALIDATION_MODE.onSubmit,isOnBlur:_===VALIDATION_MODE.onBlur,isOnChange:_===VALIDATION_MODE.onChange,isOnAll:_===VALIDATION_MODE.all,isOnTouch:_===VALIDATION_MODE.onTouched}),isWatched=(_,$,_e)=>!_e&&($.watchAll||$.watch.has(_)||[...$.watch].some(et=>_.startsWith(et)&&/^\.\w+/.test(_.slice(et.length))));const iterateFieldsByAction=(_,$,_e,et)=>{for(const tt of _e||Object.keys(_)){const rt=get$6(_,tt);if(rt){const{_f:nt,...it}=rt;if(nt){if(nt.refs&&nt.refs[0]&&$(nt.refs[0],tt)&&!et)return!0;if(nt.ref&&$(nt.ref,nt.name)&&!et)return!0;if(iterateFieldsByAction(it,$))break}else if(isObject$9(it)&&iterateFieldsByAction(it,$))break}}};var updateFieldArrayRootError=(_,$,_e)=>{const et=convertToArrayPayload(get$6(_,_e));return set(et,"root",$[_e]),set(_,_e,et),_},isFileInput=_=>_.type==="file",isFunction$5=_=>typeof _=="function",isHTMLElement=_=>{if(!isWeb)return!1;const $=_?_.ownerDocument:0;return _ instanceof($&&$.defaultView?$.defaultView.HTMLElement:HTMLElement)},isMessage=_=>isString$3(_),isRadioInput=_=>_.type==="radio",isRegex$1=_=>_ instanceof RegExp;const defaultResult={value:!1,isValid:!1},validResult={value:!0,isValid:!0};var getCheckboxValue=_=>{if(Array.isArray(_)){if(_.length>1){const $=_.filter(_e=>_e&&_e.checked&&!_e.disabled).map(_e=>_e.value);return{value:$,isValid:!!$.length}}return _[0].checked&&!_[0].disabled?_[0].attributes&&!isUndefined(_[0].attributes.value)?isUndefined(_[0].value)||_[0].value===""?validResult:{value:_[0].value,isValid:!0}:validResult:defaultResult}return defaultResult};const defaultReturn={isValid:!1,value:null};var getRadioValue=_=>Array.isArray(_)?_.reduce(($,_e)=>_e&&_e.checked&&!_e.disabled?{isValid:!0,value:_e.value}:$,defaultReturn):defaultReturn;function getValidateError(_,$,_e="validate"){if(isMessage(_)||Array.isArray(_)&&_.every(isMessage)||isBoolean$3(_)&&!_)return{type:_e,message:isMessage(_)?_:"",ref:$}}var getValueAndMessage=_=>isObject$9(_)&&!isRegex$1(_)?_:{value:_,message:""},validateField=async(_,$,_e,et,tt)=>{const{ref:rt,refs:nt,required:it,maxLength:st,minLength:at,min:ot,max:dt,pattern:ht,validate:yt,name:vt,valueAsNumber:xt,mount:wt,disabled:Et}=_._f,At=get$6($,vt);if(!wt||Et)return{};const jt=nt?nt[0]:rt,kt=lt=>{et&&jt.reportValidity&&(jt.setCustomValidity(isBoolean$3(lt)?"":lt||""),jt.reportValidity())},Lt={},Bt=isRadioInput(rt),Gt=isCheckBoxInput(rt),er=Bt||Gt,tr=(xt||isFileInput(rt))&&isUndefined(rt.value)&&isUndefined(At)||isHTMLElement(rt)&&rt.value===""||At===""||Array.isArray(At)&&!At.length,ar=appendErrors.bind(null,vt,_e,Lt),Mt=(lt,mt,gt,bt=INPUT_VALIDATION_RULES.maxLength,St=INPUT_VALIDATION_RULES.minLength)=>{const Nt=lt?mt:gt;Lt[vt]={type:lt?bt:St,message:Nt,ref:rt,...ar(lt?bt:St,Nt)}};if(tt?!Array.isArray(At)||!At.length:it&&(!er&&(tr||isNullOrUndefined(At))||isBoolean$3(At)&&!At||Gt&&!getCheckboxValue(nt).isValid||Bt&&!getRadioValue(nt).isValid)){const{value:lt,message:mt}=isMessage(it)?{value:!!it,message:it}:getValueAndMessage(it);if(lt&&(Lt[vt]={type:INPUT_VALIDATION_RULES.required,message:mt,ref:jt,...ar(INPUT_VALIDATION_RULES.required,mt)},!_e))return kt(mt),Lt}if(!tr&&(!isNullOrUndefined(ot)||!isNullOrUndefined(dt))){let lt,mt;const gt=getValueAndMessage(dt),bt=getValueAndMessage(ot);if(!isNullOrUndefined(At)&&!isNaN(At)){const St=rt.valueAsNumber||At&&+At;isNullOrUndefined(gt.value)||(lt=St>gt.value),isNullOrUndefined(bt.value)||(mt=St<bt.value)}else{const St=rt.valueAsDate||new Date(At),Nt=pt=>new Date(new Date().toDateString()+" "+pt),Pt=rt.type=="time",Tt=rt.type=="week";isString$3(gt.value)&&At&&(lt=Pt?Nt(At)>Nt(gt.value):Tt?At>gt.value:St>new Date(gt.value)),isString$3(bt.value)&&At&&(mt=Pt?Nt(At)<Nt(bt.value):Tt?At<bt.value:St<new Date(bt.value))}if((lt||mt)&&(Mt(!!lt,gt.message,bt.message,INPUT_VALIDATION_RULES.max,INPUT_VALIDATION_RULES.min),!_e))return kt(Lt[vt].message),Lt}if((st||at)&&!tr&&(isString$3(At)||tt&&Array.isArray(At))){const lt=getValueAndMessage(st),mt=getValueAndMessage(at),gt=!isNullOrUndefined(lt.value)&&At.length>+lt.value,bt=!isNullOrUndefined(mt.value)&&At.length<+mt.value;if((gt||bt)&&(Mt(gt,lt.message,mt.message),!_e))return kt(Lt[vt].message),Lt}if(ht&&!tr&&isString$3(At)){const{value:lt,message:mt}=getValueAndMessage(ht);if(isRegex$1(lt)&&!At.match(lt)&&(Lt[vt]={type:INPUT_VALIDATION_RULES.pattern,message:mt,ref:rt,...ar(INPUT_VALIDATION_RULES.pattern,mt)},!_e))return kt(mt),Lt}if(yt){if(isFunction$5(yt)){const lt=await yt(At,$),mt=getValidateError(lt,jt);if(mt&&(Lt[vt]={...mt,...ar(INPUT_VALIDATION_RULES.validate,mt.message)},!_e))return kt(mt.message),Lt}else if(isObject$9(yt)){let lt={};for(const mt in yt){if(!isEmptyObject(lt)&&!_e)break;const gt=getValidateError(await yt[mt](At,$),jt,mt);gt&&(lt={...gt,...ar(mt,gt.message)},kt(gt.message),_e&&(Lt[vt]=lt))}if(!isEmptyObject(lt)&&(Lt[vt]={ref:jt,...lt},!_e))return Lt}}return kt(!0),Lt};function baseGet$4(_,$){const _e=$.slice(0,-1).length;let et=0;for(;et<_e;)_=isUndefined(_)?et++:_[$[et++]];return _}function isEmptyArray(_){for(const $ in _)if(_.hasOwnProperty($)&&!isUndefined(_[$]))return!1;return!0}function unset(_,$){const _e=Array.isArray($)?$:isKey$4($)?[$]:stringToPath$2($),et=_e.length===1?_:baseGet$4(_,_e),tt=_e.length-1,rt=_e[tt];return et&&delete et[rt],tt!==0&&(isObject$9(et)&&isEmptyObject(et)||Array.isArray(et)&&isEmptyArray(et))&&unset(_,_e.slice(0,-1)),_}var createSubject=()=>{let _=[];return{get observers(){return _},next:tt=>{for(const rt of _)rt.next&&rt.next(tt)},subscribe:tt=>(_.push(tt),{unsubscribe:()=>{_=_.filter(rt=>rt!==tt)}}),unsubscribe:()=>{_=[]}}},isPrimitive$1=_=>isNullOrUndefined(_)||!isObjectType(_);function deepEqual$1(_,$){if(isPrimitive$1(_)||isPrimitive$1($))return _===$;if(isDateObject(_)&&isDateObject($))return _.getTime()===$.getTime();const _e=Object.keys(_),et=Object.keys($);if(_e.length!==et.length)return!1;for(const tt of _e){const rt=_[tt];if(!et.includes(tt))return!1;if(tt!=="ref"){const nt=$[tt];if(isDateObject(rt)&&isDateObject(nt)||isObject$9(rt)&&isObject$9(nt)||Array.isArray(rt)&&Array.isArray(nt)?!deepEqual$1(rt,nt):rt!==nt)return!1}}return!0}var isMultipleSelect=_=>_.type==="select-multiple",isRadioOrCheckbox=_=>isRadioInput(_)||isCheckBoxInput(_),live=_=>isHTMLElement(_)&&_.isConnected,objectHasFunction=_=>{for(const $ in _)if(isFunction$5(_[$]))return!0;return!1};function markFieldsDirty(_,$={}){const _e=Array.isArray(_);if(isObject$9(_)||_e)for(const et in _)Array.isArray(_[et])||isObject$9(_[et])&&!objectHasFunction(_[et])?($[et]=Array.isArray(_[et])?[]:{},markFieldsDirty(_[et],$[et])):isNullOrUndefined(_[et])||($[et]=!0);return $}function getDirtyFieldsFromDefaultValues(_,$,_e){const et=Array.isArray(_);if(isObject$9(_)||et)for(const tt in _)Array.isArray(_[tt])||isObject$9(_[tt])&&!objectHasFunction(_[tt])?isUndefined($)||isPrimitive$1(_e[tt])?_e[tt]=Array.isArray(_[tt])?markFieldsDirty(_[tt],[]):{...markFieldsDirty(_[tt])}:getDirtyFieldsFromDefaultValues(_[tt],isNullOrUndefined($)?{}:$[tt],_e[tt]):_e[tt]=!deepEqual$1(_[tt],$[tt]);return _e}var getDirtyFields=(_,$)=>getDirtyFieldsFromDefaultValues(_,$,markFieldsDirty($)),getFieldValueAs=(_,{valueAsNumber:$,valueAsDate:_e,setValueAs:et})=>isUndefined(_)?_:$?_===""?NaN:_&&+_:_e&&isString$3(_)?new Date(_):et?et(_):_;function getFieldValue(_){const $=_.ref;if(!(_.refs?_.refs.every(_e=>_e.disabled):$.disabled))return isFileInput($)?$.files:isRadioInput($)?getRadioValue(_.refs).value:isMultipleSelect($)?[...$.selectedOptions].map(({value:_e})=>_e):isCheckBoxInput($)?getCheckboxValue(_.refs).value:getFieldValueAs(isUndefined($.value)?_.ref.value:$.value,_)}var getResolverOptions=(_,$,_e,et)=>{const tt={};for(const rt of _){const nt=get$6($,rt);nt&&set(tt,rt,nt._f)}return{criteriaMode:_e,names:[..._],fields:tt,shouldUseNativeValidation:et}},getRuleValue=_=>isUndefined(_)?_:isRegex$1(_)?_.source:isObject$9(_)?isRegex$1(_.value)?_.value.source:_.value:_;const ASYNC_FUNCTION="AsyncFunction";var hasPromiseValidation=_=>(!_||!_.validate)&&!!(isFunction$5(_.validate)&&_.validate.constructor.name===ASYNC_FUNCTION||isObject$9(_.validate)&&Object.values(_.validate).find($=>$.constructor.name===ASYNC_FUNCTION)),hasValidation=_=>_.mount&&(_.required||_.min||_.max||_.maxLength||_.minLength||_.pattern||_.validate);function schemaErrorLookup(_,$,_e){const et=get$6(_,_e);if(et||isKey$4(_e))return{error:et,name:_e};const tt=_e.split(".");for(;tt.length;){const rt=tt.join("."),nt=get$6($,rt),it=get$6(_,rt);if(nt&&!Array.isArray(nt)&&_e!==rt)return{name:_e};if(it&&it.type)return{name:rt,error:it};tt.pop()}return{name:_e}}var skipValidation=(_,$,_e,et,tt)=>tt.isOnAll?!1:!_e&&tt.isOnTouch?!($||_):(_e?et.isOnBlur:tt.isOnBlur)?!_:(_e?et.isOnChange:tt.isOnChange)?_:!0,unsetEmptyArray=(_,$)=>!compact(get$6(_,$)).length&&unset(_,$);const defaultOptions$1={mode:VALIDATION_MODE.onSubmit,reValidateMode:VALIDATION_MODE.onChange,shouldFocusError:!0};function createFormControl(_={}){let $={...defaultOptions$1,..._},_e={submitCount:0,isDirty:!1,isLoading:isFunction$5($.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:$.errors||{},disabled:$.disabled||!1},et={},tt=isObject$9($.defaultValues)||isObject$9($.values)?cloneObject($.defaultValues||$.values)||{}:{},rt=$.shouldUnregister?{}:cloneObject(tt),nt={action:!1,mount:!1,watch:!1},it={mount:new Set,unMount:new Set,array:new Set,watch:new Set},st,at=0;const ot={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},dt={values:createSubject(),array:createSubject(),state:createSubject()},ht=getValidationModes($.mode),yt=getValidationModes($.reValidateMode),vt=$.criteriaMode===VALIDATION_MODE.all,xt=xr=>yr=>{clearTimeout(at),at=setTimeout(xr,yr)},wt=async xr=>{if(!_.disabled&&(ot.isValid||xr)){const yr=$.resolver?isEmptyObject((await er()).errors):await ar(et,!0);yr!==_e.isValid&&dt.state.next({isValid:yr})}},Et=(xr,yr)=>{!_.disabled&&(ot.isValidating||ot.validatingFields)&&((xr||Array.from(it.mount)).forEach(Ar=>{Ar&&(yr?set(_e.validatingFields,Ar,yr):unset(_e.validatingFields,Ar))}),dt.state.next({validatingFields:_e.validatingFields,isValidating:!isEmptyObject(_e.validatingFields)}))},At=(xr,yr=[],Ar,$r,Tr=!0,jr=!0)=>{if($r&&Ar&&!_.disabled){if(nt.action=!0,jr&&Array.isArray(get$6(et,xr))){const Cr=Ar(get$6(et,xr),$r.argA,$r.argB);Tr&&set(et,xr,Cr)}if(jr&&Array.isArray(get$6(_e.errors,xr))){const Cr=Ar(get$6(_e.errors,xr),$r.argA,$r.argB);Tr&&set(_e.errors,xr,Cr),unsetEmptyArray(_e.errors,xr)}if(ot.touchedFields&&jr&&Array.isArray(get$6(_e.touchedFields,xr))){const Cr=Ar(get$6(_e.touchedFields,xr),$r.argA,$r.argB);Tr&&set(_e.touchedFields,xr,Cr)}ot.dirtyFields&&(_e.dirtyFields=getDirtyFields(tt,rt)),dt.state.next({name:xr,isDirty:lt(xr,yr),dirtyFields:_e.dirtyFields,errors:_e.errors,isValid:_e.isValid})}else set(rt,xr,yr)},jt=(xr,yr)=>{set(_e.errors,xr,yr),dt.state.next({errors:_e.errors})},kt=xr=>{_e.errors=xr,dt.state.next({errors:_e.errors,isValid:!1})},Lt=(xr,yr,Ar,$r)=>{const Tr=get$6(et,xr);if(Tr){const jr=get$6(rt,xr,isUndefined(Ar)?get$6(tt,xr):Ar);isUndefined(jr)||$r&&$r.defaultChecked||yr?set(rt,xr,yr?jr:getFieldValue(Tr._f)):bt(xr,jr),nt.mount&&wt()}},Bt=(xr,yr,Ar,$r,Tr)=>{let jr=!1,Cr=!1;const Nr={name:xr};if(!_.disabled){const nn=!!(get$6(et,xr)&&get$6(et,xr)._f&&get$6(et,xr)._f.disabled);if(!Ar||$r){ot.isDirty&&(Cr=_e.isDirty,_e.isDirty=Nr.isDirty=lt(),jr=Cr!==Nr.isDirty);const Mr=nn||deepEqual$1(get$6(tt,xr),yr);Cr=!!(!nn&&get$6(_e.dirtyFields,xr)),Mr||nn?unset(_e.dirtyFields,xr):set(_e.dirtyFields,xr,!0),Nr.dirtyFields=_e.dirtyFields,jr=jr||ot.dirtyFields&&Cr!==!Mr}if(Ar){const Mr=get$6(_e.touchedFields,xr);Mr||(set(_e.touchedFields,xr,Ar),Nr.touchedFields=_e.touchedFields,jr=jr||ot.touchedFields&&Mr!==Ar)}jr&&Tr&&dt.state.next(Nr)}return jr?Nr:{}},Gt=(xr,yr,Ar,$r)=>{const Tr=get$6(_e.errors,xr),jr=ot.isValid&&isBoolean$3(yr)&&_e.isValid!==yr;if(_.delayError&&Ar?(st=xt(()=>jt(xr,Ar)),st(_.delayError)):(clearTimeout(at),st=null,Ar?set(_e.errors,xr,Ar):unset(_e.errors,xr)),(Ar?!deepEqual$1(Tr,Ar):Tr)||!isEmptyObject($r)||jr){const Cr={...$r,...jr&&isBoolean$3(yr)?{isValid:yr}:{},errors:_e.errors,name:xr};_e={..._e,...Cr},dt.state.next(Cr)}},er=async xr=>{Et(xr,!0);const yr=await $.resolver(rt,$.context,getResolverOptions(xr||it.mount,et,$.criteriaMode,$.shouldUseNativeValidation));return Et(xr),yr},tr=async xr=>{const{errors:yr}=await er(xr);if(xr)for(const Ar of xr){const $r=get$6(yr,Ar);$r?set(_e.errors,Ar,$r):unset(_e.errors,Ar)}else _e.errors=yr;return yr},ar=async(xr,yr,Ar={valid:!0})=>{for(const $r in xr){const Tr=xr[$r];if(Tr){const{_f:jr,...Cr}=Tr;if(jr){const Nr=it.array.has(jr.name),nn=Tr._f&&hasPromiseValidation(Tr._f);nn&&ot.validatingFields&&Et([$r],!0);const Mr=await validateField(Tr,rt,vt,$.shouldUseNativeValidation&&!yr,Nr);if(nn&&ot.validatingFields&&Et([$r]),Mr[jr.name]&&(Ar.valid=!1,yr))break;!yr&&(get$6(Mr,jr.name)?Nr?updateFieldArrayRootError(_e.errors,Mr,jr.name):set(_e.errors,jr.name,Mr[jr.name]):unset(_e.errors,jr.name))}!isEmptyObject(Cr)&&await ar(Cr,yr,Ar)}}return Ar.valid},Mt=()=>{for(const xr of it.unMount){const yr=get$6(et,xr);yr&&(yr._f.refs?yr._f.refs.every(Ar=>!live(Ar)):!live(yr._f.ref))&&cr(xr)}it.unMount=new Set},lt=(xr,yr)=>!_.disabled&&(xr&&yr&&set(rt,xr,yr),!deepEqual$1(Rt(),tt)),mt=(xr,yr,Ar)=>generateWatchOutput(xr,it,{...nt.mount?rt:isUndefined(yr)?tt:isString$3(xr)?{[xr]:yr}:yr},Ar,yr),gt=xr=>compact(get$6(nt.mount?rt:tt,xr,_.shouldUnregister?get$6(tt,xr,[]):[])),bt=(xr,yr,Ar={})=>{const $r=get$6(et,xr);let Tr=yr;if($r){const jr=$r._f;jr&&(!jr.disabled&&set(rt,xr,getFieldValueAs(yr,jr)),Tr=isHTMLElement(jr.ref)&&isNullOrUndefined(yr)?"":yr,isMultipleSelect(jr.ref)?[...jr.ref.options].forEach(Cr=>Cr.selected=Tr.includes(Cr.value)):jr.refs?isCheckBoxInput(jr.ref)?jr.refs.length>1?jr.refs.forEach(Cr=>(!Cr.defaultChecked||!Cr.disabled)&&(Cr.checked=Array.isArray(Tr)?!!Tr.find(Nr=>Nr===Cr.value):Tr===Cr.value)):jr.refs[0]&&(jr.refs[0].checked=!!Tr):jr.refs.forEach(Cr=>Cr.checked=Cr.value===Tr):isFileInput(jr.ref)?jr.ref.value="":(jr.ref.value=Tr,jr.ref.type||dt.values.next({name:xr,values:{...rt}})))}(Ar.shouldDirty||Ar.shouldTouch)&&Bt(xr,Tr,Ar.shouldTouch,Ar.shouldDirty,!0),Ar.shouldValidate&&pt(xr)},St=(xr,yr,Ar)=>{for(const $r in yr){const Tr=yr[$r],jr=`${xr}.${$r}`,Cr=get$6(et,jr);(it.array.has(xr)||isObject$9(Tr)||Cr&&!Cr._f)&&!isDateObject(Tr)?St(jr,Tr,Ar):bt(jr,Tr,Ar)}},Nt=(xr,yr,Ar={})=>{const $r=get$6(et,xr),Tr=it.array.has(xr),jr=cloneObject(yr);set(rt,xr,jr),Tr?(dt.array.next({name:xr,values:{...rt}}),(ot.isDirty||ot.dirtyFields)&&Ar.shouldDirty&&dt.state.next({name:xr,dirtyFields:getDirtyFields(tt,rt),isDirty:lt(xr,jr)})):$r&&!$r._f&&!isNullOrUndefined(jr)?St(xr,jr,Ar):bt(xr,jr,Ar),isWatched(xr,it)&&dt.state.next({..._e}),dt.values.next({name:nt.mount?xr:void 0,values:{...rt}})},Pt=async xr=>{nt.mount=!0;const yr=xr.target;let Ar=yr.name,$r=!0;const Tr=get$6(et,Ar),jr=()=>yr.type?getFieldValue(Tr._f):getEventValue(xr),Cr=Nr=>{$r=Number.isNaN(Nr)||isDateObject(Nr)&&isNaN(Nr.getTime())||deepEqual$1(Nr,get$6(rt,Ar,Nr))};if(Tr){let Nr,nn;const Mr=jr(),Lr=xr.type===EVENTS.BLUR||xr.type===EVENTS.FOCUS_OUT,an=!hasValidation(Tr._f)&&!$.resolver&&!get$6(_e.errors,Ar)&&!Tr._f.deps||skipValidation(Lr,get$6(_e.touchedFields,Ar),_e.isSubmitted,yt,ht),pr=isWatched(Ar,it,Lr);set(rt,Ar,Mr),Lr?(Tr._f.onBlur&&Tr._f.onBlur(xr),st&&st(0)):Tr._f.onChange&&Tr._f.onChange(xr);const nr=Bt(Ar,Mr,Lr,!1),lr=!isEmptyObject(nr)||pr;if(!Lr&&dt.values.next({name:Ar,type:xr.type,values:{...rt}}),an)return ot.isValid&&(_.mode==="onBlur"?Lr&&wt():wt()),lr&&dt.state.next({name:Ar,...pr?{}:nr});if(!Lr&&pr&&dt.state.next({..._e}),$.resolver){const{errors:vr}=await er([Ar]);if(Cr(Mr),$r){const wr=schemaErrorLookup(_e.errors,et,Ar),Pr=schemaErrorLookup(vr,et,wr.name||Ar);Nr=Pr.error,Ar=Pr.name,nn=isEmptyObject(vr)}}else Et([Ar],!0),Nr=(await validateField(Tr,rt,vt,$.shouldUseNativeValidation))[Ar],Et([Ar]),Cr(Mr),$r&&(Nr?nn=!1:ot.isValid&&(nn=await ar(et,!0)));$r&&(Tr._f.deps&&pt(Tr._f.deps),Gt(Ar,nn,Nr,nr))}},Tt=(xr,yr)=>{if(get$6(_e.errors,yr)&&xr.focus)return xr.focus(),1},pt=async(xr,yr={})=>{let Ar,$r;const Tr=convertToArrayPayload(xr);if($.resolver){const jr=await tr(isUndefined(xr)?xr:Tr);Ar=isEmptyObject(jr),$r=xr?!Tr.some(Cr=>get$6(jr,Cr)):Ar}else xr?($r=(await Promise.all(Tr.map(async jr=>{const Cr=get$6(et,jr);return await ar(Cr&&Cr._f?{[jr]:Cr}:Cr)}))).every(Boolean),!(!$r&&!_e.isValid)&&wt()):$r=Ar=await ar(et);return dt.state.next({...!isString$3(xr)||ot.isValid&&Ar!==_e.isValid?{}:{name:xr},...$.resolver||!xr?{isValid:Ar}:{},errors:_e.errors}),yr.shouldFocus&&!$r&&iterateFieldsByAction(et,Tt,xr?Tr:it.mount),$r},Rt=xr=>{const yr={...nt.mount?rt:tt};return isUndefined(xr)?yr:isString$3(xr)?get$6(yr,xr):xr.map(Ar=>get$6(yr,Ar))},zt=(xr,yr)=>({invalid:!!get$6((yr||_e).errors,xr),isDirty:!!get$6((yr||_e).dirtyFields,xr),error:get$6((yr||_e).errors,xr),isValidating:!!get$6(_e.validatingFields,xr),isTouched:!!get$6((yr||_e).touchedFields,xr)}),Yt=xr=>{xr&&convertToArrayPayload(xr).forEach(yr=>unset(_e.errors,yr)),dt.state.next({errors:xr?_e.errors:{}})},ir=(xr,yr,Ar)=>{const $r=(get$6(et,xr,{_f:{}})._f||{}).ref,Tr=get$6(_e.errors,xr)||{},{ref:jr,message:Cr,type:Nr,...nn}=Tr;set(_e.errors,xr,{...nn,...yr,ref:$r}),dt.state.next({name:xr,errors:_e.errors,isValid:!1}),Ar&&Ar.shouldFocus&&$r&&$r.focus&&$r.focus()},ur=(xr,yr)=>isFunction$5(xr)?dt.values.subscribe({next:Ar=>xr(mt(void 0,yr),Ar)}):mt(xr,yr,!0),cr=(xr,yr={})=>{for(const Ar of xr?convertToArrayPayload(xr):it.mount)it.mount.delete(Ar),it.array.delete(Ar),yr.keepValue||(unset(et,Ar),unset(rt,Ar)),!yr.keepError&&unset(_e.errors,Ar),!yr.keepDirty&&unset(_e.dirtyFields,Ar),!yr.keepTouched&&unset(_e.touchedFields,Ar),!yr.keepIsValidating&&unset(_e.validatingFields,Ar),!$.shouldUnregister&&!yr.keepDefaultValue&&unset(tt,Ar);dt.values.next({values:{...rt}}),dt.state.next({..._e,...yr.keepDirty?{isDirty:lt()}:{}}),!yr.keepIsValid&&wt()},rr=({disabled:xr,name:yr,field:Ar,fields:$r,value:Tr})=>{if(isBoolean$3(xr)&&nt.mount||xr){const jr=xr?void 0:isUndefined(Tr)?getFieldValue(Ar?Ar._f:get$6($r,yr)._f):Tr;set(rt,yr,jr),Bt(yr,jr,!1,!1,!0)}},fr=(xr,yr={})=>{let Ar=get$6(et,xr);const $r=isBoolean$3(yr.disabled)||isBoolean$3(_.disabled);return set(et,xr,{...Ar||{},_f:{...Ar&&Ar._f?Ar._f:{ref:{name:xr}},name:xr,mount:!0,...yr}}),it.mount.add(xr),Ar?rr({field:Ar,disabled:isBoolean$3(yr.disabled)?yr.disabled:_.disabled,name:xr,value:yr.value}):Lt(xr,!0,yr.value),{...$r?{disabled:yr.disabled||_.disabled}:{},...$.progressive?{required:!!yr.required,min:getRuleValue(yr.min),max:getRuleValue(yr.max),minLength:getRuleValue(yr.minLength),maxLength:getRuleValue(yr.maxLength),pattern:getRuleValue(yr.pattern)}:{},name:xr,onChange:Pt,onBlur:Pt,ref:Tr=>{if(Tr){fr(xr,yr),Ar=get$6(et,xr);const jr=isUndefined(Tr.value)&&Tr.querySelectorAll&&Tr.querySelectorAll("input,select,textarea")[0]||Tr,Cr=isRadioOrCheckbox(jr),Nr=Ar._f.refs||[];if(Cr?Nr.find(nn=>nn===jr):jr===Ar._f.ref)return;set(et,xr,{_f:{...Ar._f,...Cr?{refs:[...Nr.filter(live),jr,...Array.isArray(get$6(tt,xr))?[{}]:[]],ref:{type:jr.type,name:xr}}:{ref:jr}}}),Lt(xr,!1,void 0,jr)}else Ar=get$6(et,xr,{}),Ar._f&&(Ar._f.mount=!1),($.shouldUnregister||yr.shouldUnregister)&&!(isNameInFieldArray(it.array,xr)&&nt.action)&&it.unMount.add(xr)}}},dr=()=>$.shouldFocusError&&iterateFieldsByAction(et,Tt,it.mount),gr=xr=>{isBoolean$3(xr)&&(dt.state.next({disabled:xr}),iterateFieldsByAction(et,(yr,Ar)=>{const $r=get$6(et,Ar);$r&&(yr.disabled=$r._f.disabled||xr,Array.isArray($r._f.refs)&&$r._f.refs.forEach(Tr=>{Tr.disabled=$r._f.disabled||xr}))},0,!1))},hr=(xr,yr)=>async Ar=>{let $r;Ar&&(Ar.preventDefault&&Ar.preventDefault(),Ar.persist&&Ar.persist());let Tr=cloneObject(rt);if(dt.state.next({isSubmitting:!0}),$.resolver){const{errors:jr,values:Cr}=await er();_e.errors=jr,Tr=Cr}else await ar(et);if(unset(_e.errors,"root"),isEmptyObject(_e.errors)){dt.state.next({errors:{}});try{await xr(Tr,Ar)}catch(jr){$r=jr}}else yr&&await yr({..._e.errors},Ar),dr(),setTimeout(dr);if(dt.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:isEmptyObject(_e.errors)&&!$r,submitCount:_e.submitCount+1,errors:_e.errors}),$r)throw $r},or=(xr,yr={})=>{get$6(et,xr)&&(isUndefined(yr.defaultValue)?Nt(xr,cloneObject(get$6(tt,xr))):(Nt(xr,yr.defaultValue),set(tt,xr,cloneObject(yr.defaultValue))),yr.keepTouched||unset(_e.touchedFields,xr),yr.keepDirty||(unset(_e.dirtyFields,xr),_e.isDirty=yr.defaultValue?lt(xr,cloneObject(get$6(tt,xr))):lt()),yr.keepError||(unset(_e.errors,xr),ot.isValid&&wt()),dt.state.next({..._e}))},br=(xr,yr={})=>{const Ar=xr?cloneObject(xr):tt,$r=cloneObject(Ar),Tr=isEmptyObject(xr),jr=Tr?tt:$r;if(yr.keepDefaultValues||(tt=Ar),!yr.keepValues){if(yr.keepDirtyValues){const Cr=new Set([...it.mount,...Object.keys(getDirtyFields(tt,rt))]);for(const Nr of Array.from(Cr))get$6(_e.dirtyFields,Nr)?set(jr,Nr,get$6(rt,Nr)):Nt(Nr,get$6(jr,Nr))}else{if(isWeb&&isUndefined(xr))for(const Cr of it.mount){const Nr=get$6(et,Cr);if(Nr&&Nr._f){const nn=Array.isArray(Nr._f.refs)?Nr._f.refs[0]:Nr._f.ref;if(isHTMLElement(nn)){const Mr=nn.closest("form");if(Mr){Mr.reset();break}}}}et={}}rt=_.shouldUnregister?yr.keepDefaultValues?cloneObject(tt):{}:cloneObject(jr),dt.array.next({values:{...jr}}),dt.values.next({values:{...jr}})}it={mount:yr.keepDirtyValues?it.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},nt.mount=!ot.isValid||!!yr.keepIsValid||!!yr.keepDirtyValues,nt.watch=!!_.shouldUnregister,dt.state.next({submitCount:yr.keepSubmitCount?_e.submitCount:0,isDirty:Tr?!1:yr.keepDirty?_e.isDirty:!!(yr.keepDefaultValues&&!deepEqual$1(xr,tt)),isSubmitted:yr.keepIsSubmitted?_e.isSubmitted:!1,dirtyFields:Tr?{}:yr.keepDirtyValues?yr.keepDefaultValues&&rt?getDirtyFields(tt,rt):_e.dirtyFields:yr.keepDefaultValues&&xr?getDirtyFields(tt,xr):yr.keepDirty?_e.dirtyFields:{},touchedFields:yr.keepTouched?_e.touchedFields:{},errors:yr.keepErrors?_e.errors:{},isSubmitSuccessful:yr.keepIsSubmitSuccessful?_e.isSubmitSuccessful:!1,isSubmitting:!1})},Rr=(xr,yr)=>br(isFunction$5(xr)?xr(rt):xr,yr);return{control:{register:fr,unregister:cr,getFieldState:zt,handleSubmit:hr,setError:ir,_executeSchema:er,_getWatch:mt,_getDirty:lt,_updateValid:wt,_removeUnmounted:Mt,_updateFieldArray:At,_updateDisabledField:rr,_getFieldArray:gt,_reset:br,_resetDefaultValues:()=>isFunction$5($.defaultValues)&&$.defaultValues().then(xr=>{Rr(xr,$.resetOptions),dt.state.next({isLoading:!1})}),_updateFormState:xr=>{_e={..._e,...xr}},_disableForm:gr,_subjects:dt,_proxyFormState:ot,_setErrors:kt,get _fields(){return et},get _formValues(){return rt},get _state(){return nt},set _state(xr){nt=xr},get _defaultValues(){return tt},get _names(){return it},set _names(xr){it=xr},get _formState(){return _e},set _formState(xr){_e=xr},get _options(){return $},set _options(xr){$={...$,...xr}}},trigger:pt,register:fr,handleSubmit:hr,watch:ur,setValue:Nt,getValues:Rt,reset:Rr,resetField:or,clearErrors:Yt,unregister:cr,setError:ir,setFocus:(xr,yr={})=>{const Ar=get$6(et,xr),$r=Ar&&Ar._f;if($r){const Tr=$r.refs?$r.refs[0]:$r.ref;Tr.focus&&(Tr.focus(),yr.shouldSelect&&Tr.select())}},getFieldState:zt}}function useForm(_={}){const $=React.useRef(),_e=React.useRef(),[et,tt]=React.useState({isDirty:!1,isValidating:!1,isLoading:isFunction$5(_.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:_.errors||{},disabled:_.disabled||!1,defaultValues:isFunction$5(_.defaultValues)?void 0:_.defaultValues});$.current||($.current={...createFormControl(_),formState:et});const rt=$.current.control;return rt._options=_,useSubscribe({subject:rt._subjects.state,next:nt=>{shouldRenderFormState(nt,rt._proxyFormState,rt._updateFormState,!0)&&tt({...rt._formState})}}),React.useEffect(()=>rt._disableForm(_.disabled),[rt,_.disabled]),React.useEffect(()=>{if(rt._proxyFormState.isDirty){const nt=rt._getDirty();nt!==et.isDirty&&rt._subjects.state.next({isDirty:nt})}},[rt,et.isDirty]),React.useEffect(()=>{_.values&&!deepEqual$1(_.values,_e.current)?(rt._reset(_.values,rt._options.resetOptions),_e.current=_.values,tt(nt=>({...nt}))):rt._resetDefaultValues()},[_.values,rt]),React.useEffect(()=>{_.errors&&rt._setErrors(_.errors)},[_.errors,rt]),React.useEffect(()=>{rt._state.mount||(rt._updateValid(),rt._state.mount=!0),rt._state.watch&&(rt._state.watch=!1,rt._subjects.state.next({...rt._formState})),rt._removeUnmounted()}),React.useEffect(()=>{_.shouldUnregister&&rt._subjects.values.next({values:rt._getWatch()})},[_.shouldUnregister,rt]),React.useEffect(()=>{$.current&&($.current.watch=$.current.watch.bind({}))},[et]),$.current.formState=getProxyFormState(et,rt),$.current}const s$1=(_,$,_e)=>{if(_&&"reportValidity"in _){const et=get$6(_e,$);_.setCustomValidity(et&&et.message||""),_.reportValidity()}},o=(_,$)=>{for(const _e in $.fields){const et=$.fields[_e];et&&et.ref&&"reportValidity"in et.ref?s$1(et.ref,_e,_):et.refs&&et.refs.forEach(tt=>s$1(tt,_e,_))}},r=(_,$)=>{$.shouldUseNativeValidation&&o(_,$);const _e={};for(const et in _){const tt=get$6($.fields,et),rt=Object.assign(_[et]||{},{ref:tt&&tt.ref});if(i$1($.names||Object.keys(_),et)){const nt=Object.assign({},get$6(_e,et));set(nt,"root",rt),set(_e,et,nt)}else set(_e,et,rt)}return _e},i$1=(_,$)=>_.some(_e=>_e.startsWith($+"."));var n$1=function(_,$){for(var _e={};_.length;){var et=_[0],tt=et.code,rt=et.message,nt=et.path.join(".");if(!_e[nt])if("unionErrors"in et){var it=et.unionErrors[0].errors[0];_e[nt]={message:it.message,type:it.code}}else _e[nt]={message:rt,type:tt};if("unionErrors"in et&&et.unionErrors.forEach(function(ot){return ot.errors.forEach(function(dt){return _.push(dt)})}),$){var st=_e[nt].types,at=st&&st[et.code];_e[nt]=appendErrors(nt,$,_e,tt,at?[].concat(at,et.message):et.message)}_.shift()}return _e},t$1=function(_,$,_e){return _e===void 0&&(_e={}),function(et,tt,rt){try{return Promise.resolve(function(nt,it){try{var st=Promise.resolve(_[_e.mode==="sync"?"parse":"parseAsync"](et,$)).then(function(at){return rt.shouldUseNativeValidation&&o({},rt),{errors:{},values:_e.raw?et:at}})}catch(at){return it(at)}return st&&st.then?st.then(void 0,it):st}(0,function(nt){if(function(it){return Array.isArray(it==null?void 0:it.errors)}(nt))return{values:{},errors:r(n$1(nt.errors,!rt.shouldUseNativeValidation&&rt.criteriaMode==="all"),rt)};throw nt}))}catch(nt){return Promise.reject(nt)}}},util$3;(function(_){_.assertEqual=tt=>tt;function $(tt){}_.assertIs=$;function _e(tt){throw new Error}_.assertNever=_e,_.arrayToEnum=tt=>{const rt={};for(const nt of tt)rt[nt]=nt;return rt},_.getValidEnumValues=tt=>{const rt=_.objectKeys(tt).filter(it=>typeof tt[tt[it]]!="number"),nt={};for(const it of rt)nt[it]=tt[it];return _.objectValues(nt)},_.objectValues=tt=>_.objectKeys(tt).map(function(rt){return tt[rt]}),_.objectKeys=typeof Object.keys=="function"?tt=>Object.keys(tt):tt=>{const rt=[];for(const nt in tt)Object.prototype.hasOwnProperty.call(tt,nt)&&rt.push(nt);return rt},_.find=(tt,rt)=>{for(const nt of tt)if(rt(nt))return nt},_.isInteger=typeof Number.isInteger=="function"?tt=>Number.isInteger(tt):tt=>typeof tt=="number"&&isFinite(tt)&&Math.floor(tt)===tt;function et(tt,rt=" | "){return tt.map(nt=>typeof nt=="string"?`'${nt}'`:nt).join(rt)}_.joinValues=et,_.jsonStringifyReplacer=(tt,rt)=>typeof rt=="bigint"?rt.toString():rt})(util$3||(util$3={}));var objectUtil;(function(_){_.mergeShapes=($,_e)=>({...$,..._e})})(objectUtil||(objectUtil={}));const ZodParsedType=util$3.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=_=>{switch(typeof _){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(_)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(_)?ZodParsedType.array:_===null?ZodParsedType.null:_.then&&typeof _.then=="function"&&_.catch&&typeof _.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&_ instanceof Map?ZodParsedType.map:typeof Set<"u"&&_ instanceof Set?ZodParsedType.set:typeof Date<"u"&&_ instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util$3.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=_=>JSON.stringify(_,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor($){super(),this.issues=[],this.addIssue=et=>{this.issues=[...this.issues,et]},this.addIssues=(et=[])=>{this.issues=[...this.issues,...et]};const _e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,_e):this.__proto__=_e,this.name="ZodError",this.issues=$}get errors(){return this.issues}format($){const _e=$||function(rt){return rt.message},et={_errors:[]},tt=rt=>{for(const nt of rt.issues)if(nt.code==="invalid_union")nt.unionErrors.map(tt);else if(nt.code==="invalid_return_type")tt(nt.returnTypeError);else if(nt.code==="invalid_arguments")tt(nt.argumentsError);else if(nt.path.length===0)et._errors.push(_e(nt));else{let it=et,st=0;for(;st<nt.path.length;){const at=nt.path[st];st===nt.path.length-1?(it[at]=it[at]||{_errors:[]},it[at]._errors.push(_e(nt))):it[at]=it[at]||{_errors:[]},it=it[at],st++}}};return tt(this),et}static assert($){if(!($ instanceof ZodError))throw new Error(`Not a ZodError: ${$}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util$3.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten($=_e=>_e.message){const _e={},et=[];for(const tt of this.issues)tt.path.length>0?(_e[tt.path[0]]=_e[tt.path[0]]||[],_e[tt.path[0]].push($(tt))):et.push($(tt));return{formErrors:et,fieldErrors:_e}}get formErrors(){return this.flatten()}}ZodError.create=_=>new ZodError(_);const errorMap=(_,$)=>{let _e;switch(_.code){case ZodIssueCode.invalid_type:_.received===ZodParsedType.undefined?_e="Required":_e=`Expected ${_.expected}, received ${_.received}`;break;case ZodIssueCode.invalid_literal:_e=`Invalid literal value, expected ${JSON.stringify(_.expected,util$3.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:_e=`Unrecognized key(s) in object: ${util$3.joinValues(_.keys,", ")}`;break;case ZodIssueCode.invalid_union:_e="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:_e=`Invalid discriminator value. Expected ${util$3.joinValues(_.options)}`;break;case ZodIssueCode.invalid_enum_value:_e=`Invalid enum value. Expected ${util$3.joinValues(_.options)}, received '${_.received}'`;break;case ZodIssueCode.invalid_arguments:_e="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:_e="Invalid function return type";break;case ZodIssueCode.invalid_date:_e="Invalid date";break;case ZodIssueCode.invalid_string:typeof _.validation=="object"?"includes"in _.validation?(_e=`Invalid input: must include "${_.validation.includes}"`,typeof _.validation.position=="number"&&(_e=`${_e} at one or more positions greater than or equal to ${_.validation.position}`)):"startsWith"in _.validation?_e=`Invalid input: must start with "${_.validation.startsWith}"`:"endsWith"in _.validation?_e=`Invalid input: must end with "${_.validation.endsWith}"`:util$3.assertNever(_.validation):_.validation!=="regex"?_e=`Invalid ${_.validation}`:_e="Invalid";break;case ZodIssueCode.too_small:_.type==="array"?_e=`Array must contain ${_.exact?"exactly":_.inclusive?"at least":"more than"} ${_.minimum} element(s)`:_.type==="string"?_e=`String must contain ${_.exact?"exactly":_.inclusive?"at least":"over"} ${_.minimum} character(s)`:_.type==="number"?_e=`Number must be ${_.exact?"exactly equal to ":_.inclusive?"greater than or equal to ":"greater than "}${_.minimum}`:_.type==="date"?_e=`Date must be ${_.exact?"exactly equal to ":_.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(_.minimum))}`:_e="Invalid input";break;case ZodIssueCode.too_big:_.type==="array"?_e=`Array must contain ${_.exact?"exactly":_.inclusive?"at most":"less than"} ${_.maximum} element(s)`:_.type==="string"?_e=`String must contain ${_.exact?"exactly":_.inclusive?"at most":"under"} ${_.maximum} character(s)`:_.type==="number"?_e=`Number must be ${_.exact?"exactly":_.inclusive?"less than or equal to":"less than"} ${_.maximum}`:_.type==="bigint"?_e=`BigInt must be ${_.exact?"exactly":_.inclusive?"less than or equal to":"less than"} ${_.maximum}`:_.type==="date"?_e=`Date must be ${_.exact?"exactly":_.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(_.maximum))}`:_e="Invalid input";break;case ZodIssueCode.custom:_e="Invalid input";break;case ZodIssueCode.invalid_intersection_types:_e="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:_e=`Number must be a multiple of ${_.multipleOf}`;break;case ZodIssueCode.not_finite:_e="Number must be finite";break;default:_e=$.defaultError,util$3.assertNever(_)}return{message:_e}};let overrideErrorMap=errorMap;function setErrorMap(_){overrideErrorMap=_}function getErrorMap(){return overrideErrorMap}const makeIssue=_=>{const{data:$,path:_e,errorMaps:et,issueData:tt}=_,rt=[..._e,...tt.path||[]],nt={...tt,path:rt};if(tt.message!==void 0)return{...tt,path:rt,message:tt.message};let it="";const st=et.filter(at=>!!at).slice().reverse();for(const at of st)it=at(nt,{data:$,defaultError:it}).message;return{...tt,path:rt,message:it}},EMPTY_PATH=[];function addIssueToContext(_,$){const _e=getErrorMap(),et=makeIssue({issueData:$,data:_.data,path:_.path,errorMaps:[_.common.contextualErrorMap,_.schemaErrorMap,_e,_e===errorMap?void 0:errorMap].filter(tt=>!!tt)});_.common.issues.push(et)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray($,_e){const et=[];for(const tt of _e){if(tt.status==="aborted")return INVALID;tt.status==="dirty"&&$.dirty(),et.push(tt.value)}return{status:$.value,value:et}}static async mergeObjectAsync($,_e){const et=[];for(const tt of _e){const rt=await tt.key,nt=await tt.value;et.push({key:rt,value:nt})}return ParseStatus.mergeObjectSync($,et)}static mergeObjectSync($,_e){const et={};for(const tt of _e){const{key:rt,value:nt}=tt;if(rt.status==="aborted"||nt.status==="aborted")return INVALID;rt.status==="dirty"&&$.dirty(),nt.status==="dirty"&&$.dirty(),rt.value!=="__proto__"&&(typeof nt.value<"u"||tt.alwaysSet)&&(et[rt.value]=nt.value)}return{status:$.value,value:et}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=_=>({status:"dirty",value:_}),OK=_=>({status:"valid",value:_}),isAborted=_=>_.status==="aborted",isDirty=_=>_.status==="dirty",isValid$1=_=>_.status==="valid",isAsync=_=>typeof Promise<"u"&&_ instanceof Promise;function __classPrivateFieldGet(_,$,_e,et){if(typeof $=="function"?_!==$||!et:!$.has(_))throw new TypeError("Cannot read private member from an object whose class did not declare it");return $.get(_)}function __classPrivateFieldSet(_,$,_e,et,tt){if(typeof $=="function"?_!==$||!tt:!$.has(_))throw new TypeError("Cannot write private member to an object whose class did not declare it");return $.set(_,_e),_e}typeof SuppressedError=="function"&&SuppressedError;var errorUtil;(function(_){_.errToObj=$=>typeof $=="string"?{message:$}:$||{},_.toString=$=>typeof $=="string"?$:$==null?void 0:$.message})(errorUtil||(errorUtil={}));var _ZodEnum_cache,_ZodNativeEnum_cache;class ParseInputLazyPath{constructor($,_e,et,tt){this._cachedPath=[],this.parent=$,this.data=_e,this._path=et,this._key=tt}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(_,$)=>{if(isValid$1($))return{success:!0,data:$.value};if(!_.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const _e=new ZodError(_.common.issues);return this._error=_e,this._error}}};function processCreateParams(_){if(!_)return{};const{errorMap:$,invalid_type_error:_e,required_error:et,description:tt}=_;if($&&(_e||et))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return $?{errorMap:$,description:tt}:{errorMap:(nt,it)=>{var st,at;const{message:ot}=_;return nt.code==="invalid_enum_value"?{message:ot??it.defaultError}:typeof it.data>"u"?{message:(st=ot??et)!==null&&st!==void 0?st:it.defaultError}:nt.code!=="invalid_type"?{message:it.defaultError}:{message:(at=ot??_e)!==null&&at!==void 0?at:it.defaultError}},description:tt}}class ZodType{constructor($){this.spa=this.safeParseAsync,this._def=$,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType($){return getParsedType($.data)}_getOrReturnCtx($,_e){return _e||{common:$.parent.common,data:$.data,parsedType:getParsedType($.data),schemaErrorMap:this._def.errorMap,path:$.path,parent:$.parent}}_processInputParams($){return{status:new ParseStatus,ctx:{common:$.parent.common,data:$.data,parsedType:getParsedType($.data),schemaErrorMap:this._def.errorMap,path:$.path,parent:$.parent}}}_parseSync($){const _e=this._parse($);if(isAsync(_e))throw new Error("Synchronous parse encountered promise.");return _e}_parseAsync($){const _e=this._parse($);return Promise.resolve(_e)}parse($,_e){const et=this.safeParse($,_e);if(et.success)return et.data;throw et.error}safeParse($,_e){var et;const tt={common:{issues:[],async:(et=_e==null?void 0:_e.async)!==null&&et!==void 0?et:!1,contextualErrorMap:_e==null?void 0:_e.errorMap},path:(_e==null?void 0:_e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:$,parsedType:getParsedType($)},rt=this._parseSync({data:$,path:tt.path,parent:tt});return handleResult(tt,rt)}async parseAsync($,_e){const et=await this.safeParseAsync($,_e);if(et.success)return et.data;throw et.error}async safeParseAsync($,_e){const et={common:{issues:[],contextualErrorMap:_e==null?void 0:_e.errorMap,async:!0},path:(_e==null?void 0:_e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:$,parsedType:getParsedType($)},tt=this._parse({data:$,path:et.path,parent:et}),rt=await(isAsync(tt)?tt:Promise.resolve(tt));return handleResult(et,rt)}refine($,_e){const et=tt=>typeof _e=="string"||typeof _e>"u"?{message:_e}:typeof _e=="function"?_e(tt):_e;return this._refinement((tt,rt)=>{const nt=$(tt),it=()=>rt.addIssue({code:ZodIssueCode.custom,...et(tt)});return typeof Promise<"u"&&nt instanceof Promise?nt.then(st=>st?!0:(it(),!1)):nt?!0:(it(),!1)})}refinement($,_e){return this._refinement((et,tt)=>$(et)?!0:(tt.addIssue(typeof _e=="function"?_e(et,tt):_e),!1))}_refinement($){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:$}})}superRefine($){return this._refinement($)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or($){return ZodUnion.create([this,$],this._def)}and($){return ZodIntersection.create(this,$,this._def)}transform($){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:$}})}default($){const _e=typeof $=="function"?$:()=>$;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:_e,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch($){const _e=typeof $=="function"?$:()=>$;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:_e,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe($){const _e=this.constructor;return new _e({...this._def,description:$})}pipe($){return ZodPipeline.create(this,$)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6Regex=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex$1=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(_){let $="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return _.precision?$=`${$}\\.\\d{${_.precision}}`:_.precision==null&&($=`${$}(\\.\\d+)?`),$}function timeRegex$1(_){return new RegExp(`^${timeRegexSource(_)}$`)}function datetimeRegex(_){let $=`${dateRegexSource}T${timeRegexSource(_)}`;const _e=[];return _e.push(_.local?"Z?":"Z"),_.offset&&_e.push("([+-]\\d{2}:?\\d{2})"),$=`${$}(${_e.join("|")})`,new RegExp(`^${$}$`)}function isValidIP(_,$){return!!(($==="v4"||!$)&&ipv4Regex.test(_)||($==="v6"||!$)&&ipv6Regex.test(_))}class ZodString extends ZodType{_parse($){if(this._def.coerce&&($.data=String($.data)),this._getType($)!==ZodParsedType.string){const rt=this._getOrReturnCtx($);return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:rt.parsedType}),INVALID}const et=new ParseStatus;let tt;for(const rt of this._def.checks)if(rt.kind==="min")$.data.length<rt.value&&(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{code:ZodIssueCode.too_small,minimum:rt.value,type:"string",inclusive:!0,exact:!1,message:rt.message}),et.dirty());else if(rt.kind==="max")$.data.length>rt.value&&(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{code:ZodIssueCode.too_big,maximum:rt.value,type:"string",inclusive:!0,exact:!1,message:rt.message}),et.dirty());else if(rt.kind==="length"){const nt=$.data.length>rt.value,it=$.data.length<rt.value;(nt||it)&&(tt=this._getOrReturnCtx($,tt),nt?addIssueToContext(tt,{code:ZodIssueCode.too_big,maximum:rt.value,type:"string",inclusive:!0,exact:!0,message:rt.message}):it&&addIssueToContext(tt,{code:ZodIssueCode.too_small,minimum:rt.value,type:"string",inclusive:!0,exact:!0,message:rt.message}),et.dirty())}else if(rt.kind==="email")emailRegex.test($.data)||(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{validation:"email",code:ZodIssueCode.invalid_string,message:rt.message}),et.dirty());else if(rt.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test($.data)||(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{validation:"emoji",code:ZodIssueCode.invalid_string,message:rt.message}),et.dirty());else if(rt.kind==="uuid")uuidRegex.test($.data)||(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{validation:"uuid",code:ZodIssueCode.invalid_string,message:rt.message}),et.dirty());else if(rt.kind==="nanoid")nanoidRegex.test($.data)||(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:rt.message}),et.dirty());else if(rt.kind==="cuid")cuidRegex.test($.data)||(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{validation:"cuid",code:ZodIssueCode.invalid_string,message:rt.message}),et.dirty());else if(rt.kind==="cuid2")cuid2Regex.test($.data)||(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:rt.message}),et.dirty());else if(rt.kind==="ulid")ulidRegex.test($.data)||(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{validation:"ulid",code:ZodIssueCode.invalid_string,message:rt.message}),et.dirty());else if(rt.kind==="url")try{new URL($.data)}catch{tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{validation:"url",code:ZodIssueCode.invalid_string,message:rt.message}),et.dirty()}else rt.kind==="regex"?(rt.regex.lastIndex=0,rt.regex.test($.data)||(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{validation:"regex",code:ZodIssueCode.invalid_string,message:rt.message}),et.dirty())):rt.kind==="trim"?$.data=$.data.trim():rt.kind==="includes"?$.data.includes(rt.value,rt.position)||(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{code:ZodIssueCode.invalid_string,validation:{includes:rt.value,position:rt.position},message:rt.message}),et.dirty()):rt.kind==="toLowerCase"?$.data=$.data.toLowerCase():rt.kind==="toUpperCase"?$.data=$.data.toUpperCase():rt.kind==="startsWith"?$.data.startsWith(rt.value)||(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{code:ZodIssueCode.invalid_string,validation:{startsWith:rt.value},message:rt.message}),et.dirty()):rt.kind==="endsWith"?$.data.endsWith(rt.value)||(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{code:ZodIssueCode.invalid_string,validation:{endsWith:rt.value},message:rt.message}),et.dirty()):rt.kind==="datetime"?datetimeRegex(rt).test($.data)||(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{code:ZodIssueCode.invalid_string,validation:"datetime",message:rt.message}),et.dirty()):rt.kind==="date"?dateRegex$1.test($.data)||(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{code:ZodIssueCode.invalid_string,validation:"date",message:rt.message}),et.dirty()):rt.kind==="time"?timeRegex$1(rt).test($.data)||(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{code:ZodIssueCode.invalid_string,validation:"time",message:rt.message}),et.dirty()):rt.kind==="duration"?durationRegex.test($.data)||(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{validation:"duration",code:ZodIssueCode.invalid_string,message:rt.message}),et.dirty()):rt.kind==="ip"?isValidIP($.data,rt.version)||(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{validation:"ip",code:ZodIssueCode.invalid_string,message:rt.message}),et.dirty()):rt.kind==="base64"?base64Regex.test($.data)||(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{validation:"base64",code:ZodIssueCode.invalid_string,message:rt.message}),et.dirty()):util$3.assertNever(rt);return{status:et.value,value:$.data}}_regex($,_e,et){return this.refinement(tt=>$.test(tt),{validation:_e,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(et)})}_addCheck($){return new ZodString({...this._def,checks:[...this._def.checks,$]})}email($){return this._addCheck({kind:"email",...errorUtil.errToObj($)})}url($){return this._addCheck({kind:"url",...errorUtil.errToObj($)})}emoji($){return this._addCheck({kind:"emoji",...errorUtil.errToObj($)})}uuid($){return this._addCheck({kind:"uuid",...errorUtil.errToObj($)})}nanoid($){return this._addCheck({kind:"nanoid",...errorUtil.errToObj($)})}cuid($){return this._addCheck({kind:"cuid",...errorUtil.errToObj($)})}cuid2($){return this._addCheck({kind:"cuid2",...errorUtil.errToObj($)})}ulid($){return this._addCheck({kind:"ulid",...errorUtil.errToObj($)})}base64($){return this._addCheck({kind:"base64",...errorUtil.errToObj($)})}ip($){return this._addCheck({kind:"ip",...errorUtil.errToObj($)})}datetime($){var _e,et;return typeof $=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:$}):this._addCheck({kind:"datetime",precision:typeof($==null?void 0:$.precision)>"u"?null:$==null?void 0:$.precision,offset:(_e=$==null?void 0:$.offset)!==null&&_e!==void 0?_e:!1,local:(et=$==null?void 0:$.local)!==null&&et!==void 0?et:!1,...errorUtil.errToObj($==null?void 0:$.message)})}date($){return this._addCheck({kind:"date",message:$})}time($){return typeof $=="string"?this._addCheck({kind:"time",precision:null,message:$}):this._addCheck({kind:"time",precision:typeof($==null?void 0:$.precision)>"u"?null:$==null?void 0:$.precision,...errorUtil.errToObj($==null?void 0:$.message)})}duration($){return this._addCheck({kind:"duration",...errorUtil.errToObj($)})}regex($,_e){return this._addCheck({kind:"regex",regex:$,...errorUtil.errToObj(_e)})}includes($,_e){return this._addCheck({kind:"includes",value:$,position:_e==null?void 0:_e.position,...errorUtil.errToObj(_e==null?void 0:_e.message)})}startsWith($,_e){return this._addCheck({kind:"startsWith",value:$,...errorUtil.errToObj(_e)})}endsWith($,_e){return this._addCheck({kind:"endsWith",value:$,...errorUtil.errToObj(_e)})}min($,_e){return this._addCheck({kind:"min",value:$,...errorUtil.errToObj(_e)})}max($,_e){return this._addCheck({kind:"max",value:$,...errorUtil.errToObj(_e)})}length($,_e){return this._addCheck({kind:"length",value:$,...errorUtil.errToObj(_e)})}nonempty($){return this.min(1,errorUtil.errToObj($))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find($=>$.kind==="datetime")}get isDate(){return!!this._def.checks.find($=>$.kind==="date")}get isTime(){return!!this._def.checks.find($=>$.kind==="time")}get isDuration(){return!!this._def.checks.find($=>$.kind==="duration")}get isEmail(){return!!this._def.checks.find($=>$.kind==="email")}get isURL(){return!!this._def.checks.find($=>$.kind==="url")}get isEmoji(){return!!this._def.checks.find($=>$.kind==="emoji")}get isUUID(){return!!this._def.checks.find($=>$.kind==="uuid")}get isNANOID(){return!!this._def.checks.find($=>$.kind==="nanoid")}get isCUID(){return!!this._def.checks.find($=>$.kind==="cuid")}get isCUID2(){return!!this._def.checks.find($=>$.kind==="cuid2")}get isULID(){return!!this._def.checks.find($=>$.kind==="ulid")}get isIP(){return!!this._def.checks.find($=>$.kind==="ip")}get isBase64(){return!!this._def.checks.find($=>$.kind==="base64")}get minLength(){let $=null;for(const _e of this._def.checks)_e.kind==="min"&&($===null||_e.value>$)&&($=_e.value);return $}get maxLength(){let $=null;for(const _e of this._def.checks)_e.kind==="max"&&($===null||_e.value<$)&&($=_e.value);return $}}ZodString.create=_=>{var $;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:($=_==null?void 0:_.coerce)!==null&&$!==void 0?$:!1,...processCreateParams(_)})};function floatSafeRemainder(_,$){const _e=(_.toString().split(".")[1]||"").length,et=($.toString().split(".")[1]||"").length,tt=_e>et?_e:et,rt=parseInt(_.toFixed(tt).replace(".","")),nt=parseInt($.toFixed(tt).replace(".",""));return rt%nt/Math.pow(10,tt)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse($){if(this._def.coerce&&($.data=Number($.data)),this._getType($)!==ZodParsedType.number){const rt=this._getOrReturnCtx($);return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:rt.parsedType}),INVALID}let et;const tt=new ParseStatus;for(const rt of this._def.checks)rt.kind==="int"?util$3.isInteger($.data)||(et=this._getOrReturnCtx($,et),addIssueToContext(et,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:rt.message}),tt.dirty()):rt.kind==="min"?(rt.inclusive?$.data<rt.value:$.data<=rt.value)&&(et=this._getOrReturnCtx($,et),addIssueToContext(et,{code:ZodIssueCode.too_small,minimum:rt.value,type:"number",inclusive:rt.inclusive,exact:!1,message:rt.message}),tt.dirty()):rt.kind==="max"?(rt.inclusive?$.data>rt.value:$.data>=rt.value)&&(et=this._getOrReturnCtx($,et),addIssueToContext(et,{code:ZodIssueCode.too_big,maximum:rt.value,type:"number",inclusive:rt.inclusive,exact:!1,message:rt.message}),tt.dirty()):rt.kind==="multipleOf"?floatSafeRemainder($.data,rt.value)!==0&&(et=this._getOrReturnCtx($,et),addIssueToContext(et,{code:ZodIssueCode.not_multiple_of,multipleOf:rt.value,message:rt.message}),tt.dirty()):rt.kind==="finite"?Number.isFinite($.data)||(et=this._getOrReturnCtx($,et),addIssueToContext(et,{code:ZodIssueCode.not_finite,message:rt.message}),tt.dirty()):util$3.assertNever(rt);return{status:tt.value,value:$.data}}gte($,_e){return this.setLimit("min",$,!0,errorUtil.toString(_e))}gt($,_e){return this.setLimit("min",$,!1,errorUtil.toString(_e))}lte($,_e){return this.setLimit("max",$,!0,errorUtil.toString(_e))}lt($,_e){return this.setLimit("max",$,!1,errorUtil.toString(_e))}setLimit($,_e,et,tt){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:$,value:_e,inclusive:et,message:errorUtil.toString(tt)}]})}_addCheck($){return new ZodNumber({...this._def,checks:[...this._def.checks,$]})}int($){return this._addCheck({kind:"int",message:errorUtil.toString($)})}positive($){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString($)})}negative($){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString($)})}nonpositive($){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString($)})}nonnegative($){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString($)})}multipleOf($,_e){return this._addCheck({kind:"multipleOf",value:$,message:errorUtil.toString(_e)})}finite($){return this._addCheck({kind:"finite",message:errorUtil.toString($)})}safe($){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString($)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString($)})}get minValue(){let $=null;for(const _e of this._def.checks)_e.kind==="min"&&($===null||_e.value>$)&&($=_e.value);return $}get maxValue(){let $=null;for(const _e of this._def.checks)_e.kind==="max"&&($===null||_e.value<$)&&($=_e.value);return $}get isInt(){return!!this._def.checks.find($=>$.kind==="int"||$.kind==="multipleOf"&&util$3.isInteger($.value))}get isFinite(){let $=null,_e=null;for(const et of this._def.checks){if(et.kind==="finite"||et.kind==="int"||et.kind==="multipleOf")return!0;et.kind==="min"?(_e===null||et.value>_e)&&(_e=et.value):et.kind==="max"&&($===null||et.value<$)&&($=et.value)}return Number.isFinite(_e)&&Number.isFinite($)}}ZodNumber.create=_=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(_==null?void 0:_.coerce)||!1,...processCreateParams(_)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse($){if(this._def.coerce&&($.data=BigInt($.data)),this._getType($)!==ZodParsedType.bigint){const rt=this._getOrReturnCtx($);return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:rt.parsedType}),INVALID}let et;const tt=new ParseStatus;for(const rt of this._def.checks)rt.kind==="min"?(rt.inclusive?$.data<rt.value:$.data<=rt.value)&&(et=this._getOrReturnCtx($,et),addIssueToContext(et,{code:ZodIssueCode.too_small,type:"bigint",minimum:rt.value,inclusive:rt.inclusive,message:rt.message}),tt.dirty()):rt.kind==="max"?(rt.inclusive?$.data>rt.value:$.data>=rt.value)&&(et=this._getOrReturnCtx($,et),addIssueToContext(et,{code:ZodIssueCode.too_big,type:"bigint",maximum:rt.value,inclusive:rt.inclusive,message:rt.message}),tt.dirty()):rt.kind==="multipleOf"?$.data%rt.value!==BigInt(0)&&(et=this._getOrReturnCtx($,et),addIssueToContext(et,{code:ZodIssueCode.not_multiple_of,multipleOf:rt.value,message:rt.message}),tt.dirty()):util$3.assertNever(rt);return{status:tt.value,value:$.data}}gte($,_e){return this.setLimit("min",$,!0,errorUtil.toString(_e))}gt($,_e){return this.setLimit("min",$,!1,errorUtil.toString(_e))}lte($,_e){return this.setLimit("max",$,!0,errorUtil.toString(_e))}lt($,_e){return this.setLimit("max",$,!1,errorUtil.toString(_e))}setLimit($,_e,et,tt){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:$,value:_e,inclusive:et,message:errorUtil.toString(tt)}]})}_addCheck($){return new ZodBigInt({...this._def,checks:[...this._def.checks,$]})}positive($){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString($)})}negative($){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString($)})}nonpositive($){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString($)})}nonnegative($){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString($)})}multipleOf($,_e){return this._addCheck({kind:"multipleOf",value:$,message:errorUtil.toString(_e)})}get minValue(){let $=null;for(const _e of this._def.checks)_e.kind==="min"&&($===null||_e.value>$)&&($=_e.value);return $}get maxValue(){let $=null;for(const _e of this._def.checks)_e.kind==="max"&&($===null||_e.value<$)&&($=_e.value);return $}}ZodBigInt.create=_=>{var $;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:($=_==null?void 0:_.coerce)!==null&&$!==void 0?$:!1,...processCreateParams(_)})};class ZodBoolean extends ZodType{_parse($){if(this._def.coerce&&($.data=!!$.data),this._getType($)!==ZodParsedType.boolean){const et=this._getOrReturnCtx($);return addIssueToContext(et,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:et.parsedType}),INVALID}return OK($.data)}}ZodBoolean.create=_=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(_==null?void 0:_.coerce)||!1,...processCreateParams(_)});class ZodDate extends ZodType{_parse($){if(this._def.coerce&&($.data=new Date($.data)),this._getType($)!==ZodParsedType.date){const rt=this._getOrReturnCtx($);return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:rt.parsedType}),INVALID}if(isNaN($.data.getTime())){const rt=this._getOrReturnCtx($);return addIssueToContext(rt,{code:ZodIssueCode.invalid_date}),INVALID}const et=new ParseStatus;let tt;for(const rt of this._def.checks)rt.kind==="min"?$.data.getTime()<rt.value&&(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{code:ZodIssueCode.too_small,message:rt.message,inclusive:!0,exact:!1,minimum:rt.value,type:"date"}),et.dirty()):rt.kind==="max"?$.data.getTime()>rt.value&&(tt=this._getOrReturnCtx($,tt),addIssueToContext(tt,{code:ZodIssueCode.too_big,message:rt.message,inclusive:!0,exact:!1,maximum:rt.value,type:"date"}),et.dirty()):util$3.assertNever(rt);return{status:et.value,value:new Date($.data.getTime())}}_addCheck($){return new ZodDate({...this._def,checks:[...this._def.checks,$]})}min($,_e){return this._addCheck({kind:"min",value:$.getTime(),message:errorUtil.toString(_e)})}max($,_e){return this._addCheck({kind:"max",value:$.getTime(),message:errorUtil.toString(_e)})}get minDate(){let $=null;for(const _e of this._def.checks)_e.kind==="min"&&($===null||_e.value>$)&&($=_e.value);return $!=null?new Date($):null}get maxDate(){let $=null;for(const _e of this._def.checks)_e.kind==="max"&&($===null||_e.value<$)&&($=_e.value);return $!=null?new Date($):null}}ZodDate.create=_=>new ZodDate({checks:[],coerce:(_==null?void 0:_.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(_)});class ZodSymbol extends ZodType{_parse($){if(this._getType($)!==ZodParsedType.symbol){const et=this._getOrReturnCtx($);return addIssueToContext(et,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:et.parsedType}),INVALID}return OK($.data)}}ZodSymbol.create=_=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(_)});class ZodUndefined extends ZodType{_parse($){if(this._getType($)!==ZodParsedType.undefined){const et=this._getOrReturnCtx($);return addIssueToContext(et,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:et.parsedType}),INVALID}return OK($.data)}}ZodUndefined.create=_=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(_)});class ZodNull extends ZodType{_parse($){if(this._getType($)!==ZodParsedType.null){const et=this._getOrReturnCtx($);return addIssueToContext(et,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:et.parsedType}),INVALID}return OK($.data)}}ZodNull.create=_=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(_)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse($){return OK($.data)}}ZodAny.create=_=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(_)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse($){return OK($.data)}}ZodUnknown.create=_=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(_)});class ZodNever extends ZodType{_parse($){const _e=this._getOrReturnCtx($);return addIssueToContext(_e,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:_e.parsedType}),INVALID}}ZodNever.create=_=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(_)});class ZodVoid extends ZodType{_parse($){if(this._getType($)!==ZodParsedType.undefined){const et=this._getOrReturnCtx($);return addIssueToContext(et,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:et.parsedType}),INVALID}return OK($.data)}}ZodVoid.create=_=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(_)});class ZodArray extends ZodType{_parse($){const{ctx:_e,status:et}=this._processInputParams($),tt=this._def;if(_e.parsedType!==ZodParsedType.array)return addIssueToContext(_e,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:_e.parsedType}),INVALID;if(tt.exactLength!==null){const nt=_e.data.length>tt.exactLength.value,it=_e.data.length<tt.exactLength.value;(nt||it)&&(addIssueToContext(_e,{code:nt?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:it?tt.exactLength.value:void 0,maximum:nt?tt.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:tt.exactLength.message}),et.dirty())}if(tt.minLength!==null&&_e.data.length<tt.minLength.value&&(addIssueToContext(_e,{code:ZodIssueCode.too_small,minimum:tt.minLength.value,type:"array",inclusive:!0,exact:!1,message:tt.minLength.message}),et.dirty()),tt.maxLength!==null&&_e.data.length>tt.maxLength.value&&(addIssueToContext(_e,{code:ZodIssueCode.too_big,maximum:tt.maxLength.value,type:"array",inclusive:!0,exact:!1,message:tt.maxLength.message}),et.dirty()),_e.common.async)return Promise.all([..._e.data].map((nt,it)=>tt.type._parseAsync(new ParseInputLazyPath(_e,nt,_e.path,it)))).then(nt=>ParseStatus.mergeArray(et,nt));const rt=[..._e.data].map((nt,it)=>tt.type._parseSync(new ParseInputLazyPath(_e,nt,_e.path,it)));return ParseStatus.mergeArray(et,rt)}get element(){return this._def.type}min($,_e){return new ZodArray({...this._def,minLength:{value:$,message:errorUtil.toString(_e)}})}max($,_e){return new ZodArray({...this._def,maxLength:{value:$,message:errorUtil.toString(_e)}})}length($,_e){return new ZodArray({...this._def,exactLength:{value:$,message:errorUtil.toString(_e)}})}nonempty($){return this.min(1,$)}}ZodArray.create=(_,$)=>new ZodArray({type:_,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams($)});function deepPartialify(_){if(_ instanceof ZodObject){const $={};for(const _e in _.shape){const et=_.shape[_e];$[_e]=ZodOptional.create(deepPartialify(et))}return new ZodObject({..._._def,shape:()=>$})}else return _ instanceof ZodArray?new ZodArray({..._._def,type:deepPartialify(_.element)}):_ instanceof ZodOptional?ZodOptional.create(deepPartialify(_.unwrap())):_ instanceof ZodNullable?ZodNullable.create(deepPartialify(_.unwrap())):_ instanceof ZodTuple?ZodTuple.create(_.items.map($=>deepPartialify($))):_}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const $=this._def.shape(),_e=util$3.objectKeys($);return this._cached={shape:$,keys:_e}}_parse($){if(this._getType($)!==ZodParsedType.object){const at=this._getOrReturnCtx($);return addIssueToContext(at,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:at.parsedType}),INVALID}const{status:et,ctx:tt}=this._processInputParams($),{shape:rt,keys:nt}=this._getCached(),it=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const at in tt.data)nt.includes(at)||it.push(at);const st=[];for(const at of nt){const ot=rt[at],dt=tt.data[at];st.push({key:{status:"valid",value:at},value:ot._parse(new ParseInputLazyPath(tt,dt,tt.path,at)),alwaysSet:at in tt.data})}if(this._def.catchall instanceof ZodNever){const at=this._def.unknownKeys;if(at==="passthrough")for(const ot of it)st.push({key:{status:"valid",value:ot},value:{status:"valid",value:tt.data[ot]}});else if(at==="strict")it.length>0&&(addIssueToContext(tt,{code:ZodIssueCode.unrecognized_keys,keys:it}),et.dirty());else if(at!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const at=this._def.catchall;for(const ot of it){const dt=tt.data[ot];st.push({key:{status:"valid",value:ot},value:at._parse(new ParseInputLazyPath(tt,dt,tt.path,ot)),alwaysSet:ot in tt.data})}}return tt.common.async?Promise.resolve().then(async()=>{const at=[];for(const ot of st){const dt=await ot.key,ht=await ot.value;at.push({key:dt,value:ht,alwaysSet:ot.alwaysSet})}return at}).then(at=>ParseStatus.mergeObjectSync(et,at)):ParseStatus.mergeObjectSync(et,st)}get shape(){return this._def.shape()}strict($){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...$!==void 0?{errorMap:(_e,et)=>{var tt,rt,nt,it;const st=(nt=(rt=(tt=this._def).errorMap)===null||rt===void 0?void 0:rt.call(tt,_e,et).message)!==null&&nt!==void 0?nt:et.defaultError;return _e.code==="unrecognized_keys"?{message:(it=errorUtil.errToObj($).message)!==null&&it!==void 0?it:st}:{message:st}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend($){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...$})})}merge($){return new ZodObject({unknownKeys:$._def.unknownKeys,catchall:$._def.catchall,shape:()=>({...this._def.shape(),...$._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey($,_e){return this.augment({[$]:_e})}catchall($){return new ZodObject({...this._def,catchall:$})}pick($){const _e={};return util$3.objectKeys($).forEach(et=>{$[et]&&this.shape[et]&&(_e[et]=this.shape[et])}),new ZodObject({...this._def,shape:()=>_e})}omit($){const _e={};return util$3.objectKeys(this.shape).forEach(et=>{$[et]||(_e[et]=this.shape[et])}),new ZodObject({...this._def,shape:()=>_e})}deepPartial(){return deepPartialify(this)}partial($){const _e={};return util$3.objectKeys(this.shape).forEach(et=>{const tt=this.shape[et];$&&!$[et]?_e[et]=tt:_e[et]=tt.optional()}),new ZodObject({...this._def,shape:()=>_e})}required($){const _e={};return util$3.objectKeys(this.shape).forEach(et=>{if($&&!$[et])_e[et]=this.shape[et];else{let rt=this.shape[et];for(;rt instanceof ZodOptional;)rt=rt._def.innerType;_e[et]=rt}}),new ZodObject({...this._def,shape:()=>_e})}keyof(){return createZodEnum(util$3.objectKeys(this.shape))}}ZodObject.create=(_,$)=>new ZodObject({shape:()=>_,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams($)});ZodObject.strictCreate=(_,$)=>new ZodObject({shape:()=>_,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams($)});ZodObject.lazycreate=(_,$)=>new ZodObject({shape:_,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams($)});class ZodUnion extends ZodType{_parse($){const{ctx:_e}=this._processInputParams($),et=this._def.options;function tt(rt){for(const it of rt)if(it.result.status==="valid")return it.result;for(const it of rt)if(it.result.status==="dirty")return _e.common.issues.push(...it.ctx.common.issues),it.result;const nt=rt.map(it=>new ZodError(it.ctx.common.issues));return addIssueToContext(_e,{code:ZodIssueCode.invalid_union,unionErrors:nt}),INVALID}if(_e.common.async)return Promise.all(et.map(async rt=>{const nt={..._e,common:{..._e.common,issues:[]},parent:null};return{result:await rt._parseAsync({data:_e.data,path:_e.path,parent:nt}),ctx:nt}})).then(tt);{let rt;const nt=[];for(const st of et){const at={..._e,common:{..._e.common,issues:[]},parent:null},ot=st._parseSync({data:_e.data,path:_e.path,parent:at});if(ot.status==="valid")return ot;ot.status==="dirty"&&!rt&&(rt={result:ot,ctx:at}),at.common.issues.length&&nt.push(at.common.issues)}if(rt)return _e.common.issues.push(...rt.ctx.common.issues),rt.result;const it=nt.map(st=>new ZodError(st));return addIssueToContext(_e,{code:ZodIssueCode.invalid_union,unionErrors:it}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(_,$)=>new ZodUnion({options:_,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams($)});const getDiscriminator=_=>_ instanceof ZodLazy?getDiscriminator(_.schema):_ instanceof ZodEffects?getDiscriminator(_.innerType()):_ instanceof ZodLiteral?[_.value]:_ instanceof ZodEnum?_.options:_ instanceof ZodNativeEnum?util$3.objectValues(_.enum):_ instanceof ZodDefault?getDiscriminator(_._def.innerType):_ instanceof ZodUndefined?[void 0]:_ instanceof ZodNull?[null]:_ instanceof ZodOptional?[void 0,...getDiscriminator(_.unwrap())]:_ instanceof ZodNullable?[null,...getDiscriminator(_.unwrap())]:_ instanceof ZodBranded||_ instanceof ZodReadonly?getDiscriminator(_.unwrap()):_ instanceof ZodCatch?getDiscriminator(_._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse($){const{ctx:_e}=this._processInputParams($);if(_e.parsedType!==ZodParsedType.object)return addIssueToContext(_e,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:_e.parsedType}),INVALID;const et=this.discriminator,tt=_e.data[et],rt=this.optionsMap.get(tt);return rt?_e.common.async?rt._parseAsync({data:_e.data,path:_e.path,parent:_e}):rt._parseSync({data:_e.data,path:_e.path,parent:_e}):(addIssueToContext(_e,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[et]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create($,_e,et){const tt=new Map;for(const rt of _e){const nt=getDiscriminator(rt.shape[$]);if(!nt.length)throw new Error(`A discriminator value for key \`${$}\` could not be extracted from all schema options`);for(const it of nt){if(tt.has(it))throw new Error(`Discriminator property ${String($)} has duplicate value ${String(it)}`);tt.set(it,rt)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:$,options:_e,optionsMap:tt,...processCreateParams(et)})}}function mergeValues(_,$){const _e=getParsedType(_),et=getParsedType($);if(_===$)return{valid:!0,data:_};if(_e===ZodParsedType.object&&et===ZodParsedType.object){const tt=util$3.objectKeys($),rt=util$3.objectKeys(_).filter(it=>tt.indexOf(it)!==-1),nt={..._,...$};for(const it of rt){const st=mergeValues(_[it],$[it]);if(!st.valid)return{valid:!1};nt[it]=st.data}return{valid:!0,data:nt}}else if(_e===ZodParsedType.array&&et===ZodParsedType.array){if(_.length!==$.length)return{valid:!1};const tt=[];for(let rt=0;rt<_.length;rt++){const nt=_[rt],it=$[rt],st=mergeValues(nt,it);if(!st.valid)return{valid:!1};tt.push(st.data)}return{valid:!0,data:tt}}else return _e===ZodParsedType.date&&et===ZodParsedType.date&&+_==+$?{valid:!0,data:_}:{valid:!1}}class ZodIntersection extends ZodType{_parse($){const{status:_e,ctx:et}=this._processInputParams($),tt=(rt,nt)=>{if(isAborted(rt)||isAborted(nt))return INVALID;const it=mergeValues(rt.value,nt.value);return it.valid?((isDirty(rt)||isDirty(nt))&&_e.dirty(),{status:_e.value,value:it.data}):(addIssueToContext(et,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return et.common.async?Promise.all([this._def.left._parseAsync({data:et.data,path:et.path,parent:et}),this._def.right._parseAsync({data:et.data,path:et.path,parent:et})]).then(([rt,nt])=>tt(rt,nt)):tt(this._def.left._parseSync({data:et.data,path:et.path,parent:et}),this._def.right._parseSync({data:et.data,path:et.path,parent:et}))}}ZodIntersection.create=(_,$,_e)=>new ZodIntersection({left:_,right:$,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(_e)});class ZodTuple extends ZodType{_parse($){const{status:_e,ctx:et}=this._processInputParams($);if(et.parsedType!==ZodParsedType.array)return addIssueToContext(et,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:et.parsedType}),INVALID;if(et.data.length<this._def.items.length)return addIssueToContext(et,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&et.data.length>this._def.items.length&&(addIssueToContext(et,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_e.dirty());const rt=[...et.data].map((nt,it)=>{const st=this._def.items[it]||this._def.rest;return st?st._parse(new ParseInputLazyPath(et,nt,et.path,it)):null}).filter(nt=>!!nt);return et.common.async?Promise.all(rt).then(nt=>ParseStatus.mergeArray(_e,nt)):ParseStatus.mergeArray(_e,rt)}get items(){return this._def.items}rest($){return new ZodTuple({...this._def,rest:$})}}ZodTuple.create=(_,$)=>{if(!Array.isArray(_))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:_,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams($)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse($){const{status:_e,ctx:et}=this._processInputParams($);if(et.parsedType!==ZodParsedType.object)return addIssueToContext(et,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:et.parsedType}),INVALID;const tt=[],rt=this._def.keyType,nt=this._def.valueType;for(const it in et.data)tt.push({key:rt._parse(new ParseInputLazyPath(et,it,et.path,it)),value:nt._parse(new ParseInputLazyPath(et,et.data[it],et.path,it)),alwaysSet:it in et.data});return et.common.async?ParseStatus.mergeObjectAsync(_e,tt):ParseStatus.mergeObjectSync(_e,tt)}get element(){return this._def.valueType}static create($,_e,et){return _e instanceof ZodType?new ZodRecord({keyType:$,valueType:_e,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(et)}):new ZodRecord({keyType:ZodString.create(),valueType:$,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(_e)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse($){const{status:_e,ctx:et}=this._processInputParams($);if(et.parsedType!==ZodParsedType.map)return addIssueToContext(et,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:et.parsedType}),INVALID;const tt=this._def.keyType,rt=this._def.valueType,nt=[...et.data.entries()].map(([it,st],at)=>({key:tt._parse(new ParseInputLazyPath(et,it,et.path,[at,"key"])),value:rt._parse(new ParseInputLazyPath(et,st,et.path,[at,"value"]))}));if(et.common.async){const it=new Map;return Promise.resolve().then(async()=>{for(const st of nt){const at=await st.key,ot=await st.value;if(at.status==="aborted"||ot.status==="aborted")return INVALID;(at.status==="dirty"||ot.status==="dirty")&&_e.dirty(),it.set(at.value,ot.value)}return{status:_e.value,value:it}})}else{const it=new Map;for(const st of nt){const at=st.key,ot=st.value;if(at.status==="aborted"||ot.status==="aborted")return INVALID;(at.status==="dirty"||ot.status==="dirty")&&_e.dirty(),it.set(at.value,ot.value)}return{status:_e.value,value:it}}}}ZodMap.create=(_,$,_e)=>new ZodMap({valueType:$,keyType:_,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(_e)});class ZodSet extends ZodType{_parse($){const{status:_e,ctx:et}=this._processInputParams($);if(et.parsedType!==ZodParsedType.set)return addIssueToContext(et,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:et.parsedType}),INVALID;const tt=this._def;tt.minSize!==null&&et.data.size<tt.minSize.value&&(addIssueToContext(et,{code:ZodIssueCode.too_small,minimum:tt.minSize.value,type:"set",inclusive:!0,exact:!1,message:tt.minSize.message}),_e.dirty()),tt.maxSize!==null&&et.data.size>tt.maxSize.value&&(addIssueToContext(et,{code:ZodIssueCode.too_big,maximum:tt.maxSize.value,type:"set",inclusive:!0,exact:!1,message:tt.maxSize.message}),_e.dirty());const rt=this._def.valueType;function nt(st){const at=new Set;for(const ot of st){if(ot.status==="aborted")return INVALID;ot.status==="dirty"&&_e.dirty(),at.add(ot.value)}return{status:_e.value,value:at}}const it=[...et.data.values()].map((st,at)=>rt._parse(new ParseInputLazyPath(et,st,et.path,at)));return et.common.async?Promise.all(it).then(st=>nt(st)):nt(it)}min($,_e){return new ZodSet({...this._def,minSize:{value:$,message:errorUtil.toString(_e)}})}max($,_e){return new ZodSet({...this._def,maxSize:{value:$,message:errorUtil.toString(_e)}})}size($,_e){return this.min($,_e).max($,_e)}nonempty($){return this.min(1,$)}}ZodSet.create=(_,$)=>new ZodSet({valueType:_,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams($)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse($){const{ctx:_e}=this._processInputParams($);if(_e.parsedType!==ZodParsedType.function)return addIssueToContext(_e,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:_e.parsedType}),INVALID;function et(it,st){return makeIssue({data:it,path:_e.path,errorMaps:[_e.common.contextualErrorMap,_e.schemaErrorMap,getErrorMap(),errorMap].filter(at=>!!at),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:st}})}function tt(it,st){return makeIssue({data:it,path:_e.path,errorMaps:[_e.common.contextualErrorMap,_e.schemaErrorMap,getErrorMap(),errorMap].filter(at=>!!at),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:st}})}const rt={errorMap:_e.common.contextualErrorMap},nt=_e.data;if(this._def.returns instanceof ZodPromise){const it=this;return OK(async function(...st){const at=new ZodError([]),ot=await it._def.args.parseAsync(st,rt).catch(yt=>{throw at.addIssue(et(st,yt)),at}),dt=await Reflect.apply(nt,this,ot);return await it._def.returns._def.type.parseAsync(dt,rt).catch(yt=>{throw at.addIssue(tt(dt,yt)),at})})}else{const it=this;return OK(function(...st){const at=it._def.args.safeParse(st,rt);if(!at.success)throw new ZodError([et(st,at.error)]);const ot=Reflect.apply(nt,this,at.data),dt=it._def.returns.safeParse(ot,rt);if(!dt.success)throw new ZodError([tt(ot,dt.error)]);return dt.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...$){return new ZodFunction({...this._def,args:ZodTuple.create($).rest(ZodUnknown.create())})}returns($){return new ZodFunction({...this._def,returns:$})}implement($){return this.parse($)}strictImplement($){return this.parse($)}static create($,_e,et){return new ZodFunction({args:$||ZodTuple.create([]).rest(ZodUnknown.create()),returns:_e||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(et)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse($){const{ctx:_e}=this._processInputParams($);return this._def.getter()._parse({data:_e.data,path:_e.path,parent:_e})}}ZodLazy.create=(_,$)=>new ZodLazy({getter:_,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams($)});class ZodLiteral extends ZodType{_parse($){if($.data!==this._def.value){const _e=this._getOrReturnCtx($);return addIssueToContext(_e,{received:_e.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:$.data}}get value(){return this._def.value}}ZodLiteral.create=(_,$)=>new ZodLiteral({value:_,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams($)});function createZodEnum(_,$){return new ZodEnum({values:_,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams($)})}class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse($){if(typeof $.data!="string"){const _e=this._getOrReturnCtx($),et=this._def.values;return addIssueToContext(_e,{expected:util$3.joinValues(et),received:_e.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodEnum_cache)||__classPrivateFieldSet(this,_ZodEnum_cache,new Set(this._def.values)),!__classPrivateFieldGet(this,_ZodEnum_cache).has($.data)){const _e=this._getOrReturnCtx($),et=this._def.values;return addIssueToContext(_e,{received:_e.data,code:ZodIssueCode.invalid_enum_value,options:et}),INVALID}return OK($.data)}get options(){return this._def.values}get enum(){const $={};for(const _e of this._def.values)$[_e]=_e;return $}get Values(){const $={};for(const _e of this._def.values)$[_e]=_e;return $}get Enum(){const $={};for(const _e of this._def.values)$[_e]=_e;return $}extract($,_e=this._def){return ZodEnum.create($,{...this._def,..._e})}exclude($,_e=this._def){return ZodEnum.create(this.options.filter(et=>!$.includes(et)),{...this._def,..._e})}}_ZodEnum_cache=new WeakMap;ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse($){const _e=util$3.getValidEnumValues(this._def.values),et=this._getOrReturnCtx($);if(et.parsedType!==ZodParsedType.string&&et.parsedType!==ZodParsedType.number){const tt=util$3.objectValues(_e);return addIssueToContext(et,{expected:util$3.joinValues(tt),received:et.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodNativeEnum_cache)||__classPrivateFieldSet(this,_ZodNativeEnum_cache,new Set(util$3.getValidEnumValues(this._def.values))),!__classPrivateFieldGet(this,_ZodNativeEnum_cache).has($.data)){const tt=util$3.objectValues(_e);return addIssueToContext(et,{received:et.data,code:ZodIssueCode.invalid_enum_value,options:tt}),INVALID}return OK($.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap;ZodNativeEnum.create=(_,$)=>new ZodNativeEnum({values:_,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams($)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse($){const{ctx:_e}=this._processInputParams($);if(_e.parsedType!==ZodParsedType.promise&&_e.common.async===!1)return addIssueToContext(_e,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:_e.parsedType}),INVALID;const et=_e.parsedType===ZodParsedType.promise?_e.data:Promise.resolve(_e.data);return OK(et.then(tt=>this._def.type.parseAsync(tt,{path:_e.path,errorMap:_e.common.contextualErrorMap})))}}ZodPromise.create=(_,$)=>new ZodPromise({type:_,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams($)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse($){const{status:_e,ctx:et}=this._processInputParams($),tt=this._def.effect||null,rt={addIssue:nt=>{addIssueToContext(et,nt),nt.fatal?_e.abort():_e.dirty()},get path(){return et.path}};if(rt.addIssue=rt.addIssue.bind(rt),tt.type==="preprocess"){const nt=tt.transform(et.data,rt);if(et.common.async)return Promise.resolve(nt).then(async it=>{if(_e.value==="aborted")return INVALID;const st=await this._def.schema._parseAsync({data:it,path:et.path,parent:et});return st.status==="aborted"?INVALID:st.status==="dirty"||_e.value==="dirty"?DIRTY(st.value):st});{if(_e.value==="aborted")return INVALID;const it=this._def.schema._parseSync({data:nt,path:et.path,parent:et});return it.status==="aborted"?INVALID:it.status==="dirty"||_e.value==="dirty"?DIRTY(it.value):it}}if(tt.type==="refinement"){const nt=it=>{const st=tt.refinement(it,rt);if(et.common.async)return Promise.resolve(st);if(st instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return it};if(et.common.async===!1){const it=this._def.schema._parseSync({data:et.data,path:et.path,parent:et});return it.status==="aborted"?INVALID:(it.status==="dirty"&&_e.dirty(),nt(it.value),{status:_e.value,value:it.value})}else return this._def.schema._parseAsync({data:et.data,path:et.path,parent:et}).then(it=>it.status==="aborted"?INVALID:(it.status==="dirty"&&_e.dirty(),nt(it.value).then(()=>({status:_e.value,value:it.value}))))}if(tt.type==="transform")if(et.common.async===!1){const nt=this._def.schema._parseSync({data:et.data,path:et.path,parent:et});if(!isValid$1(nt))return nt;const it=tt.transform(nt.value,rt);if(it instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:_e.value,value:it}}else return this._def.schema._parseAsync({data:et.data,path:et.path,parent:et}).then(nt=>isValid$1(nt)?Promise.resolve(tt.transform(nt.value,rt)).then(it=>({status:_e.value,value:it})):nt);util$3.assertNever(tt)}}ZodEffects.create=(_,$,_e)=>new ZodEffects({schema:_,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:$,...processCreateParams(_e)});ZodEffects.createWithPreprocess=(_,$,_e)=>new ZodEffects({schema:$,effect:{type:"preprocess",transform:_},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(_e)});class ZodOptional extends ZodType{_parse($){return this._getType($)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse($)}unwrap(){return this._def.innerType}}ZodOptional.create=(_,$)=>new ZodOptional({innerType:_,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams($)});class ZodNullable extends ZodType{_parse($){return this._getType($)===ZodParsedType.null?OK(null):this._def.innerType._parse($)}unwrap(){return this._def.innerType}}ZodNullable.create=(_,$)=>new ZodNullable({innerType:_,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams($)});class ZodDefault extends ZodType{_parse($){const{ctx:_e}=this._processInputParams($);let et=_e.data;return _e.parsedType===ZodParsedType.undefined&&(et=this._def.defaultValue()),this._def.innerType._parse({data:et,path:_e.path,parent:_e})}removeDefault(){return this._def.innerType}}ZodDefault.create=(_,$)=>new ZodDefault({innerType:_,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof $.default=="function"?$.default:()=>$.default,...processCreateParams($)});class ZodCatch extends ZodType{_parse($){const{ctx:_e}=this._processInputParams($),et={..._e,common:{..._e.common,issues:[]}},tt=this._def.innerType._parse({data:et.data,path:et.path,parent:{...et}});return isAsync(tt)?tt.then(rt=>({status:"valid",value:rt.status==="valid"?rt.value:this._def.catchValue({get error(){return new ZodError(et.common.issues)},input:et.data})})):{status:"valid",value:tt.status==="valid"?tt.value:this._def.catchValue({get error(){return new ZodError(et.common.issues)},input:et.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(_,$)=>new ZodCatch({innerType:_,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof $.catch=="function"?$.catch:()=>$.catch,...processCreateParams($)});class ZodNaN extends ZodType{_parse($){if(this._getType($)!==ZodParsedType.nan){const et=this._getOrReturnCtx($);return addIssueToContext(et,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:et.parsedType}),INVALID}return{status:"valid",value:$.data}}}ZodNaN.create=_=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(_)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse($){const{ctx:_e}=this._processInputParams($),et=_e.data;return this._def.type._parse({data:et,path:_e.path,parent:_e})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse($){const{status:_e,ctx:et}=this._processInputParams($);if(et.common.async)return(async()=>{const rt=await this._def.in._parseAsync({data:et.data,path:et.path,parent:et});return rt.status==="aborted"?INVALID:rt.status==="dirty"?(_e.dirty(),DIRTY(rt.value)):this._def.out._parseAsync({data:rt.value,path:et.path,parent:et})})();{const tt=this._def.in._parseSync({data:et.data,path:et.path,parent:et});return tt.status==="aborted"?INVALID:tt.status==="dirty"?(_e.dirty(),{status:"dirty",value:tt.value}):this._def.out._parseSync({data:tt.value,path:et.path,parent:et})}}static create($,_e){return new ZodPipeline({in:$,out:_e,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse($){const _e=this._def.innerType._parse($),et=tt=>(isValid$1(tt)&&(tt.value=Object.freeze(tt.value)),tt);return isAsync(_e)?_e.then(tt=>et(tt)):et(_e)}unwrap(){return this._def.innerType}}ZodReadonly.create=(_,$)=>new ZodReadonly({innerType:_,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams($)});function custom(_,$={},_e){return _?ZodAny.create().superRefine((et,tt)=>{var rt,nt;if(!_(et)){const it=typeof $=="function"?$(et):typeof $=="string"?{message:$}:$,st=(nt=(rt=it.fatal)!==null&&rt!==void 0?rt:_e)!==null&&nt!==void 0?nt:!0,at=typeof it=="string"?{message:it}:it;tt.addIssue({code:"custom",...at,fatal:st})}}):ZodAny.create()}const late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(_){_.ZodString="ZodString",_.ZodNumber="ZodNumber",_.ZodNaN="ZodNaN",_.ZodBigInt="ZodBigInt",_.ZodBoolean="ZodBoolean",_.ZodDate="ZodDate",_.ZodSymbol="ZodSymbol",_.ZodUndefined="ZodUndefined",_.ZodNull="ZodNull",_.ZodAny="ZodAny",_.ZodUnknown="ZodUnknown",_.ZodNever="ZodNever",_.ZodVoid="ZodVoid",_.ZodArray="ZodArray",_.ZodObject="ZodObject",_.ZodUnion="ZodUnion",_.ZodDiscriminatedUnion="ZodDiscriminatedUnion",_.ZodIntersection="ZodIntersection",_.ZodTuple="ZodTuple",_.ZodRecord="ZodRecord",_.ZodMap="ZodMap",_.ZodSet="ZodSet",_.ZodFunction="ZodFunction",_.ZodLazy="ZodLazy",_.ZodLiteral="ZodLiteral",_.ZodEnum="ZodEnum",_.ZodEffects="ZodEffects",_.ZodNativeEnum="ZodNativeEnum",_.ZodOptional="ZodOptional",_.ZodNullable="ZodNullable",_.ZodDefault="ZodDefault",_.ZodCatch="ZodCatch",_.ZodPromise="ZodPromise",_.ZodBranded="ZodBranded",_.ZodPipeline="ZodPipeline",_.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(_,$={message:`Input not instance of ${_.name}`})=>custom(_e=>_e instanceof _,$),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:_=>ZodString.create({..._,coerce:!0}),number:_=>ZodNumber.create({..._,coerce:!0}),boolean:_=>ZodBoolean.create({..._,coerce:!0}),bigint:_=>ZodBigInt.create({..._,coerce:!0}),date:_=>ZodDate.create({..._,coerce:!0})},NEVER=INVALID;var z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid:isValid$1,isAsync,get util(){return util$3},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,datetimeRegex,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError});const Input$1=reactExports.forwardRef(({className:_,type:$,..._e},et)=>jsxRuntimeExports.jsx("input",{type:$,className:cn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm text-foreground",_),ref:et,..._e}));Input$1.displayName="Input";const Card=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx("div",{ref:_e,className:cn("rounded-lg border bg-card text-card-foreground shadow-sm",_),...$}));Card.displayName="Card";const CardHeader=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx("div",{ref:_e,className:cn("flex flex-col space-y-1.5 p-6",_),...$}));CardHeader.displayName="CardHeader";const CardTitle=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx("h3",{ref:_e,className:cn("text-2xl font-semibold leading-none tracking-tight",_),...$}));CardTitle.displayName="CardTitle";const CardDescription=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx("p",{ref:_e,className:cn("text-sm text-muted-foreground",_),...$}));CardDescription.displayName="CardDescription";const CardContent=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx("div",{ref:_e,className:cn("p-6 pt-0",_),...$}));CardContent.displayName="CardContent";const CardFooter=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx("div",{ref:_e,className:cn("flex items-center p-6 pt-0",_),...$}));CardFooter.displayName="CardFooter";var NAME$1="Label",Label$3=reactExports.forwardRef((_,$)=>jsxRuntimeExports.jsx(Primitive.label,{..._,ref:$,onMouseDown:_e=>{var tt;_e.target.closest("button, input, select, textarea")||((tt=_.onMouseDown)==null||tt.call(_,_e),!_e.defaultPrevented&&_e.detail>1&&_e.preventDefault())}}));Label$3.displayName=NAME$1;var Root$4=Label$3;const labelVariants=cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Label$2=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx(Root$4,{ref:_e,className:cn(labelVariants(),_),...$}));Label$2.displayName=Root$4.displayName;const Form=FormProvider,FormFieldContext=reactExports.createContext({}),FormField=({..._})=>jsxRuntimeExports.jsx(FormFieldContext.Provider,{value:{name:_.name},children:jsxRuntimeExports.jsx(Controller,{..._})}),useFormField=()=>{const _=reactExports.useContext(FormFieldContext),$=reactExports.useContext(FormItemContext),{getFieldState:_e,formState:et}=useFormContext(),tt=_e(_.name,et);if(!_)throw new Error("useFormField should be used within <FormField>");const{id:rt}=$;return{id:rt,name:_.name,formItemId:`${rt}-form-item`,formDescriptionId:`${rt}-form-item-description`,formMessageId:`${rt}-form-item-message`,...tt}},FormItemContext=reactExports.createContext({}),FormItem=reactExports.forwardRef(({className:_,...$},_e)=>{const et=reactExports.useId();return jsxRuntimeExports.jsx(FormItemContext.Provider,{value:{id:et},children:jsxRuntimeExports.jsx("div",{ref:_e,className:cn("space-y-2",_),...$})})});FormItem.displayName="FormItem";const FormLabel=reactExports.forwardRef(({className:_,...$},_e)=>{const{error:et,formItemId:tt}=useFormField();return jsxRuntimeExports.jsx(Label$2,{ref:_e,className:cn(et&&"text-destructive",_),htmlFor:tt,...$})});FormLabel.displayName="FormLabel";const FormControl=reactExports.forwardRef(({..._},$)=>{const{error:_e,formItemId:et,formDescriptionId:tt,formMessageId:rt}=useFormField();return jsxRuntimeExports.jsx(Slot,{ref:$,id:et,"aria-describedby":_e?`${tt} ${rt}`:`${tt}`,"aria-invalid":!!_e,..._})});FormControl.displayName="FormControl";const FormDescription=reactExports.forwardRef(({className:_,...$},_e)=>{const{formDescriptionId:et}=useFormField();return jsxRuntimeExports.jsx("p",{ref:_e,id:et,className:cn("text-sm text-muted-foreground",_),...$})});FormDescription.displayName="FormDescription";const FormMessage=reactExports.forwardRef(({className:_,children:$,..._e},et)=>{const{error:tt,formMessageId:rt}=useFormField(),nt=tt?String(tt==null?void 0:tt.message):$;return nt?jsxRuntimeExports.jsx("p",{ref:et,id:rt,className:cn("text-sm font-medium text-destructive",_),..._e,children:nt}):null});FormMessage.displayName="FormMessage";const loginSchema=z.object({email:z.string().email({message:"Please enter a valid email address"}),password:z.string().min(6,{message:"Password must be at least 6 characters"})}),LoginForm=()=>{const[_,$]=reactExports.useState(!1),{login:_e}=useAuth();useToast();const et=useForm({resolver:t$1(loginSchema),defaultValues:{email:"",password:""}}),tt=async rt=>{try{$(!0),await _e(rt.email,rt.password)}catch(nt){console.error("Login error:",nt)}finally{$(!1)}};return jsxRuntimeExports.jsxs(Card,{className:"w-full max-w-md mx-auto shadow-lg",children:[jsxRuntimeExports.jsxs(CardHeader,{className:"space-y-1 flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center mb-2",children:jsxRuntimeExports.jsx(ChartArea,{className:"h-8 w-8 text-cryptoBlue"})}),jsxRuntimeExports.jsx(CardTitle,{className:"text-2xl text-center",children:"CryptoSuite"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Enter your credentials to access your account"})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx(Form,{...et,children:jsxRuntimeExports.jsxs("form",{onSubmit:et.handleSubmit(tt),className:"space-y-4",children:[jsxRuntimeExports.jsx(FormField,{control:et.control,name:"email",render:({field:rt})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Email"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input$1,{placeholder:"email@example.com",...rt})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:et.control,name:"password",render:({field:rt})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Password"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input$1,{type:"password",placeholder:"••••••••",...rt})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"w-full",disabled:_,children:_?"Logging in...":"Login"})]})})}),jsxRuntimeExports.jsxs(CardFooter,{className:"flex flex-col space-y-2",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["Don't have an account?"," ",jsxRuntimeExports.jsx("a",{href:"/register",className:"text-primary hover:underline",children:"Sign up"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Use the following credentials to test:"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-muted-foreground text-center",children:[jsxRuntimeExports.jsx("p",{children:"Email: test@example.com"}),jsxRuntimeExports.jsx("p",{children:"Password: password"})]})]})]})},Login=()=>{const{user:_,isLoading:$}=useAuth(),_e=useNavigate();return reactExports.useEffect(()=>{_&&_e("/dashboard")},[_,_e]),$?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"animate-pulse",children:"Loading..."})}):jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:jsxRuntimeExports.jsx("div",{className:"w-full max-w-md",children:jsxRuntimeExports.jsx(LoginForm,{})})})},Index=()=>{const{isAuthenticated:_}=useAuth();return _?jsxRuntimeExports.jsx(Navigate,{to:"/dashboard",replace:!0}):jsxRuntimeExports.jsx(Login,{})};var NAME="Separator",DEFAULT_ORIENTATION="horizontal",ORIENTATIONS=["horizontal","vertical"],Separator$2=reactExports.forwardRef((_,$)=>{const{decorative:_e,orientation:et=DEFAULT_ORIENTATION,...tt}=_,rt=isValidOrientation(et)?et:DEFAULT_ORIENTATION,it=_e?{role:"none"}:{"aria-orientation":rt==="vertical"?rt:void 0,role:"separator"};return jsxRuntimeExports.jsx(Primitive.div,{"data-orientation":rt,...it,...tt,ref:$})});Separator$2.displayName=NAME;function isValidOrientation(_){return ORIENTATIONS.includes(_)}var Root$3=Separator$2;const Separator$1=reactExports.forwardRef(({className:_,orientation:$="horizontal",decorative:_e=!0,...et},tt)=>jsxRuntimeExports.jsx(Root$3,{ref:tt,decorative:_e,orientation:$,className:cn("shrink-0 bg-border",$==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",_),...et}));Separator$1.displayName=Root$3.displayName;const PageHeader=({title:_,subtitle:$,actions:_e,className:et})=>jsxRuntimeExports.jsxs("div",{className:cn("mb-6",et),children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:_}),$&&jsxRuntimeExports.jsx("p",{className:"text-muted-foreground mt-1",children:$})]}),_e&&jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:_e})]}),jsxRuntimeExports.jsx(Separator$1,{className:"mt-4"})]}),WS_URL="wss://testnet.binancefuture.com/ws",BASE_API_URL="https://testnet.binancefuture.com",PING_INTERVAL=3e4,MAX_REQUESTS_PER_MINUTE=600,REQUEST_WINDOW_MS=6e4,RATE_LIMIT_BUFFER=200,BAN_CHECK_STORAGE_KEY="binance-ban-timestamp",ts=class ts{constructor(){vn(this,"ws",null);vn(this,"pingInterval",null);vn(this,"subscribers",new Map);vn(this,"accountSubscribers",new Set);vn(this,"klineSubscribers",new Map);vn(this,"depthSubscribers",new Map);vn(this,"listenKey",null);vn(this,"listenKeyInterval",null);vn(this,"authService");vn(this,"reconnectAttempts",0);vn(this,"maxReconnectAttempts",5);vn(this,"reconnectInterval",1e4);vn(this,"isConnecting",!1);vn(this,"requestTimestamps",[]);vn(this,"pendingRequests",new Map);vn(this,"orderHistoryCache",new Map);vn(this,"accountInfoCache",null);vn(this,"banInfo",{isBanned:!1,banUntil:0});vn(this,"lastBanCheckTime",0);this.authService=AuthService.getInstance(),this.loadBanInfo()}get isConnected(){return this.ws!==null&&this.ws.readyState===WebSocket.OPEN}static getInstance(){return ts.instance||(ts.instance=new ts),ts.instance}loadBanInfo(){try{const $=localStorage.getItem(BAN_CHECK_STORAGE_KEY);$&&(this.banInfo=JSON.parse($),console.log(`Loaded ban info: banned until ${new Date(this.banInfo.banUntil).toLocaleString()}`),this.banInfo.isBanned&&Date.now()>this.banInfo.banUntil&&(console.log("Ban period has expired, resetting ban info"),this.resetBanInfo()))}catch($){console.error("Error loading ban info:",$),this.resetBanInfo()}}resetBanInfo(){this.banInfo={isBanned:!1,banUntil:0},localStorage.setItem(BAN_CHECK_STORAGE_KEY,JSON.stringify(this.banInfo))}checkIfBanned(){if(!this.banInfo.isBanned||Date.now()>this.banInfo.banUntil)return this.banInfo.isBanned&&this.resetBanInfo(),!1;const $=this.banInfo.banUntil-Date.now(),_e=Math.ceil($/6e4),et=Date.now();return et-this.lastBanCheckTime>6e4&&(console.warn(`IP is currently banned by Binance for ${_e} more minutes. Using cached data only.`),this.lastBanCheckTime=et),!0}setBanned($){this.banInfo={isBanned:!0,banUntil:$},localStorage.setItem(BAN_CHECK_STORAGE_KEY,JSON.stringify(this.banInfo));const _e=Math.ceil(($-Date.now())/6e4);console.warn(`IP has been banned by Binance until ${new Date($).toLocaleString()} (${_e} minutes). Will use cached data only during this period.`)}detectBanFromError($){if(!$||!$.message)return!1;const _e=/IP\(.*\) banned until (\d+)/,et=$.message.match(_e);if(et&&et[1]){const tt=parseInt(et[1],10);if(!isNaN(tt))return this.setBanned(tt),!0}return $.message.includes("418")||$.message.toLowerCase().includes("banned")?(this.setBanned(Date.now()+432e5),!0):!1}canMakeRequest(){if(this.checkIfBanned())return!1;const $=Date.now();return this.requestTimestamps=this.requestTimestamps.filter(_e=>$-_e<REQUEST_WINDOW_MS),this.requestTimestamps.length<MAX_REQUESTS_PER_MINUTE-RATE_LIMIT_BUFFER}async waitForRateLimit(){if(this.checkIfBanned())throw new Error(`API requests are blocked due to Binance IP ban until ${new Date(this.banInfo.banUntil).toLocaleString()}`);if(this.canMakeRequest()){this.requestTimestamps.push(Date.now());return}return console.log("Rate limit reached, waiting for an available slot..."),new Promise(($,_e)=>{const tt=Date.now(),nt=(this.requestTimestamps.length>0?Math.min(...this.requestTimestamps):Date.now()-REQUEST_WINDOW_MS)+REQUEST_WINDOW_MS,it=Math.max(100,nt-Date.now());console.log(`Next request slot available in ~${Math.ceil(it/1e3)}s`);let st=null;const at=()=>{if(Date.now()-tt>3e4){if(console.error(`Timeout after ${3e4/1e3}s waiting for rate limit window`),clearTimeout(st),this.requestTimestamps.length>MAX_REQUESTS_PER_MINUTE-RATE_LIMIT_BUFFER-10){const dt=Math.ceil(this.requestTimestamps.length*.1);this.requestTimestamps.sort((ht,yt)=>ht-yt),this.requestTimestamps=this.requestTimestamps.slice(dt),console.warn(`Forcibly removed ${dt} old timestamps to prevent deadlock`)}_e(new Error(`Timeout waiting for rate limit window (${this.requestTimestamps.length}/${MAX_REQUESTS_PER_MINUTE} requests in window)`));return}if(this.checkIfBanned()){clearTimeout(st),_e(new Error(`API requests are blocked due to Binance IP ban until ${new Date(this.banInfo.banUntil).toLocaleString()}`));return}if(this.canMakeRequest())this.requestTimestamps.push(Date.now()),$();else{const dt=Math.max(100,nt-Date.now()),ht=Math.min(1e3,Math.max(100,dt/2));st=setTimeout(at,ht)}},ot=Math.min(1e3,it/2);st=setTimeout(at,ot)})}async makeAuthenticatedRequest($,_e,et={},tt=!0,rt,nt=3e4,it=!1){const st=this.authService.getApiCredentials();if(tt&&!st)throw new Error("API credentials not found");if(!it&&this.checkIfBanned())throw new Error(`API requests are blocked due to Binance IP ban until ${new Date(this.banInfo.banUntil).toLocaleString()}`);if(rt){const at=this.pendingRequests.get(rt);if(at&&at.length>0)return console.log(`Request to ${$} already pending, waiting for result...`),new Promise((ot,dt)=>{at.push({resolve:ot,reject:dt,params:et})});this.pendingRequests.set(rt,[])}try{await this.waitForRateLimit()}catch(at){throw rt&&this.pendingRequests.has(rt)&&((this.pendingRequests.get(rt)||[]).forEach(({reject:dt})=>dt(at)),this.pendingRequests.delete(rt)),at}try{tt&&(et.timestamp=Date.now().toString());let at=`${BASE_API_URL}${$}`,ot=null;const dt={"Content-Type":"application/x-www-form-urlencoded"};st!=null&&st.binanceApiKey&&(dt["X-MBX-APIKEY"]=st.binanceApiKey);let ht=this.buildQueryString(et);if(tt&&st){const xt=await this.generateSignature(ht,st.binanceSecretKey);ht=`${ht}&signature=${xt}`}_e==="GET"||_e==="DELETE"?at=`${at}?${ht}`:ot=ht,console.log(`Making ${_e} request to ${$}`);const yt=new AbortController,vt=setTimeout(()=>yt.abort(),3e4);try{const xt=await fetch(at,{method:_e,headers:dt,body:_e==="POST"||_e==="PUT"?ot:null,signal:yt.signal,credentials:"omit",cache:_e==="GET"?"default":"no-store"});if(clearTimeout(vt),!xt.ok){const Et=await xt.text();if(xt.status===418||xt.status===429)try{const At=JSON.parse(Et);if(At&&At.code===-1003){const jt=/IP\(.*\) banned until (\d+)/,kt=At.msg.match(jt);if(kt&&kt[1]){const Lt=parseInt(kt[1],10);isNaN(Lt)?this.setBanned(Date.now()+12*60*60*1e3):this.setBanned(Lt)}else this.setBanned(Date.now()+12*60*60*1e3)}}catch(At){console.error("Error parsing API error response:",At)}throw new Error(`Request failed: ${xt.status} ${xt.statusText} - ${Et}`)}let wt={};try{wt=await xt.json()}catch(Et){console.error("Error parsing response JSON:",Et),wt={}}return rt&&this.pendingRequests.has(rt)&&((this.pendingRequests.get(rt)||[]).forEach(({resolve:At})=>At(wt)),this.pendingRequests.delete(rt)),wt}catch(xt){throw clearTimeout(vt),xt.name==="AbortError"?new Error("Request timed out after 30 seconds"):xt}}catch(at){this.detectBanFromError(at);const ot=new Error(`Network error while ${_e} ${$}: ${at instanceof Error?at.message:"Unknown error"}`);throw rt&&this.pendingRequests.has(rt)&&((this.pendingRequests.get(rt)||[]).forEach(({reject:ht})=>ht(ot)),this.pendingRequests.delete(rt)),ot}}async connect(){if(this.isConnecting||this.ws&&this.ws.readyState===WebSocket.OPEN){console.log("Connection already in progress or established");return}this.isConnecting=!0;try{const $=this.authService.getApiCredentials();this.ws=new WebSocket(WS_URL),this.ws.onopen=()=>{console.log("WebSocket connected"),this.startPingInterval(),this.reconnectAttempts=0,this.isConnecting=!1,this.resubscribeAll(),$!=null&&$.binanceApiKey&&this.accountSubscribers.size>0&&this.getListenKey($.binanceApiKey).then(_e=>{var et;_e&&((et=this.ws)==null?void 0:et.readyState)===WebSocket.OPEN&&this.sendSubscription([_e])}).catch(_e=>{console.error("Failed to get listen key after connection:",_e)})},this.ws.onmessage=_e=>{try{const et=JSON.parse(_e.data);this.handleMessage(et)}catch(et){console.error("Error parsing WebSocket message:",et)}},this.ws.onclose=_e=>{console.log(`WebSocket disconnected: ${_e.code} - ${_e.reason}`),this.stopPingInterval(),this.isConnecting=!1,this.handleReconnect()},this.ws.onerror=_e=>{console.error("WebSocket error:",_e),this.isConnecting=!1}}catch($){console.error("Failed to connect to WebSocket:",$),this.isConnecting=!1,this.handleReconnect()}}async getListenKey($){if(this.checkIfBanned())return console.warn("Cannot get listen key: IP is banned"),null;try{if(this.listenKey)return this.listenKey;const _e=await this.makeAuthenticatedRequest("/fapi/v1/listenKey","POST",{},!1,"listenKey",3e4,!0);return this.listenKey=_e.listenKey,this.startListenKeyRefresh($),this.listenKey}catch(_e){return console.error("Failed to get listen key:",_e),this.detectBanFromError(_e),null}}handleReconnect(){if(this.reconnectAttempts<this.maxReconnectAttempts){const $=this.reconnectInterval*Math.pow(2,this.reconnectAttempts);this.reconnectAttempts++,console.log(`Attempting to reconnect (${this.reconnectAttempts}/${this.maxReconnectAttempts}) in ${$}ms`),setTimeout(()=>this.connect(),$)}else console.error(`Failed to reconnect after ${this.maxReconnectAttempts} attempts`),setTimeout(()=>{this.reconnectAttempts=0,this.connect()},6e4)}resubscribeAll(){!this.ws||this.ws.readyState!==WebSocket.OPEN||(this.subscribers.forEach(($,_e)=>{this.sendSubscription([`${_e.toLowerCase()}@ticker`])}),this.klineSubscribers.forEach(($,_e)=>{const[et,tt]=_e.split("_");this.sendSubscription([`${et.toLowerCase()}@kline_${tt}`])}),this.depthSubscribers.forEach(($,_e)=>{this.sendSubscription([`${_e.toLowerCase()}@depth20@100ms`])}),this.listenKey&&this.accountSubscribers.size>0&&this.sendSubscription([this.listenKey]))}startListenKeyRefresh($){this.listenKeyInterval&&clearInterval(this.listenKeyInterval),this.listenKeyInterval=setInterval(async()=>{try{if(!this.listenKey)return;await this.makeAuthenticatedRequest("/fapi/v1/listenKey","PUT",{},!1,"refreshListenKey")}catch(_e){console.error("Failed to refresh listen key:",_e),this.listenKey=null,this.getListenKey($).catch(et=>{console.error("Failed to get new listen key after refresh failure:",et)})}},55*60*1e3)}handleMessage($){var _e,et,tt;if($.id!=="pong")if($.e==="24hrTicker"){const rt=$.s;if(rt&&this.subscribers.has(rt)){const nt={symbol:$.s,price:parseFloat($.c),change:parseFloat($.p),changePercent:parseFloat($.P),volume:parseFloat($.v),high24h:parseFloat($.h),low24h:parseFloat($.l),lastUpdated:new Date().toISOString()};(_e=this.subscribers.get(rt))==null||_e.forEach(it=>{try{it(nt)}catch(st){console.error(`Error in market data callback for ${rt}:`,st)}})}}else if($.e==="kline"){const rt=$.s,nt=$.k.i,it=`${rt}_${nt}`;if(this.klineSubscribers.has(it)){const st={time:$.k.t,open:parseFloat($.k.o),high:parseFloat($.k.h),low:parseFloat($.k.l),close:parseFloat($.k.c),volume:parseFloat($.k.v),isClosed:$.k.x};(et=this.klineSubscribers.get(it))==null||et.forEach(at=>{try{at(st)}catch(ot){console.error(`Error in kline callback for ${it}:`,ot)}})}}else if($.e==="depthUpdate"){const rt=$.s;rt&&this.depthSubscribers.has(rt)&&((tt=this.depthSubscribers.get(rt))==null||tt.forEach(nt=>{try{nt($)}catch(it){console.error(`Error in depth callback for ${rt}:`,it)}}))}else($.e==="ACCOUNT_UPDATE"||$.e==="ORDER_TRADE_UPDATE")&&this.accountSubscribers.forEach(rt=>{try{rt($)}catch(nt){console.error("Error in account update callback:",nt)}})}sendSubscription($){if(!this.ws||this.ws.readyState!==WebSocket.OPEN){console.log("WebSocket not open, cannot subscribe");return}try{this.ws.send(JSON.stringify({method:"SUBSCRIBE",params:$,id:Date.now()}))}catch(_e){console.error("Error sending subscription:",_e)}}sendUnsubscription($){if(!this.ws||this.ws.readyState!==WebSocket.OPEN){console.log("WebSocket not open, cannot unsubscribe");return}try{this.ws.send(JSON.stringify({method:"UNSUBSCRIBE",params:$,id:Date.now()}))}catch(_e){console.error("Error sending unsubscription:",_e)}}subscribe($,_e){var et,tt;(!this.ws||this.ws.readyState!==WebSocket.OPEN)&&this.connect(),this.subscribers.has($)||(this.subscribers.set($,new Set),((et=this.ws)==null?void 0:et.readyState)===WebSocket.OPEN&&this.sendSubscription([`${$.toLowerCase()}@ticker`])),(tt=this.subscribers.get($))==null||tt.add(_e)}subscribeKlines($,_e,et){var rt,nt;(!this.ws||this.ws.readyState!==WebSocket.OPEN)&&this.connect();const tt=`${$}_${_e}`;this.klineSubscribers.has(tt)||(this.klineSubscribers.set(tt,new Set),((rt=this.ws)==null?void 0:rt.readyState)===WebSocket.OPEN&&this.sendSubscription([`${$.toLowerCase()}@kline_${_e}`])),(nt=this.klineSubscribers.get(tt))==null||nt.add(et)}subscribeDepth($,_e){var et,tt;(!this.ws||this.ws.readyState!==WebSocket.OPEN)&&this.connect(),this.depthSubscribers.has($)||(this.depthSubscribers.set($,new Set),((et=this.ws)==null?void 0:et.readyState)===WebSocket.OPEN&&this.sendSubscription([`${$.toLowerCase()}@depth20@100ms`])),(tt=this.depthSubscribers.get($))==null||tt.add(_e)}subscribeAccount($){this.accountSubscribers.add($),!this.ws||this.ws.readyState!==WebSocket.OPEN?this.connect():this.listenKey&&this.sendSubscription([this.listenKey])}unsubscribe($,_e){var tt;const et=this.subscribers.get($);et&&(et.delete(_e),et.size===0&&(this.subscribers.delete($),((tt=this.ws)==null?void 0:tt.readyState)===WebSocket.OPEN&&this.sendUnsubscription([`${$.toLowerCase()}@ticker`])))}unsubscribeKlines($,_e,et){var nt;const tt=`${$}_${_e}`,rt=this.klineSubscribers.get(tt);rt&&(rt.delete(et),rt.size===0&&(this.klineSubscribers.delete(tt),((nt=this.ws)==null?void 0:nt.readyState)===WebSocket.OPEN&&this.sendUnsubscription([`${$.toLowerCase()}@kline_${_e}`])))}unsubscribeDepth($,_e){var tt;const et=this.depthSubscribers.get($);et&&(et.delete(_e),et.size===0&&(this.depthSubscribers.delete($),((tt=this.ws)==null?void 0:tt.readyState)===WebSocket.OPEN&&this.sendUnsubscription([`${$.toLowerCase()}@depth20@100ms`])))}unsubscribeAccount($){var _e;this.accountSubscribers.delete($),this.accountSubscribers.size===0&&this.listenKey&&((_e=this.ws)==null?void 0:_e.readyState)===WebSocket.OPEN&&this.sendUnsubscription([this.listenKey])}async placeOrder($,_e,et,tt,rt,nt){var it;try{if(!navigator.onLine)throw new Error("No internet connection available");if(this.isConnected||(console.warn("WebSocket is not connected, attempting to connect before placing order"),await this.connect()),!$||!_e||!et||!tt||tt<=0)throw new Error("Invalid order parameters");if(et==="LIMIT"&&(!rt||rt<=0))throw new Error("Price is required for LIMIT orders");if(nt)try{await this.setLeverage($,nt)}catch(dt){console.warn("Failed to set leverage, proceeding with order anyway:",dt)}const st={symbol:$.replace("/",""),side:_e,type:et,quantity:tt.toString()};rt&&et==="LIMIT"&&(st.price=rt.toString()),et==="LIMIT"&&(st.timeInForce="GTC"),console.log("Placing order with params:",st);let at=0;const ot=3;for(;at<ot;)try{const dt=await this.makeAuthenticatedRequest("/fapi/v1/order","POST",st,!0,`order_${$}_${_e}_${et}_${tt}_${rt||""}`);return{id:((it=dt.orderId)==null?void 0:it.toString())||String(Date.now()),symbol:dt.symbol||$.replace("/",""),side:dt.side||_e,status:dt.status||"NEW",quantity:parseFloat(dt.origQty)||tt,price:parseFloat(dt.price)||rt||0,entryPrice:parseFloat(dt.price)||parseFloat(dt.avgPrice)||rt||0,entryTime:dt.time?new Date(dt.time).toISOString():new Date().toISOString(),type:dt.type||et,timestamp:dt.time||Date.now(),leverage:nt||1}}catch(dt){at++;const ht=dt instanceof Error?dt.message:"Unknown error";if(at>=ot||ht.includes("Invalid API-key")||ht.includes("Signature")||ht.includes("Parameter")||ht.includes("banned"))throw dt;const yt=Math.pow(2,at)*1e3;console.warn(`Order attempt ${at} failed, retrying in ${yt}ms:`,dt),await new Promise(vt=>setTimeout(vt,yt))}throw new Error(`Failed to place order after ${ot} attempts`)}catch(st){console.error("Error placing order:",st);let at="Failed to place order";throw st instanceof Error&&(st.message.includes("Failed to fetch")?at="Network error: Could not connect to Binance API. Please check your internet connection.":st.message.includes("banned")?at="Your IP is currently banned by Binance. Please try again later.":st.message.includes("Invalid API-key")?at="Invalid API credentials. Please check your API key and secret.":st.message.includes("Signature")?at="Authentication error. Please check your API credentials.":st.message.includes("Parameter")?at="Invalid order parameters. Please check your order details.":at=`Error: ${st.message}`),new Error(at)}}async setLeverage($,_e){try{await this.makeAuthenticatedRequest("/fapi/v1/leverage","POST",{symbol:$.replace("/",""),leverage:_e.toString()},!0,`leverage_${$}_${_e}`)}catch(et){throw console.error("Error setting leverage:",et),et}}async getAccountInfo(){var _e;const $=Date.now();if(this.accountInfoCache&&$-this.accountInfoCache.timestamp<6e4)return this.accountInfoCache.data;if(this.checkIfBanned())return this.accountInfoCache?(console.warn("Using expired account info cache due to IP ban"),this.accountInfoCache.data):(console.warn("Returning mock account info due to IP ban"),{positions:[],assets:[],canTrade:!1,canDeposit:!1,canWithdraw:!1,updateTime:Date.now(),totalWalletBalance:"0.00000000"});try{const et="account_info";if(this.pendingRequests.has(et)&&((_e=this.pendingRequests.get(et))!=null&&_e.length))return console.log("Account info request already in progress, waiting for result..."),new Promise((rt,nt)=>{var it;(it=this.pendingRequests.get(et))==null||it.push({resolve:rt,reject:nt,params:{}})});this.pendingRequests.set(et,[]);const tt=await this.makeAuthenticatedRequest("/fapi/v2/account","GET",{},!0,et,6e4);return tt&&(this.accountInfoCache={data:tt,timestamp:$}),tt}catch(et){if(console.error("Error getting account info:",et),this.detectBanFromError(et),(this.checkIfBanned()||et.toString().includes("rate limit"))&&this.accountInfoCache)return console.warn("Using expired account info cache due to rate limit or ban"),this.accountInfoCache.data;throw et}}async getOpenPositions(){var _e;const $="open_positions";try{if(this.pendingRequests.has($)&&((_e=this.pendingRequests.get($))!=null&&_e.length))return console.log("Open positions request already in progress, waiting for result..."),new Promise((nt,it)=>{var st;(st=this.pendingRequests.get($))==null||st.push({resolve:nt,reject:it,params:{}})});this.pendingRequests.set($,[]);let et=0;const tt=3,rt=await this.getAccountInfo().catch(async nt=>{if(nt.toString().includes("rate limit")&&et<tt){et++;const it=Math.pow(2,et)*1e3;return console.warn(`Retrying getOpenPositions in ${it}ms due to rate limit (attempt ${et}/${tt})`),await new Promise(st=>setTimeout(st,it)),this.getAccountInfo()}throw nt});if(rt&&rt.positions){const nt=rt.positions.filter(st=>parseFloat(st.positionAmt)!==0).map(st=>({symbol:st.symbol,side:parseFloat(st.positionAmt)>0?"LONG":"SHORT",size:Math.abs(parseFloat(st.positionAmt)),entryPrice:parseFloat(st.entryPrice),markPrice:parseFloat(st.markPrice),unrealizedPnL:parseFloat(st.unrealizedProfit),leverage:parseFloat(st.leverage)}));return(this.pendingRequests.get($)||[]).forEach(({resolve:st})=>st(nt)),this.pendingRequests.delete($),nt}return[]}catch(et){return console.error("Error getting open positions:",et),this.detectBanFromError(et),(this.pendingRequests.get($)||[]).forEach(({reject:rt})=>rt(et)),this.pendingRequests.delete($),[]}}async getOrderHistory($){const _e=`orderHistory_${$||"all"}`,et=Date.now(),tt=this.orderHistoryCache.get(_e);if(tt&&et-tt.timestamp<6e4)return tt.data;if(this.checkIfBanned())return tt?(console.warn("Using expired order history cache due to IP ban"),tt.data):(console.warn("Cannot fetch order history: IP is banned. Returning empty array."),[]);try{const rt={limit:"50"};$&&(rt.symbol=$.replace("/",""));const it=(await this.makeAuthenticatedRequest("/fapi/v1/allOrders","GET",rt,!0,`orders_${$||"all"}`,6e4)).map(st=>({id:st.orderId.toString(),symbol:st.symbol,side:st.side,type:st.type,quantity:parseFloat(st.origQty),price:parseFloat(st.price),entryPrice:parseFloat(st.avgPrice)||parseFloat(st.price)||0,entryTime:new Date(st.time).toISOString(),status:st.status,timestamp:st.time,leverage:1}));return this.orderHistoryCache.set(_e,{data:it,timestamp:et}),it}catch(rt){if(console.error("Error getting order history:",rt),this.detectBanFromError(rt),tt)return console.log("Using cached order history due to API error"),tt.data;throw rt}}getBanStatus(){this.checkIfBanned();const $=Math.max(0,this.banInfo.banUntil-Date.now());return{isBanned:this.banInfo.isBanned&&$>0,banUntil:this.banInfo.banUntil,remainingMinutes:Math.ceil($/(60*1e3))}}buildQueryString($){return Object.entries($).map(([_e,et])=>`${_e}=${encodeURIComponent(et)}`).join("&")}async generateSignature($,_e){const et=new TextEncoder,tt=et.encode(_e),rt=et.encode($),nt=await crypto.subtle.importKey("raw",tt,{name:"HMAC",hash:"SHA-256"},!1,["sign"]),it=await crypto.subtle.sign("HMAC",nt,rt);return Array.from(new Uint8Array(it)).map(st=>st.toString(16).padStart(2,"0")).join("")}disconnect(){this.ws&&(this.ws.close(),this.ws=null),this.stopPingInterval(),this.listenKeyInterval&&(clearInterval(this.listenKeyInterval),this.listenKeyInterval=null)}startPingInterval(){this.pingInterval=setInterval(()=>{var $;if((($=this.ws)==null?void 0:$.readyState)===WebSocket.OPEN)try{this.ws.send(JSON.stringify({method:"ping",id:"pong"}))}catch(_e){console.error("Error sending ping:",_e)}},PING_INTERVAL)}stopPingInterval(){this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}};vn(ts,"instance");let BinanceWebSocket=ts;const USE_MOCK_DATA$1=!1,MIN_REFRESH_INTERVAL$1=3e4,CACHE_EXPIRY=5*60*1e3,useMarketData=(_,$="1m")=>{const[_e,et]=reactExports.useState(null),[tt,rt]=reactExports.useState([]),[nt,it]=reactExports.useState(!0),[st,at]=reactExports.useState(null),ot=reactExports.useRef(0),dt=reactExports.useRef(new Map),ht=reactExports.useRef(!0),yt=reactExports.useRef(!1),vt=BinanceWebSocket.getInstance(),xt=reactExports.useCallback(async(wt=!1)=>{const Et=`${_}_${$}`,At=Date.now();if(yt.current){console.log("Kline fetch already in progress, skipping");return}if(!wt&&At-ot.current<MIN_REFRESH_INTERVAL$1){console.log(`Skipping klines update, last update was ${(At-ot.current)/1e3}s ago`);return}const jt=dt.current.get(Et);if(jt&&!wt&&At-jt.timestamp<CACHE_EXPIRY){console.log("Using cached klines data"),rt(jt.data);return}if(ht.current)try{if(yt.current=!0,it(!0),tt.length>0&&!wt){console.log("Already have klines data from WebSocket, skipping REST fetch");return}const kt=_.replace("/","");let Lt=0;const Bt=3;let Gt=!1;for(;Lt<Bt&&!Gt;)try{Lt>0&&await new Promise(Mt=>setTimeout(Mt,1e3*Math.pow(2,Lt)));const er=await fetch(`https://testnet.binancefuture.com/fapi/v1/klines?symbol=${kt}&interval=${$}&limit=100`);if(!er.ok){const Mt=await er.text();throw new Error(`Failed to fetch klines: ${er.status} ${er.statusText} - ${Mt}`)}const tr=await er.json();if(!ht.current)return;const ar=tr.map(Mt=>({time:Mt[0],open:parseFloat(Mt[1]),high:parseFloat(Mt[2]),low:parseFloat(Mt[3]),close:parseFloat(Mt[4]),volume:parseFloat(Mt[5])}));dt.current.set(Et,{data:ar,timestamp:At}),rt(ar),at(null),ot.current=At,Gt=!0}catch(er){if(Lt++,console.error(`Error fetching klines (attempt ${Lt}/${Bt}):`,er),Lt===Bt){if(!ht.current)return;at("Failed to fetch klines data. Using cached data if available."),jt&&(console.log("Using expired cache data after fetch failure"),rt(jt.data))}}}catch(kt){console.error("Unexpected error fetching klines:",kt),at("An unexpected error occurred")}finally{ht.current&&it(!1),yt.current=!1}},[_,$]);return reactExports.useEffect(()=>{ht.current=!0,rt([]),et(null),at(null),it(!0);const wt=setTimeout(()=>{xt().catch(jt=>{console.error("Error in initial klines fetch:",jt)})},500),Et=jt=>{ht.current&&et(jt)},At=jt=>{ht.current&&(jt.isClosed?rt(kt=>{const Lt=[...kt],Bt=Lt.findIndex(er=>er.time===jt.time);Bt>=0?Lt[Bt]=jt:(Lt.push(jt),Lt.length>100&&Lt.shift());const Gt=`${_}_${$}`;return dt.current.set(Gt,{data:Lt,timestamp:Date.now()}),Lt}):rt(kt=>{const Lt=[...kt],Bt=Lt.length-1;if(Bt>=0&&Lt[Bt].time===jt.time){Lt[Bt]=jt;const Gt=`${_}_${$}`;dt.current.set(Gt,{data:Lt,timestamp:Date.now()})}return Lt}))};return vt.subscribe(_,Et),vt.subscribeKlines(_,$,At),()=>{ht.current=!1,clearTimeout(wt),vt.unsubscribe(_,Et),vt.unsubscribeKlines(_,$,At)}},[_,$,xt,vt]),{marketData:_e,klines:tt,isLoading:nt,error:st,refetchKlines:()=>xt(!0)}},USE_MOCK_DATA=!1,MIN_REFRESH_INTERVAL=3e4,ERROR_RETRY_INTERVAL=5*60*1e3,useTrades=()=>{const[_,$]=useLocalStorage("crypto-trades",[]),[_e,et]=reactExports.useState([]),[tt,rt]=reactExports.useState(!0),[nt,it]=reactExports.useState(null),st=reactExports.useRef(0),at=reactExports.useRef(0),ot=reactExports.useRef(0),dt=reactExports.useRef(!1),ht=reactExports.useRef(!0),yt=BinanceWebSocket.getInstance(),vt=AuthService.getInstance(),xt=reactExports.useCallback(()=>yt.getBanStatus(),[yt]),wt=reactExports.useCallback(async(Lt=!1)=>{const Bt=Date.now(),Gt=xt();if(Gt.isBanned){if(console.log(`Skipping positions fetch due to IP ban (${Gt.remainingMinutes} minutes remaining)`),rt(!1),_e.length>0&&Bt-ot.current<ERROR_RETRY_INTERVAL)return;Bt-ot.current>ERROR_RETRY_INTERVAL&&(it(`Using cached positions data due to Binance IP ban (${Gt.remainingMinutes} min remaining)`),ot.current=Bt);return}if(!Lt&&Bt-st.current<MIN_REFRESH_INTERVAL){console.log(`Skipping positions update, last update was ${(Bt-st.current)/1e3}s ago`);return}try{rt(!0);const er=await yt.getOpenPositions();if(!ht.current)return;et(er),st.current=Bt,it(null)}catch(er){const tr=er instanceof Error?er.message:"Erro desconhecido";if(console.error("Error fetching positions:",er),!ht.current)return;if(tr.includes("ban")||tr.includes("418")){const ar=xt();ar.isBanned?it(`Using cached positions data due to Binance IP ban (${ar.remainingMinutes} min remaining)`):Bt-st.current>ERROR_RETRY_INTERVAL&&it("Failed to fetch positions. Using cached data.")}else Bt-st.current>ERROR_RETRY_INTERVAL&&it("Failed to fetch positions. Using cached data.");ot.current=Bt}finally{ht.current&&rt(!1)}},[yt,_e.length,xt]),Et=reactExports.useCallback(async(Lt=!1)=>{const Bt=Date.now(),Gt=xt();if(Gt.isBanned){if(console.log(`Skipping trades sync due to IP ban (${Gt.remainingMinutes} minutes remaining)`),rt(!1),_.length>0&&Bt-ot.current<ERROR_RETRY_INTERVAL)return;Bt-ot.current>ERROR_RETRY_INTERVAL&&(it(`Using cached trades data due to Binance IP ban (${Gt.remainingMinutes} min remaining)`),ot.current=Bt);return}if(!Lt&&Bt-at.current<MIN_REFRESH_INTERVAL){console.log(`Skipping trades update, last update was ${(Bt-at.current)/1e3}s ago`);return}try{rt(!0);const er=await yt.getOrderHistory("BTCUSDT");if(!ht.current)return;$(er),at.current=Bt,it(null)}catch(er){const tr=er instanceof Error?er.message:"Erro desconhecido";if(console.error("Error syncing trades:",er),!ht.current)return;if(tr.includes("ban")||tr.includes("418")){const ar=xt();ar.isBanned?it(`Using cached trades data due to Binance IP ban (${ar.remainingMinutes} min remaining)`):Bt-at.current>ERROR_RETRY_INTERVAL&&it("Failed to sync trades. Using cached data.")}else Bt-at.current>ERROR_RETRY_INTERVAL&&it("Failed to sync trades. Using cached data.");ot.current=Bt}finally{ht.current&&rt(!1)}},[yt,$,_.length,xt]),At=reactExports.useCallback(async(Lt,Bt,Gt,er,tr,ar)=>{try{const Mt=xt();if(Mt.isBanned)throw new Error(`Cannot place orders: Binance IP ban active for ${Mt.remainingMinutes} more minutes`);rt(!0),it(null);const lt=await yt.placeOrder(Lt,Bt,Gt,er,tr,ar);return $(mt=>{const gt=mt.findIndex(bt=>bt.id===lt.id);if(gt>=0){const bt=[...mt];return bt[gt]=lt,bt}else return[...mt,lt]}),await wt(!0),lt}catch(Mt){const lt=Mt instanceof Error?Mt.message:"Erro ao criar ordem";throw it(lt),console.error("Error creating order:",Mt),xt(),Mt}finally{rt(!1)}},[wt,$,yt,xt]),jt=reactExports.useCallback(async()=>{if(!dt.current&&vt.hasApiCredentials())try{const Lt=xt();if(await yt.connect(),Lt.isBanned)console.warn(`Initialization limited due to Binance IP ban (${Lt.remainingMinutes} minutes remaining). Using cached data if available.`);else{if(await wt(!0),await new Promise(Bt=>setTimeout(Bt,1e3)),!ht.current)return;await Et(!0)}dt.current=!0}catch(Lt){console.error("Failed to initialize data:",Lt)}},[vt,yt,wt,Et,xt]);reactExports.useEffect(()=>{ht.current=!0,setTimeout(()=>{jt()},1e3);const Lt=Bt=>{if(Bt.e==="ACCOUNT_UPDATE"){if(Bt.a&&Bt.a.P){const Gt=Bt.a.P.filter(er=>parseFloat(er.pa)!==0).map(er=>({symbol:er.s,side:parseFloat(er.pa)>0?"LONG":"SHORT",size:Math.abs(parseFloat(er.pa)),entryPrice:parseFloat(er.ep),markPrice:parseFloat(er.mp||er.ep),unrealizedPnL:parseFloat(er.up),leverage:parseFloat(er.l||1)}));Gt.length>0&&(et(Gt),st.current=Date.now())}}else if(Bt.e==="ORDER_TRADE_UPDATE"){const Gt=Bt.o,er={id:Gt.i.toString(),symbol:Gt.s,side:Gt.S,status:Gt.X,quantity:parseFloat(Gt.q),price:parseFloat(Gt.p||0),entryPrice:parseFloat(Gt.ap||Gt.p),entryTime:new Date(Gt.T).toISOString(),type:Gt.o,timestamp:Gt.T,leverage:parseFloat(Gt.lev||1)};$(tr=>{const ar=tr.findIndex(Mt=>Mt.id===er.id);if(ar>=0){const Mt=[...tr];return Mt[ar]=er,Mt}else return[...tr,er]}),at.current=Date.now()}};return vt.hasApiCredentials()&&yt.subscribeAccount(Lt),()=>{ht.current=!1,vt.hasApiCredentials()&&yt.unsubscribeAccount(Lt)}},[jt,yt,vt,$]);const kt=reactExports.useCallback(()=>xt(),[xt]);return{trades:_,positions:_e,isLoading:tt,error:nt,syncTradesFromBinance:()=>Et(!0),fetchPositions:()=>wt(!0),createOrder:At,addTrade:async Lt=>{$(Bt=>[...Bt,Lt])},getBanStatus:kt}};function toDate(_){const $=Object.prototype.toString.call(_);return _ instanceof Date||typeof _=="object"&&$==="[object Date]"?new _.constructor(+_):typeof _=="number"||$==="[object Number]"||typeof _=="string"||$==="[object String]"?new Date(_):new Date(NaN)}function constructFrom(_,$){return _ instanceof Date?new _.constructor($):new Date($)}const millisecondsInWeek=6048e5,millisecondsInDay=864e5,millisecondsInMinute=6e4,millisecondsInHour=36e5;let defaultOptions={};function getDefaultOptions(){return defaultOptions}function startOfWeek(_,$){var it,st,at,ot;const _e=getDefaultOptions(),et=($==null?void 0:$.weekStartsOn)??((st=(it=$==null?void 0:$.locale)==null?void 0:it.options)==null?void 0:st.weekStartsOn)??_e.weekStartsOn??((ot=(at=_e.locale)==null?void 0:at.options)==null?void 0:ot.weekStartsOn)??0,tt=toDate(_),rt=tt.getDay(),nt=(rt<et?7:0)+rt-et;return tt.setDate(tt.getDate()-nt),tt.setHours(0,0,0,0),tt}function startOfISOWeek(_){return startOfWeek(_,{weekStartsOn:1})}function getISOWeekYear(_){const $=toDate(_),_e=$.getFullYear(),et=constructFrom(_,0);et.setFullYear(_e+1,0,4),et.setHours(0,0,0,0);const tt=startOfISOWeek(et),rt=constructFrom(_,0);rt.setFullYear(_e,0,4),rt.setHours(0,0,0,0);const nt=startOfISOWeek(rt);return $.getTime()>=tt.getTime()?_e+1:$.getTime()>=nt.getTime()?_e:_e-1}function startOfDay(_){const $=toDate(_);return $.setHours(0,0,0,0),$}function getTimezoneOffsetInMilliseconds(_){const $=toDate(_),_e=new Date(Date.UTC($.getFullYear(),$.getMonth(),$.getDate(),$.getHours(),$.getMinutes(),$.getSeconds(),$.getMilliseconds()));return _e.setUTCFullYear($.getFullYear()),+_-+_e}function differenceInCalendarDays(_,$){const _e=startOfDay(_),et=startOfDay($),tt=+_e-getTimezoneOffsetInMilliseconds(_e),rt=+et-getTimezoneOffsetInMilliseconds(et);return Math.round((tt-rt)/millisecondsInDay)}function startOfISOWeekYear(_){const $=getISOWeekYear(_),_e=constructFrom(_,0);return _e.setFullYear($,0,4),_e.setHours(0,0,0,0),startOfISOWeek(_e)}function isDate(_){return _ instanceof Date||typeof _=="object"&&Object.prototype.toString.call(_)==="[object Date]"}function isValid(_){if(!isDate(_)&&typeof _!="number")return!1;const $=toDate(_);return!isNaN(Number($))}function startOfYear(_){const $=toDate(_),_e=constructFrom(_,0);return _e.setFullYear($.getFullYear(),0,1),_e.setHours(0,0,0,0),_e}const formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=(_,$,_e)=>{let et;const tt=formatDistanceLocale[_];return typeof tt=="string"?et=tt:$===1?et=tt.one:et=tt.other.replace("{{count}}",$.toString()),_e!=null&&_e.addSuffix?_e.comparison&&_e.comparison>0?"in "+et:et+" ago":et};function buildFormatLongFn(_){return($={})=>{const _e=$.width?String($.width):_.defaultWidth;return _.formats[_e]||_.formats[_.defaultWidth]}}const dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=(_,$,_e,et)=>formatRelativeLocale[_];function buildLocalizeFn(_){return($,_e)=>{const et=_e!=null&&_e.context?String(_e.context):"standalone";let tt;if(et==="formatting"&&_.formattingValues){const nt=_.defaultFormattingWidth||_.defaultWidth,it=_e!=null&&_e.width?String(_e.width):nt;tt=_.formattingValues[it]||_.formattingValues[nt]}else{const nt=_.defaultWidth,it=_e!=null&&_e.width?String(_e.width):_.defaultWidth;tt=_.values[it]||_.values[nt]}const rt=_.argumentCallback?_.argumentCallback($):$;return tt[rt]}}const eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=(_,$)=>{const _e=Number(_),et=_e%100;if(et>20||et<10)switch(et%10){case 1:return _e+"st";case 2:return _e+"nd";case 3:return _e+"rd"}return _e+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:_=>_-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};function buildMatchFn(_){return($,_e={})=>{const et=_e.width,tt=et&&_.matchPatterns[et]||_.matchPatterns[_.defaultMatchWidth],rt=$.match(tt);if(!rt)return null;const nt=rt[0],it=et&&_.parsePatterns[et]||_.parsePatterns[_.defaultParseWidth],st=Array.isArray(it)?findIndex$2(it,dt=>dt.test(nt)):findKey(it,dt=>dt.test(nt));let at;at=_.valueCallback?_.valueCallback(st):st,at=_e.valueCallback?_e.valueCallback(at):at;const ot=$.slice(nt.length);return{value:at,rest:ot}}}function findKey(_,$){for(const _e in _)if(Object.prototype.hasOwnProperty.call(_,_e)&&$(_[_e]))return _e}function findIndex$2(_,$){for(let _e=0;_e<_.length;_e++)if($(_[_e]))return _e}function buildMatchPatternFn(_){return($,_e={})=>{const et=$.match(_.matchPattern);if(!et)return null;const tt=et[0],rt=$.match(_.parsePattern);if(!rt)return null;let nt=_.valueCallback?_.valueCallback(rt[0]):rt[0];nt=_e.valueCallback?_e.valueCallback(nt):nt;const it=$.slice(tt.length);return{value:nt,rest:it}}}const matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:_=>parseInt(_,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:_=>_+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},enUS={code:"en-US",formatDistance,formatLong,formatRelative,localize,match,options:{weekStartsOn:0,firstWeekContainsDate:1}};function getDayOfYear(_){const $=toDate(_);return differenceInCalendarDays($,startOfYear($))+1}function getISOWeek(_){const $=toDate(_),_e=+startOfISOWeek($)-+startOfISOWeekYear($);return Math.round(_e/millisecondsInWeek)+1}function getWeekYear(_,$){var ot,dt,ht,yt;const _e=toDate(_),et=_e.getFullYear(),tt=getDefaultOptions(),rt=($==null?void 0:$.firstWeekContainsDate)??((dt=(ot=$==null?void 0:$.locale)==null?void 0:ot.options)==null?void 0:dt.firstWeekContainsDate)??tt.firstWeekContainsDate??((yt=(ht=tt.locale)==null?void 0:ht.options)==null?void 0:yt.firstWeekContainsDate)??1,nt=constructFrom(_,0);nt.setFullYear(et+1,0,rt),nt.setHours(0,0,0,0);const it=startOfWeek(nt,$),st=constructFrom(_,0);st.setFullYear(et,0,rt),st.setHours(0,0,0,0);const at=startOfWeek(st,$);return _e.getTime()>=it.getTime()?et+1:_e.getTime()>=at.getTime()?et:et-1}function startOfWeekYear(_,$){var it,st,at,ot;const _e=getDefaultOptions(),et=($==null?void 0:$.firstWeekContainsDate)??((st=(it=$==null?void 0:$.locale)==null?void 0:it.options)==null?void 0:st.firstWeekContainsDate)??_e.firstWeekContainsDate??((ot=(at=_e.locale)==null?void 0:at.options)==null?void 0:ot.firstWeekContainsDate)??1,tt=getWeekYear(_,$),rt=constructFrom(_,0);return rt.setFullYear(tt,0,et),rt.setHours(0,0,0,0),startOfWeek(rt,$)}function getWeek(_,$){const _e=toDate(_),et=+startOfWeek(_e,$)-+startOfWeekYear(_e,$);return Math.round(et/millisecondsInWeek)+1}function addLeadingZeros(_,$){const _e=_<0?"-":"",et=Math.abs(_).toString().padStart($,"0");return _e+et}const lightFormatters={y(_,$){const _e=_.getFullYear(),et=_e>0?_e:1-_e;return addLeadingZeros($==="yy"?et%100:et,$.length)},M(_,$){const _e=_.getMonth();return $==="M"?String(_e+1):addLeadingZeros(_e+1,2)},d(_,$){return addLeadingZeros(_.getDate(),$.length)},a(_,$){const _e=_.getHours()/12>=1?"pm":"am";switch($){case"a":case"aa":return _e.toUpperCase();case"aaa":return _e;case"aaaaa":return _e[0];case"aaaa":default:return _e==="am"?"a.m.":"p.m."}},h(_,$){return addLeadingZeros(_.getHours()%12||12,$.length)},H(_,$){return addLeadingZeros(_.getHours(),$.length)},m(_,$){return addLeadingZeros(_.getMinutes(),$.length)},s(_,$){return addLeadingZeros(_.getSeconds(),$.length)},S(_,$){const _e=$.length,et=_.getMilliseconds(),tt=Math.trunc(et*Math.pow(10,_e-3));return addLeadingZeros(tt,$.length)}},dayPeriodEnum={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},formatters={G:function(_,$,_e){const et=_.getFullYear()>0?1:0;switch($){case"G":case"GG":case"GGG":return _e.era(et,{width:"abbreviated"});case"GGGGG":return _e.era(et,{width:"narrow"});case"GGGG":default:return _e.era(et,{width:"wide"})}},y:function(_,$,_e){if($==="yo"){const et=_.getFullYear(),tt=et>0?et:1-et;return _e.ordinalNumber(tt,{unit:"year"})}return lightFormatters.y(_,$)},Y:function(_,$,_e,et){const tt=getWeekYear(_,et),rt=tt>0?tt:1-tt;if($==="YY"){const nt=rt%100;return addLeadingZeros(nt,2)}return $==="Yo"?_e.ordinalNumber(rt,{unit:"year"}):addLeadingZeros(rt,$.length)},R:function(_,$){const _e=getISOWeekYear(_);return addLeadingZeros(_e,$.length)},u:function(_,$){const _e=_.getFullYear();return addLeadingZeros(_e,$.length)},Q:function(_,$,_e){const et=Math.ceil((_.getMonth()+1)/3);switch($){case"Q":return String(et);case"QQ":return addLeadingZeros(et,2);case"Qo":return _e.ordinalNumber(et,{unit:"quarter"});case"QQQ":return _e.quarter(et,{width:"abbreviated",context:"formatting"});case"QQQQQ":return _e.quarter(et,{width:"narrow",context:"formatting"});case"QQQQ":default:return _e.quarter(et,{width:"wide",context:"formatting"})}},q:function(_,$,_e){const et=Math.ceil((_.getMonth()+1)/3);switch($){case"q":return String(et);case"qq":return addLeadingZeros(et,2);case"qo":return _e.ordinalNumber(et,{unit:"quarter"});case"qqq":return _e.quarter(et,{width:"abbreviated",context:"standalone"});case"qqqqq":return _e.quarter(et,{width:"narrow",context:"standalone"});case"qqqq":default:return _e.quarter(et,{width:"wide",context:"standalone"})}},M:function(_,$,_e){const et=_.getMonth();switch($){case"M":case"MM":return lightFormatters.M(_,$);case"Mo":return _e.ordinalNumber(et+1,{unit:"month"});case"MMM":return _e.month(et,{width:"abbreviated",context:"formatting"});case"MMMMM":return _e.month(et,{width:"narrow",context:"formatting"});case"MMMM":default:return _e.month(et,{width:"wide",context:"formatting"})}},L:function(_,$,_e){const et=_.getMonth();switch($){case"L":return String(et+1);case"LL":return addLeadingZeros(et+1,2);case"Lo":return _e.ordinalNumber(et+1,{unit:"month"});case"LLL":return _e.month(et,{width:"abbreviated",context:"standalone"});case"LLLLL":return _e.month(et,{width:"narrow",context:"standalone"});case"LLLL":default:return _e.month(et,{width:"wide",context:"standalone"})}},w:function(_,$,_e,et){const tt=getWeek(_,et);return $==="wo"?_e.ordinalNumber(tt,{unit:"week"}):addLeadingZeros(tt,$.length)},I:function(_,$,_e){const et=getISOWeek(_);return $==="Io"?_e.ordinalNumber(et,{unit:"week"}):addLeadingZeros(et,$.length)},d:function(_,$,_e){return $==="do"?_e.ordinalNumber(_.getDate(),{unit:"date"}):lightFormatters.d(_,$)},D:function(_,$,_e){const et=getDayOfYear(_);return $==="Do"?_e.ordinalNumber(et,{unit:"dayOfYear"}):addLeadingZeros(et,$.length)},E:function(_,$,_e){const et=_.getDay();switch($){case"E":case"EE":case"EEE":return _e.day(et,{width:"abbreviated",context:"formatting"});case"EEEEE":return _e.day(et,{width:"narrow",context:"formatting"});case"EEEEEE":return _e.day(et,{width:"short",context:"formatting"});case"EEEE":default:return _e.day(et,{width:"wide",context:"formatting"})}},e:function(_,$,_e,et){const tt=_.getDay(),rt=(tt-et.weekStartsOn+8)%7||7;switch($){case"e":return String(rt);case"ee":return addLeadingZeros(rt,2);case"eo":return _e.ordinalNumber(rt,{unit:"day"});case"eee":return _e.day(tt,{width:"abbreviated",context:"formatting"});case"eeeee":return _e.day(tt,{width:"narrow",context:"formatting"});case"eeeeee":return _e.day(tt,{width:"short",context:"formatting"});case"eeee":default:return _e.day(tt,{width:"wide",context:"formatting"})}},c:function(_,$,_e,et){const tt=_.getDay(),rt=(tt-et.weekStartsOn+8)%7||7;switch($){case"c":return String(rt);case"cc":return addLeadingZeros(rt,$.length);case"co":return _e.ordinalNumber(rt,{unit:"day"});case"ccc":return _e.day(tt,{width:"abbreviated",context:"standalone"});case"ccccc":return _e.day(tt,{width:"narrow",context:"standalone"});case"cccccc":return _e.day(tt,{width:"short",context:"standalone"});case"cccc":default:return _e.day(tt,{width:"wide",context:"standalone"})}},i:function(_,$,_e){const et=_.getDay(),tt=et===0?7:et;switch($){case"i":return String(tt);case"ii":return addLeadingZeros(tt,$.length);case"io":return _e.ordinalNumber(tt,{unit:"day"});case"iii":return _e.day(et,{width:"abbreviated",context:"formatting"});case"iiiii":return _e.day(et,{width:"narrow",context:"formatting"});case"iiiiii":return _e.day(et,{width:"short",context:"formatting"});case"iiii":default:return _e.day(et,{width:"wide",context:"formatting"})}},a:function(_,$,_e){const tt=_.getHours()/12>=1?"pm":"am";switch($){case"a":case"aa":return _e.dayPeriod(tt,{width:"abbreviated",context:"formatting"});case"aaa":return _e.dayPeriod(tt,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return _e.dayPeriod(tt,{width:"narrow",context:"formatting"});case"aaaa":default:return _e.dayPeriod(tt,{width:"wide",context:"formatting"})}},b:function(_,$,_e){const et=_.getHours();let tt;switch(et===12?tt=dayPeriodEnum.noon:et===0?tt=dayPeriodEnum.midnight:tt=et/12>=1?"pm":"am",$){case"b":case"bb":return _e.dayPeriod(tt,{width:"abbreviated",context:"formatting"});case"bbb":return _e.dayPeriod(tt,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return _e.dayPeriod(tt,{width:"narrow",context:"formatting"});case"bbbb":default:return _e.dayPeriod(tt,{width:"wide",context:"formatting"})}},B:function(_,$,_e){const et=_.getHours();let tt;switch(et>=17?tt=dayPeriodEnum.evening:et>=12?tt=dayPeriodEnum.afternoon:et>=4?tt=dayPeriodEnum.morning:tt=dayPeriodEnum.night,$){case"B":case"BB":case"BBB":return _e.dayPeriod(tt,{width:"abbreviated",context:"formatting"});case"BBBBB":return _e.dayPeriod(tt,{width:"narrow",context:"formatting"});case"BBBB":default:return _e.dayPeriod(tt,{width:"wide",context:"formatting"})}},h:function(_,$,_e){if($==="ho"){let et=_.getHours()%12;return et===0&&(et=12),_e.ordinalNumber(et,{unit:"hour"})}return lightFormatters.h(_,$)},H:function(_,$,_e){return $==="Ho"?_e.ordinalNumber(_.getHours(),{unit:"hour"}):lightFormatters.H(_,$)},K:function(_,$,_e){const et=_.getHours()%12;return $==="Ko"?_e.ordinalNumber(et,{unit:"hour"}):addLeadingZeros(et,$.length)},k:function(_,$,_e){let et=_.getHours();return et===0&&(et=24),$==="ko"?_e.ordinalNumber(et,{unit:"hour"}):addLeadingZeros(et,$.length)},m:function(_,$,_e){return $==="mo"?_e.ordinalNumber(_.getMinutes(),{unit:"minute"}):lightFormatters.m(_,$)},s:function(_,$,_e){return $==="so"?_e.ordinalNumber(_.getSeconds(),{unit:"second"}):lightFormatters.s(_,$)},S:function(_,$){return lightFormatters.S(_,$)},X:function(_,$,_e){const et=_.getTimezoneOffset();if(et===0)return"Z";switch($){case"X":return formatTimezoneWithOptionalMinutes(et);case"XXXX":case"XX":return formatTimezone(et);case"XXXXX":case"XXX":default:return formatTimezone(et,":")}},x:function(_,$,_e){const et=_.getTimezoneOffset();switch($){case"x":return formatTimezoneWithOptionalMinutes(et);case"xxxx":case"xx":return formatTimezone(et);case"xxxxx":case"xxx":default:return formatTimezone(et,":")}},O:function(_,$,_e){const et=_.getTimezoneOffset();switch($){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(et,":");case"OOOO":default:return"GMT"+formatTimezone(et,":")}},z:function(_,$,_e){const et=_.getTimezoneOffset();switch($){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(et,":");case"zzzz":default:return"GMT"+formatTimezone(et,":")}},t:function(_,$,_e){const et=Math.trunc(_.getTime()/1e3);return addLeadingZeros(et,$.length)},T:function(_,$,_e){const et=_.getTime();return addLeadingZeros(et,$.length)}};function formatTimezoneShort(_,$=""){const _e=_>0?"-":"+",et=Math.abs(_),tt=Math.trunc(et/60),rt=et%60;return rt===0?_e+String(tt):_e+String(tt)+$+addLeadingZeros(rt,2)}function formatTimezoneWithOptionalMinutes(_,$){return _%60===0?(_>0?"-":"+")+addLeadingZeros(Math.abs(_)/60,2):formatTimezone(_,$)}function formatTimezone(_,$=""){const _e=_>0?"-":"+",et=Math.abs(_),tt=addLeadingZeros(Math.trunc(et/60),2),rt=addLeadingZeros(et%60,2);return _e+tt+$+rt}const dateLongFormatter=(_,$)=>{switch(_){case"P":return $.date({width:"short"});case"PP":return $.date({width:"medium"});case"PPP":return $.date({width:"long"});case"PPPP":default:return $.date({width:"full"})}},timeLongFormatter=(_,$)=>{switch(_){case"p":return $.time({width:"short"});case"pp":return $.time({width:"medium"});case"ppp":return $.time({width:"long"});case"pppp":default:return $.time({width:"full"})}},dateTimeLongFormatter=(_,$)=>{const _e=_.match(/(P+)(p+)?/)||[],et=_e[1],tt=_e[2];if(!tt)return dateLongFormatter(_,$);let rt;switch(et){case"P":rt=$.dateTime({width:"short"});break;case"PP":rt=$.dateTime({width:"medium"});break;case"PPP":rt=$.dateTime({width:"long"});break;case"PPPP":default:rt=$.dateTime({width:"full"});break}return rt.replace("{{date}}",dateLongFormatter(et,$)).replace("{{time}}",timeLongFormatter(tt,$))},longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter},dayOfYearTokenRE=/^D+$/,weekYearTokenRE=/^Y+$/,throwTokens=["D","DD","YY","YYYY"];function isProtectedDayOfYearToken(_){return dayOfYearTokenRE.test(_)}function isProtectedWeekYearToken(_){return weekYearTokenRE.test(_)}function warnOrThrowProtectedError(_,$,_e){const et=message(_,$,_e);if(console.warn(et),throwTokens.includes(_))throw new RangeError(et)}function message(_,$,_e){const et=_[0]==="Y"?"years":"days of the month";return`Use \`${_.toLowerCase()}\` instead of \`${_}\` (in \`${$}\`) for formatting ${et} to the input \`${_e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function format$1(_,$,_e){var ot,dt,ht,yt;const et=getDefaultOptions(),tt=et.locale??enUS,rt=et.firstWeekContainsDate??((dt=(ot=et.locale)==null?void 0:ot.options)==null?void 0:dt.firstWeekContainsDate)??1,nt=et.weekStartsOn??((yt=(ht=et.locale)==null?void 0:ht.options)==null?void 0:yt.weekStartsOn)??0,it=toDate(_);if(!isValid(it))throw new RangeError("Invalid time value");let st=$.match(longFormattingTokensRegExp).map(vt=>{const xt=vt[0];if(xt==="p"||xt==="P"){const wt=longFormatters[xt];return wt(vt,tt.formatLong)}return vt}).join("").match(formattingTokensRegExp).map(vt=>{if(vt==="''")return{isToken:!1,value:"'"};const xt=vt[0];if(xt==="'")return{isToken:!1,value:cleanEscapedString(vt)};if(formatters[xt])return{isToken:!0,value:vt};if(xt.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+xt+"`");return{isToken:!1,value:vt}});tt.localize.preprocessor&&(st=tt.localize.preprocessor(it,st));const at={firstWeekContainsDate:rt,weekStartsOn:nt,locale:tt};return st.map(vt=>{if(!vt.isToken)return vt.value;const xt=vt.value;(isProtectedWeekYearToken(xt)||isProtectedDayOfYearToken(xt))&&warnOrThrowProtectedError(xt,$,String(_));const wt=formatters[xt[0]];return wt(it,xt,tt.localize,at)}).join("")}function cleanEscapedString(_){const $=_.match(escapedStringRegExp);return $?$[1].replace(doubleQuoteRegExp,"'"):_}function parseISO(_,$){const et=splitDateString(_);let tt;if(et.date){const st=parseYear$1(et.date,2);tt=parseDate(st.restDateString,st.year)}if(!tt||isNaN(tt.getTime()))return new Date(NaN);const rt=tt.getTime();let nt=0,it;if(et.time&&(nt=parseTime(et.time),isNaN(nt)))return new Date(NaN);if(et.timezone){if(it=parseTimezone(et.timezone),isNaN(it))return new Date(NaN)}else{const st=new Date(rt+nt),at=new Date(0);return at.setFullYear(st.getUTCFullYear(),st.getUTCMonth(),st.getUTCDate()),at.setHours(st.getUTCHours(),st.getUTCMinutes(),st.getUTCSeconds(),st.getUTCMilliseconds()),at}return new Date(rt+nt+it)}const patterns={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},dateRegex=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,timeRegex=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,timezoneRegex=/^([+-])(\d{2})(?::?(\d{2}))?$/;function splitDateString(_){const $={},_e=_.split(patterns.dateTimeDelimiter);let et;if(_e.length>2)return $;if(/:/.test(_e[0])?et=_e[0]:($.date=_e[0],et=_e[1],patterns.timeZoneDelimiter.test($.date)&&($.date=_.split(patterns.timeZoneDelimiter)[0],et=_.substr($.date.length,_.length))),et){const tt=patterns.timezone.exec(et);tt?($.time=et.replace(tt[1],""),$.timezone=tt[1]):$.time=et}return $}function parseYear$1(_,$){const _e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+$)+"})|(\\d{2}|[+-]\\d{"+(2+$)+"})$)"),et=_.match(_e);if(!et)return{year:NaN,restDateString:""};const tt=et[1]?parseInt(et[1]):null,rt=et[2]?parseInt(et[2]):null;return{year:rt===null?tt:rt*100,restDateString:_.slice((et[1]||et[2]).length)}}function parseDate(_,$){if($===null)return new Date(NaN);const _e=_.match(dateRegex);if(!_e)return new Date(NaN);const et=!!_e[4],tt=parseDateUnit(_e[1]),rt=parseDateUnit(_e[2])-1,nt=parseDateUnit(_e[3]),it=parseDateUnit(_e[4]),st=parseDateUnit(_e[5])-1;if(et)return validateWeekDate($,it,st)?dayOfISOWeekYear($,it,st):new Date(NaN);{const at=new Date(0);return!validateDate($,rt,nt)||!validateDayOfYearDate($,tt)?new Date(NaN):(at.setUTCFullYear($,rt,Math.max(tt,nt)),at)}}function parseDateUnit(_){return _?parseInt(_):1}function parseTime(_){const $=_.match(timeRegex);if(!$)return NaN;const _e=parseTimeUnit($[1]),et=parseTimeUnit($[2]),tt=parseTimeUnit($[3]);return validateTime(_e,et,tt)?_e*millisecondsInHour+et*millisecondsInMinute+tt*1e3:NaN}function parseTimeUnit(_){return _&&parseFloat(_.replace(",","."))||0}function parseTimezone(_){if(_==="Z")return 0;const $=_.match(timezoneRegex);if(!$)return 0;const _e=$[1]==="+"?-1:1,et=parseInt($[2]),tt=$[3]&&parseInt($[3])||0;return validateTimezone(et,tt)?_e*(et*millisecondsInHour+tt*millisecondsInMinute):NaN}function dayOfISOWeekYear(_,$,_e){const et=new Date(0);et.setUTCFullYear(_,0,4);const tt=et.getUTCDay()||7,rt=($-1)*7+_e+1-tt;return et.setUTCDate(et.getUTCDate()+rt),et}const daysInMonths=[31,null,31,30,31,30,31,31,30,31,30,31];function isLeapYearIndex(_){return _%400===0||_%4===0&&_%100!==0}function validateDate(_,$,_e){return $>=0&&$<=11&&_e>=1&&_e<=(daysInMonths[$]||(isLeapYearIndex(_)?29:28))}function validateDayOfYearDate(_,$){return $>=1&&$<=(isLeapYearIndex(_)?366:365)}function validateWeekDate(_,$,_e){return $>=1&&$<=53&&_e>=0&&_e<=6}function validateTime(_,$,_e){return _===24?$===0&&_e===0:_e>=0&&_e<60&&$>=0&&$<60&&_>=0&&_<25}function validateTimezone(_,$){return $>=0&&$<=59}const formatCurrency=(_,$="USD",_e)=>{const tt={...{style:"currency",currency:$,minimumFractionDigits:2,maximumFractionDigits:2},..._e};return new Intl.NumberFormat("en-US",tt).format(_)},formatPercentage=(_,$=2)=>_==null?"0.00%":`${_>=0?"+":""}${_.toFixed($)}%`,formatDateTime=(_,$="MMM d, yyyy h:mm a")=>{try{const _e=parseISO(_);return format$1(_e,$)}catch{return"Invalid date/time"}},formatProfitLoss=_=>{if(_===void 0)return{value:"-",className:"text-muted-foreground"};const $=formatCurrency(_),_e=_>=0?"text-profit font-medium":"text-loss font-medium";return{value:$,className:_e}},formatProfitLossPercentage=_=>{if(_==null)return{value:"-",className:"text-muted-foreground"};const $=formatPercentage(_),_e=_>=0?"text-profit font-medium":"text-loss font-medium";return{value:$,className:_e}};function usePrevious(_){const $=reactExports.useRef({value:_,previous:_});return reactExports.useMemo(()=>($.current.value!==_&&($.current.previous=$.current.value,$.current.value=_),$.current.previous),[_])}var OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],SELECTION_KEYS=[" ","Enter"],SELECT_NAME="Select",[Collection$1,useCollection$1,createCollectionScope$1]=createCollection(SELECT_NAME),[createSelectContext,createSelectScope]=createContextScope$3(SELECT_NAME,[createCollectionScope$1,createPopperScope]),usePopperScope=createPopperScope(),[SelectProvider,useSelectContext]=createSelectContext(SELECT_NAME),[SelectNativeOptionsProvider,useSelectNativeOptionsContext]=createSelectContext(SELECT_NAME),Select$2=_=>{const{__scopeSelect:$,children:_e,open:et,defaultOpen:tt,onOpenChange:rt,value:nt,defaultValue:it,onValueChange:st,dir:at,name:ot,autoComplete:dt,disabled:ht,required:yt,form:vt}=_,xt=usePopperScope($),[wt,Et]=reactExports.useState(null),[At,jt]=reactExports.useState(null),[kt,Lt]=reactExports.useState(!1),Bt=useDirection(at),[Gt=!1,er]=useControllableState({prop:et,defaultProp:tt,onChange:rt}),[tr,ar]=useControllableState({prop:nt,defaultProp:it,onChange:st}),Mt=reactExports.useRef(null),lt=wt?vt||!!wt.closest("form"):!0,[mt,gt]=reactExports.useState(new Set),bt=Array.from(mt).map(St=>St.props.value).join(";");return jsxRuntimeExports.jsx(Root2$3,{...xt,children:jsxRuntimeExports.jsxs(SelectProvider,{required:yt,scope:$,trigger:wt,onTriggerChange:Et,valueNode:At,onValueNodeChange:jt,valueNodeHasChildren:kt,onValueNodeHasChildrenChange:Lt,contentId:useId(),value:tr,onValueChange:ar,open:Gt,onOpenChange:er,dir:Bt,triggerPointerDownPosRef:Mt,disabled:ht,children:[jsxRuntimeExports.jsx(Collection$1.Provider,{scope:$,children:jsxRuntimeExports.jsx(SelectNativeOptionsProvider,{scope:_.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(St=>{gt(Nt=>new Set(Nt).add(St))},[]),onNativeOptionRemove:reactExports.useCallback(St=>{gt(Nt=>{const Pt=new Set(Nt);return Pt.delete(St),Pt})},[]),children:_e})}),lt?jsxRuntimeExports.jsxs(BubbleSelect,{"aria-hidden":!0,required:yt,tabIndex:-1,name:ot,autoComplete:dt,value:tr,onChange:St=>ar(St.target.value),disabled:ht,form:vt,children:[tr===void 0?jsxRuntimeExports.jsx("option",{value:""}):null,Array.from(mt)]},bt):null]})})};Select$2.displayName=SELECT_NAME;var TRIGGER_NAME$1="SelectTrigger",SelectTrigger$1=reactExports.forwardRef((_,$)=>{const{__scopeSelect:_e,disabled:et=!1,...tt}=_,rt=usePopperScope(_e),nt=useSelectContext(TRIGGER_NAME$1,_e),it=nt.disabled||et,st=useComposedRefs($,nt.onTriggerChange),at=useCollection$1(_e),ot=reactExports.useRef("touch"),[dt,ht,yt]=useTypeaheadSearch(xt=>{const wt=at().filter(jt=>!jt.disabled),Et=wt.find(jt=>jt.value===nt.value),At=findNextItem(wt,xt,Et);At!==void 0&&nt.onValueChange(At.value)}),vt=xt=>{it||(nt.onOpenChange(!0),yt()),xt&&(nt.triggerPointerDownPosRef.current={x:Math.round(xt.pageX),y:Math.round(xt.pageY)})};return jsxRuntimeExports.jsx(Anchor,{asChild:!0,...rt,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"combobox","aria-controls":nt.contentId,"aria-expanded":nt.open,"aria-required":nt.required,"aria-autocomplete":"none",dir:nt.dir,"data-state":nt.open?"open":"closed",disabled:it,"data-disabled":it?"":void 0,"data-placeholder":shouldShowPlaceholder(nt.value)?"":void 0,...tt,ref:st,onClick:composeEventHandlers(tt.onClick,xt=>{xt.currentTarget.focus(),ot.current!=="mouse"&&vt(xt)}),onPointerDown:composeEventHandlers(tt.onPointerDown,xt=>{ot.current=xt.pointerType;const wt=xt.target;wt.hasPointerCapture(xt.pointerId)&&wt.releasePointerCapture(xt.pointerId),xt.button===0&&xt.ctrlKey===!1&&xt.pointerType==="mouse"&&(vt(xt),xt.preventDefault())}),onKeyDown:composeEventHandlers(tt.onKeyDown,xt=>{const wt=dt.current!=="";!(xt.ctrlKey||xt.altKey||xt.metaKey)&&xt.key.length===1&&ht(xt.key),!(wt&&xt.key===" ")&&OPEN_KEYS.includes(xt.key)&&(vt(),xt.preventDefault())})})})});SelectTrigger$1.displayName=TRIGGER_NAME$1;var VALUE_NAME="SelectValue",SelectValue$1=reactExports.forwardRef((_,$)=>{const{__scopeSelect:_e,className:et,style:tt,children:rt,placeholder:nt="",...it}=_,st=useSelectContext(VALUE_NAME,_e),{onValueNodeHasChildrenChange:at}=st,ot=rt!==void 0,dt=useComposedRefs($,st.onValueNodeChange);return useLayoutEffect2(()=>{at(ot)},[at,ot]),jsxRuntimeExports.jsx(Primitive.span,{...it,ref:dt,style:{pointerEvents:"none"},children:shouldShowPlaceholder(st.value)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:nt}):rt})});SelectValue$1.displayName=VALUE_NAME;var ICON_NAME="SelectIcon",SelectIcon=reactExports.forwardRef((_,$)=>{const{__scopeSelect:_e,children:et,...tt}=_;return jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...tt,ref:$,children:et||"▼"})});SelectIcon.displayName=ICON_NAME;var PORTAL_NAME="SelectPortal",SelectPortal=_=>jsxRuntimeExports.jsx(Portal$3,{asChild:!0,..._});SelectPortal.displayName=PORTAL_NAME;var CONTENT_NAME$1="SelectContent",SelectContent$1=reactExports.forwardRef((_,$)=>{const _e=useSelectContext(CONTENT_NAME$1,_.__scopeSelect),[et,tt]=reactExports.useState();if(useLayoutEffect2(()=>{tt(new DocumentFragment)},[]),!_e.open){const rt=et;return rt?reactDomExports.createPortal(jsxRuntimeExports.jsx(SelectContentProvider,{scope:_.__scopeSelect,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:_.__scopeSelect,children:jsxRuntimeExports.jsx("div",{children:_.children})})}),rt):null}return jsxRuntimeExports.jsx(SelectContentImpl,{..._,ref:$})});SelectContent$1.displayName=CONTENT_NAME$1;var CONTENT_MARGIN=10,[SelectContentProvider,useSelectContentContext]=createSelectContext(CONTENT_NAME$1),CONTENT_IMPL_NAME="SelectContentImpl",SelectContentImpl=reactExports.forwardRef((_,$)=>{const{__scopeSelect:_e,position:et="item-aligned",onCloseAutoFocus:tt,onEscapeKeyDown:rt,onPointerDownOutside:nt,side:it,sideOffset:st,align:at,alignOffset:ot,arrowPadding:dt,collisionBoundary:ht,collisionPadding:yt,sticky:vt,hideWhenDetached:xt,avoidCollisions:wt,...Et}=_,At=useSelectContext(CONTENT_NAME$1,_e),[jt,kt]=reactExports.useState(null),[Lt,Bt]=reactExports.useState(null),Gt=useComposedRefs($,rr=>kt(rr)),[er,tr]=reactExports.useState(null),[ar,Mt]=reactExports.useState(null),lt=useCollection$1(_e),[mt,gt]=reactExports.useState(!1),bt=reactExports.useRef(!1);reactExports.useEffect(()=>{if(jt)return hideOthers(jt)},[jt]),useFocusGuards();const St=reactExports.useCallback(rr=>{const[fr,...dr]=lt().map(or=>or.ref.current),[gr]=dr.slice(-1),hr=document.activeElement;for(const or of rr)if(or===hr||(or==null||or.scrollIntoView({block:"nearest"}),or===fr&&Lt&&(Lt.scrollTop=0),or===gr&&Lt&&(Lt.scrollTop=Lt.scrollHeight),or==null||or.focus(),document.activeElement!==hr))return},[lt,Lt]),Nt=reactExports.useCallback(()=>St([er,jt]),[St,er,jt]);reactExports.useEffect(()=>{mt&&Nt()},[mt,Nt]);const{onOpenChange:Pt,triggerPointerDownPosRef:Tt}=At;reactExports.useEffect(()=>{if(jt){let rr={x:0,y:0};const fr=gr=>{var hr,or;rr={x:Math.abs(Math.round(gr.pageX)-(((hr=Tt.current)==null?void 0:hr.x)??0)),y:Math.abs(Math.round(gr.pageY)-(((or=Tt.current)==null?void 0:or.y)??0))}},dr=gr=>{rr.x<=10&&rr.y<=10?gr.preventDefault():jt.contains(gr.target)||Pt(!1),document.removeEventListener("pointermove",fr),Tt.current=null};return Tt.current!==null&&(document.addEventListener("pointermove",fr),document.addEventListener("pointerup",dr,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",fr),document.removeEventListener("pointerup",dr,{capture:!0})}}},[jt,Pt,Tt]),reactExports.useEffect(()=>{const rr=()=>Pt(!1);return window.addEventListener("blur",rr),window.addEventListener("resize",rr),()=>{window.removeEventListener("blur",rr),window.removeEventListener("resize",rr)}},[Pt]);const[pt,Rt]=useTypeaheadSearch(rr=>{const fr=lt().filter(hr=>!hr.disabled),dr=fr.find(hr=>hr.ref.current===document.activeElement),gr=findNextItem(fr,rr,dr);gr&&setTimeout(()=>gr.ref.current.focus())}),zt=reactExports.useCallback((rr,fr,dr)=>{const gr=!bt.current&&!dr;(At.value!==void 0&&At.value===fr||gr)&&(tr(rr),gr&&(bt.current=!0))},[At.value]),Yt=reactExports.useCallback(()=>jt==null?void 0:jt.focus(),[jt]),ir=reactExports.useCallback((rr,fr,dr)=>{const gr=!bt.current&&!dr;(At.value!==void 0&&At.value===fr||gr)&&Mt(rr)},[At.value]),ur=et==="popper"?SelectPopperPosition:SelectItemAlignedPosition,cr=ur===SelectPopperPosition?{side:it,sideOffset:st,align:at,alignOffset:ot,arrowPadding:dt,collisionBoundary:ht,collisionPadding:yt,sticky:vt,hideWhenDetached:xt,avoidCollisions:wt}:{};return jsxRuntimeExports.jsx(SelectContentProvider,{scope:_e,content:jt,viewport:Lt,onViewportChange:Bt,itemRefCallback:zt,selectedItem:er,onItemLeave:Yt,itemTextRefCallback:ir,focusSelectedItem:Nt,selectedItemText:ar,position:et,isPositioned:mt,searchRef:pt,children:jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:At.open,onMountAutoFocus:rr=>{rr.preventDefault()},onUnmountAutoFocus:composeEventHandlers(tt,rr=>{var fr;(fr=At.trigger)==null||fr.focus({preventScroll:!0}),rr.preventDefault()}),children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:rt,onPointerDownOutside:nt,onFocusOutside:rr=>rr.preventDefault(),onDismiss:()=>At.onOpenChange(!1),children:jsxRuntimeExports.jsx(ur,{role:"listbox",id:At.contentId,"data-state":At.open?"open":"closed",dir:At.dir,onContextMenu:rr=>rr.preventDefault(),...Et,...cr,onPlaced:()=>gt(!0),ref:Gt,style:{display:"flex",flexDirection:"column",outline:"none",...Et.style},onKeyDown:composeEventHandlers(Et.onKeyDown,rr=>{const fr=rr.ctrlKey||rr.altKey||rr.metaKey;if(rr.key==="Tab"&&rr.preventDefault(),!fr&&rr.key.length===1&&Rt(rr.key),["ArrowUp","ArrowDown","Home","End"].includes(rr.key)){let gr=lt().filter(hr=>!hr.disabled).map(hr=>hr.ref.current);if(["ArrowUp","End"].includes(rr.key)&&(gr=gr.slice().reverse()),["ArrowUp","ArrowDown"].includes(rr.key)){const hr=rr.target,or=gr.indexOf(hr);gr=gr.slice(or+1)}setTimeout(()=>St(gr)),rr.preventDefault()}})})})})})})});SelectContentImpl.displayName=CONTENT_IMPL_NAME;var ITEM_ALIGNED_POSITION_NAME="SelectItemAlignedPosition",SelectItemAlignedPosition=reactExports.forwardRef((_,$)=>{const{__scopeSelect:_e,onPlaced:et,...tt}=_,rt=useSelectContext(CONTENT_NAME$1,_e),nt=useSelectContentContext(CONTENT_NAME$1,_e),[it,st]=reactExports.useState(null),[at,ot]=reactExports.useState(null),dt=useComposedRefs($,Gt=>ot(Gt)),ht=useCollection$1(_e),yt=reactExports.useRef(!1),vt=reactExports.useRef(!0),{viewport:xt,selectedItem:wt,selectedItemText:Et,focusSelectedItem:At}=nt,jt=reactExports.useCallback(()=>{if(rt.trigger&&rt.valueNode&&it&&at&&xt&&wt&&Et){const Gt=rt.trigger.getBoundingClientRect(),er=at.getBoundingClientRect(),tr=rt.valueNode.getBoundingClientRect(),ar=Et.getBoundingClientRect();if(rt.dir!=="rtl"){const hr=ar.left-er.left,or=tr.left-hr,br=Gt.left-or,Rr=Gt.width+br,_r=Math.max(Rr,er.width),Er=window.innerWidth-CONTENT_MARGIN,Hr=clamp$1(or,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,Er-_r)]);it.style.minWidth=Rr+"px",it.style.left=Hr+"px"}else{const hr=er.right-ar.right,or=window.innerWidth-tr.right-hr,br=window.innerWidth-Gt.right-or,Rr=Gt.width+br,_r=Math.max(Rr,er.width),Er=window.innerWidth-CONTENT_MARGIN,Hr=clamp$1(or,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,Er-_r)]);it.style.minWidth=Rr+"px",it.style.right=Hr+"px"}const Mt=ht(),lt=window.innerHeight-CONTENT_MARGIN*2,mt=xt.scrollHeight,gt=window.getComputedStyle(at),bt=parseInt(gt.borderTopWidth,10),St=parseInt(gt.paddingTop,10),Nt=parseInt(gt.borderBottomWidth,10),Pt=parseInt(gt.paddingBottom,10),Tt=bt+St+mt+Pt+Nt,pt=Math.min(wt.offsetHeight*5,Tt),Rt=window.getComputedStyle(xt),zt=parseInt(Rt.paddingTop,10),Yt=parseInt(Rt.paddingBottom,10),ir=Gt.top+Gt.height/2-CONTENT_MARGIN,ur=lt-ir,cr=wt.offsetHeight/2,rr=wt.offsetTop+cr,fr=bt+St+rr,dr=Tt-fr;if(fr<=ir){const hr=Mt.length>0&&wt===Mt[Mt.length-1].ref.current;it.style.bottom="0px";const or=at.clientHeight-xt.offsetTop-xt.offsetHeight,br=Math.max(ur,cr+(hr?Yt:0)+or+Nt),Rr=fr+br;it.style.height=Rr+"px"}else{const hr=Mt.length>0&&wt===Mt[0].ref.current;it.style.top="0px";const br=Math.max(ir,bt+xt.offsetTop+(hr?zt:0)+cr)+dr;it.style.height=br+"px",xt.scrollTop=fr-ir+xt.offsetTop}it.style.margin=`${CONTENT_MARGIN}px 0`,it.style.minHeight=pt+"px",it.style.maxHeight=lt+"px",et==null||et(),requestAnimationFrame(()=>yt.current=!0)}},[ht,rt.trigger,rt.valueNode,it,at,xt,wt,Et,rt.dir,et]);useLayoutEffect2(()=>jt(),[jt]);const[kt,Lt]=reactExports.useState();useLayoutEffect2(()=>{at&&Lt(window.getComputedStyle(at).zIndex)},[at]);const Bt=reactExports.useCallback(Gt=>{Gt&&vt.current===!0&&(jt(),At==null||At(),vt.current=!1)},[jt,At]);return jsxRuntimeExports.jsx(SelectViewportProvider,{scope:_e,contentWrapper:it,shouldExpandOnScrollRef:yt,onScrollButtonChange:Bt,children:jsxRuntimeExports.jsx("div",{ref:st,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:kt},children:jsxRuntimeExports.jsx(Primitive.div,{...tt,ref:dt,style:{boxSizing:"border-box",maxHeight:"100%",...tt.style}})})})});SelectItemAlignedPosition.displayName=ITEM_ALIGNED_POSITION_NAME;var POPPER_POSITION_NAME="SelectPopperPosition",SelectPopperPosition=reactExports.forwardRef((_,$)=>{const{__scopeSelect:_e,align:et="start",collisionPadding:tt=CONTENT_MARGIN,...rt}=_,nt=usePopperScope(_e);return jsxRuntimeExports.jsx(Content$2,{...nt,...rt,ref:$,align:et,collisionPadding:tt,style:{boxSizing:"border-box",...rt.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});SelectPopperPosition.displayName=POPPER_POSITION_NAME;var[SelectViewportProvider,useSelectViewportContext]=createSelectContext(CONTENT_NAME$1,{}),VIEWPORT_NAME="SelectViewport",SelectViewport=reactExports.forwardRef((_,$)=>{const{__scopeSelect:_e,nonce:et,...tt}=_,rt=useSelectContentContext(VIEWPORT_NAME,_e),nt=useSelectViewportContext(VIEWPORT_NAME,_e),it=useComposedRefs($,rt.onViewportChange),st=reactExports.useRef(0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:et}),jsxRuntimeExports.jsx(Collection$1.Slot,{scope:_e,children:jsxRuntimeExports.jsx(Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...tt,ref:it,style:{position:"relative",flex:1,overflow:"hidden auto",...tt.style},onScroll:composeEventHandlers(tt.onScroll,at=>{const ot=at.currentTarget,{contentWrapper:dt,shouldExpandOnScrollRef:ht}=nt;if(ht!=null&&ht.current&&dt){const yt=Math.abs(st.current-ot.scrollTop);if(yt>0){const vt=window.innerHeight-CONTENT_MARGIN*2,xt=parseFloat(dt.style.minHeight),wt=parseFloat(dt.style.height),Et=Math.max(xt,wt);if(Et<vt){const At=Et+yt,jt=Math.min(vt,At),kt=At-jt;dt.style.height=jt+"px",dt.style.bottom==="0px"&&(ot.scrollTop=kt>0?kt:0,dt.style.justifyContent="flex-end")}}}st.current=ot.scrollTop})})})]})});SelectViewport.displayName=VIEWPORT_NAME;var GROUP_NAME="SelectGroup",[SelectGroupContextProvider,useSelectGroupContext]=createSelectContext(GROUP_NAME),SelectGroup=reactExports.forwardRef((_,$)=>{const{__scopeSelect:_e,...et}=_,tt=useId();return jsxRuntimeExports.jsx(SelectGroupContextProvider,{scope:_e,id:tt,children:jsxRuntimeExports.jsx(Primitive.div,{role:"group","aria-labelledby":tt,...et,ref:$})})});SelectGroup.displayName=GROUP_NAME;var LABEL_NAME="SelectLabel",SelectLabel$1=reactExports.forwardRef((_,$)=>{const{__scopeSelect:_e,...et}=_,tt=useSelectGroupContext(LABEL_NAME,_e);return jsxRuntimeExports.jsx(Primitive.div,{id:tt.id,...et,ref:$})});SelectLabel$1.displayName=LABEL_NAME;var ITEM_NAME="SelectItem",[SelectItemContextProvider,useSelectItemContext]=createSelectContext(ITEM_NAME),SelectItem$1=reactExports.forwardRef((_,$)=>{const{__scopeSelect:_e,value:et,disabled:tt=!1,textValue:rt,...nt}=_,it=useSelectContext(ITEM_NAME,_e),st=useSelectContentContext(ITEM_NAME,_e),at=it.value===et,[ot,dt]=reactExports.useState(rt??""),[ht,yt]=reactExports.useState(!1),vt=useComposedRefs($,At=>{var jt;return(jt=st.itemRefCallback)==null?void 0:jt.call(st,At,et,tt)}),xt=useId(),wt=reactExports.useRef("touch"),Et=()=>{tt||(it.onValueChange(et),it.onOpenChange(!1))};if(et==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return jsxRuntimeExports.jsx(SelectItemContextProvider,{scope:_e,value:et,disabled:tt,textId:xt,isSelected:at,onItemTextChange:reactExports.useCallback(At=>{dt(jt=>jt||((At==null?void 0:At.textContent)??"").trim())},[]),children:jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:_e,value:et,disabled:tt,textValue:ot,children:jsxRuntimeExports.jsx(Primitive.div,{role:"option","aria-labelledby":xt,"data-highlighted":ht?"":void 0,"aria-selected":at&&ht,"data-state":at?"checked":"unchecked","aria-disabled":tt||void 0,"data-disabled":tt?"":void 0,tabIndex:tt?void 0:-1,...nt,ref:vt,onFocus:composeEventHandlers(nt.onFocus,()=>yt(!0)),onBlur:composeEventHandlers(nt.onBlur,()=>yt(!1)),onClick:composeEventHandlers(nt.onClick,()=>{wt.current!=="mouse"&&Et()}),onPointerUp:composeEventHandlers(nt.onPointerUp,()=>{wt.current==="mouse"&&Et()}),onPointerDown:composeEventHandlers(nt.onPointerDown,At=>{wt.current=At.pointerType}),onPointerMove:composeEventHandlers(nt.onPointerMove,At=>{var jt;wt.current=At.pointerType,tt?(jt=st.onItemLeave)==null||jt.call(st):wt.current==="mouse"&&At.currentTarget.focus({preventScroll:!0})}),onPointerLeave:composeEventHandlers(nt.onPointerLeave,At=>{var jt;At.currentTarget===document.activeElement&&((jt=st.onItemLeave)==null||jt.call(st))}),onKeyDown:composeEventHandlers(nt.onKeyDown,At=>{var kt;((kt=st.searchRef)==null?void 0:kt.current)!==""&&At.key===" "||(SELECTION_KEYS.includes(At.key)&&Et(),At.key===" "&&At.preventDefault())})})})})});SelectItem$1.displayName=ITEM_NAME;var ITEM_TEXT_NAME="SelectItemText",SelectItemText=reactExports.forwardRef((_,$)=>{const{__scopeSelect:_e,className:et,style:tt,...rt}=_,nt=useSelectContext(ITEM_TEXT_NAME,_e),it=useSelectContentContext(ITEM_TEXT_NAME,_e),st=useSelectItemContext(ITEM_TEXT_NAME,_e),at=useSelectNativeOptionsContext(ITEM_TEXT_NAME,_e),[ot,dt]=reactExports.useState(null),ht=useComposedRefs($,Et=>dt(Et),st.onItemTextChange,Et=>{var At;return(At=it.itemTextRefCallback)==null?void 0:At.call(it,Et,st.value,st.disabled)}),yt=ot==null?void 0:ot.textContent,vt=reactExports.useMemo(()=>jsxRuntimeExports.jsx("option",{value:st.value,disabled:st.disabled,children:yt},st.value),[st.disabled,st.value,yt]),{onNativeOptionAdd:xt,onNativeOptionRemove:wt}=at;return useLayoutEffect2(()=>(xt(vt),()=>wt(vt)),[xt,wt,vt]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Primitive.span,{id:st.textId,...rt,ref:ht}),st.isSelected&&nt.valueNode&&!nt.valueNodeHasChildren?reactDomExports.createPortal(rt.children,nt.valueNode):null]})});SelectItemText.displayName=ITEM_TEXT_NAME;var ITEM_INDICATOR_NAME="SelectItemIndicator",SelectItemIndicator=reactExports.forwardRef((_,$)=>{const{__scopeSelect:_e,...et}=_;return useSelectItemContext(ITEM_INDICATOR_NAME,_e).isSelected?jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...et,ref:$}):null});SelectItemIndicator.displayName=ITEM_INDICATOR_NAME;var SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",SelectScrollUpButton$1=reactExports.forwardRef((_,$)=>{const _e=useSelectContentContext(SCROLL_UP_BUTTON_NAME,_.__scopeSelect),et=useSelectViewportContext(SCROLL_UP_BUTTON_NAME,_.__scopeSelect),[tt,rt]=reactExports.useState(!1),nt=useComposedRefs($,et.onScrollButtonChange);return useLayoutEffect2(()=>{if(_e.viewport&&_e.isPositioned){let it=function(){const at=st.scrollTop>0;rt(at)};const st=_e.viewport;return it(),st.addEventListener("scroll",it),()=>st.removeEventListener("scroll",it)}},[_e.viewport,_e.isPositioned]),tt?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{..._,ref:nt,onAutoScroll:()=>{const{viewport:it,selectedItem:st}=_e;it&&st&&(it.scrollTop=it.scrollTop-st.offsetHeight)}}):null});SelectScrollUpButton$1.displayName=SCROLL_UP_BUTTON_NAME;var SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",SelectScrollDownButton$1=reactExports.forwardRef((_,$)=>{const _e=useSelectContentContext(SCROLL_DOWN_BUTTON_NAME,_.__scopeSelect),et=useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME,_.__scopeSelect),[tt,rt]=reactExports.useState(!1),nt=useComposedRefs($,et.onScrollButtonChange);return useLayoutEffect2(()=>{if(_e.viewport&&_e.isPositioned){let it=function(){const at=st.scrollHeight-st.clientHeight,ot=Math.ceil(st.scrollTop)<at;rt(ot)};const st=_e.viewport;return it(),st.addEventListener("scroll",it),()=>st.removeEventListener("scroll",it)}},[_e.viewport,_e.isPositioned]),tt?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{..._,ref:nt,onAutoScroll:()=>{const{viewport:it,selectedItem:st}=_e;it&&st&&(it.scrollTop=it.scrollTop+st.offsetHeight)}}):null});SelectScrollDownButton$1.displayName=SCROLL_DOWN_BUTTON_NAME;var SelectScrollButtonImpl=reactExports.forwardRef((_,$)=>{const{__scopeSelect:_e,onAutoScroll:et,...tt}=_,rt=useSelectContentContext("SelectScrollButton",_e),nt=reactExports.useRef(null),it=useCollection$1(_e),st=reactExports.useCallback(()=>{nt.current!==null&&(window.clearInterval(nt.current),nt.current=null)},[]);return reactExports.useEffect(()=>()=>st(),[st]),useLayoutEffect2(()=>{var ot;const at=it().find(dt=>dt.ref.current===document.activeElement);(ot=at==null?void 0:at.ref.current)==null||ot.scrollIntoView({block:"nearest"})},[it]),jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...tt,ref:$,style:{flexShrink:0,...tt.style},onPointerDown:composeEventHandlers(tt.onPointerDown,()=>{nt.current===null&&(nt.current=window.setInterval(et,50))}),onPointerMove:composeEventHandlers(tt.onPointerMove,()=>{var at;(at=rt.onItemLeave)==null||at.call(rt),nt.current===null&&(nt.current=window.setInterval(et,50))}),onPointerLeave:composeEventHandlers(tt.onPointerLeave,()=>{st()})})}),SEPARATOR_NAME="SelectSeparator",SelectSeparator$1=reactExports.forwardRef((_,$)=>{const{__scopeSelect:_e,...et}=_;return jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...et,ref:$})});SelectSeparator$1.displayName=SEPARATOR_NAME;var ARROW_NAME="SelectArrow",SelectArrow=reactExports.forwardRef((_,$)=>{const{__scopeSelect:_e,...et}=_,tt=usePopperScope(_e),rt=useSelectContext(ARROW_NAME,_e),nt=useSelectContentContext(ARROW_NAME,_e);return rt.open&&nt.position==="popper"?jsxRuntimeExports.jsx(Arrow,{...tt,...et,ref:$}):null});SelectArrow.displayName=ARROW_NAME;function shouldShowPlaceholder(_){return _===""||_===void 0}var BubbleSelect=reactExports.forwardRef((_,$)=>{const{value:_e,...et}=_,tt=reactExports.useRef(null),rt=useComposedRefs($,tt),nt=usePrevious(_e);return reactExports.useEffect(()=>{const it=tt.current,st=window.HTMLSelectElement.prototype,ot=Object.getOwnPropertyDescriptor(st,"value").set;if(nt!==_e&&ot){const dt=new Event("change",{bubbles:!0});ot.call(it,_e),it.dispatchEvent(dt)}},[nt,_e]),jsxRuntimeExports.jsx(VisuallyHidden,{asChild:!0,children:jsxRuntimeExports.jsx("select",{...et,ref:rt,defaultValue:_e})})});BubbleSelect.displayName="BubbleSelect";function useTypeaheadSearch(_){const $=useCallbackRef$1(_),_e=reactExports.useRef(""),et=reactExports.useRef(0),tt=reactExports.useCallback(nt=>{const it=_e.current+nt;$(it),function st(at){_e.current=at,window.clearTimeout(et.current),at!==""&&(et.current=window.setTimeout(()=>st(""),1e3))}(it)},[$]),rt=reactExports.useCallback(()=>{_e.current="",window.clearTimeout(et.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(et.current),[]),[_e,tt,rt]}function findNextItem(_,$,_e){const tt=$.length>1&&Array.from($).every(at=>at===$[0])?$[0]:$,rt=_e?_.indexOf(_e):-1;let nt=wrapArray(_,Math.max(rt,0));tt.length===1&&(nt=nt.filter(at=>at!==_e));const st=nt.find(at=>at.textValue.toLowerCase().startsWith(tt.toLowerCase()));return st!==_e?st:void 0}function wrapArray(_,$){return _.map((_e,et)=>_[($+et)%_.length])}var Root2$1=Select$2,Trigger$1=SelectTrigger$1,Value=SelectValue$1,Icon=SelectIcon,Portal=SelectPortal,Content2=SelectContent$1,Viewport=SelectViewport,Label$1=SelectLabel$1,Item$1=SelectItem$1,ItemText=SelectItemText,ItemIndicator=SelectItemIndicator,ScrollUpButton=SelectScrollUpButton$1,ScrollDownButton=SelectScrollDownButton$1,Separator=SelectSeparator$1;const Select$1=Root2$1,SelectValue=Value,SelectTrigger=reactExports.forwardRef(({className:_,children:$,..._e},et)=>jsxRuntimeExports.jsxs(Trigger$1,{ref:et,className:cn("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",_),..._e,children:[$,jsxRuntimeExports.jsx(Icon,{asChild:!0,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 opacity-50"})})]}));SelectTrigger.displayName=Trigger$1.displayName;const SelectScrollUpButton=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx(ScrollUpButton,{ref:_e,className:cn("flex cursor-default items-center justify-center py-1",_),...$,children:jsxRuntimeExports.jsx(ChevronUp,{className:"h-4 w-4"})}));SelectScrollUpButton.displayName=ScrollUpButton.displayName;const SelectScrollDownButton=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx(ScrollDownButton,{ref:_e,className:cn("flex cursor-default items-center justify-center py-1",_),...$,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4"})}));SelectScrollDownButton.displayName=ScrollDownButton.displayName;const SelectContent=reactExports.forwardRef(({className:_,children:$,position:_e="popper",...et},tt)=>jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsxs(Content2,{ref:tt,className:cn("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",_e==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",_),position:_e,...et,children:[jsxRuntimeExports.jsx(SelectScrollUpButton,{}),jsxRuntimeExports.jsx(Viewport,{className:cn("p-1",_e==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:$}),jsxRuntimeExports.jsx(SelectScrollDownButton,{})]})}));SelectContent.displayName=Content2.displayName;const SelectLabel=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx(Label$1,{ref:_e,className:cn("py-1.5 pl-8 pr-2 text-sm font-semibold",_),...$}));SelectLabel.displayName=Label$1.displayName;const SelectItem=reactExports.forwardRef(({className:_,children:$,..._e},et)=>jsxRuntimeExports.jsxs(Item$1,{ref:et,className:cn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_),..._e,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(ItemText,{children:$})]}));SelectItem.displayName=Item$1.displayName;const SelectSeparator=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx(Separator,{ref:_e,className:cn("-mx-1 my-1 h-px bg-muted",_),...$}));SelectSeparator.displayName=Separator.displayName;const badgeVariants=cva("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge({className:_,variant:$,..._e}){return jsxRuntimeExports.jsx("div",{className:cn(badgeVariants({variant:$}),_),..._e})}function Skeleton({className:_,...$}){return jsxRuntimeExports.jsx("div",{className:cn("animate-pulse rounded-md bg-muted",_),...$})}function createContextScope(_,$=[]){let _e=[];function et(rt,nt){const it=reactExports.createContext(nt),st=_e.length;_e=[..._e,nt];function at(dt){const{scope:ht,children:yt,...vt}=dt,xt=(ht==null?void 0:ht[_][st])||it,wt=reactExports.useMemo(()=>vt,Object.values(vt));return jsxRuntimeExports.jsx(xt.Provider,{value:wt,children:yt})}function ot(dt,ht){const yt=(ht==null?void 0:ht[_][st])||it,vt=reactExports.useContext(yt);if(vt)return vt;if(nt!==void 0)return nt;throw new Error(`\`${dt}\` must be used within \`${rt}\``)}return at.displayName=rt+"Provider",[at,ot]}const tt=()=>{const rt=_e.map(nt=>reactExports.createContext(nt));return function(it){const st=(it==null?void 0:it[_])||rt;return reactExports.useMemo(()=>({[`__scope${_}`]:{...it,[_]:st}}),[it,st])}};return tt.scopeName=_,[et,composeContextScopes(tt,...$)]}function composeContextScopes(..._){const $=_[0];if(_.length===1)return $;const _e=()=>{const et=_.map(tt=>({useScope:tt(),scopeName:tt.scopeName}));return function(rt){const nt=et.reduce((it,{useScope:st,scopeName:at})=>{const dt=st(rt)[`__scope${at}`];return{...it,...dt}},{});return reactExports.useMemo(()=>({[`__scope${$.scopeName}`]:nt}),[nt])}};return _e.scopeName=$.scopeName,_e}var PROGRESS_NAME="Progress",DEFAULT_MAX=100,[createProgressContext,createProgressScope]=createContextScope(PROGRESS_NAME),[ProgressProvider,useProgressContext]=createProgressContext(PROGRESS_NAME),Progress$1=reactExports.forwardRef((_,$)=>{const{__scopeProgress:_e,value:et=null,max:tt,getValueLabel:rt=defaultGetValueLabel,...nt}=_;(tt||tt===0)&&!isValidMaxNumber(tt)&&console.error(getInvalidMaxError(`${tt}`,"Progress"));const it=isValidMaxNumber(tt)?tt:DEFAULT_MAX;et!==null&&!isValidValueNumber(et,it)&&console.error(getInvalidValueError(`${et}`,"Progress"));const st=isValidValueNumber(et,it)?et:null,at=isNumber$5(st)?rt(st,it):void 0;return jsxRuntimeExports.jsx(ProgressProvider,{scope:_e,value:st,max:it,children:jsxRuntimeExports.jsx(Primitive.div,{"aria-valuemax":it,"aria-valuemin":0,"aria-valuenow":isNumber$5(st)?st:void 0,"aria-valuetext":at,role:"progressbar","data-state":getProgressState(st,it),"data-value":st??void 0,"data-max":it,...nt,ref:$})})});Progress$1.displayName=PROGRESS_NAME;var INDICATOR_NAME="ProgressIndicator",ProgressIndicator=reactExports.forwardRef((_,$)=>{const{__scopeProgress:_e,...et}=_,tt=useProgressContext(INDICATOR_NAME,_e);return jsxRuntimeExports.jsx(Primitive.div,{"data-state":getProgressState(tt.value,tt.max),"data-value":tt.value??void 0,"data-max":tt.max,...et,ref:$})});ProgressIndicator.displayName=INDICATOR_NAME;function defaultGetValueLabel(_,$){return`${Math.round(_/$*100)}%`}function getProgressState(_,$){return _==null?"indeterminate":_===$?"complete":"loading"}function isNumber$5(_){return typeof _=="number"}function isValidMaxNumber(_){return isNumber$5(_)&&!isNaN(_)&&_>0}function isValidValueNumber(_,$){return isNumber$5(_)&&!isNaN(_)&&_<=$&&_>=0}function getInvalidMaxError(_,$){return`Invalid prop \`max\` of value \`${_}\` supplied to \`${$}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${DEFAULT_MAX}\`.`}function getInvalidValueError(_,$){return`Invalid prop \`value\` of value \`${_}\` supplied to \`${$}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${DEFAULT_MAX} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Root$2=Progress$1,Indicator=ProgressIndicator;const Progress=reactExports.forwardRef(({className:_,value:$,indicatorClassName:_e,...et},tt)=>jsxRuntimeExports.jsx(Root$2,{ref:tt,className:cn("relative h-4 w-full overflow-hidden rounded-full bg-secondary",_),...et,children:jsxRuntimeExports.jsx(Indicator,{className:cn("h-full w-full flex-1 bg-primary transition-all",_e),style:{transform:`translateX(-${100-($||0)}%)`}})}));Progress.displayName=Root$2.displayName;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EPSILON_FLOAT32$1=1e-7,EPSILON_FLOAT16$1=1e-4;class DataStorage{constructor($,_e){this.backend=$,this.dataMover=_e,this.data=new WeakMap,this.dataIdsCount=0}get($){return this.data.has($)||this.dataMover.moveData(this.backend,$),this.data.get($)}set($,_e){this.dataIdsCount++,this.data.set($,_e)}has($){return this.data.has($)}delete($){return this.dataIdsCount--,this.data.delete($)}numDataIds(){return this.dataIdsCount}}class KernelBackend{refCount($){return notYetImplemented("refCount")}incRef($){return notYetImplemented("incRef")}timerAvailable(){return!0}time($){return notYetImplemented("time")}read($){return notYetImplemented("read")}readSync($){return notYetImplemented("readSync")}readToGPU($,_e){return notYetImplemented("readToGPU")}numDataIds(){return notYetImplemented("numDataIds")}disposeData($,_e){return notYetImplemented("disposeData")}write($,_e,et){return notYetImplemented("write")}move($,_e,et,tt,rt){return notYetImplemented("move")}createTensorFromGPUData($,_e,et){return notYetImplemented("createTensorFromGPUData")}memory(){return notYetImplemented("memory")}floatPrecision(){return notYetImplemented("floatPrecision")}epsilon(){return this.floatPrecision()===32?EPSILON_FLOAT32$1:EPSILON_FLOAT16$1}dispose(){return notYetImplemented("dispose")}}function notYetImplemented(_){throw new Error(`'${_}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function shuffle(_){let $=_.length,_e=0;for(;$>0;)_e=Math.random()*$|0,$--,swap$1(_,$,_e)}function shuffleCombo(_,$){if(_.length!==$.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${_.length}Second array length was ${$.length}`);let _e=_.length,et=0;for(;_e>0;)et=Math.random()*_e|0,_e--,swap$1(_,_e,et),swap$1($,_e,et)}function clamp(_,$,_e){return Math.max(_,Math.min($,_e))}function nearestLargerEven(_){return _%2===0?_:_+1}function swap$1(_,$,_e){const et=_[$];_[$]=_[_e],_[_e]=et}function sum$3(_){let $=0;for(let _e=0;_e<_.length;_e++)$+=_[_e];return $}function randUniform(_,$){const _e=Math.random();return $*_e+(1-_e)*_}function distSquared(_,$){let _e=0;for(let et=0;et<_.length;et++){const tt=Number(_[et])-Number($[et]);_e+=tt*tt}return _e}function assert$1(_,$){if(!_)throw new Error(typeof $=="string"?$:$())}function assertShapesMatch(_,$,_e=""){assert$1(arraysEqual(_,$),()=>_e+` Shapes ${_} and ${$} must match`)}function assertNonNull(_){assert$1(_!=null,()=>"The input to the tensor constructor must be a non-null value.")}function sizeFromShape(_){if(_.length===0)return 1;let $=_[0];for(let _e=1;_e<_.length;_e++)$*=_[_e];return $}function isScalarShape(_){return _.length===0}function arraysEqualWithNull(_,$){if(_===$)return!0;if(_==null||$==null||_.length!==$.length)return!1;for(let _e=0;_e<_.length;_e++)if(_[_e]!==null&&$[_e]!==null&&_[_e]!==$[_e])return!1;return!0}function arraysEqual(_,$){if(_===$)return!0;if(_==null||$==null||_.length!==$.length)return!1;for(let _e=0;_e<_.length;_e++)if(_[_e]!==$[_e])return!1;return!0}function isInt(_){return _%1===0}function tanh$3(_){if(Math.tanh!=null)return Math.tanh(_);if(_===1/0)return 1;if(_===-1/0)return-1;{const $=Math.exp(2*_);return($-1)/($+1)}}function sizeToSquarishShape(_){const $=Math.ceil(Math.sqrt(_));return[$,Math.ceil(_/$)]}function createShuffledIndices(_){const $=new Uint32Array(_);for(let _e=0;_e<_;++_e)$[_e]=_e;return shuffle($),$}function rightPad(_,$){return $<=_.length?_:_+" ".repeat($-_.length)}function repeatedTry(_,$=tt=>0,_e,et){return new Promise((tt,rt)=>{let nt=0;const it=()=>{if(_()){tt();return}nt++;const st=$(nt);if(_e!=null&&nt>=_e){rt();return}et!=null?et(it,st):setTimeout(it,st)};it()})}function inferFromImplicitShape(_,$){let _e=1,et=-1;for(let rt=0;rt<_.length;++rt)if(_[rt]>=0)_e*=_[rt];else if(_[rt]===-1){if(et!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${et} and dim ${rt}`);et=rt}else if(_[rt]<0)throw Error(`Shapes can not be < 0. Found ${_[rt]} at dim ${rt}`);if(et===-1){if($>0&&$!==_e)throw Error(`Size(${$}) must match the product of shape ${_}`);return _}if(_e===0)throw Error(`Cannot infer the missing size in [${_}] when there are 0 elements`);if($%_e!==0)throw Error(`The implicit shape can't be a fractional number. Got ${$} / ${_e}`);const tt=_.slice();return tt[et]=$/_e,tt}function parseAxisParam(_,$){const _e=$.length;return _=_==null?$.map((et,tt)=>tt):[].concat(_),assert$1(_.every(et=>et>=-_e&&et<_e),()=>`All values in axis param must be in range [-${_e}, ${_e}) but got axis ${_}`),assert$1(_.every(et=>isInt(et)),()=>`All values in axis param must be integers but got axis ${_}`),_.map(et=>et<0?_e+et:et)}function squeezeShape(_,$){const _e=[],et=[],tt=$!=null&&Array.isArray($)&&$.length===0,rt=$==null||tt?null:parseAxisParam($,_).sort();let nt=0;for(let it=0;it<_.length;++it){if(rt!=null){if(rt[nt]===it&&_[it]!==1)throw new Error(`Can't squeeze axis ${it} since its dim '${_[it]}' is not 1`);(rt[nt]==null||rt[nt]>it)&&_[it]===1&&(_e.push(_[it]),et.push(it)),rt[nt]<=it&&nt++}_[it]!==1&&(_e.push(_[it]),et.push(it))}return{newShape:_e,keptDims:et}}function getTypedArrayFromDType(_,$){return getArrayFromDType(_,$)}function getArrayFromDType(_,$){let _e=null;if(_==null||_==="float32")_e=new Float32Array($);else if(_==="int32")_e=new Int32Array($);else if(_==="bool")_e=new Uint8Array($);else if(_==="string")_e=new Array($);else throw new Error(`Unknown data type ${_}`);return _e}function checkConversionForErrors(_,$){for(let _e=0;_e<_.length;_e++){const et=_[_e];if(isNaN(et)||!isFinite(et))throw Error(`A tensor of type ${$} being uploaded contains ${et}.`)}}function isValidDtype(_){return _==="bool"||_==="complex64"||_==="float32"||_==="int32"||_==="string"}function hasEncodingLoss(_,$){return!($==="complex64"||$==="float32"&&_!=="complex64"||$==="int32"&&_!=="float32"&&_!=="complex64"||$==="bool"&&_==="bool")}function bytesPerElement(_){if(_==="float32"||_==="int32")return 4;if(_==="complex64")return 8;if(_==="bool")return 1;throw new Error(`Unknown dtype ${_}`)}function bytesFromStringArray(_){if(_==null)return 0;let $=0;return _.forEach(_e=>$+=_e.length),$}function isString$2(_){return typeof _=="string"||_ instanceof String}function isBoolean$2(_){return typeof _=="boolean"}function isNumber$4(_){return typeof _=="number"}function inferDtype(_){return Array.isArray(_)?inferDtype(_[0]):_ instanceof Float32Array?"float32":_ instanceof Int32Array||_ instanceof Uint8Array||_ instanceof Uint8ClampedArray?"int32":isNumber$4(_)?"float32":isString$2(_)?"string":isBoolean$2(_)?"bool":"float32"}function isFunction$4(_){return!!(_&&_.constructor&&_.call&&_.apply)}function nearestDivisor(_,$){for(let _e=$;_e<_;++_e)if(_%_e===0)return _e;return _}function computeStrides(_){const $=_.length;if($<2)return[];const _e=new Array($-1);_e[$-2]=_[$-1];for(let et=$-3;et>=0;--et)_e[et]=_e[et+1]*_[et+1];return _e}function createNestedArray(_,$,_e,et=!1){const tt=new Array;if($.length===1){const rt=$[0]*(et?2:1);for(let nt=0;nt<rt;nt++)tt[nt]=_e[_+nt]}else{const rt=$[0],nt=$.slice(1),it=nt.reduce((st,at)=>st*at)*(et?2:1);for(let st=0;st<rt;st++)tt[st]=createNestedArray(_+st*it,nt,_e,et)}return tt}function toNestedArray(_,$,_e=!1){if(_.length===0)return $[0];const et=_.reduce((tt,rt)=>tt*rt)*(_e?2:1);if(et===0)return[];if(et!==$.length)throw new Error(`[${_}] does not match the input size ${$.length}${_e?" for a complex tensor":""}.`);return createNestedArray(0,_,$,_e)}function convertBackendValuesAndArrayBuffer(_,$){if(Array.isArray(_))return _;if($==="float32")return _ instanceof Float32Array?_:new Float32Array(_);if($==="int32")return _ instanceof Int32Array?_:new Int32Array(_);if($==="bool"||$==="string")return Uint8Array.from(new Int32Array(_));throw new Error(`Unknown dtype ${$}`)}function makeOnesTypedArray(_,$){const _e=makeZerosTypedArray(_,$);for(let et=0;et<_e.length;et++)_e[et]=1;return _e}function makeZerosTypedArray(_,$){if($==null||$==="float32"||$==="complex64")return new Float32Array(_);if($==="int32")return new Int32Array(_);if($==="bool")return new Uint8Array(_);throw new Error(`Unknown data type ${$}`)}function makeZerosNestedTypedArray(_,$){const _e=_.reduce((et,tt)=>et*tt,1);if($==null||$==="float32")return toNestedArray(_,new Float32Array(_e));if($==="int32")return toNestedArray(_,new Int32Array(_e));if($==="bool")return toNestedArray(_,new Uint8Array(_e));throw new Error(`Unknown data type ${$}`)}function assertNonNegativeIntegerDimensions(_){_.forEach($=>{assert$1(Number.isInteger($)&&$>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${_}].`)})}function locToIndex(_,$,_e){if($===0)return 0;if($===1)return _[0];let et=_[_.length-1];for(let tt=0;tt<_.length-1;++tt)et+=_e[tt]*_[tt];return et}function indexToLoc(_,$,_e){if($===0)return[];if($===1)return[_];const et=new Array($);for(let tt=0;tt<et.length-1;++tt)et[tt]=Math.floor(_/_e[tt]),_-=et[tt]*_e[tt];return et[et.length-1]=_,et}function isPromise(_){return _&&_.then&&typeof _.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TENSORFLOWJS_FLAGS_PREFIX="tfjsflags";class Environment{constructor($){this.global=$,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=getQueryParams,this.populateURLFlags()}setPlatform($,_e){this.platform!=null&&(env().getBool("IS_TEST")||env().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${$}.`)),this.platformName=$,this.platform=_e}registerFlag($,_e,et){if(this.flagRegistry[$]={evaluationFn:_e,setHook:et},this.urlFlags[$]!=null){const tt=this.urlFlags[$];env().getBool("IS_TEST")||env().getBool("PROD")||console.warn(`Setting feature override from URL ${$}: ${tt}.`),this.set($,tt)}}async getAsync($){return $ in this.flags?this.flags[$]:(this.flags[$]=await this.evaluateFlag($),this.flags[$])}get($){if($ in this.flags)return this.flags[$];const _e=this.evaluateFlag($);if(isPromise(_e))throw new Error(`Flag ${$} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[$]=_e,this.flags[$]}getNumber($){return this.get($)}getBool($){return this.get($)}getString($){return this.get($)}getFlags(){return this.flags}get features(){return this.flags}set($,_e){if(this.flagRegistry[$]==null)throw new Error(`Cannot set flag ${$} as it has not been registered.`);this.flags[$]=_e,this.flagRegistry[$].setHook!=null&&this.flagRegistry[$].setHook(_e)}evaluateFlag($){if(this.flagRegistry[$]==null)throw new Error(`Cannot evaluate flag '${$}': no evaluation function found.`);return this.flagRegistry[$].evaluationFn()}setFlags($){this.flags=Object.assign({},$)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const $=this.getQueryParams(this.global.location.search);TENSORFLOWJS_FLAGS_PREFIX in $&&$[TENSORFLOWJS_FLAGS_PREFIX].split(",").forEach(et=>{const[tt,rt]=et.split(":");this.urlFlags[tt]=parseValue(tt,rt)})}}function getQueryParams(_){const $={};return _.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(_e,...et)=>(decodeParam($,et[0],et[1]),et.join("="))),$}function decodeParam(_,$,_e){_[decodeURIComponent($)]=decodeURIComponent(_e||"")}function parseValue(_,$){const _e=$.toLowerCase();return _e==="true"||_e==="false"?_e==="true":`${+_e}`===_e?+_e:$}function env(){return ENV$4}let ENV$4=null;function setEnvironmentGlobal(_){ENV$4=_}const global$1=globalThis||void 0||self;function getDefaultExportFromCjs(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}var browser$d={exports:{}},process=browser$d.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(_){if(cachedSetTimeout===setTimeout)return setTimeout(_,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(_,0);try{return cachedSetTimeout(_,0)}catch{try{return cachedSetTimeout.call(null,_,0)}catch{return cachedSetTimeout.call(this,_,0)}}}function runClearTimeout(_){if(cachedClearTimeout===clearTimeout)return clearTimeout(_);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(_);try{return cachedClearTimeout(_)}catch{try{return cachedClearTimeout.call(null,_)}catch{return cachedClearTimeout.call(this,_)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var _=runTimeout(cleanUpNextTick);draining=!0;for(var $=queue.length;$;){for(currentQueue=queue,queue=[];++queueIndex<$;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,$=queue.length}currentQueue=null,draining=!1,runClearTimeout(_)}}process.nextTick=function(_){var $=new Array(arguments.length-1);if(arguments.length>1)for(var _e=1;_e<arguments.length;_e++)$[_e-1]=arguments[_e];queue.push(new Item(_,$)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(_,$){this.fun=_,this.array=$}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=!0;process.env={};process.argv=[];process.version="";process.versions={};function noop$3(){}process.on=noop$3;process.addListener=noop$3;process.once=noop$3;process.off=noop$3;process.removeListener=noop$3;process.removeAllListeners=noop$3;process.emit=noop$3;process.prependListener=noop$3;process.prependOnceListener=noop$3;process.listeners=function(_){return[]};process.binding=function(_){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(_){throw new Error("process.chdir is not supported")};process.umask=function(){return 0};var browserExports=browser$d.exports;const process$1=getDefaultExportFromCjs(browserExports);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let globalNameSpace;function getGlobalNamespace(){if(globalNameSpace==null){let _;if(typeof window<"u")_=window;else if(typeof global$1<"u")_=global$1;else if(typeof process$1<"u")_=process$1;else if(typeof self<"u")_=self;else throw new Error("Could not find a global object");globalNameSpace=_}return globalNameSpace}function getGlobalMap(){const _=getGlobalNamespace();return _._tfGlobals==null&&(_._tfGlobals=new Map),_._tfGlobals}function getGlobal(_,$){const _e=getGlobalMap();if(_e.has(_))return _e.get(_);{const et=$();return _e.set(_,et),_e.get(_)}}const Abs="Abs",Acos="Acos",Acosh="Acosh",Add$1="Add",AddN="AddN",All="All",Any="Any",ArgMax="ArgMax",ArgMin="ArgMin",Asin="Asin",Asinh="Asinh",Atan="Atan",Atanh="Atanh",Atan2="Atan2",AvgPool="AvgPool",AvgPoolGrad="AvgPoolGrad",AvgPool3D="AvgPool3D",AvgPool3DGrad="AvgPool3DGrad",BatchMatMul="BatchMatMul",BatchToSpaceND="BatchToSpaceND",Bincount="Bincount",BitwiseAnd="BitwiseAnd",BroadcastTo="BroadcastTo",BroadcastArgs="BroadcastArgs",Cast="Cast",Ceil="Ceil",ClipByValue="ClipByValue",Complex="Complex",ComplexAbs="ComplexAbs",Concat="Concat",Conv2D$1="Conv2D",Conv2DBackpropFilter="Conv2DBackpropFilter",Conv2DBackpropInput="Conv2DBackpropInput",Conv3D$1="Conv3D",Conv3DBackpropFilterV2="Conv3DBackpropFilterV2",Conv3DBackpropInputV2="Conv3DBackpropInputV2",Cos="Cos",Cosh="Cosh",Cumprod="Cumprod",Cumsum="Cumsum",CropAndResize="CropAndResize",DenseBincount="DenseBincount",DepthToSpace="DepthToSpace",DepthwiseConv2dNative="DepthwiseConv2dNative",DepthwiseConv2dNativeBackpropFilter="DepthwiseConv2dNativeBackpropFilter",DepthwiseConv2dNativeBackpropInput="DepthwiseConv2dNativeBackpropInput",Diag="Diag",Dilation2D="Dilation2D",Dilation2DBackpropInput="Dilation2DBackpropInput",Dilation2DBackpropFilter="Dilation2DBackpropFilter",Draw="Draw",RealDiv="RealDiv",Einsum="Einsum",Elu$1="Elu",EluGrad="EluGrad",Erf="Erf",Equal="Equal",Exp="Exp",ExpandDims="ExpandDims",Expm1="Expm1",FFT="FFT",Fill="Fill",FlipLeftRight="FlipLeftRight",Floor="Floor",FloorDiv="FloorDiv",FusedBatchNorm="FusedBatchNorm",GatherV2="GatherV2",GatherNd="GatherNd",Greater="Greater",GreaterEqual="GreaterEqual",Identity$1="Identity",IFFT="IFFT",Imag="Imag",IsFinite="IsFinite",IsInf="IsInf",IsNan="IsNan",LeakyRelu="LeakyRelu",Less="Less",LessEqual="LessEqual",LinSpace="LinSpace",Log="Log",Log1p="Log1p",LogicalAnd="LogicalAnd",LogicalNot="LogicalNot",LogicalOr="LogicalOr",LogicalXor="LogicalXor",LogSoftmax$1="LogSoftmax",LowerBound="LowerBound",LRN="LRN",LRNGrad="LRNGrad",MatrixBandPart="MatrixBandPart",Max="Max",Maximum$1="Maximum",MaxPool="MaxPool",MaxPoolGrad="MaxPoolGrad",MaxPool3D="MaxPool3D",MaxPool3DGrad="MaxPool3DGrad",MaxPoolWithArgmax="MaxPoolWithArgmax",Mean="Mean",Min="Min",Minimum$1="Minimum",MirrorPad="MirrorPad",Mod="Mod",Multinomial="Multinomial",Multiply$1="Multiply",Neg="Neg",NotEqual="NotEqual",NonMaxSuppressionV3="NonMaxSuppressionV3",NonMaxSuppressionV4="NonMaxSuppressionV4",NonMaxSuppressionV5="NonMaxSuppressionV5",OnesLike="OnesLike",OneHot="OneHot",Pack="Pack",PadV2="PadV2",Pool="Pool",Pow="Pow",Prelu="Prelu",Prod="Prod",RaggedGather="RaggedGather",RaggedRange="RaggedRange",RaggedTensorToTensor="RaggedTensorToTensor",Range$1="Range",Real="Real",Reciprocal="Reciprocal",Relu$1="Relu",Reshape$1="Reshape",ResizeNearestNeighbor="ResizeNearestNeighbor",ResizeNearestNeighborGrad="ResizeNearestNeighborGrad",ResizeBilinear="ResizeBilinear",ResizeBilinearGrad="ResizeBilinearGrad",Relu6$1="Relu6",Reverse="Reverse",Round="Round",Rsqrt="Rsqrt",ScatterNd="ScatterNd",TensorScatterUpdate="TensorScatterUpdate",SearchSorted="SearchSorted",Select="Select",Selu$1="Selu",Slice="Slice",Sin="Sin",Sinh="Sinh",Sign="Sign",Sigmoid$1="Sigmoid",Softplus$1="Softplus",Sqrt="Sqrt",Sum="Sum",SpaceToBatchND="SpaceToBatchND",SplitV="SplitV",Softmax$2="Softmax",SparseFillEmptyRows="SparseFillEmptyRows",SparseReshape="SparseReshape",SparseSegmentMean="SparseSegmentMean",SparseSegmentSum="SparseSegmentSum",SparseToDense="SparseToDense",SquaredDifference="SquaredDifference",Square="Square",StaticRegexReplace="StaticRegexReplace",StridedSlice="StridedSlice",StringNGrams="StringNGrams",StringSplit="StringSplit",StringToHashBucketFast="StringToHashBucketFast",Sub="Sub",Tan="Tan",Tanh$1="Tanh",Tile="Tile",TopK="TopK",Transform="Transform",Transpose="Transpose",Unique="Unique",Unpack="Unpack",UnsortedSegmentSum="UnsortedSegmentSum",UpperBound="UpperBound",ZerosLike="ZerosLike",Step$1="Step",FromPixels="FromPixels",RotateWithOffset="RotateWithOffset",_FusedMatMul="_FusedMatMul",FusedConv2D="FusedConv2D",FusedDepthwiseConv2D="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function warn$1(..._){env().getBool("IS_TEST")||env().getBool("PROD")||console.warn(..._)}function log$4(..._){env().getBool("IS_TEST")||env().getBool("PROD")||console.log(..._)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kernelRegistry=getGlobal("kernelRegistry",()=>new Map),gradRegistry=getGlobal("gradRegistry",()=>new Map);function getKernel(_,$){const _e=makeKey(_,$);return kernelRegistry.get(_e)}function getGradient(_){return gradRegistry.get(_)}function getKernelsForBackend(_){const $=kernelRegistry.entries(),_e=[];for(;;){const{done:et,value:tt}=$.next();if(et)break;const[rt,nt]=tt,[it]=rt.split("_");it===_&&_e.push(nt)}return _e}function registerKernel(_){const{kernelName:$,backendName:_e}=_,et=makeKey($,_e);kernelRegistry.has(et)&&warn$1(`The kernel '${$}' for backend '${_e}' is already registered`),kernelRegistry.set(et,_)}function registerGradient(_){const{kernelName:$}=_;gradRegistry.has($)&&env().getBool("DEBUG")&&warn$1(`Overriding the gradient for '${$}'`),gradRegistry.set($,_)}function unregisterKernel(_,$){const _e=makeKey(_,$);if(!kernelRegistry.has(_e))throw new Error(`The kernel '${_}' for backend '${$}' is not registered`);kernelRegistry.delete(_e)}function unregisterGradient(_){if(!gradRegistry.has(_))throw new Error(`The gradient '${_}' for backend is not registered`);gradRegistry.delete(_)}function copyRegisteredKernels(_,$){getKernelsForBackend(_).forEach(et=>{const tt=Object.assign({},et,{backendName:$});registerKernel(tt)})}function makeKey(_,$){return`${$}_${_}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function isTypedArrayBrowser(_){return _ instanceof Float32Array||_ instanceof Int32Array||_ instanceof Uint8Array||_ instanceof Uint8ClampedArray}var long=Long$1,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Long$1(_,$,_e){this.low=_|0,this.high=$|0,this.unsigned=!!_e}Long$1.prototype.__isLong__;Object.defineProperty(Long$1.prototype,"__isLong__",{value:!0});function isLong(_){return(_&&_.__isLong__)===!0}Long$1.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(_,$){var _e,et,tt;return $?(_>>>=0,(tt=0<=_&&_<256)&&(et=UINT_CACHE[_],et)?et:(_e=fromBits(_,(_|0)<0?-1:0,!0),tt&&(UINT_CACHE[_]=_e),_e)):(_|=0,(tt=-128<=_&&_<128)&&(et=INT_CACHE[_],et)?et:(_e=fromBits(_,_<0?-1:0,!1),tt&&(INT_CACHE[_]=_e),_e))}Long$1.fromInt=fromInt;function fromNumber(_,$){if(isNaN(_))return $?UZERO:ZERO;if($){if(_<0)return UZERO;if(_>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(_<=-TWO_PWR_63_DBL)return MIN_VALUE;if(_+1>=TWO_PWR_63_DBL)return MAX_VALUE}return _<0?fromNumber(-_,$).neg():fromBits(_%TWO_PWR_32_DBL|0,_/TWO_PWR_32_DBL|0,$)}Long$1.fromNumber=fromNumber;function fromBits(_,$,_e){return new Long$1(_,$,_e)}Long$1.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(_,$,_e){if(_.length===0)throw Error("empty string");if(_==="NaN"||_==="Infinity"||_==="+Infinity"||_==="-Infinity")return ZERO;if(typeof $=="number"?(_e=$,$=!1):$=!!$,_e=_e||10,_e<2||36<_e)throw RangeError("radix");var et;if((et=_.indexOf("-"))>0)throw Error("interior hyphen");if(et===0)return fromString(_.substring(1),$,_e).neg();for(var tt=fromNumber(pow_dbl(_e,8)),rt=ZERO,nt=0;nt<_.length;nt+=8){var it=Math.min(8,_.length-nt),st=parseInt(_.substring(nt,nt+it),_e);if(it<8){var at=fromNumber(pow_dbl(_e,it));rt=rt.mul(at).add(fromNumber(st))}else rt=rt.mul(tt),rt=rt.add(fromNumber(st))}return rt.unsigned=$,rt}Long$1.fromString=fromString;function fromValue(_,$){return typeof _=="number"?fromNumber(_,$):typeof _=="string"?fromString(_,$):fromBits(_.low,_.high,typeof $=="boolean"?$:_.unsigned)}Long$1.fromValue=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long$1.ZERO=ZERO;var UZERO=fromInt(0,!0);Long$1.UZERO=UZERO;var ONE$1=fromInt(1);Long$1.ONE=ONE$1;var UONE=fromInt(1,!0);Long$1.UONE=UONE;var NEG_ONE=fromInt(-1);Long$1.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long$1.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long$1.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long$1.MIN_VALUE=MIN_VALUE;var LongPrototype=Long$1.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low};LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)};LongPrototype.toString=function($){if($=$||10,$<2||36<$)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(MIN_VALUE)){var _e=fromNumber($),et=this.div(_e),tt=et.mul(_e).sub(this);return et.toString($)+tt.toInt().toString($)}else return"-"+this.neg().toString($);for(var rt=fromNumber(pow_dbl($,6),this.unsigned),nt=this,it="";;){var st=nt.div(rt),at=nt.sub(st.mul(rt)).toInt()>>>0,ot=at.toString($);if(nt=st,nt.isZero())return ot+it;for(;ot.length<6;)ot="0"+ot;it=""+ot+it}};LongPrototype.getHighBits=function(){return this.high};LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0};LongPrototype.getLowBits=function(){return this.low};LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0};LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var $=this.high!=0?this.high:this.low,_e=31;_e>0&&!($&1<<_e);_e--);return this.high!=0?_e+33:_e+1};LongPrototype.isZero=function(){return this.high===0&&this.low===0};LongPrototype.eqz=LongPrototype.isZero;LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0};LongPrototype.isPositive=function(){return this.unsigned||this.high>=0};LongPrototype.isOdd=function(){return(this.low&1)===1};LongPrototype.isEven=function(){return(this.low&1)===0};LongPrototype.equals=function($){return isLong($)||($=fromValue($)),this.unsigned!==$.unsigned&&this.high>>>31===1&&$.high>>>31===1?!1:this.high===$.high&&this.low===$.low};LongPrototype.eq=LongPrototype.equals;LongPrototype.notEquals=function($){return!this.eq($)};LongPrototype.neq=LongPrototype.notEquals;LongPrototype.ne=LongPrototype.notEquals;LongPrototype.lessThan=function($){return this.comp($)<0};LongPrototype.lt=LongPrototype.lessThan;LongPrototype.lessThanOrEqual=function($){return this.comp($)<=0};LongPrototype.lte=LongPrototype.lessThanOrEqual;LongPrototype.le=LongPrototype.lessThanOrEqual;LongPrototype.greaterThan=function($){return this.comp($)>0};LongPrototype.gt=LongPrototype.greaterThan;LongPrototype.greaterThanOrEqual=function($){return this.comp($)>=0};LongPrototype.gte=LongPrototype.greaterThanOrEqual;LongPrototype.ge=LongPrototype.greaterThanOrEqual;LongPrototype.compare=function($){if(isLong($)||($=fromValue($)),this.eq($))return 0;var _e=this.isNegative(),et=$.isNegative();return _e&&!et?-1:!_e&&et?1:this.unsigned?$.high>>>0>this.high>>>0||$.high===this.high&&$.low>>>0>this.low>>>0?-1:1:this.sub($).isNegative()?-1:1};LongPrototype.comp=LongPrototype.compare;LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE$1)};LongPrototype.neg=LongPrototype.negate;LongPrototype.add=function($){isLong($)||($=fromValue($));var _e=this.high>>>16,et=this.high&65535,tt=this.low>>>16,rt=this.low&65535,nt=$.high>>>16,it=$.high&65535,st=$.low>>>16,at=$.low&65535,ot=0,dt=0,ht=0,yt=0;return yt+=rt+at,ht+=yt>>>16,yt&=65535,ht+=tt+st,dt+=ht>>>16,ht&=65535,dt+=et+it,ot+=dt>>>16,dt&=65535,ot+=_e+nt,ot&=65535,fromBits(ht<<16|yt,ot<<16|dt,this.unsigned)};LongPrototype.subtract=function($){return isLong($)||($=fromValue($)),this.add($.neg())};LongPrototype.sub=LongPrototype.subtract;LongPrototype.multiply=function($){if(this.isZero())return ZERO;if(isLong($)||($=fromValue($)),wasm){var _e=wasm.mul(this.low,this.high,$.low,$.high);return fromBits(_e,wasm.get_high(),this.unsigned)}if($.isZero())return ZERO;if(this.eq(MIN_VALUE))return $.isOdd()?MIN_VALUE:ZERO;if($.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return $.isNegative()?this.neg().mul($.neg()):this.neg().mul($).neg();if($.isNegative())return this.mul($.neg()).neg();if(this.lt(TWO_PWR_24)&&$.lt(TWO_PWR_24))return fromNumber(this.toNumber()*$.toNumber(),this.unsigned);var et=this.high>>>16,tt=this.high&65535,rt=this.low>>>16,nt=this.low&65535,it=$.high>>>16,st=$.high&65535,at=$.low>>>16,ot=$.low&65535,dt=0,ht=0,yt=0,vt=0;return vt+=nt*ot,yt+=vt>>>16,vt&=65535,yt+=rt*ot,ht+=yt>>>16,yt&=65535,yt+=nt*at,ht+=yt>>>16,yt&=65535,ht+=tt*ot,dt+=ht>>>16,ht&=65535,ht+=rt*at,dt+=ht>>>16,ht&=65535,ht+=nt*st,dt+=ht>>>16,ht&=65535,dt+=et*ot+tt*at+rt*st+nt*it,dt&=65535,fromBits(yt<<16|vt,dt<<16|ht,this.unsigned)};LongPrototype.mul=LongPrototype.multiply;LongPrototype.divide=function($){if(isLong($)||($=fromValue($)),$.isZero())throw Error("division by zero");if(wasm){if(!this.unsigned&&this.high===-2147483648&&$.low===-1&&$.high===-1)return this;var _e=(this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,$.low,$.high);return fromBits(_e,wasm.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?UZERO:ZERO;var et,tt,rt;if(this.unsigned){if($.unsigned||($=$.toUnsigned()),$.gt(this))return UZERO;if($.gt(this.shru(1)))return UONE;rt=UZERO}else{if(this.eq(MIN_VALUE)){if($.eq(ONE$1)||$.eq(NEG_ONE))return MIN_VALUE;if($.eq(MIN_VALUE))return ONE$1;var nt=this.shr(1);return et=nt.div($).shl(1),et.eq(ZERO)?$.isNegative()?ONE$1:NEG_ONE:(tt=this.sub($.mul(et)),rt=et.add(tt.div($)),rt)}else if($.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return $.isNegative()?this.neg().div($.neg()):this.neg().div($).neg();if($.isNegative())return this.div($.neg()).neg();rt=ZERO}for(tt=this;tt.gte($);){et=Math.max(1,Math.floor(tt.toNumber()/$.toNumber()));for(var it=Math.ceil(Math.log(et)/Math.LN2),st=it<=48?1:pow_dbl(2,it-48),at=fromNumber(et),ot=at.mul($);ot.isNegative()||ot.gt(tt);)et-=st,at=fromNumber(et,this.unsigned),ot=at.mul($);at.isZero()&&(at=ONE$1),rt=rt.add(at),tt=tt.sub(ot)}return rt};LongPrototype.div=LongPrototype.divide;LongPrototype.modulo=function($){if(isLong($)||($=fromValue($)),wasm){var _e=(this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,$.low,$.high);return fromBits(_e,wasm.get_high(),this.unsigned)}return this.sub(this.div($).mul($))};LongPrototype.mod=LongPrototype.modulo;LongPrototype.rem=LongPrototype.modulo;LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)};LongPrototype.and=function($){return isLong($)||($=fromValue($)),fromBits(this.low&$.low,this.high&$.high,this.unsigned)};LongPrototype.or=function($){return isLong($)||($=fromValue($)),fromBits(this.low|$.low,this.high|$.high,this.unsigned)};LongPrototype.xor=function($){return isLong($)||($=fromValue($)),fromBits(this.low^$.low,this.high^$.high,this.unsigned)};LongPrototype.shiftLeft=function($){return isLong($)&&($=$.toInt()),($&=63)===0?this:$<32?fromBits(this.low<<$,this.high<<$|this.low>>>32-$,this.unsigned):fromBits(0,this.low<<$-32,this.unsigned)};LongPrototype.shl=LongPrototype.shiftLeft;LongPrototype.shiftRight=function($){return isLong($)&&($=$.toInt()),($&=63)===0?this:$<32?fromBits(this.low>>>$|this.high<<32-$,this.high>>$,this.unsigned):fromBits(this.high>>$-32,this.high>=0?0:-1,this.unsigned)};LongPrototype.shr=LongPrototype.shiftRight;LongPrototype.shiftRightUnsigned=function($){if(isLong($)&&($=$.toInt()),$&=63,$===0)return this;var _e=this.high;if($<32){var et=this.low;return fromBits(et>>>$|_e<<32-$,_e>>>$,this.unsigned)}else return $===32?fromBits(_e,0,this.unsigned):fromBits(_e>>>$-32,0,this.unsigned)};LongPrototype.shru=LongPrototype.shiftRightUnsigned;LongPrototype.shr_u=LongPrototype.shiftRightUnsigned;LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this};LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)};LongPrototype.toBytes=function($){return $?this.toBytesLE():this.toBytesBE()};LongPrototype.toBytesLE=function(){var $=this.high,_e=this.low;return[_e&255,_e>>>8&255,_e>>>16&255,_e>>>24,$&255,$>>>8&255,$>>>16&255,$>>>24]};LongPrototype.toBytesBE=function(){var $=this.high,_e=this.low;return[$>>>24,$>>>16&255,$>>>8&255,$&255,_e>>>24,_e>>>16&255,_e>>>8&255,_e&255]};Long$1.fromBytes=function($,_e,et){return et?Long$1.fromBytesLE($,_e):Long$1.fromBytesBE($,_e)};Long$1.fromBytesLE=function($,_e){return new Long$1($[0]|$[1]<<8|$[2]<<16|$[3]<<24,$[4]|$[5]<<8|$[6]<<16|$[7]<<24,_e)};Long$1.fromBytesBE=function($,_e){return new Long$1($[4]<<24|$[5]<<16|$[6]<<8|$[7],$[0]<<24|$[1]<<16|$[2]<<8|$[3],_e)};const long$1=getDefaultExportFromCjs$1(long),LongExports=_mergeNamespaces({__proto__:null,default:long$1},[long]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Long=long$1||LongExports;function hexToLong(_){return Long.fromString(_,!0,16)}const k0=hexToLong("c3a5c85c97cb3127"),k1=hexToLong("b492b66fbe98f273"),k2=hexToLong("9ae16a3b2f90404f");function shiftMix(_){return _.xor(_.shru(47))}function fetch$2(_,$,_e){const et=_.slice($,$+_e);return Long.fromBytes(Array.from(et),!0,!0)}function fetch64(_,$){return fetch$2(_,$,8)}function fetch32(_,$){return fetch$2(_,$,4)}function rotate64(_,$){return $===0?_:_.shru($).or(_.shl(64-$))}function hashLen16(_,$,_e=hexToLong("9ddfea08eb382d69")){let et=_.xor($).mul(_e);et=et.xor(et.shru(47));let tt=$.xor(et).mul(_e);return tt=tt.xor(tt.shru(47)),tt=tt.mul(_e),tt}function weakHashLen32WithSeeds(_,$,_e,et,tt,rt){tt=tt.add(_),rt=rotate64(rt.add(tt).add(et),21);const nt=tt;return tt=tt.add($),tt=tt.add(_e),rt=rt.add(rotate64(tt,44)),[tt.add(et),rt.add(nt)]}function weakHashLen32WithSeedsStr(_,$,_e,et){return weakHashLen32WithSeeds(fetch64(_,$),fetch64(_,$+8),fetch64(_,$+16),fetch64(_,$+24),_e,et)}function hashLen0to16(_,$=_.length){if($>=8){const _e=k2.add($*2),et=fetch64(_,0).add(k2),tt=fetch64(_,$-8),rt=rotate64(tt,37).mul(_e).add(et),nt=rotate64(et,25).add(tt).mul(_e);return hashLen16(rt,nt,_e)}if($>=4){const _e=k2.add($*2),et=fetch32(_,0);return hashLen16(et.shl(3).add($),fetch32(_,$-4),_e)}if($>0){const _e=_[0],et=_[$>>1],tt=_[$-1],rt=_e+(et<<8),nt=$+(tt<<2);return shiftMix(k2.mul(rt).xor(k0.mul(nt))).mul(k2)}return k2}function hashLen17to32(_,$=_.length){const _e=k2.add($*2),et=fetch64(_,0).mul(k1),tt=fetch64(_,8),rt=fetch64(_,$-8).mul(_e),nt=fetch64(_,$-16).mul(k2);return hashLen16(rotate64(et.add(tt),43).add(rotate64(rt,30)).add(nt),et.add(rotate64(tt.add(k2),18)).add(rt),_e)}function hashLen33to64(_,$=_.length){const _e=k2.add($*2),et=fetch64(_,0).mul(k2),tt=fetch64(_,8),rt=fetch64(_,$-8).mul(_e),nt=fetch64(_,$-16).mul(k2),it=rotate64(et.add(tt),43).add(rotate64(rt,30)).add(nt),st=hashLen16(it,et.add(rotate64(tt.add(k2),18)).add(rt),_e),at=fetch64(_,16).mul(_e),ot=fetch64(_,24),dt=it.add(fetch64(_,$-32)).mul(_e),ht=st.add(fetch64(_,$-24)).mul(_e);return hashLen16(rotate64(at.add(ot),43).add(rotate64(dt,30)).add(ht),at.add(rotate64(ot.add(et),18)).add(dt),_e)}function fingerPrint64(_,$=_.length){const _e=Long.fromNumber(81,!0);if($<=32)return $<=16?hashLen0to16(_,$):hashLen17to32(_,$);if($<=64)return hashLen33to64(_,$);let et=_e,tt=_e.mul(k1).add(113),rt=shiftMix(tt.mul(k2).add(113)).mul(k2),nt=[Long.UZERO,Long.UZERO],it=[Long.UZERO,Long.UZERO];et=et.mul(k2).add(fetch64(_,0));let st=0;const at=($-1>>6)*64,ot=at+($-1&63)-63;do et=rotate64(et.add(tt).add(nt[0]).add(fetch64(_,st+8)),37).mul(k1),tt=rotate64(tt.add(nt[1]).add(fetch64(_,st+48)),42).mul(k1),et=et.xor(it[1]),tt=tt.add(nt[0]).add(fetch64(_,st+40)),rt=rotate64(rt.add(it[0]),33).mul(k1),nt=weakHashLen32WithSeedsStr(_,st,nt[1].mul(k1),et.add(it[0])),it=weakHashLen32WithSeedsStr(_,st+32,rt.add(it[1]),tt.add(fetch64(_,st+16))),[rt,et]=[et,rt],st+=64;while(st!==at);const dt=k1.add(rt.and(255).shl(1));return st=ot,it[0]=it[0].add($-1&63),nt[0]=nt[0].add(it[0]),it[0]=it[0].add(nt[0]),et=rotate64(et.add(tt).add(nt[0]).add(fetch64(_,st+8)),37).mul(dt),tt=rotate64(tt.add(nt[1]).add(fetch64(_,st+48)),42).mul(dt),et=et.xor(it[1].mul(9)),tt=tt.add(nt[0].mul(9).add(fetch64(_,st+40))),rt=rotate64(rt.add(it[0]),33).mul(dt),nt=weakHashLen32WithSeedsStr(_,st,nt[1].mul(dt),et.add(it[0])),it=weakHashLen32WithSeedsStr(_,st+32,rt.add(it[1]),tt.add(fetch64(_,st+16))),[rt,et]=[et,rt],hashLen16(hashLen16(nt[0],it[0],dt).add(shiftMix(tt).mul(k0)).add(rt),hashLen16(nt[1],it[1],dt).add(et),dt)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function createScalarValue(_,$){return $==="string"?encodeString(_):toTypedArray([_],$)}function noConversionNeeded(_,$){return _ instanceof Float32Array&&$==="float32"||_ instanceof Int32Array&&$==="int32"||_ instanceof Uint8Array&&$==="bool"}function toTypedArray(_,$){if($==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(_)&&(_=flatten$2(_)),env().getBool("DEBUG")&&checkConversionForErrors(_,$),noConversionNeeded(_,$))return _;if($==null||$==="float32"||$==="complex64")return new Float32Array(_);if($==="int32")return new Int32Array(_);if($==="bool"){const _e=new Uint8Array(_.length);for(let et=0;et<_e.length;++et)Math.round(_[et])!==0&&(_e[et]=1);return _e}else throw new Error(`Unknown data type ${$}`)}function now$2(){return env().platform.now()}function fetch$1(_,$){return env().platform.fetch(_,$)}function encodeString(_,$="utf-8"){return $=$||"utf-8",env().platform.encode(_,$)}function decodeString(_,$="utf-8"){return $=$||"utf-8",env().platform.decode(_,$)}function isTypedArray$5(_){return env().platform.isTypedArray!=null?env().platform.isTypedArray(_):isTypedArrayBrowser(_)}function flatten$2(_,$=[],_e=!1){if($==null&&($=[]),typeof _=="boolean"||typeof _=="number"||typeof _=="string"||isPromise(_)||_==null||isTypedArray$5(_)&&_e)$.push(_);else if(Array.isArray(_)||isTypedArray$5(_))for(let et=0;et<_.length;++et)flatten$2(_[et],$,_e);else{let et=-1;for(const tt of Object.keys(_))/^([1-9]+[0-9]*|0)$/.test(tt)&&(et=Math.max(et,Number(tt)));for(let tt=0;tt<=et;tt++)flatten$2(_[tt],$,_e)}return $}const util$2=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual,arraysEqualWithNull,assert:assert$1,assertNonNegativeIntegerDimensions,assertNonNull,assertShapesMatch,bytesFromStringArray,bytesPerElement,checkConversionForErrors,clamp,computeStrides,convertBackendValuesAndArrayBuffer,createScalarValue,createShuffledIndices,decodeString,distSquared,encodeString,fetch:fetch$1,fingerPrint64,flatten:flatten$2,getArrayFromDType,getTypedArrayFromDType,hasEncodingLoss,hexToLong,indexToLoc,inferDtype,inferFromImplicitShape,isBoolean:isBoolean$2,isFunction:isFunction$4,isInt,isNumber:isNumber$4,isPromise,isScalarShape,isString:isString$2,isTypedArray:isTypedArray$5,isValidDtype,locToIndex,makeOnesTypedArray,makeZerosNestedTypedArray,makeZerosTypedArray,nearestDivisor,nearestLargerEven,now:now$2,parseAxisParam,randUniform,repeatedTry,rightPad,shuffle,shuffleCombo,sizeFromShape,sizeToSquarishShape,squeezeShape,sum:sum$3,swap:swap$1,tanh:tanh$3,toNestedArray,toTypedArray},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Profiler{constructor($,_e){this.backendTimer=$,this.logger=_e,_e==null&&(this.logger=new Logger)}profileKernel($,_e,et){let tt;const rt=()=>{tt=et()};let nt;const it=now$2();if(this.backendTimer.timerAvailable())nt=this.backendTimer.time(rt);else{rt();for(const at of tt)at.dataSync();nt=Promise.resolve({kernelMs:now$2()-it})}if(env().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let at=0;at<tt.length;at++){const ot=tt[at];ot.data().then(dt=>{checkComputationForErrors(dt,ot.dtype,$)})}return{kernelName:$,outputs:tt,inputs:_e,timeMs:nt.then(at=>at.kernelMs),extraInfo:nt.then(at=>at.getExtraProfileInfo!=null?at.getExtraProfileInfo():"")}}logKernelProfile($){const{kernelName:_e,outputs:et,timeMs:tt,inputs:rt,extraInfo:nt}=$;et.forEach(it=>{Promise.all([it.data(),tt,nt]).then(st=>{this.logger.logKernelProfile(_e,it,st[0],st[1],rt,st[2])})})}}function checkComputationForErrors(_,$,_e){if($!=="float32")return!1;for(let et=0;et<_.length;et++){const tt=_[et];if(isNaN(tt)||!isFinite(tt))return console.warn(`Found ${tt} in the result of '${_e}'`),!0}return!1}class Logger{logKernelProfile($,_e,et,tt,rt,nt){const it=typeof tt=="number"?rightPad(`${tt}ms`,9):tt.error,st=rightPad($,25),at=_e.rank,ot=_e.size,dt=rightPad(_e.shape.toString(),14);let ht="";for(const yt in rt){const vt=rt[yt];if(vt!=null){const xt=vt.shape||_e.shape,wt=xt.length;ht+=`${yt}: ${wt}D ${wt>0?xt:""} `}}console.log(`%c${st}	%c${it}	%c${at}D ${dt}	%c${ot}	%c${ht}	%c${nt}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getFilteredNodesXToY(_,$,_e){const et={},tt={};for(let st=0;st<$.length;st++)et[$[st].id]=!0;for(let st=0;st<_.length;st++){const at=_[st],ot=at.inputs;for(const dt in ot){const ht=ot[dt];let yt=!1;for(let vt=0;vt<$.length;vt++)if(et[ht.id]){at.outputs.forEach(xt=>et[xt.id]=!0),yt=!0,tt[at.id]=!0;break}if(yt)break}}const rt={};rt[_e.id]=!0;const nt={};for(let st=_.length-1;st>=0;st--){const at=_[st],ot=at.inputs;for(let dt=0;dt<at.outputs.length;dt++)if(rt[at.outputs[dt].id]){for(const ht in ot)rt[ot[ht].id]=!0,nt[at.id]=!0;break}}const it=[];for(let st=0;st<_.length;st++){const at=_[st];if(tt[at.id]&&nt[at.id]){const ot={};for(const ht in at.inputs){const yt=at.inputs[ht];et[yt.id]&&(ot[ht]=yt)}const dt=Object.assign({},at);dt.inputs=ot,dt.outputs=at.outputs,it.push(dt)}}return it}function backpropagateGradients(_,$,_e,et){for(let tt=$.length-1;tt>=0;tt--){const rt=$[tt],nt=[];if(rt.outputs.forEach(st=>{const at=_[st.id];at!=null?nt.push(at):nt.push(null)}),rt.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${rt.kernelName}.`);const it=rt.gradient(nt);for(const st in rt.inputs){if(!(st in it))throw new Error(`Cannot backprop through input ${st}. Available gradients found: ${Object.keys(it)}.`);const at=_e(()=>it[st]());if(at.dtype!=="float32")throw new Error(`Error in gradient for op ${rt.kernelName}. The gradient of input ${st} must have 'float32' dtype, but has '${at.dtype}'`);const ot=rt.inputs[st];if(!arraysEqual(at.shape,ot.shape))throw new Error(`Error in gradient for op ${rt.kernelName}. The gradient of input '${st}' has shape '${at.shape}', which does not match the shape of the input '${ot.shape}'`);if(_[ot.id]==null)_[ot.id]=at;else{const dt=_[ot.id];_[ot.id]=et(dt,at),dt.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FORMAT_LIMIT_NUM_VALS=20,FORMAT_NUM_FIRST_LAST_VALS=3,FORMAT_NUM_SIG_DIGITS=7;function tensorToString(_,$,_e,et){const tt=computeStrides($),rt=computeMaxSizePerColumn(_,$,_e,tt),nt=$.length,it=subTensorToString(_,$,_e,tt,rt),st=["Tensor"];return et&&(st.push(`  dtype: ${_e}`),st.push(`  rank: ${nt}`),st.push(`  shape: [${$}]`),st.push("  values:")),st.push(it.map(at=>"    "+at).join(`
`)),st.join(`
`)}function computeMaxSizePerColumn(_,$,_e,et){const tt=sizeFromShape($),rt=et[et.length-1],nt=new Array(rt).fill(0),it=$.length,st=_e==="complex64"?createComplexTuples(_):_;if(it>1)for(let at=0;at<tt/rt;at++){const ot=at*rt;for(let dt=0;dt<rt;dt++)nt[dt]=Math.max(nt[dt],valToString(st[ot+dt],0,_e).length)}return nt}function valToString(_,$,_e){let et;return Array.isArray(_)?et=`${parseFloat(_[0].toFixed(FORMAT_NUM_SIG_DIGITS))} + ${parseFloat(_[1].toFixed(FORMAT_NUM_SIG_DIGITS))}j`:isString$2(_)?et=`'${_}'`:_e==="bool"?et=boolNumToString(_):et=parseFloat(_.toFixed(FORMAT_NUM_SIG_DIGITS)).toString(),rightPad(et,$)}function boolNumToString(_){return _===0?"false":"true"}function subTensorToString(_,$,_e,et,tt,rt=!0){const nt=_e==="complex64"?2:1,it=$[0],st=$.length;if(st===0){if(_e==="complex64"){const xt=createComplexTuples(_);return[valToString(xt[0],0,_e)]}return _e==="bool"?[boolNumToString(_[0])]:[_[0].toString()]}if(st===1){if(it>FORMAT_LIMIT_NUM_VALS){const wt=FORMAT_NUM_FIRST_LAST_VALS*nt;let Et=Array.from(_.slice(0,wt)),At=Array.from(_.slice((it-FORMAT_NUM_FIRST_LAST_VALS)*nt,it*nt));return _e==="complex64"&&(Et=createComplexTuples(Et),At=createComplexTuples(At)),["["+Et.map((jt,kt)=>valToString(jt,tt[kt],_e)).join(", ")+", ..., "+At.map((jt,kt)=>valToString(jt,tt[it-FORMAT_NUM_FIRST_LAST_VALS+kt],_e)).join(", ")+"]"]}return["["+(_e==="complex64"?createComplexTuples(_):Array.from(_)).map((wt,Et)=>valToString(wt,tt[Et],_e)).join(", ")+"]"]}const at=$.slice(1),ot=et.slice(1),dt=et[0]*nt,ht=[];if(it>FORMAT_LIMIT_NUM_VALS){for(let xt=0;xt<FORMAT_NUM_FIRST_LAST_VALS;xt++){const wt=xt*dt,Et=wt+dt;ht.push(...subTensorToString(_.slice(wt,Et),at,_e,ot,tt,!1))}ht.push("...");for(let xt=it-FORMAT_NUM_FIRST_LAST_VALS;xt<it;xt++){const wt=xt*dt,Et=wt+dt;ht.push(...subTensorToString(_.slice(wt,Et),at,_e,ot,tt,xt===it-1))}}else for(let xt=0;xt<it;xt++){const wt=xt*dt,Et=wt+dt;ht.push(...subTensorToString(_.slice(wt,Et),at,_e,ot,tt,xt===it-1))}const yt=st===2?",":"";ht[0]="["+(it>0?ht[0]+yt:"");for(let xt=1;xt<ht.length-1;xt++)ht[xt]=" "+ht[xt]+yt;let vt=`,
`;for(let xt=2;xt<st;xt++)vt+=`
`;return ht[ht.length-1]=" "+ht[ht.length-1]+"]"+(rt?"":vt),ht}function createComplexTuples(_){const $=[];for(let _e=0;_e<_.length;_e+=2)$.push([_[_e],_[_e+1]]);return $}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TensorBuffer{constructor($,_e,et){if(this.dtype=_e,this.shape=$.slice(),this.size=sizeFromShape($),et!=null){const tt=et.length;assert$1(tt===this.size,()=>`Length of values '${tt}' does not match the size inferred by the shape '${this.size}'.`)}if(_e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=et||getArrayFromDType(_e,this.size),this.strides=computeStrides($)}set($,..._e){_e.length===0&&(_e=[0]),assert$1(_e.length===this.rank,()=>`The number of provided coordinates (${_e.length}) must match the rank (${this.rank})`);const et=this.locToIndex(_e);this.values[et]=$}get(...$){$.length===0&&($=[0]);let _e=0;for(const tt of $){if(tt<0||tt>=this.shape[_e]){const rt=`Requested out of range element at ${$}.   Buffer shape=${this.shape}`;throw new Error(rt)}_e++}let et=$[$.length-1];for(let tt=0;tt<$.length-1;++tt)et+=this.strides[tt]*$[tt];return this.values[et]}locToIndex($){if(this.rank===0)return 0;if(this.rank===1)return $[0];let _e=$[$.length-1];for(let et=0;et<$.length-1;++et)_e+=this.strides[et]*$[et];return _e}indexToLoc($){if(this.rank===0)return[];if(this.rank===1)return[$];const _e=new Array(this.shape.length);for(let et=0;et<_e.length-1;++et)_e[et]=Math.floor($/this.strides[et]),$-=_e[et]*this.strides[et];return _e[_e.length-1]=$,_e}get rank(){return this.shape.length}toTensor(){return trackerFn().makeTensor(this.values,this.shape,this.dtype)}}let trackerFn=null,opHandler$1=null;function setTensorTracker(_){trackerFn=_}function setOpHandler(_){opHandler$1=_}class Tensor{constructor($,_e,et,tt){this.kept=!1,this.isDisposedInternal=!1,this.shape=$.slice(),this.dtype=_e||"float32",this.size=sizeFromShape($),this.strides=computeStrides($),this.dataId=et,this.id=tt,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const $=await this.data();return opHandler$1.buffer(this.shape,this.dtype,$)}bufferSync(){return opHandler$1.buffer(this.shape,this.dtype,this.dataSync())}async array(){const $=await this.data();return toNestedArray(this.shape,$,this.dtype==="complex64")}arraySync(){return toNestedArray(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const $=trackerFn().read(this.dataId);if(this.dtype==="string"){const _e=await $;try{return _e.map(et=>decodeString(et))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return $}dataToGPU($){return this.throwIfDisposed(),trackerFn().readToGPU(this.dataId,$)}dataSync(){this.throwIfDisposed();const $=trackerFn().readSync(this.dataId);if(this.dtype==="string")try{return $.map(_e=>decodeString(_e))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return $}async bytes(){this.throwIfDisposed();const $=await trackerFn().read(this.dataId);return this.dtype==="string"?$:new Uint8Array($.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),trackerFn().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print($=!1){return opHandler$1.print(this,$)}clone(){return this.throwIfDisposed(),opHandler$1.clone(this)}toString($=!1){const _e=this.dataSync();return tensorToString(_e,this.shape,this.dtype,$)}cast($){return this.throwIfDisposed(),opHandler$1.cast(this,$)}variable($=!0,_e,et){return this.throwIfDisposed(),trackerFn().makeVariable(this,$,_e,et)}}Object.defineProperty(Tensor,Symbol.hasInstance,{value:_=>!!_&&_.data!=null&&_.dataSync!=null&&_.throwIfDisposed!=null});function getGlobalTensorClass(){return getGlobal("Tensor",()=>Tensor)}getGlobalTensorClass();class Variable extends Tensor{constructor($,_e,et,tt){super($.shape,$.dtype,$.dataId,tt),this.trainable=_e,this.name=et}assign($){if($.dtype!==this.dtype)throw new Error(`dtype of the new value (${$.dtype}) and previous value (${this.dtype}) must match`);if(!arraysEqual($.shape,this.shape))throw new Error(`shape of the new value (${$.shape}) and previous value (${this.shape}) must match`);trackerFn().disposeTensor(this),this.dataId=$.dataId,trackerFn().incRef(this,null)}dispose(){trackerFn().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Variable,Symbol.hasInstance,{value:_=>_ instanceof Tensor&&_.assign!=null&&_.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Rank;(function(_){_.R0="R0",_.R1="R1",_.R2="R2",_.R3="R3",_.R4="R4",_.R5="R5",_.R6="R6"})(Rank||(Rank={}));var UpcastInt32AndMap;(function(_){_.float32="float32",_.int32="int32",_.bool="int32",_.complex64="complex64"})(UpcastInt32AndMap||(UpcastInt32AndMap={}));var UpcastBoolAndMap;(function(_){_.float32="float32",_.int32="int32",_.bool="bool",_.complex64="complex64"})(UpcastBoolAndMap||(UpcastBoolAndMap={}));var UpcastFloat32AndMap;(function(_){_.float32="float32",_.int32="float32",_.bool="float32",_.complex64="complex64"})(UpcastFloat32AndMap||(UpcastFloat32AndMap={}));var UpcastComplex64AndMap;(function(_){_.float32="complex64",_.int32="complex64",_.bool="complex64",_.complex64="complex64"})(UpcastComplex64AndMap||(UpcastComplex64AndMap={}));const upcastTypeMap={float32:UpcastFloat32AndMap,int32:UpcastInt32AndMap,bool:UpcastBoolAndMap,complex64:UpcastComplex64AndMap};function upcastType(_,$){if(_==="string"||$==="string"){if(_==="string"&&$==="string")return"string";throw new Error(`Can not upcast ${_} with ${$}`)}return upcastTypeMap[_][$]}function sumOutType(_){return upcastType(_,"int32")}function isWebGLData(_){return _!=null&&typeof _=="object"&&"texture"in _&&_.texture instanceof WebGLTexture}function isWebGPUData(_){return typeof GPUBuffer<"u"&&_!=null&&typeof _=="object"&&"buffer"in _&&_.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function makeTypesMatch(_,$){if(_.dtype===$.dtype)return[_,$];const _e=upcastType(_.dtype,$.dtype);return[_.cast(_e),$.cast(_e)]}function assertTypesMatch(_,$){assert$1(_.dtype===$.dtype,()=>`The dtypes of the first(${_.dtype}) and second(${$.dtype}) input must match`)}function isTensorInList(_,$){return $.some(_e=>_e.id===_.id)}function getTensorsInContainer(_){const $=[];return walkTensorContainer(_,$,new Set),$}function walkTensorContainer(_,$,_e){if(_==null)return;if(_ instanceof Tensor){$.push(_);return}if(!isIterable$1(_))return;const et=_;for(const tt in et){const rt=et[tt];_e.has(rt)||(_e.add(rt),walkTensorContainer(rt,$,_e))}}function isIterable$1(_){return Array.isArray(_)||typeof _=="object"}const tensor_util=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch,getTensorsInContainer,isTensorInList,makeTypesMatch},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function isRegisteredKernelInvocation(_){return _.kernelName!=null}class EngineState{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map($=>$.name)))}}}dispose(){for(const $ in this.registeredVariables)this.registeredVariables[$].dispose()}}class Engine{constructor($){this.ENV=$,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new EngineState}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const $=this.getSortedBackends();for(let _e=0;_e<$.length;_e++){const et=$[_e];if(await this.initializeBackend(et).success){await this.setBackend(et);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:$,asyncInit:_e}=this.initializeBackendsAndReturnBest();if(_e)throw new Error(`The highest priority backend '${$}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend($)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend($){if(!($ in this.registry))if($ in this.registryFactory){const{asyncInit:_e}=this.initializeBackend($);if(_e)return null}else return null;return this.registry[$]}findBackendFactory($){return $ in this.registryFactory?this.registryFactory[$].factory:null}registerBackend($,_e,et=1){return $ in this.registryFactory?(warn$1(`${$} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[$]={factory:_e,priority:et},!0)}async setBackend($){if(this.registryFactory[$]==null)throw new Error(`Backend name '${$}' not found in registry`);if(this.backendName=$,this.registry[$]==null){this.backendInstance=null;const{success:_e,asyncInit:et}=this.initializeBackend($);if(!(et?await _e:_e))return!1}return this.backendInstance=this.registry[$],this.setupRegisteredKernels(),this.profiler=new Profiler(this.backendInstance),!0}setupRegisteredKernels(){getKernelsForBackend(this.backendName).forEach(_e=>{_e.setupFunc!=null&&_e.setupFunc(this.backendInstance)})}disposeRegisteredKernels($){getKernelsForBackend($).forEach(et=>{et.disposeFunc!=null&&et.disposeFunc(this.registry[$])})}initializeBackend($){const _e=this.registryFactory[$];if(_e==null)throw new Error(`Cannot initialize backend ${$}, no registration found.`);try{const et=_e.factory();if(et&&!(et instanceof KernelBackend)&&typeof et.then=="function"){const tt=++this.pendingBackendInitId,rt=et.then(nt=>tt<this.pendingBackendInitId?!1:(this.registry[$]=nt,this.pendingBackendInit=null,!0)).catch(nt=>(tt<this.pendingBackendInitId||(this.pendingBackendInit=null,warn$1(`Initialization of backend ${$} failed`),warn$1(nt.stack||nt.message)),!1));return this.pendingBackendInit=rt,{success:rt,asyncInit:!0}}else return this.registry[$]=et,{success:!0,asyncInit:!1}}catch(et){return warn$1(`Initialization of backend ${$} failed`),warn$1(et.stack||et.message),{success:!1,asyncInit:!1}}}removeBackend($){if(!($ in this.registryFactory))throw new Error(`${$} backend not found in registry`);this.backendName===$&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,$ in this.registry&&(this.disposeRegisteredKernels($),this.registry[$].dispose(),delete this.registry[$]),delete this.registryFactory[$],this.backendName===$&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(($,_e)=>this.registryFactory[_e].priority-this.registryFactory[$].priority)}initializeBackendsAndReturnBest(){const $=this.getSortedBackends();for(let _e=0;_e<$.length;_e++){const et=$[_e],{success:tt,asyncInit:rt}=this.initializeBackend(et);if(rt||tt)return{name:et,asyncInit:rt}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData($,_e){const et=this.state.tensorInfo.get(_e),tt=et.backend,rt=this.readSync(_e),nt=tt.refCount(_e);tt.disposeData(_e,!0),et.backend=$,$.move(_e,rt,et.shape,et.dtype,nt),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy($,_e){let et=null;if(_e==null){if(typeof $!="function")throw new Error("Please provide a function to tidy()");_e=$}else{if(typeof $!="string"&&!($ instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof _e!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");et=$}let tt;return this.scopedRun(()=>this.startScope(et),()=>this.endScope(tt),()=>(tt=_e(),tt instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),tt))}scopedRun($,_e,et){$();try{const tt=et();return _e(),tt}catch(tt){throw _e(),tt}}nextTensorId(){return Engine.nextTensorId++}nextVariableId(){return Engine.nextVariableId++}clone($){const _e=ENGINE.runKernel(Identity$1,{x:$}),et={x:$},tt=nt=>({x:()=>{const it="float32",st={x:nt},at={dtype:it};return ENGINE.runKernel(Cast,st,at)}}),rt=[];return this.addTapeNode(this.state.activeScope.name,et,[_e],tt,rt,{}),_e}runKernel($,_e,et){if(this.backendName==null&&this.backend,!(getKernel($,this.backendName)!=null))throw new Error(`Kernel '${$}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:$,inputs:_e,attrs:et})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak($,_e,et){const tt=this.backend.numDataIds();let rt=0;et.forEach(st=>{rt+=st.dtype==="complex64"?3:1});const nt=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],it=tt-_e-rt-nt;if(it>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${it} data ids) after running '${$}'`)}runKernelFunc($){let _e,et=[];const tt=this.isTapeOn(),rt=this.state.numBytes,nt=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let it;this.backendName==null&&this.backend;let st;const at=isRegisteredKernelInvocation($)?$.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(isRegisteredKernelInvocation($)){const{kernelName:vt,inputs:xt,attrs:wt}=$;this.backendName==null&&this.backend;const Et=getKernel(vt,this.backendName);assert$1(Et!=null,()=>`Cannot find registered kernel '${vt}' for backend '${this.backendName}'`),it=()=>{const At=this.backend.numDataIds();st=Et.kernelFunc({inputs:xt,attrs:wt,backend:this.backend});const jt=Array.isArray(st)?st:[st];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(vt,At,jt);const kt=jt.map(Lt=>Lt.rank!=null?Lt:this.makeTensorFromTensorInfo(Lt));if(tt){const Lt=this.getTensorsForGradient(vt,xt,kt);et=this.saveTensorsForBackwardMode(Lt)}return kt}}else{const{forwardFunc:vt}=$,xt=wt=>{tt&&(et=wt.map(Et=>this.keep(this.clone(Et))))};it=()=>{const wt=this.backend.numDataIds();st=this.tidy(()=>vt(this.backend,xt));const Et=Array.isArray(st)?st:[st];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(at,wt,Et),Et}}const{inputs:ot,attrs:dt}=$,ht=isRegisteredKernelInvocation($)?null:$.backwardsFunc;let yt;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?_e=it():(yt=this.profiler.profileKernel(at,ot,()=>it()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(yt),_e=yt.outputs)}),tt&&this.addTapeNode(at,ot,_e,ht,et,dt),this.state.profiling&&this.state.activeProfile.kernels.push({name:at,bytesAdded:this.state.numBytes-rt,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-nt,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(ot).map(vt=>ot[vt]!=null?ot[vt].shape:null),outputShapes:_e.map(vt=>vt.shape),kernelTimeMs:yt.timeMs,extraInfo:yt.extraInfo}),Array.isArray(st)?_e:_e[0]}saveTensorsForBackwardMode($){return $.map(et=>this.keep(this.clone(et)))}getTensorsForGradient($,_e,et){const tt=getGradient($);if(tt!=null){const rt=tt.inputsToSave||[],nt=tt.outputsToSave||[];let it;tt.saveAllInputs?(assert$1(Array.isArray(_e),()=>"saveAllInputs is true, expected inputs to be an array."),it=Object.keys(_e).map(at=>_e[at])):it=rt.map(at=>_e[at]);const st=et.filter((at,ot)=>nt[ot]);return it.concat(st)}return[]}makeTensor($,_e,et,tt){if($==null)throw new Error("Values passed to engine.makeTensor() are null");et=et||"float32",tt=tt||this.backend;let rt=$;et==="string"&&isString$2($[0])&&(rt=$.map(st=>encodeString(st)));const nt=tt.write(rt,_e,et),it=new Tensor(_e,et,nt,this.nextTensorId());if(this.trackTensor(it,tt),et==="string"){const st=this.state.tensorInfo.get(nt),at=bytesFromStringArray(rt);this.state.numBytes+=at-st.bytes,st.bytes=at}return it}makeTensorFromDataId($,_e,et,tt){et=et||"float32";const rt={dataId:$,shape:_e,dtype:et};return this.makeTensorFromTensorInfo(rt,tt)}makeTensorFromTensorInfo($,_e){const{dataId:et,shape:tt,dtype:rt}=$,nt=new Tensor(tt,rt,et,this.nextTensorId());return this.trackTensor(nt,_e),nt}makeVariable($,_e=!0,et,tt){et=et||this.nextVariableId().toString(),tt!=null&&tt!==$.dtype&&($=$.cast(tt));const rt=new Variable($,_e,et,this.nextTensorId());if(this.state.registeredVariables[rt.name]!=null)throw new Error(`Variable with name ${rt.name} was already registered`);return this.state.registeredVariables[rt.name]=rt,this.incRef(rt,this.backend),rt}trackTensor($,_e){this.state.numTensors++,$.dtype==="string"&&this.state.numStringTensors++;let et=0;$.dtype!=="complex64"&&$.dtype!=="string"&&(et=$.size*bytesPerElement($.dtype)),this.state.numBytes+=et,this.state.tensorInfo.has($.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set($.dataId,{backend:_e||this.backend,dtype:$.dtype,shape:$.shape,bytes:et})),$ instanceof Variable||this.track($)}incRef($,_e){this.trackTensor($,_e),this.backend.incRef($.dataId)}removeDataId($,_e){this.state.tensorInfo.has($)&&this.state.tensorInfo.get($).backend===_e&&(this.state.tensorInfo.delete($),this.state.numDataBuffers--)}disposeTensor($){if(!this.state.tensorInfo.has($.dataId))return;const _e=this.state.tensorInfo.get($.dataId);if(this.state.numTensors--,$.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=_e.bytes),$.dtype!=="complex64"&&$.dtype!=="string"){const et=$.size*bytesPerElement($.dtype);this.state.numBytes-=et}_e.backend.disposeData($.dataId)&&this.removeDataId($.dataId,_e.backend)}disposeVariables(){for(const $ in this.state.registeredVariables){const _e=this.state.registeredVariables[$];this.disposeVariable(_e)}}disposeVariable($){this.disposeTensor($),this.state.registeredVariables[$.name]!=null&&delete this.state.registeredVariables[$.name]}memory(){const $=this.backend.memory();return $.numTensors=this.state.numTensors,$.numDataBuffers=this.state.numDataBuffers,$.numBytes=this.state.numBytes,this.state.numStringTensors>0&&($.unreliable=!0,$.reasons==null&&($.reasons=[]),$.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),$}async profile($){this.state.profiling=!0;const _e=this.state.numBytes,et=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await $(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(tt=>tt.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-_e,this.state.activeProfile.newTensors=this.state.numTensors-et;for(const tt of this.state.activeProfile.kernels)tt.kernelTimeMs=await tt.kernelTimeMs,tt.extraInfo=await tt.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode($,_e,et,tt,rt,nt){const it={id:this.state.nextTapeNodeId++,kernelName:$,inputs:_e,outputs:et,saved:rt},st=getGradient($);st!=null&&(tt=st.gradFunc),tt!=null&&(it.gradient=at=>(at=at.map((ot,dt)=>{if(ot==null){const ht=et[dt],yt=makeZerosTypedArray(ht.size,ht.dtype);return this.makeTensor(yt,ht.shape,ht.dtype)}return ot}),tt(at.length>1?at:at[0],rt,nt))),this.state.activeTape.push(it)}keep($){return $.kept=!0,$}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope($){const _e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};$&&(_e.name=$),this.state.scopeStack.push(_e),this.state.activeScope=_e}endScope($){const _e=getTensorsInContainer($),et=new Set(_e.map(rt=>rt.id));for(let rt=0;rt<this.state.activeScope.track.length;rt++){const nt=this.state.activeScope.track[rt];!nt.kept&&!et.has(nt.id)&&nt.dispose()}const tt=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],_e.forEach(rt=>{!rt.kept&&rt.scopeId===tt.id&&this.track(rt)})}gradients($,_e,et,tt=!1){if(assert$1(_e.length>0,()=>"gradients() received an empty list of xs."),et!=null&&et.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${et.dtype}'`);const rt=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",$));assert$1(rt instanceof Tensor,()=>"The result y returned by f() must be a tensor.");const nt=getFilteredNodesXToY(this.state.activeTape,_e,rt);if(!tt&&nt.length===0&&_e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const it={};it[rt.id]=et??ones$2(rt.shape),backpropagateGradients(it,nt,at=>this.tidy(at),add$4);const st=_e.map(at=>it[at.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(at=>{for(const ot of at.saved)ot.dispose()}),this.state.activeTape=null),{value:rt,grads:st}})}customGrad($){return assert$1(isFunction$4($),()=>"The f passed in customGrad(f) must be a function."),(..._e)=>{assert$1(_e.every(it=>it instanceof Tensor),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let et;const tt={};_e.forEach((it,st)=>{tt[st]=it});const rt=(it,st)=>(et=$(..._e,st),assert$1(et.value instanceof Tensor,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),assert$1(isFunction$4(et.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),et.value),nt=(it,st)=>{const at=et.gradFunc(it,st),ot=Array.isArray(at)?at:[at];assert$1(ot.length===_e.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),assert$1(ot.every(ht=>ht instanceof Tensor),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const dt={};return ot.forEach((ht,yt)=>{dt[yt]=()=>ht}),dt};return this.runKernelFunc({forwardFunc:rt,backwardsFunc:nt,inputs:tt})}}readSync($){return this.state.tensorInfo.get($).backend.readSync($)}read($){return this.state.tensorInfo.get($).backend.read($)}readToGPU($,_e){return this.state.tensorInfo.get($).backend.readToGPU($,_e)}async time($){const _e=now$2(),et=await this.backend.time($);return et.wallMs=now$2()-_e,et}track($){return this.state.activeScope!=null&&($.scopeId=this.state.activeScope.id,this.state.activeScope.track.push($)),$}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new EngineState;for(const $ in this.registry)this.disposeRegisteredKernels($),this.registry[$].dispose(),delete this.registry[$];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Engine.nextTensorId=0;Engine.nextVariableId=0;function ones$2(_){const $=makeOnesTypedArray(sizeFromShape(_),"float32");return ENGINE.makeTensor($,_,"float32")}function getOrMakeEngine(){const _=getGlobalNamespace();if(_._tfengine==null){const $=new Environment(_);_._tfengine=new Engine($)}return setEnvironmentGlobal(_._tfengine.ENV),setTensorTracker(()=>_._tfengine),_._tfengine}const ENGINE=getOrMakeEngine();function add$4(_,$){const _e={a:_,b:$};return ENGINE.runKernel(Add$1,_e)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _isNavigatorDefined(){return typeof navigator<"u"&&navigator!=null}let isMobileMockValue;function mockIsMobile(_){isMobileMockValue=_}function isMobile(_){if(isMobileMockValue!==void 0)return isMobileMockValue;if(_||_isNavigatorDefined()){if(_||(_=navigator),_.product==="ReactNative")return!0;const $=_.userAgent||_.vendor||(typeof window<"u"?window.opera:"");if(!$){const _e=_;return _e.userAgentData&&_e.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test($)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test($.substr(0,4))}return!1}function isBrowser(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const device_util=Object.freeze(Object.defineProperty({__proto__:null,isBrowser,isMobile,mockIsMobile},Symbol.toStringTag,{value:"Module"})),ENV$3=env();ENV$3.registerFlag("DEBUG",()=>!1,_=>{_&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});ENV$3.registerFlag("IS_BROWSER",()=>isBrowser());ENV$3.registerFlag("IS_NODE",()=>typeof process$1<"u"&&typeof process$1.versions<"u"&&typeof process$1.versions.node<"u");ENV$3.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));ENV$3.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));ENV$3.registerFlag("PROD",()=>!1);ENV$3.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ENV$3.getBool("DEBUG"));ENV$3.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);ENV$3.registerFlag("IS_TEST",()=>!1);ENV$3.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>ENV$3.getBool("DEBUG"));ENV$3.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);ENV$3.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);ENV$3.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);var buffer$2={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup[45]=62;revLookup[95]=63;function getLens(_){var $=_.length;if($%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _e=_.indexOf("=");_e===-1&&(_e=$);var et=_e===$?0:4-_e%4;return[_e,et]}function byteLength(_){var $=getLens(_),_e=$[0],et=$[1];return(_e+et)*3/4-et}function _byteLength(_,$,_e){return($+_e)*3/4-_e}function toByteArray(_){var $,_e=getLens(_),et=_e[0],tt=_e[1],rt=new Arr(_byteLength(_,et,tt)),nt=0,it=tt>0?et-4:et,st;for(st=0;st<it;st+=4)$=revLookup[_.charCodeAt(st)]<<18|revLookup[_.charCodeAt(st+1)]<<12|revLookup[_.charCodeAt(st+2)]<<6|revLookup[_.charCodeAt(st+3)],rt[nt++]=$>>16&255,rt[nt++]=$>>8&255,rt[nt++]=$&255;return tt===2&&($=revLookup[_.charCodeAt(st)]<<2|revLookup[_.charCodeAt(st+1)]>>4,rt[nt++]=$&255),tt===1&&($=revLookup[_.charCodeAt(st)]<<10|revLookup[_.charCodeAt(st+1)]<<4|revLookup[_.charCodeAt(st+2)]>>2,rt[nt++]=$>>8&255,rt[nt++]=$&255),rt}function tripletToBase64(_){return lookup[_>>18&63]+lookup[_>>12&63]+lookup[_>>6&63]+lookup[_&63]}function encodeChunk(_,$,_e){for(var et,tt=[],rt=$;rt<_e;rt+=3)et=(_[rt]<<16&16711680)+(_[rt+1]<<8&65280)+(_[rt+2]&255),tt.push(tripletToBase64(et));return tt.join("")}function fromByteArray(_){for(var $,_e=_.length,et=_e%3,tt=[],rt=16383,nt=0,it=_e-et;nt<it;nt+=rt)tt.push(encodeChunk(_,nt,nt+rt>it?it:nt+rt));return et===1?($=_[_e-1],tt.push(lookup[$>>2]+lookup[$<<4&63]+"==")):et===2&&($=(_[_e-2]<<8)+_[_e-1],tt.push(lookup[$>>10]+lookup[$>>4&63]+lookup[$<<2&63]+"=")),tt.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(_,$,_e,et,tt){var rt,nt,it=tt*8-et-1,st=(1<<it)-1,at=st>>1,ot=-7,dt=_e?tt-1:0,ht=_e?-1:1,yt=_[$+dt];for(dt+=ht,rt=yt&(1<<-ot)-1,yt>>=-ot,ot+=it;ot>0;rt=rt*256+_[$+dt],dt+=ht,ot-=8);for(nt=rt&(1<<-ot)-1,rt>>=-ot,ot+=et;ot>0;nt=nt*256+_[$+dt],dt+=ht,ot-=8);if(rt===0)rt=1-at;else{if(rt===st)return nt?NaN:(yt?-1:1)*(1/0);nt=nt+Math.pow(2,et),rt=rt-at}return(yt?-1:1)*nt*Math.pow(2,rt-et)};ieee754.write=function(_,$,_e,et,tt,rt){var nt,it,st,at=rt*8-tt-1,ot=(1<<at)-1,dt=ot>>1,ht=tt===23?Math.pow(2,-24)-Math.pow(2,-77):0,yt=et?0:rt-1,vt=et?1:-1,xt=$<0||$===0&&1/$<0?1:0;for($=Math.abs($),isNaN($)||$===1/0?(it=isNaN($)?1:0,nt=ot):(nt=Math.floor(Math.log($)/Math.LN2),$*(st=Math.pow(2,-nt))<1&&(nt--,st*=2),nt+dt>=1?$+=ht/st:$+=ht*Math.pow(2,1-dt),$*st>=2&&(nt++,st/=2),nt+dt>=ot?(it=0,nt=ot):nt+dt>=1?(it=($*st-1)*Math.pow(2,tt),nt=nt+dt):(it=$*Math.pow(2,dt-1)*Math.pow(2,tt),nt=0));tt>=8;_[_e+yt]=it&255,yt+=vt,it/=256,tt-=8);for(nt=nt<<tt|it,at+=tt;at>0;_[_e+yt]=nt&255,yt+=vt,nt/=256,at-=8);_[_e+yt-vt]|=xt*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(_){const $=base64Js,_e=ieee754,et=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;_.Buffer=ot,_.SlowBuffer=Lt,_.INSPECT_MAX_BYTES=50;const tt=2147483647;_.kMaxLength=tt;const{Uint8Array:rt,ArrayBuffer:nt,SharedArrayBuffer:it}=globalThis;ot.TYPED_ARRAY_SUPPORT=st(),!ot.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function st(){try{const pr=new rt(1),nr={foo:function(){return 42}};return Object.setPrototypeOf(nr,rt.prototype),Object.setPrototypeOf(pr,nr),pr.foo()===42}catch{return!1}}Object.defineProperty(ot.prototype,"parent",{enumerable:!0,get:function(){if(ot.isBuffer(this))return this.buffer}}),Object.defineProperty(ot.prototype,"offset",{enumerable:!0,get:function(){if(ot.isBuffer(this))return this.byteOffset}});function at(pr){if(pr>tt)throw new RangeError('The value "'+pr+'" is invalid for option "size"');const nr=new rt(pr);return Object.setPrototypeOf(nr,ot.prototype),nr}function ot(pr,nr,lr){if(typeof pr=="number"){if(typeof nr=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return vt(pr)}return dt(pr,nr,lr)}ot.poolSize=8192;function dt(pr,nr,lr){if(typeof pr=="string")return xt(pr,nr);if(nt.isView(pr))return Et(pr);if(pr==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pr);if(Nr(pr,nt)||pr&&Nr(pr.buffer,nt)||typeof it<"u"&&(Nr(pr,it)||pr&&Nr(pr.buffer,it)))return At(pr,nr,lr);if(typeof pr=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const vr=pr.valueOf&&pr.valueOf();if(vr!=null&&vr!==pr)return ot.from(vr,nr,lr);const wr=jt(pr);if(wr)return wr;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof pr[Symbol.toPrimitive]=="function")return ot.from(pr[Symbol.toPrimitive]("string"),nr,lr);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pr)}ot.from=function(pr,nr,lr){return dt(pr,nr,lr)},Object.setPrototypeOf(ot.prototype,rt.prototype),Object.setPrototypeOf(ot,rt);function ht(pr){if(typeof pr!="number")throw new TypeError('"size" argument must be of type number');if(pr<0)throw new RangeError('The value "'+pr+'" is invalid for option "size"')}function yt(pr,nr,lr){return ht(pr),pr<=0?at(pr):nr!==void 0?typeof lr=="string"?at(pr).fill(nr,lr):at(pr).fill(nr):at(pr)}ot.alloc=function(pr,nr,lr){return yt(pr,nr,lr)};function vt(pr){return ht(pr),at(pr<0?0:kt(pr)|0)}ot.allocUnsafe=function(pr){return vt(pr)},ot.allocUnsafeSlow=function(pr){return vt(pr)};function xt(pr,nr){if((typeof nr!="string"||nr==="")&&(nr="utf8"),!ot.isEncoding(nr))throw new TypeError("Unknown encoding: "+nr);const lr=Bt(pr,nr)|0;let vr=at(lr);const wr=vr.write(pr,nr);return wr!==lr&&(vr=vr.slice(0,wr)),vr}function wt(pr){const nr=pr.length<0?0:kt(pr.length)|0,lr=at(nr);for(let vr=0;vr<nr;vr+=1)lr[vr]=pr[vr]&255;return lr}function Et(pr){if(Nr(pr,rt)){const nr=new rt(pr);return At(nr.buffer,nr.byteOffset,nr.byteLength)}return wt(pr)}function At(pr,nr,lr){if(nr<0||pr.byteLength<nr)throw new RangeError('"offset" is outside of buffer bounds');if(pr.byteLength<nr+(lr||0))throw new RangeError('"length" is outside of buffer bounds');let vr;return nr===void 0&&lr===void 0?vr=new rt(pr):lr===void 0?vr=new rt(pr,nr):vr=new rt(pr,nr,lr),Object.setPrototypeOf(vr,ot.prototype),vr}function jt(pr){if(ot.isBuffer(pr)){const nr=kt(pr.length)|0,lr=at(nr);return lr.length===0||pr.copy(lr,0,0,nr),lr}if(pr.length!==void 0)return typeof pr.length!="number"||nn(pr.length)?at(0):wt(pr);if(pr.type==="Buffer"&&Array.isArray(pr.data))return wt(pr.data)}function kt(pr){if(pr>=tt)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+tt.toString(16)+" bytes");return pr|0}function Lt(pr){return+pr!=pr&&(pr=0),ot.alloc(+pr)}ot.isBuffer=function(nr){return nr!=null&&nr._isBuffer===!0&&nr!==ot.prototype},ot.compare=function(nr,lr){if(Nr(nr,rt)&&(nr=ot.from(nr,nr.offset,nr.byteLength)),Nr(lr,rt)&&(lr=ot.from(lr,lr.offset,lr.byteLength)),!ot.isBuffer(nr)||!ot.isBuffer(lr))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(nr===lr)return 0;let vr=nr.length,wr=lr.length;for(let Pr=0,Sr=Math.min(vr,wr);Pr<Sr;++Pr)if(nr[Pr]!==lr[Pr]){vr=nr[Pr],wr=lr[Pr];break}return vr<wr?-1:wr<vr?1:0},ot.isEncoding=function(nr){switch(String(nr).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ot.concat=function(nr,lr){if(!Array.isArray(nr))throw new TypeError('"list" argument must be an Array of Buffers');if(nr.length===0)return ot.alloc(0);let vr;if(lr===void 0)for(lr=0,vr=0;vr<nr.length;++vr)lr+=nr[vr].length;const wr=ot.allocUnsafe(lr);let Pr=0;for(vr=0;vr<nr.length;++vr){let Sr=nr[vr];if(Nr(Sr,rt))Pr+Sr.length>wr.length?(ot.isBuffer(Sr)||(Sr=ot.from(Sr)),Sr.copy(wr,Pr)):rt.prototype.set.call(wr,Sr,Pr);else if(ot.isBuffer(Sr))Sr.copy(wr,Pr);else throw new TypeError('"list" argument must be an Array of Buffers');Pr+=Sr.length}return wr};function Bt(pr,nr){if(ot.isBuffer(pr))return pr.length;if(nt.isView(pr)||Nr(pr,nt))return pr.byteLength;if(typeof pr!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof pr);const lr=pr.length,vr=arguments.length>2&&arguments[2]===!0;if(!vr&&lr===0)return 0;let wr=!1;for(;;)switch(nr){case"ascii":case"latin1":case"binary":return lr;case"utf8":case"utf-8":return Ar(pr).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return lr*2;case"hex":return lr>>>1;case"base64":return jr(pr).length;default:if(wr)return vr?-1:Ar(pr).length;nr=(""+nr).toLowerCase(),wr=!0}}ot.byteLength=Bt;function Gt(pr,nr,lr){let vr=!1;if((nr===void 0||nr<0)&&(nr=0),nr>this.length||((lr===void 0||lr>this.length)&&(lr=this.length),lr<=0)||(lr>>>=0,nr>>>=0,lr<=nr))return"";for(pr||(pr="utf8");;)switch(pr){case"hex":return zt(this,nr,lr);case"utf8":case"utf-8":return Nt(this,nr,lr);case"ascii":return pt(this,nr,lr);case"latin1":case"binary":return Rt(this,nr,lr);case"base64":return St(this,nr,lr);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Yt(this,nr,lr);default:if(vr)throw new TypeError("Unknown encoding: "+pr);pr=(pr+"").toLowerCase(),vr=!0}}ot.prototype._isBuffer=!0;function er(pr,nr,lr){const vr=pr[nr];pr[nr]=pr[lr],pr[lr]=vr}ot.prototype.swap16=function(){const nr=this.length;if(nr%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let lr=0;lr<nr;lr+=2)er(this,lr,lr+1);return this},ot.prototype.swap32=function(){const nr=this.length;if(nr%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let lr=0;lr<nr;lr+=4)er(this,lr,lr+3),er(this,lr+1,lr+2);return this},ot.prototype.swap64=function(){const nr=this.length;if(nr%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let lr=0;lr<nr;lr+=8)er(this,lr,lr+7),er(this,lr+1,lr+6),er(this,lr+2,lr+5),er(this,lr+3,lr+4);return this},ot.prototype.toString=function(){const nr=this.length;return nr===0?"":arguments.length===0?Nt(this,0,nr):Gt.apply(this,arguments)},ot.prototype.toLocaleString=ot.prototype.toString,ot.prototype.equals=function(nr){if(!ot.isBuffer(nr))throw new TypeError("Argument must be a Buffer");return this===nr?!0:ot.compare(this,nr)===0},ot.prototype.inspect=function(){let nr="";const lr=_.INSPECT_MAX_BYTES;return nr=this.toString("hex",0,lr).replace(/(.{2})/g,"$1 ").trim(),this.length>lr&&(nr+=" ... "),"<Buffer "+nr+">"},et&&(ot.prototype[et]=ot.prototype.inspect),ot.prototype.compare=function(nr,lr,vr,wr,Pr){if(Nr(nr,rt)&&(nr=ot.from(nr,nr.offset,nr.byteLength)),!ot.isBuffer(nr))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof nr);if(lr===void 0&&(lr=0),vr===void 0&&(vr=nr?nr.length:0),wr===void 0&&(wr=0),Pr===void 0&&(Pr=this.length),lr<0||vr>nr.length||wr<0||Pr>this.length)throw new RangeError("out of range index");if(wr>=Pr&&lr>=vr)return 0;if(wr>=Pr)return-1;if(lr>=vr)return 1;if(lr>>>=0,vr>>>=0,wr>>>=0,Pr>>>=0,this===nr)return 0;let Sr=Pr-wr,Dr=vr-lr;const rn=Math.min(Sr,Dr),Ir=this.slice(wr,Pr),Or=nr.slice(lr,vr);for(let sn=0;sn<rn;++sn)if(Ir[sn]!==Or[sn]){Sr=Ir[sn],Dr=Or[sn];break}return Sr<Dr?-1:Dr<Sr?1:0};function tr(pr,nr,lr,vr,wr){if(pr.length===0)return-1;if(typeof lr=="string"?(vr=lr,lr=0):lr>2147483647?lr=2147483647:lr<-2147483648&&(lr=-2147483648),lr=+lr,nn(lr)&&(lr=wr?0:pr.length-1),lr<0&&(lr=pr.length+lr),lr>=pr.length){if(wr)return-1;lr=pr.length-1}else if(lr<0)if(wr)lr=0;else return-1;if(typeof nr=="string"&&(nr=ot.from(nr,vr)),ot.isBuffer(nr))return nr.length===0?-1:ar(pr,nr,lr,vr,wr);if(typeof nr=="number")return nr=nr&255,typeof rt.prototype.indexOf=="function"?wr?rt.prototype.indexOf.call(pr,nr,lr):rt.prototype.lastIndexOf.call(pr,nr,lr):ar(pr,[nr],lr,vr,wr);throw new TypeError("val must be string, number or Buffer")}function ar(pr,nr,lr,vr,wr){let Pr=1,Sr=pr.length,Dr=nr.length;if(vr!==void 0&&(vr=String(vr).toLowerCase(),vr==="ucs2"||vr==="ucs-2"||vr==="utf16le"||vr==="utf-16le")){if(pr.length<2||nr.length<2)return-1;Pr=2,Sr/=2,Dr/=2,lr/=2}function rn(Or,sn){return Pr===1?Or[sn]:Or.readUInt16BE(sn*Pr)}let Ir;if(wr){let Or=-1;for(Ir=lr;Ir<Sr;Ir++)if(rn(pr,Ir)===rn(nr,Or===-1?0:Ir-Or)){if(Or===-1&&(Or=Ir),Ir-Or+1===Dr)return Or*Pr}else Or!==-1&&(Ir-=Ir-Or),Or=-1}else for(lr+Dr>Sr&&(lr=Sr-Dr),Ir=lr;Ir>=0;Ir--){let Or=!0;for(let sn=0;sn<Dr;sn++)if(rn(pr,Ir+sn)!==rn(nr,sn)){Or=!1;break}if(Or)return Ir}return-1}ot.prototype.includes=function(nr,lr,vr){return this.indexOf(nr,lr,vr)!==-1},ot.prototype.indexOf=function(nr,lr,vr){return tr(this,nr,lr,vr,!0)},ot.prototype.lastIndexOf=function(nr,lr,vr){return tr(this,nr,lr,vr,!1)};function Mt(pr,nr,lr,vr){lr=Number(lr)||0;const wr=pr.length-lr;vr?(vr=Number(vr),vr>wr&&(vr=wr)):vr=wr;const Pr=nr.length;vr>Pr/2&&(vr=Pr/2);let Sr;for(Sr=0;Sr<vr;++Sr){const Dr=parseInt(nr.substr(Sr*2,2),16);if(nn(Dr))return Sr;pr[lr+Sr]=Dr}return Sr}function lt(pr,nr,lr,vr){return Cr(Ar(nr,pr.length-lr),pr,lr,vr)}function mt(pr,nr,lr,vr){return Cr($r(nr),pr,lr,vr)}function gt(pr,nr,lr,vr){return Cr(jr(nr),pr,lr,vr)}function bt(pr,nr,lr,vr){return Cr(Tr(nr,pr.length-lr),pr,lr,vr)}ot.prototype.write=function(nr,lr,vr,wr){if(lr===void 0)wr="utf8",vr=this.length,lr=0;else if(vr===void 0&&typeof lr=="string")wr=lr,vr=this.length,lr=0;else if(isFinite(lr))lr=lr>>>0,isFinite(vr)?(vr=vr>>>0,wr===void 0&&(wr="utf8")):(wr=vr,vr=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Pr=this.length-lr;if((vr===void 0||vr>Pr)&&(vr=Pr),nr.length>0&&(vr<0||lr<0)||lr>this.length)throw new RangeError("Attempt to write outside buffer bounds");wr||(wr="utf8");let Sr=!1;for(;;)switch(wr){case"hex":return Mt(this,nr,lr,vr);case"utf8":case"utf-8":return lt(this,nr,lr,vr);case"ascii":case"latin1":case"binary":return mt(this,nr,lr,vr);case"base64":return gt(this,nr,lr,vr);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return bt(this,nr,lr,vr);default:if(Sr)throw new TypeError("Unknown encoding: "+wr);wr=(""+wr).toLowerCase(),Sr=!0}},ot.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function St(pr,nr,lr){return nr===0&&lr===pr.length?$.fromByteArray(pr):$.fromByteArray(pr.slice(nr,lr))}function Nt(pr,nr,lr){lr=Math.min(pr.length,lr);const vr=[];let wr=nr;for(;wr<lr;){const Pr=pr[wr];let Sr=null,Dr=Pr>239?4:Pr>223?3:Pr>191?2:1;if(wr+Dr<=lr){let rn,Ir,Or,sn;switch(Dr){case 1:Pr<128&&(Sr=Pr);break;case 2:rn=pr[wr+1],(rn&192)===128&&(sn=(Pr&31)<<6|rn&63,sn>127&&(Sr=sn));break;case 3:rn=pr[wr+1],Ir=pr[wr+2],(rn&192)===128&&(Ir&192)===128&&(sn=(Pr&15)<<12|(rn&63)<<6|Ir&63,sn>2047&&(sn<55296||sn>57343)&&(Sr=sn));break;case 4:rn=pr[wr+1],Ir=pr[wr+2],Or=pr[wr+3],(rn&192)===128&&(Ir&192)===128&&(Or&192)===128&&(sn=(Pr&15)<<18|(rn&63)<<12|(Ir&63)<<6|Or&63,sn>65535&&sn<1114112&&(Sr=sn))}}Sr===null?(Sr=65533,Dr=1):Sr>65535&&(Sr-=65536,vr.push(Sr>>>10&1023|55296),Sr=56320|Sr&1023),vr.push(Sr),wr+=Dr}return Tt(vr)}const Pt=4096;function Tt(pr){const nr=pr.length;if(nr<=Pt)return String.fromCharCode.apply(String,pr);let lr="",vr=0;for(;vr<nr;)lr+=String.fromCharCode.apply(String,pr.slice(vr,vr+=Pt));return lr}function pt(pr,nr,lr){let vr="";lr=Math.min(pr.length,lr);for(let wr=nr;wr<lr;++wr)vr+=String.fromCharCode(pr[wr]&127);return vr}function Rt(pr,nr,lr){let vr="";lr=Math.min(pr.length,lr);for(let wr=nr;wr<lr;++wr)vr+=String.fromCharCode(pr[wr]);return vr}function zt(pr,nr,lr){const vr=pr.length;(!nr||nr<0)&&(nr=0),(!lr||lr<0||lr>vr)&&(lr=vr);let wr="";for(let Pr=nr;Pr<lr;++Pr)wr+=Mr[pr[Pr]];return wr}function Yt(pr,nr,lr){const vr=pr.slice(nr,lr);let wr="";for(let Pr=0;Pr<vr.length-1;Pr+=2)wr+=String.fromCharCode(vr[Pr]+vr[Pr+1]*256);return wr}ot.prototype.slice=function(nr,lr){const vr=this.length;nr=~~nr,lr=lr===void 0?vr:~~lr,nr<0?(nr+=vr,nr<0&&(nr=0)):nr>vr&&(nr=vr),lr<0?(lr+=vr,lr<0&&(lr=0)):lr>vr&&(lr=vr),lr<nr&&(lr=nr);const wr=this.subarray(nr,lr);return Object.setPrototypeOf(wr,ot.prototype),wr};function ir(pr,nr,lr){if(pr%1!==0||pr<0)throw new RangeError("offset is not uint");if(pr+nr>lr)throw new RangeError("Trying to access beyond buffer length")}ot.prototype.readUintLE=ot.prototype.readUIntLE=function(nr,lr,vr){nr=nr>>>0,lr=lr>>>0,vr||ir(nr,lr,this.length);let wr=this[nr],Pr=1,Sr=0;for(;++Sr<lr&&(Pr*=256);)wr+=this[nr+Sr]*Pr;return wr},ot.prototype.readUintBE=ot.prototype.readUIntBE=function(nr,lr,vr){nr=nr>>>0,lr=lr>>>0,vr||ir(nr,lr,this.length);let wr=this[nr+--lr],Pr=1;for(;lr>0&&(Pr*=256);)wr+=this[nr+--lr]*Pr;return wr},ot.prototype.readUint8=ot.prototype.readUInt8=function(nr,lr){return nr=nr>>>0,lr||ir(nr,1,this.length),this[nr]},ot.prototype.readUint16LE=ot.prototype.readUInt16LE=function(nr,lr){return nr=nr>>>0,lr||ir(nr,2,this.length),this[nr]|this[nr+1]<<8},ot.prototype.readUint16BE=ot.prototype.readUInt16BE=function(nr,lr){return nr=nr>>>0,lr||ir(nr,2,this.length),this[nr]<<8|this[nr+1]},ot.prototype.readUint32LE=ot.prototype.readUInt32LE=function(nr,lr){return nr=nr>>>0,lr||ir(nr,4,this.length),(this[nr]|this[nr+1]<<8|this[nr+2]<<16)+this[nr+3]*16777216},ot.prototype.readUint32BE=ot.prototype.readUInt32BE=function(nr,lr){return nr=nr>>>0,lr||ir(nr,4,this.length),this[nr]*16777216+(this[nr+1]<<16|this[nr+2]<<8|this[nr+3])},ot.prototype.readBigUInt64LE=Lr(function(nr){nr=nr>>>0,Er(nr,"offset");const lr=this[nr],vr=this[nr+7];(lr===void 0||vr===void 0)&&Hr(nr,this.length-8);const wr=lr+this[++nr]*2**8+this[++nr]*2**16+this[++nr]*2**24,Pr=this[++nr]+this[++nr]*2**8+this[++nr]*2**16+vr*2**24;return BigInt(wr)+(BigInt(Pr)<<BigInt(32))}),ot.prototype.readBigUInt64BE=Lr(function(nr){nr=nr>>>0,Er(nr,"offset");const lr=this[nr],vr=this[nr+7];(lr===void 0||vr===void 0)&&Hr(nr,this.length-8);const wr=lr*2**24+this[++nr]*2**16+this[++nr]*2**8+this[++nr],Pr=this[++nr]*2**24+this[++nr]*2**16+this[++nr]*2**8+vr;return(BigInt(wr)<<BigInt(32))+BigInt(Pr)}),ot.prototype.readIntLE=function(nr,lr,vr){nr=nr>>>0,lr=lr>>>0,vr||ir(nr,lr,this.length);let wr=this[nr],Pr=1,Sr=0;for(;++Sr<lr&&(Pr*=256);)wr+=this[nr+Sr]*Pr;return Pr*=128,wr>=Pr&&(wr-=Math.pow(2,8*lr)),wr},ot.prototype.readIntBE=function(nr,lr,vr){nr=nr>>>0,lr=lr>>>0,vr||ir(nr,lr,this.length);let wr=lr,Pr=1,Sr=this[nr+--wr];for(;wr>0&&(Pr*=256);)Sr+=this[nr+--wr]*Pr;return Pr*=128,Sr>=Pr&&(Sr-=Math.pow(2,8*lr)),Sr},ot.prototype.readInt8=function(nr,lr){return nr=nr>>>0,lr||ir(nr,1,this.length),this[nr]&128?(255-this[nr]+1)*-1:this[nr]},ot.prototype.readInt16LE=function(nr,lr){nr=nr>>>0,lr||ir(nr,2,this.length);const vr=this[nr]|this[nr+1]<<8;return vr&32768?vr|4294901760:vr},ot.prototype.readInt16BE=function(nr,lr){nr=nr>>>0,lr||ir(nr,2,this.length);const vr=this[nr+1]|this[nr]<<8;return vr&32768?vr|4294901760:vr},ot.prototype.readInt32LE=function(nr,lr){return nr=nr>>>0,lr||ir(nr,4,this.length),this[nr]|this[nr+1]<<8|this[nr+2]<<16|this[nr+3]<<24},ot.prototype.readInt32BE=function(nr,lr){return nr=nr>>>0,lr||ir(nr,4,this.length),this[nr]<<24|this[nr+1]<<16|this[nr+2]<<8|this[nr+3]},ot.prototype.readBigInt64LE=Lr(function(nr){nr=nr>>>0,Er(nr,"offset");const lr=this[nr],vr=this[nr+7];(lr===void 0||vr===void 0)&&Hr(nr,this.length-8);const wr=this[nr+4]+this[nr+5]*2**8+this[nr+6]*2**16+(vr<<24);return(BigInt(wr)<<BigInt(32))+BigInt(lr+this[++nr]*2**8+this[++nr]*2**16+this[++nr]*2**24)}),ot.prototype.readBigInt64BE=Lr(function(nr){nr=nr>>>0,Er(nr,"offset");const lr=this[nr],vr=this[nr+7];(lr===void 0||vr===void 0)&&Hr(nr,this.length-8);const wr=(lr<<24)+this[++nr]*2**16+this[++nr]*2**8+this[++nr];return(BigInt(wr)<<BigInt(32))+BigInt(this[++nr]*2**24+this[++nr]*2**16+this[++nr]*2**8+vr)}),ot.prototype.readFloatLE=function(nr,lr){return nr=nr>>>0,lr||ir(nr,4,this.length),_e.read(this,nr,!0,23,4)},ot.prototype.readFloatBE=function(nr,lr){return nr=nr>>>0,lr||ir(nr,4,this.length),_e.read(this,nr,!1,23,4)},ot.prototype.readDoubleLE=function(nr,lr){return nr=nr>>>0,lr||ir(nr,8,this.length),_e.read(this,nr,!0,52,8)},ot.prototype.readDoubleBE=function(nr,lr){return nr=nr>>>0,lr||ir(nr,8,this.length),_e.read(this,nr,!1,52,8)};function ur(pr,nr,lr,vr,wr,Pr){if(!ot.isBuffer(pr))throw new TypeError('"buffer" argument must be a Buffer instance');if(nr>wr||nr<Pr)throw new RangeError('"value" argument is out of bounds');if(lr+vr>pr.length)throw new RangeError("Index out of range")}ot.prototype.writeUintLE=ot.prototype.writeUIntLE=function(nr,lr,vr,wr){if(nr=+nr,lr=lr>>>0,vr=vr>>>0,!wr){const Dr=Math.pow(2,8*vr)-1;ur(this,nr,lr,vr,Dr,0)}let Pr=1,Sr=0;for(this[lr]=nr&255;++Sr<vr&&(Pr*=256);)this[lr+Sr]=nr/Pr&255;return lr+vr},ot.prototype.writeUintBE=ot.prototype.writeUIntBE=function(nr,lr,vr,wr){if(nr=+nr,lr=lr>>>0,vr=vr>>>0,!wr){const Dr=Math.pow(2,8*vr)-1;ur(this,nr,lr,vr,Dr,0)}let Pr=vr-1,Sr=1;for(this[lr+Pr]=nr&255;--Pr>=0&&(Sr*=256);)this[lr+Pr]=nr/Sr&255;return lr+vr},ot.prototype.writeUint8=ot.prototype.writeUInt8=function(nr,lr,vr){return nr=+nr,lr=lr>>>0,vr||ur(this,nr,lr,1,255,0),this[lr]=nr&255,lr+1},ot.prototype.writeUint16LE=ot.prototype.writeUInt16LE=function(nr,lr,vr){return nr=+nr,lr=lr>>>0,vr||ur(this,nr,lr,2,65535,0),this[lr]=nr&255,this[lr+1]=nr>>>8,lr+2},ot.prototype.writeUint16BE=ot.prototype.writeUInt16BE=function(nr,lr,vr){return nr=+nr,lr=lr>>>0,vr||ur(this,nr,lr,2,65535,0),this[lr]=nr>>>8,this[lr+1]=nr&255,lr+2},ot.prototype.writeUint32LE=ot.prototype.writeUInt32LE=function(nr,lr,vr){return nr=+nr,lr=lr>>>0,vr||ur(this,nr,lr,4,4294967295,0),this[lr+3]=nr>>>24,this[lr+2]=nr>>>16,this[lr+1]=nr>>>8,this[lr]=nr&255,lr+4},ot.prototype.writeUint32BE=ot.prototype.writeUInt32BE=function(nr,lr,vr){return nr=+nr,lr=lr>>>0,vr||ur(this,nr,lr,4,4294967295,0),this[lr]=nr>>>24,this[lr+1]=nr>>>16,this[lr+2]=nr>>>8,this[lr+3]=nr&255,lr+4};function cr(pr,nr,lr,vr,wr){_r(nr,vr,wr,pr,lr,7);let Pr=Number(nr&BigInt(4294967295));pr[lr++]=Pr,Pr=Pr>>8,pr[lr++]=Pr,Pr=Pr>>8,pr[lr++]=Pr,Pr=Pr>>8,pr[lr++]=Pr;let Sr=Number(nr>>BigInt(32)&BigInt(4294967295));return pr[lr++]=Sr,Sr=Sr>>8,pr[lr++]=Sr,Sr=Sr>>8,pr[lr++]=Sr,Sr=Sr>>8,pr[lr++]=Sr,lr}function rr(pr,nr,lr,vr,wr){_r(nr,vr,wr,pr,lr,7);let Pr=Number(nr&BigInt(4294967295));pr[lr+7]=Pr,Pr=Pr>>8,pr[lr+6]=Pr,Pr=Pr>>8,pr[lr+5]=Pr,Pr=Pr>>8,pr[lr+4]=Pr;let Sr=Number(nr>>BigInt(32)&BigInt(4294967295));return pr[lr+3]=Sr,Sr=Sr>>8,pr[lr+2]=Sr,Sr=Sr>>8,pr[lr+1]=Sr,Sr=Sr>>8,pr[lr]=Sr,lr+8}ot.prototype.writeBigUInt64LE=Lr(function(nr,lr=0){return cr(this,nr,lr,BigInt(0),BigInt("0xffffffffffffffff"))}),ot.prototype.writeBigUInt64BE=Lr(function(nr,lr=0){return rr(this,nr,lr,BigInt(0),BigInt("0xffffffffffffffff"))}),ot.prototype.writeIntLE=function(nr,lr,vr,wr){if(nr=+nr,lr=lr>>>0,!wr){const rn=Math.pow(2,8*vr-1);ur(this,nr,lr,vr,rn-1,-rn)}let Pr=0,Sr=1,Dr=0;for(this[lr]=nr&255;++Pr<vr&&(Sr*=256);)nr<0&&Dr===0&&this[lr+Pr-1]!==0&&(Dr=1),this[lr+Pr]=(nr/Sr>>0)-Dr&255;return lr+vr},ot.prototype.writeIntBE=function(nr,lr,vr,wr){if(nr=+nr,lr=lr>>>0,!wr){const rn=Math.pow(2,8*vr-1);ur(this,nr,lr,vr,rn-1,-rn)}let Pr=vr-1,Sr=1,Dr=0;for(this[lr+Pr]=nr&255;--Pr>=0&&(Sr*=256);)nr<0&&Dr===0&&this[lr+Pr+1]!==0&&(Dr=1),this[lr+Pr]=(nr/Sr>>0)-Dr&255;return lr+vr},ot.prototype.writeInt8=function(nr,lr,vr){return nr=+nr,lr=lr>>>0,vr||ur(this,nr,lr,1,127,-128),nr<0&&(nr=255+nr+1),this[lr]=nr&255,lr+1},ot.prototype.writeInt16LE=function(nr,lr,vr){return nr=+nr,lr=lr>>>0,vr||ur(this,nr,lr,2,32767,-32768),this[lr]=nr&255,this[lr+1]=nr>>>8,lr+2},ot.prototype.writeInt16BE=function(nr,lr,vr){return nr=+nr,lr=lr>>>0,vr||ur(this,nr,lr,2,32767,-32768),this[lr]=nr>>>8,this[lr+1]=nr&255,lr+2},ot.prototype.writeInt32LE=function(nr,lr,vr){return nr=+nr,lr=lr>>>0,vr||ur(this,nr,lr,4,2147483647,-2147483648),this[lr]=nr&255,this[lr+1]=nr>>>8,this[lr+2]=nr>>>16,this[lr+3]=nr>>>24,lr+4},ot.prototype.writeInt32BE=function(nr,lr,vr){return nr=+nr,lr=lr>>>0,vr||ur(this,nr,lr,4,2147483647,-2147483648),nr<0&&(nr=4294967295+nr+1),this[lr]=nr>>>24,this[lr+1]=nr>>>16,this[lr+2]=nr>>>8,this[lr+3]=nr&255,lr+4},ot.prototype.writeBigInt64LE=Lr(function(nr,lr=0){return cr(this,nr,lr,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),ot.prototype.writeBigInt64BE=Lr(function(nr,lr=0){return rr(this,nr,lr,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function fr(pr,nr,lr,vr,wr,Pr){if(lr+vr>pr.length)throw new RangeError("Index out of range");if(lr<0)throw new RangeError("Index out of range")}function dr(pr,nr,lr,vr,wr){return nr=+nr,lr=lr>>>0,wr||fr(pr,nr,lr,4),_e.write(pr,nr,lr,vr,23,4),lr+4}ot.prototype.writeFloatLE=function(nr,lr,vr){return dr(this,nr,lr,!0,vr)},ot.prototype.writeFloatBE=function(nr,lr,vr){return dr(this,nr,lr,!1,vr)};function gr(pr,nr,lr,vr,wr){return nr=+nr,lr=lr>>>0,wr||fr(pr,nr,lr,8),_e.write(pr,nr,lr,vr,52,8),lr+8}ot.prototype.writeDoubleLE=function(nr,lr,vr){return gr(this,nr,lr,!0,vr)},ot.prototype.writeDoubleBE=function(nr,lr,vr){return gr(this,nr,lr,!1,vr)},ot.prototype.copy=function(nr,lr,vr,wr){if(!ot.isBuffer(nr))throw new TypeError("argument should be a Buffer");if(vr||(vr=0),!wr&&wr!==0&&(wr=this.length),lr>=nr.length&&(lr=nr.length),lr||(lr=0),wr>0&&wr<vr&&(wr=vr),wr===vr||nr.length===0||this.length===0)return 0;if(lr<0)throw new RangeError("targetStart out of bounds");if(vr<0||vr>=this.length)throw new RangeError("Index out of range");if(wr<0)throw new RangeError("sourceEnd out of bounds");wr>this.length&&(wr=this.length),nr.length-lr<wr-vr&&(wr=nr.length-lr+vr);const Pr=wr-vr;return this===nr&&typeof rt.prototype.copyWithin=="function"?this.copyWithin(lr,vr,wr):rt.prototype.set.call(nr,this.subarray(vr,wr),lr),Pr},ot.prototype.fill=function(nr,lr,vr,wr){if(typeof nr=="string"){if(typeof lr=="string"?(wr=lr,lr=0,vr=this.length):typeof vr=="string"&&(wr=vr,vr=this.length),wr!==void 0&&typeof wr!="string")throw new TypeError("encoding must be a string");if(typeof wr=="string"&&!ot.isEncoding(wr))throw new TypeError("Unknown encoding: "+wr);if(nr.length===1){const Sr=nr.charCodeAt(0);(wr==="utf8"&&Sr<128||wr==="latin1")&&(nr=Sr)}}else typeof nr=="number"?nr=nr&255:typeof nr=="boolean"&&(nr=Number(nr));if(lr<0||this.length<lr||this.length<vr)throw new RangeError("Out of range index");if(vr<=lr)return this;lr=lr>>>0,vr=vr===void 0?this.length:vr>>>0,nr||(nr=0);let Pr;if(typeof nr=="number")for(Pr=lr;Pr<vr;++Pr)this[Pr]=nr;else{const Sr=ot.isBuffer(nr)?nr:ot.from(nr,wr),Dr=Sr.length;if(Dr===0)throw new TypeError('The value "'+nr+'" is invalid for argument "value"');for(Pr=0;Pr<vr-lr;++Pr)this[Pr+lr]=Sr[Pr%Dr]}return this};const hr={};function or(pr,nr,lr){hr[pr]=class extends lr{constructor(){super(),Object.defineProperty(this,"message",{value:nr.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${pr}]`,this.stack,delete this.name}get code(){return pr}set code(wr){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:wr,writable:!0})}toString(){return`${this.name} [${pr}]: ${this.message}`}}}or("ERR_BUFFER_OUT_OF_BOUNDS",function(pr){return pr?`${pr} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),or("ERR_INVALID_ARG_TYPE",function(pr,nr){return`The "${pr}" argument must be of type number. Received type ${typeof nr}`},TypeError),or("ERR_OUT_OF_RANGE",function(pr,nr,lr){let vr=`The value of "${pr}" is out of range.`,wr=lr;return Number.isInteger(lr)&&Math.abs(lr)>2**32?wr=br(String(lr)):typeof lr=="bigint"&&(wr=String(lr),(lr>BigInt(2)**BigInt(32)||lr<-(BigInt(2)**BigInt(32)))&&(wr=br(wr)),wr+="n"),vr+=` It must be ${nr}. Received ${wr}`,vr},RangeError);function br(pr){let nr="",lr=pr.length;const vr=pr[0]==="-"?1:0;for(;lr>=vr+4;lr-=3)nr=`_${pr.slice(lr-3,lr)}${nr}`;return`${pr.slice(0,lr)}${nr}`}function Rr(pr,nr,lr){Er(nr,"offset"),(pr[nr]===void 0||pr[nr+lr]===void 0)&&Hr(nr,pr.length-(lr+1))}function _r(pr,nr,lr,vr,wr,Pr){if(pr>lr||pr<nr){const Sr=typeof nr=="bigint"?"n":"";let Dr;throw nr===0||nr===BigInt(0)?Dr=`>= 0${Sr} and < 2${Sr} ** ${(Pr+1)*8}${Sr}`:Dr=`>= -(2${Sr} ** ${(Pr+1)*8-1}${Sr}) and < 2 ** ${(Pr+1)*8-1}${Sr}`,new hr.ERR_OUT_OF_RANGE("value",Dr,pr)}Rr(vr,wr,Pr)}function Er(pr,nr){if(typeof pr!="number")throw new hr.ERR_INVALID_ARG_TYPE(nr,"number",pr)}function Hr(pr,nr,lr){throw Math.floor(pr)!==pr?(Er(pr,lr),new hr.ERR_OUT_OF_RANGE("offset","an integer",pr)):nr<0?new hr.ERR_BUFFER_OUT_OF_BOUNDS:new hr.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${nr}`,pr)}const xr=/[^+/0-9A-Za-z-_]/g;function yr(pr){if(pr=pr.split("=")[0],pr=pr.trim().replace(xr,""),pr.length<2)return"";for(;pr.length%4!==0;)pr=pr+"=";return pr}function Ar(pr,nr){nr=nr||1/0;let lr;const vr=pr.length;let wr=null;const Pr=[];for(let Sr=0;Sr<vr;++Sr){if(lr=pr.charCodeAt(Sr),lr>55295&&lr<57344){if(!wr){if(lr>56319){(nr-=3)>-1&&Pr.push(239,191,189);continue}else if(Sr+1===vr){(nr-=3)>-1&&Pr.push(239,191,189);continue}wr=lr;continue}if(lr<56320){(nr-=3)>-1&&Pr.push(239,191,189),wr=lr;continue}lr=(wr-55296<<10|lr-56320)+65536}else wr&&(nr-=3)>-1&&Pr.push(239,191,189);if(wr=null,lr<128){if((nr-=1)<0)break;Pr.push(lr)}else if(lr<2048){if((nr-=2)<0)break;Pr.push(lr>>6|192,lr&63|128)}else if(lr<65536){if((nr-=3)<0)break;Pr.push(lr>>12|224,lr>>6&63|128,lr&63|128)}else if(lr<1114112){if((nr-=4)<0)break;Pr.push(lr>>18|240,lr>>12&63|128,lr>>6&63|128,lr&63|128)}else throw new Error("Invalid code point")}return Pr}function $r(pr){const nr=[];for(let lr=0;lr<pr.length;++lr)nr.push(pr.charCodeAt(lr)&255);return nr}function Tr(pr,nr){let lr,vr,wr;const Pr=[];for(let Sr=0;Sr<pr.length&&!((nr-=2)<0);++Sr)lr=pr.charCodeAt(Sr),vr=lr>>8,wr=lr%256,Pr.push(wr),Pr.push(vr);return Pr}function jr(pr){return $.toByteArray(yr(pr))}function Cr(pr,nr,lr,vr){let wr;for(wr=0;wr<vr&&!(wr+lr>=nr.length||wr>=pr.length);++wr)nr[wr+lr]=pr[wr];return wr}function Nr(pr,nr){return pr instanceof nr||pr!=null&&pr.constructor!=null&&pr.constructor.name!=null&&pr.constructor.name===nr.name}function nn(pr){return pr!==pr}const Mr=function(){const pr="0123456789abcdef",nr=new Array(256);for(let lr=0;lr<16;++lr){const vr=lr*16;for(let wr=0;wr<16;++wr)nr[vr+wr]=pr[lr]+pr[wr]}return nr}();function Lr(pr){return typeof BigInt>"u"?an:pr}function an(){throw new Error("BigInt not supported")}})(buffer$2);const Buffer=buffer$2.Buffer,Blob$1=buffer$2.Blob,BlobOptions=buffer$2.BlobOptions,Buffer$1=buffer$2.Buffer,File$1=buffer$2.File,FileOptions=buffer$2.FileOptions,INSPECT_MAX_BYTES=buffer$2.INSPECT_MAX_BYTES,SlowBuffer=buffer$2.SlowBuffer,TranscodeEncoding=buffer$2.TranscodeEncoding,atob$1=buffer$2.atob,btoa$1=buffer$2.btoa,constants$2=buffer$2.constants,isAscii=buffer$2.isAscii,isUtf8=buffer$2.isUtf8,kMaxLength=buffer$2.kMaxLength,kStringMaxLength=buffer$2.kStringMaxLength,resolveObjectURL=buffer$2.resolveObjectURL,transcode=buffer$2.transcode,dist=Object.freeze(Object.defineProperty({__proto__:null,Blob:Blob$1,BlobOptions,Buffer:Buffer$1,File:File$1,FileOptions,INSPECT_MAX_BYTES,SlowBuffer,TranscodeEncoding,atob:atob$1,btoa:btoa$1,constants:constants$2,default:Buffer,isAscii,isUtf8,kMaxLength,kStringMaxLength,resolveObjectURL,transcode},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function inferShape(_,$){let _e=_;if(isTypedArray$5(_))return $==="string"?[]:[_.length];if(isWebGLData(_)){const tt=_.channels||"RGBA";return[_.height,_.width*tt.length]}else if(isWebGPUData(_))return[_.buffer.size/($==null?4:bytesPerElement($))];if(!Array.isArray(_))return[];const et=[];for(;Array.isArray(_e)||isTypedArray$5(_e)&&$!=="string";)et.push(_e.length),_e=_e[0];return Array.isArray(_)&&env().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&deepAssertShapeConsistency(_,et,[]),et}function deepAssertShapeConsistency(_,$,_e){if(_e=_e||[],!Array.isArray(_)&&!isTypedArray$5(_)){assert$1($.length===0,()=>`Element arr[${_e.join("][")}] is a primitive, but should be an array/TypedArray of ${$[0]} elements`);return}assert$1($.length>0,()=>`Element arr[${_e.join("][")}] should be a primitive, but is an array of ${_.length} elements`),assert$1(_.length===$[0],()=>`Element arr[${_e.join("][")}] should have ${$[0]} elements, but has ${_.length} elements`);const et=$.slice(1);for(let tt=0;tt<_.length;++tt)deepAssertShapeConsistency(_[tt],et,_e.concat(tt))}function assertDtype(_,$,_e,et){if(_!=="string_or_numeric"){if(_==null)throw new Error("Expected dtype cannot be null.");if(_!=="numeric"&&_!==$||_==="numeric"&&$==="string")throw new Error(`Argument '${_e}' passed to '${et}' must be ${_} tensor, but got ${$} tensor`)}}function convertToTensor(_,$,_e,et="numeric"){if(_ instanceof getGlobalTensorClass())return assertDtype(et,_.dtype,$,_e),_;let tt=inferDtype(_);if(tt!=="string"&&["bool","int32","float32"].indexOf(et)>=0&&(tt=et),assertDtype(et,tt,$,_e),_==null||!isTypedArray$5(_)&&!Array.isArray(_)&&typeof _!="number"&&typeof _!="boolean"&&typeof _!="string"){const st=_==null?"null":_.constructor.name;throw new Error(`Argument '${$}' passed to '${_e}' must be a Tensor or TensorLike, but got '${st}'`)}const rt=inferShape(_,tt);!isTypedArray$5(_)&&!Array.isArray(_)&&(_=[_]);const it=tt!=="string"?toTypedArray(_,tt):flatten$2(_,[],!0);return ENGINE.makeTensor(it,rt,tt)}function convertToTensorArray(_,$,_e,et="numeric"){if(!Array.isArray(_))throw new Error(`Argument ${$} passed to ${_e} must be a \`Tensor[]\` or \`TensorLike[]\``);return _.map((rt,nt)=>convertToTensor(rt,`${$}[${nt}]`,_e,et))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OP_SCOPE_SUFFIX="__op";function op(_){const $=Object.keys(_);if($.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${$.length} keys.`);let _e=$[0];const et=_[_e];_e.endsWith("_")&&(_e=_e.substring(0,_e.length-1)),_e=_e+OP_SCOPE_SUFFIX;const tt=(...rt)=>{ENGINE.startScope(_e);try{const nt=et(...rt);return isPromise(nt)&&console.error("Cannot return a Promise inside of tidy."),ENGINE.endScope(nt),nt}catch(nt){throw ENGINE.endScope(null),nt}};return Object.defineProperty(tt,"name",{value:_e,configurable:!0}),tt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function complex_(_,$){const _e=convertToTensor(_,"real","complex"),et=convertToTensor($,"imag","complex");assertShapesMatch(_e.shape,et.shape,`real and imag shapes, ${_e.shape} and ${et.shape}, must match in call to tf.complex().`);const tt={real:_e,imag:et};return ENGINE.runKernel(Complex,tt)}const complex$2=op({complex_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function makeTensor(_,$,_e,et){if(et==null)et=inferDtype(_);else if(et==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(isWebGPUData(_)||isWebGLData(_)){if(et!=="float32"&&et!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${et}.`);return ENGINE.backend.createTensorFromGPUData(_,$||_e,et)}if(!isTypedArray$5(_)&&!Array.isArray(_)&&typeof _!="number"&&typeof _!="boolean"&&typeof _!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if($!=null){assertNonNegativeIntegerDimensions($);const tt=sizeFromShape($),rt=sizeFromShape(_e);assert$1(tt===rt,()=>`Based on the provided shape, [${$}], the tensor should have ${tt} values but has ${rt}`);for(let nt=0;nt<_e.length;++nt){const it=_e[nt],st=nt===_e.length-1?it!==sizeFromShape($.slice(nt)):!0;assert$1(_e[nt]===$[nt]||!st,()=>`Error creating a new Tensor. Inferred shape (${_e}) does not match the provided shape (${$}). `)}}return!isTypedArray$5(_)&&!Array.isArray(_)&&(_=[_]),$=$||_e,_=et!=="string"?toTypedArray(_,et):flatten$2(_,[],!0),ENGINE.makeTensor(_,$,et)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tensor(_,$,_e){const et=inferShape(_,_e);return makeTensor(_,$,et,_e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DTYPE_VALUE_SIZE_MAP={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class CompositeArrayBuffer{static join($){return new CompositeArrayBuffer($).slice()}constructor($){if(this.shards=[],this.previousShardIndex=0,$==null||($ instanceof Array||($=[$]),$=$.map(et=>isTypedArray$5(et)?et.buffer:et),$.length===0))return;this.bufferUniformSize=$[0].byteLength;let _e=0;for(let et=0;et<$.length;et++){const tt=$[et];et!==$.length-1&&tt.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const rt=_e+tt.byteLength;this.shards.push({buffer:tt,start:_e,end:rt}),_e=rt}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice($=0,_e=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if($=isNaN(Number($))?0:$,_e=isNaN(Number(_e))?0:_e,$=Math.max(0,$),_e=Math.min(this.byteLength,_e),_e<=$)return new ArrayBuffer(0);const et=this.findShardForByte($);if(et===-1)throw new Error(`Could not find start shard for byte ${$}`);const tt=_e-$,rt=new ArrayBuffer(tt),nt=new Uint8Array(rt);let it=0;for(let st=et;st<this.shards.length;st++){const at=this.shards[st],dt=$+it-at.start,ht=it,vt=Math.min(_e,at.end)-at.start,xt=new Uint8Array(at.buffer,dt,vt-dt);if(nt.set(xt,ht),it+=xt.length,_e<at.end)break}return rt}findShardForByte($){if(this.shards.length===0||$<0||$>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor($/this.bufferUniformSize),this.previousShardIndex;function _e(tt){return $<tt.start?-1:$>=tt.end?1:0}if(_e(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const et=search(this.shards,_e);return et===-1?-1:(this.previousShardIndex=et,this.previousShardIndex)}}function search(_,$){let _e=0,et=_.length;for(;_e<=et;){const tt=Math.floor((et-_e)/2)+_e,rt=$(_[tt]);if(rt===0)return tt;rt<0?et=tt:_e=tt+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function enableProdMode(){env().set("PROD",!0)}function enableDebugMode(){env().set("DEBUG",!0)}function disableDeprecationWarnings(){env().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function deprecationWarn(_){env().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(_+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function disposeVariables(){ENGINE.disposeVariables()}function engine(){return ENGINE}function memory(){return ENGINE.memory()}function profile(_){return ENGINE.profile(_)}function tidy(_,$){return ENGINE.tidy(_,$)}function dispose(_){getTensorsInContainer(_).forEach(_e=>_e.dispose())}function keep(_){return ENGINE.keep(_)}function time$1(_){return ENGINE.time(_)}function setBackend(_){return ENGINE.setBackend(_)}function ready(){return ENGINE.ready()}function getBackend(){return ENGINE.backendName}function removeBackend(_){ENGINE.removeBackend(_)}function findBackend(_){return ENGINE.findBackend(_)}function findBackendFactory(_){return ENGINE.findBackendFactory(_)}function registerBackend(_,$,_e=1){return ENGINE.registerBackend(_,$,_e)}function backend(){return ENGINE.backend}function setPlatform(_,$){env().setPlatform(_,$)}const NUM_BYTES_STRING_LENGTH=4;async function encodeWeights(_,$){const _e=[],et=[],tt=Array.isArray(_)?_.map(nt=>nt.name):Object.keys(_);for(let nt=0;nt<tt.length;++nt){const it=tt[nt],st=Array.isArray(_)?_[nt].tensor:_[it];if(st.dtype!=="float32"&&st.dtype!=="int32"&&st.dtype!=="bool"&&st.dtype!=="string"&&st.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${it}': ${st.dtype}`);const at={name:it,shape:st.shape,dtype:st.dtype};if(st.dtype==="string"){const ot=new Promise(async dt=>{const ht=await st.bytes(),yt=ht.reduce((wt,Et)=>wt+Et.length,0)+NUM_BYTES_STRING_LENGTH*ht.length,vt=new Uint8Array(yt);let xt=0;for(let wt=0;wt<ht.length;wt++){const Et=ht[wt],At=new Uint8Array(new Uint32Array([Et.length]).buffer);vt.set(At,xt),xt+=NUM_BYTES_STRING_LENGTH,vt.set(Et,xt),xt+=Et.length}dt(vt)});et.push(ot)}else et.push(st.data());$!=null&&(at.group=$),_e.push(at)}const rt=await Promise.all(et);return{data:concatenateTypedArrays(rt),specs:_e}}function decodeWeights(_,$){const _e=new CompositeArrayBuffer(_),et={};let tt=0;for(const rt of $){const nt=getWeightBytelength(rt,(it,st)=>_e.slice(tt+it,tt+st));et[rt.name]=decodeWeight(rt,_e.slice(tt,tt+nt)),tt+=nt}return et}function getWeightBytelength(_,$){const _e=sizeFromShape(_.shape);let et;if("quantization"in _){const tt=_.quantization;et=DTYPE_VALUE_SIZE_MAP[tt.dtype]}else if(_.dtype==="string"){let tt=0;for(let rt=0;rt<_e;rt++)tt+=NUM_BYTES_STRING_LENGTH+new Uint32Array($(tt,tt+NUM_BYTES_STRING_LENGTH))[0];return tt}else et=DTYPE_VALUE_SIZE_MAP[_.dtype];return _e*et}async function getWeightBytelengthAsync(_,$){const _e=sizeFromShape(_.shape);let et;if("quantization"in _){const tt=_.quantization;et=DTYPE_VALUE_SIZE_MAP[tt.dtype]}else if(_.dtype==="string"){let tt=0;for(let rt=0;rt<_e;rt++)tt+=NUM_BYTES_STRING_LENGTH+new Uint32Array(await $(tt,tt+NUM_BYTES_STRING_LENGTH))[0];return tt}else et=DTYPE_VALUE_SIZE_MAP[_.dtype];return _e*et}function decodeWeight(_,$){const _e=_.name,et=_.dtype,tt=_.shape,rt=sizeFromShape(tt);let nt,it=0;if("quantization"in _){const st=_.quantization;if(st.dtype==="uint8"||st.dtype==="uint16"){if(!("min"in st&&"scale"in st))throw new Error(`Weight ${_.name} with quantization ${st.dtype} doesn't have corresponding metadata min and scale.`)}else if(st.dtype==="float16"){if(et!=="float32")throw new Error(`Weight ${_.name} is quantized with ${st.dtype} which only supports weights of type float32 not ${et}.`)}else throw new Error(`Weight ${_.name} has unknown quantization dtype ${st.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const at=DTYPE_VALUE_SIZE_MAP[st.dtype],ot=st.dtype==="uint8"?new Uint8Array($):new Uint16Array($);if(et==="float32")if(st.dtype==="uint8"||st.dtype==="uint16"){nt=new Float32Array(ot.length);for(let dt=0;dt<ot.length;dt++){const ht=ot[dt];nt[dt]=ht*st.scale+st.min}}else if(st.dtype==="float16")nt=getFloat16Decoder()(ot);else throw new Error(`Unsupported quantization type ${st.dtype} for weight type float32.`);else if(et==="int32"){if(st.dtype!=="uint8"&&st.dtype!=="uint16")throw new Error(`Unsupported quantization type ${st.dtype} for weight type int32.`);nt=new Int32Array(ot.length);for(let dt=0;dt<ot.length;dt++){const ht=ot[dt];nt[dt]=Math.round(ht*st.scale+st.min)}}else throw new Error(`Unsupported dtype in weight '${_e}': ${et}`);it+=rt*at}else if(et==="string"){const st=sizeFromShape(_.shape);nt=[];for(let at=0;at<st;at++){const ot=new Uint32Array($.slice(it,it+NUM_BYTES_STRING_LENGTH))[0];it+=NUM_BYTES_STRING_LENGTH;const dt=new Uint8Array($.slice(it,it+ot));nt.push(dt),it+=ot}}else{const st=DTYPE_VALUE_SIZE_MAP[et];if(et==="float32")nt=new Float32Array($);else if(et==="int32")nt=new Int32Array($);else if(et==="bool")nt=new Uint8Array($);else if(et==="complex64"){nt=new Float32Array($);const at=new Float32Array(nt.length/2),ot=new Float32Array(nt.length/2);for(let vt=0;vt<at.length;vt++)at[vt]=nt[vt*2],ot[vt]=nt[vt*2+1];const dt=tensor(at,tt,"float32"),ht=tensor(ot,tt,"float32"),yt=complex$2(dt,ht);return dt.dispose(),ht.dispose(),yt}else throw new Error(`Unsupported dtype in weight '${_e}': ${et}`);it+=rt*st}return tensor(nt,tt,et)}async function readToLength(_,$,_e){let et=new Uint8Array($);for(;et.byteLength<_e;){const{done:tt,value:rt}=await _.read();if(tt&&rt==null){const it=_e-et.byteLength;throw new Error(`Reader is done but ${it} bytes are still expected`)}const nt=new Uint8Array(et.length+rt.byteLength);nt.set(et,0),nt.set(new Uint8Array(rt),et.length),et=nt}return et.buffer}async function decodeWeightsStream(_,$){const _e={},et=_.getReader();let tt=new ArrayBuffer(0);for(const rt of $){const nt=await getWeightBytelengthAsync(rt,async(at,ot)=>(tt=await readToLength(et,tt,ot),tt.slice(at,ot)));tt=await readToLength(et,tt,nt);const it=tt.slice(0,nt);tt=tt.slice(nt);const st=decodeWeight(rt,it);if(_e[rt.name]=st,getBackend()==="webgpu"){const at=backend();"uploadToGPU"in at&&sizeFromShape(st.shape)>=env().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&at.uploadToGPU(st.dataId)}}return _e}function concatenateTypedArrays(_){if(_===null)throw new Error(`Invalid input value: ${JSON.stringify(_)}`);let $=0;const _e=[];_.forEach(rt=>{if($+=rt.byteLength,_e.push(rt.byteLength===rt.buffer.byteLength?rt:new rt.constructor(rt)),!(rt instanceof Float32Array||rt instanceof Int32Array||rt instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${rt.constructor.name}`)});const et=new Uint8Array($);let tt=0;return _e.forEach(rt=>{et.set(new Uint8Array(rt.buffer),tt),tt+=rt.byteLength}),et.buffer}const useNodeBuffer=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function stringByteLength(_){return useNodeBuffer?Buffer.byteLength(_,"utf8"):new Blob([_]).size}function arrayBufferToBase64String(_){if(useNodeBuffer)return Buffer.from(_).toString("base64");const $=new Uint8Array(_);let _e="";for(let et=0,tt=$.length;et<tt;et++)_e+=String.fromCharCode($[et]);return btoa(_e)}function base64StringToArrayBuffer(_){if(useNodeBuffer){const et=Buffer.from(_,"base64");return et.buffer.slice(et.byteOffset,et.byteOffset+et.byteLength)}const $=atob(_),_e=new Uint8Array($.length);for(let et=0;et<$.length;++et)_e.set([$.charCodeAt(et)],et);return _e.buffer}function concatenateArrayBuffers(_){return CompositeArrayBuffer.join(_)}function basename(_){const $="/";for(_=_.trim();_.endsWith($);)_=_.slice(0,_.length-1);const _e=_.split($);return _e[_e.length-1]}function getModelJSONForModelArtifacts(_,$){const _e={modelTopology:_.modelTopology,format:_.format,generatedBy:_.generatedBy,convertedBy:_.convertedBy,weightsManifest:$};return _.signature!=null&&(_e.signature=_.signature),_.userDefinedMetadata!=null&&(_e.userDefinedMetadata=_.userDefinedMetadata),_.modelInitializer!=null&&(_e.modelInitializer=_.modelInitializer),_.initializerSignature!=null&&(_e.initializerSignature=_.initializerSignature),_.trainingConfig!=null&&(_e.trainingConfig=_.trainingConfig),_e}function getModelArtifactsForJSONSync(_,$,_e){const et={modelTopology:_.modelTopology,format:_.format,generatedBy:_.generatedBy,convertedBy:_.convertedBy};if(_.trainingConfig!=null&&(et.trainingConfig=_.trainingConfig),_.weightsManifest!=null){if(!$)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!_e)throw new Error("modelJSON has weightsManifest but weightData is null");et.weightSpecs=$,et.weightData=_e}return _.signature!=null&&(et.signature=_.signature),_.userDefinedMetadata!=null&&(et.userDefinedMetadata=_.userDefinedMetadata),_.modelInitializer!=null&&(et.modelInitializer=_.modelInitializer),_.initializerSignature!=null&&(et.initializerSignature=_.initializerSignature),et}async function getModelArtifactsForJSON(_,$){let _e,et;return _.weightsManifest!=null&&([_e,et]=await $(_.weightsManifest)),getModelArtifactsForJSONSync(_,_e,et)}function getModelArtifactsInfoForJSON(_){if(_.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:_.modelTopology==null?0:stringByteLength(JSON.stringify(_.modelTopology)),weightSpecsBytes:_.weightSpecs==null?0:stringByteLength(JSON.stringify(_.weightSpecs)),weightDataBytes:_.weightData==null?0:new CompositeArrayBuffer(_.weightData).byteLength}}function getWeightSpecs(_){const $=[];for(const _e of _)$.push(..._e.weights);return $}function computeFloat16MantisaTable(){const _=_e=>{let et=_e<<13,tt=0;for(;!(et&8388608);)tt-=8388608,et<<=1;return et&=-8388609,tt+=947912704,et|tt},$=new Uint32Array(2048);$[0]=0;for(let _e=1;_e<1024;_e++)$[_e]=_(_e);for(let _e=1024;_e<2048;_e++)$[_e]=939524096+(_e-1024<<13);return $}function computeFloat16ExponentTable(){const _=new Uint32Array(64);_[0]=0,_[31]=1199570944,_[32]=2147483648,_[63]=3347054592;for(let $=1;$<31;$++)_[$]=$<<23;for(let $=33;$<63;$++)_[$]=2147483648+($-32<<23);return _}function computeFloat16OffsetTable(){const _=new Uint32Array(64);for(let $=0;$<64;$++)_[$]=1024;return _[0]=_[32]=0,_}function getFloat16Decoder(){const _=computeFloat16MantisaTable(),$=computeFloat16ExponentTable(),_e=computeFloat16OffsetTable();return et=>{const tt=new ArrayBuffer(4*et.length),rt=new Uint32Array(tt);for(let nt=0;nt<et.length;nt++){const it=et[nt],st=_[_e[it>>10]+(it&1023)]+$[it>>10];rt[nt]=st}return new Float32Array(tt)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IORouterRegistry{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return IORouterRegistry.instance==null&&(IORouterRegistry.instance=new IORouterRegistry),IORouterRegistry.instance}static registerSaveRouter($){IORouterRegistry.getInstance().saveRouters.push($)}static registerLoadRouter($){IORouterRegistry.getInstance().loadRouters.push($)}static getSaveHandlers($){return IORouterRegistry.getHandlers($,"save")}static getLoadHandlers($,_e){return IORouterRegistry.getHandlers($,"load",_e)}static getHandlers($,_e,et){const tt=[];return(_e==="load"?IORouterRegistry.getInstance().loadRouters:IORouterRegistry.getInstance().saveRouters).forEach(nt=>{const it=nt($,et);it!==null&&tt.push(it)}),tt}}const registerSaveRouter=_=>IORouterRegistry.registerSaveRouter(_),registerLoadRouter=_=>IORouterRegistry.registerLoadRouter(_),getSaveHandlers=_=>IORouterRegistry.getSaveHandlers(_),getLoadHandlers=(_,$)=>IORouterRegistry.getLoadHandlers(_,$);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DATABASE_NAME="tensorflowjs",DATABASE_VERSION=1,MODEL_STORE_NAME="models_store",INFO_STORE_NAME="model_info_store";function getIndexedDBFactory(){if(!env().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const _=typeof window>"u"?self:window,$=_.indexedDB||_.mozIndexedDB||_.webkitIndexedDB||_.msIndexedDB||_.shimIndexedDB;if($==null)throw new Error("The current browser does not appear to support IndexedDB.");return $}function setUpDatabase(_){const $=_.result;$.createObjectStore(MODEL_STORE_NAME,{keyPath:"modelPath"}),$.createObjectStore(INFO_STORE_NAME,{keyPath:"modelPath"})}class BrowserIndexedDB{constructor($){if(this.indexedDB=getIndexedDBFactory(),$==null||!$)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=$}async save($){if($.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,$)}async load(){return this.databaseAction(this.modelPath)}databaseAction($,_e){return new Promise((et,tt)=>{const rt=this.indexedDB.open(DATABASE_NAME,DATABASE_VERSION);rt.onupgradeneeded=()=>setUpDatabase(rt),rt.onsuccess=()=>{const nt=rt.result;if(_e==null){const it=nt.transaction(MODEL_STORE_NAME,"readonly"),at=it.objectStore(MODEL_STORE_NAME).get(this.modelPath);at.onsuccess=()=>{if(at.result==null)return nt.close(),tt(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));et(at.result.modelArtifacts)},at.onerror=ot=>(nt.close(),tt(at.error)),it.oncomplete=()=>nt.close()}else{_e.weightData=CompositeArrayBuffer.join(_e.weightData);const it=getModelArtifactsInfoForJSON(_e),st=nt.transaction(INFO_STORE_NAME,"readwrite");let at=st.objectStore(INFO_STORE_NAME),ot;try{ot=at.put({modelPath:this.modelPath,modelArtifactsInfo:it})}catch(ht){return tt(ht)}let dt;ot.onsuccess=()=>{dt=nt.transaction(MODEL_STORE_NAME,"readwrite");const ht=dt.objectStore(MODEL_STORE_NAME);let yt;try{yt=ht.put({modelPath:this.modelPath,modelArtifacts:_e,modelArtifactsInfo:it})}catch(vt){return tt(vt)}yt.onsuccess=()=>et({modelArtifactsInfo:it}),yt.onerror=vt=>{at=st.objectStore(INFO_STORE_NAME);const xt=at.delete(this.modelPath);xt.onsuccess=()=>(nt.close(),tt(yt.error)),xt.onerror=wt=>(nt.close(),tt(yt.error))}},ot.onerror=ht=>(nt.close(),tt(ot.error)),st.oncomplete=()=>{dt==null?nt.close():dt.oncomplete=()=>nt.close()}}},rt.onerror=nt=>tt(rt.error)})}}BrowserIndexedDB.URL_SCHEME="indexeddb://";const indexedDBRouter=_=>env().getBool("IS_BROWSER")&&!Array.isArray(_)&&_.startsWith(BrowserIndexedDB.URL_SCHEME)?browserIndexedDB(_.slice(BrowserIndexedDB.URL_SCHEME.length)):null;IORouterRegistry.registerSaveRouter(indexedDBRouter);IORouterRegistry.registerLoadRouter(indexedDBRouter);function browserIndexedDB(_){return new BrowserIndexedDB(_)}function maybeStripScheme$1(_){return _.startsWith(BrowserIndexedDB.URL_SCHEME)?_.slice(BrowserIndexedDB.URL_SCHEME.length):_}class BrowserIndexedDBManager{constructor(){this.indexedDB=getIndexedDBFactory()}async listModels(){return new Promise(($,_e)=>{const et=this.indexedDB.open(DATABASE_NAME,DATABASE_VERSION);et.onupgradeneeded=()=>setUpDatabase(et),et.onsuccess=()=>{const tt=et.result,rt=tt.transaction(INFO_STORE_NAME,"readonly"),it=rt.objectStore(INFO_STORE_NAME).getAll();it.onsuccess=()=>{const st={};for(const at of it.result)st[at.modelPath]=at.modelArtifactsInfo;$(st)},it.onerror=st=>(tt.close(),_e(it.error)),rt.oncomplete=()=>tt.close()},et.onerror=tt=>_e(et.error)})}async removeModel($){return $=maybeStripScheme$1($),new Promise((_e,et)=>{const tt=this.indexedDB.open(DATABASE_NAME,DATABASE_VERSION);tt.onupgradeneeded=()=>setUpDatabase(tt),tt.onsuccess=()=>{const rt=tt.result,nt=rt.transaction(INFO_STORE_NAME,"readwrite"),it=nt.objectStore(INFO_STORE_NAME),st=it.get($);let at;st.onsuccess=()=>{if(st.result==null)return rt.close(),et(new Error(`Cannot find model with path '${$}' in IndexedDB.`));{const ot=it.delete($),dt=()=>{at=rt.transaction(MODEL_STORE_NAME,"readwrite");const yt=at.objectStore(MODEL_STORE_NAME).delete($);yt.onsuccess=()=>_e(st.result.modelArtifactsInfo),yt.onerror=vt=>et(st.error)};ot.onsuccess=dt,ot.onerror=ht=>(dt(),rt.close(),et(st.error))}},st.onerror=ot=>(rt.close(),et(st.error)),nt.oncomplete=()=>{at==null?rt.close():at.oncomplete=()=>rt.close()}},tt.onerror=rt=>et(tt.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PATH_SEPARATOR="/",PATH_PREFIX="tensorflowjs_models",INFO_SUFFIX="info",MODEL_TOPOLOGY_SUFFIX="model_topology",WEIGHT_SPECS_SUFFIX="weight_specs",WEIGHT_DATA_SUFFIX="weight_data",MODEL_METADATA_SUFFIX="model_metadata";function getModelKeys(_){return{info:[PATH_PREFIX,_,INFO_SUFFIX].join(PATH_SEPARATOR),topology:[PATH_PREFIX,_,MODEL_TOPOLOGY_SUFFIX].join(PATH_SEPARATOR),weightSpecs:[PATH_PREFIX,_,WEIGHT_SPECS_SUFFIX].join(PATH_SEPARATOR),weightData:[PATH_PREFIX,_,WEIGHT_DATA_SUFFIX].join(PATH_SEPARATOR),modelMetadata:[PATH_PREFIX,_,MODEL_METADATA_SUFFIX].join(PATH_SEPARATOR)}}function removeItems(_){for(const $ of Object.values(_))window.localStorage.removeItem($)}function getModelPathFromKey(_){const $=_.split(PATH_SEPARATOR);if($.length<3)throw new Error(`Invalid key format: ${_}`);return $.slice(1,$.length-1).join(PATH_SEPARATOR)}function maybeStripScheme(_){return _.startsWith(BrowserLocalStorage.URL_SCHEME)?_.slice(BrowserLocalStorage.URL_SCHEME.length):_}class BrowserLocalStorage{constructor($){if(!env().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,$==null||!$)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=$,this.keys=getModelKeys(this.modelPath)}async save($){if($.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const _e=JSON.stringify($.modelTopology),et=JSON.stringify($.weightSpecs),tt=getModelArtifactsInfoForJSON($),rt=CompositeArrayBuffer.join($.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(tt)),this.LS.setItem(this.keys.topology,_e),this.LS.setItem(this.keys.weightSpecs,et),this.LS.setItem(this.keys.weightData,arrayBufferToBase64String(rt));const nt={format:$.format,generatedBy:$.generatedBy,convertedBy:$.convertedBy,signature:$.signature!=null?$.signature:void 0,userDefinedMetadata:$.userDefinedMetadata!=null?$.userDefinedMetadata:void 0,modelInitializer:$.modelInitializer!=null?$.modelInitializer:void 0,initializerSignature:$.initializerSignature!=null?$.initializerSignature:void 0,trainingConfig:$.trainingConfig!=null?$.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(nt)),{modelArtifactsInfo:tt}}catch{throw removeItems(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${tt.modelTopologyBytes}, weightSpecsBytes=${tt.weightSpecsBytes}, weightDataBytes=${tt.weightDataBytes}.`)}}}async load(){const $=JSON.parse(this.LS.getItem(this.keys.info));if($==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if($.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const _e={},et=JSON.parse(this.LS.getItem(this.keys.topology));if(et==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);_e.modelTopology=et;const tt=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(tt==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);_e.weightSpecs=tt;const rt=this.LS.getItem(this.keys.modelMetadata);if(rt!=null){const it=JSON.parse(rt);_e.format=it.format,_e.generatedBy=it.generatedBy,_e.convertedBy=it.convertedBy,it.signature!=null&&(_e.signature=it.signature),it.userDefinedMetadata!=null&&(_e.userDefinedMetadata=it.userDefinedMetadata),it.modelInitializer!=null&&(_e.modelInitializer=it.modelInitializer),it.initializerSignature!=null&&(_e.initializerSignature=it.initializerSignature),it.trainingConfig!=null&&(_e.trainingConfig=it.trainingConfig)}const nt=this.LS.getItem(this.keys.weightData);if(nt==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return _e.weightData=base64StringToArrayBuffer(nt),_e}}BrowserLocalStorage.URL_SCHEME="localstorage://";const localStorageRouter=_=>env().getBool("IS_BROWSER")&&!Array.isArray(_)&&_.startsWith(BrowserLocalStorage.URL_SCHEME)?browserLocalStorage(_.slice(BrowserLocalStorage.URL_SCHEME.length)):null;IORouterRegistry.registerSaveRouter(localStorageRouter);IORouterRegistry.registerLoadRouter(localStorageRouter);function browserLocalStorage(_){return new BrowserLocalStorage(_)}class BrowserLocalStorageManager{constructor(){assert$1(env().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),assert$1(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const $={},_e=PATH_PREFIX+PATH_SEPARATOR,et=PATH_SEPARATOR+INFO_SUFFIX;for(let tt=0;tt<this.LS.length;++tt){const rt=this.LS.key(tt);if(rt.startsWith(_e)&&rt.endsWith(et)){const nt=getModelPathFromKey(rt);$[nt]=JSON.parse(this.LS.getItem(rt))}}return $}async removeModel($){$=maybeStripScheme($);const _e=getModelKeys($);if(this.LS.getItem(_e.info)==null)throw new Error(`Cannot find model at path '${$}'`);const et=JSON.parse(this.LS.getItem(_e.info));return removeItems(_e),et}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const URL_SCHEME_SUFFIX="://";class ModelStoreManagerRegistry{constructor(){this.managers={}}static getInstance(){return ModelStoreManagerRegistry.instance==null&&(ModelStoreManagerRegistry.instance=new ModelStoreManagerRegistry),ModelStoreManagerRegistry.instance}static registerManager($,_e){assert$1($!=null,()=>"scheme must not be undefined or null."),$.endsWith(URL_SCHEME_SUFFIX)&&($=$.slice(0,$.indexOf(URL_SCHEME_SUFFIX))),assert$1($.length>0,()=>"scheme must not be an empty string.");const et=ModelStoreManagerRegistry.getInstance();assert$1(et.managers[$]==null,()=>`A model store manager is already registered for scheme '${$}'.`),et.managers[$]=_e}static getManager($){const _e=ModelStoreManagerRegistry.getInstance().managers[$];if(_e==null)throw new Error(`Cannot find model manager for scheme '${$}'`);return _e}static getSchemes(){return Object.keys(ModelStoreManagerRegistry.getInstance().managers)}}function parseURL(_){if(_.indexOf(URL_SCHEME_SUFFIX)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${ModelStoreManagerRegistry.getSchemes().join(",")}`);return{scheme:_.split(URL_SCHEME_SUFFIX)[0],path:_.split(URL_SCHEME_SUFFIX)[1]}}async function cloneModelInternal(_,$,_e=!1){assert$1(_!==$,()=>`Old path and new path are the same: '${_}'`);const et=IORouterRegistry.getLoadHandlers(_);assert$1(et.length>0,()=>`Copying failed because no load handler is found for source URL ${_}.`),assert$1(et.length<2,()=>`Copying failed because more than one (${et.length}) load handlers for source URL ${_}.`);const tt=et[0],rt=IORouterRegistry.getSaveHandlers($);assert$1(rt.length>0,()=>`Copying failed because no save handler is found for destination URL ${$}.`),assert$1(rt.length<2,()=>`Copying failed because more than one (${et.length}) save handlers for destination URL ${$}.`);const nt=rt[0],it=parseURL(_).scheme,st=parseURL(_).path,at=it===parseURL(_).scheme,ot=await tt.load();_e&&at&&await ModelStoreManagerRegistry.getManager(it).removeModel(st);const dt=await nt.save(ot);return _e&&!at&&await ModelStoreManagerRegistry.getManager(it).removeModel(st),dt.modelArtifactsInfo}async function listModels(){const _=ModelStoreManagerRegistry.getSchemes(),$={};for(const _e of _){const et=await ModelStoreManagerRegistry.getManager(_e).listModels();for(const tt in et){const rt=_e+URL_SCHEME_SUFFIX+tt;$[rt]=et[tt]}}return $}async function removeModel(_){const $=parseURL(_);return ModelStoreManagerRegistry.getManager($.scheme).removeModel($.path)}async function copyModel(_,$){return cloneModelInternal(_,$,!1)}async function moveModel(_,$){return cloneModelInternal(_,$,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PlatformBrowser{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch($,_e){return fetch($,_e)}now(){return performance.now()}encode($,_e){if(_e!=="utf-8"&&_e!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${_e}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode($)}decode($,_e){return new TextDecoder(_e).decode($)}setTimeoutCustom($,_e){if(typeof window>"u"||!env().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout($,_e);return}this.functionRefs.push($),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},_e),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",et=>{if(et.source===window&&et.data.name===this.messageName){et.stopPropagation();const tt=this.functionRefs[et.data.index];tt(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray($){return isTypedArrayBrowser($)}}if(env().get("IS_BROWSER")){env().setPlatform("browser",new PlatformBrowser);try{ModelStoreManagerRegistry.registerManager(BrowserLocalStorage.URL_SCHEME,new BrowserLocalStorageManager)}catch{}try{ModelStoreManagerRegistry.registerManager(BrowserIndexedDB.URL_SCHEME,new BrowserIndexedDBManager)}catch{}}const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0$3=getAugmentedNamespace(__viteBrowserExternal$1);var util$1={},types={},shams$1,hasRequiredShams$1;function requireShams$1(){return hasRequiredShams$1||(hasRequiredShams$1=1,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var $={},_e=Symbol("test"),et=Object(_e);if(typeof _e=="string"||Object.prototype.toString.call(_e)!=="[object Symbol]"||Object.prototype.toString.call(et)!=="[object Symbol]")return!1;var tt=42;$[_e]=tt;for(var rt in $)return!1;if(typeof Object.keys=="function"&&Object.keys($).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames($).length!==0)return!1;var nt=Object.getOwnPropertySymbols($);if(nt.length!==1||nt[0]!==_e||!Object.prototype.propertyIsEnumerable.call($,_e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var it=Object.getOwnPropertyDescriptor($,_e);if(it.value!==tt||it.enumerable!==!0)return!1}return!0}),shams$1}var shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var _=requireShams$1();return shams=function(){return _()&&!!Symbol.toStringTag},shams}var esObjectAtoms,hasRequiredEsObjectAtoms;function requireEsObjectAtoms(){return hasRequiredEsObjectAtoms||(hasRequiredEsObjectAtoms=1,esObjectAtoms=Object),esObjectAtoms}var esErrors,hasRequiredEsErrors;function requireEsErrors(){return hasRequiredEsErrors||(hasRequiredEsErrors=1,esErrors=Error),esErrors}var _eval,hasRequired_eval;function require_eval(){return hasRequired_eval||(hasRequired_eval=1,_eval=EvalError),_eval}var range$8,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range$8=RangeError),range$8}var ref,hasRequiredRef;function requireRef(){return hasRequiredRef||(hasRequiredRef=1,ref=ReferenceError),ref}var syntax,hasRequiredSyntax;function requireSyntax(){return hasRequiredSyntax||(hasRequiredSyntax=1,syntax=SyntaxError),syntax}var type,hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,type=TypeError),type}var uri,hasRequiredUri;function requireUri(){return hasRequiredUri||(hasRequiredUri=1,uri=URIError),uri}var abs$3,hasRequiredAbs;function requireAbs(){return hasRequiredAbs||(hasRequiredAbs=1,abs$3=Math.abs),abs$3}var floor$3,hasRequiredFloor;function requireFloor(){return hasRequiredFloor||(hasRequiredFloor=1,floor$3=Math.floor),floor$3}var max$7,hasRequiredMax;function requireMax(){return hasRequiredMax||(hasRequiredMax=1,max$7=Math.max),max$7}var min$7,hasRequiredMin;function requireMin(){return hasRequiredMin||(hasRequiredMin=1,min$7=Math.min),min$7}var pow$4,hasRequiredPow;function requirePow(){return hasRequiredPow||(hasRequiredPow=1,pow$4=Math.pow),pow$4}var round$5,hasRequiredRound;function requireRound(){return hasRequiredRound||(hasRequiredRound=1,round$5=Math.round),round$5}var _isNaN$1,hasRequired_isNaN;function require_isNaN(){return hasRequired_isNaN||(hasRequired_isNaN=1,_isNaN$1=Number.isNaN||function($){return $!==$}),_isNaN$1}var sign$5,hasRequiredSign$1;function requireSign$1(){if(hasRequiredSign$1)return sign$5;hasRequiredSign$1=1;var _=require_isNaN();return sign$5=function(_e){return _(_e)||_e===0?_e:_e<0?-1:1},sign$5}var gOPD,hasRequiredGOPD;function requireGOPD(){return hasRequiredGOPD||(hasRequiredGOPD=1,gOPD=Object.getOwnPropertyDescriptor),gOPD}var gopd,hasRequiredGopd;function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var _=requireGOPD();if(_)try{_([],"length")}catch{_=null}return gopd=_,gopd}var esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var _=Object.defineProperty||!1;if(_)try{_({},"a",{value:1})}catch{_=!1}return esDefineProperty=_,esDefineProperty}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var _=typeof Symbol<"u"&&Symbol,$=requireShams$1();return hasSymbols=function(){return typeof _!="function"||typeof Symbol!="function"||typeof _("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:$()},hasSymbols}var Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf;function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf||(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Reflect_getPrototypeOf}var Object_getPrototypeOf,hasRequiredObject_getPrototypeOf;function requireObject_getPrototypeOf(){if(hasRequiredObject_getPrototypeOf)return Object_getPrototypeOf;hasRequiredObject_getPrototypeOf=1;var _=requireEsObjectAtoms();return Object_getPrototypeOf=_.getPrototypeOf||null,Object_getPrototypeOf}var implementation,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var _="Function.prototype.bind called on incompatible ",$=Object.prototype.toString,_e=Math.max,et="[object Function]",tt=function(st,at){for(var ot=[],dt=0;dt<st.length;dt+=1)ot[dt]=st[dt];for(var ht=0;ht<at.length;ht+=1)ot[ht+st.length]=at[ht];return ot},rt=function(st,at){for(var ot=[],dt=at,ht=0;dt<st.length;dt+=1,ht+=1)ot[ht]=st[dt];return ot},nt=function(it,st){for(var at="",ot=0;ot<it.length;ot+=1)at+=it[ot],ot+1<it.length&&(at+=st);return at};return implementation=function(st){var at=this;if(typeof at!="function"||$.apply(at)!==et)throw new TypeError(_+at);for(var ot=rt(arguments,1),dt,ht=function(){if(this instanceof dt){var Et=at.apply(this,tt(ot,arguments));return Object(Et)===Et?Et:this}return at.apply(st,tt(ot,arguments))},yt=_e(0,at.length-ot.length),vt=[],xt=0;xt<yt;xt++)vt[xt]="$"+xt;if(dt=Function("binder","return function ("+nt(vt,",")+"){ return binder.apply(this,arguments); }")(ht),at.prototype){var wt=function(){};wt.prototype=at.prototype,dt.prototype=new wt,wt.prototype=null}return dt},implementation}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var _=requireImplementation();return functionBind=Function.prototype.bind||_,functionBind}var functionCall,hasRequiredFunctionCall;function requireFunctionCall(){return hasRequiredFunctionCall||(hasRequiredFunctionCall=1,functionCall=Function.prototype.call),functionCall}var functionApply,hasRequiredFunctionApply;function requireFunctionApply(){return hasRequiredFunctionApply||(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply),functionApply}var reflectApply,hasRequiredReflectApply;function requireReflectApply(){return hasRequiredReflectApply||(hasRequiredReflectApply=1,reflectApply=typeof Reflect<"u"&&Reflect&&Reflect.apply),reflectApply}var actualApply,hasRequiredActualApply;function requireActualApply(){if(hasRequiredActualApply)return actualApply;hasRequiredActualApply=1;var _=requireFunctionBind(),$=requireFunctionApply(),_e=requireFunctionCall(),et=requireReflectApply();return actualApply=et||_.call(_e,$),actualApply}var callBindApplyHelpers,hasRequiredCallBindApplyHelpers;function requireCallBindApplyHelpers(){if(hasRequiredCallBindApplyHelpers)return callBindApplyHelpers;hasRequiredCallBindApplyHelpers=1;var _=requireFunctionBind(),$=requireType(),_e=requireFunctionCall(),et=requireActualApply();return callBindApplyHelpers=function(rt){if(rt.length<1||typeof rt[0]!="function")throw new $("a function is required");return et(_,_e,rt)},callBindApplyHelpers}var get$5,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get$5;hasRequiredGet=1;var _=requireCallBindApplyHelpers(),$=requireGopd(),_e;try{_e=[].__proto__===Array.prototype}catch(nt){if(!nt||typeof nt!="object"||!("code"in nt)||nt.code!=="ERR_PROTO_ACCESS")throw nt}var et=!!_e&&$&&$(Object.prototype,"__proto__"),tt=Object,rt=tt.getPrototypeOf;return get$5=et&&typeof et.get=="function"?_([et.get]):typeof rt=="function"?function(it){return rt(it==null?it:tt(it))}:!1,get$5}var getProto,hasRequiredGetProto;function requireGetProto(){if(hasRequiredGetProto)return getProto;hasRequiredGetProto=1;var _=requireReflect_getPrototypeOf(),$=requireObject_getPrototypeOf(),_e=requireGet();return getProto=_?function(tt){return _(tt)}:$?function(tt){if(!tt||typeof tt!="object"&&typeof tt!="function")throw new TypeError("getProto: not an object");return $(tt)}:_e?function(tt){return _e(tt)}:null,getProto}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var _=Function.prototype.call,$=Object.prototype.hasOwnProperty,_e=requireFunctionBind();return hasown=_e.call(_,$),hasown}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var _,$=requireEsObjectAtoms(),_e=requireEsErrors(),et=require_eval(),tt=requireRange(),rt=requireRef(),nt=requireSyntax(),it=requireType(),st=requireUri(),at=requireAbs(),ot=requireFloor(),dt=requireMax(),ht=requireMin(),yt=requirePow(),vt=requireRound(),xt=requireSign$1(),wt=Function,Et=function(dr){try{return wt('"use strict"; return ('+dr+").constructor;")()}catch{}},At=requireGopd(),jt=requireEsDefineProperty(),kt=function(){throw new it},Lt=At?function(){try{return arguments.callee,kt}catch{try{return At(arguments,"callee").get}catch{return kt}}}():kt,Bt=requireHasSymbols()(),Gt=requireGetProto(),er=requireObject_getPrototypeOf(),tr=requireReflect_getPrototypeOf(),ar=requireFunctionApply(),Mt=requireFunctionCall(),lt={},mt=typeof Uint8Array>"u"||!Gt?_:Gt(Uint8Array),gt={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?_:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?_:ArrayBuffer,"%ArrayIteratorPrototype%":Bt&&Gt?Gt([][Symbol.iterator]()):_,"%AsyncFromSyncIteratorPrototype%":_,"%AsyncFunction%":lt,"%AsyncGenerator%":lt,"%AsyncGeneratorFunction%":lt,"%AsyncIteratorPrototype%":lt,"%Atomics%":typeof Atomics>"u"?_:Atomics,"%BigInt%":typeof BigInt>"u"?_:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?_:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?_:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?_:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":_e,"%eval%":eval,"%EvalError%":et,"%Float16Array%":typeof Float16Array>"u"?_:Float16Array,"%Float32Array%":typeof Float32Array>"u"?_:Float32Array,"%Float64Array%":typeof Float64Array>"u"?_:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?_:FinalizationRegistry,"%Function%":wt,"%GeneratorFunction%":lt,"%Int8Array%":typeof Int8Array>"u"?_:Int8Array,"%Int16Array%":typeof Int16Array>"u"?_:Int16Array,"%Int32Array%":typeof Int32Array>"u"?_:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Bt&&Gt?Gt(Gt([][Symbol.iterator]())):_,"%JSON%":typeof JSON=="object"?JSON:_,"%Map%":typeof Map>"u"?_:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Bt||!Gt?_:Gt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":$,"%Object.getOwnPropertyDescriptor%":At,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?_:Promise,"%Proxy%":typeof Proxy>"u"?_:Proxy,"%RangeError%":tt,"%ReferenceError%":rt,"%Reflect%":typeof Reflect>"u"?_:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?_:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Bt||!Gt?_:Gt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?_:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Bt&&Gt?Gt(""[Symbol.iterator]()):_,"%Symbol%":Bt?Symbol:_,"%SyntaxError%":nt,"%ThrowTypeError%":Lt,"%TypedArray%":mt,"%TypeError%":it,"%Uint8Array%":typeof Uint8Array>"u"?_:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?_:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?_:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?_:Uint32Array,"%URIError%":st,"%WeakMap%":typeof WeakMap>"u"?_:WeakMap,"%WeakRef%":typeof WeakRef>"u"?_:WeakRef,"%WeakSet%":typeof WeakSet>"u"?_:WeakSet,"%Function.prototype.call%":Mt,"%Function.prototype.apply%":ar,"%Object.defineProperty%":jt,"%Object.getPrototypeOf%":er,"%Math.abs%":at,"%Math.floor%":ot,"%Math.max%":dt,"%Math.min%":ht,"%Math.pow%":yt,"%Math.round%":vt,"%Math.sign%":xt,"%Reflect.getPrototypeOf%":tr};if(Gt)try{null.error}catch(dr){var bt=Gt(Gt(dr));gt["%Error.prototype%"]=bt}var St=function dr(gr){var hr;if(gr==="%AsyncFunction%")hr=Et("async function () {}");else if(gr==="%GeneratorFunction%")hr=Et("function* () {}");else if(gr==="%AsyncGeneratorFunction%")hr=Et("async function* () {}");else if(gr==="%AsyncGenerator%"){var or=dr("%AsyncGeneratorFunction%");or&&(hr=or.prototype)}else if(gr==="%AsyncIteratorPrototype%"){var br=dr("%AsyncGenerator%");br&&Gt&&(hr=Gt(br.prototype))}return gt[gr]=hr,hr},Nt={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Pt=requireFunctionBind(),Tt=requireHasown(),pt=Pt.call(Mt,Array.prototype.concat),Rt=Pt.call(ar,Array.prototype.splice),zt=Pt.call(Mt,String.prototype.replace),Yt=Pt.call(Mt,String.prototype.slice),ir=Pt.call(Mt,RegExp.prototype.exec),ur=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,cr=/\\(\\)?/g,rr=function(gr){var hr=Yt(gr,0,1),or=Yt(gr,-1);if(hr==="%"&&or!=="%")throw new nt("invalid intrinsic syntax, expected closing `%`");if(or==="%"&&hr!=="%")throw new nt("invalid intrinsic syntax, expected opening `%`");var br=[];return zt(gr,ur,function(Rr,_r,Er,Hr){br[br.length]=Er?zt(Hr,cr,"$1"):_r||Rr}),br},fr=function(gr,hr){var or=gr,br;if(Tt(Nt,or)&&(br=Nt[or],or="%"+br[0]+"%"),Tt(gt,or)){var Rr=gt[or];if(Rr===lt&&(Rr=St(or)),typeof Rr>"u"&&!hr)throw new it("intrinsic "+gr+" exists, but is not available. Please file an issue!");return{alias:br,name:or,value:Rr}}throw new nt("intrinsic "+gr+" does not exist!")};return getIntrinsic=function(gr,hr){if(typeof gr!="string"||gr.length===0)throw new it("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof hr!="boolean")throw new it('"allowMissing" argument must be a boolean');if(ir(/^%?[^%]*%?$/,gr)===null)throw new nt("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var or=rr(gr),br=or.length>0?or[0]:"",Rr=fr("%"+br+"%",hr),_r=Rr.name,Er=Rr.value,Hr=!1,xr=Rr.alias;xr&&(br=xr[0],Rt(or,pt([0,1],xr)));for(var yr=1,Ar=!0;yr<or.length;yr+=1){var $r=or[yr],Tr=Yt($r,0,1),jr=Yt($r,-1);if((Tr==='"'||Tr==="'"||Tr==="`"||jr==='"'||jr==="'"||jr==="`")&&Tr!==jr)throw new nt("property names with quotes must have matching quotes");if(($r==="constructor"||!Ar)&&(Hr=!0),br+="."+$r,_r="%"+br+"%",Tt(gt,_r))Er=gt[_r];else if(Er!=null){if(!($r in Er)){if(!hr)throw new it("base intrinsic for "+gr+" exists, but the property is not available.");return}if(At&&yr+1>=or.length){var Cr=At(Er,$r);Ar=!!Cr,Ar&&"get"in Cr&&!("originalValue"in Cr.get)?Er=Cr.get:Er=Er[$r]}else Ar=Tt(Er,$r),Er=Er[$r];Ar&&!Hr&&(gt[_r]=Er)}}return Er},getIntrinsic}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var _=requireGetIntrinsic(),$=requireCallBindApplyHelpers(),_e=$([_("%String.prototype.indexOf%")]);return callBound=function(tt,rt){var nt=_(tt,!!rt);return typeof nt=="function"&&_e(tt,".prototype.")>-1?$([nt]):nt},callBound}var isArguments$4,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments$4;hasRequiredIsArguments=1;var _=requireShams()(),$=requireCallBound(),_e=$("Object.prototype.toString"),et=function(it){return _&&it&&typeof it=="object"&&Symbol.toStringTag in it?!1:_e(it)==="[object Arguments]"},tt=function(it){return et(it)?!0:it!==null&&typeof it=="object"&&"length"in it&&typeof it.length=="number"&&it.length>=0&&_e(it)!=="[object Array]"&&"callee"in it&&_e(it.callee)==="[object Function]"},rt=function(){return et(arguments)}();return et.isLegacyArguments=tt,isArguments$4=rt?et:tt,isArguments$4}var isRegex,hasRequiredIsRegex;function requireIsRegex(){if(hasRequiredIsRegex)return isRegex;hasRequiredIsRegex=1;var _=requireCallBound(),$=requireShams()(),_e=requireHasown(),et=requireGopd(),tt;if($){var rt=_("RegExp.prototype.exec"),nt={},it=function(){throw nt},st={toString:it,valueOf:it};typeof Symbol.toPrimitive=="symbol"&&(st[Symbol.toPrimitive]=it),tt=function(ht){if(!ht||typeof ht!="object")return!1;var yt=et(ht,"lastIndex"),vt=yt&&_e(yt,"value");if(!vt)return!1;try{rt(ht,st)}catch(xt){return xt===nt}}}else{var at=_("Object.prototype.toString"),ot="[object RegExp]";tt=function(ht){return!ht||typeof ht!="object"&&typeof ht!="function"?!1:at(ht)===ot}}return isRegex=tt,isRegex}var safeRegexTest,hasRequiredSafeRegexTest;function requireSafeRegexTest(){if(hasRequiredSafeRegexTest)return safeRegexTest;hasRequiredSafeRegexTest=1;var _=requireCallBound(),$=requireIsRegex(),_e=_("RegExp.prototype.exec"),et=requireType();return safeRegexTest=function(rt){if(!$(rt))throw new et("`regex` must be a RegExp");return function(it){return _e(rt,it)!==null}},safeRegexTest}var isGeneratorFunction,hasRequiredIsGeneratorFunction;function requireIsGeneratorFunction(){if(hasRequiredIsGeneratorFunction)return isGeneratorFunction;hasRequiredIsGeneratorFunction=1;var _=requireCallBound(),$=requireSafeRegexTest(),_e=$(/^\s*(?:function)?\*/),et=requireShams()(),tt=requireGetProto(),rt=_("Object.prototype.toString"),nt=_("Function.prototype.toString"),it=function(){if(!et)return!1;try{return Function("return function*() {}")()}catch{}},st;return isGeneratorFunction=function(ot){if(typeof ot!="function")return!1;if(_e(nt(ot)))return!0;if(!et){var dt=rt(ot);return dt==="[object GeneratorFunction]"}if(!tt)return!1;if(typeof st>"u"){var ht=it();st=ht?tt(ht):!1}return tt(ot)===st},isGeneratorFunction}var isCallable,hasRequiredIsCallable;function requireIsCallable(){if(hasRequiredIsCallable)return isCallable;hasRequiredIsCallable=1;var _=Function.prototype.toString,$=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,_e,et;if(typeof $=="function"&&typeof Object.defineProperty=="function")try{_e=Object.defineProperty({},"length",{get:function(){throw et}}),et={},$(function(){throw 42},null,_e)}catch(At){At!==et&&($=null)}else $=null;var tt=/^\s*class\b/,rt=function(jt){try{var kt=_.call(jt);return tt.test(kt)}catch{return!1}},nt=function(jt){try{return rt(jt)?!1:(_.call(jt),!0)}catch{return!1}},it=Object.prototype.toString,st="[object Object]",at="[object Function]",ot="[object GeneratorFunction]",dt="[object HTMLAllCollection]",ht="[object HTML document.all class]",yt="[object HTMLCollection]",vt=typeof Symbol=="function"&&!!Symbol.toStringTag,xt=!(0 in[,]),wt=function(){return!1};if(typeof document=="object"){var Et=document.all;it.call(Et)===it.call(document.all)&&(wt=function(jt){if((xt||!jt)&&(typeof jt>"u"||typeof jt=="object"))try{var kt=it.call(jt);return(kt===dt||kt===ht||kt===yt||kt===st)&&jt("")==null}catch{}return!1})}return isCallable=$?function(jt){if(wt(jt))return!0;if(!jt||typeof jt!="function"&&typeof jt!="object")return!1;try{$(jt,null,_e)}catch(kt){if(kt!==et)return!1}return!rt(jt)&&nt(jt)}:function(jt){if(wt(jt))return!0;if(!jt||typeof jt!="function"&&typeof jt!="object")return!1;if(vt)return nt(jt);if(rt(jt))return!1;var kt=it.call(jt);return kt!==at&&kt!==ot&&!/^\[object HTML/.test(kt)?!1:nt(jt)},isCallable}var forEach,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach;hasRequiredForEach=1;var _=requireIsCallable(),$=Object.prototype.toString,_e=Object.prototype.hasOwnProperty,et=function(st,at,ot){for(var dt=0,ht=st.length;dt<ht;dt++)_e.call(st,dt)&&(ot==null?at(st[dt],dt,st):at.call(ot,st[dt],dt,st))},tt=function(st,at,ot){for(var dt=0,ht=st.length;dt<ht;dt++)ot==null?at(st.charAt(dt),dt,st):at.call(ot,st.charAt(dt),dt,st)},rt=function(st,at,ot){for(var dt in st)_e.call(st,dt)&&(ot==null?at(st[dt],dt,st):at.call(ot,st[dt],dt,st))};function nt(it){return $.call(it)==="[object Array]"}return forEach=function(st,at,ot){if(!_(at))throw new TypeError("iterator must be a function");var dt;arguments.length>=3&&(dt=ot),nt(st)?et(st,at,dt):typeof st=="string"?tt(st,at,dt):rt(st,at,dt)},forEach}var possibleTypedArrayNames,hasRequiredPossibleTypedArrayNames;function requirePossibleTypedArrayNames(){return hasRequiredPossibleTypedArrayNames||(hasRequiredPossibleTypedArrayNames=1,possibleTypedArrayNames=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),possibleTypedArrayNames}var availableTypedArrays,hasRequiredAvailableTypedArrays;function requireAvailableTypedArrays(){if(hasRequiredAvailableTypedArrays)return availableTypedArrays;hasRequiredAvailableTypedArrays=1;var _=requirePossibleTypedArrayNames(),$=typeof globalThis>"u"?commonjsGlobal:globalThis;return availableTypedArrays=function(){for(var et=[],tt=0;tt<_.length;tt++)typeof $[_[tt]]=="function"&&(et[et.length]=_[tt]);return et},availableTypedArrays}var callBind={exports:{}},defineDataProperty,hasRequiredDefineDataProperty;function requireDefineDataProperty(){if(hasRequiredDefineDataProperty)return defineDataProperty;hasRequiredDefineDataProperty=1;var _=requireEsDefineProperty(),$=requireSyntax(),_e=requireType(),et=requireGopd();return defineDataProperty=function(rt,nt,it){if(!rt||typeof rt!="object"&&typeof rt!="function")throw new _e("`obj` must be an object or a function`");if(typeof nt!="string"&&typeof nt!="symbol")throw new _e("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new _e("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new _e("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new _e("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new _e("`loose`, if provided, must be a boolean");var st=arguments.length>3?arguments[3]:null,at=arguments.length>4?arguments[4]:null,ot=arguments.length>5?arguments[5]:null,dt=arguments.length>6?arguments[6]:!1,ht=!!et&&et(rt,nt);if(_)_(rt,nt,{configurable:ot===null&&ht?ht.configurable:!ot,enumerable:st===null&&ht?ht.enumerable:!st,value:it,writable:at===null&&ht?ht.writable:!at});else if(dt||!st&&!at&&!ot)rt[nt]=it;else throw new $("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},defineDataProperty}var hasPropertyDescriptors_1,hasRequiredHasPropertyDescriptors;function requireHasPropertyDescriptors(){if(hasRequiredHasPropertyDescriptors)return hasPropertyDescriptors_1;hasRequiredHasPropertyDescriptors=1;var _=requireEsDefineProperty(),$=function(){return!!_};return $.hasArrayLengthDefineBug=function(){if(!_)return null;try{return _([],"length",{value:1}).length!==1}catch{return!0}},hasPropertyDescriptors_1=$,hasPropertyDescriptors_1}var setFunctionLength,hasRequiredSetFunctionLength;function requireSetFunctionLength(){if(hasRequiredSetFunctionLength)return setFunctionLength;hasRequiredSetFunctionLength=1;var _=requireGetIntrinsic(),$=requireDefineDataProperty(),_e=requireHasPropertyDescriptors()(),et=requireGopd(),tt=requireType(),rt=_("%Math.floor%");return setFunctionLength=function(it,st){if(typeof it!="function")throw new tt("`fn` is not a function");if(typeof st!="number"||st<0||st>4294967295||rt(st)!==st)throw new tt("`length` must be a positive 32-bit integer");var at=arguments.length>2&&!!arguments[2],ot=!0,dt=!0;if("length"in it&&et){var ht=et(it,"length");ht&&!ht.configurable&&(ot=!1),ht&&!ht.writable&&(dt=!1)}return(ot||dt||!at)&&(_e?$(it,"length",st,!0,!0):$(it,"length",st)),it},setFunctionLength}var applyBind,hasRequiredApplyBind;function requireApplyBind(){if(hasRequiredApplyBind)return applyBind;hasRequiredApplyBind=1;var _=requireFunctionBind(),$=requireFunctionApply(),_e=requireActualApply();return applyBind=function(){return _e(_,$,arguments)},applyBind}var hasRequiredCallBind;function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,function(_){var $=requireSetFunctionLength(),_e=requireEsDefineProperty(),et=requireCallBindApplyHelpers(),tt=requireApplyBind();_.exports=function(nt){var it=et(arguments),st=nt.length-(arguments.length-1);return $(it,1+(st>0?st:0),!0)},_e?_e(_.exports,"apply",{value:tt}):_.exports.apply=tt}(callBind)),callBind.exports}var whichTypedArray,hasRequiredWhichTypedArray;function requireWhichTypedArray(){if(hasRequiredWhichTypedArray)return whichTypedArray;hasRequiredWhichTypedArray=1;var _=requireForEach(),$=requireAvailableTypedArrays(),_e=requireCallBind(),et=requireCallBound(),tt=requireGopd(),rt=requireGetProto(),nt=et("Object.prototype.toString"),it=requireShams()(),st=typeof globalThis>"u"?commonjsGlobal:globalThis,at=$(),ot=et("String.prototype.slice"),dt=et("Array.prototype.indexOf",!0)||function(wt,Et){for(var At=0;At<wt.length;At+=1)if(wt[At]===Et)return At;return-1},ht={__proto__:null};it&&tt&&rt?_(at,function(xt){var wt=new st[xt];if(Symbol.toStringTag in wt&&rt){var Et=rt(wt),At=tt(Et,Symbol.toStringTag);if(!At&&Et){var jt=rt(Et);At=tt(jt,Symbol.toStringTag)}ht["$"+xt]=_e(At.get)}}):_(at,function(xt){var wt=new st[xt],Et=wt.slice||wt.set;Et&&(ht["$"+xt]=_e(Et))});var yt=function(wt){var Et=!1;return _(ht,function(At,jt){if(!Et)try{"$"+At(wt)===jt&&(Et=ot(jt,1))}catch{}}),Et},vt=function(wt){var Et=!1;return _(ht,function(At,jt){if(!Et)try{At(wt),Et=ot(jt,1)}catch{}}),Et};return whichTypedArray=function(wt){if(!wt||typeof wt!="object")return!1;if(!it){var Et=ot(nt(wt),8,-1);return dt(at,Et)>-1?Et:Et!=="Object"?!1:vt(wt)}return tt?yt(wt):null},whichTypedArray}var isTypedArray$4,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray$4;hasRequiredIsTypedArray=1;var _=requireWhichTypedArray();return isTypedArray$4=function(_e){return!!_(_e)},isTypedArray$4}var hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(_){var $=requireIsArguments(),_e=requireIsGeneratorFunction(),et=requireWhichTypedArray(),tt=requireIsTypedArray();function rt(yr){return yr.call.bind(yr)}var nt=typeof BigInt<"u",it=typeof Symbol<"u",st=rt(Object.prototype.toString),at=rt(Number.prototype.valueOf),ot=rt(String.prototype.valueOf),dt=rt(Boolean.prototype.valueOf);if(nt)var ht=rt(BigInt.prototype.valueOf);if(it)var yt=rt(Symbol.prototype.valueOf);function vt(yr,Ar){if(typeof yr!="object")return!1;try{return Ar(yr),!0}catch{return!1}}_.isArgumentsObject=$,_.isGeneratorFunction=_e,_.isTypedArray=tt;function xt(yr){return typeof Promise<"u"&&yr instanceof Promise||yr!==null&&typeof yr=="object"&&typeof yr.then=="function"&&typeof yr.catch=="function"}_.isPromise=xt;function wt(yr){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(yr):tt(yr)||Yt(yr)}_.isArrayBufferView=wt;function Et(yr){return et(yr)==="Uint8Array"}_.isUint8Array=Et;function At(yr){return et(yr)==="Uint8ClampedArray"}_.isUint8ClampedArray=At;function jt(yr){return et(yr)==="Uint16Array"}_.isUint16Array=jt;function kt(yr){return et(yr)==="Uint32Array"}_.isUint32Array=kt;function Lt(yr){return et(yr)==="Int8Array"}_.isInt8Array=Lt;function Bt(yr){return et(yr)==="Int16Array"}_.isInt16Array=Bt;function Gt(yr){return et(yr)==="Int32Array"}_.isInt32Array=Gt;function er(yr){return et(yr)==="Float32Array"}_.isFloat32Array=er;function tr(yr){return et(yr)==="Float64Array"}_.isFloat64Array=tr;function ar(yr){return et(yr)==="BigInt64Array"}_.isBigInt64Array=ar;function Mt(yr){return et(yr)==="BigUint64Array"}_.isBigUint64Array=Mt;function lt(yr){return st(yr)==="[object Map]"}lt.working=typeof Map<"u"&&lt(new Map);function mt(yr){return typeof Map>"u"?!1:lt.working?lt(yr):yr instanceof Map}_.isMap=mt;function gt(yr){return st(yr)==="[object Set]"}gt.working=typeof Set<"u"&&gt(new Set);function bt(yr){return typeof Set>"u"?!1:gt.working?gt(yr):yr instanceof Set}_.isSet=bt;function St(yr){return st(yr)==="[object WeakMap]"}St.working=typeof WeakMap<"u"&&St(new WeakMap);function Nt(yr){return typeof WeakMap>"u"?!1:St.working?St(yr):yr instanceof WeakMap}_.isWeakMap=Nt;function Pt(yr){return st(yr)==="[object WeakSet]"}Pt.working=typeof WeakSet<"u"&&Pt(new WeakSet);function Tt(yr){return Pt(yr)}_.isWeakSet=Tt;function pt(yr){return st(yr)==="[object ArrayBuffer]"}pt.working=typeof ArrayBuffer<"u"&&pt(new ArrayBuffer);function Rt(yr){return typeof ArrayBuffer>"u"?!1:pt.working?pt(yr):yr instanceof ArrayBuffer}_.isArrayBuffer=Rt;function zt(yr){return st(yr)==="[object DataView]"}zt.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&zt(new DataView(new ArrayBuffer(1),0,1));function Yt(yr){return typeof DataView>"u"?!1:zt.working?zt(yr):yr instanceof DataView}_.isDataView=Yt;var ir=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function ur(yr){return st(yr)==="[object SharedArrayBuffer]"}function cr(yr){return typeof ir>"u"?!1:(typeof ur.working>"u"&&(ur.working=ur(new ir)),ur.working?ur(yr):yr instanceof ir)}_.isSharedArrayBuffer=cr;function rr(yr){return st(yr)==="[object AsyncFunction]"}_.isAsyncFunction=rr;function fr(yr){return st(yr)==="[object Map Iterator]"}_.isMapIterator=fr;function dr(yr){return st(yr)==="[object Set Iterator]"}_.isSetIterator=dr;function gr(yr){return st(yr)==="[object Generator]"}_.isGeneratorObject=gr;function hr(yr){return st(yr)==="[object WebAssembly.Module]"}_.isWebAssemblyCompiledModule=hr;function or(yr){return vt(yr,at)}_.isNumberObject=or;function br(yr){return vt(yr,ot)}_.isStringObject=br;function Rr(yr){return vt(yr,dt)}_.isBooleanObject=Rr;function _r(yr){return nt&&vt(yr,ht)}_.isBigIntObject=_r;function Er(yr){return it&&vt(yr,yt)}_.isSymbolObject=Er;function Hr(yr){return or(yr)||br(yr)||Rr(yr)||_r(yr)||Er(yr)}_.isBoxedPrimitive=Hr;function xr(yr){return typeof Uint8Array<"u"&&(Rt(yr)||cr(yr))}_.isAnyArrayBuffer=xr,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(yr){Object.defineProperty(_,yr,{enumerable:!1,value:function(){throw new Error(yr+" is not supported in userland")}})})}(types)),types}var isBufferBrowser,hasRequiredIsBufferBrowser;function requireIsBufferBrowser(){return hasRequiredIsBufferBrowser||(hasRequiredIsBufferBrowser=1,isBufferBrowser=function($){return $&&typeof $=="object"&&typeof $.copy=="function"&&typeof $.fill=="function"&&typeof $.readUInt8=="function"}),isBufferBrowser}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function($,_e){_e&&($.super_=_e,$.prototype=Object.create(_e.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function($,_e){if(_e){$.super_=_e;var et=function(){};et.prototype=_e.prototype,$.prototype=new et,$.prototype.constructor=$}}),inherits_browser.exports}var hasRequiredUtil$1;function requireUtil$1(){return hasRequiredUtil$1||(hasRequiredUtil$1=1,function(_){var $={},_e=Object.getOwnPropertyDescriptors||function(ir){for(var ur=Object.keys(ir),cr={},rr=0;rr<ur.length;rr++)cr[ur[rr]]=Object.getOwnPropertyDescriptor(ir,ur[rr]);return cr},et=/%[sdj%]/g;_.format=function(Yt){if(!Bt(Yt)){for(var ir=[],ur=0;ur<arguments.length;ur++)ir.push(it(arguments[ur]));return ir.join(" ")}for(var ur=1,cr=arguments,rr=cr.length,fr=String(Yt).replace(et,function(gr){if(gr==="%%")return"%";if(ur>=rr)return gr;switch(gr){case"%s":return String(cr[ur++]);case"%d":return Number(cr[ur++]);case"%j":try{return JSON.stringify(cr[ur++])}catch{return"[Circular]"}default:return gr}}),dr=cr[ur];ur<rr;dr=cr[++ur])jt(dr)||!ar(dr)?fr+=" "+dr:fr+=" "+it(dr);return fr},_.deprecate=function(Yt,ir){if(typeof process$1<"u"&&process$1.noDeprecation===!0)return Yt;if(typeof process$1>"u")return function(){return _.deprecate(Yt,ir).apply(this,arguments)};var ur=!1;function cr(){if(!ur){if(process$1.throwDeprecation)throw new Error(ir);process$1.traceDeprecation?console.trace(ir):console.error(ir),ur=!0}return Yt.apply(this,arguments)}return cr};var tt={},rt=/^$/;if($.NODE_DEBUG){var nt=$.NODE_DEBUG;nt=nt.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),rt=new RegExp("^"+nt+"$","i")}_.debuglog=function(Yt){if(Yt=Yt.toUpperCase(),!tt[Yt])if(rt.test(Yt)){var ir=process$1.pid;tt[Yt]=function(){var ur=_.format.apply(_,arguments);console.error("%s %d: %s",Yt,ir,ur)}}else tt[Yt]=function(){};return tt[Yt]};function it(Yt,ir){var ur={seen:[],stylize:at};return arguments.length>=3&&(ur.depth=arguments[2]),arguments.length>=4&&(ur.colors=arguments[3]),At(ir)?ur.showHidden=ir:ir&&_._extend(ur,ir),er(ur.showHidden)&&(ur.showHidden=!1),er(ur.depth)&&(ur.depth=2),er(ur.colors)&&(ur.colors=!1),er(ur.customInspect)&&(ur.customInspect=!0),ur.colors&&(ur.stylize=st),dt(ur,Yt,ur.depth)}_.inspect=it,it.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},it.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function st(Yt,ir){var ur=it.styles[ir];return ur?"\x1B["+it.colors[ur][0]+"m"+Yt+"\x1B["+it.colors[ur][1]+"m":Yt}function at(Yt,ir){return Yt}function ot(Yt){var ir={};return Yt.forEach(function(ur,cr){ir[ur]=!0}),ir}function dt(Yt,ir,ur){if(Yt.customInspect&&ir&&mt(ir.inspect)&&ir.inspect!==_.inspect&&!(ir.constructor&&ir.constructor.prototype===ir)){var cr=ir.inspect(ur,Yt);return Bt(cr)||(cr=dt(Yt,cr,ur)),cr}var rr=ht(Yt,ir);if(rr)return rr;var fr=Object.keys(ir),dr=ot(fr);if(Yt.showHidden&&(fr=Object.getOwnPropertyNames(ir)),lt(ir)&&(fr.indexOf("message")>=0||fr.indexOf("description")>=0))return yt(ir);if(fr.length===0){if(mt(ir)){var gr=ir.name?": "+ir.name:"";return Yt.stylize("[Function"+gr+"]","special")}if(tr(ir))return Yt.stylize(RegExp.prototype.toString.call(ir),"regexp");if(Mt(ir))return Yt.stylize(Date.prototype.toString.call(ir),"date");if(lt(ir))return yt(ir)}var hr="",or=!1,br=["{","}"];if(Et(ir)&&(or=!0,br=["[","]"]),mt(ir)){var Rr=ir.name?": "+ir.name:"";hr=" [Function"+Rr+"]"}if(tr(ir)&&(hr=" "+RegExp.prototype.toString.call(ir)),Mt(ir)&&(hr=" "+Date.prototype.toUTCString.call(ir)),lt(ir)&&(hr=" "+yt(ir)),fr.length===0&&(!or||ir.length==0))return br[0]+hr+br[1];if(ur<0)return tr(ir)?Yt.stylize(RegExp.prototype.toString.call(ir),"regexp"):Yt.stylize("[Object]","special");Yt.seen.push(ir);var _r;return or?_r=vt(Yt,ir,ur,dr,fr):_r=fr.map(function(Er){return xt(Yt,ir,ur,dr,Er,or)}),Yt.seen.pop(),wt(_r,hr,br)}function ht(Yt,ir){if(er(ir))return Yt.stylize("undefined","undefined");if(Bt(ir)){var ur="'"+JSON.stringify(ir).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Yt.stylize(ur,"string")}if(Lt(ir))return Yt.stylize(""+ir,"number");if(At(ir))return Yt.stylize(""+ir,"boolean");if(jt(ir))return Yt.stylize("null","null")}function yt(Yt){return"["+Error.prototype.toString.call(Yt)+"]"}function vt(Yt,ir,ur,cr,rr){for(var fr=[],dr=0,gr=ir.length;dr<gr;++dr)Tt(ir,String(dr))?fr.push(xt(Yt,ir,ur,cr,String(dr),!0)):fr.push("");return rr.forEach(function(hr){hr.match(/^\d+$/)||fr.push(xt(Yt,ir,ur,cr,hr,!0))}),fr}function xt(Yt,ir,ur,cr,rr,fr){var dr,gr,hr;if(hr=Object.getOwnPropertyDescriptor(ir,rr)||{value:ir[rr]},hr.get?hr.set?gr=Yt.stylize("[Getter/Setter]","special"):gr=Yt.stylize("[Getter]","special"):hr.set&&(gr=Yt.stylize("[Setter]","special")),Tt(cr,rr)||(dr="["+rr+"]"),gr||(Yt.seen.indexOf(hr.value)<0?(jt(ur)?gr=dt(Yt,hr.value,null):gr=dt(Yt,hr.value,ur-1),gr.indexOf(`
`)>-1&&(fr?gr=gr.split(`
`).map(function(or){return"  "+or}).join(`
`).slice(2):gr=`
`+gr.split(`
`).map(function(or){return"   "+or}).join(`
`))):gr=Yt.stylize("[Circular]","special")),er(dr)){if(fr&&rr.match(/^\d+$/))return gr;dr=JSON.stringify(""+rr),dr.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(dr=dr.slice(1,-1),dr=Yt.stylize(dr,"name")):(dr=dr.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),dr=Yt.stylize(dr,"string"))}return dr+": "+gr}function wt(Yt,ir,ur){var cr=Yt.reduce(function(rr,fr){return fr.indexOf(`
`)>=0,rr+fr.replace(/\u001b\[\d\d?m/g,"").length+1},0);return cr>60?ur[0]+(ir===""?"":ir+`
 `)+" "+Yt.join(`,
  `)+" "+ur[1]:ur[0]+ir+" "+Yt.join(", ")+" "+ur[1]}_.types=requireTypes();function Et(Yt){return Array.isArray(Yt)}_.isArray=Et;function At(Yt){return typeof Yt=="boolean"}_.isBoolean=At;function jt(Yt){return Yt===null}_.isNull=jt;function kt(Yt){return Yt==null}_.isNullOrUndefined=kt;function Lt(Yt){return typeof Yt=="number"}_.isNumber=Lt;function Bt(Yt){return typeof Yt=="string"}_.isString=Bt;function Gt(Yt){return typeof Yt=="symbol"}_.isSymbol=Gt;function er(Yt){return Yt===void 0}_.isUndefined=er;function tr(Yt){return ar(Yt)&&bt(Yt)==="[object RegExp]"}_.isRegExp=tr,_.types.isRegExp=tr;function ar(Yt){return typeof Yt=="object"&&Yt!==null}_.isObject=ar;function Mt(Yt){return ar(Yt)&&bt(Yt)==="[object Date]"}_.isDate=Mt,_.types.isDate=Mt;function lt(Yt){return ar(Yt)&&(bt(Yt)==="[object Error]"||Yt instanceof Error)}_.isError=lt,_.types.isNativeError=lt;function mt(Yt){return typeof Yt=="function"}_.isFunction=mt;function gt(Yt){return Yt===null||typeof Yt=="boolean"||typeof Yt=="number"||typeof Yt=="string"||typeof Yt=="symbol"||typeof Yt>"u"}_.isPrimitive=gt,_.isBuffer=requireIsBufferBrowser();function bt(Yt){return Object.prototype.toString.call(Yt)}function St(Yt){return Yt<10?"0"+Yt.toString(10):Yt.toString(10)}var Nt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Pt(){var Yt=new Date,ir=[St(Yt.getHours()),St(Yt.getMinutes()),St(Yt.getSeconds())].join(":");return[Yt.getDate(),Nt[Yt.getMonth()],ir].join(" ")}_.log=function(){console.log("%s - %s",Pt(),_.format.apply(_,arguments))},_.inherits=requireInherits_browser(),_._extend=function(Yt,ir){if(!ir||!ar(ir))return Yt;for(var ur=Object.keys(ir),cr=ur.length;cr--;)Yt[ur[cr]]=ir[ur[cr]];return Yt};function Tt(Yt,ir){return Object.prototype.hasOwnProperty.call(Yt,ir)}var pt=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;_.promisify=function(ir){if(typeof ir!="function")throw new TypeError('The "original" argument must be of type Function');if(pt&&ir[pt]){var ur=ir[pt];if(typeof ur!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ur,pt,{value:ur,enumerable:!1,writable:!1,configurable:!0}),ur}function ur(){for(var cr,rr,fr=new Promise(function(hr,or){cr=hr,rr=or}),dr=[],gr=0;gr<arguments.length;gr++)dr.push(arguments[gr]);dr.push(function(hr,or){hr?rr(hr):cr(or)});try{ir.apply(this,dr)}catch(hr){rr(hr)}return fr}return Object.setPrototypeOf(ur,Object.getPrototypeOf(ir)),pt&&Object.defineProperty(ur,pt,{value:ur,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ur,_e(ir))},_.promisify.custom=pt;function Rt(Yt,ir){if(!Yt){var ur=new Error("Promise was rejected with a falsy value");ur.reason=Yt,Yt=ur}return ir(Yt)}function zt(Yt){if(typeof Yt!="function")throw new TypeError('The "original" argument must be of type Function');function ir(){for(var ur=[],cr=0;cr<arguments.length;cr++)ur.push(arguments[cr]);var rr=ur.pop();if(typeof rr!="function")throw new TypeError("The last argument must be of type Function");var fr=this,dr=function(){return rr.apply(fr,arguments)};Yt.apply(this,ur).then(function(gr){process$1.nextTick(dr.bind(null,null,gr))},function(gr){process$1.nextTick(Rt.bind(null,gr,dr))})}return Object.setPrototypeOf(ir,Object.getPrototypeOf(Yt)),Object.defineProperties(ir,_e(Yt)),ir}_.callbackify=zt}(util$1)),util$1}const getNodeFetch={importFetch:()=>require$$0$3};let systemFetch;class PlatformNode{constructor(){this.util=requireUtil$1(),this.textEncoder=new this.util.TextEncoder}fetch($,_e){return env().global.fetch!=null?env().global.fetch($,_e):(systemFetch==null&&(systemFetch=getNodeFetch.importFetch()),systemFetch($,_e))}now(){const $=process$1.hrtime();return $[0]*1e3+$[1]/1e6}encode($,_e){if(_e!=="utf-8"&&_e!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${_e}`);return this.textEncoder.encode($)}decode($,_e){return $.length===0?"":new this.util.TextDecoder(_e).decode($)}isTypedArray($){return this.util.types.isFloat32Array($)||this.util.types.isInt32Array($)||this.util.types.isUint8Array($)||this.util.types.isUint8ClampedArray($)}}env().get("IS_NODE")&&!env().get("IS_BROWSER")&&env().setPlatform("node",new PlatformNode);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function buffer$1(_,$="float32",_e){return $=$||"float32",assertNonNegativeIntegerDimensions(_),new TensorBuffer(_,$,_e)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cast_(_,$){const _e=convertToTensor(_,"x","cast");if(!isValidDtype($))throw new Error(`Failed to cast to unknown dtype ${$}`);if($==="string"&&_e.dtype!=="string"||$!=="string"&&_e.dtype==="string")throw new Error("Only strings can be casted to strings");const et={x:_e},tt={dtype:$};return ENGINE.runKernel(Cast,et,tt)}const cast$3=op({cast_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function clone_(_){const _e={x:convertToTensor(_,"x","clone","string_or_numeric")};return ENGINE.runKernel(Identity$1,_e)}const clone$1=op({clone_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function print(_,$=!1){console.log(_.toString($))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getOrMakeEngine();const opHandler={buffer:buffer$1,cast:cast$3,clone:clone$1,print};setOpHandler(opHandler);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function add_(_,$){let _e=convertToTensor(_,"a","add"),et=convertToTensor($,"b","add");[_e,et]=makeTypesMatch(_e,et);const tt={a:_e,b:et};return ENGINE.runKernel(Add$1,tt)}const add$3=op({add_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function floorDiv_(_,$){let _e=convertToTensor(_,"a","floorDiv"),et=convertToTensor($,"b","floorDiv");[_e,et]=makeTypesMatch(_e,et);const tt={a:_e,b:et};return ENGINE.runKernel(FloorDiv,tt)}const floorDiv$2=op({floorDiv_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function div_(_,$){let _e=convertToTensor(_,"a","div"),et=convertToTensor($,"b","div");if([_e,et]=makeTypesMatch(_e,et),_e.dtype==="int32"&&et.dtype==="int32")return floorDiv$2(_e,et);const tt={a:_e,b:et},rt={};return ENGINE.runKernel(RealDiv,tt,rt)}const div$1=op({div_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mul_(_,$){let _e=convertToTensor(_,"a","mul"),et=convertToTensor($,"b","mul");[_e,et]=makeTypesMatch(_e,et);const tt={a:_e,b:et};return ENGINE.runKernel(Multiply$1,tt)}const mul=op({mul_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function abs_(_){const $=convertToTensor(_,"x","abs");if($.dtype==="complex64"){const _e={x:$};return ENGINE.runKernel(ComplexAbs,_e)}else{const _e={x:$};return ENGINE.runKernel(Abs,_e)}}const abs$2=op({abs_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function acos_(_){const _e={x:convertToTensor(_,"x","acos")};return ENGINE.runKernel(Acos,_e)}const acos$2=op({acos_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function acosh_(_){const _e={x:convertToTensor(_,"x","acosh")};return ENGINE.runKernel(Acosh,_e)}const acosh$2=op({acosh_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function addN_(_){assert$1(Array.isArray(_),()=>"The argument passed to tf.addN() must be a list of tensors"),assert$1(_.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${_.length}`);const $=_.map((tt,rt)=>convertToTensor(tt,`tensors${rt}`,"addN")),_e=$[0];$.forEach(tt=>{if(tt.dtype!==_e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),$.forEach(tt=>{if(!arraysEqual(tt.shape,_e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const et=$;return ENGINE.runKernel(AddN,et)}const addN$2=op({addN_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function all_(_,$=null,_e=!1){const tt={x:convertToTensor(_,"x","all","bool")},rt={axis:$,keepDims:_e};return ENGINE.runKernel(All,tt,rt)}const all$2=op({all_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function any_(_,$=null,_e=!1){const tt={x:convertToTensor(_,"x","any","bool")},rt={axis:$,keepDims:_e};return ENGINE.runKernel(Any,tt,rt)}const any$2=op({any_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMax_(_,$=0){const et={x:convertToTensor(_,"x","argMax")},tt={axis:$};return ENGINE.runKernel(ArgMax,et,tt)}const argMax$2=op({argMax_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMin_(_,$=0){const et={x:convertToTensor(_,"x","argMin")},tt={axis:$};return ENGINE.runKernel(ArgMin,et,tt)}const argMin$2=op({argMin_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function asin_(_){const _e={x:convertToTensor(_,"x","asin")};return ENGINE.runKernel(Asin,_e)}const asin$2=op({asin_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function asinh_(_){const _e={x:convertToTensor(_,"x","asinh")};return ENGINE.runKernel(Asinh,_e)}const asinh$2=op({asinh_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function atan_(_){const _e={x:convertToTensor(_,"x","atan")};return ENGINE.runKernel(Atan,_e)}const atan$2=op({atan_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function atan2_(_,$){let _e=convertToTensor(_,"a","atan2"),et=convertToTensor($,"b","atan2");[_e,et]=makeTypesMatch(_e,et);const tt={a:_e,b:et};return ENGINE.runKernel(Atan2,tt)}const atan2$2=op({atan2_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function atanh_(_){const _e={x:convertToTensor(_,"x","atanh")};return ENGINE.runKernel(Atanh,_e)}const atanh$2=op({atanh_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function computeDilation2DInfo(_,$,_e,et,tt="NHWC",rt){const nt=_[3],it=[...$,nt],st=convertConv2DDataFormat(tt);return computeConv2DInfo(_,it,_e,rt,et,null,null,st)}function computePool2DInfo(_,$,_e,et,tt,rt,nt="channelsLast"){const[it,st]=parseTupleParam($);let at;if(nt==="channelsLast")at=[it,st,_[3],_[3]];else if(nt==="channelsFirst")at=[it,st,_[1],_[1]];else throw new Error(`Unknown dataFormat ${nt}`);return computeConv2DInfo(_,at,_e,et,tt,rt,!1,nt)}function computePool3DInfo(_,$,_e,et,tt,rt,nt="NDHWC"){const[it,st,at]=parse3TupleParam($);let ot,dt;if(nt==="NDHWC")dt="channelsLast",ot=[it,st,at,_[4],_[4]];else if(nt==="NCDHW")dt="channelsFirst",ot=[it,st,at,_[1],_[1]];else throw new Error(`Unknown dataFormat ${nt}`);return computeConv3DInfo(_,ot,_e,et,tt,!1,dt,rt)}function computeConv2DInfo(_,$,_e,et,tt,rt,nt=!1,it="channelsLast"){let[st,at,ot,dt]=[-1,-1,-1,-1];if(it==="channelsLast")[st,at,ot,dt]=_;else if(it==="channelsFirst")[st,dt,at,ot]=_;else throw new Error(`Unknown dataFormat ${it}`);const[ht,yt,,vt]=$,[xt,wt]=parseTupleParam(_e),[Et,At]=parseTupleParam(et),jt=getEffectiveFilterSize(ht,Et),kt=getEffectiveFilterSize(yt,At),{padInfo:Lt,outHeight:Bt,outWidth:Gt}=getPadAndOutInfo(tt,at,ot,xt,wt,jt,kt,rt,it),er=nt?vt*dt:vt;let tr;return it==="channelsFirst"?tr=[st,er,Bt,Gt]:it==="channelsLast"&&(tr=[st,Bt,Gt,er]),{batchSize:st,dataFormat:it,inHeight:at,inWidth:ot,inChannels:dt,outHeight:Bt,outWidth:Gt,outChannels:er,padInfo:Lt,strideHeight:xt,strideWidth:wt,filterHeight:ht,filterWidth:yt,effectiveFilterHeight:jt,effectiveFilterWidth:kt,dilationHeight:Et,dilationWidth:At,inShape:_,outShape:tr,filterShape:$}}function computeConv3DInfo(_,$,_e,et,tt,rt=!1,nt="channelsLast",it){let[st,at,ot,dt,ht]=[-1,-1,-1,-1,-1];if(nt==="channelsLast")[st,at,ot,dt,ht]=_;else if(nt==="channelsFirst")[st,ht,at,ot,dt]=_;else throw new Error(`Unknown dataFormat ${nt}`);const[yt,vt,xt,,wt]=$,[Et,At,jt]=parse3TupleParam(_e),[kt,Lt,Bt]=parse3TupleParam(et),Gt=getEffectiveFilterSize(yt,kt),er=getEffectiveFilterSize(vt,Lt),tr=getEffectiveFilterSize(xt,Bt),{padInfo:ar,outDepth:Mt,outHeight:lt,outWidth:mt}=get3DPadAndOutInfo(tt,at,ot,dt,Et,At,jt,Gt,er,tr,it),gt=rt?wt*ht:wt;let bt;return nt==="channelsFirst"?bt=[st,gt,Mt,lt,mt]:nt==="channelsLast"&&(bt=[st,Mt,lt,mt,gt]),{batchSize:st,dataFormat:nt,inDepth:at,inHeight:ot,inWidth:dt,inChannels:ht,outDepth:Mt,outHeight:lt,outWidth:mt,outChannels:gt,padInfo:ar,strideDepth:Et,strideHeight:At,strideWidth:jt,filterDepth:yt,filterHeight:vt,filterWidth:xt,effectiveFilterDepth:Gt,effectiveFilterHeight:er,effectiveFilterWidth:tr,dilationDepth:kt,dilationHeight:Lt,dilationWidth:Bt,inShape:_,outShape:bt,filterShape:$}}function computeOutputShape2D(_,$,_e,et,tt){et==null&&(et=computeDefaultPad(_,$,_e));const rt=_[0],nt=_[1],it=round$4((rt-$+2*et)/_e+1,tt),st=round$4((nt-$+2*et)/_e+1,tt);return[it,st]}function computeOutputShape4D(_,$,_e,et,tt,rt){tt==null&&(tt=computeDefaultPad(_,$[0],et[0]));const nt=[0,0,0,_e];for(let it=0;it<3;it++)_[it]+2*tt>=$[it]&&(nt[it]=round$4((_[it]-$[it]+2*tt)/et[it]+1,rt));return nt}function computeDefaultPad(_,$,_e,et=1){const tt=getEffectiveFilterSize($,et);return Math.floor((_[0]*(_e-1)-_e+tt)/2)}function parseTupleParam(_){return typeof _=="number"?[_,_,_]:_.length===2?[_[0],_[1],1]:_}function parse3TupleParam(_){return typeof _=="number"?[_,_,_]:_}function getEffectiveFilterSize(_,$){return $<=1?_:_+(_-1)*($-1)}function getPadAndOutInfo(_,$,_e,et,tt,rt,nt,it,st){let at,ot,dt;if(typeof _=="number"){at={top:_,bottom:_,left:_,right:_,type:_===0?"VALID":"NUMBER"};const yt=computeOutputShape2D([$,_e],rt,et,_,it);ot=yt[0],dt=yt[1]}else if(_==="same"){ot=Math.ceil($/et),dt=Math.ceil(_e/tt);const ht=Math.max(0,(ot-1)*et+rt-$),yt=Math.max(0,(dt-1)*tt+nt-_e),vt=Math.floor(ht/2),xt=ht-vt,wt=Math.floor(yt/2),Et=yt-wt;at={top:vt,bottom:xt,left:wt,right:Et,type:"SAME"}}else if(_==="valid")at={top:0,bottom:0,left:0,right:0,type:"VALID"},ot=Math.ceil(($-rt+1)/et),dt=Math.ceil((_e-nt+1)/tt);else if(typeof _=="object"){const ht=st==="channelsLast"?_[1][0]:_[2][0],yt=st==="channelsLast"?_[1][1]:_[2][1],vt=st==="channelsLast"?_[2][0]:_[3][0],xt=st==="channelsLast"?_[2][1]:_[3][1];at={top:ht,bottom:yt,left:vt,right:xt,type:ht===0&&yt===0&&vt===0&&xt===0?"VALID":"EXPLICIT"},ot=round$4(($-rt+ht+yt)/et+1,it),dt=round$4((_e-nt+vt+xt)/tt+1,it)}else throw Error(`Unknown padding parameter: ${_}`);return{padInfo:at,outHeight:ot,outWidth:dt}}function get3DPadAndOutInfo(_,$,_e,et,tt,rt,nt,it,st,at,ot){let dt,ht,yt,vt;if(_==="valid"&&(_=0),typeof _=="number"){dt={top:_,bottom:_,left:_,right:_,front:_,back:_,type:_===0?"VALID":"NUMBER"};const wt=computeOutputShape4D([$,_e,et,1],[it,st,at],1,[tt,rt,nt],_,ot);ht=wt[0],yt=wt[1],vt=wt[2]}else if(_==="same"){ht=Math.ceil($/tt),yt=Math.ceil(_e/rt),vt=Math.ceil(et/nt);const xt=(ht-1)*tt+it-$,wt=(yt-1)*rt+st-_e,Et=(vt-1)*nt+at-et,At=Math.floor(xt/2),jt=xt-At,kt=Math.floor(wt/2),Lt=wt-kt,Bt=Math.floor(Et/2),Gt=Et-Bt;dt={top:kt,bottom:Lt,left:Bt,right:Gt,front:At,back:jt,type:"SAME"}}else throw Error(`Unknown padding parameter: ${_}`);return{padInfo:dt,outDepth:ht,outHeight:yt,outWidth:vt}}function round$4(_,$){if(!$)return Math.trunc(_);switch($){case"round":return Math.round(_);case"ceil":return Math.ceil(_);case"floor":return Math.floor(_);default:throw new Error(`Unknown roundingMode ${$}`)}}function tupleValuesAreOne(_){const[$,_e,et]=parseTupleParam(_);return $===1&&_e===1&&et===1}function eitherStridesOrDilationsAreOne(_,$){return tupleValuesAreOne(_)||tupleValuesAreOne($)}function stridesOrDilationsArePositive(_){return parseTupleParam(_).every($=>$>0)}function convertConv2DDataFormat(_){if(_==="NHWC")return"channelsLast";if(_==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${_}`)}function checkPadOnDimRoundingMode(_,$,_e){if(_e!=null){if(typeof $=="string")throw Error(`Error in ${_}: pad must be an integer when using dimRoundingMode ${_e} but got pad ${$}.`);if(typeof $=="number")assert$1(isInt($),()=>`Error in ${_}: pad must be an integer when using dimRoundingMode ${_e} but got pad ${$}.`);else if(typeof $=="object")$.forEach(et=>{et.forEach(tt=>{assert$1(isInt(tt),()=>`Error in ${_}: pad must be an integer when using dimRoundingMode ${_e} but got pad ${tt}.`)})});else throw Error(`Error in ${_}: Unknown padding parameter: ${$}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reshape_(_,$){const et={x:convertToTensor(_,"x","reshape","string_or_numeric")},tt={shape:$};return ENGINE.runKernel(Reshape$1,et,tt)}const reshape$3=op({reshape_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool_(_,$,_e,et,tt){const rt=convertToTensor(_,"x","avgPool","float32"),nt=1;assert$1(eitherStridesOrDilationsAreOne(_e,nt),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${_e} and dilations '${nt}'`);let it=rt,st=!1;rt.rank===3&&(st=!0,it=reshape$3(rt,[1,rt.shape[0],rt.shape[1],rt.shape[2]])),assert$1(it.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${it.rank}.`),checkPadOnDimRoundingMode("avgPool",et,tt);const at={x:it},ot={filterSize:$,strides:_e,pad:et,dimRoundingMode:tt};let dt=ENGINE.runKernel(AvgPool,at,ot);return dt=cast$3(dt,rt.dtype),st?reshape$3(dt,[dt.shape[1],dt.shape[2],dt.shape[3]]):dt}const avgPool$2=op({avgPool_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3d_(_,$,_e,et,tt,rt="NDHWC"){const nt=convertToTensor(_,"x","avgPool3d","float32");let it=nt,st=!1;nt.rank===4&&(st=!0,it=reshape$3(nt,[1,nt.shape[0],nt.shape[1],nt.shape[2],nt.shape[3]])),assert$1(it.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${it.rank}.`),assert$1(rt==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${rt}`),assert$1(typeof _e=="number"&&_e>0||Array.isArray(_e)&&_e[0]>0&&_e[1]>0&&_e[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${_e}'`),checkPadOnDimRoundingMode("avgPool3d",et,tt);const at={x:it},ot={filterSize:$,strides:_e,pad:et,dimRoundingMode:tt,dataFormat:rt};let dt=ENGINE.runKernel(AvgPool3D,at,ot);return dt=cast$3(dt,it.dtype),st?reshape$3(dt,[dt.shape[1],dt.shape[2],dt.shape[3],dt.shape[4]]):dt}const avgPool3d$1=op({avgPool3d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concat_(_,$=0){assert$1(_.length>=1,()=>"Pass at least one tensor to concat");const _e=convertToTensorArray(_,"tensors","concat","string_or_numeric");if(_e[0].dtype==="complex64"&&_e.forEach(rt=>{if(rt.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${rt.dtype}. `)}),_e.length===1)return clone$1(_e[0]);const et=_e,tt={axis:$};return ENGINE.runKernel(Concat,et,tt)}const concat$2=op({concat_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function matMul_(_,$,_e=!1,et=!1){let tt=convertToTensor(_,"a","matMul"),rt=convertToTensor($,"b","matMul");[tt,rt]=makeTypesMatch(tt,rt);const nt={a:tt,b:rt},it={transposeA:_e,transposeB:et};return ENGINE.runKernel(BatchMatMul,nt,it)}const matMul$1=op({matMul_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sigmoid_(_){const _e={x:convertToTensor(_,"x","sigmoid","float32")};return ENGINE.runKernel(Sigmoid$1,_e)}const sigmoid$2=op({sigmoid_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice_(_,$,_e){const et=convertToTensor(_,"x","slice","string_or_numeric");if(et.rank===0)throw new Error("Slicing scalar is not possible");const tt={x:et},rt={begin:$,size:_e};return ENGINE.runKernel(Slice,tt,rt)}const slice$2=op({slice_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tanh_(_){const _e={x:convertToTensor(_,"x","tanh","float32")};return ENGINE.runKernel(Tanh$1,_e)}const tanh$2=op({tanh_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function basicLSTMCell_(_,$,_e,et,tt,rt){const nt=convertToTensor(_,"forgetBias","basicLSTMCell"),it=convertToTensor($,"lstmKernel","basicLSTMCell"),st=convertToTensor(_e,"lstmBias","basicLSTMCell"),at=convertToTensor(et,"data","basicLSTMCell"),ot=convertToTensor(tt,"c","basicLSTMCell"),dt=convertToTensor(rt,"h","basicLSTMCell"),ht=concat$2([at,dt],1),yt=matMul$1(ht,it),vt=add$3(yt,st),xt=vt.shape[0],wt=vt.shape[1]/4,Et=[xt,wt],At=slice$2(vt,[0,0],Et),jt=slice$2(vt,[0,wt],Et),kt=slice$2(vt,[0,wt*2],Et),Lt=slice$2(vt,[0,wt*3],Et),Bt=add$3(mul(sigmoid$2(At),tanh$2(jt)),mul(ot,sigmoid$2(add$3(nt,kt)))),Gt=mul(tanh$2(Bt),sigmoid$2(Lt));return[Bt,Gt]}const basicLSTMCell=op({basicLSTMCell_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchToSpaceND_(_,$,_e){const et=convertToTensor(_,"x","batchToSpaceND"),tt=$.reduce((it,st)=>it*st);assert$1(et.rank>=1+$.length,()=>`input rank is ${et.rank} but should be > than blockShape.length ${$.length}`),assert$1(_e.length===$.length,()=>`crops.length is ${_e.length} but should be equal to blockShape.length  ${$.length}`),assert$1(et.shape[0]%tt===0,()=>`input tensor batch is ${et.shape[0]} but is not divisible by the product of the elements of blockShape ${$.join(" * ")} === ${tt}`);const rt={x:et},nt={blockShape:$,crops:_e};return ENGINE.runKernel(BatchToSpaceND,rt,nt)}const batchToSpaceND$2=op({batchToSpaceND_});function xAs4D(_){let $;return _.rank===0||_.rank===1?$=reshape$3(_,[1,1,1,_.size]):_.rank===2?$=reshape$3(_,[1,1,_.shape[0],_.shape[1]]):_.rank===3?$=reshape$3(_,[1,_.shape[0],_.shape[1],_.shape[2]]):$=_,$}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchNorm_(_,$,_e,et,tt,rt){rt==null&&(rt=.001);const nt=convertToTensor(_,"x","batchNorm"),it=convertToTensor($,"mean","batchNorm"),st=convertToTensor(_e,"variance","batchNorm");let at;tt!=null&&(at=convertToTensor(tt,"scale","batchNorm"));let ot;et!=null&&(ot=convertToTensor(et,"offset","batchNorm")),assert$1(it.rank===st.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),assert$1(ot==null||it.rank===ot.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),assert$1(at==null||it.rank===at.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const ht={x:xAs4D(nt),scale:at,offset:ot,mean:it,variance:st},yt={varianceEpsilon:rt},vt=ENGINE.runKernel(FusedBatchNorm,ht,yt);return reshape$3(vt,nt.shape)}const batchNorm$2=op({batchNorm_});function batchNorm2d_(_,$,_e,et,tt,rt){const nt=convertToTensor(_,"x","batchNorm"),it=convertToTensor($,"mean","batchNorm"),st=convertToTensor(_e,"variance","batchNorm");let at;tt!=null&&(at=convertToTensor(tt,"scale","batchNorm"));let ot;return et!=null&&(ot=convertToTensor(et,"offset","batchNorm")),assert$1(nt.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${nt.rank}.`),assert$1(it.rank===2||it.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${it.rank}.`),assert$1(st.rank===2||st.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${st.rank}.`),at!=null&&assert$1(at.rank===2||at.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${at.rank}.`),ot!=null&&assert$1(ot.rank===2||ot.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${ot.rank}.`),batchNorm$2(nt,it,st,ot,at,rt)}const batchNorm2d=op({batchNorm2d_});function batchNorm3d_(_,$,_e,et,tt,rt){const nt=convertToTensor(_,"x","batchNorm"),it=convertToTensor($,"mean","batchNorm"),st=convertToTensor(_e,"variance","batchNorm");let at;tt!=null&&(at=convertToTensor(tt,"scale","batchNorm"));let ot;return et!=null&&(ot=convertToTensor(et,"offset","batchNorm")),assert$1(nt.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${nt.rank}.`),assert$1(it.rank===3||it.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${it.rank}.`),assert$1(st.rank===3||st.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${st.rank}.`),at!=null&&assert$1(at.rank===3||at.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${at.rank}.`),ot!=null&&assert$1(ot.rank===3||ot.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${ot.rank}.`),batchNorm$2(nt,it,st,ot,at,rt)}const batchNorm3d=op({batchNorm3d_});function batchNorm4d_(_,$,_e,et,tt,rt){const nt=convertToTensor(_,"x","batchNorm"),it=convertToTensor($,"mean","batchNorm"),st=convertToTensor(_e,"variance","batchNorm");let at;tt!=null&&(at=convertToTensor(tt,"scale","batchNorm"));let ot;return et!=null&&(ot=convertToTensor(et,"offset","batchNorm")),assert$1(nt.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${nt.rank}.`),assert$1(it.rank===4||it.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${it.rank}.`),assert$1(st.rank===4||st.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${st.rank}.`),at!=null&&assert$1(at.rank===4||at.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${at.rank}.`),ot!=null&&assert$1(ot.rank===4||ot.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${ot.rank}.`),batchNorm$2(nt,it,st,ot,at,rt)}const batchNorm4d=op({batchNorm4d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bincount_(_,$,_e){const et=convertToTensor(_,"x","bincount"),tt=convertToTensor($,"weights","bincount");assert$1(et.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${et.dtype}`),assert$1(_e>=0,()=>`size must be non-negative, but got ${_e}.`),assert$1(tt.size===et.size||tt.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${et.shape}, weights shape: ${tt.shape}.`);const rt={x:et,weights:tt},nt={size:_e};return ENGINE.runKernel(Bincount,rt,nt)}const bincount$2=op({bincount_});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bitwiseAnd_(_,$){const _e=convertToTensor(_,"x","bitwiseAnd"),et=convertToTensor($,"y","bitwiseAnd");if(!arraysEqual(_e.shape,et.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${_e.shape}, y: ${et.shape}`);if(_e.dtype!=="int32"||et.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${_e.dtype} and type of y: ${et.dtype}`);const tt={a:_e,b:et};return ENGINE.runKernel(BitwiseAnd,tt)}const bitwiseAnd$2=op({bitwiseAnd_});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function broadcastArgs_(_,$){const _e=convertToTensor(_,"s0","broadcastArgs","int32"),et=convertToTensor($,"s1","broadcastArgs","int32");if(_e.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${_e.rank}`);if(et.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${et.rank}`);const tt={s0:_e,s1:et};return ENGINE.runKernel(BroadcastArgs,tt)}const broadcastArgs$2=op({broadcastArgs_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function broadcastTo_(_,$){let _e=convertToTensor(_,"broadcastTo","x");const et=_e.shape;if(assertNonNegativeIntegerDimensions($),$.length<_e.rank)throw new Error(`broadcastTo(): shape.length=${$.length} < input.rank=${_e.rank}.`);if($.length>_e.rank){const at=_e.shape.slice();for(;at.length<$.length;)at.unshift(1);_e=reshape$3(_e,at)}const tt=_e.shape,rt=Array.from($);for(let at=$.length-1;at>=0;at--)if(tt[at]===$[at])rt[at]=1;else if(_e.shape[at]!==1)throw new Error(`broadcastTo(): [${et}] cannot be broadcast to [${$}].`);if(rt.map((at,ot)=>at>1?ot:-1).filter(at=>at>=0).length===0)return clone$1(_e);const it={x:_e},st={reps:rt};return ENGINE.runKernel(Tile,it,st)}const broadcastTo=op({broadcastTo_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ceil_(_){const _e={x:convertToTensor(_,"x","ceil","float32")};return ENGINE.runKernel(Ceil,_e)}const ceil$2=op({ceil_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fill$2(_,$,_e){assertNonNegativeIntegerDimensions(_),_e=_e||inferDtype($);const et={shape:_,value:$,dtype:_e};return ENGINE.runKernel(Fill,{},et)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function clipByValue_(_,$,_e){const et=convertToTensor(_,"x","clipByValue");if(assert$1($<=_e,()=>`Error in clip: min (${$}) must be less than or equal to max (${_e}).`),$===_e)return fill$2(et.shape,$,et.dtype);const tt={x:et},rt={clipValueMin:$,clipValueMax:_e};return ENGINE.runKernel(ClipByValue,tt,rt)}const clipByValue$2=op({clipByValue_});function concat1d_(_){return concat$2(_,0)}const concat1d=op({concat1d_});function concat2d_(_,$){return concat$2(_,$)}const concat2d=op({concat2d_});function concat3d_(_,$){return concat$2(_,$)}const concat3d=op({concat3d_});function concat4d_(_,$){return concat$2(_,$)}const concat4d=op({concat4d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2d_(_,$,_e,et,tt="NHWC",rt=[1,1],nt){const it=convertToTensor(_,"x","conv2d","float32"),st=convertToTensor($,"filter","conv2d","float32");let at=it,ot=!1;it.rank===3&&(ot=!0,at=reshape$3(it,[1,it.shape[0],it.shape[1],it.shape[2]])),assert$1(at.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${at.rank}.`),assert$1(st.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${st.rank}.`),checkPadOnDimRoundingMode("conv2d",et,nt);const dt=tt==="NHWC"?at.shape[3]:at.shape[1];assert$1(dt===st.shape[2],()=>`Error in conv2d: depth of input (${dt}) must match input depth for filter ${st.shape[2]}.`),assert$1(eitherStridesOrDilationsAreOne(_e,rt),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${_e} and dilations '${rt}'`),assert$1(stridesOrDilationsArePositive(rt),()=>"Error in conv2D: Dilated rates should be larger than 0."),assert$1(stridesOrDilationsArePositive(_e),()=>"Error in conv2D: Strides should be larger than 0.");const ht={x:at,filter:st},yt={strides:_e,pad:et,dataFormat:tt,dilations:rt,dimRoundingMode:nt},vt=ENGINE.runKernel(Conv2D$1,ht,yt);return ot?reshape$3(vt,[vt.shape[1],vt.shape[2],vt.shape[3]]):vt}const conv2d$3=op({conv2d_});function conv1d_(_,$,_e,et,tt="NWC",rt=1,nt){const it=convertToTensor(_,"x","conv1d"),st=convertToTensor($,"filter","conv1d");let at=it,ot=!1;it.rank===2&&(ot=!0,at=reshape$3(it,[1,it.shape[0],it.shape[1]])),assert$1(at.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${at.rank}.`),assert$1(st.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${st.rank}.`),checkPadOnDimRoundingMode("conv1d",et,nt),assert$1(at.shape[2]===st.shape[1],()=>`Error in conv1d: depth of input (${at.shape[2]}) must match input depth for filter ${st.shape[1]}.`),assert$1(eitherStridesOrDilationsAreOne(_e,rt),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${_e} and dilation '${rt}'`),assert$1(stridesOrDilationsArePositive(rt),()=>"Error in conv1D: Dilated rates should be larger than 0."),assert$1(stridesOrDilationsArePositive(_e),()=>"Error in conv1D: Stride should be larger than 0."),assert$1(tt==="NWC",()=>`Error in conv1d: got dataFormat of ${tt} but only NWC is currently supported.`);const dt=reshape$3(st,[1,st.shape[0],st.shape[1],st.shape[2]]),ht=reshape$3(at,[at.shape[0],1,at.shape[1],at.shape[2]]),wt=conv2d$3(ht,dt,[1,_e],et,"NHWC",[1,rt],nt);return ot?reshape$3(wt,[wt.shape[2],wt.shape[3]]):reshape$3(wt,[wt.shape[0],wt.shape[2],wt.shape[3]])}const conv1d$1=op({conv1d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropInput_(_,$,_e,et,tt,rt="NHWC",nt){assert$1(_.length===$.rank,()=>`Length of inShape (${_.length}) and rank of dy (${$.rank}) must match`);let it=_,st=$,at=!1;$.rank===3&&(at=!0,st=reshape$3($,[1,$.shape[0],$.shape[1],$.shape[2]]),it=[1,_[0],_[1],_[2]]),assert$1(it.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${it.length}.`),assert$1(st.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${st.rank}`),assert$1(_e.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${_e.rank}`);const ot=rt==="NHWC"?it[3]:it[1],dt=rt==="NHWC"?st.shape[3]:st.shape[1];assert$1(ot===_e.shape[2],()=>`Error in conv2dDerInput: depth of input (${ot}) must match input depth for filter ${_e.shape[2]}.`),assert$1(dt===_e.shape[3],()=>`Error in conv2dDerInput: depth of output (${dt}) must match output depth for filter ${_e.shape[3]}.`),checkPadOnDimRoundingMode("conv2dDerInput",tt,nt);const ht={dy:st,filter:_e},yt={strides:et,pad:tt,dataFormat:rt,dimRoundingMode:nt,inputShape:it},vt=ENGINE.runKernel(Conv2DBackpropInput,ht,yt);return at?reshape$3(vt,[vt.shape[1],vt.shape[2],vt.shape[3]]):vt}const conv2DBackpropInput$2=op({conv2DBackpropInput_});function conv2dTranspose_(_,$,_e,et,tt,rt){const nt=convertToTensor(_,"x","conv2dTranspose"),it=convertToTensor($,"filter","conv2dTranspose");return conv2DBackpropInput$2(_e,nt,it,et,tt,"NHWC",rt)}const conv2dTranspose$1=op({conv2dTranspose_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3d_(_,$,_e,et,tt="NDHWC",rt=[1,1,1]){const nt=convertToTensor(_,"x","conv3d"),it=convertToTensor($,"filter","conv3d");let st=nt,at=!1;nt.rank===4&&(at=!0,st=reshape$3(nt,[1,nt.shape[0],nt.shape[1],nt.shape[2],nt.shape[3]])),assert$1(st.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${st.rank}.`),assert$1(it.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${it.rank}.`),assert$1(st.shape[4]===it.shape[3],()=>`Error in conv3d: depth of input (${st.shape[4]}) must match input depth for filter ${it.shape[3]}.`),assert$1(eitherStridesOrDilationsAreOne(_e,rt),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${_e} and dilations '${rt}'`),assert$1(tt==="NDHWC",()=>`Error in conv3d: got dataFormat of ${tt} but only NDHWC is currently supported.`),assert$1(stridesOrDilationsArePositive(rt),()=>"Error in conv3D: Dilated rates should be larger than 0."),assert$1(stridesOrDilationsArePositive(_e),()=>"Error in conv3D: Strides should be larger than 0.");const ot={x:st,filter:it},dt={strides:_e,pad:et,dataFormat:tt,dilations:rt},ht=ENGINE.runKernel(Conv3D$1,ot,dt);return at?reshape$3(ht,[ht.shape[1],ht.shape[2],ht.shape[3],ht.shape[4]]):ht}const conv3d$1=op({conv3d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropInput_(_,$,_e,et,tt){assert$1(_.length===$.rank,()=>`Length of inShape (${_.length}) and rank of dy (${$.rank}) must match`);let rt=_,nt=$,it=!1;$.rank===4&&(it=!0,nt=reshape$3($,[1,$.shape[0],$.shape[1],$.shape[2],$.shape[3]]),rt=[1,_[0],_[1],_[2],_[3]]);const st=rt[4],at=nt.shape[4];assert$1(rt.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${rt.length}.`),assert$1(nt.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${nt.rank}`),assert$1(_e.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${_e.rank}`),assert$1(st===_e.shape[3],()=>`Error in conv3dDerInput: depth of input (${st}) must match input depth for filter ${_e.shape[3]}.`),assert$1(at===_e.shape[4],()=>`Error in conv3dDerInput: depth of output (${at}) must match output depth for filter ${_e.shape[4]}.`);const ot={dy:nt,filter:_e},dt={pad:tt,strides:et,inputShape:rt},ht=ENGINE.runKernel(Conv3DBackpropInputV2,ot,dt);return it?reshape$3(ht,[ht.shape[1],ht.shape[2],ht.shape[3],ht.shape[4]]):ht}const conv3DBackpropInput$1=op({conv3DBackpropInput_});function conv3dTranspose_(_,$,_e,et,tt){const rt=convertToTensor(_,"x","conv3dTranspose"),nt=convertToTensor($,"filter","conv3dTranspose");return conv3DBackpropInput$1(_e,rt,nt,et,tt)}const conv3dTranspose$1=op({conv3dTranspose_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cos_(_){const _e={x:convertToTensor(_,"x","cos","float32")};return ENGINE.runKernel(Cos,_e)}const cos$3=op({cos_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cosh_(_){const _e={x:convertToTensor(_,"x","cosh","float32")};return ENGINE.runKernel(Cosh,_e)}const cosh$2=op({cosh_});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cumprod_(_,$=0,_e=!1,et=!1){const rt={x:convertToTensor(_,"x","cumprod")},nt={axis:$,exclusive:_e,reverse:et};return ENGINE.runKernel(Cumprod,rt,nt)}const cumprod$2=op({cumprod_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cumsum_(_,$=0,_e=!1,et=!1){const rt={x:convertToTensor(_,"x","cumsum")},nt={axis:$,exclusive:_e,reverse:et};return ENGINE.runKernel(Cumsum,rt,nt)}const cumsum$2=op({cumsum_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function denseBincount_(_,$,_e,et=!1){const tt=convertToTensor(_,"x","denseBincount"),rt=convertToTensor($,"weights","denseBincount");assert$1(tt.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${tt.dtype}`),assert$1(tt.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${tt.rank}.`),assert$1(_e>=0,()=>`size must be non-negative, but got ${_e}.`),assert$1(rt.size===tt.size||rt.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${tt.shape}, weights shape: ${rt.shape}.`);const nt={x:tt,weights:rt},it={size:_e,binaryOutput:et};return ENGINE.runKernel(DenseBincount,nt,it)}const denseBincount$2=op({denseBincount_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthToSpace_(_,$,_e="NHWC"){const et=convertToTensor(_,"x","depthToSpace","float32"),tt=_e==="NHWC"?et.shape[1]:et.shape[2],rt=_e==="NHWC"?et.shape[2]:et.shape[3],nt=_e==="NHWC"?et.shape[3]:et.shape[1];assert$1($>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${$}`),assert$1(tt*$>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${tt} and ${$}  for depthToSpace with input shape
    ${et.shape}`),assert$1(rt*$>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${rt} and ${$} for depthToSpace with input shape
        ${et.shape}`),assert$1(nt%($*$)===0,()=>`Dimension size must be evenly divisible by ${$*$} but is ${nt} for depthToSpace with input shape ${et.shape}`);const it={x:et},st={blockSize:$,dataFormat:_e};return ENGINE.runKernel(DepthToSpace,it,st)}const depthToSpace$2=op({depthToSpace_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2d_(_,$,_e,et,tt="NHWC",rt=[1,1],nt){const it=convertToTensor(_,"x","depthwiseConv2d","float32"),st=convertToTensor($,"filter","depthwiseConv2d","float32");let at=it,ot=!1;it.rank===3&&(ot=!0,at=reshape$3(it,[1,it.shape[0],it.shape[1],it.shape[2]])),assert$1(at.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${at.rank}.`),assert$1(st.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${st.rank}.`);const dt=tt==="NHWC"?at.shape[3]:at.shape[1];assert$1(dt===st.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${dt}) must match the inChannels dimension in filter ${st.shape[2]}.`),checkPadOnDimRoundingMode("depthwiseConv2d",et,nt);const ht={x:at,filter:st},yt={strides:_e,pad:et,dataFormat:tt,dilations:rt,dimRoundingMode:nt},vt=ENGINE.runKernel(DepthwiseConv2dNative,ht,yt);return ot?reshape$3(vt,[vt.shape[1],vt.shape[2],vt.shape[3]]):vt}const depthwiseConv2d$3=op({depthwiseConv2d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function diag_(_){const _e={x:convertToTensor(_,"x","diag")};return ENGINE.runKernel(Diag,_e)}const diag$2=op({diag_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dilation2d_(_,$,_e,et,tt=[1,1],rt="NHWC"){const nt=convertToTensor(_,"x","dilation2d"),it=convertToTensor($,"filter","dilation2d");assert$1(nt.rank===3||nt.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${nt.rank}.`),assert$1(it.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${it.rank}.`),assert$1(rt==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${rt}`);let st=nt,at=!1;nt.rank===3&&(st=reshape$3(nt,[1,nt.shape[0],nt.shape[1],nt.shape[2]]),at=!0),assert$1(st.shape[3]===it.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${st.shape[3]} vs ${it.shape[2]}`);const ot={x:st,filter:it},dt={strides:_e,pad:et,dilations:tt},ht=ENGINE.runKernel(Dilation2D,ot,dt);return at?reshape$3(ht,[ht.shape[1],ht.shape[2],ht.shape[3]]):ht}const dilation2d=op({dilation2d_});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getBroadcastDims$1(_,$){const _e=_.length,et=[];for(let tt=0;tt<_e;tt++){const rt=_e-1-tt,nt=_[rt]||1;($[$.length-1-tt]||1)>1&&nt===1&&et.unshift(rt)}return et}function getReductionAxes(_,$){const _e=[];for(let et=0;et<$.length;et++){const tt=_[_.length-et-1],rt=$.length-et-1,nt=$[rt];(tt==null||tt===1&&nt>1)&&_e.unshift(rt)}return _e}function assertAndGetBroadcastShape(_,$){const _e=Math.max(_.length,$.length),et=new Array(_e);for(let tt=0;tt<_e;tt++){let rt=_[_.length-tt-1];rt==null&&(rt=1);let nt=$[$.length-tt-1];if(nt==null&&(nt=1),rt===1)et[_e-tt-1]=nt;else if(nt===1)et[_e-tt-1]=rt;else if(rt!==nt){const it=`Operands could not be broadcast together with shapes ${_} and ${$}.`;throw Error(it)}else et[_e-tt-1]=rt}return et}const broadcast_util=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape,getBroadcastDims:getBroadcastDims$1,getReductionAxes},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function equal_(_,$){let _e=convertToTensor(_,"a","equal","string_or_numeric"),et=convertToTensor($,"b","equal","string_or_numeric");[_e,et]=makeTypesMatch(_e,et),assertAndGetBroadcastShape(_e.shape,et.shape);const tt={a:_e,b:et};return ENGINE.runKernel(Equal,tt)}const equal$2=op({equal_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function where_(_,$,_e){const et=convertToTensor($,"a","where"),tt=convertToTensor(_e,"b","where"),rt=convertToTensor(_,"condition","where","bool"),nt=assertAndGetBroadcastShape(assertAndGetBroadcastShape(rt.shape,et.shape),tt.shape),it=broadcastTo(rt,nt),st=broadcastTo(et,nt),at=broadcastTo(tt,nt),ot={condition:it,t:st,e:at};return ENGINE.runKernel(Select,ot)}const where=op({where_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zerosLike_(_){const _e={x:convertToTensor(_,"x","zerosLike")};return ENGINE.runKernel(ZerosLike,_e)}const zerosLike$2=op({zerosLike_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function divNoNan_(_,$){let _e=convertToTensor(_,"a","div"),et=convertToTensor($,"b","div");[_e,et]=makeTypesMatch(_e,et);const tt=div$1(_e,et),rt=zerosLike$2(tt),nt=equal$2(et,rt);return where(nt,rt,tt)}const divNoNan=op({divNoNan_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dot_(_,$){const _e=convertToTensor(_,"t1","dot"),et=convertToTensor($,"t2","dot");assert$1((_e.rank===1||_e.rank===2)&&(et.rank===1||et.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${_e.rank} and ${et.rank}.`);const tt=_e.rank===1?_e.size:_e.shape[1],rt=et.rank===1?et.size:et.shape[0];if(assert$1(tt===rt,()=>`Error in dot: inner dimensions of inputs must match, but got ${tt} and ${rt}.`),_e.rank===1&&et.rank===1){const nt=reshape$3(_e,[1,-1]),it=reshape$3(et,[-1,1]),st=matMul$1(nt,it);return reshape$3(st,[])}else if(_e.rank===1&&et.rank===2){const nt=reshape$3(_e,[1,-1]),it=reshape$3(et,[et.shape[0],et.shape[1]]),st=matMul$1(nt,it);return reshape$3(st,[st.size])}else if(_e.rank===2&&et.rank===1){const nt=reshape$3(et,[-1,1]),it=matMul$1(_e,nt);return reshape$3(it,[it.size])}else{const nt=reshape$3(et,[et.shape[0],et.shape[1]]);return matMul$1(_e,nt)}}const dot$2=op({dot_});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function einsum_(_,...$){const _e=$.map((tt,rt)=>convertToTensor(tt,`tensors${rt}`,"einsum")),et={equation:_};return ENGINE.runKernel(Einsum,_e,et)}const einsum$2=op({einsum_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function elu_(_){const _e={x:convertToTensor(_,"x","elu","float32")};return ENGINE.runKernel(Elu$1,_e)}const elu$4=op({elu_});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ensureShape_(_,$){const _e=convertToTensor(_,"x","ensureShape","string_or_numeric");if(!arraysEqualWithNull(_e.shape,$))throw new Error(`EnsureShape: Shape of tensor ${_e.shape} is not compatible with expected shape ${$}`);return _}const ensureShape=op({ensureShape_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function erf_(_){let $=convertToTensor(_,"x","erf");assert$1($.dtype==="int32"||$.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),$.dtype==="int32"&&($=cast$3($,"float32"));const _e={x:$};return ENGINE.runKernel(Erf,_e)}const erf$2=op({erf_});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function axesAreInnerMostDims(_,$){for(let _e=0;_e<_.length;++_e)if(_[_.length-_e-1]!==$-1-_e)return!1;return!0}function combineLocations(_,$,_e){const et=_.length+$.length,tt=[];let rt=0,nt=0;for(let it=0;it<et;it++)_e.indexOf(it)===-1?tt.push(_[rt++]):tt.push($[nt++]);return tt}function computeOutAndReduceShapes(_,$){const _e=[],et=_.length;for(let rt=0;rt<et;rt++)$.indexOf(rt)===-1&&_e.push(_[rt]);const tt=$.map(rt=>_[rt]);return[_e,tt]}function expandShapeToKeepDim(_,$){const _e=$.map(et=>1);return combineLocations(_,_e,$)}function assertAxesAreInnerMostDims(_,$,_e){assert$1(axesAreInnerMostDims($,_e),()=>`${_} supports only inner-most axes for now. Got axes ${$} and rank-${_e} input.`)}function getAxesPermutation(_,$){if(axesAreInnerMostDims(_,$))return null;const _e=[];for(let et=0;et<$;++et)_.indexOf(et)===-1&&_e.push(et);return _.forEach(et=>_e.push(et)),_e}function getUndoAxesPermutation(_){return _.map(($,_e)=>[_e,$]).sort(($,_e)=>$[1]-_e[1]).map($=>$[0])}function getInnerMostAxes(_,$){const _e=[];for(let et=$-_;et<$;++et)_e.push(et);return _e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function max_(_,$=null,_e=!1){const tt={x:convertToTensor(_,"x","max")},rt={reductionIndices:$,keepDims:_e};return ENGINE.runKernel(Max,tt,rt)}const max$6=op({max_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function min_(_,$=null,_e=!1){const tt={x:convertToTensor(_,"x","min")},rt={axis:$,keepDims:_e};return ENGINE.runKernel(Min,tt,rt)}const min$6=op({min_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pow_(_,$){let _e=convertToTensor(_,"base","pow"),et=convertToTensor($,"exp","pow");[_e,et]=makeTypesMatch(_e,et);const tt={a:_e,b:et};return ENGINE.runKernel(Pow,tt)}const pow$3=op({pow_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function scalar(_,$){if((isTypedArray$5(_)&&$!=="string"||Array.isArray(_))&&$!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if($==="string"&&isTypedArray$5(_)&&!(_ instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return makeTensor(_,[],[],$)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sqrt_(_){const _e={x:convertToTensor(_,"x","sqrt","float32")};return ENGINE.runKernel(Sqrt,_e)}const sqrt$4=op({sqrt_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function square_(_){const $=convertToTensor(_,"x","square"),_e={};return ENGINE.runKernel("Square",{x:$},_e)}const square$3=op({square_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sum_(_,$=null,_e=!1){let et=convertToTensor(_,"x","sum");et.dtype==="bool"&&(et=cast$3(et,"int32"));const tt={x:et},rt={axis:$,keepDims:_e};return ENGINE.runKernel(Sum,tt,rt)}const sum$2=op({sum_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function norm_(_,$="euclidean",_e=null,et=!1){_=convertToTensor(_,"x","norm");const tt=normImpl(_,$,_e);let rt=tt.shape;if(et){const nt=parseAxisParam(_e,_.shape);rt=expandShapeToKeepDim(tt.shape,nt)}return reshape$3(tt,rt)}function normImpl(_,$,_e=null){if(_.rank===0)return abs$2(_);if(_.rank!==1&&_e===null)return normImpl(reshape$3(_,[-1]),$,_e);if(_.rank===1||typeof _e=="number"||Array.isArray(_e)&&_e.length===1){if($===1)return sum$2(abs$2(_),_e);if($===1/0)return max$6(abs$2(_),_e);if($===-1/0)return min$6(abs$2(_),_e);if($==="euclidean"||$===2)return sqrt$4(sum$2(pow$3(abs$2(_),scalar(2,"int32")),_e));throw new Error(`Error in norm: invalid ord value: ${$}`)}if(Array.isArray(_e)&&_e.length===2){if($===1)return max$6(sum$2(abs$2(_),_e[0]),_e[1]-1);if($===1/0)return max$6(sum$2(abs$2(_),_e[1]),_e[0]);if($===-1/0)return min$6(sum$2(abs$2(_),_e[1]),_e[0]);if($==="fro"||$==="euclidean")return sqrt$4(sum$2(square$3(_),_e));throw new Error(`Error in norm: invalid ord value: ${$}`)}throw new Error(`Error in norm: invalid axis: ${_e}`)}const norm=op({norm_});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function euclideanNorm_(_,$=null,_e=!1){return norm(_,"euclidean",$,_e)}const euclideanNorm=op({euclideanNorm_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function exp_(_){const _e={x:convertToTensor(_,"x","exp")};return ENGINE.runKernel(Exp,_e)}const exp$3=op({exp_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function expandDims_(_,$=0){const _e=convertToTensor(_,"x","expandDims","string_or_numeric");assert$1($<=_e.rank,()=>"Axis must be <= rank of the tensor");const et={input:_e},tt={dim:$};return ENGINE.runKernel(ExpandDims,et,tt)}const expandDims$3=op({expandDims_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function expm1_(_){const _e={x:convertToTensor(_,"x","expm1")};return ENGINE.runKernel(Expm1,_e)}const expm1$2=op({expm1_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tile_(_,$){const _e=convertToTensor(_,"x","tile","string_or_numeric");assert$1(_e.rank===$.length,()=>`Error in transpose: rank of input ${_e.rank} must match length of reps ${$}.`);const et={x:_e},tt={reps:$};return ENGINE.runKernel(Tile,et,tt)}const tile$3=op({tile_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eye_(_,$,_e,et="float32"){$==null&&($=_);const tt=buffer$1([_,$],et),rt=_<=$?_:$;for(let it=0;it<rt;++it)tt.set(1,it,it);const nt=reshape$3(tt.toTensor(),[_,$]);if(_e==null)return nt;if(_e.length===1)return tile$3(expandDims$3(nt,0),[_e[0],1,1]);if(_e.length===2)return tile$3(expandDims$3(expandDims$3(nt,0),0),[_e[0],_e[1],1,1]);if(_e.length===3)return tile$3(expandDims$3(expandDims$3(expandDims$3(nt,0),0),0),[_e[0],_e[1],_e[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${_e.length}D.`)}const eye=op({eye_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function floor_(_){const _e={x:convertToTensor(_,"x","floor","float32")};return ENGINE.runKernel(Floor,_e)}const floor$2=op({floor_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gather_(_,$,_e=0,et=0){const tt=convertToTensor(_,"x","gather"),rt=convertToTensor($,"indices","gather","int32"),nt={x:tt,indices:rt},it={axis:_e,batchDims:et};return ENGINE.runKernel(GatherV2,nt,it)}const gather$1=op({gather_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function greater_(_,$){let _e=convertToTensor(_,"a","greater","string_or_numeric"),et=convertToTensor($,"b","greater","string_or_numeric");[_e,et]=makeTypesMatch(_e,et),assertAndGetBroadcastShape(_e.shape,et.shape);const tt={a:_e,b:et};return ENGINE.runKernel(Greater,tt)}const greater$3=op({greater_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function greaterEqual_(_,$){let _e=convertToTensor(_,"a","greaterEqual","string_or_numeric"),et=convertToTensor($,"b","greaterEqual","string_or_numeric");[_e,et]=makeTypesMatch(_e,et),assertAndGetBroadcastShape(_e.shape,et.shape);const tt={a:_e,b:et};return ENGINE.runKernel(GreaterEqual,tt)}const greaterEqual$2=op({greaterEqual_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function imag_(_){const _e={input:convertToTensor(_,"input","imag")};return ENGINE.runKernel(Imag,_e)}const imag$2=op({imag_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function isFinite_(_){const _e={x:convertToTensor(_,"x","isFinite")};return ENGINE.runKernel(IsFinite,_e)}const isFinite$3=op({isFinite_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function isInf_(_){const _e={x:convertToTensor(_,"x","isInf")};return ENGINE.runKernel(IsInf,_e)}const isInf$2=op({isInf_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function isNaN_(_){const _e={x:convertToTensor(_,"x","isNaN")};return ENGINE.runKernel(IsNan,_e)}const isNaN$4=op({isNaN_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function leakyRelu_(_,$=.2){const et={x:convertToTensor(_,"x","leakyRelu")},tt={alpha:$};return ENGINE.runKernel(LeakyRelu,et,tt)}const leakyRelu$2=op({leakyRelu_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function less_(_,$){let _e=convertToTensor(_,"a","less","string_or_numeric"),et=convertToTensor($,"b","less","string_or_numeric");[_e,et]=makeTypesMatch(_e,et),assertAndGetBroadcastShape(_e.shape,et.shape);const tt={a:_e,b:et};return ENGINE.runKernel(Less,tt)}const less$3=op({less_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lessEqual_(_,$){let _e=convertToTensor(_,"a","lessEqual","string_or_numeric"),et=convertToTensor($,"b","lessEqual","string_or_numeric");[_e,et]=makeTypesMatch(_e,et),assertAndGetBroadcastShape(_e.shape,et.shape);const tt={a:_e,b:et};return ENGINE.runKernel(LessEqual,tt)}const lessEqual$2=op({lessEqual_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function linspace(_,$,_e){if(_e<=0)throw new Error("The number of values should be positive.");const et={start:_,stop:$,num:_e};return ENGINE.runKernel(LinSpace,{},et)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function localResponseNormalization_(_,$=5,_e=1,et=1,tt=.5){const rt=convertToTensor(_,"x","localResponseNormalization");assert$1(rt.rank===4||rt.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${rt.rank}.`),assert$1(isInt($),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${$}.`);let nt=rt,it=!1;rt.rank===3&&(it=!0,nt=reshape$3(rt,[1,rt.shape[0],rt.shape[1],rt.shape[2]]));const st={x:nt},at={depthRadius:$,bias:_e,alpha:et,beta:tt},ot=ENGINE.runKernel(LRN,st,at);return it?reshape$3(ot,[ot.shape[1],ot.shape[2],ot.shape[3]]):ot}const localResponseNormalization=op({localResponseNormalization_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function log_(_){const _e={x:convertToTensor(_,"x","log","float32")};return ENGINE.runKernel(Log,_e)}const log$3=op({log_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function log1p_(_){const _e={x:convertToTensor(_,"x","log1p")};return ENGINE.runKernel(Log1p,_e)}const log1p$2=op({log1p_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function grad(_){return assert$1(isFunction$4(_),()=>"The f passed in grad(f) must be a function"),($,_e)=>{const et=convertToTensor($,"x","tf.grad","string_or_numeric"),tt=_e!=null?convertToTensor(_e,"dy","tf.grad"):null;return ENGINE.tidy(()=>{const{value:rt,grads:nt}=ENGINE.gradients(()=>_(et),[et],tt);return tt!=null&&assertShapesMatch(rt.shape,tt.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),checkGrads(nt),nt[0]})}}function grads(_){return assert$1(isFunction$4(_),()=>"The f passed in grads(f) must be a function"),($,_e)=>{assert$1(Array.isArray($),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const et=convertToTensorArray($,"args","tf.grads","string_or_numeric"),tt=_e!=null?convertToTensor(_e,"dy","tf.grads"):null;return ENGINE.tidy(()=>{const{value:rt,grads:nt}=ENGINE.gradients(()=>_(...et),et,tt);return tt!=null&&assertShapesMatch(rt.shape,tt.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),checkGrads(nt),nt})}}function valueAndGrad(_){return assert$1(isFunction$4(_),()=>"The f passed in valueAndGrad(f) must be a function"),($,_e)=>{assert$1($ instanceof Tensor,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),assert$1(_e==null||_e instanceof Tensor,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:et,value:tt}=ENGINE.gradients(()=>_($),[$],_e);return checkGrads(et),{grad:et[0],value:tt}}}function valueAndGrads(_){return assert$1(isFunction$4(_),()=>"The f passed in valueAndGrads(f) must be a function"),($,_e)=>{assert$1(Array.isArray($)&&$.every(tt=>tt instanceof Tensor),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),assert$1(_e==null||_e instanceof Tensor,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const et=ENGINE.gradients(()=>_(...$),$,_e);return _e!=null&&assertShapesMatch(et.value.shape,_e.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),checkGrads(et.grads),et}}function variableGrads(_,$){assert$1(isFunction$4(_),()=>"The f passed in variableGrads(f) must be a function"),assert$1($==null||Array.isArray($)&&$.every(at=>at instanceof Variable),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const _e=$!=null;if(!_e){$=[];for(const at in ENGINE.registeredVariables)$.push(ENGINE.registeredVariables[at])}const et=_e?$.filter(at=>!at.trainable):null,tt=$.length;$=$.filter(at=>at.trainable),assert$1($.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${tt} variables is trainable.`);const rt=!0,{value:nt,grads:it}=ENGINE.gradients(_,$,null,rt);assert$1(it.some(at=>at!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),assert$1(nt.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${nt.rank} tensor`);const st={};return $.forEach((at,ot)=>{it[ot]!=null&&(st[at.name]=it[ot])}),et!=null&&et.forEach(at=>st[at.name]=null),{value:nt,grads:st}}function customGrad(_){return ENGINE.customGrad(_)}function checkGrads(_){if(_.filter(_e=>_e==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function neg_(_){const _e={x:convertToTensor(_,"x","neg")};return ENGINE.runKernel(Neg,_e)}const neg$2=op({neg_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function softplus_(_){const _e={x:convertToTensor(_,"x","softplus")};return ENGINE.runKernel(Softplus$1,_e)}const softplus$2=op({softplus_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logSigmoid_(_){const $=convertToTensor(_,"x","logSigmoid");return customGrad(et=>({value:neg$2(softplus$2(neg$2(et))),gradFunc:nt=>mul(nt,sigmoid$2(neg$2(et)))}))($)}const logSigmoid=op({logSigmoid_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sub_(_,$){let _e=convertToTensor(_,"a","sub"),et=convertToTensor($,"b","sub");[_e,et]=makeTypesMatch(_e,et);const tt={a:_e,b:et};return ENGINE.runKernel(Sub,tt)}const sub$2=op({sub_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logSoftmax_(_,$=-1){const _e=convertToTensor(_,"logits","logSoftmax");if($===-1&&($=_e.rank-1),$!==_e.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${_e.rank} and axis was ${$}`);return customGrad((tt,rt)=>{const it=max$6(tt,$,!0),st=sub$2(tt,it),at=sub$2(cast$3(st,"float32"),log$3(sum$2(exp$3(st),$,!0)));return rt([at]),{value:at,gradFunc:(dt,ht)=>{const[yt]=ht,vt=!0,xt=exp$3(yt);return sub$2(dt,mul(sum$2(dt,$,vt),xt))}}})(_e)}const logSoftmax=op({logSoftmax_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logSumExp_(_,$=null,_e=!1){const et=convertToTensor(_,"x","logSumExp"),tt=parseAxisParam($,et.shape),rt=max$6(et,tt,!0),nt=sub$2(et,rt),it=exp$3(nt),st=sum$2(it,tt),at=log$3(st),ot=add$3(reshape$3(rt,at.shape),at);if(_e){const dt=expandShapeToKeepDim(ot.shape,tt);return reshape$3(ot,dt)}return ot}const logSumExp=op({logSumExp_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logicalAnd_(_,$){const _e=convertToTensor(_,"a","logicalAnd","bool"),et=convertToTensor($,"b","logicalAnd","bool");assertAndGetBroadcastShape(_e.shape,et.shape);const tt={a:_e,b:et};return ENGINE.runKernel(LogicalAnd,tt)}const logicalAnd$2=op({logicalAnd_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logicalNot_(_){const _e={x:convertToTensor(_,"x","logicalNot","bool")};return ENGINE.runKernel(LogicalNot,_e)}const logicalNot$2=op({logicalNot_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logicalOr_(_,$){const _e=convertToTensor(_,"a","logicalOr","bool"),et=convertToTensor($,"b","logicalOr","bool");assertAndGetBroadcastShape(_e.shape,et.shape);const tt={a:_e,b:et};return ENGINE.runKernel(LogicalOr,tt)}const logicalOr$2=op({logicalOr_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logicalXor_(_,$){const _e=convertToTensor(_,"a","logicalXor","bool"),et=convertToTensor($,"b","logicalXor","bool");return assertAndGetBroadcastShape(_e.shape,et.shape),logicalAnd$2(logicalOr$2(_,$),logicalNot$2(logicalAnd$2(_,$)))}const logicalXor=op({logicalXor_});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const INT32_MAX$1=2147483648;function searchSorted_(_,$,_e="left"){const et=convertToTensor(_,"sortedSequence","searchSorted"),tt=convertToTensor($,"values","searchSorted"),rt=et.shape[et.shape.length-1],nt=tt.shape[tt.shape.length-1],it=reshape$3(et,[-1,rt]),st=reshape$3(tt,[-1,nt]);if(it.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(it.shape[0]!==st.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(sizeFromShape(st.shape)>=INT32_MAX$1)throw new Error(`values tensor size must less than ${INT32_MAX$1}`);if(it.shape[1]>=INT32_MAX$1)throw new Error(`trailing dim_size must less than ${INT32_MAX$1} for int32 output type, was ${it.shape[1]}`);const at={sortedSequence:it,values:st},ot={side:_e};return ENGINE.runKernel(SearchSorted,at,ot)}const searchSorted$2=op({searchSorted_});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lowerBound$1(_,$){return searchSorted$2(_,$,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool_(_,$,_e,et,tt){const rt=convertToTensor(_,"x","maxPool"),nt=1;let it=rt,st=!1;rt.rank===3&&(st=!0,it=reshape$3(rt,[1,rt.shape[0],rt.shape[1],rt.shape[2]])),assert$1(it.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${it.rank}.`),assert$1(eitherStridesOrDilationsAreOne(_e,nt),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${_e} and dilations '${nt}'`),checkPadOnDimRoundingMode("maxPool",et,tt);const at={x:it},ot={filterSize:$,strides:_e,pad:et,dimRoundingMode:tt},dt=ENGINE.runKernel(MaxPool,at,ot);return st?reshape$3(dt,[dt.shape[1],dt.shape[2],dt.shape[3]]):dt}const maxPool$2=op({maxPool_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3d_(_,$=[1,1,1],_e,et,tt,rt="NDHWC"){const nt=convertToTensor(_,"x","maxPool3d");let it=nt,st=!1;nt.rank===4&&(st=!0,it=reshape$3(nt,[1,nt.shape[0],nt.shape[1],nt.shape[2],nt.shape[3]])),assert$1(it.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${it.rank}.`),assert$1(rt==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${rt}`),checkPadOnDimRoundingMode("maxPool3d",et,tt);const at={x:it},ot={filterSize:$,strides:_e,pad:et,dimRoundingMode:tt,dataFormat:rt},dt=ENGINE.runKernel(MaxPool3D,at,ot);return st?reshape$3(dt,[dt.shape[1],dt.shape[2],dt.shape[3],dt.shape[4]]):dt}const maxPool3d$1=op({maxPool3d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolWithArgmax_(_,$,_e,et,tt=!1){const nt={x:convertToTensor(_,"x","maxPoolWithArgmax")},it={filterSize:$,strides:_e,pad:et,includeBatchInIndex:tt},st=ENGINE.runKernel(MaxPoolWithArgmax,nt,it);return{result:st[0],indexes:st[1]}}const maxPoolWithArgmax=op({maxPoolWithArgmax_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maximum_(_,$){let _e=convertToTensor(_,"a","maximum"),et=convertToTensor($,"b","maximum");[_e,et]=makeTypesMatch(_e,et),_e.dtype==="bool"&&(_e=cast$3(_e,"int32"),et=cast$3(et,"int32")),assertAndGetBroadcastShape(_e.shape,et.shape);const tt={a:_e,b:et};return ENGINE.runKernel(Maximum$1,tt)}const maximum$3=op({maximum_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mean_(_,$=null,_e=!1){const tt={x:convertToTensor(_,"x","mean")},rt={axis:$,keepDims:_e};return ENGINE.runKernel(Mean,tt,rt)}const mean$1=op({mean_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zeros$2(_,$="float32"){if(assertNonNegativeIntegerDimensions(_),$==="complex64"){const et=zeros$2(_,"float32"),tt=zeros$2(_,"float32");return complex$2(et,tt)}const _e=makeZerosTypedArray(sizeFromShape(_),$);return ENGINE.makeTensor(_e,_,$)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ones$1(_,$="float32"){if(assertNonNegativeIntegerDimensions(_),$==="complex64"){const et=ones$1(_,"float32"),tt=zeros$2(_,"float32");return complex$2(et,tt)}const _e=makeOnesTypedArray(sizeFromShape(_),$);return ENGINE.makeTensor(_e,_,$)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function meshgrid(_,$,{indexing:_e="xy"}={}){if(_e!=="xy"&&_e!=="ij")throw new TypeError(`${_e} is not a valid third argument to meshgrid`);if(_===void 0)return[];let et=convertToTensor(_,"x","meshgrid",_ instanceof Tensor?_.dtype:"float32");if($===void 0)return[et];let tt=convertToTensor($,"y","meshgrid",$ instanceof Tensor?$.dtype:"float32");const rt=sizeFromShape(et.shape),nt=sizeFromShape(tt.shape);return _e==="xy"?(et=reshape$3(et,[1,-1]),tt=reshape$3(tt,[-1,1]),[matMul$1(ones$1([nt,1],et.dtype),et),matMul$1(tt,ones$1([1,rt],tt.dtype))]):(et=reshape$3(et,[-1,1]),tt=reshape$3(tt,[1,-1]),[matMul$1(et,ones$1([1,nt],et.dtype)),matMul$1(ones$1([rt,1],tt.dtype),tt)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function minimum_(_,$){let _e=convertToTensor(_,"a","minimum"),et=convertToTensor($,"b","minimum");[_e,et]=makeTypesMatch(_e,et),_e.dtype==="bool"&&(_e=cast$3(_e,"int32"),et=cast$3(et,"int32")),assertAndGetBroadcastShape(_e.shape,et.shape);const tt={a:_e,b:et};return ENGINE.runKernel(Minimum$1,tt)}const minimum$3=op({minimum_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mirrorPad_(_,$,_e){assert$1(_e==="reflect"||_e==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${_e}.`);const et=convertToTensor(_,"x","mirrorPad");if(et.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");assert$1($.length===et.rank,()=>`Padding doesn't match input. Must be ${et.rank}. Got ${$.length}.`);const tt=_e==="reflect"?1:0;for(let it=0;it<et.rank;it++)assert$1($[it].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),assert$1($[it][0]>=0&&$[it][0]<=et.shape[it]-tt&&$[it][1]>=0&&$[it][1]<=et.shape[it]-tt,()=>`Padding in dimension ${it} cannot be greater than or equal to ${et.shape[it]-tt} or less than 0 for input of shape ${et.shape}`);const rt={paddings:$,mode:_e},nt={x:et};return ENGINE.runKernel(MirrorPad,nt,rt)}const mirrorPad$1=op({mirrorPad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mod_(_,$){let _e=convertToTensor(_,"a","mod"),et=convertToTensor($,"b","mod");[_e,et]=makeTypesMatch(_e,et);const tt={a:_e,b:et};return ENGINE.runKernel(Mod,tt)}const mod$2=op({mod_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function moments_(_,$=null,_e=!1){_=convertToTensor(_,"x","moments");const et=parseAxisParam($,_.shape),tt=mean$1(_,et,_e);let rt=tt.shape;_e||(rt=expandShapeToKeepDim(tt.shape,et));const nt=square$3(sub$2(cast$3(_,"float32"),reshape$3(tt,rt))),it=mean$1(nt,et,_e);return{mean:tt,variance:it}}const moments=op({moments_});function multiRNNCell_(_,$,_e,et){const tt=convertToTensor($,"data","multiRNNCell"),rt=convertToTensorArray(_e,"c","multiRNNCell"),nt=convertToTensorArray(et,"h","multiRNNCell");let it=tt;const st=[];for(let dt=0;dt<_.length;dt++){const ht=_[dt](it,rt[dt],nt[dt]);st.push(ht[0]),st.push(ht[1]),it=ht[1]}const at=[],ot=[];for(let dt=0;dt<st.length;dt+=2)at.push(st[dt]),ot.push(st[dt+1]);return[at,ot]}const multiRNNCell=op({multiRNNCell_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function multinomial_(_,$,_e,et=!1){const tt=convertToTensor(_,"logits","multinomial"),rt=tt.size,nt=tt.rank;if(rt<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${rt}.`);if(nt>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${nt}`);_e=_e||Math.random();const st={logits:nt===1?reshape$3(tt,[1,-1]):tt},at={numSamples:$,seed:_e,normalized:et},ot=ENGINE.runKernel(Multinomial,st,at);return nt===1?reshape$3(ot,[ot.size]):ot}const multinomial$2=op({multinomial_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function notEqual_(_,$){let _e=convertToTensor(_,"a","notEqual","string_or_numeric"),et=convertToTensor($,"b","notEqual","string_or_numeric");[_e,et]=makeTypesMatch(_e,et),assertAndGetBroadcastShape(_e.shape,et.shape);const tt={a:_e,b:et};return ENGINE.runKernel(NotEqual,tt)}const notEqual$2=op({notEqual_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oneHot_(_,$,_e=1,et=0,tt="int32"){if($<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${$}`);const nt={indices:convertToTensor(_,"indices","oneHot","int32")},it={dtype:tt,depth:$,onValue:_e,offValue:et};return ENGINE.runKernel(OneHot,nt,it)}const oneHot$2=op({oneHot_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function onesLike_(_){const _e={x:convertToTensor(_,"x","onesLike")};return ENGINE.runKernel(OnesLike,_e)}const onesLike$2=op({onesLike_});function outerProduct_(_,$){const _e=convertToTensor(_,"v1","outerProduct"),et=convertToTensor($,"v2","outerProduct");assert$1(_e.rank===1&&et.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${_e.rank} and ${et.rank}.`);const tt=reshape$3(_e,[-1,1]),rt=reshape$3(et,[1,-1]);return matMul$1(tt,rt)}const outerProduct=op({outerProduct_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pad_(_,$,_e=0){const et=convertToTensor(_,"x","pad");if(et.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const tt={paddings:$,constantValue:_e},rt={x:et};return ENGINE.runKernel(PadV2,rt,tt)}const pad$1=op({pad_});function pad1d_(_,$,_e=0){return assert$1($.length===2,()=>"Invalid number of paddings. Must be length of 2."),pad$1(_,[$],_e)}const pad1d=op({pad1d_});function pad2d_(_,$,_e=0){return assert$1($.length===2&&$[0].length===2&&$[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),pad$1(_,$,_e)}const pad2d=op({pad2d_});function pad3d_(_,$,_e=0){return assert$1($.length===3&&$[0].length===2&&$[1].length===2&&$[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),pad$1(_,$,_e)}const pad3d=op({pad3d_});function pad4d_(_,$,_e=0){return assert$1($.length===4&&$[0].length===2&&$[1].length===2&&$[2].length===2&&$[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),pad$1(_,$,_e)}const pad4d=op({pad4d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function spaceToBatchND_(_,$,_e){const et=convertToTensor(_,"x","spaceToBatchND");assert$1(et.rank>=1+$.length,()=>`input rank ${et.rank} should be > than [blockShape] ${$.length}`),assert$1(_e.length===$.length,()=>`paddings.shape[0] ${_e.length} must be equal to [blockShape] ${$.length}`),assert$1(et.shape.reduce((nt,it,st)=>st>0&&st<=$.length?nt&&(it+_e[st-1][0]+_e[st-1][1])%$[st-1]===0:nt,!0),()=>`input spatial dimensions ${et.shape.slice(1)} with paddings ${_e.toString()} must be divisible by blockShapes ${$.toString()}`);const tt={x:et},rt={blockShape:$,paddings:_e};return ENGINE.runKernel(SpaceToBatchND,tt,rt)}const spaceToBatchND$2=op({spaceToBatchND_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pool_(_,$,_e,et,tt,rt,nt){tt==null&&(tt=[1,1]),rt==null&&(rt=1),et===0&&(et="valid");const it=convertToTensor(_,"x","maxPool");let st=it,at=!1;it.rank===3&&(at=!0,st=reshape$3(it,[1,it.shape[0],it.shape[1],it.shape[2]])),assert$1(eitherStridesOrDilationsAreOne(rt,tt),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${rt} and dilations '${tt}'`);const ot=computePool2DInfo(st.shape,$,rt,tt,et),dt=[ot.dilationHeight,ot.dilationWidth];let ht;et==="same"?ht=withSpaceToBatchBasePaddings([ot.filterHeight,ot.filterWidth],dt):ht=[[0,0],[0,0]];const yt=dt[0]===1&&dt[1]===1,[vt,xt]=requiredSpaceToBatchPaddings([ot.inHeight,ot.inWidth],dt,ht),wt=yt?et:"valid",Et=yt?st:spaceToBatchND$2(st,dt,vt),jt=(_e==="avg"?()=>avgPool$2(Et,$,rt,wt,nt):()=>maxPool$2(Et,$,rt,wt,nt))(),kt=yt?jt:batchToSpaceND$2(jt,dt,xt);return at?reshape$3(kt,[kt.shape[1],kt.shape[2],kt.shape[3]]):kt}function requiredSpaceToBatchPaddings(_,$,_e){const et=_e.map(ot=>ot[0]),tt=_e.map(ot=>ot[1]),rt=_.concat(et,tt),nt=$.map((ot,dt)=>(ot-rt[dt]%ot)%ot),it=tt.map((ot,dt)=>ot+nt[dt]),st=$.map((ot,dt)=>[et[dt],it[dt]]),at=$.map((ot,dt)=>[0,nt[dt]]);return[st,at]}function withSpaceToBatchBasePaddings(_,$){const et=_.map((nt,it)=>nt+(nt-1)*($[it]-1)).map(nt=>nt-1),tt=et.map(nt=>Math.floor(nt/2)),rt=et.map((nt,it)=>nt-tt[it]);return et.map((nt,it)=>[tt[it],rt[it]])}const pool$1=op({pool_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function prelu_(_,$){const _e=convertToTensor(_,"x","prelu"),et=convertToTensor($,"alpha","prelu"),tt={x:_e,alpha:et};return ENGINE.runKernel(Prelu,tt)}const prelu$3=op({prelu_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function prod_(_,$=null,_e=!1){let et=convertToTensor(_,"x","prod");et.dtype==="bool"&&(et=cast$3(et,"int32"));const tt={x:et},rt={axis:$,keepDims:_e};return ENGINE.runKernel(Prod,tt,rt)}const prod$2=op({prod_});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function raggedGather_(_,$,_e,et){const tt=_.map((ot,dt)=>convertToTensor(ot,`tensors${dt}`,"raggedGather","int32")),rt=convertToTensor($,"paramsDenseValues","raggedGather"),nt=convertToTensor(_e,"indices","raggedGather","int32"),it={paramsNestedSplits:tt,paramsDenseValues:rt,indices:nt},st={outputRaggedRank:et},at=ENGINE.runKernel(RaggedGather,it,st);return{outputNestedSplits:at.slice(0,at.length-1),outputDenseValues:at[at.length-1]}}const raggedGather$2=op({raggedGather_});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function raggedRange_(_,$,_e){const et=convertToTensor(_,"starts","raggedRange"),tt=convertToTensor($,"limits","raggedRange",et.dtype),rt=convertToTensor(_e,"deltas","raggedRange",et.dtype),nt={starts:et,limits:tt,deltas:rt},it=ENGINE.runKernel(RaggedRange,nt);return{rtNestedSplits:it[0],rtDenseValues:it[1]}}const raggedRange$2=op({raggedRange_});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function raggedTensorToTensor_(_,$,_e,et,tt){const rt=convertToTensor(_,"shape","raggedTensorToTensor","int32"),nt=convertToTensor($,"values","raggedTensorToTensor"),it=convertToTensor(_e,"defaultValue","raggedTensorToTensor",nt.dtype),st=et.map((dt,ht)=>convertToTensor(dt,`tensors${ht}`,"raggedTensorToTensor","int32")),at={shape:rt,values:nt,defaultValue:it,rowPartitionTensors:st},ot={rowPartitionTypes:tt};return ENGINE.runKernel(RaggedTensorToTensor,at,ot)}const raggedTensorToTensor$2=op({raggedTensorToTensor_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rand_(_,$,_e){assertNonNegativeIntegerDimensions(_);const et=sizeFromShape(_);let tt=null;if(_e==null||_e==="float32")tt=new Float32Array(et);else if(_e==="int32")tt=new Int32Array(et);else if(_e==="bool")tt=new Uint8Array(et);else throw new Error(`Unknown data type ${_e}`);for(let rt=0;rt<et;rt++)tt[rt]=$();return ENGINE.makeTensor(tt,_,_e)}const rand=op({rand_});var alea$1={exports:{}};alea$1.exports;(function(_){(function($,_e,et){function tt(st){var at=this,ot=it();at.next=function(){var dt=2091639*at.s0+at.c*23283064365386963e-26;return at.s0=at.s1,at.s1=at.s2,at.s2=dt-(at.c=dt|0)},at.c=1,at.s0=ot(" "),at.s1=ot(" "),at.s2=ot(" "),at.s0-=ot(st),at.s0<0&&(at.s0+=1),at.s1-=ot(st),at.s1<0&&(at.s1+=1),at.s2-=ot(st),at.s2<0&&(at.s2+=1),ot=null}function rt(st,at){return at.c=st.c,at.s0=st.s0,at.s1=st.s1,at.s2=st.s2,at}function nt(st,at){var ot=new tt(st),dt=at&&at.state,ht=ot.next;return ht.int32=function(){return ot.next()*4294967296|0},ht.double=function(){return ht()+(ht()*2097152|0)*11102230246251565e-32},ht.quick=ht,dt&&(typeof dt=="object"&&rt(dt,ot),ht.state=function(){return rt(ot,{})}),ht}function it(){var st=4022871197,at=function(ot){ot=String(ot);for(var dt=0;dt<ot.length;dt++){st+=ot.charCodeAt(dt);var ht=.02519603282416938*st;st=ht>>>0,ht-=st,ht*=st,st=ht>>>0,ht-=st,st+=ht*4294967296}return(st>>>0)*23283064365386963e-26};return at}_e&&_e.exports?_e.exports=nt:this.alea=nt})(commonjsGlobal,_)})(alea$1);var aleaExports=alea$1.exports,xor128$1={exports:{}};xor128$1.exports;(function(_){(function($,_e,et){function tt(it){var st=this,at="";st.x=0,st.y=0,st.z=0,st.w=0,st.next=function(){var dt=st.x^st.x<<11;return st.x=st.y,st.y=st.z,st.z=st.w,st.w^=st.w>>>19^dt^dt>>>8},it===(it|0)?st.x=it:at+=it;for(var ot=0;ot<at.length+64;ot++)st.x^=at.charCodeAt(ot)|0,st.next()}function rt(it,st){return st.x=it.x,st.y=it.y,st.z=it.z,st.w=it.w,st}function nt(it,st){var at=new tt(it),ot=st&&st.state,dt=function(){return(at.next()>>>0)/4294967296};return dt.double=function(){do var ht=at.next()>>>11,yt=(at.next()>>>0)/4294967296,vt=(ht+yt)/(1<<21);while(vt===0);return vt},dt.int32=at.next,dt.quick=dt,ot&&(typeof ot=="object"&&rt(ot,at),dt.state=function(){return rt(at,{})}),dt}_e&&_e.exports?_e.exports=nt:this.xor128=nt})(commonjsGlobal,_)})(xor128$1);var xor128Exports=xor128$1.exports,xorwow$1={exports:{}};xorwow$1.exports;(function(_){(function($,_e,et){function tt(it){var st=this,at="";st.next=function(){var dt=st.x^st.x>>>2;return st.x=st.y,st.y=st.z,st.z=st.w,st.w=st.v,(st.d=st.d+362437|0)+(st.v=st.v^st.v<<4^(dt^dt<<1))|0},st.x=0,st.y=0,st.z=0,st.w=0,st.v=0,it===(it|0)?st.x=it:at+=it;for(var ot=0;ot<at.length+64;ot++)st.x^=at.charCodeAt(ot)|0,ot==at.length&&(st.d=st.x<<10^st.x>>>4),st.next()}function rt(it,st){return st.x=it.x,st.y=it.y,st.z=it.z,st.w=it.w,st.v=it.v,st.d=it.d,st}function nt(it,st){var at=new tt(it),ot=st&&st.state,dt=function(){return(at.next()>>>0)/4294967296};return dt.double=function(){do var ht=at.next()>>>11,yt=(at.next()>>>0)/4294967296,vt=(ht+yt)/(1<<21);while(vt===0);return vt},dt.int32=at.next,dt.quick=dt,ot&&(typeof ot=="object"&&rt(ot,at),dt.state=function(){return rt(at,{})}),dt}_e&&_e.exports?_e.exports=nt:this.xorwow=nt})(commonjsGlobal,_)})(xorwow$1);var xorwowExports=xorwow$1.exports,xorshift7$1={exports:{}};xorshift7$1.exports;(function(_){(function($,_e,et){function tt(it){var st=this;st.next=function(){var ot=st.x,dt=st.i,ht,yt;return ht=ot[dt],ht^=ht>>>7,yt=ht^ht<<24,ht=ot[dt+1&7],yt^=ht^ht>>>10,ht=ot[dt+3&7],yt^=ht^ht>>>3,ht=ot[dt+4&7],yt^=ht^ht<<7,ht=ot[dt+7&7],ht=ht^ht<<13,yt^=ht^ht<<9,ot[dt]=yt,st.i=dt+1&7,yt};function at(ot,dt){var ht,yt=[];if(dt===(dt|0))yt[0]=dt;else for(dt=""+dt,ht=0;ht<dt.length;++ht)yt[ht&7]=yt[ht&7]<<15^dt.charCodeAt(ht)+yt[ht+1&7]<<13;for(;yt.length<8;)yt.push(0);for(ht=0;ht<8&&yt[ht]===0;++ht);for(ht==8?yt[7]=-1:yt[ht],ot.x=yt,ot.i=0,ht=256;ht>0;--ht)ot.next()}at(st,it)}function rt(it,st){return st.x=it.x.slice(),st.i=it.i,st}function nt(it,st){it==null&&(it=+new Date);var at=new tt(it),ot=st&&st.state,dt=function(){return(at.next()>>>0)/4294967296};return dt.double=function(){do var ht=at.next()>>>11,yt=(at.next()>>>0)/4294967296,vt=(ht+yt)/(1<<21);while(vt===0);return vt},dt.int32=at.next,dt.quick=dt,ot&&(ot.x&&rt(ot,at),dt.state=function(){return rt(at,{})}),dt}_e&&_e.exports?_e.exports=nt:this.xorshift7=nt})(commonjsGlobal,_)})(xorshift7$1);var xorshift7Exports=xorshift7$1.exports,xor4096$1={exports:{}};xor4096$1.exports;(function(_){(function($,_e,et){function tt(it){var st=this;st.next=function(){var ot=st.w,dt=st.X,ht=st.i,yt,vt;return st.w=ot=ot+1640531527|0,vt=dt[ht+34&127],yt=dt[ht=ht+1&127],vt^=vt<<13,yt^=yt<<17,vt^=vt>>>15,yt^=yt>>>12,vt=dt[ht]=vt^yt,st.i=ht,vt+(ot^ot>>>16)|0};function at(ot,dt){var ht,yt,vt,xt,wt,Et=[],At=128;for(dt===(dt|0)?(yt=dt,dt=null):(dt=dt+"\0",yt=0,At=Math.max(At,dt.length)),vt=0,xt=-32;xt<At;++xt)dt&&(yt^=dt.charCodeAt((xt+32)%dt.length)),xt===0&&(wt=yt),yt^=yt<<10,yt^=yt>>>15,yt^=yt<<4,yt^=yt>>>13,xt>=0&&(wt=wt+1640531527|0,ht=Et[xt&127]^=yt+wt,vt=ht==0?vt+1:0);for(vt>=128&&(Et[(dt&&dt.length||0)&127]=-1),vt=127,xt=4*128;xt>0;--xt)yt=Et[vt+34&127],ht=Et[vt=vt+1&127],yt^=yt<<13,ht^=ht<<17,yt^=yt>>>15,ht^=ht>>>12,Et[vt]=yt^ht;ot.w=wt,ot.X=Et,ot.i=vt}at(st,it)}function rt(it,st){return st.i=it.i,st.w=it.w,st.X=it.X.slice(),st}function nt(it,st){it==null&&(it=+new Date);var at=new tt(it),ot=st&&st.state,dt=function(){return(at.next()>>>0)/4294967296};return dt.double=function(){do var ht=at.next()>>>11,yt=(at.next()>>>0)/4294967296,vt=(ht+yt)/(1<<21);while(vt===0);return vt},dt.int32=at.next,dt.quick=dt,ot&&(ot.X&&rt(ot,at),dt.state=function(){return rt(at,{})}),dt}_e&&_e.exports?_e.exports=nt:this.xor4096=nt})(commonjsGlobal,_)})(xor4096$1);var xor4096Exports=xor4096$1.exports,tychei$1={exports:{}};tychei$1.exports;(function(_){(function($,_e,et){function tt(it){var st=this,at="";st.next=function(){var dt=st.b,ht=st.c,yt=st.d,vt=st.a;return dt=dt<<25^dt>>>7^ht,ht=ht-yt|0,yt=yt<<24^yt>>>8^vt,vt=vt-dt|0,st.b=dt=dt<<20^dt>>>12^ht,st.c=ht=ht-yt|0,st.d=yt<<16^ht>>>16^vt,st.a=vt-dt|0},st.a=0,st.b=0,st.c=-1640531527,st.d=1367130551,it===Math.floor(it)?(st.a=it/4294967296|0,st.b=it|0):at+=it;for(var ot=0;ot<at.length+20;ot++)st.b^=at.charCodeAt(ot)|0,st.next()}function rt(it,st){return st.a=it.a,st.b=it.b,st.c=it.c,st.d=it.d,st}function nt(it,st){var at=new tt(it),ot=st&&st.state,dt=function(){return(at.next()>>>0)/4294967296};return dt.double=function(){do var ht=at.next()>>>11,yt=(at.next()>>>0)/4294967296,vt=(ht+yt)/(1<<21);while(vt===0);return vt},dt.int32=at.next,dt.quick=dt,ot&&(typeof ot=="object"&&rt(ot,at),dt.state=function(){return rt(at,{})}),dt}_e&&_e.exports?_e.exports=nt:this.tychei=nt})(commonjsGlobal,_)})(tychei$1);var tycheiExports=tychei$1.exports,seedrandom$1={exports:{}},cryptoBrowserify={},browser$c={exports:{}},safeBuffer$1={exports:{}};const require$$0$2=getAugmentedNamespace(dist);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer$1;function requireSafeBuffer$1(){return hasRequiredSafeBuffer$1||(hasRequiredSafeBuffer$1=1,function(_,$){var _e=require$$0$2,et=_e.Buffer;function tt(nt,it){for(var st in nt)it[st]=nt[st]}et.from&&et.alloc&&et.allocUnsafe&&et.allocUnsafeSlow?_.exports=_e:(tt(_e,$),$.Buffer=rt);function rt(nt,it,st){return et(nt,it,st)}rt.prototype=Object.create(et.prototype),tt(et,rt),rt.from=function(nt,it,st){if(typeof nt=="number")throw new TypeError("Argument must not be a number");return et(nt,it,st)},rt.alloc=function(nt,it,st){if(typeof nt!="number")throw new TypeError("Argument must be a number");var at=et(nt);return it!==void 0?typeof st=="string"?at.fill(it,st):at.fill(it):at.fill(0),at},rt.allocUnsafe=function(nt){if(typeof nt!="number")throw new TypeError("Argument must be a number");return et(nt)},rt.allocUnsafeSlow=function(nt){if(typeof nt!="number")throw new TypeError("Argument must be a number");return _e.SlowBuffer(nt)}}(safeBuffer$1,safeBuffer$1.exports)),safeBuffer$1.exports}var hasRequiredBrowser$b;function requireBrowser$b(){if(hasRequiredBrowser$b)return browser$c.exports;hasRequiredBrowser$b=1;var _=65536,$=4294967295;function _e(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var et=requireSafeBuffer$1().Buffer,tt=commonjsGlobal.crypto||commonjsGlobal.msCrypto;tt&&tt.getRandomValues?browser$c.exports=rt:browser$c.exports=_e;function rt(nt,it){if(nt>$)throw new RangeError("requested too many random bytes");var st=et.allocUnsafe(nt);if(nt>0)if(nt>_)for(var at=0;at<nt;at+=_)tt.getRandomValues(st.slice(at,at+_));else tt.getRandomValues(st);return typeof it=="function"?process$1.nextTick(function(){it(null,st)}):st}return browser$c.exports}var events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var _=typeof Reflect=="object"?Reflect:null,$=_&&typeof _.apply=="function"?_.apply:function(Lt,Bt,Gt){return Function.prototype.apply.call(Lt,Bt,Gt)},_e;_&&typeof _.ownKeys=="function"?_e=_.ownKeys:Object.getOwnPropertySymbols?_e=function(Lt){return Object.getOwnPropertyNames(Lt).concat(Object.getOwnPropertySymbols(Lt))}:_e=function(Lt){return Object.getOwnPropertyNames(Lt)};function et(kt){console&&console.warn&&console.warn(kt)}var tt=Number.isNaN||function(Lt){return Lt!==Lt};function rt(){rt.init.call(this)}events.exports=rt,events.exports.once=Et,rt.EventEmitter=rt,rt.prototype._events=void 0,rt.prototype._eventsCount=0,rt.prototype._maxListeners=void 0;var nt=10;function it(kt){if(typeof kt!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof kt)}Object.defineProperty(rt,"defaultMaxListeners",{enumerable:!0,get:function(){return nt},set:function(kt){if(typeof kt!="number"||kt<0||tt(kt))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+kt+".");nt=kt}}),rt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},rt.prototype.setMaxListeners=function(Lt){if(typeof Lt!="number"||Lt<0||tt(Lt))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Lt+".");return this._maxListeners=Lt,this};function st(kt){return kt._maxListeners===void 0?rt.defaultMaxListeners:kt._maxListeners}rt.prototype.getMaxListeners=function(){return st(this)},rt.prototype.emit=function(Lt){for(var Bt=[],Gt=1;Gt<arguments.length;Gt++)Bt.push(arguments[Gt]);var er=Lt==="error",tr=this._events;if(tr!==void 0)er=er&&tr.error===void 0;else if(!er)return!1;if(er){var ar;if(Bt.length>0&&(ar=Bt[0]),ar instanceof Error)throw ar;var Mt=new Error("Unhandled error."+(ar?" ("+ar.message+")":""));throw Mt.context=ar,Mt}var lt=tr[Lt];if(lt===void 0)return!1;if(typeof lt=="function")$(lt,this,Bt);else for(var mt=lt.length,gt=vt(lt,mt),Gt=0;Gt<mt;++Gt)$(gt[Gt],this,Bt);return!0};function at(kt,Lt,Bt,Gt){var er,tr,ar;if(it(Bt),tr=kt._events,tr===void 0?(tr=kt._events=Object.create(null),kt._eventsCount=0):(tr.newListener!==void 0&&(kt.emit("newListener",Lt,Bt.listener?Bt.listener:Bt),tr=kt._events),ar=tr[Lt]),ar===void 0)ar=tr[Lt]=Bt,++kt._eventsCount;else if(typeof ar=="function"?ar=tr[Lt]=Gt?[Bt,ar]:[ar,Bt]:Gt?ar.unshift(Bt):ar.push(Bt),er=st(kt),er>0&&ar.length>er&&!ar.warned){ar.warned=!0;var Mt=new Error("Possible EventEmitter memory leak detected. "+ar.length+" "+String(Lt)+" listeners added. Use emitter.setMaxListeners() to increase limit");Mt.name="MaxListenersExceededWarning",Mt.emitter=kt,Mt.type=Lt,Mt.count=ar.length,et(Mt)}return kt}rt.prototype.addListener=function(Lt,Bt){return at(this,Lt,Bt,!1)},rt.prototype.on=rt.prototype.addListener,rt.prototype.prependListener=function(Lt,Bt){return at(this,Lt,Bt,!0)};function ot(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function dt(kt,Lt,Bt){var Gt={fired:!1,wrapFn:void 0,target:kt,type:Lt,listener:Bt},er=ot.bind(Gt);return er.listener=Bt,Gt.wrapFn=er,er}rt.prototype.once=function(Lt,Bt){return it(Bt),this.on(Lt,dt(this,Lt,Bt)),this},rt.prototype.prependOnceListener=function(Lt,Bt){return it(Bt),this.prependListener(Lt,dt(this,Lt,Bt)),this},rt.prototype.removeListener=function(Lt,Bt){var Gt,er,tr,ar,Mt;if(it(Bt),er=this._events,er===void 0)return this;if(Gt=er[Lt],Gt===void 0)return this;if(Gt===Bt||Gt.listener===Bt)--this._eventsCount===0?this._events=Object.create(null):(delete er[Lt],er.removeListener&&this.emit("removeListener",Lt,Gt.listener||Bt));else if(typeof Gt!="function"){for(tr=-1,ar=Gt.length-1;ar>=0;ar--)if(Gt[ar]===Bt||Gt[ar].listener===Bt){Mt=Gt[ar].listener,tr=ar;break}if(tr<0)return this;tr===0?Gt.shift():xt(Gt,tr),Gt.length===1&&(er[Lt]=Gt[0]),er.removeListener!==void 0&&this.emit("removeListener",Lt,Mt||Bt)}return this},rt.prototype.off=rt.prototype.removeListener,rt.prototype.removeAllListeners=function(Lt){var Bt,Gt,er;if(Gt=this._events,Gt===void 0)return this;if(Gt.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Gt[Lt]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Gt[Lt]),this;if(arguments.length===0){var tr=Object.keys(Gt),ar;for(er=0;er<tr.length;++er)ar=tr[er],ar!=="removeListener"&&this.removeAllListeners(ar);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(Bt=Gt[Lt],typeof Bt=="function")this.removeListener(Lt,Bt);else if(Bt!==void 0)for(er=Bt.length-1;er>=0;er--)this.removeListener(Lt,Bt[er]);return this};function ht(kt,Lt,Bt){var Gt=kt._events;if(Gt===void 0)return[];var er=Gt[Lt];return er===void 0?[]:typeof er=="function"?Bt?[er.listener||er]:[er]:Bt?wt(er):vt(er,er.length)}rt.prototype.listeners=function(Lt){return ht(this,Lt,!0)},rt.prototype.rawListeners=function(Lt){return ht(this,Lt,!1)},rt.listenerCount=function(kt,Lt){return typeof kt.listenerCount=="function"?kt.listenerCount(Lt):yt.call(kt,Lt)},rt.prototype.listenerCount=yt;function yt(kt){var Lt=this._events;if(Lt!==void 0){var Bt=Lt[kt];if(typeof Bt=="function")return 1;if(Bt!==void 0)return Bt.length}return 0}rt.prototype.eventNames=function(){return this._eventsCount>0?_e(this._events):[]};function vt(kt,Lt){for(var Bt=new Array(Lt),Gt=0;Gt<Lt;++Gt)Bt[Gt]=kt[Gt];return Bt}function xt(kt,Lt){for(;Lt+1<kt.length;Lt++)kt[Lt]=kt[Lt+1];kt.pop()}function wt(kt){for(var Lt=new Array(kt.length),Bt=0;Bt<Lt.length;++Bt)Lt[Bt]=kt[Bt].listener||kt[Bt];return Lt}function Et(kt,Lt){return new Promise(function(Bt,Gt){function er(ar){kt.removeListener(Lt,tr),Gt(ar)}function tr(){typeof kt.removeListener=="function"&&kt.removeListener("error",er),Bt([].slice.call(arguments))}jt(kt,Lt,tr,{once:!0}),Lt!=="error"&&At(kt,er,{once:!0})})}function At(kt,Lt,Bt){typeof kt.on=="function"&&jt(kt,"error",Lt,Bt)}function jt(kt,Lt,Bt,Gt){if(typeof kt.on=="function")Gt.once?kt.once(Lt,Bt):kt.on(Lt,Bt);else if(typeof kt.addEventListener=="function")kt.addEventListener(Lt,function er(tr){Gt.once&&kt.removeEventListener(Lt,er),Bt(tr)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof kt)}return events.exports}var streamBrowser$1,hasRequiredStreamBrowser$1;function requireStreamBrowser$1(){return hasRequiredStreamBrowser$1||(hasRequiredStreamBrowser$1=1,streamBrowser$1=requireEvents().EventEmitter),streamBrowser$1}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function _(vt,xt){var wt=Object.keys(vt);if(Object.getOwnPropertySymbols){var Et=Object.getOwnPropertySymbols(vt);xt&&(Et=Et.filter(function(At){return Object.getOwnPropertyDescriptor(vt,At).enumerable})),wt.push.apply(wt,Et)}return wt}function $(vt){for(var xt=1;xt<arguments.length;xt++){var wt=arguments[xt]!=null?arguments[xt]:{};xt%2?_(Object(wt),!0).forEach(function(Et){_e(vt,Et,wt[Et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(vt,Object.getOwnPropertyDescriptors(wt)):_(Object(wt)).forEach(function(Et){Object.defineProperty(vt,Et,Object.getOwnPropertyDescriptor(wt,Et))})}return vt}function _e(vt,xt,wt){return xt=nt(xt),xt in vt?Object.defineProperty(vt,xt,{value:wt,enumerable:!0,configurable:!0,writable:!0}):vt[xt]=wt,vt}function et(vt,xt){if(!(vt instanceof xt))throw new TypeError("Cannot call a class as a function")}function tt(vt,xt){for(var wt=0;wt<xt.length;wt++){var Et=xt[wt];Et.enumerable=Et.enumerable||!1,Et.configurable=!0,"value"in Et&&(Et.writable=!0),Object.defineProperty(vt,nt(Et.key),Et)}}function rt(vt,xt,wt){return xt&&tt(vt.prototype,xt),Object.defineProperty(vt,"prototype",{writable:!1}),vt}function nt(vt){var xt=it(vt,"string");return typeof xt=="symbol"?xt:String(xt)}function it(vt,xt){if(typeof vt!="object"||vt===null)return vt;var wt=vt[Symbol.toPrimitive];if(wt!==void 0){var Et=wt.call(vt,xt||"default");if(typeof Et!="object")return Et;throw new TypeError("@@toPrimitive must return a primitive value.")}return(xt==="string"?String:Number)(vt)}var st=require$$0$2,at=st.Buffer,ot=requireUtil$1(),dt=ot.inspect,ht=dt&&dt.custom||"inspect";function yt(vt,xt,wt){at.prototype.copy.call(vt,xt,wt)}return buffer_list=function(){function vt(){et(this,vt),this.head=null,this.tail=null,this.length=0}return rt(vt,[{key:"push",value:function(wt){var Et={data:wt,next:null};this.length>0?this.tail.next=Et:this.head=Et,this.tail=Et,++this.length}},{key:"unshift",value:function(wt){var Et={data:wt,next:this.head};this.length===0&&(this.tail=Et),this.head=Et,++this.length}},{key:"shift",value:function(){if(this.length!==0){var wt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,wt}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(wt){if(this.length===0)return"";for(var Et=this.head,At=""+Et.data;Et=Et.next;)At+=wt+Et.data;return At}},{key:"concat",value:function(wt){if(this.length===0)return at.alloc(0);for(var Et=at.allocUnsafe(wt>>>0),At=this.head,jt=0;At;)yt(At.data,Et,jt),jt+=At.data.length,At=At.next;return Et}},{key:"consume",value:function(wt,Et){var At;return wt<this.head.data.length?(At=this.head.data.slice(0,wt),this.head.data=this.head.data.slice(wt)):wt===this.head.data.length?At=this.shift():At=Et?this._getString(wt):this._getBuffer(wt),At}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(wt){var Et=this.head,At=1,jt=Et.data;for(wt-=jt.length;Et=Et.next;){var kt=Et.data,Lt=wt>kt.length?kt.length:wt;if(Lt===kt.length?jt+=kt:jt+=kt.slice(0,wt),wt-=Lt,wt===0){Lt===kt.length?(++At,Et.next?this.head=Et.next:this.head=this.tail=null):(this.head=Et,Et.data=kt.slice(Lt));break}++At}return this.length-=At,jt}},{key:"_getBuffer",value:function(wt){var Et=at.allocUnsafe(wt),At=this.head,jt=1;for(At.data.copy(Et),wt-=At.data.length;At=At.next;){var kt=At.data,Lt=wt>kt.length?kt.length:wt;if(kt.copy(Et,Et.length-wt,0,Lt),wt-=Lt,wt===0){Lt===kt.length?(++jt,At.next?this.head=At.next:this.head=this.tail=null):(this.head=At,At.data=kt.slice(Lt));break}++jt}return this.length-=jt,Et}},{key:ht,value:function(wt,Et){return dt(this,$($({},Et),{},{depth:0,customInspect:!1}))}}]),vt}(),buffer_list}var destroy_1$1,hasRequiredDestroy$1;function requireDestroy$1(){if(hasRequiredDestroy$1)return destroy_1$1;hasRequiredDestroy$1=1;function _(nt,it){var st=this,at=this._readableState&&this._readableState.destroyed,ot=this._writableState&&this._writableState.destroyed;return at||ot?(it?it(nt):nt&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(tt,this,nt)):process$1.nextTick(tt,this,nt)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(nt||null,function(dt){!it&&dt?st._writableState?st._writableState.errorEmitted?process$1.nextTick(_e,st):(st._writableState.errorEmitted=!0,process$1.nextTick($,st,dt)):process$1.nextTick($,st,dt):it?(process$1.nextTick(_e,st),it(dt)):process$1.nextTick(_e,st)}),this)}function $(nt,it){tt(nt,it),_e(nt)}function _e(nt){nt._writableState&&!nt._writableState.emitClose||nt._readableState&&!nt._readableState.emitClose||nt.emit("close")}function et(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function tt(nt,it){nt.emit("error",it)}function rt(nt,it){var st=nt._readableState,at=nt._writableState;st&&st.autoDestroy||at&&at.autoDestroy?nt.destroy(it):nt.emit("error",it)}return destroy_1$1={destroy:_,undestroy:et,errorOrDestroy:rt},destroy_1$1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function _(it,st){it.prototype=Object.create(st.prototype),it.prototype.constructor=it,it.__proto__=st}var $={};function _e(it,st,at){at||(at=Error);function ot(ht,yt,vt){return typeof st=="string"?st:st(ht,yt,vt)}var dt=function(ht){_(yt,ht);function yt(vt,xt,wt){return ht.call(this,ot(vt,xt,wt))||this}return yt}(at);dt.prototype.name=at.name,dt.prototype.code=it,$[it]=dt}function et(it,st){if(Array.isArray(it)){var at=it.length;return it=it.map(function(ot){return String(ot)}),at>2?"one of ".concat(st," ").concat(it.slice(0,at-1).join(", "),", or ")+it[at-1]:at===2?"one of ".concat(st," ").concat(it[0]," or ").concat(it[1]):"of ".concat(st," ").concat(it[0])}else return"of ".concat(st," ").concat(String(it))}function tt(it,st,at){return it.substr(0,st.length)===st}function rt(it,st,at){return(at===void 0||at>it.length)&&(at=it.length),it.substring(at-st.length,at)===st}function nt(it,st,at){return typeof at!="number"&&(at=0),at+st.length>it.length?!1:it.indexOf(st,at)!==-1}return _e("ERR_INVALID_OPT_VALUE",function(it,st){return'The value "'+st+'" is invalid for option "'+it+'"'},TypeError),_e("ERR_INVALID_ARG_TYPE",function(it,st,at){var ot;typeof st=="string"&&tt(st,"not ")?(ot="must not be",st=st.replace(/^not /,"")):ot="must be";var dt;if(rt(it," argument"))dt="The ".concat(it," ").concat(ot," ").concat(et(st,"type"));else{var ht=nt(it,".")?"property":"argument";dt='The "'.concat(it,'" ').concat(ht," ").concat(ot," ").concat(et(st,"type"))}return dt+=". Received type ".concat(typeof at),dt},TypeError),_e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),_e("ERR_METHOD_NOT_IMPLEMENTED",function(it){return"The "+it+" method is not implemented"}),_e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),_e("ERR_STREAM_DESTROYED",function(it){return"Cannot call "+it+" after a stream was destroyed"}),_e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),_e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),_e("ERR_STREAM_WRITE_AFTER_END","write after end"),_e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),_e("ERR_UNKNOWN_ENCODING",function(it){return"Unknown encoding: "+it},TypeError),_e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=$,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var _=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function $(et,tt,rt){return et.highWaterMark!=null?et.highWaterMark:tt?et[rt]:null}function _e(et,tt,rt,nt){var it=$(tt,nt,rt);if(it!=null){if(!(isFinite(it)&&Math.floor(it)===it)||it<0){var st=nt?rt:"highWaterMark";throw new _(st,it)}return Math.floor(it)}return et.objectMode?16:16*1024}return state={getHighWaterMark:_e},state}var browser$b,hasRequiredBrowser$a;function requireBrowser$a(){if(hasRequiredBrowser$a)return browser$b;hasRequiredBrowser$a=1,browser$b=_;function _(_e,et){if($("noDeprecation"))return _e;var tt=!1;function rt(){if(!tt){if($("throwDeprecation"))throw new Error(et);$("traceDeprecation")?console.trace(et):console.warn(et),tt=!0}return _e.apply(this,arguments)}return rt}function $(_e){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var et=commonjsGlobal.localStorage[_e];return et==null?!1:String(et).toLowerCase()==="true"}return browser$b}var _stream_writable$1,hasRequired_stream_writable$1;function require_stream_writable$1(){if(hasRequired_stream_writable$1)return _stream_writable$1;hasRequired_stream_writable$1=1,_stream_writable$1=er;function _(cr){var rr=this;this.next=null,this.entry=null,this.finish=function(){ur(rr,cr)}}var $;er.WritableState=Bt;var _e={deprecate:requireBrowser$a()},et=requireStreamBrowser$1(),tt=require$$0$2.Buffer,rt=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function nt(cr){return tt.from(cr)}function it(cr){return tt.isBuffer(cr)||cr instanceof rt}var st=requireDestroy$1(),at=requireState(),ot=at.getHighWaterMark,dt=requireErrorsBrowser().codes,ht=dt.ERR_INVALID_ARG_TYPE,yt=dt.ERR_METHOD_NOT_IMPLEMENTED,vt=dt.ERR_MULTIPLE_CALLBACK,xt=dt.ERR_STREAM_CANNOT_PIPE,wt=dt.ERR_STREAM_DESTROYED,Et=dt.ERR_STREAM_NULL_VALUES,At=dt.ERR_STREAM_WRITE_AFTER_END,jt=dt.ERR_UNKNOWN_ENCODING,kt=st.errorOrDestroy;requireInherits_browser()(er,et);function Lt(){}function Bt(cr,rr,fr){$=$||require_stream_duplex$1(),cr=cr||{},typeof fr!="boolean"&&(fr=rr instanceof $),this.objectMode=!!cr.objectMode,fr&&(this.objectMode=this.objectMode||!!cr.writableObjectMode),this.highWaterMark=ot(this,cr,"writableHighWaterMark",fr),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var dr=cr.decodeStrings===!1;this.decodeStrings=!dr,this.defaultEncoding=cr.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(gr){St(rr,gr)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=cr.emitClose!==!1,this.autoDestroy=!!cr.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new _(this)}Bt.prototype.getBuffer=function(){for(var rr=this.bufferedRequest,fr=[];rr;)fr.push(rr),rr=rr.next;return fr},function(){try{Object.defineProperty(Bt.prototype,"buffer",{get:_e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Gt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Gt=Function.prototype[Symbol.hasInstance],Object.defineProperty(er,Symbol.hasInstance,{value:function(rr){return Gt.call(this,rr)?!0:this!==er?!1:rr&&rr._writableState instanceof Bt}})):Gt=function(rr){return rr instanceof this};function er(cr){$=$||require_stream_duplex$1();var rr=this instanceof $;if(!rr&&!Gt.call(er,this))return new er(cr);this._writableState=new Bt(cr,this,rr),this.writable=!0,cr&&(typeof cr.write=="function"&&(this._write=cr.write),typeof cr.writev=="function"&&(this._writev=cr.writev),typeof cr.destroy=="function"&&(this._destroy=cr.destroy),typeof cr.final=="function"&&(this._final=cr.final)),et.call(this)}er.prototype.pipe=function(){kt(this,new xt)};function tr(cr,rr){var fr=new At;kt(cr,fr),process$1.nextTick(rr,fr)}function ar(cr,rr,fr,dr){var gr;return fr===null?gr=new Et:typeof fr!="string"&&!rr.objectMode&&(gr=new ht("chunk",["string","Buffer"],fr)),gr?(kt(cr,gr),process$1.nextTick(dr,gr),!1):!0}er.prototype.write=function(cr,rr,fr){var dr=this._writableState,gr=!1,hr=!dr.objectMode&&it(cr);return hr&&!tt.isBuffer(cr)&&(cr=nt(cr)),typeof rr=="function"&&(fr=rr,rr=null),hr?rr="buffer":rr||(rr=dr.defaultEncoding),typeof fr!="function"&&(fr=Lt),dr.ending?tr(this,fr):(hr||ar(this,dr,cr,fr))&&(dr.pendingcb++,gr=lt(this,dr,hr,cr,rr,fr)),gr},er.prototype.cork=function(){this._writableState.corked++},er.prototype.uncork=function(){var cr=this._writableState;cr.corked&&(cr.corked--,!cr.writing&&!cr.corked&&!cr.bufferProcessing&&cr.bufferedRequest&&Tt(this,cr))},er.prototype.setDefaultEncoding=function(rr){if(typeof rr=="string"&&(rr=rr.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((rr+"").toLowerCase())>-1))throw new jt(rr);return this._writableState.defaultEncoding=rr,this},Object.defineProperty(er.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Mt(cr,rr,fr){return!cr.objectMode&&cr.decodeStrings!==!1&&typeof rr=="string"&&(rr=tt.from(rr,fr)),rr}Object.defineProperty(er.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function lt(cr,rr,fr,dr,gr,hr){if(!fr){var or=Mt(rr,dr,gr);dr!==or&&(fr=!0,gr="buffer",dr=or)}var br=rr.objectMode?1:dr.length;rr.length+=br;var Rr=rr.length<rr.highWaterMark;if(Rr||(rr.needDrain=!0),rr.writing||rr.corked){var _r=rr.lastBufferedRequest;rr.lastBufferedRequest={chunk:dr,encoding:gr,isBuf:fr,callback:hr,next:null},_r?_r.next=rr.lastBufferedRequest:rr.bufferedRequest=rr.lastBufferedRequest,rr.bufferedRequestCount+=1}else mt(cr,rr,!1,br,dr,gr,hr);return Rr}function mt(cr,rr,fr,dr,gr,hr,or){rr.writelen=dr,rr.writecb=or,rr.writing=!0,rr.sync=!0,rr.destroyed?rr.onwrite(new wt("write")):fr?cr._writev(gr,rr.onwrite):cr._write(gr,hr,rr.onwrite),rr.sync=!1}function gt(cr,rr,fr,dr,gr){--rr.pendingcb,fr?(process$1.nextTick(gr,dr),process$1.nextTick(Yt,cr,rr),cr._writableState.errorEmitted=!0,kt(cr,dr)):(gr(dr),cr._writableState.errorEmitted=!0,kt(cr,dr),Yt(cr,rr))}function bt(cr){cr.writing=!1,cr.writecb=null,cr.length-=cr.writelen,cr.writelen=0}function St(cr,rr){var fr=cr._writableState,dr=fr.sync,gr=fr.writecb;if(typeof gr!="function")throw new vt;if(bt(fr),rr)gt(cr,fr,dr,rr,gr);else{var hr=pt(fr)||cr.destroyed;!hr&&!fr.corked&&!fr.bufferProcessing&&fr.bufferedRequest&&Tt(cr,fr),dr?process$1.nextTick(Nt,cr,fr,hr,gr):Nt(cr,fr,hr,gr)}}function Nt(cr,rr,fr,dr){fr||Pt(cr,rr),rr.pendingcb--,dr(),Yt(cr,rr)}function Pt(cr,rr){rr.length===0&&rr.needDrain&&(rr.needDrain=!1,cr.emit("drain"))}function Tt(cr,rr){rr.bufferProcessing=!0;var fr=rr.bufferedRequest;if(cr._writev&&fr&&fr.next){var dr=rr.bufferedRequestCount,gr=new Array(dr),hr=rr.corkedRequestsFree;hr.entry=fr;for(var or=0,br=!0;fr;)gr[or]=fr,fr.isBuf||(br=!1),fr=fr.next,or+=1;gr.allBuffers=br,mt(cr,rr,!0,rr.length,gr,"",hr.finish),rr.pendingcb++,rr.lastBufferedRequest=null,hr.next?(rr.corkedRequestsFree=hr.next,hr.next=null):rr.corkedRequestsFree=new _(rr),rr.bufferedRequestCount=0}else{for(;fr;){var Rr=fr.chunk,_r=fr.encoding,Er=fr.callback,Hr=rr.objectMode?1:Rr.length;if(mt(cr,rr,!1,Hr,Rr,_r,Er),fr=fr.next,rr.bufferedRequestCount--,rr.writing)break}fr===null&&(rr.lastBufferedRequest=null)}rr.bufferedRequest=fr,rr.bufferProcessing=!1}er.prototype._write=function(cr,rr,fr){fr(new yt("_write()"))},er.prototype._writev=null,er.prototype.end=function(cr,rr,fr){var dr=this._writableState;return typeof cr=="function"?(fr=cr,cr=null,rr=null):typeof rr=="function"&&(fr=rr,rr=null),cr!=null&&this.write(cr,rr),dr.corked&&(dr.corked=1,this.uncork()),dr.ending||ir(this,dr,fr),this},Object.defineProperty(er.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function pt(cr){return cr.ending&&cr.length===0&&cr.bufferedRequest===null&&!cr.finished&&!cr.writing}function Rt(cr,rr){cr._final(function(fr){rr.pendingcb--,fr&&kt(cr,fr),rr.prefinished=!0,cr.emit("prefinish"),Yt(cr,rr)})}function zt(cr,rr){!rr.prefinished&&!rr.finalCalled&&(typeof cr._final=="function"&&!rr.destroyed?(rr.pendingcb++,rr.finalCalled=!0,process$1.nextTick(Rt,cr,rr)):(rr.prefinished=!0,cr.emit("prefinish")))}function Yt(cr,rr){var fr=pt(rr);if(fr&&(zt(cr,rr),rr.pendingcb===0&&(rr.finished=!0,cr.emit("finish"),rr.autoDestroy))){var dr=cr._readableState;(!dr||dr.autoDestroy&&dr.endEmitted)&&cr.destroy()}return fr}function ir(cr,rr,fr){rr.ending=!0,Yt(cr,rr),fr&&(rr.finished?process$1.nextTick(fr):cr.once("finish",fr)),rr.ended=!0,cr.writable=!1}function ur(cr,rr,fr){var dr=cr.entry;for(cr.entry=null;dr;){var gr=dr.callback;rr.pendingcb--,gr(fr),dr=dr.next}rr.corkedRequestsFree.next=cr}return Object.defineProperty(er.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(rr){this._writableState&&(this._writableState.destroyed=rr)}}),er.prototype.destroy=st.destroy,er.prototype._undestroy=st.undestroy,er.prototype._destroy=function(cr,rr){rr(cr)},_stream_writable$1}var _stream_duplex$1,hasRequired_stream_duplex$1;function require_stream_duplex$1(){if(hasRequired_stream_duplex$1)return _stream_duplex$1;hasRequired_stream_duplex$1=1;var _=Object.keys||function(at){var ot=[];for(var dt in at)ot.push(dt);return ot};_stream_duplex$1=nt;var $=require_stream_readable$1(),_e=require_stream_writable$1();requireInherits_browser()(nt,$);for(var et=_(_e.prototype),tt=0;tt<et.length;tt++){var rt=et[tt];nt.prototype[rt]||(nt.prototype[rt]=_e.prototype[rt])}function nt(at){if(!(this instanceof nt))return new nt(at);$.call(this,at),_e.call(this,at),this.allowHalfOpen=!0,at&&(at.readable===!1&&(this.readable=!1),at.writable===!1&&(this.writable=!1),at.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",it)))}Object.defineProperty(nt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(nt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(nt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function it(){this._writableState.ended||process$1.nextTick(st,this)}function st(at){at.end()}return Object.defineProperty(nt.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(ot){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=ot,this._writableState.destroyed=ot)}}),_stream_duplex$1}var string_decoder={},hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var _=requireSafeBuffer$1().Buffer,$=_.isEncoding||function(Et){switch(Et=""+Et,Et&&Et.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _e(Et){if(!Et)return"utf8";for(var At;;)switch(Et){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return Et;default:if(At)return;Et=(""+Et).toLowerCase(),At=!0}}function et(Et){var At=_e(Et);if(typeof At!="string"&&(_.isEncoding===$||!$(Et)))throw new Error("Unknown encoding: "+Et);return At||Et}string_decoder.StringDecoder=tt;function tt(Et){this.encoding=et(Et);var At;switch(this.encoding){case"utf16le":this.text=dt,this.end=ht,At=4;break;case"utf8":this.fillLast=st,At=4;break;case"base64":this.text=yt,this.end=vt,At=3;break;default:this.write=xt,this.end=wt;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=_.allocUnsafe(At)}tt.prototype.write=function(Et){if(Et.length===0)return"";var At,jt;if(this.lastNeed){if(At=this.fillLast(Et),At===void 0)return"";jt=this.lastNeed,this.lastNeed=0}else jt=0;return jt<Et.length?At?At+this.text(Et,jt):this.text(Et,jt):At||""},tt.prototype.end=ot,tt.prototype.text=at,tt.prototype.fillLast=function(Et){if(this.lastNeed<=Et.length)return Et.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);Et.copy(this.lastChar,this.lastTotal-this.lastNeed,0,Et.length),this.lastNeed-=Et.length};function rt(Et){return Et<=127?0:Et>>5===6?2:Et>>4===14?3:Et>>3===30?4:Et>>6===2?-1:-2}function nt(Et,At,jt){var kt=At.length-1;if(kt<jt)return 0;var Lt=rt(At[kt]);return Lt>=0?(Lt>0&&(Et.lastNeed=Lt-1),Lt):--kt<jt||Lt===-2?0:(Lt=rt(At[kt]),Lt>=0?(Lt>0&&(Et.lastNeed=Lt-2),Lt):--kt<jt||Lt===-2?0:(Lt=rt(At[kt]),Lt>=0?(Lt>0&&(Lt===2?Lt=0:Et.lastNeed=Lt-3),Lt):0))}function it(Et,At,jt){if((At[0]&192)!==128)return Et.lastNeed=0,"�";if(Et.lastNeed>1&&At.length>1){if((At[1]&192)!==128)return Et.lastNeed=1,"�";if(Et.lastNeed>2&&At.length>2&&(At[2]&192)!==128)return Et.lastNeed=2,"�"}}function st(Et){var At=this.lastTotal-this.lastNeed,jt=it(this,Et);if(jt!==void 0)return jt;if(this.lastNeed<=Et.length)return Et.copy(this.lastChar,At,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);Et.copy(this.lastChar,At,0,Et.length),this.lastNeed-=Et.length}function at(Et,At){var jt=nt(this,Et,At);if(!this.lastNeed)return Et.toString("utf8",At);this.lastTotal=jt;var kt=Et.length-(jt-this.lastNeed);return Et.copy(this.lastChar,0,kt),Et.toString("utf8",At,kt)}function ot(Et){var At=Et&&Et.length?this.write(Et):"";return this.lastNeed?At+"�":At}function dt(Et,At){if((Et.length-At)%2===0){var jt=Et.toString("utf16le",At);if(jt){var kt=jt.charCodeAt(jt.length-1);if(kt>=55296&&kt<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=Et[Et.length-2],this.lastChar[1]=Et[Et.length-1],jt.slice(0,-1)}return jt}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=Et[Et.length-1],Et.toString("utf16le",At,Et.length-1)}function ht(Et){var At=Et&&Et.length?this.write(Et):"";if(this.lastNeed){var jt=this.lastTotal-this.lastNeed;return At+this.lastChar.toString("utf16le",0,jt)}return At}function yt(Et,At){var jt=(Et.length-At)%3;return jt===0?Et.toString("base64",At):(this.lastNeed=3-jt,this.lastTotal=3,jt===1?this.lastChar[0]=Et[Et.length-1]:(this.lastChar[0]=Et[Et.length-2],this.lastChar[1]=Et[Et.length-1]),Et.toString("base64",At,Et.length-jt))}function vt(Et){var At=Et&&Et.length?this.write(Et):"";return this.lastNeed?At+this.lastChar.toString("base64",0,3-this.lastNeed):At}function xt(Et){return Et.toString(this.encoding)}function wt(Et){return Et&&Et.length?this.write(Et):""}return string_decoder}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var _=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function $(rt){var nt=!1;return function(){if(!nt){nt=!0;for(var it=arguments.length,st=new Array(it),at=0;at<it;at++)st[at]=arguments[at];rt.apply(this,st)}}}function _e(){}function et(rt){return rt.setHeader&&typeof rt.abort=="function"}function tt(rt,nt,it){if(typeof nt=="function")return tt(rt,null,nt);nt||(nt={}),it=$(it||_e);var st=nt.readable||nt.readable!==!1&&rt.readable,at=nt.writable||nt.writable!==!1&&rt.writable,ot=function(){rt.writable||ht()},dt=rt._writableState&&rt._writableState.finished,ht=function(){at=!1,dt=!0,st||it.call(rt)},yt=rt._readableState&&rt._readableState.endEmitted,vt=function(){st=!1,yt=!0,at||it.call(rt)},xt=function(jt){it.call(rt,jt)},wt=function(){var jt;if(st&&!yt)return(!rt._readableState||!rt._readableState.ended)&&(jt=new _),it.call(rt,jt);if(at&&!dt)return(!rt._writableState||!rt._writableState.ended)&&(jt=new _),it.call(rt,jt)},Et=function(){rt.req.on("finish",ht)};return et(rt)?(rt.on("complete",ht),rt.on("abort",wt),rt.req?Et():rt.on("request",Et)):at&&!rt._writableState&&(rt.on("end",ot),rt.on("close",ot)),rt.on("end",vt),rt.on("finish",ht),nt.error!==!1&&rt.on("error",xt),rt.on("close",wt),function(){rt.removeListener("complete",ht),rt.removeListener("abort",wt),rt.removeListener("request",Et),rt.req&&rt.req.removeListener("finish",ht),rt.removeListener("end",ot),rt.removeListener("close",ot),rt.removeListener("finish",ht),rt.removeListener("end",vt),rt.removeListener("error",xt),rt.removeListener("close",wt)}}return endOfStream=tt,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var _;function $(jt,kt,Lt){return kt=_e(kt),kt in jt?Object.defineProperty(jt,kt,{value:Lt,enumerable:!0,configurable:!0,writable:!0}):jt[kt]=Lt,jt}function _e(jt){var kt=et(jt,"string");return typeof kt=="symbol"?kt:String(kt)}function et(jt,kt){if(typeof jt!="object"||jt===null)return jt;var Lt=jt[Symbol.toPrimitive];if(Lt!==void 0){var Bt=Lt.call(jt,kt||"default");if(typeof Bt!="object")return Bt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(kt==="string"?String:Number)(jt)}var tt=requireEndOfStream(),rt=Symbol("lastResolve"),nt=Symbol("lastReject"),it=Symbol("error"),st=Symbol("ended"),at=Symbol("lastPromise"),ot=Symbol("handlePromise"),dt=Symbol("stream");function ht(jt,kt){return{value:jt,done:kt}}function yt(jt){var kt=jt[rt];if(kt!==null){var Lt=jt[dt].read();Lt!==null&&(jt[at]=null,jt[rt]=null,jt[nt]=null,kt(ht(Lt,!1)))}}function vt(jt){process$1.nextTick(yt,jt)}function xt(jt,kt){return function(Lt,Bt){jt.then(function(){if(kt[st]){Lt(ht(void 0,!0));return}kt[ot](Lt,Bt)},Bt)}}var wt=Object.getPrototypeOf(function(){}),Et=Object.setPrototypeOf((_={get stream(){return this[dt]},next:function(){var kt=this,Lt=this[it];if(Lt!==null)return Promise.reject(Lt);if(this[st])return Promise.resolve(ht(void 0,!0));if(this[dt].destroyed)return new Promise(function(tr,ar){process$1.nextTick(function(){kt[it]?ar(kt[it]):tr(ht(void 0,!0))})});var Bt=this[at],Gt;if(Bt)Gt=new Promise(xt(Bt,this));else{var er=this[dt].read();if(er!==null)return Promise.resolve(ht(er,!1));Gt=new Promise(this[ot])}return this[at]=Gt,Gt}},$(_,Symbol.asyncIterator,function(){return this}),$(_,"return",function(){var kt=this;return new Promise(function(Lt,Bt){kt[dt].destroy(null,function(Gt){if(Gt){Bt(Gt);return}Lt(ht(void 0,!0))})})}),_),wt),At=function(kt){var Lt,Bt=Object.create(Et,(Lt={},$(Lt,dt,{value:kt,writable:!0}),$(Lt,rt,{value:null,writable:!0}),$(Lt,nt,{value:null,writable:!0}),$(Lt,it,{value:null,writable:!0}),$(Lt,st,{value:kt._readableState.endEmitted,writable:!0}),$(Lt,ot,{value:function(er,tr){var ar=Bt[dt].read();ar?(Bt[at]=null,Bt[rt]=null,Bt[nt]=null,er(ht(ar,!1))):(Bt[rt]=er,Bt[nt]=tr)},writable:!0}),Lt));return Bt[at]=null,tt(kt,function(Gt){if(Gt&&Gt.code!=="ERR_STREAM_PREMATURE_CLOSE"){var er=Bt[nt];er!==null&&(Bt[at]=null,Bt[rt]=null,Bt[nt]=null,er(Gt)),Bt[it]=Gt;return}var tr=Bt[rt];tr!==null&&(Bt[at]=null,Bt[rt]=null,Bt[nt]=null,tr(ht(void 0,!0))),Bt[st]=!0}),kt.on("readable",vt.bind(null,Bt)),Bt};return async_iterator=At,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable$1,hasRequired_stream_readable$1;function require_stream_readable$1(){if(hasRequired_stream_readable$1)return _stream_readable$1;hasRequired_stream_readable$1=1,_stream_readable$1=tr;var _;tr.ReadableState=er,requireEvents().EventEmitter;var $=function(or,br){return or.listeners(br).length},_e=requireStreamBrowser$1(),et=require$$0$2.Buffer,tt=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function rt(hr){return et.from(hr)}function nt(hr){return et.isBuffer(hr)||hr instanceof tt}var it=requireUtil$1(),st;it&&it.debuglog?st=it.debuglog("stream"):st=function(){};var at=requireBuffer_list(),ot=requireDestroy$1(),dt=requireState(),ht=dt.getHighWaterMark,yt=requireErrorsBrowser().codes,vt=yt.ERR_INVALID_ARG_TYPE,xt=yt.ERR_STREAM_PUSH_AFTER_EOF,wt=yt.ERR_METHOD_NOT_IMPLEMENTED,Et=yt.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,At,jt,kt;requireInherits_browser()(tr,_e);var Lt=ot.errorOrDestroy,Bt=["error","close","destroy","pause","resume"];function Gt(hr,or,br){if(typeof hr.prependListener=="function")return hr.prependListener(or,br);!hr._events||!hr._events[or]?hr.on(or,br):Array.isArray(hr._events[or])?hr._events[or].unshift(br):hr._events[or]=[br,hr._events[or]]}function er(hr,or,br){_=_||require_stream_duplex$1(),hr=hr||{},typeof br!="boolean"&&(br=or instanceof _),this.objectMode=!!hr.objectMode,br&&(this.objectMode=this.objectMode||!!hr.readableObjectMode),this.highWaterMark=ht(this,hr,"readableHighWaterMark",br),this.buffer=new at,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=hr.emitClose!==!1,this.autoDestroy=!!hr.autoDestroy,this.destroyed=!1,this.defaultEncoding=hr.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,hr.encoding&&(At||(At=requireString_decoder().StringDecoder),this.decoder=new At(hr.encoding),this.encoding=hr.encoding)}function tr(hr){if(_=_||require_stream_duplex$1(),!(this instanceof tr))return new tr(hr);var or=this instanceof _;this._readableState=new er(hr,this,or),this.readable=!0,hr&&(typeof hr.read=="function"&&(this._read=hr.read),typeof hr.destroy=="function"&&(this._destroy=hr.destroy)),_e.call(this)}Object.defineProperty(tr.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(or){this._readableState&&(this._readableState.destroyed=or)}}),tr.prototype.destroy=ot.destroy,tr.prototype._undestroy=ot.undestroy,tr.prototype._destroy=function(hr,or){or(hr)},tr.prototype.push=function(hr,or){var br=this._readableState,Rr;return br.objectMode?Rr=!0:typeof hr=="string"&&(or=or||br.defaultEncoding,or!==br.encoding&&(hr=et.from(hr,or),or=""),Rr=!0),ar(this,hr,or,!1,Rr)},tr.prototype.unshift=function(hr){return ar(this,hr,null,!0,!1)};function ar(hr,or,br,Rr,_r){st("readableAddChunk",or);var Er=hr._readableState;if(or===null)Er.reading=!1,St(hr,Er);else{var Hr;if(_r||(Hr=lt(Er,or)),Hr)Lt(hr,Hr);else if(Er.objectMode||or&&or.length>0)if(typeof or!="string"&&!Er.objectMode&&Object.getPrototypeOf(or)!==et.prototype&&(or=rt(or)),Rr)Er.endEmitted?Lt(hr,new Et):Mt(hr,Er,or,!0);else if(Er.ended)Lt(hr,new xt);else{if(Er.destroyed)return!1;Er.reading=!1,Er.decoder&&!br?(or=Er.decoder.write(or),Er.objectMode||or.length!==0?Mt(hr,Er,or,!1):Tt(hr,Er)):Mt(hr,Er,or,!1)}else Rr||(Er.reading=!1,Tt(hr,Er))}return!Er.ended&&(Er.length<Er.highWaterMark||Er.length===0)}function Mt(hr,or,br,Rr){or.flowing&&or.length===0&&!or.sync?(or.awaitDrain=0,hr.emit("data",br)):(or.length+=or.objectMode?1:br.length,Rr?or.buffer.unshift(br):or.buffer.push(br),or.needReadable&&Nt(hr)),Tt(hr,or)}function lt(hr,or){var br;return!nt(or)&&typeof or!="string"&&or!==void 0&&!hr.objectMode&&(br=new vt("chunk",["string","Buffer","Uint8Array"],or)),br}tr.prototype.isPaused=function(){return this._readableState.flowing===!1},tr.prototype.setEncoding=function(hr){At||(At=requireString_decoder().StringDecoder);var or=new At(hr);this._readableState.decoder=or,this._readableState.encoding=this._readableState.decoder.encoding;for(var br=this._readableState.buffer.head,Rr="";br!==null;)Rr+=or.write(br.data),br=br.next;return this._readableState.buffer.clear(),Rr!==""&&this._readableState.buffer.push(Rr),this._readableState.length=Rr.length,this};var mt=1073741824;function gt(hr){return hr>=mt?hr=mt:(hr--,hr|=hr>>>1,hr|=hr>>>2,hr|=hr>>>4,hr|=hr>>>8,hr|=hr>>>16,hr++),hr}function bt(hr,or){return hr<=0||or.length===0&&or.ended?0:or.objectMode?1:hr!==hr?or.flowing&&or.length?or.buffer.head.data.length:or.length:(hr>or.highWaterMark&&(or.highWaterMark=gt(hr)),hr<=or.length?hr:or.ended?or.length:(or.needReadable=!0,0))}tr.prototype.read=function(hr){st("read",hr),hr=parseInt(hr,10);var or=this._readableState,br=hr;if(hr!==0&&(or.emittedReadable=!1),hr===0&&or.needReadable&&((or.highWaterMark!==0?or.length>=or.highWaterMark:or.length>0)||or.ended))return st("read: emitReadable",or.length,or.ended),or.length===0&&or.ended?fr(this):Nt(this),null;if(hr=bt(hr,or),hr===0&&or.ended)return or.length===0&&fr(this),null;var Rr=or.needReadable;st("need readable",Rr),(or.length===0||or.length-hr<or.highWaterMark)&&(Rr=!0,st("length less than watermark",Rr)),or.ended||or.reading?(Rr=!1,st("reading or ended",Rr)):Rr&&(st("do read"),or.reading=!0,or.sync=!0,or.length===0&&(or.needReadable=!0),this._read(or.highWaterMark),or.sync=!1,or.reading||(hr=bt(br,or)));var _r;return hr>0?_r=rr(hr,or):_r=null,_r===null?(or.needReadable=or.length<=or.highWaterMark,hr=0):(or.length-=hr,or.awaitDrain=0),or.length===0&&(or.ended||(or.needReadable=!0),br!==hr&&or.ended&&fr(this)),_r!==null&&this.emit("data",_r),_r};function St(hr,or){if(st("onEofChunk"),!or.ended){if(or.decoder){var br=or.decoder.end();br&&br.length&&(or.buffer.push(br),or.length+=or.objectMode?1:br.length)}or.ended=!0,or.sync?Nt(hr):(or.needReadable=!1,or.emittedReadable||(or.emittedReadable=!0,Pt(hr)))}}function Nt(hr){var or=hr._readableState;st("emitReadable",or.needReadable,or.emittedReadable),or.needReadable=!1,or.emittedReadable||(st("emitReadable",or.flowing),or.emittedReadable=!0,process$1.nextTick(Pt,hr))}function Pt(hr){var or=hr._readableState;st("emitReadable_",or.destroyed,or.length,or.ended),!or.destroyed&&(or.length||or.ended)&&(hr.emit("readable"),or.emittedReadable=!1),or.needReadable=!or.flowing&&!or.ended&&or.length<=or.highWaterMark,cr(hr)}function Tt(hr,or){or.readingMore||(or.readingMore=!0,process$1.nextTick(pt,hr,or))}function pt(hr,or){for(;!or.reading&&!or.ended&&(or.length<or.highWaterMark||or.flowing&&or.length===0);){var br=or.length;if(st("maybeReadMore read 0"),hr.read(0),br===or.length)break}or.readingMore=!1}tr.prototype._read=function(hr){Lt(this,new wt("_read()"))},tr.prototype.pipe=function(hr,or){var br=this,Rr=this._readableState;switch(Rr.pipesCount){case 0:Rr.pipes=hr;break;case 1:Rr.pipes=[Rr.pipes,hr];break;default:Rr.pipes.push(hr);break}Rr.pipesCount+=1,st("pipe count=%d opts=%j",Rr.pipesCount,or);var _r=(!or||or.end!==!1)&&hr!==process$1.stdout&&hr!==process$1.stderr,Er=_r?xr:nn;Rr.endEmitted?process$1.nextTick(Er):br.once("end",Er),hr.on("unpipe",Hr);function Hr(Mr,Lr){st("onunpipe"),Mr===br&&Lr&&Lr.hasUnpiped===!1&&(Lr.hasUnpiped=!0,$r())}function xr(){st("onend"),hr.end()}var yr=Rt(br);hr.on("drain",yr);var Ar=!1;function $r(){st("cleanup"),hr.removeListener("close",Cr),hr.removeListener("finish",Nr),hr.removeListener("drain",yr),hr.removeListener("error",jr),hr.removeListener("unpipe",Hr),br.removeListener("end",xr),br.removeListener("end",nn),br.removeListener("data",Tr),Ar=!0,Rr.awaitDrain&&(!hr._writableState||hr._writableState.needDrain)&&yr()}br.on("data",Tr);function Tr(Mr){st("ondata");var Lr=hr.write(Mr);st("dest.write",Lr),Lr===!1&&((Rr.pipesCount===1&&Rr.pipes===hr||Rr.pipesCount>1&&gr(Rr.pipes,hr)!==-1)&&!Ar&&(st("false write response, pause",Rr.awaitDrain),Rr.awaitDrain++),br.pause())}function jr(Mr){st("onerror",Mr),nn(),hr.removeListener("error",jr),$(hr,"error")===0&&Lt(hr,Mr)}Gt(hr,"error",jr);function Cr(){hr.removeListener("finish",Nr),nn()}hr.once("close",Cr);function Nr(){st("onfinish"),hr.removeListener("close",Cr),nn()}hr.once("finish",Nr);function nn(){st("unpipe"),br.unpipe(hr)}return hr.emit("pipe",br),Rr.flowing||(st("pipe resume"),br.resume()),hr};function Rt(hr){return function(){var br=hr._readableState;st("pipeOnDrain",br.awaitDrain),br.awaitDrain&&br.awaitDrain--,br.awaitDrain===0&&$(hr,"data")&&(br.flowing=!0,cr(hr))}}tr.prototype.unpipe=function(hr){var or=this._readableState,br={hasUnpiped:!1};if(or.pipesCount===0)return this;if(or.pipesCount===1)return hr&&hr!==or.pipes?this:(hr||(hr=or.pipes),or.pipes=null,or.pipesCount=0,or.flowing=!1,hr&&hr.emit("unpipe",this,br),this);if(!hr){var Rr=or.pipes,_r=or.pipesCount;or.pipes=null,or.pipesCount=0,or.flowing=!1;for(var Er=0;Er<_r;Er++)Rr[Er].emit("unpipe",this,{hasUnpiped:!1});return this}var Hr=gr(or.pipes,hr);return Hr===-1?this:(or.pipes.splice(Hr,1),or.pipesCount-=1,or.pipesCount===1&&(or.pipes=or.pipes[0]),hr.emit("unpipe",this,br),this)},tr.prototype.on=function(hr,or){var br=_e.prototype.on.call(this,hr,or),Rr=this._readableState;return hr==="data"?(Rr.readableListening=this.listenerCount("readable")>0,Rr.flowing!==!1&&this.resume()):hr==="readable"&&!Rr.endEmitted&&!Rr.readableListening&&(Rr.readableListening=Rr.needReadable=!0,Rr.flowing=!1,Rr.emittedReadable=!1,st("on readable",Rr.length,Rr.reading),Rr.length?Nt(this):Rr.reading||process$1.nextTick(Yt,this)),br},tr.prototype.addListener=tr.prototype.on,tr.prototype.removeListener=function(hr,or){var br=_e.prototype.removeListener.call(this,hr,or);return hr==="readable"&&process$1.nextTick(zt,this),br},tr.prototype.removeAllListeners=function(hr){var or=_e.prototype.removeAllListeners.apply(this,arguments);return(hr==="readable"||hr===void 0)&&process$1.nextTick(zt,this),or};function zt(hr){var or=hr._readableState;or.readableListening=hr.listenerCount("readable")>0,or.resumeScheduled&&!or.paused?or.flowing=!0:hr.listenerCount("data")>0&&hr.resume()}function Yt(hr){st("readable nexttick read 0"),hr.read(0)}tr.prototype.resume=function(){var hr=this._readableState;return hr.flowing||(st("resume"),hr.flowing=!hr.readableListening,ir(this,hr)),hr.paused=!1,this};function ir(hr,or){or.resumeScheduled||(or.resumeScheduled=!0,process$1.nextTick(ur,hr,or))}function ur(hr,or){st("resume",or.reading),or.reading||hr.read(0),or.resumeScheduled=!1,hr.emit("resume"),cr(hr),or.flowing&&!or.reading&&hr.read(0)}tr.prototype.pause=function(){return st("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(st("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function cr(hr){var or=hr._readableState;for(st("flow",or.flowing);or.flowing&&hr.read()!==null;);}tr.prototype.wrap=function(hr){var or=this,br=this._readableState,Rr=!1;hr.on("end",function(){if(st("wrapped end"),br.decoder&&!br.ended){var Hr=br.decoder.end();Hr&&Hr.length&&or.push(Hr)}or.push(null)}),hr.on("data",function(Hr){if(st("wrapped data"),br.decoder&&(Hr=br.decoder.write(Hr)),!(br.objectMode&&Hr==null)&&!(!br.objectMode&&(!Hr||!Hr.length))){var xr=or.push(Hr);xr||(Rr=!0,hr.pause())}});for(var _r in hr)this[_r]===void 0&&typeof hr[_r]=="function"&&(this[_r]=function(xr){return function(){return hr[xr].apply(hr,arguments)}}(_r));for(var Er=0;Er<Bt.length;Er++)hr.on(Bt[Er],this.emit.bind(this,Bt[Er]));return this._read=function(Hr){st("wrapped _read",Hr),Rr&&(Rr=!1,hr.resume())},this},typeof Symbol=="function"&&(tr.prototype[Symbol.asyncIterator]=function(){return jt===void 0&&(jt=requireAsync_iterator()),jt(this)}),Object.defineProperty(tr.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(tr.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(tr.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(or){this._readableState&&(this._readableState.flowing=or)}}),tr._fromList=rr,Object.defineProperty(tr.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function rr(hr,or){if(or.length===0)return null;var br;return or.objectMode?br=or.buffer.shift():!hr||hr>=or.length?(or.decoder?br=or.buffer.join(""):or.buffer.length===1?br=or.buffer.first():br=or.buffer.concat(or.length),or.buffer.clear()):br=or.buffer.consume(hr,or.decoder),br}function fr(hr){var or=hr._readableState;st("endReadable",or.endEmitted),or.endEmitted||(or.ended=!0,process$1.nextTick(dr,or,hr))}function dr(hr,or){if(st("endReadableNT",hr.endEmitted,hr.length),!hr.endEmitted&&hr.length===0&&(hr.endEmitted=!0,or.readable=!1,or.emit("end"),hr.autoDestroy)){var br=or._writableState;(!br||br.autoDestroy&&br.finished)&&or.destroy()}}typeof Symbol=="function"&&(tr.from=function(hr,or){return kt===void 0&&(kt=requireFromBrowser()),kt(tr,hr,or)});function gr(hr,or){for(var br=0,Rr=hr.length;br<Rr;br++)if(hr[br]===or)return br;return-1}return _stream_readable$1}var _stream_transform$1,hasRequired_stream_transform$1;function require_stream_transform$1(){if(hasRequired_stream_transform$1)return _stream_transform$1;hasRequired_stream_transform$1=1,_stream_transform$1=it;var _=requireErrorsBrowser().codes,$=_.ERR_METHOD_NOT_IMPLEMENTED,_e=_.ERR_MULTIPLE_CALLBACK,et=_.ERR_TRANSFORM_ALREADY_TRANSFORMING,tt=_.ERR_TRANSFORM_WITH_LENGTH_0,rt=require_stream_duplex$1();requireInherits_browser()(it,rt);function nt(ot,dt){var ht=this._transformState;ht.transforming=!1;var yt=ht.writecb;if(yt===null)return this.emit("error",new _e);ht.writechunk=null,ht.writecb=null,dt!=null&&this.push(dt),yt(ot);var vt=this._readableState;vt.reading=!1,(vt.needReadable||vt.length<vt.highWaterMark)&&this._read(vt.highWaterMark)}function it(ot){if(!(this instanceof it))return new it(ot);rt.call(this,ot),this._transformState={afterTransform:nt.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,ot&&(typeof ot.transform=="function"&&(this._transform=ot.transform),typeof ot.flush=="function"&&(this._flush=ot.flush)),this.on("prefinish",st)}function st(){var ot=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(dt,ht){at(ot,dt,ht)}):at(this,null,null)}it.prototype.push=function(ot,dt){return this._transformState.needTransform=!1,rt.prototype.push.call(this,ot,dt)},it.prototype._transform=function(ot,dt,ht){ht(new $("_transform()"))},it.prototype._write=function(ot,dt,ht){var yt=this._transformState;if(yt.writecb=ht,yt.writechunk=ot,yt.writeencoding=dt,!yt.transforming){var vt=this._readableState;(yt.needTransform||vt.needReadable||vt.length<vt.highWaterMark)&&this._read(vt.highWaterMark)}},it.prototype._read=function(ot){var dt=this._transformState;dt.writechunk!==null&&!dt.transforming?(dt.transforming=!0,this._transform(dt.writechunk,dt.writeencoding,dt.afterTransform)):dt.needTransform=!0},it.prototype._destroy=function(ot,dt){rt.prototype._destroy.call(this,ot,function(ht){dt(ht)})};function at(ot,dt,ht){if(dt)return ot.emit("error",dt);if(ht!=null&&ot.push(ht),ot._writableState.length)throw new tt;if(ot._transformState.transforming)throw new et;return ot.push(null)}return _stream_transform$1}var _stream_passthrough$1,hasRequired_stream_passthrough$1;function require_stream_passthrough$1(){if(hasRequired_stream_passthrough$1)return _stream_passthrough$1;hasRequired_stream_passthrough$1=1,_stream_passthrough$1=$;var _=require_stream_transform$1();requireInherits_browser()($,_);function $(_e){if(!(this instanceof $))return new $(_e);_.call(this,_e)}return $.prototype._transform=function(_e,et,tt){tt(null,_e)},_stream_passthrough$1}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var _;function $(ht){var yt=!1;return function(){yt||(yt=!0,ht.apply(void 0,arguments))}}var _e=requireErrorsBrowser().codes,et=_e.ERR_MISSING_ARGS,tt=_e.ERR_STREAM_DESTROYED;function rt(ht){if(ht)throw ht}function nt(ht){return ht.setHeader&&typeof ht.abort=="function"}function it(ht,yt,vt,xt){xt=$(xt);var wt=!1;ht.on("close",function(){wt=!0}),_===void 0&&(_=requireEndOfStream()),_(ht,{readable:yt,writable:vt},function(At){if(At)return xt(At);wt=!0,xt()});var Et=!1;return function(At){if(!wt&&!Et){if(Et=!0,nt(ht))return ht.abort();if(typeof ht.destroy=="function")return ht.destroy();xt(At||new tt("pipe"))}}}function st(ht){ht()}function at(ht,yt){return ht.pipe(yt)}function ot(ht){return!ht.length||typeof ht[ht.length-1]!="function"?rt:ht.pop()}function dt(){for(var ht=arguments.length,yt=new Array(ht),vt=0;vt<ht;vt++)yt[vt]=arguments[vt];var xt=ot(yt);if(Array.isArray(yt[0])&&(yt=yt[0]),yt.length<2)throw new et("streams");var wt,Et=yt.map(function(At,jt){var kt=jt<yt.length-1,Lt=jt>0;return it(At,kt,Lt,function(Bt){wt||(wt=Bt),Bt&&Et.forEach(st),!kt&&(Et.forEach(st),xt(wt))})});return yt.reduce(at)}return pipeline_1=dt,pipeline_1}var streamBrowserify,hasRequiredStreamBrowserify;function requireStreamBrowserify(){if(hasRequiredStreamBrowserify)return streamBrowserify;hasRequiredStreamBrowserify=1,streamBrowserify=_e;var _=requireEvents().EventEmitter,$=requireInherits_browser();$(_e,_),_e.Readable=require_stream_readable$1(),_e.Writable=require_stream_writable$1(),_e.Duplex=require_stream_duplex$1(),_e.Transform=require_stream_transform$1(),_e.PassThrough=require_stream_passthrough$1(),_e.finished=requireEndOfStream(),_e.pipeline=requirePipeline(),_e.Stream=_e;function _e(){_.call(this)}return _e.prototype.pipe=function(et,tt){var rt=this;function nt(yt){et.writable&&et.write(yt)===!1&&rt.pause&&rt.pause()}rt.on("data",nt);function it(){rt.readable&&rt.resume&&rt.resume()}et.on("drain",it),!et._isStdio&&(!tt||tt.end!==!1)&&(rt.on("end",at),rt.on("close",ot));var st=!1;function at(){st||(st=!0,et.end())}function ot(){st||(st=!0,typeof et.destroy=="function"&&et.destroy())}function dt(yt){if(ht(),_.listenerCount(this,"error")===0)throw yt}rt.on("error",dt),et.on("error",dt);function ht(){rt.removeListener("data",nt),et.removeListener("drain",it),rt.removeListener("end",at),rt.removeListener("close",ot),rt.removeListener("error",dt),et.removeListener("error",dt),rt.removeListener("end",ht),rt.removeListener("close",ht),et.removeListener("close",ht)}return rt.on("end",ht),rt.on("close",ht),et.on("close",ht),et.emit("pipe",rt),et},streamBrowserify}var hashBase,hasRequiredHashBase;function requireHashBase(){if(hasRequiredHashBase)return hashBase;hasRequiredHashBase=1;var _=requireSafeBuffer$1().Buffer,$=requireStreamBrowserify().Transform,_e=requireInherits_browser();function et(it){$.call(this),this._block=_.allocUnsafe(it),this._blockSize=it,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}_e(et,$),et.prototype._transform=function(it,st,at){var ot=null;try{this.update(it,st)}catch(dt){ot=dt}at(ot)},et.prototype._flush=function(it){var st=null;try{this.push(this.digest())}catch(at){st=at}it(st)};var tt=typeof Uint8Array<"u",rt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(_.prototype instanceof Uint8Array||_.TYPED_ARRAY_SUPPORT);function nt(it,st){if(it instanceof _)return it;if(typeof it=="string")return _.from(it,st);if(rt&&ArrayBuffer.isView(it)){if(it.byteLength===0)return _.alloc(0);var at=_.from(it.buffer,it.byteOffset,it.byteLength);if(at.byteLength===it.byteLength)return at}if(tt&&it instanceof Uint8Array||_.isBuffer(it)&&it.constructor&&typeof it.constructor.isBuffer=="function"&&it.constructor.isBuffer(it))return _.from(it);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}return et.prototype.update=function(it,st){if(this._finalized)throw new Error("Digest already called");it=nt(it,st);for(var at=this._block,ot=0;this._blockOffset+it.length-ot>=this._blockSize;){for(var dt=this._blockOffset;dt<this._blockSize;)at[dt++]=it[ot++];this._update(),this._blockOffset=0}for(;ot<it.length;)at[this._blockOffset++]=it[ot++];for(var ht=0,yt=it.length*8;yt>0;++ht)this._length[ht]+=yt,yt=this._length[ht]/4294967296|0,yt>0&&(this._length[ht]-=4294967296*yt);return this},et.prototype._update=function(){throw new Error("_update is not implemented")},et.prototype.digest=function(it){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var st=this._digest();it!==void 0&&(st=st.toString(it)),this._block.fill(0),this._blockOffset=0;for(var at=0;at<4;++at)this._length[at]=0;return st},et.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase=et,hashBase}var md5_js,hasRequiredMd5_js;function requireMd5_js(){if(hasRequiredMd5_js)return md5_js;hasRequiredMd5_js=1;var _=requireInherits_browser(),$=requireHashBase(),_e=requireSafeBuffer$1().Buffer,et=new Array(16);function tt(){$.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}_(tt,$),tt.prototype._update=function(){for(var ot=et,dt=0;dt<16;++dt)ot[dt]=this._block.readInt32LE(dt*4);var ht=this._a,yt=this._b,vt=this._c,xt=this._d;ht=nt(ht,yt,vt,xt,ot[0],3614090360,7),xt=nt(xt,ht,yt,vt,ot[1],3905402710,12),vt=nt(vt,xt,ht,yt,ot[2],606105819,17),yt=nt(yt,vt,xt,ht,ot[3],3250441966,22),ht=nt(ht,yt,vt,xt,ot[4],4118548399,7),xt=nt(xt,ht,yt,vt,ot[5],1200080426,12),vt=nt(vt,xt,ht,yt,ot[6],2821735955,17),yt=nt(yt,vt,xt,ht,ot[7],4249261313,22),ht=nt(ht,yt,vt,xt,ot[8],1770035416,7),xt=nt(xt,ht,yt,vt,ot[9],2336552879,12),vt=nt(vt,xt,ht,yt,ot[10],4294925233,17),yt=nt(yt,vt,xt,ht,ot[11],2304563134,22),ht=nt(ht,yt,vt,xt,ot[12],1804603682,7),xt=nt(xt,ht,yt,vt,ot[13],4254626195,12),vt=nt(vt,xt,ht,yt,ot[14],2792965006,17),yt=nt(yt,vt,xt,ht,ot[15],1236535329,22),ht=it(ht,yt,vt,xt,ot[1],4129170786,5),xt=it(xt,ht,yt,vt,ot[6],3225465664,9),vt=it(vt,xt,ht,yt,ot[11],643717713,14),yt=it(yt,vt,xt,ht,ot[0],3921069994,20),ht=it(ht,yt,vt,xt,ot[5],3593408605,5),xt=it(xt,ht,yt,vt,ot[10],38016083,9),vt=it(vt,xt,ht,yt,ot[15],3634488961,14),yt=it(yt,vt,xt,ht,ot[4],3889429448,20),ht=it(ht,yt,vt,xt,ot[9],568446438,5),xt=it(xt,ht,yt,vt,ot[14],3275163606,9),vt=it(vt,xt,ht,yt,ot[3],4107603335,14),yt=it(yt,vt,xt,ht,ot[8],1163531501,20),ht=it(ht,yt,vt,xt,ot[13],2850285829,5),xt=it(xt,ht,yt,vt,ot[2],4243563512,9),vt=it(vt,xt,ht,yt,ot[7],1735328473,14),yt=it(yt,vt,xt,ht,ot[12],2368359562,20),ht=st(ht,yt,vt,xt,ot[5],4294588738,4),xt=st(xt,ht,yt,vt,ot[8],2272392833,11),vt=st(vt,xt,ht,yt,ot[11],1839030562,16),yt=st(yt,vt,xt,ht,ot[14],4259657740,23),ht=st(ht,yt,vt,xt,ot[1],2763975236,4),xt=st(xt,ht,yt,vt,ot[4],1272893353,11),vt=st(vt,xt,ht,yt,ot[7],4139469664,16),yt=st(yt,vt,xt,ht,ot[10],3200236656,23),ht=st(ht,yt,vt,xt,ot[13],681279174,4),xt=st(xt,ht,yt,vt,ot[0],3936430074,11),vt=st(vt,xt,ht,yt,ot[3],3572445317,16),yt=st(yt,vt,xt,ht,ot[6],76029189,23),ht=st(ht,yt,vt,xt,ot[9],3654602809,4),xt=st(xt,ht,yt,vt,ot[12],3873151461,11),vt=st(vt,xt,ht,yt,ot[15],530742520,16),yt=st(yt,vt,xt,ht,ot[2],3299628645,23),ht=at(ht,yt,vt,xt,ot[0],4096336452,6),xt=at(xt,ht,yt,vt,ot[7],1126891415,10),vt=at(vt,xt,ht,yt,ot[14],2878612391,15),yt=at(yt,vt,xt,ht,ot[5],4237533241,21),ht=at(ht,yt,vt,xt,ot[12],1700485571,6),xt=at(xt,ht,yt,vt,ot[3],2399980690,10),vt=at(vt,xt,ht,yt,ot[10],4293915773,15),yt=at(yt,vt,xt,ht,ot[1],2240044497,21),ht=at(ht,yt,vt,xt,ot[8],1873313359,6),xt=at(xt,ht,yt,vt,ot[15],4264355552,10),vt=at(vt,xt,ht,yt,ot[6],2734768916,15),yt=at(yt,vt,xt,ht,ot[13],1309151649,21),ht=at(ht,yt,vt,xt,ot[4],4149444226,6),xt=at(xt,ht,yt,vt,ot[11],3174756917,10),vt=at(vt,xt,ht,yt,ot[2],718787259,15),yt=at(yt,vt,xt,ht,ot[9],3951481745,21),this._a=this._a+ht|0,this._b=this._b+yt|0,this._c=this._c+vt|0,this._d=this._d+xt|0},tt.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var ot=_e.allocUnsafe(16);return ot.writeInt32LE(this._a,0),ot.writeInt32LE(this._b,4),ot.writeInt32LE(this._c,8),ot.writeInt32LE(this._d,12),ot};function rt(ot,dt){return ot<<dt|ot>>>32-dt}function nt(ot,dt,ht,yt,vt,xt,wt){return rt(ot+(dt&ht|~dt&yt)+vt+xt|0,wt)+dt|0}function it(ot,dt,ht,yt,vt,xt,wt){return rt(ot+(dt&yt|ht&~yt)+vt+xt|0,wt)+dt|0}function st(ot,dt,ht,yt,vt,xt,wt){return rt(ot+(dt^ht^yt)+vt+xt|0,wt)+dt|0}function at(ot,dt,ht,yt,vt,xt,wt){return rt(ot+(ht^(dt|~yt))+vt+xt|0,wt)+dt|0}return md5_js=tt,md5_js}var ripemd160,hasRequiredRipemd160;function requireRipemd160(){if(hasRequiredRipemd160)return ripemd160;hasRequiredRipemd160=1;var _=require$$0$2.Buffer,$=requireInherits_browser(),_e=requireHashBase(),et=new Array(16),tt=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rt=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],nt=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],it=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],st=[0,1518500249,1859775393,2400959708,2840853838],at=[1352829926,1548603684,1836072691,2053994217,0];function ot(){_e.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}$(ot,_e),ot.prototype._update=function(){for(var Et=et,At=0;At<16;++At)Et[At]=this._block.readInt32LE(At*4);for(var jt=this._a|0,kt=this._b|0,Lt=this._c|0,Bt=this._d|0,Gt=this._e|0,er=this._a|0,tr=this._b|0,ar=this._c|0,Mt=this._d|0,lt=this._e|0,mt=0;mt<80;mt+=1){var gt,bt;mt<16?(gt=ht(jt,kt,Lt,Bt,Gt,Et[tt[mt]],st[0],nt[mt]),bt=wt(er,tr,ar,Mt,lt,Et[rt[mt]],at[0],it[mt])):mt<32?(gt=yt(jt,kt,Lt,Bt,Gt,Et[tt[mt]],st[1],nt[mt]),bt=xt(er,tr,ar,Mt,lt,Et[rt[mt]],at[1],it[mt])):mt<48?(gt=vt(jt,kt,Lt,Bt,Gt,Et[tt[mt]],st[2],nt[mt]),bt=vt(er,tr,ar,Mt,lt,Et[rt[mt]],at[2],it[mt])):mt<64?(gt=xt(jt,kt,Lt,Bt,Gt,Et[tt[mt]],st[3],nt[mt]),bt=yt(er,tr,ar,Mt,lt,Et[rt[mt]],at[3],it[mt])):(gt=wt(jt,kt,Lt,Bt,Gt,Et[tt[mt]],st[4],nt[mt]),bt=ht(er,tr,ar,Mt,lt,Et[rt[mt]],at[4],it[mt])),jt=Gt,Gt=Bt,Bt=dt(Lt,10),Lt=kt,kt=gt,er=lt,lt=Mt,Mt=dt(ar,10),ar=tr,tr=bt}var St=this._b+Lt+Mt|0;this._b=this._c+Bt+lt|0,this._c=this._d+Gt+er|0,this._d=this._e+jt+tr|0,this._e=this._a+kt+ar|0,this._a=St},ot.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var Et=_.alloc?_.alloc(20):new _(20);return Et.writeInt32LE(this._a,0),Et.writeInt32LE(this._b,4),Et.writeInt32LE(this._c,8),Et.writeInt32LE(this._d,12),Et.writeInt32LE(this._e,16),Et};function dt(Et,At){return Et<<At|Et>>>32-At}function ht(Et,At,jt,kt,Lt,Bt,Gt,er){return dt(Et+(At^jt^kt)+Bt+Gt|0,er)+Lt|0}function yt(Et,At,jt,kt,Lt,Bt,Gt,er){return dt(Et+(At&jt|~At&kt)+Bt+Gt|0,er)+Lt|0}function vt(Et,At,jt,kt,Lt,Bt,Gt,er){return dt(Et+((At|~jt)^kt)+Bt+Gt|0,er)+Lt|0}function xt(Et,At,jt,kt,Lt,Bt,Gt,er){return dt(Et+(At&kt|jt&~kt)+Bt+Gt|0,er)+Lt|0}function wt(Et,At,jt,kt,Lt,Bt,Gt,er){return dt(Et+(At^(jt|~kt))+Bt+Gt|0,er)+Lt|0}return ripemd160=ot,ripemd160}var sha_js={exports:{}},hash$1,hasRequiredHash$1;function requireHash$1(){if(hasRequiredHash$1)return hash$1;hasRequiredHash$1=1;var _=requireSafeBuffer$1().Buffer;function $(_e,et){this._block=_.alloc(_e),this._finalSize=et,this._blockSize=_e,this._len=0}return $.prototype.update=function(_e,et){typeof _e=="string"&&(et=et||"utf8",_e=_.from(_e,et));for(var tt=this._block,rt=this._blockSize,nt=_e.length,it=this._len,st=0;st<nt;){for(var at=it%rt,ot=Math.min(nt-st,rt-at),dt=0;dt<ot;dt++)tt[at+dt]=_e[st+dt];it+=ot,st+=ot,it%rt===0&&this._update(tt)}return this._len+=nt,this},$.prototype.digest=function(_e){var et=this._len%this._blockSize;this._block[et]=128,this._block.fill(0,et+1),et>=this._finalSize&&(this._update(this._block),this._block.fill(0));var tt=this._len*8;if(tt<=4294967295)this._block.writeUInt32BE(tt,this._blockSize-4);else{var rt=(tt&4294967295)>>>0,nt=(tt-rt)/4294967296;this._block.writeUInt32BE(nt,this._blockSize-8),this._block.writeUInt32BE(rt,this._blockSize-4)}this._update(this._block);var it=this._hash();return _e?it.toString(_e):it},$.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hash$1=$,hash$1}var sha$1,hasRequiredSha$1;function requireSha$1(){if(hasRequiredSha$1)return sha$1;hasRequiredSha$1=1;var _=requireInherits_browser(),$=requireHash$1(),_e=requireSafeBuffer$1().Buffer,et=[1518500249,1859775393,-1894007588,-899497514],tt=new Array(80);function rt(){this.init(),this._w=tt,$.call(this,64,56)}_(rt,$),rt.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function nt(at){return at<<5|at>>>27}function it(at){return at<<30|at>>>2}function st(at,ot,dt,ht){return at===0?ot&dt|~ot&ht:at===2?ot&dt|ot&ht|dt&ht:ot^dt^ht}return rt.prototype._update=function(at){for(var ot=this._w,dt=this._a|0,ht=this._b|0,yt=this._c|0,vt=this._d|0,xt=this._e|0,wt=0;wt<16;++wt)ot[wt]=at.readInt32BE(wt*4);for(;wt<80;++wt)ot[wt]=ot[wt-3]^ot[wt-8]^ot[wt-14]^ot[wt-16];for(var Et=0;Et<80;++Et){var At=~~(Et/20),jt=nt(dt)+st(At,ht,yt,vt)+xt+ot[Et]+et[At]|0;xt=vt,vt=yt,yt=it(ht),ht=dt,dt=jt}this._a=dt+this._a|0,this._b=ht+this._b|0,this._c=yt+this._c|0,this._d=vt+this._d|0,this._e=xt+this._e|0},rt.prototype._hash=function(){var at=_e.allocUnsafe(20);return at.writeInt32BE(this._a|0,0),at.writeInt32BE(this._b|0,4),at.writeInt32BE(this._c|0,8),at.writeInt32BE(this._d|0,12),at.writeInt32BE(this._e|0,16),at},sha$1=rt,sha$1}var sha1,hasRequiredSha1;function requireSha1(){if(hasRequiredSha1)return sha1;hasRequiredSha1=1;var _=requireInherits_browser(),$=requireHash$1(),_e=requireSafeBuffer$1().Buffer,et=[1518500249,1859775393,-1894007588,-899497514],tt=new Array(80);function rt(){this.init(),this._w=tt,$.call(this,64,56)}_(rt,$),rt.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function nt(ot){return ot<<1|ot>>>31}function it(ot){return ot<<5|ot>>>27}function st(ot){return ot<<30|ot>>>2}function at(ot,dt,ht,yt){return ot===0?dt&ht|~dt&yt:ot===2?dt&ht|dt&yt|ht&yt:dt^ht^yt}return rt.prototype._update=function(ot){for(var dt=this._w,ht=this._a|0,yt=this._b|0,vt=this._c|0,xt=this._d|0,wt=this._e|0,Et=0;Et<16;++Et)dt[Et]=ot.readInt32BE(Et*4);for(;Et<80;++Et)dt[Et]=nt(dt[Et-3]^dt[Et-8]^dt[Et-14]^dt[Et-16]);for(var At=0;At<80;++At){var jt=~~(At/20),kt=it(ht)+at(jt,yt,vt,xt)+wt+dt[At]+et[jt]|0;wt=xt,xt=vt,vt=st(yt),yt=ht,ht=kt}this._a=ht+this._a|0,this._b=yt+this._b|0,this._c=vt+this._c|0,this._d=xt+this._d|0,this._e=wt+this._e|0},rt.prototype._hash=function(){var ot=_e.allocUnsafe(20);return ot.writeInt32BE(this._a|0,0),ot.writeInt32BE(this._b|0,4),ot.writeInt32BE(this._c|0,8),ot.writeInt32BE(this._d|0,12),ot.writeInt32BE(this._e|0,16),ot},sha1=rt,sha1}var sha256$1,hasRequiredSha256;function requireSha256(){if(hasRequiredSha256)return sha256$1;hasRequiredSha256=1;var _=requireInherits_browser(),$=requireHash$1(),_e=requireSafeBuffer$1().Buffer,et=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],tt=new Array(64);function rt(){this.init(),this._w=tt,$.call(this,64,56)}_(rt,$),rt.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function nt(ht,yt,vt){return vt^ht&(yt^vt)}function it(ht,yt,vt){return ht&yt|vt&(ht|yt)}function st(ht){return(ht>>>2|ht<<30)^(ht>>>13|ht<<19)^(ht>>>22|ht<<10)}function at(ht){return(ht>>>6|ht<<26)^(ht>>>11|ht<<21)^(ht>>>25|ht<<7)}function ot(ht){return(ht>>>7|ht<<25)^(ht>>>18|ht<<14)^ht>>>3}function dt(ht){return(ht>>>17|ht<<15)^(ht>>>19|ht<<13)^ht>>>10}return rt.prototype._update=function(ht){for(var yt=this._w,vt=this._a|0,xt=this._b|0,wt=this._c|0,Et=this._d|0,At=this._e|0,jt=this._f|0,kt=this._g|0,Lt=this._h|0,Bt=0;Bt<16;++Bt)yt[Bt]=ht.readInt32BE(Bt*4);for(;Bt<64;++Bt)yt[Bt]=dt(yt[Bt-2])+yt[Bt-7]+ot(yt[Bt-15])+yt[Bt-16]|0;for(var Gt=0;Gt<64;++Gt){var er=Lt+at(At)+nt(At,jt,kt)+et[Gt]+yt[Gt]|0,tr=st(vt)+it(vt,xt,wt)|0;Lt=kt,kt=jt,jt=At,At=Et+er|0,Et=wt,wt=xt,xt=vt,vt=er+tr|0}this._a=vt+this._a|0,this._b=xt+this._b|0,this._c=wt+this._c|0,this._d=Et+this._d|0,this._e=At+this._e|0,this._f=jt+this._f|0,this._g=kt+this._g|0,this._h=Lt+this._h|0},rt.prototype._hash=function(){var ht=_e.allocUnsafe(32);return ht.writeInt32BE(this._a,0),ht.writeInt32BE(this._b,4),ht.writeInt32BE(this._c,8),ht.writeInt32BE(this._d,12),ht.writeInt32BE(this._e,16),ht.writeInt32BE(this._f,20),ht.writeInt32BE(this._g,24),ht.writeInt32BE(this._h,28),ht},sha256$1=rt,sha256$1}var sha224$1,hasRequiredSha224;function requireSha224(){if(hasRequiredSha224)return sha224$1;hasRequiredSha224=1;var _=requireInherits_browser(),$=requireSha256(),_e=requireHash$1(),et=requireSafeBuffer$1().Buffer,tt=new Array(64);function rt(){this.init(),this._w=tt,_e.call(this,64,56)}return _(rt,$),rt.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},rt.prototype._hash=function(){var nt=et.allocUnsafe(28);return nt.writeInt32BE(this._a,0),nt.writeInt32BE(this._b,4),nt.writeInt32BE(this._c,8),nt.writeInt32BE(this._d,12),nt.writeInt32BE(this._e,16),nt.writeInt32BE(this._f,20),nt.writeInt32BE(this._g,24),nt},sha224$1=rt,sha224$1}var sha512$1,hasRequiredSha512;function requireSha512(){if(hasRequiredSha512)return sha512$1;hasRequiredSha512=1;var _=requireInherits_browser(),$=requireHash$1(),_e=requireSafeBuffer$1().Buffer,et=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],tt=new Array(160);function rt(){this.init(),this._w=tt,$.call(this,128,112)}_(rt,$),rt.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function nt(xt,wt,Et){return Et^xt&(wt^Et)}function it(xt,wt,Et){return xt&wt|Et&(xt|wt)}function st(xt,wt){return(xt>>>28|wt<<4)^(wt>>>2|xt<<30)^(wt>>>7|xt<<25)}function at(xt,wt){return(xt>>>14|wt<<18)^(xt>>>18|wt<<14)^(wt>>>9|xt<<23)}function ot(xt,wt){return(xt>>>1|wt<<31)^(xt>>>8|wt<<24)^xt>>>7}function dt(xt,wt){return(xt>>>1|wt<<31)^(xt>>>8|wt<<24)^(xt>>>7|wt<<25)}function ht(xt,wt){return(xt>>>19|wt<<13)^(wt>>>29|xt<<3)^xt>>>6}function yt(xt,wt){return(xt>>>19|wt<<13)^(wt>>>29|xt<<3)^(xt>>>6|wt<<26)}function vt(xt,wt){return xt>>>0<wt>>>0?1:0}return rt.prototype._update=function(xt){for(var wt=this._w,Et=this._ah|0,At=this._bh|0,jt=this._ch|0,kt=this._dh|0,Lt=this._eh|0,Bt=this._fh|0,Gt=this._gh|0,er=this._hh|0,tr=this._al|0,ar=this._bl|0,Mt=this._cl|0,lt=this._dl|0,mt=this._el|0,gt=this._fl|0,bt=this._gl|0,St=this._hl|0,Nt=0;Nt<32;Nt+=2)wt[Nt]=xt.readInt32BE(Nt*4),wt[Nt+1]=xt.readInt32BE(Nt*4+4);for(;Nt<160;Nt+=2){var Pt=wt[Nt-30],Tt=wt[Nt-15*2+1],pt=ot(Pt,Tt),Rt=dt(Tt,Pt);Pt=wt[Nt-2*2],Tt=wt[Nt-2*2+1];var zt=ht(Pt,Tt),Yt=yt(Tt,Pt),ir=wt[Nt-7*2],ur=wt[Nt-7*2+1],cr=wt[Nt-16*2],rr=wt[Nt-16*2+1],fr=Rt+ur|0,dr=pt+ir+vt(fr,Rt)|0;fr=fr+Yt|0,dr=dr+zt+vt(fr,Yt)|0,fr=fr+rr|0,dr=dr+cr+vt(fr,rr)|0,wt[Nt]=dr,wt[Nt+1]=fr}for(var gr=0;gr<160;gr+=2){dr=wt[gr],fr=wt[gr+1];var hr=it(Et,At,jt),or=it(tr,ar,Mt),br=st(Et,tr),Rr=st(tr,Et),_r=at(Lt,mt),Er=at(mt,Lt),Hr=et[gr],xr=et[gr+1],yr=nt(Lt,Bt,Gt),Ar=nt(mt,gt,bt),$r=St+Er|0,Tr=er+_r+vt($r,St)|0;$r=$r+Ar|0,Tr=Tr+yr+vt($r,Ar)|0,$r=$r+xr|0,Tr=Tr+Hr+vt($r,xr)|0,$r=$r+fr|0,Tr=Tr+dr+vt($r,fr)|0;var jr=Rr+or|0,Cr=br+hr+vt(jr,Rr)|0;er=Gt,St=bt,Gt=Bt,bt=gt,Bt=Lt,gt=mt,mt=lt+$r|0,Lt=kt+Tr+vt(mt,lt)|0,kt=jt,lt=Mt,jt=At,Mt=ar,At=Et,ar=tr,tr=$r+jr|0,Et=Tr+Cr+vt(tr,$r)|0}this._al=this._al+tr|0,this._bl=this._bl+ar|0,this._cl=this._cl+Mt|0,this._dl=this._dl+lt|0,this._el=this._el+mt|0,this._fl=this._fl+gt|0,this._gl=this._gl+bt|0,this._hl=this._hl+St|0,this._ah=this._ah+Et+vt(this._al,tr)|0,this._bh=this._bh+At+vt(this._bl,ar)|0,this._ch=this._ch+jt+vt(this._cl,Mt)|0,this._dh=this._dh+kt+vt(this._dl,lt)|0,this._eh=this._eh+Lt+vt(this._el,mt)|0,this._fh=this._fh+Bt+vt(this._fl,gt)|0,this._gh=this._gh+Gt+vt(this._gl,bt)|0,this._hh=this._hh+er+vt(this._hl,St)|0},rt.prototype._hash=function(){var xt=_e.allocUnsafe(64);function wt(Et,At,jt){xt.writeInt32BE(Et,jt),xt.writeInt32BE(At,jt+4)}return wt(this._ah,this._al,0),wt(this._bh,this._bl,8),wt(this._ch,this._cl,16),wt(this._dh,this._dl,24),wt(this._eh,this._el,32),wt(this._fh,this._fl,40),wt(this._gh,this._gl,48),wt(this._hh,this._hl,56),xt},sha512$1=rt,sha512$1}var sha384$1,hasRequiredSha384;function requireSha384(){if(hasRequiredSha384)return sha384$1;hasRequiredSha384=1;var _=requireInherits_browser(),$=requireSha512(),_e=requireHash$1(),et=requireSafeBuffer$1().Buffer,tt=new Array(160);function rt(){this.init(),this._w=tt,_e.call(this,128,112)}return _(rt,$),rt.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},rt.prototype._hash=function(){var nt=et.allocUnsafe(48);function it(st,at,ot){nt.writeInt32BE(st,ot),nt.writeInt32BE(at,ot+4)}return it(this._ah,this._al,0),it(this._bh,this._bl,8),it(this._ch,this._cl,16),it(this._dh,this._dl,24),it(this._eh,this._el,32),it(this._fh,this._fl,40),nt},sha384$1=rt,sha384$1}var hasRequiredSha_js;function requireSha_js(){if(hasRequiredSha_js)return sha_js.exports;hasRequiredSha_js=1;var _=sha_js.exports=function(_e){_e=_e.toLowerCase();var et=_[_e];if(!et)throw new Error(_e+" is not supported (we accept pull requests)");return new et};return _.sha=requireSha$1(),_.sha1=requireSha1(),_.sha224=requireSha224(),_.sha256=requireSha256(),_.sha384=requireSha384(),_.sha512=requireSha512(),sha_js.exports}var cipherBase,hasRequiredCipherBase;function requireCipherBase(){if(hasRequiredCipherBase)return cipherBase;hasRequiredCipherBase=1;var _=requireSafeBuffer$1().Buffer,$=requireStreamBrowserify().Transform,_e=requireString_decoder().StringDecoder,et=requireInherits_browser();function tt(st){$.call(this),this.hashMode=typeof st=="string",this.hashMode?this[st]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}et(tt,$);var rt=typeof Uint8Array<"u",nt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(_.prototype instanceof Uint8Array||_.TYPED_ARRAY_SUPPORT);function it(st,at){if(st instanceof _)return st;if(typeof st=="string")return _.from(st,at);if(nt&&ArrayBuffer.isView(st)){if(st.byteLength===0)return _.alloc(0);var ot=_.from(st.buffer,st.byteOffset,st.byteLength);if(ot.byteLength===st.byteLength)return ot}if(rt&&st instanceof Uint8Array||_.isBuffer(st)&&st.constructor&&typeof st.constructor.isBuffer=="function"&&st.constructor.isBuffer(st))return _.from(st);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}return tt.prototype.update=function(st,at,ot){var dt=it(st,at),ht=this._update(dt);return this.hashMode?this:(ot&&(ht=this._toString(ht,ot)),ht)},tt.prototype.setAutoPadding=function(){},tt.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},tt.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},tt.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},tt.prototype._transform=function(st,at,ot){var dt;try{this.hashMode?this._update(st):this.push(this._update(st))}catch(ht){dt=ht}finally{ot(dt)}},tt.prototype._flush=function(st){var at;try{this.push(this.__final())}catch(ot){at=ot}st(at)},tt.prototype._finalOrDigest=function(st){var at=this.__final()||_.alloc(0);return st&&(at=this._toString(at,st,!0)),at},tt.prototype._toString=function(st,at,ot){if(this._decoder||(this._decoder=new _e(at),this._encoding=at),this._encoding!==at)throw new Error("can’t switch encodings");var dt=this._decoder.write(st);return ot&&(dt+=this._decoder.end()),dt},cipherBase=tt,cipherBase}var browser$a,hasRequiredBrowser$9;function requireBrowser$9(){if(hasRequiredBrowser$9)return browser$a;hasRequiredBrowser$9=1;var _=requireInherits_browser(),$=requireMd5_js(),_e=requireRipemd160(),et=requireSha_js(),tt=requireCipherBase();function rt(nt){tt.call(this,"digest"),this._hash=nt}return _(rt,tt),rt.prototype._update=function(nt){this._hash.update(nt)},rt.prototype._final=function(){return this._hash.digest()},browser$a=function(it){return it=it.toLowerCase(),it==="md5"?new $:it==="rmd160"||it==="ripemd160"?new _e:new rt(et(it))},browser$a}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;var _=requireInherits_browser(),$=requireSafeBuffer$1().Buffer,_e=requireCipherBase(),et=$.alloc(128),tt=64;function rt(nt,it){_e.call(this,"digest"),typeof it=="string"&&(it=$.from(it)),this._alg=nt,this._key=it,it.length>tt?it=nt(it):it.length<tt&&(it=$.concat([it,et],tt));for(var st=this._ipad=$.allocUnsafe(tt),at=this._opad=$.allocUnsafe(tt),ot=0;ot<tt;ot++)st[ot]=it[ot]^54,at[ot]=it[ot]^92;this._hash=[st]}return _(rt,_e),rt.prototype._update=function(nt){this._hash.push(nt)},rt.prototype._final=function(){var nt=this._alg($.concat(this._hash));return this._alg($.concat([this._opad,nt]))},legacy=rt,legacy}var md5,hasRequiredMd5;function requireMd5(){if(hasRequiredMd5)return md5;hasRequiredMd5=1;var _=requireMd5_js();return md5=function($){return new _().update($).digest()},md5}var browser$9,hasRequiredBrowser$8;function requireBrowser$8(){if(hasRequiredBrowser$8)return browser$9;hasRequiredBrowser$8=1;var _=requireInherits_browser(),$=requireLegacy(),_e=requireCipherBase(),et=requireSafeBuffer$1().Buffer,tt=requireMd5(),rt=requireRipemd160(),nt=requireSha_js(),it=et.alloc(128);function st(at,ot){_e.call(this,"digest"),typeof ot=="string"&&(ot=et.from(ot));var dt=at==="sha512"||at==="sha384"?128:64;if(this._alg=at,this._key=ot,ot.length>dt){var ht=at==="rmd160"?new rt:nt(at);ot=ht.update(ot).digest()}else ot.length<dt&&(ot=et.concat([ot,it],dt));for(var yt=this._ipad=et.allocUnsafe(dt),vt=this._opad=et.allocUnsafe(dt),xt=0;xt<dt;xt++)yt[xt]=ot[xt]^54,vt[xt]=ot[xt]^92;this._hash=at==="rmd160"?new rt:nt(at),this._hash.update(yt)}return _(st,_e),st.prototype._update=function(at){this._hash.update(at)},st.prototype._final=function(){var at=this._hash.digest(),ot=this._alg==="rmd160"?new rt:nt(this._alg);return ot.update(this._opad).update(at).digest()},browser$9=function(ot,dt){return ot=ot.toLowerCase(),ot==="rmd160"||ot==="ripemd160"?new st("rmd160",dt):ot==="md5"?new $(tt,dt):new st(ot,dt)},browser$9}const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384={sign:"ecdsa",hash:"sha384",id:""},sha512={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256,sha224,sha384,sha512,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos,hasRequiredAlgos;function requireAlgos(){return hasRequiredAlgos||(hasRequiredAlgos=1,algos=require$$6),algos}var browser$8={},precondition,hasRequiredPrecondition;function requirePrecondition(){if(hasRequiredPrecondition)return precondition;hasRequiredPrecondition=1;var _=Math.pow(2,30)-1;return precondition=function($,_e){if(typeof $!="number")throw new TypeError("Iterations not a number");if($<0)throw new TypeError("Bad iterations");if(typeof _e!="number")throw new TypeError("Key length not a number");if(_e<0||_e>_||_e!==_e)throw new TypeError("Bad key length")},precondition}var defaultEncoding_1,hasRequiredDefaultEncoding;function requireDefaultEncoding(){if(hasRequiredDefaultEncoding)return defaultEncoding_1;hasRequiredDefaultEncoding=1;var _;if(commonjsGlobal.process&&commonjsGlobal.process.browser)_="utf-8";else if(commonjsGlobal.process&&commonjsGlobal.process.version){var $=parseInt(process$1.version.split(".")[0].slice(1),10);_=$>=6?"utf-8":"binary"}else _="utf-8";return defaultEncoding_1=_,defaultEncoding_1}var toBuffer,hasRequiredToBuffer;function requireToBuffer(){if(hasRequiredToBuffer)return toBuffer;hasRequiredToBuffer=1;var _=requireSafeBuffer$1().Buffer;return toBuffer=function($,_e,et){if(_.isBuffer($))return $;if(typeof $=="string")return _.from($,_e);if(ArrayBuffer.isView($))return _.from($.buffer);throw new TypeError(et+" must be a string, a Buffer, a typed array or a DataView")},toBuffer}var syncBrowser,hasRequiredSyncBrowser;function requireSyncBrowser(){if(hasRequiredSyncBrowser)return syncBrowser;hasRequiredSyncBrowser=1;var _=requireMd5(),$=requireRipemd160(),_e=requireSha_js(),et=requireSafeBuffer$1().Buffer,tt=requirePrecondition(),rt=requireDefaultEncoding(),nt=requireToBuffer(),it=et.alloc(128),st={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function at(ht,yt,vt){var xt=ot(ht),wt=ht==="sha512"||ht==="sha384"?128:64;yt.length>wt?yt=xt(yt):yt.length<wt&&(yt=et.concat([yt,it],wt));for(var Et=et.allocUnsafe(wt+st[ht]),At=et.allocUnsafe(wt+st[ht]),jt=0;jt<wt;jt++)Et[jt]=yt[jt]^54,At[jt]=yt[jt]^92;var kt=et.allocUnsafe(wt+vt+4);Et.copy(kt,0,0,wt),this.ipad1=kt,this.ipad2=Et,this.opad=At,this.alg=ht,this.blocksize=wt,this.hash=xt,this.size=st[ht]}at.prototype.run=function(ht,yt){ht.copy(yt,this.blocksize);var vt=this.hash(yt);return vt.copy(this.opad,this.blocksize),this.hash(this.opad)};function ot(ht){function yt(xt){return _e(ht).update(xt).digest()}function vt(xt){return new $().update(xt).digest()}return ht==="rmd160"||ht==="ripemd160"?vt:ht==="md5"?_:yt}function dt(ht,yt,vt,xt,wt){tt(vt,xt),ht=nt(ht,rt,"Password"),yt=nt(yt,rt,"Salt"),wt=wt||"sha1";var Et=new at(wt,ht,yt.length),At=et.allocUnsafe(xt),jt=et.allocUnsafe(yt.length+4);yt.copy(jt,0,0,yt.length);for(var kt=0,Lt=st[wt],Bt=Math.ceil(xt/Lt),Gt=1;Gt<=Bt;Gt++){jt.writeUInt32BE(Gt,yt.length);for(var er=Et.run(jt,Et.ipad1),tr=er,ar=1;ar<vt;ar++){tr=Et.run(tr,Et.ipad2);for(var Mt=0;Mt<Lt;Mt++)er[Mt]^=tr[Mt]}er.copy(At,kt),kt+=Lt}return At}return syncBrowser=dt,syncBrowser}var async,hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var _=requireSafeBuffer$1().Buffer,$=requirePrecondition(),_e=requireDefaultEncoding(),et=requireSyncBrowser(),tt=requireToBuffer(),rt,nt=commonjsGlobal.crypto&&commonjsGlobal.crypto.subtle,it={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},st=[];function at(vt){if(commonjsGlobal.process&&!commonjsGlobal.process.browser||!nt||!nt.importKey||!nt.deriveBits)return Promise.resolve(!1);if(st[vt]!==void 0)return st[vt];rt=rt||_.alloc(8);var xt=ht(rt,rt,10,128,vt).then(function(){return!0}).catch(function(){return!1});return st[vt]=xt,xt}var ot;function dt(){return ot||(commonjsGlobal.process&&commonjsGlobal.process.nextTick?ot=commonjsGlobal.process.nextTick:commonjsGlobal.queueMicrotask?ot=commonjsGlobal.queueMicrotask:commonjsGlobal.setImmediate?ot=commonjsGlobal.setImmediate:ot=commonjsGlobal.setTimeout,ot)}function ht(vt,xt,wt,Et,At){return nt.importKey("raw",vt,{name:"PBKDF2"},!1,["deriveBits"]).then(function(jt){return nt.deriveBits({name:"PBKDF2",salt:xt,iterations:wt,hash:{name:At}},jt,Et<<3)}).then(function(jt){return _.from(jt)})}function yt(vt,xt){vt.then(function(wt){dt()(function(){xt(null,wt)})},function(wt){dt()(function(){xt(wt)})})}return async=function(vt,xt,wt,Et,At,jt){typeof At=="function"&&(jt=At,At=void 0),At=At||"sha1";var kt=it[At.toLowerCase()];if(!kt||typeof commonjsGlobal.Promise!="function"){dt()(function(){var Lt;try{Lt=et(vt,xt,wt,Et,At)}catch(Bt){return jt(Bt)}jt(null,Lt)});return}if($(wt,Et),vt=tt(vt,_e,"Password"),xt=tt(xt,_e,"Salt"),typeof jt!="function")throw new Error("No callback provided to pbkdf2");yt(at(kt).then(function(Lt){return Lt?ht(vt,xt,wt,Et,kt):et(vt,xt,wt,Et,At)}),jt)},async}var hasRequiredBrowser$7;function requireBrowser$7(){return hasRequiredBrowser$7||(hasRequiredBrowser$7=1,browser$8.pbkdf2=requireAsync(),browser$8.pbkdf2Sync=requireSyncBrowser()),browser$8}var browser$7={},des$1={},utils$3={},hasRequiredUtils$3;function requireUtils$3(){if(hasRequiredUtils$3)return utils$3;hasRequiredUtils$3=1,utils$3.readUInt32BE=function(tt,rt){var nt=tt[0+rt]<<24|tt[1+rt]<<16|tt[2+rt]<<8|tt[3+rt];return nt>>>0},utils$3.writeUInt32BE=function(tt,rt,nt){tt[0+nt]=rt>>>24,tt[1+nt]=rt>>>16&255,tt[2+nt]=rt>>>8&255,tt[3+nt]=rt&255},utils$3.ip=function(tt,rt,nt,it){for(var st=0,at=0,ot=6;ot>=0;ot-=2){for(var dt=0;dt<=24;dt+=8)st<<=1,st|=rt>>>dt+ot&1;for(var dt=0;dt<=24;dt+=8)st<<=1,st|=tt>>>dt+ot&1}for(var ot=6;ot>=0;ot-=2){for(var dt=1;dt<=25;dt+=8)at<<=1,at|=rt>>>dt+ot&1;for(var dt=1;dt<=25;dt+=8)at<<=1,at|=tt>>>dt+ot&1}nt[it+0]=st>>>0,nt[it+1]=at>>>0},utils$3.rip=function(tt,rt,nt,it){for(var st=0,at=0,ot=0;ot<4;ot++)for(var dt=24;dt>=0;dt-=8)st<<=1,st|=rt>>>dt+ot&1,st<<=1,st|=tt>>>dt+ot&1;for(var ot=4;ot<8;ot++)for(var dt=24;dt>=0;dt-=8)at<<=1,at|=rt>>>dt+ot&1,at<<=1,at|=tt>>>dt+ot&1;nt[it+0]=st>>>0,nt[it+1]=at>>>0},utils$3.pc1=function(tt,rt,nt,it){for(var st=0,at=0,ot=7;ot>=5;ot--){for(var dt=0;dt<=24;dt+=8)st<<=1,st|=rt>>dt+ot&1;for(var dt=0;dt<=24;dt+=8)st<<=1,st|=tt>>dt+ot&1}for(var dt=0;dt<=24;dt+=8)st<<=1,st|=rt>>dt+ot&1;for(var ot=1;ot<=3;ot++){for(var dt=0;dt<=24;dt+=8)at<<=1,at|=rt>>dt+ot&1;for(var dt=0;dt<=24;dt+=8)at<<=1,at|=tt>>dt+ot&1}for(var dt=0;dt<=24;dt+=8)at<<=1,at|=tt>>dt+ot&1;nt[it+0]=st>>>0,nt[it+1]=at>>>0},utils$3.r28shl=function(tt,rt){return tt<<rt&268435455|tt>>>28-rt};var _=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$3.pc2=function(tt,rt,nt,it){for(var st=0,at=0,ot=_.length>>>1,dt=0;dt<ot;dt++)st<<=1,st|=tt>>>_[dt]&1;for(var dt=ot;dt<_.length;dt++)at<<=1,at|=rt>>>_[dt]&1;nt[it+0]=st>>>0,nt[it+1]=at>>>0},utils$3.expand=function(tt,rt,nt){var it=0,st=0;it=(tt&1)<<5|tt>>>27;for(var at=23;at>=15;at-=4)it<<=6,it|=tt>>>at&63;for(var at=11;at>=3;at-=4)st|=tt>>>at&63,st<<=6;st|=(tt&31)<<1|tt>>>31,rt[nt+0]=it>>>0,rt[nt+1]=st>>>0};var $=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$3.substitute=function(tt,rt){for(var nt=0,it=0;it<4;it++){var st=tt>>>18-it*6&63,at=$[it*64+st];nt<<=4,nt|=at}for(var it=0;it<4;it++){var st=rt>>>18-it*6&63,at=$[4*64+it*64+st];nt<<=4,nt|=at}return nt>>>0};var _e=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return utils$3.permute=function(tt){for(var rt=0,nt=0;nt<_e.length;nt++)rt<<=1,rt|=tt>>>_e[nt]&1;return rt>>>0},utils$3.padSplit=function(tt,rt,nt){for(var it=tt.toString(2);it.length<rt;)it="0"+it;for(var st=[],at=0;at<rt;at+=nt)st.push(it.slice(at,at+nt));return st.join(" ")},utils$3}var minimalisticAssert,hasRequiredMinimalisticAssert;function requireMinimalisticAssert(){if(hasRequiredMinimalisticAssert)return minimalisticAssert;hasRequiredMinimalisticAssert=1,minimalisticAssert=_;function _($,_e){if(!$)throw new Error(_e||"Assertion failed")}return _.equal=function(_e,et,tt){if(_e!=et)throw new Error(tt||"Assertion failed: "+_e+" != "+et)},minimalisticAssert}var cipher,hasRequiredCipher;function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var _=requireMinimalisticAssert();function $(_e){this.options=_e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=_e.padding!==!1}return cipher=$,$.prototype._init=function(){},$.prototype.update=function(et){return et.length===0?[]:this.type==="decrypt"?this._updateDecrypt(et):this._updateEncrypt(et)},$.prototype._buffer=function(et,tt){for(var rt=Math.min(this.buffer.length-this.bufferOff,et.length-tt),nt=0;nt<rt;nt++)this.buffer[this.bufferOff+nt]=et[tt+nt];return this.bufferOff+=rt,rt},$.prototype._flushBuffer=function(et,tt){return this._update(this.buffer,0,et,tt),this.bufferOff=0,this.blockSize},$.prototype._updateEncrypt=function(et){var tt=0,rt=0,nt=(this.bufferOff+et.length)/this.blockSize|0,it=new Array(nt*this.blockSize);this.bufferOff!==0&&(tt+=this._buffer(et,tt),this.bufferOff===this.buffer.length&&(rt+=this._flushBuffer(it,rt)));for(var st=et.length-(et.length-tt)%this.blockSize;tt<st;tt+=this.blockSize)this._update(et,tt,it,rt),rt+=this.blockSize;for(;tt<et.length;tt++,this.bufferOff++)this.buffer[this.bufferOff]=et[tt];return it},$.prototype._updateDecrypt=function(et){for(var tt=0,rt=0,nt=Math.ceil((this.bufferOff+et.length)/this.blockSize)-1,it=new Array(nt*this.blockSize);nt>0;nt--)tt+=this._buffer(et,tt),rt+=this._flushBuffer(it,rt);return tt+=this._buffer(et,tt),it},$.prototype.final=function(et){var tt;et&&(tt=this.update(et));var rt;return this.type==="encrypt"?rt=this._finalEncrypt():rt=this._finalDecrypt(),tt?tt.concat(rt):rt},$.prototype._pad=function(et,tt){if(tt===0)return!1;for(;tt<et.length;)et[tt++]=0;return!0},$.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var et=new Array(this.blockSize);return this._update(this.buffer,0,et,0),et},$.prototype._unpad=function(et){return et},$.prototype._finalDecrypt=function(){_.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var et=new Array(this.blockSize);return this._flushBuffer(et,0),this._unpad(et)},cipher}var des,hasRequiredDes$1;function requireDes$1(){if(hasRequiredDes$1)return des;hasRequiredDes$1=1;var _=requireMinimalisticAssert(),$=requireInherits_browser(),_e=requireUtils$3(),et=requireCipher();function tt(){this.tmp=new Array(2),this.keys=null}function rt(it){et.call(this,it);var st=new tt;this._desState=st,this.deriveKeys(st,it.key)}$(rt,et),des=rt,rt.create=function(st){return new rt(st)};var nt=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return rt.prototype.deriveKeys=function(st,at){st.keys=new Array(16*2),_.equal(at.length,this.blockSize,"Invalid key length");var ot=_e.readUInt32BE(at,0),dt=_e.readUInt32BE(at,4);_e.pc1(ot,dt,st.tmp,0),ot=st.tmp[0],dt=st.tmp[1];for(var ht=0;ht<st.keys.length;ht+=2){var yt=nt[ht>>>1];ot=_e.r28shl(ot,yt),dt=_e.r28shl(dt,yt),_e.pc2(ot,dt,st.keys,ht)}},rt.prototype._update=function(st,at,ot,dt){var ht=this._desState,yt=_e.readUInt32BE(st,at),vt=_e.readUInt32BE(st,at+4);_e.ip(yt,vt,ht.tmp,0),yt=ht.tmp[0],vt=ht.tmp[1],this.type==="encrypt"?this._encrypt(ht,yt,vt,ht.tmp,0):this._decrypt(ht,yt,vt,ht.tmp,0),yt=ht.tmp[0],vt=ht.tmp[1],_e.writeUInt32BE(ot,yt,dt),_e.writeUInt32BE(ot,vt,dt+4)},rt.prototype._pad=function(st,at){if(this.padding===!1)return!1;for(var ot=st.length-at,dt=at;dt<st.length;dt++)st[dt]=ot;return!0},rt.prototype._unpad=function(st){if(this.padding===!1)return st;for(var at=st[st.length-1],ot=st.length-at;ot<st.length;ot++)_.equal(st[ot],at);return st.slice(0,st.length-at)},rt.prototype._encrypt=function(st,at,ot,dt,ht){for(var yt=at,vt=ot,xt=0;xt<st.keys.length;xt+=2){var wt=st.keys[xt],Et=st.keys[xt+1];_e.expand(vt,st.tmp,0),wt^=st.tmp[0],Et^=st.tmp[1];var At=_e.substitute(wt,Et),jt=_e.permute(At),kt=vt;vt=(yt^jt)>>>0,yt=kt}_e.rip(vt,yt,dt,ht)},rt.prototype._decrypt=function(st,at,ot,dt,ht){for(var yt=ot,vt=at,xt=st.keys.length-2;xt>=0;xt-=2){var wt=st.keys[xt],Et=st.keys[xt+1];_e.expand(yt,st.tmp,0),wt^=st.tmp[0],Et^=st.tmp[1];var At=_e.substitute(wt,Et),jt=_e.permute(At),kt=yt;yt=(vt^jt)>>>0,vt=kt}_e.rip(yt,vt,dt,ht)},des}var cbc$1={},hasRequiredCbc$1;function requireCbc$1(){if(hasRequiredCbc$1)return cbc$1;hasRequiredCbc$1=1;var _=requireMinimalisticAssert(),$=requireInherits_browser(),_e={};function et(rt){_.equal(rt.length,8,"Invalid IV length"),this.iv=new Array(8);for(var nt=0;nt<this.iv.length;nt++)this.iv[nt]=rt[nt]}function tt(rt){function nt(ot){rt.call(this,ot),this._cbcInit()}$(nt,rt);for(var it=Object.keys(_e),st=0;st<it.length;st++){var at=it[st];nt.prototype[at]=_e[at]}return nt.create=function(dt){return new nt(dt)},nt}return cbc$1.instantiate=tt,_e._cbcInit=function(){var nt=new et(this.options.iv);this._cbcState=nt},_e._update=function(nt,it,st,at){var ot=this._cbcState,dt=this.constructor.super_.prototype,ht=ot.iv;if(this.type==="encrypt"){for(var yt=0;yt<this.blockSize;yt++)ht[yt]^=nt[it+yt];dt._update.call(this,ht,0,st,at);for(var yt=0;yt<this.blockSize;yt++)ht[yt]=st[at+yt]}else{dt._update.call(this,nt,it,st,at);for(var yt=0;yt<this.blockSize;yt++)st[at+yt]^=ht[yt];for(var yt=0;yt<this.blockSize;yt++)ht[yt]=nt[it+yt]}},cbc$1}var ede,hasRequiredEde;function requireEde(){if(hasRequiredEde)return ede;hasRequiredEde=1;var _=requireMinimalisticAssert(),$=requireInherits_browser(),_e=requireCipher(),et=requireDes$1();function tt(nt,it){_.equal(it.length,24,"Invalid key length");var st=it.slice(0,8),at=it.slice(8,16),ot=it.slice(16,24);nt==="encrypt"?this.ciphers=[et.create({type:"encrypt",key:st}),et.create({type:"decrypt",key:at}),et.create({type:"encrypt",key:ot})]:this.ciphers=[et.create({type:"decrypt",key:ot}),et.create({type:"encrypt",key:at}),et.create({type:"decrypt",key:st})]}function rt(nt){_e.call(this,nt);var it=new tt(this.type,this.options.key);this._edeState=it}return $(rt,_e),ede=rt,rt.create=function(it){return new rt(it)},rt.prototype._update=function(it,st,at,ot){var dt=this._edeState;dt.ciphers[0]._update(it,st,at,ot),dt.ciphers[1]._update(at,ot,at,ot),dt.ciphers[2]._update(at,ot,at,ot)},rt.prototype._pad=et.prototype._pad,rt.prototype._unpad=et.prototype._unpad,ede}var hasRequiredDes;function requireDes(){return hasRequiredDes||(hasRequiredDes=1,des$1.utils=requireUtils$3(),des$1.Cipher=requireCipher(),des$1.DES=requireDes$1(),des$1.CBC=requireCbc$1(),des$1.EDE=requireEde()),des$1}var browserifyDes,hasRequiredBrowserifyDes;function requireBrowserifyDes(){if(hasRequiredBrowserifyDes)return browserifyDes;hasRequiredBrowserifyDes=1;var _=requireCipherBase(),$=requireDes(),_e=requireInherits_browser(),et=requireSafeBuffer$1().Buffer,tt={"des-ede3-cbc":$.CBC.instantiate($.EDE),"des-ede3":$.EDE,"des-ede-cbc":$.CBC.instantiate($.EDE),"des-ede":$.EDE,"des-cbc":$.CBC.instantiate($.DES),"des-ecb":$.DES};tt.des=tt["des-cbc"],tt.des3=tt["des-ede3-cbc"],browserifyDes=rt,_e(rt,_);function rt(nt){_.call(this);var it=nt.mode.toLowerCase(),st=tt[it],at;nt.decrypt?at="decrypt":at="encrypt";var ot=nt.key;et.isBuffer(ot)||(ot=et.from(ot)),(it==="des-ede"||it==="des-ede-cbc")&&(ot=et.concat([ot,ot.slice(0,8)]));var dt=nt.iv;et.isBuffer(dt)||(dt=et.from(dt)),this._des=st.create({key:ot,iv:dt,type:at})}return rt.prototype._update=function(nt){return et.from(this._des.update(nt))},rt.prototype._final=function(){return et.from(this._des.final())},browserifyDes}var browser$6={},encrypter={},ecb={},hasRequiredEcb;function requireEcb(){return hasRequiredEcb||(hasRequiredEcb=1,ecb.encrypt=function(_,$){return _._cipher.encryptBlock($)},ecb.decrypt=function(_,$){return _._cipher.decryptBlock($)}),ecb}var cbc={},bufferXor,hasRequiredBufferXor;function requireBufferXor(){return hasRequiredBufferXor||(hasRequiredBufferXor=1,bufferXor=function($,_e){for(var et=Math.min($.length,_e.length),tt=new Buffer(et),rt=0;rt<et;++rt)tt[rt]=$[rt]^_e[rt];return tt}),bufferXor}var hasRequiredCbc;function requireCbc(){if(hasRequiredCbc)return cbc;hasRequiredCbc=1;var _=requireBufferXor();return cbc.encrypt=function($,_e){var et=_(_e,$._prev);return $._prev=$._cipher.encryptBlock(et),$._prev},cbc.decrypt=function($,_e){var et=$._prev;$._prev=_e;var tt=$._cipher.decryptBlock(_e);return _(tt,et)},cbc}var cfb={},hasRequiredCfb;function requireCfb(){if(hasRequiredCfb)return cfb;hasRequiredCfb=1;var _=requireSafeBuffer$1().Buffer,$=requireBufferXor();function _e(et,tt,rt){var nt=tt.length,it=$(tt,et._cache);return et._cache=et._cache.slice(nt),et._prev=_.concat([et._prev,rt?tt:it]),it}return cfb.encrypt=function(et,tt,rt){for(var nt=_.allocUnsafe(0),it;tt.length;)if(et._cache.length===0&&(et._cache=et._cipher.encryptBlock(et._prev),et._prev=_.allocUnsafe(0)),et._cache.length<=tt.length)it=et._cache.length,nt=_.concat([nt,_e(et,tt.slice(0,it),rt)]),tt=tt.slice(it);else{nt=_.concat([nt,_e(et,tt,rt)]);break}return nt},cfb}var cfb8={},hasRequiredCfb8;function requireCfb8(){if(hasRequiredCfb8)return cfb8;hasRequiredCfb8=1;var _=requireSafeBuffer$1().Buffer;function $(_e,et,tt){var rt=_e._cipher.encryptBlock(_e._prev),nt=rt[0]^et;return _e._prev=_.concat([_e._prev.slice(1),_.from([tt?et:nt])]),nt}return cfb8.encrypt=function(_e,et,tt){for(var rt=et.length,nt=_.allocUnsafe(rt),it=-1;++it<rt;)nt[it]=$(_e,et[it],tt);return nt},cfb8}var cfb1={},hasRequiredCfb1;function requireCfb1(){if(hasRequiredCfb1)return cfb1;hasRequiredCfb1=1;var _=requireSafeBuffer$1().Buffer;function $(et,tt,rt){for(var nt,it=-1,st=8,at=0,ot,dt;++it<st;)nt=et._cipher.encryptBlock(et._prev),ot=tt&1<<7-it?128:0,dt=nt[0]^ot,at+=(dt&128)>>it%8,et._prev=_e(et._prev,rt?ot:dt);return at}function _e(et,tt){var rt=et.length,nt=-1,it=_.allocUnsafe(et.length);for(et=_.concat([et,_.from([tt])]);++nt<rt;)it[nt]=et[nt]<<1|et[nt+1]>>7;return it}return cfb1.encrypt=function(et,tt,rt){for(var nt=tt.length,it=_.allocUnsafe(nt),st=-1;++st<nt;)it[st]=$(et,tt[st],rt);return it},cfb1}var ofb={},hasRequiredOfb;function requireOfb(){if(hasRequiredOfb)return ofb;hasRequiredOfb=1;var _=requireBufferXor();function $(_e){return _e._prev=_e._cipher.encryptBlock(_e._prev),_e._prev}return ofb.encrypt=function(_e,et){for(;_e._cache.length<et.length;)_e._cache=Buffer.concat([_e._cache,$(_e)]);var tt=_e._cache.slice(0,et.length);return _e._cache=_e._cache.slice(et.length),_(et,tt)},ofb}var ctr={},incr32_1,hasRequiredIncr32;function requireIncr32(){if(hasRequiredIncr32)return incr32_1;hasRequiredIncr32=1;function _($){for(var _e=$.length,et;_e--;)if(et=$.readUInt8(_e),et===255)$.writeUInt8(0,_e);else{et++,$.writeUInt8(et,_e);break}}return incr32_1=_,incr32_1}var hasRequiredCtr;function requireCtr(){if(hasRequiredCtr)return ctr;hasRequiredCtr=1;var _=requireBufferXor(),$=requireSafeBuffer$1().Buffer,_e=requireIncr32();function et(rt){var nt=rt._cipher.encryptBlockRaw(rt._prev);return _e(rt._prev),nt}var tt=16;return ctr.encrypt=function(rt,nt){var it=Math.ceil(nt.length/tt),st=rt._cache.length;rt._cache=$.concat([rt._cache,$.allocUnsafe(it*tt)]);for(var at=0;at<it;at++){var ot=et(rt),dt=st+at*tt;rt._cache.writeUInt32BE(ot[0],dt+0),rt._cache.writeUInt32BE(ot[1],dt+4),rt._cache.writeUInt32BE(ot[2],dt+8),rt._cache.writeUInt32BE(ot[3],dt+12)}var ht=rt._cache.slice(0,nt.length);return rt._cache=rt._cache.slice(nt.length),_(nt,ht)},ctr}const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modes_1,hasRequiredModes$1;function requireModes$1(){if(hasRequiredModes$1)return modes_1;hasRequiredModes$1=1;var _={ECB:requireEcb(),CBC:requireCbc(),CFB:requireCfb(),CFB8:requireCfb8(),CFB1:requireCfb1(),OFB:requireOfb(),CTR:requireCtr(),GCM:requireCtr()},$=require$$2;for(var _e in $)$[_e].module=_[$[_e].mode];return modes_1=$,modes_1}var aes={},hasRequiredAes;function requireAes(){if(hasRequiredAes)return aes;hasRequiredAes=1;var _=requireSafeBuffer$1().Buffer;function $(it){_.isBuffer(it)||(it=_.from(it));for(var st=it.length/4|0,at=new Array(st),ot=0;ot<st;ot++)at[ot]=it.readUInt32BE(ot*4);return at}function _e(it){for(var st=0;st<it.length;it++)it[st]=0}function et(it,st,at,ot,dt){for(var ht=at[0],yt=at[1],vt=at[2],xt=at[3],wt=it[0]^st[0],Et=it[1]^st[1],At=it[2]^st[2],jt=it[3]^st[3],kt,Lt,Bt,Gt,er=4,tr=1;tr<dt;tr++)kt=ht[wt>>>24]^yt[Et>>>16&255]^vt[At>>>8&255]^xt[jt&255]^st[er++],Lt=ht[Et>>>24]^yt[At>>>16&255]^vt[jt>>>8&255]^xt[wt&255]^st[er++],Bt=ht[At>>>24]^yt[jt>>>16&255]^vt[wt>>>8&255]^xt[Et&255]^st[er++],Gt=ht[jt>>>24]^yt[wt>>>16&255]^vt[Et>>>8&255]^xt[At&255]^st[er++],wt=kt,Et=Lt,At=Bt,jt=Gt;return kt=(ot[wt>>>24]<<24|ot[Et>>>16&255]<<16|ot[At>>>8&255]<<8|ot[jt&255])^st[er++],Lt=(ot[Et>>>24]<<24|ot[At>>>16&255]<<16|ot[jt>>>8&255]<<8|ot[wt&255])^st[er++],Bt=(ot[At>>>24]<<24|ot[jt>>>16&255]<<16|ot[wt>>>8&255]<<8|ot[Et&255])^st[er++],Gt=(ot[jt>>>24]<<24|ot[wt>>>16&255]<<16|ot[Et>>>8&255]<<8|ot[At&255])^st[er++],kt=kt>>>0,Lt=Lt>>>0,Bt=Bt>>>0,Gt=Gt>>>0,[kt,Lt,Bt,Gt]}var tt=[0,1,2,4,8,16,32,64,128,27,54],rt=function(){for(var it=new Array(256),st=0;st<256;st++)st<128?it[st]=st<<1:it[st]=st<<1^283;for(var at=[],ot=[],dt=[[],[],[],[]],ht=[[],[],[],[]],yt=0,vt=0,xt=0;xt<256;++xt){var wt=vt^vt<<1^vt<<2^vt<<3^vt<<4;wt=wt>>>8^wt&255^99,at[yt]=wt,ot[wt]=yt;var Et=it[yt],At=it[Et],jt=it[At],kt=it[wt]*257^wt*16843008;dt[0][yt]=kt<<24|kt>>>8,dt[1][yt]=kt<<16|kt>>>16,dt[2][yt]=kt<<8|kt>>>24,dt[3][yt]=kt,kt=jt*16843009^At*65537^Et*257^yt*16843008,ht[0][wt]=kt<<24|kt>>>8,ht[1][wt]=kt<<16|kt>>>16,ht[2][wt]=kt<<8|kt>>>24,ht[3][wt]=kt,yt===0?yt=vt=1:(yt=Et^it[it[it[jt^Et]]],vt^=it[it[vt]])}return{SBOX:at,INV_SBOX:ot,SUB_MIX:dt,INV_SUB_MIX:ht}}();function nt(it){this._key=$(it),this._reset()}return nt.blockSize=4*4,nt.keySize=256/8,nt.prototype.blockSize=nt.blockSize,nt.prototype.keySize=nt.keySize,nt.prototype._reset=function(){for(var it=this._key,st=it.length,at=st+6,ot=(at+1)*4,dt=[],ht=0;ht<st;ht++)dt[ht]=it[ht];for(ht=st;ht<ot;ht++){var yt=dt[ht-1];ht%st===0?(yt=yt<<8|yt>>>24,yt=rt.SBOX[yt>>>24]<<24|rt.SBOX[yt>>>16&255]<<16|rt.SBOX[yt>>>8&255]<<8|rt.SBOX[yt&255],yt^=tt[ht/st|0]<<24):st>6&&ht%st===4&&(yt=rt.SBOX[yt>>>24]<<24|rt.SBOX[yt>>>16&255]<<16|rt.SBOX[yt>>>8&255]<<8|rt.SBOX[yt&255]),dt[ht]=dt[ht-st]^yt}for(var vt=[],xt=0;xt<ot;xt++){var wt=ot-xt,Et=dt[wt-(xt%4?0:4)];xt<4||wt<=4?vt[xt]=Et:vt[xt]=rt.INV_SUB_MIX[0][rt.SBOX[Et>>>24]]^rt.INV_SUB_MIX[1][rt.SBOX[Et>>>16&255]]^rt.INV_SUB_MIX[2][rt.SBOX[Et>>>8&255]]^rt.INV_SUB_MIX[3][rt.SBOX[Et&255]]}this._nRounds=at,this._keySchedule=dt,this._invKeySchedule=vt},nt.prototype.encryptBlockRaw=function(it){return it=$(it),et(it,this._keySchedule,rt.SUB_MIX,rt.SBOX,this._nRounds)},nt.prototype.encryptBlock=function(it){var st=this.encryptBlockRaw(it),at=_.allocUnsafe(16);return at.writeUInt32BE(st[0],0),at.writeUInt32BE(st[1],4),at.writeUInt32BE(st[2],8),at.writeUInt32BE(st[3],12),at},nt.prototype.decryptBlock=function(it){it=$(it);var st=it[1];it[1]=it[3],it[3]=st;var at=et(it,this._invKeySchedule,rt.INV_SUB_MIX,rt.INV_SBOX,this._nRounds),ot=_.allocUnsafe(16);return ot.writeUInt32BE(at[0],0),ot.writeUInt32BE(at[3],4),ot.writeUInt32BE(at[2],8),ot.writeUInt32BE(at[1],12),ot},nt.prototype.scrub=function(){_e(this._keySchedule),_e(this._invKeySchedule),_e(this._key)},aes.AES=nt,aes}var ghash,hasRequiredGhash;function requireGhash(){if(hasRequiredGhash)return ghash;hasRequiredGhash=1;var _=requireSafeBuffer$1().Buffer,$=_.alloc(16,0);function _e(rt){return[rt.readUInt32BE(0),rt.readUInt32BE(4),rt.readUInt32BE(8),rt.readUInt32BE(12)]}function et(rt){var nt=_.allocUnsafe(16);return nt.writeUInt32BE(rt[0]>>>0,0),nt.writeUInt32BE(rt[1]>>>0,4),nt.writeUInt32BE(rt[2]>>>0,8),nt.writeUInt32BE(rt[3]>>>0,12),nt}function tt(rt){this.h=rt,this.state=_.alloc(16,0),this.cache=_.allocUnsafe(0)}return tt.prototype.ghash=function(rt){for(var nt=-1;++nt<rt.length;)this.state[nt]^=rt[nt];this._multiply()},tt.prototype._multiply=function(){for(var rt=_e(this.h),nt=[0,0,0,0],it,st,at,ot=-1;++ot<128;){for(st=(this.state[~~(ot/8)]&1<<7-ot%8)!==0,st&&(nt[0]^=rt[0],nt[1]^=rt[1],nt[2]^=rt[2],nt[3]^=rt[3]),at=(rt[3]&1)!==0,it=3;it>0;it--)rt[it]=rt[it]>>>1|(rt[it-1]&1)<<31;rt[0]=rt[0]>>>1,at&&(rt[0]=rt[0]^225<<24)}this.state=et(nt)},tt.prototype.update=function(rt){this.cache=_.concat([this.cache,rt]);for(var nt;this.cache.length>=16;)nt=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(nt)},tt.prototype.final=function(rt,nt){return this.cache.length&&this.ghash(_.concat([this.cache,$],16)),this.ghash(et([0,rt,0,nt])),this.state},ghash=tt,ghash}var authCipher,hasRequiredAuthCipher;function requireAuthCipher(){if(hasRequiredAuthCipher)return authCipher;hasRequiredAuthCipher=1;var _=requireAes(),$=requireSafeBuffer$1().Buffer,_e=requireCipherBase(),et=requireInherits_browser(),tt=requireGhash(),rt=requireBufferXor(),nt=requireIncr32();function it(ot,dt){var ht=0;ot.length!==dt.length&&ht++;for(var yt=Math.min(ot.length,dt.length),vt=0;vt<yt;++vt)ht+=ot[vt]^dt[vt];return ht}function st(ot,dt,ht){if(dt.length===12)return ot._finID=$.concat([dt,$.from([0,0,0,1])]),$.concat([dt,$.from([0,0,0,2])]);var yt=new tt(ht),vt=dt.length,xt=vt%16;yt.update(dt),xt&&(xt=16-xt,yt.update($.alloc(xt,0))),yt.update($.alloc(8,0));var wt=vt*8,Et=$.alloc(8);Et.writeUIntBE(wt,0,8),yt.update(Et),ot._finID=yt.state;var At=$.from(ot._finID);return nt(At),At}function at(ot,dt,ht,yt){_e.call(this);var vt=$.alloc(4,0);this._cipher=new _.AES(dt);var xt=this._cipher.encryptBlock(vt);this._ghash=new tt(xt),ht=st(this,ht,xt),this._prev=$.from(ht),this._cache=$.allocUnsafe(0),this._secCache=$.allocUnsafe(0),this._decrypt=yt,this._alen=0,this._len=0,this._mode=ot,this._authTag=null,this._called=!1}return et(at,_e),at.prototype._update=function(ot){if(!this._called&&this._alen){var dt=16-this._alen%16;dt<16&&(dt=$.alloc(dt,0),this._ghash.update(dt))}this._called=!0;var ht=this._mode.encrypt(this,ot);return this._decrypt?this._ghash.update(ot):this._ghash.update(ht),this._len+=ot.length,ht},at.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var ot=rt(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&it(ot,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=ot,this._cipher.scrub()},at.prototype.getAuthTag=function(){if(this._decrypt||!$.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},at.prototype.setAuthTag=function(dt){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=dt},at.prototype.setAAD=function(dt){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(dt),this._alen+=dt.length},authCipher=at,authCipher}var streamCipher,hasRequiredStreamCipher;function requireStreamCipher(){if(hasRequiredStreamCipher)return streamCipher;hasRequiredStreamCipher=1;var _=requireAes(),$=requireSafeBuffer$1().Buffer,_e=requireCipherBase(),et=requireInherits_browser();function tt(rt,nt,it,st){_e.call(this),this._cipher=new _.AES(nt),this._prev=$.from(it),this._cache=$.allocUnsafe(0),this._secCache=$.allocUnsafe(0),this._decrypt=st,this._mode=rt}return et(tt,_e),tt.prototype._update=function(rt){return this._mode.encrypt(this,rt,this._decrypt)},tt.prototype._final=function(){this._cipher.scrub()},streamCipher=tt,streamCipher}var evp_bytestokey,hasRequiredEvp_bytestokey;function requireEvp_bytestokey(){if(hasRequiredEvp_bytestokey)return evp_bytestokey;hasRequiredEvp_bytestokey=1;var _=requireSafeBuffer$1().Buffer,$=requireMd5_js();function _e(et,tt,rt,nt){if(_.isBuffer(et)||(et=_.from(et,"binary")),tt&&(_.isBuffer(tt)||(tt=_.from(tt,"binary")),tt.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var it=rt/8,st=_.alloc(it),at=_.alloc(nt||0),ot=_.alloc(0);it>0||nt>0;){var dt=new $;dt.update(ot),dt.update(et),tt&&dt.update(tt),ot=dt.digest();var ht=0;if(it>0){var yt=st.length-it;ht=Math.min(it,ot.length),ot.copy(st,yt,0,ht),it-=ht}if(ht<ot.length&&nt>0){var vt=at.length-nt,xt=Math.min(nt,ot.length-ht);ot.copy(at,vt,ht,ht+xt),nt-=xt}}return ot.fill(0),{key:st,iv:at}}return evp_bytestokey=_e,evp_bytestokey}var hasRequiredEncrypter;function requireEncrypter(){if(hasRequiredEncrypter)return encrypter;hasRequiredEncrypter=1;var _=requireModes$1(),$=requireAuthCipher(),_e=requireSafeBuffer$1().Buffer,et=requireStreamCipher(),tt=requireCipherBase(),rt=requireAes(),nt=requireEvp_bytestokey(),it=requireInherits_browser();function st(yt,vt,xt){tt.call(this),this._cache=new ot,this._cipher=new rt.AES(vt),this._prev=_e.from(xt),this._mode=yt,this._autopadding=!0}it(st,tt),st.prototype._update=function(yt){this._cache.add(yt);for(var vt,xt,wt=[];vt=this._cache.get();)xt=this._mode.encrypt(this,vt),wt.push(xt);return _e.concat(wt)};var at=_e.alloc(16,16);st.prototype._final=function(){var yt=this._cache.flush();if(this._autopadding)return yt=this._mode.encrypt(this,yt),this._cipher.scrub(),yt;if(!yt.equals(at))throw this._cipher.scrub(),new Error("data not multiple of block length")},st.prototype.setAutoPadding=function(yt){return this._autopadding=!!yt,this};function ot(){this.cache=_e.allocUnsafe(0)}ot.prototype.add=function(yt){this.cache=_e.concat([this.cache,yt])},ot.prototype.get=function(){if(this.cache.length>15){var yt=this.cache.slice(0,16);return this.cache=this.cache.slice(16),yt}return null},ot.prototype.flush=function(){for(var yt=16-this.cache.length,vt=_e.allocUnsafe(yt),xt=-1;++xt<yt;)vt.writeUInt8(yt,xt);return _e.concat([this.cache,vt])};function dt(yt,vt,xt){var wt=_[yt.toLowerCase()];if(!wt)throw new TypeError("invalid suite type");if(typeof vt=="string"&&(vt=_e.from(vt)),vt.length!==wt.key/8)throw new TypeError("invalid key length "+vt.length);if(typeof xt=="string"&&(xt=_e.from(xt)),wt.mode!=="GCM"&&xt.length!==wt.iv)throw new TypeError("invalid iv length "+xt.length);return wt.type==="stream"?new et(wt.module,vt,xt):wt.type==="auth"?new $(wt.module,vt,xt):new st(wt.module,vt,xt)}function ht(yt,vt){var xt=_[yt.toLowerCase()];if(!xt)throw new TypeError("invalid suite type");var wt=nt(vt,!1,xt.key,xt.iv);return dt(yt,wt.key,wt.iv)}return encrypter.createCipheriv=dt,encrypter.createCipher=ht,encrypter}var decrypter={},hasRequiredDecrypter;function requireDecrypter(){if(hasRequiredDecrypter)return decrypter;hasRequiredDecrypter=1;var _=requireAuthCipher(),$=requireSafeBuffer$1().Buffer,_e=requireModes$1(),et=requireStreamCipher(),tt=requireCipherBase(),rt=requireAes(),nt=requireEvp_bytestokey(),it=requireInherits_browser();function st(yt,vt,xt){tt.call(this),this._cache=new at,this._last=void 0,this._cipher=new rt.AES(vt),this._prev=$.from(xt),this._mode=yt,this._autopadding=!0}it(st,tt),st.prototype._update=function(yt){this._cache.add(yt);for(var vt,xt,wt=[];vt=this._cache.get(this._autopadding);)xt=this._mode.decrypt(this,vt),wt.push(xt);return $.concat(wt)},st.prototype._final=function(){var yt=this._cache.flush();if(this._autopadding)return ot(this._mode.decrypt(this,yt));if(yt)throw new Error("data not multiple of block length")},st.prototype.setAutoPadding=function(yt){return this._autopadding=!!yt,this};function at(){this.cache=$.allocUnsafe(0)}at.prototype.add=function(yt){this.cache=$.concat([this.cache,yt])},at.prototype.get=function(yt){var vt;if(yt){if(this.cache.length>16)return vt=this.cache.slice(0,16),this.cache=this.cache.slice(16),vt}else if(this.cache.length>=16)return vt=this.cache.slice(0,16),this.cache=this.cache.slice(16),vt;return null},at.prototype.flush=function(){if(this.cache.length)return this.cache};function ot(yt){var vt=yt[15];if(vt<1||vt>16)throw new Error("unable to decrypt data");for(var xt=-1;++xt<vt;)if(yt[xt+(16-vt)]!==vt)throw new Error("unable to decrypt data");if(vt!==16)return yt.slice(0,16-vt)}function dt(yt,vt,xt){var wt=_e[yt.toLowerCase()];if(!wt)throw new TypeError("invalid suite type");if(typeof xt=="string"&&(xt=$.from(xt)),wt.mode!=="GCM"&&xt.length!==wt.iv)throw new TypeError("invalid iv length "+xt.length);if(typeof vt=="string"&&(vt=$.from(vt)),vt.length!==wt.key/8)throw new TypeError("invalid key length "+vt.length);return wt.type==="stream"?new et(wt.module,vt,xt,!0):wt.type==="auth"?new _(wt.module,vt,xt,!0):new st(wt.module,vt,xt)}function ht(yt,vt){var xt=_e[yt.toLowerCase()];if(!xt)throw new TypeError("invalid suite type");var wt=nt(vt,!1,xt.key,xt.iv);return dt(yt,wt.key,wt.iv)}return decrypter.createDecipher=ht,decrypter.createDecipheriv=dt,decrypter}var hasRequiredBrowser$6;function requireBrowser$6(){if(hasRequiredBrowser$6)return browser$6;hasRequiredBrowser$6=1;var _=requireEncrypter(),$=requireDecrypter(),_e=require$$2;function et(){return Object.keys(_e)}return browser$6.createCipher=browser$6.Cipher=_.createCipher,browser$6.createCipheriv=browser$6.Cipheriv=_.createCipheriv,browser$6.createDecipher=browser$6.Decipher=$.createDecipher,browser$6.createDecipheriv=browser$6.Decipheriv=$.createDecipheriv,browser$6.listCiphers=browser$6.getCiphers=et,browser$6}var modes={},hasRequiredModes;function requireModes(){return hasRequiredModes||(hasRequiredModes=1,function(_){_["des-ecb"]={key:8,iv:0},_["des-cbc"]=_.des={key:8,iv:8},_["des-ede3-cbc"]=_.des3={key:24,iv:8},_["des-ede3"]={key:24,iv:0},_["des-ede-cbc"]={key:16,iv:8},_["des-ede"]={key:16,iv:0}}(modes)),modes}var hasRequiredBrowser$5;function requireBrowser$5(){if(hasRequiredBrowser$5)return browser$7;hasRequiredBrowser$5=1;var _=requireBrowserifyDes(),$=requireBrowser$6(),_e=requireModes$1(),et=requireModes(),tt=requireEvp_bytestokey();function rt(ot,dt){ot=ot.toLowerCase();var ht,yt;if(_e[ot])ht=_e[ot].key,yt=_e[ot].iv;else if(et[ot])ht=et[ot].key*8,yt=et[ot].iv;else throw new TypeError("invalid suite type");var vt=tt(dt,!1,ht,yt);return it(ot,vt.key,vt.iv)}function nt(ot,dt){ot=ot.toLowerCase();var ht,yt;if(_e[ot])ht=_e[ot].key,yt=_e[ot].iv;else if(et[ot])ht=et[ot].key*8,yt=et[ot].iv;else throw new TypeError("invalid suite type");var vt=tt(dt,!1,ht,yt);return st(ot,vt.key,vt.iv)}function it(ot,dt,ht){if(ot=ot.toLowerCase(),_e[ot])return $.createCipheriv(ot,dt,ht);if(et[ot])return new _({key:dt,iv:ht,mode:ot});throw new TypeError("invalid suite type")}function st(ot,dt,ht){if(ot=ot.toLowerCase(),_e[ot])return $.createDecipheriv(ot,dt,ht);if(et[ot])return new _({key:dt,iv:ht,mode:ot,decrypt:!0});throw new TypeError("invalid suite type")}function at(){return Object.keys(et).concat($.getCiphers())}return browser$7.createCipher=browser$7.Cipher=rt,browser$7.createCipheriv=browser$7.Cipheriv=it,browser$7.createDecipher=browser$7.Decipher=nt,browser$7.createDecipheriv=browser$7.Decipheriv=st,browser$7.listCiphers=browser$7.getCiphers=at,browser$7}var browser$5={},bn$6={exports:{}};bn$6.exports;var hasRequiredBn$6;function requireBn$6(){return hasRequiredBn$6||(hasRequiredBn$6=1,function(_){(function($,_e){function et(Mt,lt){if(!Mt)throw new Error(lt||"Assertion failed")}function tt(Mt,lt){Mt.super_=lt;var mt=function(){};mt.prototype=lt.prototype,Mt.prototype=new mt,Mt.prototype.constructor=Mt}function rt(Mt,lt,mt){if(rt.isBN(Mt))return Mt;this.negative=0,this.words=null,this.length=0,this.red=null,Mt!==null&&((lt==="le"||lt==="be")&&(mt=lt,lt=10),this._init(Mt||0,lt||10,mt||"be"))}typeof $=="object"?$.exports=rt:_e.BN=rt,rt.BN=rt,rt.wordSize=26;var nt;try{typeof window<"u"&&typeof window.Buffer<"u"?nt=window.Buffer:nt=require$$0$2.Buffer}catch{}rt.isBN=function(lt){return lt instanceof rt?!0:lt!==null&&typeof lt=="object"&&lt.constructor.wordSize===rt.wordSize&&Array.isArray(lt.words)},rt.max=function(lt,mt){return lt.cmp(mt)>0?lt:mt},rt.min=function(lt,mt){return lt.cmp(mt)<0?lt:mt},rt.prototype._init=function(lt,mt,gt){if(typeof lt=="number")return this._initNumber(lt,mt,gt);if(typeof lt=="object")return this._initArray(lt,mt,gt);mt==="hex"&&(mt=16),et(mt===(mt|0)&&mt>=2&&mt<=36),lt=lt.toString().replace(/\s+/g,"");var bt=0;lt[0]==="-"&&(bt++,this.negative=1),bt<lt.length&&(mt===16?this._parseHex(lt,bt,gt):(this._parseBase(lt,mt,bt),gt==="le"&&this._initArray(this.toArray(),mt,gt)))},rt.prototype._initNumber=function(lt,mt,gt){lt<0&&(this.negative=1,lt=-lt),lt<67108864?(this.words=[lt&67108863],this.length=1):lt<4503599627370496?(this.words=[lt&67108863,lt/67108864&67108863],this.length=2):(et(lt<9007199254740992),this.words=[lt&67108863,lt/67108864&67108863,1],this.length=3),gt==="le"&&this._initArray(this.toArray(),mt,gt)},rt.prototype._initArray=function(lt,mt,gt){if(et(typeof lt.length=="number"),lt.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(lt.length/3),this.words=new Array(this.length);for(var bt=0;bt<this.length;bt++)this.words[bt]=0;var St,Nt,Pt=0;if(gt==="be")for(bt=lt.length-1,St=0;bt>=0;bt-=3)Nt=lt[bt]|lt[bt-1]<<8|lt[bt-2]<<16,this.words[St]|=Nt<<Pt&67108863,this.words[St+1]=Nt>>>26-Pt&67108863,Pt+=24,Pt>=26&&(Pt-=26,St++);else if(gt==="le")for(bt=0,St=0;bt<lt.length;bt+=3)Nt=lt[bt]|lt[bt+1]<<8|lt[bt+2]<<16,this.words[St]|=Nt<<Pt&67108863,this.words[St+1]=Nt>>>26-Pt&67108863,Pt+=24,Pt>=26&&(Pt-=26,St++);return this.strip()};function it(Mt,lt){var mt=Mt.charCodeAt(lt);return mt>=65&&mt<=70?mt-55:mt>=97&&mt<=102?mt-87:mt-48&15}function st(Mt,lt,mt){var gt=it(Mt,mt);return mt-1>=lt&&(gt|=it(Mt,mt-1)<<4),gt}rt.prototype._parseHex=function(lt,mt,gt){this.length=Math.ceil((lt.length-mt)/6),this.words=new Array(this.length);for(var bt=0;bt<this.length;bt++)this.words[bt]=0;var St=0,Nt=0,Pt;if(gt==="be")for(bt=lt.length-1;bt>=mt;bt-=2)Pt=st(lt,mt,bt)<<St,this.words[Nt]|=Pt&67108863,St>=18?(St-=18,Nt+=1,this.words[Nt]|=Pt>>>26):St+=8;else{var Tt=lt.length-mt;for(bt=Tt%2===0?mt+1:mt;bt<lt.length;bt+=2)Pt=st(lt,mt,bt)<<St,this.words[Nt]|=Pt&67108863,St>=18?(St-=18,Nt+=1,this.words[Nt]|=Pt>>>26):St+=8}this.strip()};function at(Mt,lt,mt,gt){for(var bt=0,St=Math.min(Mt.length,mt),Nt=lt;Nt<St;Nt++){var Pt=Mt.charCodeAt(Nt)-48;bt*=gt,Pt>=49?bt+=Pt-49+10:Pt>=17?bt+=Pt-17+10:bt+=Pt}return bt}rt.prototype._parseBase=function(lt,mt,gt){this.words=[0],this.length=1;for(var bt=0,St=1;St<=67108863;St*=mt)bt++;bt--,St=St/mt|0;for(var Nt=lt.length-gt,Pt=Nt%bt,Tt=Math.min(Nt,Nt-Pt)+gt,pt=0,Rt=gt;Rt<Tt;Rt+=bt)pt=at(lt,Rt,Rt+bt,mt),this.imuln(St),this.words[0]+pt<67108864?this.words[0]+=pt:this._iaddn(pt);if(Pt!==0){var zt=1;for(pt=at(lt,Rt,lt.length,mt),Rt=0;Rt<Pt;Rt++)zt*=mt;this.imuln(zt),this.words[0]+pt<67108864?this.words[0]+=pt:this._iaddn(pt)}this.strip()},rt.prototype.copy=function(lt){lt.words=new Array(this.length);for(var mt=0;mt<this.length;mt++)lt.words[mt]=this.words[mt];lt.length=this.length,lt.negative=this.negative,lt.red=this.red},rt.prototype.clone=function(){var lt=new rt(null);return this.copy(lt),lt},rt.prototype._expand=function(lt){for(;this.length<lt;)this.words[this.length++]=0;return this},rt.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},rt.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},rt.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ot=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],dt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ht=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];rt.prototype.toString=function(lt,mt){lt=lt||10,mt=mt|0||1;var gt;if(lt===16||lt==="hex"){gt="";for(var bt=0,St=0,Nt=0;Nt<this.length;Nt++){var Pt=this.words[Nt],Tt=((Pt<<bt|St)&16777215).toString(16);St=Pt>>>24-bt&16777215,bt+=2,bt>=26&&(bt-=26,Nt--),St!==0||Nt!==this.length-1?gt=ot[6-Tt.length]+Tt+gt:gt=Tt+gt}for(St!==0&&(gt=St.toString(16)+gt);gt.length%mt!==0;)gt="0"+gt;return this.negative!==0&&(gt="-"+gt),gt}if(lt===(lt|0)&&lt>=2&&lt<=36){var pt=dt[lt],Rt=ht[lt];gt="";var zt=this.clone();for(zt.negative=0;!zt.isZero();){var Yt=zt.modn(Rt).toString(lt);zt=zt.idivn(Rt),zt.isZero()?gt=Yt+gt:gt=ot[pt-Yt.length]+Yt+gt}for(this.isZero()&&(gt="0"+gt);gt.length%mt!==0;)gt="0"+gt;return this.negative!==0&&(gt="-"+gt),gt}et(!1,"Base should be between 2 and 36")},rt.prototype.toNumber=function(){var lt=this.words[0];return this.length===2?lt+=this.words[1]*67108864:this.length===3&&this.words[2]===1?lt+=4503599627370496+this.words[1]*67108864:this.length>2&&et(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-lt:lt},rt.prototype.toJSON=function(){return this.toString(16)},rt.prototype.toBuffer=function(lt,mt){return et(typeof nt<"u"),this.toArrayLike(nt,lt,mt)},rt.prototype.toArray=function(lt,mt){return this.toArrayLike(Array,lt,mt)},rt.prototype.toArrayLike=function(lt,mt,gt){var bt=this.byteLength(),St=gt||Math.max(1,bt);et(bt<=St,"byte array longer than desired length"),et(St>0,"Requested array length <= 0"),this.strip();var Nt=mt==="le",Pt=new lt(St),Tt,pt,Rt=this.clone();if(Nt){for(pt=0;!Rt.isZero();pt++)Tt=Rt.andln(255),Rt.iushrn(8),Pt[pt]=Tt;for(;pt<St;pt++)Pt[pt]=0}else{for(pt=0;pt<St-bt;pt++)Pt[pt]=0;for(pt=0;!Rt.isZero();pt++)Tt=Rt.andln(255),Rt.iushrn(8),Pt[St-pt-1]=Tt}return Pt},Math.clz32?rt.prototype._countBits=function(lt){return 32-Math.clz32(lt)}:rt.prototype._countBits=function(lt){var mt=lt,gt=0;return mt>=4096&&(gt+=13,mt>>>=13),mt>=64&&(gt+=7,mt>>>=7),mt>=8&&(gt+=4,mt>>>=4),mt>=2&&(gt+=2,mt>>>=2),gt+mt},rt.prototype._zeroBits=function(lt){if(lt===0)return 26;var mt=lt,gt=0;return mt&8191||(gt+=13,mt>>>=13),mt&127||(gt+=7,mt>>>=7),mt&15||(gt+=4,mt>>>=4),mt&3||(gt+=2,mt>>>=2),mt&1||gt++,gt},rt.prototype.bitLength=function(){var lt=this.words[this.length-1],mt=this._countBits(lt);return(this.length-1)*26+mt};function yt(Mt){for(var lt=new Array(Mt.bitLength()),mt=0;mt<lt.length;mt++){var gt=mt/26|0,bt=mt%26;lt[mt]=(Mt.words[gt]&1<<bt)>>>bt}return lt}rt.prototype.zeroBits=function(){if(this.isZero())return 0;for(var lt=0,mt=0;mt<this.length;mt++){var gt=this._zeroBits(this.words[mt]);if(lt+=gt,gt!==26)break}return lt},rt.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},rt.prototype.toTwos=function(lt){return this.negative!==0?this.abs().inotn(lt).iaddn(1):this.clone()},rt.prototype.fromTwos=function(lt){return this.testn(lt-1)?this.notn(lt).iaddn(1).ineg():this.clone()},rt.prototype.isNeg=function(){return this.negative!==0},rt.prototype.neg=function(){return this.clone().ineg()},rt.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},rt.prototype.iuor=function(lt){for(;this.length<lt.length;)this.words[this.length++]=0;for(var mt=0;mt<lt.length;mt++)this.words[mt]=this.words[mt]|lt.words[mt];return this.strip()},rt.prototype.ior=function(lt){return et((this.negative|lt.negative)===0),this.iuor(lt)},rt.prototype.or=function(lt){return this.length>lt.length?this.clone().ior(lt):lt.clone().ior(this)},rt.prototype.uor=function(lt){return this.length>lt.length?this.clone().iuor(lt):lt.clone().iuor(this)},rt.prototype.iuand=function(lt){var mt;this.length>lt.length?mt=lt:mt=this;for(var gt=0;gt<mt.length;gt++)this.words[gt]=this.words[gt]&lt.words[gt];return this.length=mt.length,this.strip()},rt.prototype.iand=function(lt){return et((this.negative|lt.negative)===0),this.iuand(lt)},rt.prototype.and=function(lt){return this.length>lt.length?this.clone().iand(lt):lt.clone().iand(this)},rt.prototype.uand=function(lt){return this.length>lt.length?this.clone().iuand(lt):lt.clone().iuand(this)},rt.prototype.iuxor=function(lt){var mt,gt;this.length>lt.length?(mt=this,gt=lt):(mt=lt,gt=this);for(var bt=0;bt<gt.length;bt++)this.words[bt]=mt.words[bt]^gt.words[bt];if(this!==mt)for(;bt<mt.length;bt++)this.words[bt]=mt.words[bt];return this.length=mt.length,this.strip()},rt.prototype.ixor=function(lt){return et((this.negative|lt.negative)===0),this.iuxor(lt)},rt.prototype.xor=function(lt){return this.length>lt.length?this.clone().ixor(lt):lt.clone().ixor(this)},rt.prototype.uxor=function(lt){return this.length>lt.length?this.clone().iuxor(lt):lt.clone().iuxor(this)},rt.prototype.inotn=function(lt){et(typeof lt=="number"&&lt>=0);var mt=Math.ceil(lt/26)|0,gt=lt%26;this._expand(mt),gt>0&&mt--;for(var bt=0;bt<mt;bt++)this.words[bt]=~this.words[bt]&67108863;return gt>0&&(this.words[bt]=~this.words[bt]&67108863>>26-gt),this.strip()},rt.prototype.notn=function(lt){return this.clone().inotn(lt)},rt.prototype.setn=function(lt,mt){et(typeof lt=="number"&&lt>=0);var gt=lt/26|0,bt=lt%26;return this._expand(gt+1),mt?this.words[gt]=this.words[gt]|1<<bt:this.words[gt]=this.words[gt]&~(1<<bt),this.strip()},rt.prototype.iadd=function(lt){var mt;if(this.negative!==0&&lt.negative===0)return this.negative=0,mt=this.isub(lt),this.negative^=1,this._normSign();if(this.negative===0&&lt.negative!==0)return lt.negative=0,mt=this.isub(lt),lt.negative=1,mt._normSign();var gt,bt;this.length>lt.length?(gt=this,bt=lt):(gt=lt,bt=this);for(var St=0,Nt=0;Nt<bt.length;Nt++)mt=(gt.words[Nt]|0)+(bt.words[Nt]|0)+St,this.words[Nt]=mt&67108863,St=mt>>>26;for(;St!==0&&Nt<gt.length;Nt++)mt=(gt.words[Nt]|0)+St,this.words[Nt]=mt&67108863,St=mt>>>26;if(this.length=gt.length,St!==0)this.words[this.length]=St,this.length++;else if(gt!==this)for(;Nt<gt.length;Nt++)this.words[Nt]=gt.words[Nt];return this},rt.prototype.add=function(lt){var mt;return lt.negative!==0&&this.negative===0?(lt.negative=0,mt=this.sub(lt),lt.negative^=1,mt):lt.negative===0&&this.negative!==0?(this.negative=0,mt=lt.sub(this),this.negative=1,mt):this.length>lt.length?this.clone().iadd(lt):lt.clone().iadd(this)},rt.prototype.isub=function(lt){if(lt.negative!==0){lt.negative=0;var mt=this.iadd(lt);return lt.negative=1,mt._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(lt),this.negative=1,this._normSign();var gt=this.cmp(lt);if(gt===0)return this.negative=0,this.length=1,this.words[0]=0,this;var bt,St;gt>0?(bt=this,St=lt):(bt=lt,St=this);for(var Nt=0,Pt=0;Pt<St.length;Pt++)mt=(bt.words[Pt]|0)-(St.words[Pt]|0)+Nt,Nt=mt>>26,this.words[Pt]=mt&67108863;for(;Nt!==0&&Pt<bt.length;Pt++)mt=(bt.words[Pt]|0)+Nt,Nt=mt>>26,this.words[Pt]=mt&67108863;if(Nt===0&&Pt<bt.length&&bt!==this)for(;Pt<bt.length;Pt++)this.words[Pt]=bt.words[Pt];return this.length=Math.max(this.length,Pt),bt!==this&&(this.negative=1),this.strip()},rt.prototype.sub=function(lt){return this.clone().isub(lt)};function vt(Mt,lt,mt){mt.negative=lt.negative^Mt.negative;var gt=Mt.length+lt.length|0;mt.length=gt,gt=gt-1|0;var bt=Mt.words[0]|0,St=lt.words[0]|0,Nt=bt*St,Pt=Nt&67108863,Tt=Nt/67108864|0;mt.words[0]=Pt;for(var pt=1;pt<gt;pt++){for(var Rt=Tt>>>26,zt=Tt&67108863,Yt=Math.min(pt,lt.length-1),ir=Math.max(0,pt-Mt.length+1);ir<=Yt;ir++){var ur=pt-ir|0;bt=Mt.words[ur]|0,St=lt.words[ir]|0,Nt=bt*St+zt,Rt+=Nt/67108864|0,zt=Nt&67108863}mt.words[pt]=zt|0,Tt=Rt|0}return Tt!==0?mt.words[pt]=Tt|0:mt.length--,mt.strip()}var xt=function(lt,mt,gt){var bt=lt.words,St=mt.words,Nt=gt.words,Pt=0,Tt,pt,Rt,zt=bt[0]|0,Yt=zt&8191,ir=zt>>>13,ur=bt[1]|0,cr=ur&8191,rr=ur>>>13,fr=bt[2]|0,dr=fr&8191,gr=fr>>>13,hr=bt[3]|0,or=hr&8191,br=hr>>>13,Rr=bt[4]|0,_r=Rr&8191,Er=Rr>>>13,Hr=bt[5]|0,xr=Hr&8191,yr=Hr>>>13,Ar=bt[6]|0,$r=Ar&8191,Tr=Ar>>>13,jr=bt[7]|0,Cr=jr&8191,Nr=jr>>>13,nn=bt[8]|0,Mr=nn&8191,Lr=nn>>>13,an=bt[9]|0,pr=an&8191,nr=an>>>13,lr=St[0]|0,vr=lr&8191,wr=lr>>>13,Pr=St[1]|0,Sr=Pr&8191,Dr=Pr>>>13,rn=St[2]|0,Ir=rn&8191,Or=rn>>>13,sn=St[3]|0,Fr=sn&8191,Kr=sn>>>13,fn=St[4]|0,Br=fn&8191,Zr=fn>>>13,hn=St[5]|0,zr=hn&8191,Xr=hn>>>13,pn=St[6]|0,Vr=pn&8191,Yr=pn>>>13,mn=St[7]|0,Ur=mn&8191,Qr=mn>>>13,gn=St[8]|0,Gr=gn&8191,Jr=gn>>>13,yn=St[9]|0,Wr=yn&8191,en=yn>>>13;gt.negative=lt.negative^mt.negative,gt.length=19,Tt=Math.imul(Yt,vr),pt=Math.imul(Yt,wr),pt=pt+Math.imul(ir,vr)|0,Rt=Math.imul(ir,wr);var on=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(on>>>26)|0,on&=67108863,Tt=Math.imul(cr,vr),pt=Math.imul(cr,wr),pt=pt+Math.imul(rr,vr)|0,Rt=Math.imul(rr,wr),Tt=Tt+Math.imul(Yt,Sr)|0,pt=pt+Math.imul(Yt,Dr)|0,pt=pt+Math.imul(ir,Sr)|0,Rt=Rt+Math.imul(ir,Dr)|0;var un=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(un>>>26)|0,un&=67108863,Tt=Math.imul(dr,vr),pt=Math.imul(dr,wr),pt=pt+Math.imul(gr,vr)|0,Rt=Math.imul(gr,wr),Tt=Tt+Math.imul(cr,Sr)|0,pt=pt+Math.imul(cr,Dr)|0,pt=pt+Math.imul(rr,Sr)|0,Rt=Rt+Math.imul(rr,Dr)|0,Tt=Tt+Math.imul(Yt,Ir)|0,pt=pt+Math.imul(Yt,Or)|0,pt=pt+Math.imul(ir,Ir)|0,Rt=Rt+Math.imul(ir,Or)|0;var wn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(wn>>>26)|0,wn&=67108863,Tt=Math.imul(or,vr),pt=Math.imul(or,wr),pt=pt+Math.imul(br,vr)|0,Rt=Math.imul(br,wr),Tt=Tt+Math.imul(dr,Sr)|0,pt=pt+Math.imul(dr,Dr)|0,pt=pt+Math.imul(gr,Sr)|0,Rt=Rt+Math.imul(gr,Dr)|0,Tt=Tt+Math.imul(cr,Ir)|0,pt=pt+Math.imul(cr,Or)|0,pt=pt+Math.imul(rr,Ir)|0,Rt=Rt+Math.imul(rr,Or)|0,Tt=Tt+Math.imul(Yt,Fr)|0,pt=pt+Math.imul(Yt,Kr)|0,pt=pt+Math.imul(ir,Fr)|0,Rt=Rt+Math.imul(ir,Kr)|0;var $n=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+($n>>>26)|0,$n&=67108863,Tt=Math.imul(_r,vr),pt=Math.imul(_r,wr),pt=pt+Math.imul(Er,vr)|0,Rt=Math.imul(Er,wr),Tt=Tt+Math.imul(or,Sr)|0,pt=pt+Math.imul(or,Dr)|0,pt=pt+Math.imul(br,Sr)|0,Rt=Rt+Math.imul(br,Dr)|0,Tt=Tt+Math.imul(dr,Ir)|0,pt=pt+Math.imul(dr,Or)|0,pt=pt+Math.imul(gr,Ir)|0,Rt=Rt+Math.imul(gr,Or)|0,Tt=Tt+Math.imul(cr,Fr)|0,pt=pt+Math.imul(cr,Kr)|0,pt=pt+Math.imul(rr,Fr)|0,Rt=Rt+Math.imul(rr,Kr)|0,Tt=Tt+Math.imul(Yt,Br)|0,pt=pt+Math.imul(Yt,Zr)|0,pt=pt+Math.imul(ir,Br)|0,Rt=Rt+Math.imul(ir,Zr)|0;var Sn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,Tt=Math.imul(xr,vr),pt=Math.imul(xr,wr),pt=pt+Math.imul(yr,vr)|0,Rt=Math.imul(yr,wr),Tt=Tt+Math.imul(_r,Sr)|0,pt=pt+Math.imul(_r,Dr)|0,pt=pt+Math.imul(Er,Sr)|0,Rt=Rt+Math.imul(Er,Dr)|0,Tt=Tt+Math.imul(or,Ir)|0,pt=pt+Math.imul(or,Or)|0,pt=pt+Math.imul(br,Ir)|0,Rt=Rt+Math.imul(br,Or)|0,Tt=Tt+Math.imul(dr,Fr)|0,pt=pt+Math.imul(dr,Kr)|0,pt=pt+Math.imul(gr,Fr)|0,Rt=Rt+Math.imul(gr,Kr)|0,Tt=Tt+Math.imul(cr,Br)|0,pt=pt+Math.imul(cr,Zr)|0,pt=pt+Math.imul(rr,Br)|0,Rt=Rt+Math.imul(rr,Zr)|0,Tt=Tt+Math.imul(Yt,zr)|0,pt=pt+Math.imul(Yt,Xr)|0,pt=pt+Math.imul(ir,zr)|0,Rt=Rt+Math.imul(ir,Xr)|0;var En=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(En>>>26)|0,En&=67108863,Tt=Math.imul($r,vr),pt=Math.imul($r,wr),pt=pt+Math.imul(Tr,vr)|0,Rt=Math.imul(Tr,wr),Tt=Tt+Math.imul(xr,Sr)|0,pt=pt+Math.imul(xr,Dr)|0,pt=pt+Math.imul(yr,Sr)|0,Rt=Rt+Math.imul(yr,Dr)|0,Tt=Tt+Math.imul(_r,Ir)|0,pt=pt+Math.imul(_r,Or)|0,pt=pt+Math.imul(Er,Ir)|0,Rt=Rt+Math.imul(Er,Or)|0,Tt=Tt+Math.imul(or,Fr)|0,pt=pt+Math.imul(or,Kr)|0,pt=pt+Math.imul(br,Fr)|0,Rt=Rt+Math.imul(br,Kr)|0,Tt=Tt+Math.imul(dr,Br)|0,pt=pt+Math.imul(dr,Zr)|0,pt=pt+Math.imul(gr,Br)|0,Rt=Rt+Math.imul(gr,Zr)|0,Tt=Tt+Math.imul(cr,zr)|0,pt=pt+Math.imul(cr,Xr)|0,pt=pt+Math.imul(rr,zr)|0,Rt=Rt+Math.imul(rr,Xr)|0,Tt=Tt+Math.imul(Yt,Vr)|0,pt=pt+Math.imul(Yt,Yr)|0,pt=pt+Math.imul(ir,Vr)|0,Rt=Rt+Math.imul(ir,Yr)|0;var _n=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(_n>>>26)|0,_n&=67108863,Tt=Math.imul(Cr,vr),pt=Math.imul(Cr,wr),pt=pt+Math.imul(Nr,vr)|0,Rt=Math.imul(Nr,wr),Tt=Tt+Math.imul($r,Sr)|0,pt=pt+Math.imul($r,Dr)|0,pt=pt+Math.imul(Tr,Sr)|0,Rt=Rt+Math.imul(Tr,Dr)|0,Tt=Tt+Math.imul(xr,Ir)|0,pt=pt+Math.imul(xr,Or)|0,pt=pt+Math.imul(yr,Ir)|0,Rt=Rt+Math.imul(yr,Or)|0,Tt=Tt+Math.imul(_r,Fr)|0,pt=pt+Math.imul(_r,Kr)|0,pt=pt+Math.imul(Er,Fr)|0,Rt=Rt+Math.imul(Er,Kr)|0,Tt=Tt+Math.imul(or,Br)|0,pt=pt+Math.imul(or,Zr)|0,pt=pt+Math.imul(br,Br)|0,Rt=Rt+Math.imul(br,Zr)|0,Tt=Tt+Math.imul(dr,zr)|0,pt=pt+Math.imul(dr,Xr)|0,pt=pt+Math.imul(gr,zr)|0,Rt=Rt+Math.imul(gr,Xr)|0,Tt=Tt+Math.imul(cr,Vr)|0,pt=pt+Math.imul(cr,Yr)|0,pt=pt+Math.imul(rr,Vr)|0,Rt=Rt+Math.imul(rr,Yr)|0,Tt=Tt+Math.imul(Yt,Ur)|0,pt=pt+Math.imul(Yt,Qr)|0,pt=pt+Math.imul(ir,Ur)|0,Rt=Rt+Math.imul(ir,Qr)|0;var Tn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,Tt=Math.imul(Mr,vr),pt=Math.imul(Mr,wr),pt=pt+Math.imul(Lr,vr)|0,Rt=Math.imul(Lr,wr),Tt=Tt+Math.imul(Cr,Sr)|0,pt=pt+Math.imul(Cr,Dr)|0,pt=pt+Math.imul(Nr,Sr)|0,Rt=Rt+Math.imul(Nr,Dr)|0,Tt=Tt+Math.imul($r,Ir)|0,pt=pt+Math.imul($r,Or)|0,pt=pt+Math.imul(Tr,Ir)|0,Rt=Rt+Math.imul(Tr,Or)|0,Tt=Tt+Math.imul(xr,Fr)|0,pt=pt+Math.imul(xr,Kr)|0,pt=pt+Math.imul(yr,Fr)|0,Rt=Rt+Math.imul(yr,Kr)|0,Tt=Tt+Math.imul(_r,Br)|0,pt=pt+Math.imul(_r,Zr)|0,pt=pt+Math.imul(Er,Br)|0,Rt=Rt+Math.imul(Er,Zr)|0,Tt=Tt+Math.imul(or,zr)|0,pt=pt+Math.imul(or,Xr)|0,pt=pt+Math.imul(br,zr)|0,Rt=Rt+Math.imul(br,Xr)|0,Tt=Tt+Math.imul(dr,Vr)|0,pt=pt+Math.imul(dr,Yr)|0,pt=pt+Math.imul(gr,Vr)|0,Rt=Rt+Math.imul(gr,Yr)|0,Tt=Tt+Math.imul(cr,Ur)|0,pt=pt+Math.imul(cr,Qr)|0,pt=pt+Math.imul(rr,Ur)|0,Rt=Rt+Math.imul(rr,Qr)|0,Tt=Tt+Math.imul(Yt,Gr)|0,pt=pt+Math.imul(Yt,Jr)|0,pt=pt+Math.imul(ir,Gr)|0,Rt=Rt+Math.imul(ir,Jr)|0;var Cn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Tt=Math.imul(pr,vr),pt=Math.imul(pr,wr),pt=pt+Math.imul(nr,vr)|0,Rt=Math.imul(nr,wr),Tt=Tt+Math.imul(Mr,Sr)|0,pt=pt+Math.imul(Mr,Dr)|0,pt=pt+Math.imul(Lr,Sr)|0,Rt=Rt+Math.imul(Lr,Dr)|0,Tt=Tt+Math.imul(Cr,Ir)|0,pt=pt+Math.imul(Cr,Or)|0,pt=pt+Math.imul(Nr,Ir)|0,Rt=Rt+Math.imul(Nr,Or)|0,Tt=Tt+Math.imul($r,Fr)|0,pt=pt+Math.imul($r,Kr)|0,pt=pt+Math.imul(Tr,Fr)|0,Rt=Rt+Math.imul(Tr,Kr)|0,Tt=Tt+Math.imul(xr,Br)|0,pt=pt+Math.imul(xr,Zr)|0,pt=pt+Math.imul(yr,Br)|0,Rt=Rt+Math.imul(yr,Zr)|0,Tt=Tt+Math.imul(_r,zr)|0,pt=pt+Math.imul(_r,Xr)|0,pt=pt+Math.imul(Er,zr)|0,Rt=Rt+Math.imul(Er,Xr)|0,Tt=Tt+Math.imul(or,Vr)|0,pt=pt+Math.imul(or,Yr)|0,pt=pt+Math.imul(br,Vr)|0,Rt=Rt+Math.imul(br,Yr)|0,Tt=Tt+Math.imul(dr,Ur)|0,pt=pt+Math.imul(dr,Qr)|0,pt=pt+Math.imul(gr,Ur)|0,Rt=Rt+Math.imul(gr,Qr)|0,Tt=Tt+Math.imul(cr,Gr)|0,pt=pt+Math.imul(cr,Jr)|0,pt=pt+Math.imul(rr,Gr)|0,Rt=Rt+Math.imul(rr,Jr)|0,Tt=Tt+Math.imul(Yt,Wr)|0,pt=pt+Math.imul(Yt,en)|0,pt=pt+Math.imul(ir,Wr)|0,Rt=Rt+Math.imul(ir,en)|0;var An=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(An>>>26)|0,An&=67108863,Tt=Math.imul(pr,Sr),pt=Math.imul(pr,Dr),pt=pt+Math.imul(nr,Sr)|0,Rt=Math.imul(nr,Dr),Tt=Tt+Math.imul(Mr,Ir)|0,pt=pt+Math.imul(Mr,Or)|0,pt=pt+Math.imul(Lr,Ir)|0,Rt=Rt+Math.imul(Lr,Or)|0,Tt=Tt+Math.imul(Cr,Fr)|0,pt=pt+Math.imul(Cr,Kr)|0,pt=pt+Math.imul(Nr,Fr)|0,Rt=Rt+Math.imul(Nr,Kr)|0,Tt=Tt+Math.imul($r,Br)|0,pt=pt+Math.imul($r,Zr)|0,pt=pt+Math.imul(Tr,Br)|0,Rt=Rt+Math.imul(Tr,Zr)|0,Tt=Tt+Math.imul(xr,zr)|0,pt=pt+Math.imul(xr,Xr)|0,pt=pt+Math.imul(yr,zr)|0,Rt=Rt+Math.imul(yr,Xr)|0,Tt=Tt+Math.imul(_r,Vr)|0,pt=pt+Math.imul(_r,Yr)|0,pt=pt+Math.imul(Er,Vr)|0,Rt=Rt+Math.imul(Er,Yr)|0,Tt=Tt+Math.imul(or,Ur)|0,pt=pt+Math.imul(or,Qr)|0,pt=pt+Math.imul(br,Ur)|0,Rt=Rt+Math.imul(br,Qr)|0,Tt=Tt+Math.imul(dr,Gr)|0,pt=pt+Math.imul(dr,Jr)|0,pt=pt+Math.imul(gr,Gr)|0,Rt=Rt+Math.imul(gr,Jr)|0,Tt=Tt+Math.imul(cr,Wr)|0,pt=pt+Math.imul(cr,en)|0,pt=pt+Math.imul(rr,Wr)|0,Rt=Rt+Math.imul(rr,en)|0;var Rn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,Tt=Math.imul(pr,Ir),pt=Math.imul(pr,Or),pt=pt+Math.imul(nr,Ir)|0,Rt=Math.imul(nr,Or),Tt=Tt+Math.imul(Mr,Fr)|0,pt=pt+Math.imul(Mr,Kr)|0,pt=pt+Math.imul(Lr,Fr)|0,Rt=Rt+Math.imul(Lr,Kr)|0,Tt=Tt+Math.imul(Cr,Br)|0,pt=pt+Math.imul(Cr,Zr)|0,pt=pt+Math.imul(Nr,Br)|0,Rt=Rt+Math.imul(Nr,Zr)|0,Tt=Tt+Math.imul($r,zr)|0,pt=pt+Math.imul($r,Xr)|0,pt=pt+Math.imul(Tr,zr)|0,Rt=Rt+Math.imul(Tr,Xr)|0,Tt=Tt+Math.imul(xr,Vr)|0,pt=pt+Math.imul(xr,Yr)|0,pt=pt+Math.imul(yr,Vr)|0,Rt=Rt+Math.imul(yr,Yr)|0,Tt=Tt+Math.imul(_r,Ur)|0,pt=pt+Math.imul(_r,Qr)|0,pt=pt+Math.imul(Er,Ur)|0,Rt=Rt+Math.imul(Er,Qr)|0,Tt=Tt+Math.imul(or,Gr)|0,pt=pt+Math.imul(or,Jr)|0,pt=pt+Math.imul(br,Gr)|0,Rt=Rt+Math.imul(br,Jr)|0,Tt=Tt+Math.imul(dr,Wr)|0,pt=pt+Math.imul(dr,en)|0,pt=pt+Math.imul(gr,Wr)|0,Rt=Rt+Math.imul(gr,en)|0;var Nn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,Tt=Math.imul(pr,Fr),pt=Math.imul(pr,Kr),pt=pt+Math.imul(nr,Fr)|0,Rt=Math.imul(nr,Kr),Tt=Tt+Math.imul(Mr,Br)|0,pt=pt+Math.imul(Mr,Zr)|0,pt=pt+Math.imul(Lr,Br)|0,Rt=Rt+Math.imul(Lr,Zr)|0,Tt=Tt+Math.imul(Cr,zr)|0,pt=pt+Math.imul(Cr,Xr)|0,pt=pt+Math.imul(Nr,zr)|0,Rt=Rt+Math.imul(Nr,Xr)|0,Tt=Tt+Math.imul($r,Vr)|0,pt=pt+Math.imul($r,Yr)|0,pt=pt+Math.imul(Tr,Vr)|0,Rt=Rt+Math.imul(Tr,Yr)|0,Tt=Tt+Math.imul(xr,Ur)|0,pt=pt+Math.imul(xr,Qr)|0,pt=pt+Math.imul(yr,Ur)|0,Rt=Rt+Math.imul(yr,Qr)|0,Tt=Tt+Math.imul(_r,Gr)|0,pt=pt+Math.imul(_r,Jr)|0,pt=pt+Math.imul(Er,Gr)|0,Rt=Rt+Math.imul(Er,Jr)|0,Tt=Tt+Math.imul(or,Wr)|0,pt=pt+Math.imul(or,en)|0,pt=pt+Math.imul(br,Wr)|0,Rt=Rt+Math.imul(br,en)|0;var In=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(In>>>26)|0,In&=67108863,Tt=Math.imul(pr,Br),pt=Math.imul(pr,Zr),pt=pt+Math.imul(nr,Br)|0,Rt=Math.imul(nr,Zr),Tt=Tt+Math.imul(Mr,zr)|0,pt=pt+Math.imul(Mr,Xr)|0,pt=pt+Math.imul(Lr,zr)|0,Rt=Rt+Math.imul(Lr,Xr)|0,Tt=Tt+Math.imul(Cr,Vr)|0,pt=pt+Math.imul(Cr,Yr)|0,pt=pt+Math.imul(Nr,Vr)|0,Rt=Rt+Math.imul(Nr,Yr)|0,Tt=Tt+Math.imul($r,Ur)|0,pt=pt+Math.imul($r,Qr)|0,pt=pt+Math.imul(Tr,Ur)|0,Rt=Rt+Math.imul(Tr,Qr)|0,Tt=Tt+Math.imul(xr,Gr)|0,pt=pt+Math.imul(xr,Jr)|0,pt=pt+Math.imul(yr,Gr)|0,Rt=Rt+Math.imul(yr,Jr)|0,Tt=Tt+Math.imul(_r,Wr)|0,pt=pt+Math.imul(_r,en)|0,pt=pt+Math.imul(Er,Wr)|0,Rt=Rt+Math.imul(Er,en)|0;var Mn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,Tt=Math.imul(pr,zr),pt=Math.imul(pr,Xr),pt=pt+Math.imul(nr,zr)|0,Rt=Math.imul(nr,Xr),Tt=Tt+Math.imul(Mr,Vr)|0,pt=pt+Math.imul(Mr,Yr)|0,pt=pt+Math.imul(Lr,Vr)|0,Rt=Rt+Math.imul(Lr,Yr)|0,Tt=Tt+Math.imul(Cr,Ur)|0,pt=pt+Math.imul(Cr,Qr)|0,pt=pt+Math.imul(Nr,Ur)|0,Rt=Rt+Math.imul(Nr,Qr)|0,Tt=Tt+Math.imul($r,Gr)|0,pt=pt+Math.imul($r,Jr)|0,pt=pt+Math.imul(Tr,Gr)|0,Rt=Rt+Math.imul(Tr,Jr)|0,Tt=Tt+Math.imul(xr,Wr)|0,pt=pt+Math.imul(xr,en)|0,pt=pt+Math.imul(yr,Wr)|0,Rt=Rt+Math.imul(yr,en)|0;var Pn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,Tt=Math.imul(pr,Vr),pt=Math.imul(pr,Yr),pt=pt+Math.imul(nr,Vr)|0,Rt=Math.imul(nr,Yr),Tt=Tt+Math.imul(Mr,Ur)|0,pt=pt+Math.imul(Mr,Qr)|0,pt=pt+Math.imul(Lr,Ur)|0,Rt=Rt+Math.imul(Lr,Qr)|0,Tt=Tt+Math.imul(Cr,Gr)|0,pt=pt+Math.imul(Cr,Jr)|0,pt=pt+Math.imul(Nr,Gr)|0,Rt=Rt+Math.imul(Nr,Jr)|0,Tt=Tt+Math.imul($r,Wr)|0,pt=pt+Math.imul($r,en)|0,pt=pt+Math.imul(Tr,Wr)|0,Rt=Rt+Math.imul(Tr,en)|0;var kn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(kn>>>26)|0,kn&=67108863,Tt=Math.imul(pr,Ur),pt=Math.imul(pr,Qr),pt=pt+Math.imul(nr,Ur)|0,Rt=Math.imul(nr,Qr),Tt=Tt+Math.imul(Mr,Gr)|0,pt=pt+Math.imul(Mr,Jr)|0,pt=pt+Math.imul(Lr,Gr)|0,Rt=Rt+Math.imul(Lr,Jr)|0,Tt=Tt+Math.imul(Cr,Wr)|0,pt=pt+Math.imul(Cr,en)|0,pt=pt+Math.imul(Nr,Wr)|0,Rt=Rt+Math.imul(Nr,en)|0;var On=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(On>>>26)|0,On&=67108863,Tt=Math.imul(pr,Gr),pt=Math.imul(pr,Jr),pt=pt+Math.imul(nr,Gr)|0,Rt=Math.imul(nr,Jr),Tt=Tt+Math.imul(Mr,Wr)|0,pt=pt+Math.imul(Mr,en)|0,pt=pt+Math.imul(Lr,Wr)|0,Rt=Rt+Math.imul(Lr,en)|0;var Dn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,Tt=Math.imul(pr,Wr),pt=Math.imul(pr,en),pt=pt+Math.imul(nr,Wr)|0,Rt=Math.imul(nr,en);var jn=(Pt+Tt|0)+((pt&8191)<<13)|0;return Pt=(Rt+(pt>>>13)|0)+(jn>>>26)|0,jn&=67108863,Nt[0]=on,Nt[1]=un,Nt[2]=wn,Nt[3]=$n,Nt[4]=Sn,Nt[5]=En,Nt[6]=_n,Nt[7]=Tn,Nt[8]=Cn,Nt[9]=An,Nt[10]=Rn,Nt[11]=Nn,Nt[12]=In,Nt[13]=Mn,Nt[14]=Pn,Nt[15]=kn,Nt[16]=On,Nt[17]=Dn,Nt[18]=jn,Pt!==0&&(Nt[19]=Pt,gt.length++),gt};Math.imul||(xt=vt);function wt(Mt,lt,mt){mt.negative=lt.negative^Mt.negative,mt.length=Mt.length+lt.length;for(var gt=0,bt=0,St=0;St<mt.length-1;St++){var Nt=bt;bt=0;for(var Pt=gt&67108863,Tt=Math.min(St,lt.length-1),pt=Math.max(0,St-Mt.length+1);pt<=Tt;pt++){var Rt=St-pt,zt=Mt.words[Rt]|0,Yt=lt.words[pt]|0,ir=zt*Yt,ur=ir&67108863;Nt=Nt+(ir/67108864|0)|0,ur=ur+Pt|0,Pt=ur&67108863,Nt=Nt+(ur>>>26)|0,bt+=Nt>>>26,Nt&=67108863}mt.words[St]=Pt,gt=Nt,Nt=bt}return gt!==0?mt.words[St]=gt:mt.length--,mt.strip()}function Et(Mt,lt,mt){var gt=new At;return gt.mulp(Mt,lt,mt)}rt.prototype.mulTo=function(lt,mt){var gt,bt=this.length+lt.length;return this.length===10&&lt.length===10?gt=xt(this,lt,mt):bt<63?gt=vt(this,lt,mt):bt<1024?gt=wt(this,lt,mt):gt=Et(this,lt,mt),gt};function At(Mt,lt){this.x=Mt,this.y=lt}At.prototype.makeRBT=function(lt){for(var mt=new Array(lt),gt=rt.prototype._countBits(lt)-1,bt=0;bt<lt;bt++)mt[bt]=this.revBin(bt,gt,lt);return mt},At.prototype.revBin=function(lt,mt,gt){if(lt===0||lt===gt-1)return lt;for(var bt=0,St=0;St<mt;St++)bt|=(lt&1)<<mt-St-1,lt>>=1;return bt},At.prototype.permute=function(lt,mt,gt,bt,St,Nt){for(var Pt=0;Pt<Nt;Pt++)bt[Pt]=mt[lt[Pt]],St[Pt]=gt[lt[Pt]]},At.prototype.transform=function(lt,mt,gt,bt,St,Nt){this.permute(Nt,lt,mt,gt,bt,St);for(var Pt=1;Pt<St;Pt<<=1)for(var Tt=Pt<<1,pt=Math.cos(2*Math.PI/Tt),Rt=Math.sin(2*Math.PI/Tt),zt=0;zt<St;zt+=Tt)for(var Yt=pt,ir=Rt,ur=0;ur<Pt;ur++){var cr=gt[zt+ur],rr=bt[zt+ur],fr=gt[zt+ur+Pt],dr=bt[zt+ur+Pt],gr=Yt*fr-ir*dr;dr=Yt*dr+ir*fr,fr=gr,gt[zt+ur]=cr+fr,bt[zt+ur]=rr+dr,gt[zt+ur+Pt]=cr-fr,bt[zt+ur+Pt]=rr-dr,ur!==Tt&&(gr=pt*Yt-Rt*ir,ir=pt*ir+Rt*Yt,Yt=gr)}},At.prototype.guessLen13b=function(lt,mt){var gt=Math.max(mt,lt)|1,bt=gt&1,St=0;for(gt=gt/2|0;gt;gt=gt>>>1)St++;return 1<<St+1+bt},At.prototype.conjugate=function(lt,mt,gt){if(!(gt<=1))for(var bt=0;bt<gt/2;bt++){var St=lt[bt];lt[bt]=lt[gt-bt-1],lt[gt-bt-1]=St,St=mt[bt],mt[bt]=-mt[gt-bt-1],mt[gt-bt-1]=-St}},At.prototype.normalize13b=function(lt,mt){for(var gt=0,bt=0;bt<mt/2;bt++){var St=Math.round(lt[2*bt+1]/mt)*8192+Math.round(lt[2*bt]/mt)+gt;lt[bt]=St&67108863,St<67108864?gt=0:gt=St/67108864|0}return lt},At.prototype.convert13b=function(lt,mt,gt,bt){for(var St=0,Nt=0;Nt<mt;Nt++)St=St+(lt[Nt]|0),gt[2*Nt]=St&8191,St=St>>>13,gt[2*Nt+1]=St&8191,St=St>>>13;for(Nt=2*mt;Nt<bt;++Nt)gt[Nt]=0;et(St===0),et((St&-8192)===0)},At.prototype.stub=function(lt){for(var mt=new Array(lt),gt=0;gt<lt;gt++)mt[gt]=0;return mt},At.prototype.mulp=function(lt,mt,gt){var bt=2*this.guessLen13b(lt.length,mt.length),St=this.makeRBT(bt),Nt=this.stub(bt),Pt=new Array(bt),Tt=new Array(bt),pt=new Array(bt),Rt=new Array(bt),zt=new Array(bt),Yt=new Array(bt),ir=gt.words;ir.length=bt,this.convert13b(lt.words,lt.length,Pt,bt),this.convert13b(mt.words,mt.length,Rt,bt),this.transform(Pt,Nt,Tt,pt,bt,St),this.transform(Rt,Nt,zt,Yt,bt,St);for(var ur=0;ur<bt;ur++){var cr=Tt[ur]*zt[ur]-pt[ur]*Yt[ur];pt[ur]=Tt[ur]*Yt[ur]+pt[ur]*zt[ur],Tt[ur]=cr}return this.conjugate(Tt,pt,bt),this.transform(Tt,pt,ir,Nt,bt,St),this.conjugate(ir,Nt,bt),this.normalize13b(ir,bt),gt.negative=lt.negative^mt.negative,gt.length=lt.length+mt.length,gt.strip()},rt.prototype.mul=function(lt){var mt=new rt(null);return mt.words=new Array(this.length+lt.length),this.mulTo(lt,mt)},rt.prototype.mulf=function(lt){var mt=new rt(null);return mt.words=new Array(this.length+lt.length),Et(this,lt,mt)},rt.prototype.imul=function(lt){return this.clone().mulTo(lt,this)},rt.prototype.imuln=function(lt){et(typeof lt=="number"),et(lt<67108864);for(var mt=0,gt=0;gt<this.length;gt++){var bt=(this.words[gt]|0)*lt,St=(bt&67108863)+(mt&67108863);mt>>=26,mt+=bt/67108864|0,mt+=St>>>26,this.words[gt]=St&67108863}return mt!==0&&(this.words[gt]=mt,this.length++),this},rt.prototype.muln=function(lt){return this.clone().imuln(lt)},rt.prototype.sqr=function(){return this.mul(this)},rt.prototype.isqr=function(){return this.imul(this.clone())},rt.prototype.pow=function(lt){var mt=yt(lt);if(mt.length===0)return new rt(1);for(var gt=this,bt=0;bt<mt.length&&mt[bt]===0;bt++,gt=gt.sqr());if(++bt<mt.length)for(var St=gt.sqr();bt<mt.length;bt++,St=St.sqr())mt[bt]!==0&&(gt=gt.mul(St));return gt},rt.prototype.iushln=function(lt){et(typeof lt=="number"&&lt>=0);var mt=lt%26,gt=(lt-mt)/26,bt=67108863>>>26-mt<<26-mt,St;if(mt!==0){var Nt=0;for(St=0;St<this.length;St++){var Pt=this.words[St]&bt,Tt=(this.words[St]|0)-Pt<<mt;this.words[St]=Tt|Nt,Nt=Pt>>>26-mt}Nt&&(this.words[St]=Nt,this.length++)}if(gt!==0){for(St=this.length-1;St>=0;St--)this.words[St+gt]=this.words[St];for(St=0;St<gt;St++)this.words[St]=0;this.length+=gt}return this.strip()},rt.prototype.ishln=function(lt){return et(this.negative===0),this.iushln(lt)},rt.prototype.iushrn=function(lt,mt,gt){et(typeof lt=="number"&&lt>=0);var bt;mt?bt=(mt-mt%26)/26:bt=0;var St=lt%26,Nt=Math.min((lt-St)/26,this.length),Pt=67108863^67108863>>>St<<St,Tt=gt;if(bt-=Nt,bt=Math.max(0,bt),Tt){for(var pt=0;pt<Nt;pt++)Tt.words[pt]=this.words[pt];Tt.length=Nt}if(Nt!==0)if(this.length>Nt)for(this.length-=Nt,pt=0;pt<this.length;pt++)this.words[pt]=this.words[pt+Nt];else this.words[0]=0,this.length=1;var Rt=0;for(pt=this.length-1;pt>=0&&(Rt!==0||pt>=bt);pt--){var zt=this.words[pt]|0;this.words[pt]=Rt<<26-St|zt>>>St,Rt=zt&Pt}return Tt&&Rt!==0&&(Tt.words[Tt.length++]=Rt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},rt.prototype.ishrn=function(lt,mt,gt){return et(this.negative===0),this.iushrn(lt,mt,gt)},rt.prototype.shln=function(lt){return this.clone().ishln(lt)},rt.prototype.ushln=function(lt){return this.clone().iushln(lt)},rt.prototype.shrn=function(lt){return this.clone().ishrn(lt)},rt.prototype.ushrn=function(lt){return this.clone().iushrn(lt)},rt.prototype.testn=function(lt){et(typeof lt=="number"&&lt>=0);var mt=lt%26,gt=(lt-mt)/26,bt=1<<mt;if(this.length<=gt)return!1;var St=this.words[gt];return!!(St&bt)},rt.prototype.imaskn=function(lt){et(typeof lt=="number"&&lt>=0);var mt=lt%26,gt=(lt-mt)/26;if(et(this.negative===0,"imaskn works only with positive numbers"),this.length<=gt)return this;if(mt!==0&&gt++,this.length=Math.min(gt,this.length),mt!==0){var bt=67108863^67108863>>>mt<<mt;this.words[this.length-1]&=bt}return this.strip()},rt.prototype.maskn=function(lt){return this.clone().imaskn(lt)},rt.prototype.iaddn=function(lt){return et(typeof lt=="number"),et(lt<67108864),lt<0?this.isubn(-lt):this.negative!==0?this.length===1&&(this.words[0]|0)<lt?(this.words[0]=lt-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(lt),this.negative=1,this):this._iaddn(lt)},rt.prototype._iaddn=function(lt){this.words[0]+=lt;for(var mt=0;mt<this.length&&this.words[mt]>=67108864;mt++)this.words[mt]-=67108864,mt===this.length-1?this.words[mt+1]=1:this.words[mt+1]++;return this.length=Math.max(this.length,mt+1),this},rt.prototype.isubn=function(lt){if(et(typeof lt=="number"),et(lt<67108864),lt<0)return this.iaddn(-lt);if(this.negative!==0)return this.negative=0,this.iaddn(lt),this.negative=1,this;if(this.words[0]-=lt,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var mt=0;mt<this.length&&this.words[mt]<0;mt++)this.words[mt]+=67108864,this.words[mt+1]-=1;return this.strip()},rt.prototype.addn=function(lt){return this.clone().iaddn(lt)},rt.prototype.subn=function(lt){return this.clone().isubn(lt)},rt.prototype.iabs=function(){return this.negative=0,this},rt.prototype.abs=function(){return this.clone().iabs()},rt.prototype._ishlnsubmul=function(lt,mt,gt){var bt=lt.length+gt,St;this._expand(bt);var Nt,Pt=0;for(St=0;St<lt.length;St++){Nt=(this.words[St+gt]|0)+Pt;var Tt=(lt.words[St]|0)*mt;Nt-=Tt&67108863,Pt=(Nt>>26)-(Tt/67108864|0),this.words[St+gt]=Nt&67108863}for(;St<this.length-gt;St++)Nt=(this.words[St+gt]|0)+Pt,Pt=Nt>>26,this.words[St+gt]=Nt&67108863;if(Pt===0)return this.strip();for(et(Pt===-1),Pt=0,St=0;St<this.length;St++)Nt=-(this.words[St]|0)+Pt,Pt=Nt>>26,this.words[St]=Nt&67108863;return this.negative=1,this.strip()},rt.prototype._wordDiv=function(lt,mt){var gt=this.length-lt.length,bt=this.clone(),St=lt,Nt=St.words[St.length-1]|0,Pt=this._countBits(Nt);gt=26-Pt,gt!==0&&(St=St.ushln(gt),bt.iushln(gt),Nt=St.words[St.length-1]|0);var Tt=bt.length-St.length,pt;if(mt!=="mod"){pt=new rt(null),pt.length=Tt+1,pt.words=new Array(pt.length);for(var Rt=0;Rt<pt.length;Rt++)pt.words[Rt]=0}var zt=bt.clone()._ishlnsubmul(St,1,Tt);zt.negative===0&&(bt=zt,pt&&(pt.words[Tt]=1));for(var Yt=Tt-1;Yt>=0;Yt--){var ir=(bt.words[St.length+Yt]|0)*67108864+(bt.words[St.length+Yt-1]|0);for(ir=Math.min(ir/Nt|0,67108863),bt._ishlnsubmul(St,ir,Yt);bt.negative!==0;)ir--,bt.negative=0,bt._ishlnsubmul(St,1,Yt),bt.isZero()||(bt.negative^=1);pt&&(pt.words[Yt]=ir)}return pt&&pt.strip(),bt.strip(),mt!=="div"&&gt!==0&&bt.iushrn(gt),{div:pt||null,mod:bt}},rt.prototype.divmod=function(lt,mt,gt){if(et(!lt.isZero()),this.isZero())return{div:new rt(0),mod:new rt(0)};var bt,St,Nt;return this.negative!==0&&lt.negative===0?(Nt=this.neg().divmod(lt,mt),mt!=="mod"&&(bt=Nt.div.neg()),mt!=="div"&&(St=Nt.mod.neg(),gt&&St.negative!==0&&St.iadd(lt)),{div:bt,mod:St}):this.negative===0&&lt.negative!==0?(Nt=this.divmod(lt.neg(),mt),mt!=="mod"&&(bt=Nt.div.neg()),{div:bt,mod:Nt.mod}):this.negative&lt.negative?(Nt=this.neg().divmod(lt.neg(),mt),mt!=="div"&&(St=Nt.mod.neg(),gt&&St.negative!==0&&St.isub(lt)),{div:Nt.div,mod:St}):lt.length>this.length||this.cmp(lt)<0?{div:new rt(0),mod:this}:lt.length===1?mt==="div"?{div:this.divn(lt.words[0]),mod:null}:mt==="mod"?{div:null,mod:new rt(this.modn(lt.words[0]))}:{div:this.divn(lt.words[0]),mod:new rt(this.modn(lt.words[0]))}:this._wordDiv(lt,mt)},rt.prototype.div=function(lt){return this.divmod(lt,"div",!1).div},rt.prototype.mod=function(lt){return this.divmod(lt,"mod",!1).mod},rt.prototype.umod=function(lt){return this.divmod(lt,"mod",!0).mod},rt.prototype.divRound=function(lt){var mt=this.divmod(lt);if(mt.mod.isZero())return mt.div;var gt=mt.div.negative!==0?mt.mod.isub(lt):mt.mod,bt=lt.ushrn(1),St=lt.andln(1),Nt=gt.cmp(bt);return Nt<0||St===1&&Nt===0?mt.div:mt.div.negative!==0?mt.div.isubn(1):mt.div.iaddn(1)},rt.prototype.modn=function(lt){et(lt<=67108863);for(var mt=(1<<26)%lt,gt=0,bt=this.length-1;bt>=0;bt--)gt=(mt*gt+(this.words[bt]|0))%lt;return gt},rt.prototype.idivn=function(lt){et(lt<=67108863);for(var mt=0,gt=this.length-1;gt>=0;gt--){var bt=(this.words[gt]|0)+mt*67108864;this.words[gt]=bt/lt|0,mt=bt%lt}return this.strip()},rt.prototype.divn=function(lt){return this.clone().idivn(lt)},rt.prototype.egcd=function(lt){et(lt.negative===0),et(!lt.isZero());var mt=this,gt=lt.clone();mt.negative!==0?mt=mt.umod(lt):mt=mt.clone();for(var bt=new rt(1),St=new rt(0),Nt=new rt(0),Pt=new rt(1),Tt=0;mt.isEven()&&gt.isEven();)mt.iushrn(1),gt.iushrn(1),++Tt;for(var pt=gt.clone(),Rt=mt.clone();!mt.isZero();){for(var zt=0,Yt=1;!(mt.words[0]&Yt)&&zt<26;++zt,Yt<<=1);if(zt>0)for(mt.iushrn(zt);zt-- >0;)(bt.isOdd()||St.isOdd())&&(bt.iadd(pt),St.isub(Rt)),bt.iushrn(1),St.iushrn(1);for(var ir=0,ur=1;!(gt.words[0]&ur)&&ir<26;++ir,ur<<=1);if(ir>0)for(gt.iushrn(ir);ir-- >0;)(Nt.isOdd()||Pt.isOdd())&&(Nt.iadd(pt),Pt.isub(Rt)),Nt.iushrn(1),Pt.iushrn(1);mt.cmp(gt)>=0?(mt.isub(gt),bt.isub(Nt),St.isub(Pt)):(gt.isub(mt),Nt.isub(bt),Pt.isub(St))}return{a:Nt,b:Pt,gcd:gt.iushln(Tt)}},rt.prototype._invmp=function(lt){et(lt.negative===0),et(!lt.isZero());var mt=this,gt=lt.clone();mt.negative!==0?mt=mt.umod(lt):mt=mt.clone();for(var bt=new rt(1),St=new rt(0),Nt=gt.clone();mt.cmpn(1)>0&&gt.cmpn(1)>0;){for(var Pt=0,Tt=1;!(mt.words[0]&Tt)&&Pt<26;++Pt,Tt<<=1);if(Pt>0)for(mt.iushrn(Pt);Pt-- >0;)bt.isOdd()&&bt.iadd(Nt),bt.iushrn(1);for(var pt=0,Rt=1;!(gt.words[0]&Rt)&&pt<26;++pt,Rt<<=1);if(pt>0)for(gt.iushrn(pt);pt-- >0;)St.isOdd()&&St.iadd(Nt),St.iushrn(1);mt.cmp(gt)>=0?(mt.isub(gt),bt.isub(St)):(gt.isub(mt),St.isub(bt))}var zt;return mt.cmpn(1)===0?zt=bt:zt=St,zt.cmpn(0)<0&&zt.iadd(lt),zt},rt.prototype.gcd=function(lt){if(this.isZero())return lt.abs();if(lt.isZero())return this.abs();var mt=this.clone(),gt=lt.clone();mt.negative=0,gt.negative=0;for(var bt=0;mt.isEven()&&gt.isEven();bt++)mt.iushrn(1),gt.iushrn(1);do{for(;mt.isEven();)mt.iushrn(1);for(;gt.isEven();)gt.iushrn(1);var St=mt.cmp(gt);if(St<0){var Nt=mt;mt=gt,gt=Nt}else if(St===0||gt.cmpn(1)===0)break;mt.isub(gt)}while(!0);return gt.iushln(bt)},rt.prototype.invm=function(lt){return this.egcd(lt).a.umod(lt)},rt.prototype.isEven=function(){return(this.words[0]&1)===0},rt.prototype.isOdd=function(){return(this.words[0]&1)===1},rt.prototype.andln=function(lt){return this.words[0]&lt},rt.prototype.bincn=function(lt){et(typeof lt=="number");var mt=lt%26,gt=(lt-mt)/26,bt=1<<mt;if(this.length<=gt)return this._expand(gt+1),this.words[gt]|=bt,this;for(var St=bt,Nt=gt;St!==0&&Nt<this.length;Nt++){var Pt=this.words[Nt]|0;Pt+=St,St=Pt>>>26,Pt&=67108863,this.words[Nt]=Pt}return St!==0&&(this.words[Nt]=St,this.length++),this},rt.prototype.isZero=function(){return this.length===1&&this.words[0]===0},rt.prototype.cmpn=function(lt){var mt=lt<0;if(this.negative!==0&&!mt)return-1;if(this.negative===0&&mt)return 1;this.strip();var gt;if(this.length>1)gt=1;else{mt&&(lt=-lt),et(lt<=67108863,"Number is too big");var bt=this.words[0]|0;gt=bt===lt?0:bt<lt?-1:1}return this.negative!==0?-gt|0:gt},rt.prototype.cmp=function(lt){if(this.negative!==0&&lt.negative===0)return-1;if(this.negative===0&&lt.negative!==0)return 1;var mt=this.ucmp(lt);return this.negative!==0?-mt|0:mt},rt.prototype.ucmp=function(lt){if(this.length>lt.length)return 1;if(this.length<lt.length)return-1;for(var mt=0,gt=this.length-1;gt>=0;gt--){var bt=this.words[gt]|0,St=lt.words[gt]|0;if(bt!==St){bt<St?mt=-1:bt>St&&(mt=1);break}}return mt},rt.prototype.gtn=function(lt){return this.cmpn(lt)===1},rt.prototype.gt=function(lt){return this.cmp(lt)===1},rt.prototype.gten=function(lt){return this.cmpn(lt)>=0},rt.prototype.gte=function(lt){return this.cmp(lt)>=0},rt.prototype.ltn=function(lt){return this.cmpn(lt)===-1},rt.prototype.lt=function(lt){return this.cmp(lt)===-1},rt.prototype.lten=function(lt){return this.cmpn(lt)<=0},rt.prototype.lte=function(lt){return this.cmp(lt)<=0},rt.prototype.eqn=function(lt){return this.cmpn(lt)===0},rt.prototype.eq=function(lt){return this.cmp(lt)===0},rt.red=function(lt){return new tr(lt)},rt.prototype.toRed=function(lt){return et(!this.red,"Already a number in reduction context"),et(this.negative===0,"red works only with positives"),lt.convertTo(this)._forceRed(lt)},rt.prototype.fromRed=function(){return et(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},rt.prototype._forceRed=function(lt){return this.red=lt,this},rt.prototype.forceRed=function(lt){return et(!this.red,"Already a number in reduction context"),this._forceRed(lt)},rt.prototype.redAdd=function(lt){return et(this.red,"redAdd works only with red numbers"),this.red.add(this,lt)},rt.prototype.redIAdd=function(lt){return et(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,lt)},rt.prototype.redSub=function(lt){return et(this.red,"redSub works only with red numbers"),this.red.sub(this,lt)},rt.prototype.redISub=function(lt){return et(this.red,"redISub works only with red numbers"),this.red.isub(this,lt)},rt.prototype.redShl=function(lt){return et(this.red,"redShl works only with red numbers"),this.red.shl(this,lt)},rt.prototype.redMul=function(lt){return et(this.red,"redMul works only with red numbers"),this.red._verify2(this,lt),this.red.mul(this,lt)},rt.prototype.redIMul=function(lt){return et(this.red,"redMul works only with red numbers"),this.red._verify2(this,lt),this.red.imul(this,lt)},rt.prototype.redSqr=function(){return et(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},rt.prototype.redISqr=function(){return et(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},rt.prototype.redSqrt=function(){return et(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},rt.prototype.redInvm=function(){return et(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},rt.prototype.redNeg=function(){return et(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},rt.prototype.redPow=function(lt){return et(this.red&&!lt.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,lt)};var jt={k256:null,p224:null,p192:null,p25519:null};function kt(Mt,lt){this.name=Mt,this.p=new rt(lt,16),this.n=this.p.bitLength(),this.k=new rt(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}kt.prototype._tmp=function(){var lt=new rt(null);return lt.words=new Array(Math.ceil(this.n/13)),lt},kt.prototype.ireduce=function(lt){var mt=lt,gt;do this.split(mt,this.tmp),mt=this.imulK(mt),mt=mt.iadd(this.tmp),gt=mt.bitLength();while(gt>this.n);var bt=gt<this.n?-1:mt.ucmp(this.p);return bt===0?(mt.words[0]=0,mt.length=1):bt>0?mt.isub(this.p):mt.strip!==void 0?mt.strip():mt._strip(),mt},kt.prototype.split=function(lt,mt){lt.iushrn(this.n,0,mt)},kt.prototype.imulK=function(lt){return lt.imul(this.k)};function Lt(){kt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}tt(Lt,kt),Lt.prototype.split=function(lt,mt){for(var gt=4194303,bt=Math.min(lt.length,9),St=0;St<bt;St++)mt.words[St]=lt.words[St];if(mt.length=bt,lt.length<=9){lt.words[0]=0,lt.length=1;return}var Nt=lt.words[9];for(mt.words[mt.length++]=Nt&gt,St=10;St<lt.length;St++){var Pt=lt.words[St]|0;lt.words[St-10]=(Pt&gt)<<4|Nt>>>22,Nt=Pt}Nt>>>=22,lt.words[St-10]=Nt,Nt===0&&lt.length>10?lt.length-=10:lt.length-=9},Lt.prototype.imulK=function(lt){lt.words[lt.length]=0,lt.words[lt.length+1]=0,lt.length+=2;for(var mt=0,gt=0;gt<lt.length;gt++){var bt=lt.words[gt]|0;mt+=bt*977,lt.words[gt]=mt&67108863,mt=bt*64+(mt/67108864|0)}return lt.words[lt.length-1]===0&&(lt.length--,lt.words[lt.length-1]===0&&lt.length--),lt};function Bt(){kt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}tt(Bt,kt);function Gt(){kt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}tt(Gt,kt);function er(){kt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}tt(er,kt),er.prototype.imulK=function(lt){for(var mt=0,gt=0;gt<lt.length;gt++){var bt=(lt.words[gt]|0)*19+mt,St=bt&67108863;bt>>>=26,lt.words[gt]=St,mt=bt}return mt!==0&&(lt.words[lt.length++]=mt),lt},rt._prime=function(lt){if(jt[lt])return jt[lt];var mt;if(lt==="k256")mt=new Lt;else if(lt==="p224")mt=new Bt;else if(lt==="p192")mt=new Gt;else if(lt==="p25519")mt=new er;else throw new Error("Unknown prime "+lt);return jt[lt]=mt,mt};function tr(Mt){if(typeof Mt=="string"){var lt=rt._prime(Mt);this.m=lt.p,this.prime=lt}else et(Mt.gtn(1),"modulus must be greater than 1"),this.m=Mt,this.prime=null}tr.prototype._verify1=function(lt){et(lt.negative===0,"red works only with positives"),et(lt.red,"red works only with red numbers")},tr.prototype._verify2=function(lt,mt){et((lt.negative|mt.negative)===0,"red works only with positives"),et(lt.red&&lt.red===mt.red,"red works only with red numbers")},tr.prototype.imod=function(lt){return this.prime?this.prime.ireduce(lt)._forceRed(this):lt.umod(this.m)._forceRed(this)},tr.prototype.neg=function(lt){return lt.isZero()?lt.clone():this.m.sub(lt)._forceRed(this)},tr.prototype.add=function(lt,mt){this._verify2(lt,mt);var gt=lt.add(mt);return gt.cmp(this.m)>=0&&gt.isub(this.m),gt._forceRed(this)},tr.prototype.iadd=function(lt,mt){this._verify2(lt,mt);var gt=lt.iadd(mt);return gt.cmp(this.m)>=0&&gt.isub(this.m),gt},tr.prototype.sub=function(lt,mt){this._verify2(lt,mt);var gt=lt.sub(mt);return gt.cmpn(0)<0&&gt.iadd(this.m),gt._forceRed(this)},tr.prototype.isub=function(lt,mt){this._verify2(lt,mt);var gt=lt.isub(mt);return gt.cmpn(0)<0&&gt.iadd(this.m),gt},tr.prototype.shl=function(lt,mt){return this._verify1(lt),this.imod(lt.ushln(mt))},tr.prototype.imul=function(lt,mt){return this._verify2(lt,mt),this.imod(lt.imul(mt))},tr.prototype.mul=function(lt,mt){return this._verify2(lt,mt),this.imod(lt.mul(mt))},tr.prototype.isqr=function(lt){return this.imul(lt,lt.clone())},tr.prototype.sqr=function(lt){return this.mul(lt,lt)},tr.prototype.sqrt=function(lt){if(lt.isZero())return lt.clone();var mt=this.m.andln(3);if(et(mt%2===1),mt===3){var gt=this.m.add(new rt(1)).iushrn(2);return this.pow(lt,gt)}for(var bt=this.m.subn(1),St=0;!bt.isZero()&&bt.andln(1)===0;)St++,bt.iushrn(1);et(!bt.isZero());var Nt=new rt(1).toRed(this),Pt=Nt.redNeg(),Tt=this.m.subn(1).iushrn(1),pt=this.m.bitLength();for(pt=new rt(2*pt*pt).toRed(this);this.pow(pt,Tt).cmp(Pt)!==0;)pt.redIAdd(Pt);for(var Rt=this.pow(pt,bt),zt=this.pow(lt,bt.addn(1).iushrn(1)),Yt=this.pow(lt,bt),ir=St;Yt.cmp(Nt)!==0;){for(var ur=Yt,cr=0;ur.cmp(Nt)!==0;cr++)ur=ur.redSqr();et(cr<ir);var rr=this.pow(Rt,new rt(1).iushln(ir-cr-1));zt=zt.redMul(rr),Rt=rr.redSqr(),Yt=Yt.redMul(Rt),ir=cr}return zt},tr.prototype.invm=function(lt){var mt=lt._invmp(this.m);return mt.negative!==0?(mt.negative=0,this.imod(mt).redNeg()):this.imod(mt)},tr.prototype.pow=function(lt,mt){if(mt.isZero())return new rt(1).toRed(this);if(mt.cmpn(1)===0)return lt.clone();var gt=4,bt=new Array(1<<gt);bt[0]=new rt(1).toRed(this),bt[1]=lt;for(var St=2;St<bt.length;St++)bt[St]=this.mul(bt[St-1],lt);var Nt=bt[0],Pt=0,Tt=0,pt=mt.bitLength()%26;for(pt===0&&(pt=26),St=mt.length-1;St>=0;St--){for(var Rt=mt.words[St],zt=pt-1;zt>=0;zt--){var Yt=Rt>>zt&1;if(Nt!==bt[0]&&(Nt=this.sqr(Nt)),Yt===0&&Pt===0){Tt=0;continue}Pt<<=1,Pt|=Yt,Tt++,!(Tt!==gt&&(St!==0||zt!==0))&&(Nt=this.mul(Nt,bt[Pt]),Tt=0,Pt=0)}pt=26}return Nt},tr.prototype.convertTo=function(lt){var mt=lt.umod(this.m);return mt===lt?mt.clone():mt},tr.prototype.convertFrom=function(lt){var mt=lt.clone();return mt.red=null,mt},rt.mont=function(lt){return new ar(lt)};function ar(Mt){tr.call(this,Mt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new rt(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}tt(ar,tr),ar.prototype.convertTo=function(lt){return this.imod(lt.ushln(this.shift))},ar.prototype.convertFrom=function(lt){var mt=this.imod(lt.mul(this.rinv));return mt.red=null,mt},ar.prototype.imul=function(lt,mt){if(lt.isZero()||mt.isZero())return lt.words[0]=0,lt.length=1,lt;var gt=lt.imul(mt),bt=gt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),St=gt.isub(bt).iushrn(this.shift),Nt=St;return St.cmp(this.m)>=0?Nt=St.isub(this.m):St.cmpn(0)<0&&(Nt=St.iadd(this.m)),Nt._forceRed(this)},ar.prototype.mul=function(lt,mt){if(lt.isZero()||mt.isZero())return new rt(0)._forceRed(this);var gt=lt.mul(mt),bt=gt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),St=gt.isub(bt).iushrn(this.shift),Nt=St;return St.cmp(this.m)>=0?Nt=St.isub(this.m):St.cmpn(0)<0&&(Nt=St.iadd(this.m)),Nt._forceRed(this)},ar.prototype.invm=function(lt){var mt=this.imod(lt._invmp(this.m).mul(this.r2));return mt._forceRed(this)}})(_,commonjsGlobal)}(bn$6)),bn$6.exports}var bn$5={exports:{}};bn$5.exports;var hasRequiredBn$5;function requireBn$5(){return hasRequiredBn$5||(hasRequiredBn$5=1,function(_){(function($,_e){function et(Mt,lt){if(!Mt)throw new Error(lt||"Assertion failed")}function tt(Mt,lt){Mt.super_=lt;var mt=function(){};mt.prototype=lt.prototype,Mt.prototype=new mt,Mt.prototype.constructor=Mt}function rt(Mt,lt,mt){if(rt.isBN(Mt))return Mt;this.negative=0,this.words=null,this.length=0,this.red=null,Mt!==null&&((lt==="le"||lt==="be")&&(mt=lt,lt=10),this._init(Mt||0,lt||10,mt||"be"))}typeof $=="object"?$.exports=rt:_e.BN=rt,rt.BN=rt,rt.wordSize=26;var nt;try{typeof window<"u"&&typeof window.Buffer<"u"?nt=window.Buffer:nt=require$$0$2.Buffer}catch{}rt.isBN=function(lt){return lt instanceof rt?!0:lt!==null&&typeof lt=="object"&&lt.constructor.wordSize===rt.wordSize&&Array.isArray(lt.words)},rt.max=function(lt,mt){return lt.cmp(mt)>0?lt:mt},rt.min=function(lt,mt){return lt.cmp(mt)<0?lt:mt},rt.prototype._init=function(lt,mt,gt){if(typeof lt=="number")return this._initNumber(lt,mt,gt);if(typeof lt=="object")return this._initArray(lt,mt,gt);mt==="hex"&&(mt=16),et(mt===(mt|0)&&mt>=2&&mt<=36),lt=lt.toString().replace(/\s+/g,"");var bt=0;lt[0]==="-"&&(bt++,this.negative=1),bt<lt.length&&(mt===16?this._parseHex(lt,bt,gt):(this._parseBase(lt,mt,bt),gt==="le"&&this._initArray(this.toArray(),mt,gt)))},rt.prototype._initNumber=function(lt,mt,gt){lt<0&&(this.negative=1,lt=-lt),lt<67108864?(this.words=[lt&67108863],this.length=1):lt<4503599627370496?(this.words=[lt&67108863,lt/67108864&67108863],this.length=2):(et(lt<9007199254740992),this.words=[lt&67108863,lt/67108864&67108863,1],this.length=3),gt==="le"&&this._initArray(this.toArray(),mt,gt)},rt.prototype._initArray=function(lt,mt,gt){if(et(typeof lt.length=="number"),lt.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(lt.length/3),this.words=new Array(this.length);for(var bt=0;bt<this.length;bt++)this.words[bt]=0;var St,Nt,Pt=0;if(gt==="be")for(bt=lt.length-1,St=0;bt>=0;bt-=3)Nt=lt[bt]|lt[bt-1]<<8|lt[bt-2]<<16,this.words[St]|=Nt<<Pt&67108863,this.words[St+1]=Nt>>>26-Pt&67108863,Pt+=24,Pt>=26&&(Pt-=26,St++);else if(gt==="le")for(bt=0,St=0;bt<lt.length;bt+=3)Nt=lt[bt]|lt[bt+1]<<8|lt[bt+2]<<16,this.words[St]|=Nt<<Pt&67108863,this.words[St+1]=Nt>>>26-Pt&67108863,Pt+=24,Pt>=26&&(Pt-=26,St++);return this.strip()};function it(Mt,lt){var mt=Mt.charCodeAt(lt);return mt>=65&&mt<=70?mt-55:mt>=97&&mt<=102?mt-87:mt-48&15}function st(Mt,lt,mt){var gt=it(Mt,mt);return mt-1>=lt&&(gt|=it(Mt,mt-1)<<4),gt}rt.prototype._parseHex=function(lt,mt,gt){this.length=Math.ceil((lt.length-mt)/6),this.words=new Array(this.length);for(var bt=0;bt<this.length;bt++)this.words[bt]=0;var St=0,Nt=0,Pt;if(gt==="be")for(bt=lt.length-1;bt>=mt;bt-=2)Pt=st(lt,mt,bt)<<St,this.words[Nt]|=Pt&67108863,St>=18?(St-=18,Nt+=1,this.words[Nt]|=Pt>>>26):St+=8;else{var Tt=lt.length-mt;for(bt=Tt%2===0?mt+1:mt;bt<lt.length;bt+=2)Pt=st(lt,mt,bt)<<St,this.words[Nt]|=Pt&67108863,St>=18?(St-=18,Nt+=1,this.words[Nt]|=Pt>>>26):St+=8}this.strip()};function at(Mt,lt,mt,gt){for(var bt=0,St=Math.min(Mt.length,mt),Nt=lt;Nt<St;Nt++){var Pt=Mt.charCodeAt(Nt)-48;bt*=gt,Pt>=49?bt+=Pt-49+10:Pt>=17?bt+=Pt-17+10:bt+=Pt}return bt}rt.prototype._parseBase=function(lt,mt,gt){this.words=[0],this.length=1;for(var bt=0,St=1;St<=67108863;St*=mt)bt++;bt--,St=St/mt|0;for(var Nt=lt.length-gt,Pt=Nt%bt,Tt=Math.min(Nt,Nt-Pt)+gt,pt=0,Rt=gt;Rt<Tt;Rt+=bt)pt=at(lt,Rt,Rt+bt,mt),this.imuln(St),this.words[0]+pt<67108864?this.words[0]+=pt:this._iaddn(pt);if(Pt!==0){var zt=1;for(pt=at(lt,Rt,lt.length,mt),Rt=0;Rt<Pt;Rt++)zt*=mt;this.imuln(zt),this.words[0]+pt<67108864?this.words[0]+=pt:this._iaddn(pt)}this.strip()},rt.prototype.copy=function(lt){lt.words=new Array(this.length);for(var mt=0;mt<this.length;mt++)lt.words[mt]=this.words[mt];lt.length=this.length,lt.negative=this.negative,lt.red=this.red},rt.prototype.clone=function(){var lt=new rt(null);return this.copy(lt),lt},rt.prototype._expand=function(lt){for(;this.length<lt;)this.words[this.length++]=0;return this},rt.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},rt.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},rt.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ot=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],dt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ht=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];rt.prototype.toString=function(lt,mt){lt=lt||10,mt=mt|0||1;var gt;if(lt===16||lt==="hex"){gt="";for(var bt=0,St=0,Nt=0;Nt<this.length;Nt++){var Pt=this.words[Nt],Tt=((Pt<<bt|St)&16777215).toString(16);St=Pt>>>24-bt&16777215,bt+=2,bt>=26&&(bt-=26,Nt--),St!==0||Nt!==this.length-1?gt=ot[6-Tt.length]+Tt+gt:gt=Tt+gt}for(St!==0&&(gt=St.toString(16)+gt);gt.length%mt!==0;)gt="0"+gt;return this.negative!==0&&(gt="-"+gt),gt}if(lt===(lt|0)&&lt>=2&&lt<=36){var pt=dt[lt],Rt=ht[lt];gt="";var zt=this.clone();for(zt.negative=0;!zt.isZero();){var Yt=zt.modn(Rt).toString(lt);zt=zt.idivn(Rt),zt.isZero()?gt=Yt+gt:gt=ot[pt-Yt.length]+Yt+gt}for(this.isZero()&&(gt="0"+gt);gt.length%mt!==0;)gt="0"+gt;return this.negative!==0&&(gt="-"+gt),gt}et(!1,"Base should be between 2 and 36")},rt.prototype.toNumber=function(){var lt=this.words[0];return this.length===2?lt+=this.words[1]*67108864:this.length===3&&this.words[2]===1?lt+=4503599627370496+this.words[1]*67108864:this.length>2&&et(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-lt:lt},rt.prototype.toJSON=function(){return this.toString(16)},rt.prototype.toBuffer=function(lt,mt){return et(typeof nt<"u"),this.toArrayLike(nt,lt,mt)},rt.prototype.toArray=function(lt,mt){return this.toArrayLike(Array,lt,mt)},rt.prototype.toArrayLike=function(lt,mt,gt){var bt=this.byteLength(),St=gt||Math.max(1,bt);et(bt<=St,"byte array longer than desired length"),et(St>0,"Requested array length <= 0"),this.strip();var Nt=mt==="le",Pt=new lt(St),Tt,pt,Rt=this.clone();if(Nt){for(pt=0;!Rt.isZero();pt++)Tt=Rt.andln(255),Rt.iushrn(8),Pt[pt]=Tt;for(;pt<St;pt++)Pt[pt]=0}else{for(pt=0;pt<St-bt;pt++)Pt[pt]=0;for(pt=0;!Rt.isZero();pt++)Tt=Rt.andln(255),Rt.iushrn(8),Pt[St-pt-1]=Tt}return Pt},Math.clz32?rt.prototype._countBits=function(lt){return 32-Math.clz32(lt)}:rt.prototype._countBits=function(lt){var mt=lt,gt=0;return mt>=4096&&(gt+=13,mt>>>=13),mt>=64&&(gt+=7,mt>>>=7),mt>=8&&(gt+=4,mt>>>=4),mt>=2&&(gt+=2,mt>>>=2),gt+mt},rt.prototype._zeroBits=function(lt){if(lt===0)return 26;var mt=lt,gt=0;return mt&8191||(gt+=13,mt>>>=13),mt&127||(gt+=7,mt>>>=7),mt&15||(gt+=4,mt>>>=4),mt&3||(gt+=2,mt>>>=2),mt&1||gt++,gt},rt.prototype.bitLength=function(){var lt=this.words[this.length-1],mt=this._countBits(lt);return(this.length-1)*26+mt};function yt(Mt){for(var lt=new Array(Mt.bitLength()),mt=0;mt<lt.length;mt++){var gt=mt/26|0,bt=mt%26;lt[mt]=(Mt.words[gt]&1<<bt)>>>bt}return lt}rt.prototype.zeroBits=function(){if(this.isZero())return 0;for(var lt=0,mt=0;mt<this.length;mt++){var gt=this._zeroBits(this.words[mt]);if(lt+=gt,gt!==26)break}return lt},rt.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},rt.prototype.toTwos=function(lt){return this.negative!==0?this.abs().inotn(lt).iaddn(1):this.clone()},rt.prototype.fromTwos=function(lt){return this.testn(lt-1)?this.notn(lt).iaddn(1).ineg():this.clone()},rt.prototype.isNeg=function(){return this.negative!==0},rt.prototype.neg=function(){return this.clone().ineg()},rt.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},rt.prototype.iuor=function(lt){for(;this.length<lt.length;)this.words[this.length++]=0;for(var mt=0;mt<lt.length;mt++)this.words[mt]=this.words[mt]|lt.words[mt];return this.strip()},rt.prototype.ior=function(lt){return et((this.negative|lt.negative)===0),this.iuor(lt)},rt.prototype.or=function(lt){return this.length>lt.length?this.clone().ior(lt):lt.clone().ior(this)},rt.prototype.uor=function(lt){return this.length>lt.length?this.clone().iuor(lt):lt.clone().iuor(this)},rt.prototype.iuand=function(lt){var mt;this.length>lt.length?mt=lt:mt=this;for(var gt=0;gt<mt.length;gt++)this.words[gt]=this.words[gt]&lt.words[gt];return this.length=mt.length,this.strip()},rt.prototype.iand=function(lt){return et((this.negative|lt.negative)===0),this.iuand(lt)},rt.prototype.and=function(lt){return this.length>lt.length?this.clone().iand(lt):lt.clone().iand(this)},rt.prototype.uand=function(lt){return this.length>lt.length?this.clone().iuand(lt):lt.clone().iuand(this)},rt.prototype.iuxor=function(lt){var mt,gt;this.length>lt.length?(mt=this,gt=lt):(mt=lt,gt=this);for(var bt=0;bt<gt.length;bt++)this.words[bt]=mt.words[bt]^gt.words[bt];if(this!==mt)for(;bt<mt.length;bt++)this.words[bt]=mt.words[bt];return this.length=mt.length,this.strip()},rt.prototype.ixor=function(lt){return et((this.negative|lt.negative)===0),this.iuxor(lt)},rt.prototype.xor=function(lt){return this.length>lt.length?this.clone().ixor(lt):lt.clone().ixor(this)},rt.prototype.uxor=function(lt){return this.length>lt.length?this.clone().iuxor(lt):lt.clone().iuxor(this)},rt.prototype.inotn=function(lt){et(typeof lt=="number"&&lt>=0);var mt=Math.ceil(lt/26)|0,gt=lt%26;this._expand(mt),gt>0&&mt--;for(var bt=0;bt<mt;bt++)this.words[bt]=~this.words[bt]&67108863;return gt>0&&(this.words[bt]=~this.words[bt]&67108863>>26-gt),this.strip()},rt.prototype.notn=function(lt){return this.clone().inotn(lt)},rt.prototype.setn=function(lt,mt){et(typeof lt=="number"&&lt>=0);var gt=lt/26|0,bt=lt%26;return this._expand(gt+1),mt?this.words[gt]=this.words[gt]|1<<bt:this.words[gt]=this.words[gt]&~(1<<bt),this.strip()},rt.prototype.iadd=function(lt){var mt;if(this.negative!==0&&lt.negative===0)return this.negative=0,mt=this.isub(lt),this.negative^=1,this._normSign();if(this.negative===0&&lt.negative!==0)return lt.negative=0,mt=this.isub(lt),lt.negative=1,mt._normSign();var gt,bt;this.length>lt.length?(gt=this,bt=lt):(gt=lt,bt=this);for(var St=0,Nt=0;Nt<bt.length;Nt++)mt=(gt.words[Nt]|0)+(bt.words[Nt]|0)+St,this.words[Nt]=mt&67108863,St=mt>>>26;for(;St!==0&&Nt<gt.length;Nt++)mt=(gt.words[Nt]|0)+St,this.words[Nt]=mt&67108863,St=mt>>>26;if(this.length=gt.length,St!==0)this.words[this.length]=St,this.length++;else if(gt!==this)for(;Nt<gt.length;Nt++)this.words[Nt]=gt.words[Nt];return this},rt.prototype.add=function(lt){var mt;return lt.negative!==0&&this.negative===0?(lt.negative=0,mt=this.sub(lt),lt.negative^=1,mt):lt.negative===0&&this.negative!==0?(this.negative=0,mt=lt.sub(this),this.negative=1,mt):this.length>lt.length?this.clone().iadd(lt):lt.clone().iadd(this)},rt.prototype.isub=function(lt){if(lt.negative!==0){lt.negative=0;var mt=this.iadd(lt);return lt.negative=1,mt._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(lt),this.negative=1,this._normSign();var gt=this.cmp(lt);if(gt===0)return this.negative=0,this.length=1,this.words[0]=0,this;var bt,St;gt>0?(bt=this,St=lt):(bt=lt,St=this);for(var Nt=0,Pt=0;Pt<St.length;Pt++)mt=(bt.words[Pt]|0)-(St.words[Pt]|0)+Nt,Nt=mt>>26,this.words[Pt]=mt&67108863;for(;Nt!==0&&Pt<bt.length;Pt++)mt=(bt.words[Pt]|0)+Nt,Nt=mt>>26,this.words[Pt]=mt&67108863;if(Nt===0&&Pt<bt.length&&bt!==this)for(;Pt<bt.length;Pt++)this.words[Pt]=bt.words[Pt];return this.length=Math.max(this.length,Pt),bt!==this&&(this.negative=1),this.strip()},rt.prototype.sub=function(lt){return this.clone().isub(lt)};function vt(Mt,lt,mt){mt.negative=lt.negative^Mt.negative;var gt=Mt.length+lt.length|0;mt.length=gt,gt=gt-1|0;var bt=Mt.words[0]|0,St=lt.words[0]|0,Nt=bt*St,Pt=Nt&67108863,Tt=Nt/67108864|0;mt.words[0]=Pt;for(var pt=1;pt<gt;pt++){for(var Rt=Tt>>>26,zt=Tt&67108863,Yt=Math.min(pt,lt.length-1),ir=Math.max(0,pt-Mt.length+1);ir<=Yt;ir++){var ur=pt-ir|0;bt=Mt.words[ur]|0,St=lt.words[ir]|0,Nt=bt*St+zt,Rt+=Nt/67108864|0,zt=Nt&67108863}mt.words[pt]=zt|0,Tt=Rt|0}return Tt!==0?mt.words[pt]=Tt|0:mt.length--,mt.strip()}var xt=function(lt,mt,gt){var bt=lt.words,St=mt.words,Nt=gt.words,Pt=0,Tt,pt,Rt,zt=bt[0]|0,Yt=zt&8191,ir=zt>>>13,ur=bt[1]|0,cr=ur&8191,rr=ur>>>13,fr=bt[2]|0,dr=fr&8191,gr=fr>>>13,hr=bt[3]|0,or=hr&8191,br=hr>>>13,Rr=bt[4]|0,_r=Rr&8191,Er=Rr>>>13,Hr=bt[5]|0,xr=Hr&8191,yr=Hr>>>13,Ar=bt[6]|0,$r=Ar&8191,Tr=Ar>>>13,jr=bt[7]|0,Cr=jr&8191,Nr=jr>>>13,nn=bt[8]|0,Mr=nn&8191,Lr=nn>>>13,an=bt[9]|0,pr=an&8191,nr=an>>>13,lr=St[0]|0,vr=lr&8191,wr=lr>>>13,Pr=St[1]|0,Sr=Pr&8191,Dr=Pr>>>13,rn=St[2]|0,Ir=rn&8191,Or=rn>>>13,sn=St[3]|0,Fr=sn&8191,Kr=sn>>>13,fn=St[4]|0,Br=fn&8191,Zr=fn>>>13,hn=St[5]|0,zr=hn&8191,Xr=hn>>>13,pn=St[6]|0,Vr=pn&8191,Yr=pn>>>13,mn=St[7]|0,Ur=mn&8191,Qr=mn>>>13,gn=St[8]|0,Gr=gn&8191,Jr=gn>>>13,yn=St[9]|0,Wr=yn&8191,en=yn>>>13;gt.negative=lt.negative^mt.negative,gt.length=19,Tt=Math.imul(Yt,vr),pt=Math.imul(Yt,wr),pt=pt+Math.imul(ir,vr)|0,Rt=Math.imul(ir,wr);var on=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(on>>>26)|0,on&=67108863,Tt=Math.imul(cr,vr),pt=Math.imul(cr,wr),pt=pt+Math.imul(rr,vr)|0,Rt=Math.imul(rr,wr),Tt=Tt+Math.imul(Yt,Sr)|0,pt=pt+Math.imul(Yt,Dr)|0,pt=pt+Math.imul(ir,Sr)|0,Rt=Rt+Math.imul(ir,Dr)|0;var un=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(un>>>26)|0,un&=67108863,Tt=Math.imul(dr,vr),pt=Math.imul(dr,wr),pt=pt+Math.imul(gr,vr)|0,Rt=Math.imul(gr,wr),Tt=Tt+Math.imul(cr,Sr)|0,pt=pt+Math.imul(cr,Dr)|0,pt=pt+Math.imul(rr,Sr)|0,Rt=Rt+Math.imul(rr,Dr)|0,Tt=Tt+Math.imul(Yt,Ir)|0,pt=pt+Math.imul(Yt,Or)|0,pt=pt+Math.imul(ir,Ir)|0,Rt=Rt+Math.imul(ir,Or)|0;var wn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(wn>>>26)|0,wn&=67108863,Tt=Math.imul(or,vr),pt=Math.imul(or,wr),pt=pt+Math.imul(br,vr)|0,Rt=Math.imul(br,wr),Tt=Tt+Math.imul(dr,Sr)|0,pt=pt+Math.imul(dr,Dr)|0,pt=pt+Math.imul(gr,Sr)|0,Rt=Rt+Math.imul(gr,Dr)|0,Tt=Tt+Math.imul(cr,Ir)|0,pt=pt+Math.imul(cr,Or)|0,pt=pt+Math.imul(rr,Ir)|0,Rt=Rt+Math.imul(rr,Or)|0,Tt=Tt+Math.imul(Yt,Fr)|0,pt=pt+Math.imul(Yt,Kr)|0,pt=pt+Math.imul(ir,Fr)|0,Rt=Rt+Math.imul(ir,Kr)|0;var $n=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+($n>>>26)|0,$n&=67108863,Tt=Math.imul(_r,vr),pt=Math.imul(_r,wr),pt=pt+Math.imul(Er,vr)|0,Rt=Math.imul(Er,wr),Tt=Tt+Math.imul(or,Sr)|0,pt=pt+Math.imul(or,Dr)|0,pt=pt+Math.imul(br,Sr)|0,Rt=Rt+Math.imul(br,Dr)|0,Tt=Tt+Math.imul(dr,Ir)|0,pt=pt+Math.imul(dr,Or)|0,pt=pt+Math.imul(gr,Ir)|0,Rt=Rt+Math.imul(gr,Or)|0,Tt=Tt+Math.imul(cr,Fr)|0,pt=pt+Math.imul(cr,Kr)|0,pt=pt+Math.imul(rr,Fr)|0,Rt=Rt+Math.imul(rr,Kr)|0,Tt=Tt+Math.imul(Yt,Br)|0,pt=pt+Math.imul(Yt,Zr)|0,pt=pt+Math.imul(ir,Br)|0,Rt=Rt+Math.imul(ir,Zr)|0;var Sn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,Tt=Math.imul(xr,vr),pt=Math.imul(xr,wr),pt=pt+Math.imul(yr,vr)|0,Rt=Math.imul(yr,wr),Tt=Tt+Math.imul(_r,Sr)|0,pt=pt+Math.imul(_r,Dr)|0,pt=pt+Math.imul(Er,Sr)|0,Rt=Rt+Math.imul(Er,Dr)|0,Tt=Tt+Math.imul(or,Ir)|0,pt=pt+Math.imul(or,Or)|0,pt=pt+Math.imul(br,Ir)|0,Rt=Rt+Math.imul(br,Or)|0,Tt=Tt+Math.imul(dr,Fr)|0,pt=pt+Math.imul(dr,Kr)|0,pt=pt+Math.imul(gr,Fr)|0,Rt=Rt+Math.imul(gr,Kr)|0,Tt=Tt+Math.imul(cr,Br)|0,pt=pt+Math.imul(cr,Zr)|0,pt=pt+Math.imul(rr,Br)|0,Rt=Rt+Math.imul(rr,Zr)|0,Tt=Tt+Math.imul(Yt,zr)|0,pt=pt+Math.imul(Yt,Xr)|0,pt=pt+Math.imul(ir,zr)|0,Rt=Rt+Math.imul(ir,Xr)|0;var En=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(En>>>26)|0,En&=67108863,Tt=Math.imul($r,vr),pt=Math.imul($r,wr),pt=pt+Math.imul(Tr,vr)|0,Rt=Math.imul(Tr,wr),Tt=Tt+Math.imul(xr,Sr)|0,pt=pt+Math.imul(xr,Dr)|0,pt=pt+Math.imul(yr,Sr)|0,Rt=Rt+Math.imul(yr,Dr)|0,Tt=Tt+Math.imul(_r,Ir)|0,pt=pt+Math.imul(_r,Or)|0,pt=pt+Math.imul(Er,Ir)|0,Rt=Rt+Math.imul(Er,Or)|0,Tt=Tt+Math.imul(or,Fr)|0,pt=pt+Math.imul(or,Kr)|0,pt=pt+Math.imul(br,Fr)|0,Rt=Rt+Math.imul(br,Kr)|0,Tt=Tt+Math.imul(dr,Br)|0,pt=pt+Math.imul(dr,Zr)|0,pt=pt+Math.imul(gr,Br)|0,Rt=Rt+Math.imul(gr,Zr)|0,Tt=Tt+Math.imul(cr,zr)|0,pt=pt+Math.imul(cr,Xr)|0,pt=pt+Math.imul(rr,zr)|0,Rt=Rt+Math.imul(rr,Xr)|0,Tt=Tt+Math.imul(Yt,Vr)|0,pt=pt+Math.imul(Yt,Yr)|0,pt=pt+Math.imul(ir,Vr)|0,Rt=Rt+Math.imul(ir,Yr)|0;var _n=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(_n>>>26)|0,_n&=67108863,Tt=Math.imul(Cr,vr),pt=Math.imul(Cr,wr),pt=pt+Math.imul(Nr,vr)|0,Rt=Math.imul(Nr,wr),Tt=Tt+Math.imul($r,Sr)|0,pt=pt+Math.imul($r,Dr)|0,pt=pt+Math.imul(Tr,Sr)|0,Rt=Rt+Math.imul(Tr,Dr)|0,Tt=Tt+Math.imul(xr,Ir)|0,pt=pt+Math.imul(xr,Or)|0,pt=pt+Math.imul(yr,Ir)|0,Rt=Rt+Math.imul(yr,Or)|0,Tt=Tt+Math.imul(_r,Fr)|0,pt=pt+Math.imul(_r,Kr)|0,pt=pt+Math.imul(Er,Fr)|0,Rt=Rt+Math.imul(Er,Kr)|0,Tt=Tt+Math.imul(or,Br)|0,pt=pt+Math.imul(or,Zr)|0,pt=pt+Math.imul(br,Br)|0,Rt=Rt+Math.imul(br,Zr)|0,Tt=Tt+Math.imul(dr,zr)|0,pt=pt+Math.imul(dr,Xr)|0,pt=pt+Math.imul(gr,zr)|0,Rt=Rt+Math.imul(gr,Xr)|0,Tt=Tt+Math.imul(cr,Vr)|0,pt=pt+Math.imul(cr,Yr)|0,pt=pt+Math.imul(rr,Vr)|0,Rt=Rt+Math.imul(rr,Yr)|0,Tt=Tt+Math.imul(Yt,Ur)|0,pt=pt+Math.imul(Yt,Qr)|0,pt=pt+Math.imul(ir,Ur)|0,Rt=Rt+Math.imul(ir,Qr)|0;var Tn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,Tt=Math.imul(Mr,vr),pt=Math.imul(Mr,wr),pt=pt+Math.imul(Lr,vr)|0,Rt=Math.imul(Lr,wr),Tt=Tt+Math.imul(Cr,Sr)|0,pt=pt+Math.imul(Cr,Dr)|0,pt=pt+Math.imul(Nr,Sr)|0,Rt=Rt+Math.imul(Nr,Dr)|0,Tt=Tt+Math.imul($r,Ir)|0,pt=pt+Math.imul($r,Or)|0,pt=pt+Math.imul(Tr,Ir)|0,Rt=Rt+Math.imul(Tr,Or)|0,Tt=Tt+Math.imul(xr,Fr)|0,pt=pt+Math.imul(xr,Kr)|0,pt=pt+Math.imul(yr,Fr)|0,Rt=Rt+Math.imul(yr,Kr)|0,Tt=Tt+Math.imul(_r,Br)|0,pt=pt+Math.imul(_r,Zr)|0,pt=pt+Math.imul(Er,Br)|0,Rt=Rt+Math.imul(Er,Zr)|0,Tt=Tt+Math.imul(or,zr)|0,pt=pt+Math.imul(or,Xr)|0,pt=pt+Math.imul(br,zr)|0,Rt=Rt+Math.imul(br,Xr)|0,Tt=Tt+Math.imul(dr,Vr)|0,pt=pt+Math.imul(dr,Yr)|0,pt=pt+Math.imul(gr,Vr)|0,Rt=Rt+Math.imul(gr,Yr)|0,Tt=Tt+Math.imul(cr,Ur)|0,pt=pt+Math.imul(cr,Qr)|0,pt=pt+Math.imul(rr,Ur)|0,Rt=Rt+Math.imul(rr,Qr)|0,Tt=Tt+Math.imul(Yt,Gr)|0,pt=pt+Math.imul(Yt,Jr)|0,pt=pt+Math.imul(ir,Gr)|0,Rt=Rt+Math.imul(ir,Jr)|0;var Cn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Tt=Math.imul(pr,vr),pt=Math.imul(pr,wr),pt=pt+Math.imul(nr,vr)|0,Rt=Math.imul(nr,wr),Tt=Tt+Math.imul(Mr,Sr)|0,pt=pt+Math.imul(Mr,Dr)|0,pt=pt+Math.imul(Lr,Sr)|0,Rt=Rt+Math.imul(Lr,Dr)|0,Tt=Tt+Math.imul(Cr,Ir)|0,pt=pt+Math.imul(Cr,Or)|0,pt=pt+Math.imul(Nr,Ir)|0,Rt=Rt+Math.imul(Nr,Or)|0,Tt=Tt+Math.imul($r,Fr)|0,pt=pt+Math.imul($r,Kr)|0,pt=pt+Math.imul(Tr,Fr)|0,Rt=Rt+Math.imul(Tr,Kr)|0,Tt=Tt+Math.imul(xr,Br)|0,pt=pt+Math.imul(xr,Zr)|0,pt=pt+Math.imul(yr,Br)|0,Rt=Rt+Math.imul(yr,Zr)|0,Tt=Tt+Math.imul(_r,zr)|0,pt=pt+Math.imul(_r,Xr)|0,pt=pt+Math.imul(Er,zr)|0,Rt=Rt+Math.imul(Er,Xr)|0,Tt=Tt+Math.imul(or,Vr)|0,pt=pt+Math.imul(or,Yr)|0,pt=pt+Math.imul(br,Vr)|0,Rt=Rt+Math.imul(br,Yr)|0,Tt=Tt+Math.imul(dr,Ur)|0,pt=pt+Math.imul(dr,Qr)|0,pt=pt+Math.imul(gr,Ur)|0,Rt=Rt+Math.imul(gr,Qr)|0,Tt=Tt+Math.imul(cr,Gr)|0,pt=pt+Math.imul(cr,Jr)|0,pt=pt+Math.imul(rr,Gr)|0,Rt=Rt+Math.imul(rr,Jr)|0,Tt=Tt+Math.imul(Yt,Wr)|0,pt=pt+Math.imul(Yt,en)|0,pt=pt+Math.imul(ir,Wr)|0,Rt=Rt+Math.imul(ir,en)|0;var An=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(An>>>26)|0,An&=67108863,Tt=Math.imul(pr,Sr),pt=Math.imul(pr,Dr),pt=pt+Math.imul(nr,Sr)|0,Rt=Math.imul(nr,Dr),Tt=Tt+Math.imul(Mr,Ir)|0,pt=pt+Math.imul(Mr,Or)|0,pt=pt+Math.imul(Lr,Ir)|0,Rt=Rt+Math.imul(Lr,Or)|0,Tt=Tt+Math.imul(Cr,Fr)|0,pt=pt+Math.imul(Cr,Kr)|0,pt=pt+Math.imul(Nr,Fr)|0,Rt=Rt+Math.imul(Nr,Kr)|0,Tt=Tt+Math.imul($r,Br)|0,pt=pt+Math.imul($r,Zr)|0,pt=pt+Math.imul(Tr,Br)|0,Rt=Rt+Math.imul(Tr,Zr)|0,Tt=Tt+Math.imul(xr,zr)|0,pt=pt+Math.imul(xr,Xr)|0,pt=pt+Math.imul(yr,zr)|0,Rt=Rt+Math.imul(yr,Xr)|0,Tt=Tt+Math.imul(_r,Vr)|0,pt=pt+Math.imul(_r,Yr)|0,pt=pt+Math.imul(Er,Vr)|0,Rt=Rt+Math.imul(Er,Yr)|0,Tt=Tt+Math.imul(or,Ur)|0,pt=pt+Math.imul(or,Qr)|0,pt=pt+Math.imul(br,Ur)|0,Rt=Rt+Math.imul(br,Qr)|0,Tt=Tt+Math.imul(dr,Gr)|0,pt=pt+Math.imul(dr,Jr)|0,pt=pt+Math.imul(gr,Gr)|0,Rt=Rt+Math.imul(gr,Jr)|0,Tt=Tt+Math.imul(cr,Wr)|0,pt=pt+Math.imul(cr,en)|0,pt=pt+Math.imul(rr,Wr)|0,Rt=Rt+Math.imul(rr,en)|0;var Rn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,Tt=Math.imul(pr,Ir),pt=Math.imul(pr,Or),pt=pt+Math.imul(nr,Ir)|0,Rt=Math.imul(nr,Or),Tt=Tt+Math.imul(Mr,Fr)|0,pt=pt+Math.imul(Mr,Kr)|0,pt=pt+Math.imul(Lr,Fr)|0,Rt=Rt+Math.imul(Lr,Kr)|0,Tt=Tt+Math.imul(Cr,Br)|0,pt=pt+Math.imul(Cr,Zr)|0,pt=pt+Math.imul(Nr,Br)|0,Rt=Rt+Math.imul(Nr,Zr)|0,Tt=Tt+Math.imul($r,zr)|0,pt=pt+Math.imul($r,Xr)|0,pt=pt+Math.imul(Tr,zr)|0,Rt=Rt+Math.imul(Tr,Xr)|0,Tt=Tt+Math.imul(xr,Vr)|0,pt=pt+Math.imul(xr,Yr)|0,pt=pt+Math.imul(yr,Vr)|0,Rt=Rt+Math.imul(yr,Yr)|0,Tt=Tt+Math.imul(_r,Ur)|0,pt=pt+Math.imul(_r,Qr)|0,pt=pt+Math.imul(Er,Ur)|0,Rt=Rt+Math.imul(Er,Qr)|0,Tt=Tt+Math.imul(or,Gr)|0,pt=pt+Math.imul(or,Jr)|0,pt=pt+Math.imul(br,Gr)|0,Rt=Rt+Math.imul(br,Jr)|0,Tt=Tt+Math.imul(dr,Wr)|0,pt=pt+Math.imul(dr,en)|0,pt=pt+Math.imul(gr,Wr)|0,Rt=Rt+Math.imul(gr,en)|0;var Nn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,Tt=Math.imul(pr,Fr),pt=Math.imul(pr,Kr),pt=pt+Math.imul(nr,Fr)|0,Rt=Math.imul(nr,Kr),Tt=Tt+Math.imul(Mr,Br)|0,pt=pt+Math.imul(Mr,Zr)|0,pt=pt+Math.imul(Lr,Br)|0,Rt=Rt+Math.imul(Lr,Zr)|0,Tt=Tt+Math.imul(Cr,zr)|0,pt=pt+Math.imul(Cr,Xr)|0,pt=pt+Math.imul(Nr,zr)|0,Rt=Rt+Math.imul(Nr,Xr)|0,Tt=Tt+Math.imul($r,Vr)|0,pt=pt+Math.imul($r,Yr)|0,pt=pt+Math.imul(Tr,Vr)|0,Rt=Rt+Math.imul(Tr,Yr)|0,Tt=Tt+Math.imul(xr,Ur)|0,pt=pt+Math.imul(xr,Qr)|0,pt=pt+Math.imul(yr,Ur)|0,Rt=Rt+Math.imul(yr,Qr)|0,Tt=Tt+Math.imul(_r,Gr)|0,pt=pt+Math.imul(_r,Jr)|0,pt=pt+Math.imul(Er,Gr)|0,Rt=Rt+Math.imul(Er,Jr)|0,Tt=Tt+Math.imul(or,Wr)|0,pt=pt+Math.imul(or,en)|0,pt=pt+Math.imul(br,Wr)|0,Rt=Rt+Math.imul(br,en)|0;var In=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(In>>>26)|0,In&=67108863,Tt=Math.imul(pr,Br),pt=Math.imul(pr,Zr),pt=pt+Math.imul(nr,Br)|0,Rt=Math.imul(nr,Zr),Tt=Tt+Math.imul(Mr,zr)|0,pt=pt+Math.imul(Mr,Xr)|0,pt=pt+Math.imul(Lr,zr)|0,Rt=Rt+Math.imul(Lr,Xr)|0,Tt=Tt+Math.imul(Cr,Vr)|0,pt=pt+Math.imul(Cr,Yr)|0,pt=pt+Math.imul(Nr,Vr)|0,Rt=Rt+Math.imul(Nr,Yr)|0,Tt=Tt+Math.imul($r,Ur)|0,pt=pt+Math.imul($r,Qr)|0,pt=pt+Math.imul(Tr,Ur)|0,Rt=Rt+Math.imul(Tr,Qr)|0,Tt=Tt+Math.imul(xr,Gr)|0,pt=pt+Math.imul(xr,Jr)|0,pt=pt+Math.imul(yr,Gr)|0,Rt=Rt+Math.imul(yr,Jr)|0,Tt=Tt+Math.imul(_r,Wr)|0,pt=pt+Math.imul(_r,en)|0,pt=pt+Math.imul(Er,Wr)|0,Rt=Rt+Math.imul(Er,en)|0;var Mn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,Tt=Math.imul(pr,zr),pt=Math.imul(pr,Xr),pt=pt+Math.imul(nr,zr)|0,Rt=Math.imul(nr,Xr),Tt=Tt+Math.imul(Mr,Vr)|0,pt=pt+Math.imul(Mr,Yr)|0,pt=pt+Math.imul(Lr,Vr)|0,Rt=Rt+Math.imul(Lr,Yr)|0,Tt=Tt+Math.imul(Cr,Ur)|0,pt=pt+Math.imul(Cr,Qr)|0,pt=pt+Math.imul(Nr,Ur)|0,Rt=Rt+Math.imul(Nr,Qr)|0,Tt=Tt+Math.imul($r,Gr)|0,pt=pt+Math.imul($r,Jr)|0,pt=pt+Math.imul(Tr,Gr)|0,Rt=Rt+Math.imul(Tr,Jr)|0,Tt=Tt+Math.imul(xr,Wr)|0,pt=pt+Math.imul(xr,en)|0,pt=pt+Math.imul(yr,Wr)|0,Rt=Rt+Math.imul(yr,en)|0;var Pn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,Tt=Math.imul(pr,Vr),pt=Math.imul(pr,Yr),pt=pt+Math.imul(nr,Vr)|0,Rt=Math.imul(nr,Yr),Tt=Tt+Math.imul(Mr,Ur)|0,pt=pt+Math.imul(Mr,Qr)|0,pt=pt+Math.imul(Lr,Ur)|0,Rt=Rt+Math.imul(Lr,Qr)|0,Tt=Tt+Math.imul(Cr,Gr)|0,pt=pt+Math.imul(Cr,Jr)|0,pt=pt+Math.imul(Nr,Gr)|0,Rt=Rt+Math.imul(Nr,Jr)|0,Tt=Tt+Math.imul($r,Wr)|0,pt=pt+Math.imul($r,en)|0,pt=pt+Math.imul(Tr,Wr)|0,Rt=Rt+Math.imul(Tr,en)|0;var kn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(kn>>>26)|0,kn&=67108863,Tt=Math.imul(pr,Ur),pt=Math.imul(pr,Qr),pt=pt+Math.imul(nr,Ur)|0,Rt=Math.imul(nr,Qr),Tt=Tt+Math.imul(Mr,Gr)|0,pt=pt+Math.imul(Mr,Jr)|0,pt=pt+Math.imul(Lr,Gr)|0,Rt=Rt+Math.imul(Lr,Jr)|0,Tt=Tt+Math.imul(Cr,Wr)|0,pt=pt+Math.imul(Cr,en)|0,pt=pt+Math.imul(Nr,Wr)|0,Rt=Rt+Math.imul(Nr,en)|0;var On=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(On>>>26)|0,On&=67108863,Tt=Math.imul(pr,Gr),pt=Math.imul(pr,Jr),pt=pt+Math.imul(nr,Gr)|0,Rt=Math.imul(nr,Jr),Tt=Tt+Math.imul(Mr,Wr)|0,pt=pt+Math.imul(Mr,en)|0,pt=pt+Math.imul(Lr,Wr)|0,Rt=Rt+Math.imul(Lr,en)|0;var Dn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,Tt=Math.imul(pr,Wr),pt=Math.imul(pr,en),pt=pt+Math.imul(nr,Wr)|0,Rt=Math.imul(nr,en);var jn=(Pt+Tt|0)+((pt&8191)<<13)|0;return Pt=(Rt+(pt>>>13)|0)+(jn>>>26)|0,jn&=67108863,Nt[0]=on,Nt[1]=un,Nt[2]=wn,Nt[3]=$n,Nt[4]=Sn,Nt[5]=En,Nt[6]=_n,Nt[7]=Tn,Nt[8]=Cn,Nt[9]=An,Nt[10]=Rn,Nt[11]=Nn,Nt[12]=In,Nt[13]=Mn,Nt[14]=Pn,Nt[15]=kn,Nt[16]=On,Nt[17]=Dn,Nt[18]=jn,Pt!==0&&(Nt[19]=Pt,gt.length++),gt};Math.imul||(xt=vt);function wt(Mt,lt,mt){mt.negative=lt.negative^Mt.negative,mt.length=Mt.length+lt.length;for(var gt=0,bt=0,St=0;St<mt.length-1;St++){var Nt=bt;bt=0;for(var Pt=gt&67108863,Tt=Math.min(St,lt.length-1),pt=Math.max(0,St-Mt.length+1);pt<=Tt;pt++){var Rt=St-pt,zt=Mt.words[Rt]|0,Yt=lt.words[pt]|0,ir=zt*Yt,ur=ir&67108863;Nt=Nt+(ir/67108864|0)|0,ur=ur+Pt|0,Pt=ur&67108863,Nt=Nt+(ur>>>26)|0,bt+=Nt>>>26,Nt&=67108863}mt.words[St]=Pt,gt=Nt,Nt=bt}return gt!==0?mt.words[St]=gt:mt.length--,mt.strip()}function Et(Mt,lt,mt){var gt=new At;return gt.mulp(Mt,lt,mt)}rt.prototype.mulTo=function(lt,mt){var gt,bt=this.length+lt.length;return this.length===10&&lt.length===10?gt=xt(this,lt,mt):bt<63?gt=vt(this,lt,mt):bt<1024?gt=wt(this,lt,mt):gt=Et(this,lt,mt),gt};function At(Mt,lt){this.x=Mt,this.y=lt}At.prototype.makeRBT=function(lt){for(var mt=new Array(lt),gt=rt.prototype._countBits(lt)-1,bt=0;bt<lt;bt++)mt[bt]=this.revBin(bt,gt,lt);return mt},At.prototype.revBin=function(lt,mt,gt){if(lt===0||lt===gt-1)return lt;for(var bt=0,St=0;St<mt;St++)bt|=(lt&1)<<mt-St-1,lt>>=1;return bt},At.prototype.permute=function(lt,mt,gt,bt,St,Nt){for(var Pt=0;Pt<Nt;Pt++)bt[Pt]=mt[lt[Pt]],St[Pt]=gt[lt[Pt]]},At.prototype.transform=function(lt,mt,gt,bt,St,Nt){this.permute(Nt,lt,mt,gt,bt,St);for(var Pt=1;Pt<St;Pt<<=1)for(var Tt=Pt<<1,pt=Math.cos(2*Math.PI/Tt),Rt=Math.sin(2*Math.PI/Tt),zt=0;zt<St;zt+=Tt)for(var Yt=pt,ir=Rt,ur=0;ur<Pt;ur++){var cr=gt[zt+ur],rr=bt[zt+ur],fr=gt[zt+ur+Pt],dr=bt[zt+ur+Pt],gr=Yt*fr-ir*dr;dr=Yt*dr+ir*fr,fr=gr,gt[zt+ur]=cr+fr,bt[zt+ur]=rr+dr,gt[zt+ur+Pt]=cr-fr,bt[zt+ur+Pt]=rr-dr,ur!==Tt&&(gr=pt*Yt-Rt*ir,ir=pt*ir+Rt*Yt,Yt=gr)}},At.prototype.guessLen13b=function(lt,mt){var gt=Math.max(mt,lt)|1,bt=gt&1,St=0;for(gt=gt/2|0;gt;gt=gt>>>1)St++;return 1<<St+1+bt},At.prototype.conjugate=function(lt,mt,gt){if(!(gt<=1))for(var bt=0;bt<gt/2;bt++){var St=lt[bt];lt[bt]=lt[gt-bt-1],lt[gt-bt-1]=St,St=mt[bt],mt[bt]=-mt[gt-bt-1],mt[gt-bt-1]=-St}},At.prototype.normalize13b=function(lt,mt){for(var gt=0,bt=0;bt<mt/2;bt++){var St=Math.round(lt[2*bt+1]/mt)*8192+Math.round(lt[2*bt]/mt)+gt;lt[bt]=St&67108863,St<67108864?gt=0:gt=St/67108864|0}return lt},At.prototype.convert13b=function(lt,mt,gt,bt){for(var St=0,Nt=0;Nt<mt;Nt++)St=St+(lt[Nt]|0),gt[2*Nt]=St&8191,St=St>>>13,gt[2*Nt+1]=St&8191,St=St>>>13;for(Nt=2*mt;Nt<bt;++Nt)gt[Nt]=0;et(St===0),et((St&-8192)===0)},At.prototype.stub=function(lt){for(var mt=new Array(lt),gt=0;gt<lt;gt++)mt[gt]=0;return mt},At.prototype.mulp=function(lt,mt,gt){var bt=2*this.guessLen13b(lt.length,mt.length),St=this.makeRBT(bt),Nt=this.stub(bt),Pt=new Array(bt),Tt=new Array(bt),pt=new Array(bt),Rt=new Array(bt),zt=new Array(bt),Yt=new Array(bt),ir=gt.words;ir.length=bt,this.convert13b(lt.words,lt.length,Pt,bt),this.convert13b(mt.words,mt.length,Rt,bt),this.transform(Pt,Nt,Tt,pt,bt,St),this.transform(Rt,Nt,zt,Yt,bt,St);for(var ur=0;ur<bt;ur++){var cr=Tt[ur]*zt[ur]-pt[ur]*Yt[ur];pt[ur]=Tt[ur]*Yt[ur]+pt[ur]*zt[ur],Tt[ur]=cr}return this.conjugate(Tt,pt,bt),this.transform(Tt,pt,ir,Nt,bt,St),this.conjugate(ir,Nt,bt),this.normalize13b(ir,bt),gt.negative=lt.negative^mt.negative,gt.length=lt.length+mt.length,gt.strip()},rt.prototype.mul=function(lt){var mt=new rt(null);return mt.words=new Array(this.length+lt.length),this.mulTo(lt,mt)},rt.prototype.mulf=function(lt){var mt=new rt(null);return mt.words=new Array(this.length+lt.length),Et(this,lt,mt)},rt.prototype.imul=function(lt){return this.clone().mulTo(lt,this)},rt.prototype.imuln=function(lt){et(typeof lt=="number"),et(lt<67108864);for(var mt=0,gt=0;gt<this.length;gt++){var bt=(this.words[gt]|0)*lt,St=(bt&67108863)+(mt&67108863);mt>>=26,mt+=bt/67108864|0,mt+=St>>>26,this.words[gt]=St&67108863}return mt!==0&&(this.words[gt]=mt,this.length++),this},rt.prototype.muln=function(lt){return this.clone().imuln(lt)},rt.prototype.sqr=function(){return this.mul(this)},rt.prototype.isqr=function(){return this.imul(this.clone())},rt.prototype.pow=function(lt){var mt=yt(lt);if(mt.length===0)return new rt(1);for(var gt=this,bt=0;bt<mt.length&&mt[bt]===0;bt++,gt=gt.sqr());if(++bt<mt.length)for(var St=gt.sqr();bt<mt.length;bt++,St=St.sqr())mt[bt]!==0&&(gt=gt.mul(St));return gt},rt.prototype.iushln=function(lt){et(typeof lt=="number"&&lt>=0);var mt=lt%26,gt=(lt-mt)/26,bt=67108863>>>26-mt<<26-mt,St;if(mt!==0){var Nt=0;for(St=0;St<this.length;St++){var Pt=this.words[St]&bt,Tt=(this.words[St]|0)-Pt<<mt;this.words[St]=Tt|Nt,Nt=Pt>>>26-mt}Nt&&(this.words[St]=Nt,this.length++)}if(gt!==0){for(St=this.length-1;St>=0;St--)this.words[St+gt]=this.words[St];for(St=0;St<gt;St++)this.words[St]=0;this.length+=gt}return this.strip()},rt.prototype.ishln=function(lt){return et(this.negative===0),this.iushln(lt)},rt.prototype.iushrn=function(lt,mt,gt){et(typeof lt=="number"&&lt>=0);var bt;mt?bt=(mt-mt%26)/26:bt=0;var St=lt%26,Nt=Math.min((lt-St)/26,this.length),Pt=67108863^67108863>>>St<<St,Tt=gt;if(bt-=Nt,bt=Math.max(0,bt),Tt){for(var pt=0;pt<Nt;pt++)Tt.words[pt]=this.words[pt];Tt.length=Nt}if(Nt!==0)if(this.length>Nt)for(this.length-=Nt,pt=0;pt<this.length;pt++)this.words[pt]=this.words[pt+Nt];else this.words[0]=0,this.length=1;var Rt=0;for(pt=this.length-1;pt>=0&&(Rt!==0||pt>=bt);pt--){var zt=this.words[pt]|0;this.words[pt]=Rt<<26-St|zt>>>St,Rt=zt&Pt}return Tt&&Rt!==0&&(Tt.words[Tt.length++]=Rt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},rt.prototype.ishrn=function(lt,mt,gt){return et(this.negative===0),this.iushrn(lt,mt,gt)},rt.prototype.shln=function(lt){return this.clone().ishln(lt)},rt.prototype.ushln=function(lt){return this.clone().iushln(lt)},rt.prototype.shrn=function(lt){return this.clone().ishrn(lt)},rt.prototype.ushrn=function(lt){return this.clone().iushrn(lt)},rt.prototype.testn=function(lt){et(typeof lt=="number"&&lt>=0);var mt=lt%26,gt=(lt-mt)/26,bt=1<<mt;if(this.length<=gt)return!1;var St=this.words[gt];return!!(St&bt)},rt.prototype.imaskn=function(lt){et(typeof lt=="number"&&lt>=0);var mt=lt%26,gt=(lt-mt)/26;if(et(this.negative===0,"imaskn works only with positive numbers"),this.length<=gt)return this;if(mt!==0&&gt++,this.length=Math.min(gt,this.length),mt!==0){var bt=67108863^67108863>>>mt<<mt;this.words[this.length-1]&=bt}return this.strip()},rt.prototype.maskn=function(lt){return this.clone().imaskn(lt)},rt.prototype.iaddn=function(lt){return et(typeof lt=="number"),et(lt<67108864),lt<0?this.isubn(-lt):this.negative!==0?this.length===1&&(this.words[0]|0)<lt?(this.words[0]=lt-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(lt),this.negative=1,this):this._iaddn(lt)},rt.prototype._iaddn=function(lt){this.words[0]+=lt;for(var mt=0;mt<this.length&&this.words[mt]>=67108864;mt++)this.words[mt]-=67108864,mt===this.length-1?this.words[mt+1]=1:this.words[mt+1]++;return this.length=Math.max(this.length,mt+1),this},rt.prototype.isubn=function(lt){if(et(typeof lt=="number"),et(lt<67108864),lt<0)return this.iaddn(-lt);if(this.negative!==0)return this.negative=0,this.iaddn(lt),this.negative=1,this;if(this.words[0]-=lt,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var mt=0;mt<this.length&&this.words[mt]<0;mt++)this.words[mt]+=67108864,this.words[mt+1]-=1;return this.strip()},rt.prototype.addn=function(lt){return this.clone().iaddn(lt)},rt.prototype.subn=function(lt){return this.clone().isubn(lt)},rt.prototype.iabs=function(){return this.negative=0,this},rt.prototype.abs=function(){return this.clone().iabs()},rt.prototype._ishlnsubmul=function(lt,mt,gt){var bt=lt.length+gt,St;this._expand(bt);var Nt,Pt=0;for(St=0;St<lt.length;St++){Nt=(this.words[St+gt]|0)+Pt;var Tt=(lt.words[St]|0)*mt;Nt-=Tt&67108863,Pt=(Nt>>26)-(Tt/67108864|0),this.words[St+gt]=Nt&67108863}for(;St<this.length-gt;St++)Nt=(this.words[St+gt]|0)+Pt,Pt=Nt>>26,this.words[St+gt]=Nt&67108863;if(Pt===0)return this.strip();for(et(Pt===-1),Pt=0,St=0;St<this.length;St++)Nt=-(this.words[St]|0)+Pt,Pt=Nt>>26,this.words[St]=Nt&67108863;return this.negative=1,this.strip()},rt.prototype._wordDiv=function(lt,mt){var gt=this.length-lt.length,bt=this.clone(),St=lt,Nt=St.words[St.length-1]|0,Pt=this._countBits(Nt);gt=26-Pt,gt!==0&&(St=St.ushln(gt),bt.iushln(gt),Nt=St.words[St.length-1]|0);var Tt=bt.length-St.length,pt;if(mt!=="mod"){pt=new rt(null),pt.length=Tt+1,pt.words=new Array(pt.length);for(var Rt=0;Rt<pt.length;Rt++)pt.words[Rt]=0}var zt=bt.clone()._ishlnsubmul(St,1,Tt);zt.negative===0&&(bt=zt,pt&&(pt.words[Tt]=1));for(var Yt=Tt-1;Yt>=0;Yt--){var ir=(bt.words[St.length+Yt]|0)*67108864+(bt.words[St.length+Yt-1]|0);for(ir=Math.min(ir/Nt|0,67108863),bt._ishlnsubmul(St,ir,Yt);bt.negative!==0;)ir--,bt.negative=0,bt._ishlnsubmul(St,1,Yt),bt.isZero()||(bt.negative^=1);pt&&(pt.words[Yt]=ir)}return pt&&pt.strip(),bt.strip(),mt!=="div"&&gt!==0&&bt.iushrn(gt),{div:pt||null,mod:bt}},rt.prototype.divmod=function(lt,mt,gt){if(et(!lt.isZero()),this.isZero())return{div:new rt(0),mod:new rt(0)};var bt,St,Nt;return this.negative!==0&&lt.negative===0?(Nt=this.neg().divmod(lt,mt),mt!=="mod"&&(bt=Nt.div.neg()),mt!=="div"&&(St=Nt.mod.neg(),gt&&St.negative!==0&&St.iadd(lt)),{div:bt,mod:St}):this.negative===0&&lt.negative!==0?(Nt=this.divmod(lt.neg(),mt),mt!=="mod"&&(bt=Nt.div.neg()),{div:bt,mod:Nt.mod}):this.negative&lt.negative?(Nt=this.neg().divmod(lt.neg(),mt),mt!=="div"&&(St=Nt.mod.neg(),gt&&St.negative!==0&&St.isub(lt)),{div:Nt.div,mod:St}):lt.length>this.length||this.cmp(lt)<0?{div:new rt(0),mod:this}:lt.length===1?mt==="div"?{div:this.divn(lt.words[0]),mod:null}:mt==="mod"?{div:null,mod:new rt(this.modn(lt.words[0]))}:{div:this.divn(lt.words[0]),mod:new rt(this.modn(lt.words[0]))}:this._wordDiv(lt,mt)},rt.prototype.div=function(lt){return this.divmod(lt,"div",!1).div},rt.prototype.mod=function(lt){return this.divmod(lt,"mod",!1).mod},rt.prototype.umod=function(lt){return this.divmod(lt,"mod",!0).mod},rt.prototype.divRound=function(lt){var mt=this.divmod(lt);if(mt.mod.isZero())return mt.div;var gt=mt.div.negative!==0?mt.mod.isub(lt):mt.mod,bt=lt.ushrn(1),St=lt.andln(1),Nt=gt.cmp(bt);return Nt<0||St===1&&Nt===0?mt.div:mt.div.negative!==0?mt.div.isubn(1):mt.div.iaddn(1)},rt.prototype.modn=function(lt){et(lt<=67108863);for(var mt=(1<<26)%lt,gt=0,bt=this.length-1;bt>=0;bt--)gt=(mt*gt+(this.words[bt]|0))%lt;return gt},rt.prototype.idivn=function(lt){et(lt<=67108863);for(var mt=0,gt=this.length-1;gt>=0;gt--){var bt=(this.words[gt]|0)+mt*67108864;this.words[gt]=bt/lt|0,mt=bt%lt}return this.strip()},rt.prototype.divn=function(lt){return this.clone().idivn(lt)},rt.prototype.egcd=function(lt){et(lt.negative===0),et(!lt.isZero());var mt=this,gt=lt.clone();mt.negative!==0?mt=mt.umod(lt):mt=mt.clone();for(var bt=new rt(1),St=new rt(0),Nt=new rt(0),Pt=new rt(1),Tt=0;mt.isEven()&&gt.isEven();)mt.iushrn(1),gt.iushrn(1),++Tt;for(var pt=gt.clone(),Rt=mt.clone();!mt.isZero();){for(var zt=0,Yt=1;!(mt.words[0]&Yt)&&zt<26;++zt,Yt<<=1);if(zt>0)for(mt.iushrn(zt);zt-- >0;)(bt.isOdd()||St.isOdd())&&(bt.iadd(pt),St.isub(Rt)),bt.iushrn(1),St.iushrn(1);for(var ir=0,ur=1;!(gt.words[0]&ur)&&ir<26;++ir,ur<<=1);if(ir>0)for(gt.iushrn(ir);ir-- >0;)(Nt.isOdd()||Pt.isOdd())&&(Nt.iadd(pt),Pt.isub(Rt)),Nt.iushrn(1),Pt.iushrn(1);mt.cmp(gt)>=0?(mt.isub(gt),bt.isub(Nt),St.isub(Pt)):(gt.isub(mt),Nt.isub(bt),Pt.isub(St))}return{a:Nt,b:Pt,gcd:gt.iushln(Tt)}},rt.prototype._invmp=function(lt){et(lt.negative===0),et(!lt.isZero());var mt=this,gt=lt.clone();mt.negative!==0?mt=mt.umod(lt):mt=mt.clone();for(var bt=new rt(1),St=new rt(0),Nt=gt.clone();mt.cmpn(1)>0&&gt.cmpn(1)>0;){for(var Pt=0,Tt=1;!(mt.words[0]&Tt)&&Pt<26;++Pt,Tt<<=1);if(Pt>0)for(mt.iushrn(Pt);Pt-- >0;)bt.isOdd()&&bt.iadd(Nt),bt.iushrn(1);for(var pt=0,Rt=1;!(gt.words[0]&Rt)&&pt<26;++pt,Rt<<=1);if(pt>0)for(gt.iushrn(pt);pt-- >0;)St.isOdd()&&St.iadd(Nt),St.iushrn(1);mt.cmp(gt)>=0?(mt.isub(gt),bt.isub(St)):(gt.isub(mt),St.isub(bt))}var zt;return mt.cmpn(1)===0?zt=bt:zt=St,zt.cmpn(0)<0&&zt.iadd(lt),zt},rt.prototype.gcd=function(lt){if(this.isZero())return lt.abs();if(lt.isZero())return this.abs();var mt=this.clone(),gt=lt.clone();mt.negative=0,gt.negative=0;for(var bt=0;mt.isEven()&&gt.isEven();bt++)mt.iushrn(1),gt.iushrn(1);do{for(;mt.isEven();)mt.iushrn(1);for(;gt.isEven();)gt.iushrn(1);var St=mt.cmp(gt);if(St<0){var Nt=mt;mt=gt,gt=Nt}else if(St===0||gt.cmpn(1)===0)break;mt.isub(gt)}while(!0);return gt.iushln(bt)},rt.prototype.invm=function(lt){return this.egcd(lt).a.umod(lt)},rt.prototype.isEven=function(){return(this.words[0]&1)===0},rt.prototype.isOdd=function(){return(this.words[0]&1)===1},rt.prototype.andln=function(lt){return this.words[0]&lt},rt.prototype.bincn=function(lt){et(typeof lt=="number");var mt=lt%26,gt=(lt-mt)/26,bt=1<<mt;if(this.length<=gt)return this._expand(gt+1),this.words[gt]|=bt,this;for(var St=bt,Nt=gt;St!==0&&Nt<this.length;Nt++){var Pt=this.words[Nt]|0;Pt+=St,St=Pt>>>26,Pt&=67108863,this.words[Nt]=Pt}return St!==0&&(this.words[Nt]=St,this.length++),this},rt.prototype.isZero=function(){return this.length===1&&this.words[0]===0},rt.prototype.cmpn=function(lt){var mt=lt<0;if(this.negative!==0&&!mt)return-1;if(this.negative===0&&mt)return 1;this.strip();var gt;if(this.length>1)gt=1;else{mt&&(lt=-lt),et(lt<=67108863,"Number is too big");var bt=this.words[0]|0;gt=bt===lt?0:bt<lt?-1:1}return this.negative!==0?-gt|0:gt},rt.prototype.cmp=function(lt){if(this.negative!==0&&lt.negative===0)return-1;if(this.negative===0&&lt.negative!==0)return 1;var mt=this.ucmp(lt);return this.negative!==0?-mt|0:mt},rt.prototype.ucmp=function(lt){if(this.length>lt.length)return 1;if(this.length<lt.length)return-1;for(var mt=0,gt=this.length-1;gt>=0;gt--){var bt=this.words[gt]|0,St=lt.words[gt]|0;if(bt!==St){bt<St?mt=-1:bt>St&&(mt=1);break}}return mt},rt.prototype.gtn=function(lt){return this.cmpn(lt)===1},rt.prototype.gt=function(lt){return this.cmp(lt)===1},rt.prototype.gten=function(lt){return this.cmpn(lt)>=0},rt.prototype.gte=function(lt){return this.cmp(lt)>=0},rt.prototype.ltn=function(lt){return this.cmpn(lt)===-1},rt.prototype.lt=function(lt){return this.cmp(lt)===-1},rt.prototype.lten=function(lt){return this.cmpn(lt)<=0},rt.prototype.lte=function(lt){return this.cmp(lt)<=0},rt.prototype.eqn=function(lt){return this.cmpn(lt)===0},rt.prototype.eq=function(lt){return this.cmp(lt)===0},rt.red=function(lt){return new tr(lt)},rt.prototype.toRed=function(lt){return et(!this.red,"Already a number in reduction context"),et(this.negative===0,"red works only with positives"),lt.convertTo(this)._forceRed(lt)},rt.prototype.fromRed=function(){return et(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},rt.prototype._forceRed=function(lt){return this.red=lt,this},rt.prototype.forceRed=function(lt){return et(!this.red,"Already a number in reduction context"),this._forceRed(lt)},rt.prototype.redAdd=function(lt){return et(this.red,"redAdd works only with red numbers"),this.red.add(this,lt)},rt.prototype.redIAdd=function(lt){return et(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,lt)},rt.prototype.redSub=function(lt){return et(this.red,"redSub works only with red numbers"),this.red.sub(this,lt)},rt.prototype.redISub=function(lt){return et(this.red,"redISub works only with red numbers"),this.red.isub(this,lt)},rt.prototype.redShl=function(lt){return et(this.red,"redShl works only with red numbers"),this.red.shl(this,lt)},rt.prototype.redMul=function(lt){return et(this.red,"redMul works only with red numbers"),this.red._verify2(this,lt),this.red.mul(this,lt)},rt.prototype.redIMul=function(lt){return et(this.red,"redMul works only with red numbers"),this.red._verify2(this,lt),this.red.imul(this,lt)},rt.prototype.redSqr=function(){return et(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},rt.prototype.redISqr=function(){return et(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},rt.prototype.redSqrt=function(){return et(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},rt.prototype.redInvm=function(){return et(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},rt.prototype.redNeg=function(){return et(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},rt.prototype.redPow=function(lt){return et(this.red&&!lt.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,lt)};var jt={k256:null,p224:null,p192:null,p25519:null};function kt(Mt,lt){this.name=Mt,this.p=new rt(lt,16),this.n=this.p.bitLength(),this.k=new rt(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}kt.prototype._tmp=function(){var lt=new rt(null);return lt.words=new Array(Math.ceil(this.n/13)),lt},kt.prototype.ireduce=function(lt){var mt=lt,gt;do this.split(mt,this.tmp),mt=this.imulK(mt),mt=mt.iadd(this.tmp),gt=mt.bitLength();while(gt>this.n);var bt=gt<this.n?-1:mt.ucmp(this.p);return bt===0?(mt.words[0]=0,mt.length=1):bt>0?mt.isub(this.p):mt.strip!==void 0?mt.strip():mt._strip(),mt},kt.prototype.split=function(lt,mt){lt.iushrn(this.n,0,mt)},kt.prototype.imulK=function(lt){return lt.imul(this.k)};function Lt(){kt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}tt(Lt,kt),Lt.prototype.split=function(lt,mt){for(var gt=4194303,bt=Math.min(lt.length,9),St=0;St<bt;St++)mt.words[St]=lt.words[St];if(mt.length=bt,lt.length<=9){lt.words[0]=0,lt.length=1;return}var Nt=lt.words[9];for(mt.words[mt.length++]=Nt&gt,St=10;St<lt.length;St++){var Pt=lt.words[St]|0;lt.words[St-10]=(Pt&gt)<<4|Nt>>>22,Nt=Pt}Nt>>>=22,lt.words[St-10]=Nt,Nt===0&&lt.length>10?lt.length-=10:lt.length-=9},Lt.prototype.imulK=function(lt){lt.words[lt.length]=0,lt.words[lt.length+1]=0,lt.length+=2;for(var mt=0,gt=0;gt<lt.length;gt++){var bt=lt.words[gt]|0;mt+=bt*977,lt.words[gt]=mt&67108863,mt=bt*64+(mt/67108864|0)}return lt.words[lt.length-1]===0&&(lt.length--,lt.words[lt.length-1]===0&&lt.length--),lt};function Bt(){kt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}tt(Bt,kt);function Gt(){kt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}tt(Gt,kt);function er(){kt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}tt(er,kt),er.prototype.imulK=function(lt){for(var mt=0,gt=0;gt<lt.length;gt++){var bt=(lt.words[gt]|0)*19+mt,St=bt&67108863;bt>>>=26,lt.words[gt]=St,mt=bt}return mt!==0&&(lt.words[lt.length++]=mt),lt},rt._prime=function(lt){if(jt[lt])return jt[lt];var mt;if(lt==="k256")mt=new Lt;else if(lt==="p224")mt=new Bt;else if(lt==="p192")mt=new Gt;else if(lt==="p25519")mt=new er;else throw new Error("Unknown prime "+lt);return jt[lt]=mt,mt};function tr(Mt){if(typeof Mt=="string"){var lt=rt._prime(Mt);this.m=lt.p,this.prime=lt}else et(Mt.gtn(1),"modulus must be greater than 1"),this.m=Mt,this.prime=null}tr.prototype._verify1=function(lt){et(lt.negative===0,"red works only with positives"),et(lt.red,"red works only with red numbers")},tr.prototype._verify2=function(lt,mt){et((lt.negative|mt.negative)===0,"red works only with positives"),et(lt.red&&lt.red===mt.red,"red works only with red numbers")},tr.prototype.imod=function(lt){return this.prime?this.prime.ireduce(lt)._forceRed(this):lt.umod(this.m)._forceRed(this)},tr.prototype.neg=function(lt){return lt.isZero()?lt.clone():this.m.sub(lt)._forceRed(this)},tr.prototype.add=function(lt,mt){this._verify2(lt,mt);var gt=lt.add(mt);return gt.cmp(this.m)>=0&&gt.isub(this.m),gt._forceRed(this)},tr.prototype.iadd=function(lt,mt){this._verify2(lt,mt);var gt=lt.iadd(mt);return gt.cmp(this.m)>=0&&gt.isub(this.m),gt},tr.prototype.sub=function(lt,mt){this._verify2(lt,mt);var gt=lt.sub(mt);return gt.cmpn(0)<0&&gt.iadd(this.m),gt._forceRed(this)},tr.prototype.isub=function(lt,mt){this._verify2(lt,mt);var gt=lt.isub(mt);return gt.cmpn(0)<0&&gt.iadd(this.m),gt},tr.prototype.shl=function(lt,mt){return this._verify1(lt),this.imod(lt.ushln(mt))},tr.prototype.imul=function(lt,mt){return this._verify2(lt,mt),this.imod(lt.imul(mt))},tr.prototype.mul=function(lt,mt){return this._verify2(lt,mt),this.imod(lt.mul(mt))},tr.prototype.isqr=function(lt){return this.imul(lt,lt.clone())},tr.prototype.sqr=function(lt){return this.mul(lt,lt)},tr.prototype.sqrt=function(lt){if(lt.isZero())return lt.clone();var mt=this.m.andln(3);if(et(mt%2===1),mt===3){var gt=this.m.add(new rt(1)).iushrn(2);return this.pow(lt,gt)}for(var bt=this.m.subn(1),St=0;!bt.isZero()&&bt.andln(1)===0;)St++,bt.iushrn(1);et(!bt.isZero());var Nt=new rt(1).toRed(this),Pt=Nt.redNeg(),Tt=this.m.subn(1).iushrn(1),pt=this.m.bitLength();for(pt=new rt(2*pt*pt).toRed(this);this.pow(pt,Tt).cmp(Pt)!==0;)pt.redIAdd(Pt);for(var Rt=this.pow(pt,bt),zt=this.pow(lt,bt.addn(1).iushrn(1)),Yt=this.pow(lt,bt),ir=St;Yt.cmp(Nt)!==0;){for(var ur=Yt,cr=0;ur.cmp(Nt)!==0;cr++)ur=ur.redSqr();et(cr<ir);var rr=this.pow(Rt,new rt(1).iushln(ir-cr-1));zt=zt.redMul(rr),Rt=rr.redSqr(),Yt=Yt.redMul(Rt),ir=cr}return zt},tr.prototype.invm=function(lt){var mt=lt._invmp(this.m);return mt.negative!==0?(mt.negative=0,this.imod(mt).redNeg()):this.imod(mt)},tr.prototype.pow=function(lt,mt){if(mt.isZero())return new rt(1).toRed(this);if(mt.cmpn(1)===0)return lt.clone();var gt=4,bt=new Array(1<<gt);bt[0]=new rt(1).toRed(this),bt[1]=lt;for(var St=2;St<bt.length;St++)bt[St]=this.mul(bt[St-1],lt);var Nt=bt[0],Pt=0,Tt=0,pt=mt.bitLength()%26;for(pt===0&&(pt=26),St=mt.length-1;St>=0;St--){for(var Rt=mt.words[St],zt=pt-1;zt>=0;zt--){var Yt=Rt>>zt&1;if(Nt!==bt[0]&&(Nt=this.sqr(Nt)),Yt===0&&Pt===0){Tt=0;continue}Pt<<=1,Pt|=Yt,Tt++,!(Tt!==gt&&(St!==0||zt!==0))&&(Nt=this.mul(Nt,bt[Pt]),Tt=0,Pt=0)}pt=26}return Nt},tr.prototype.convertTo=function(lt){var mt=lt.umod(this.m);return mt===lt?mt.clone():mt},tr.prototype.convertFrom=function(lt){var mt=lt.clone();return mt.red=null,mt},rt.mont=function(lt){return new ar(lt)};function ar(Mt){tr.call(this,Mt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new rt(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}tt(ar,tr),ar.prototype.convertTo=function(lt){return this.imod(lt.ushln(this.shift))},ar.prototype.convertFrom=function(lt){var mt=this.imod(lt.mul(this.rinv));return mt.red=null,mt},ar.prototype.imul=function(lt,mt){if(lt.isZero()||mt.isZero())return lt.words[0]=0,lt.length=1,lt;var gt=lt.imul(mt),bt=gt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),St=gt.isub(bt).iushrn(this.shift),Nt=St;return St.cmp(this.m)>=0?Nt=St.isub(this.m):St.cmpn(0)<0&&(Nt=St.iadd(this.m)),Nt._forceRed(this)},ar.prototype.mul=function(lt,mt){if(lt.isZero()||mt.isZero())return new rt(0)._forceRed(this);var gt=lt.mul(mt),bt=gt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),St=gt.isub(bt).iushrn(this.shift),Nt=St;return St.cmp(this.m)>=0?Nt=St.isub(this.m):St.cmpn(0)<0&&(Nt=St.iadd(this.m)),Nt._forceRed(this)},ar.prototype.invm=function(lt){var mt=this.imod(lt._invmp(this.m).mul(this.r2));return mt._forceRed(this)}})(_,commonjsGlobal)}(bn$5)),bn$5.exports}var brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var _;brorand.exports=function(tt){return _||(_=new $(null)),_.generate(tt)};function $(et){this.rand=et}if(brorand.exports.Rand=$,$.prototype.generate=function(tt){return this._rand(tt)},$.prototype._rand=function(tt){if(this.rand.getBytes)return this.rand.getBytes(tt);for(var rt=new Uint8Array(tt),nt=0;nt<rt.length;nt++)rt[nt]=this.rand.getByte();return rt},typeof self=="object")self.crypto&&self.crypto.getRandomValues?$.prototype._rand=function(tt){var rt=new Uint8Array(tt);return self.crypto.getRandomValues(rt),rt}:self.msCrypto&&self.msCrypto.getRandomValues?$.prototype._rand=function(tt){var rt=new Uint8Array(tt);return self.msCrypto.getRandomValues(rt),rt}:typeof window=="object"&&($.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var _e=requireCryptoBrowserify();if(typeof _e.randomBytes!="function")throw new Error("Not supported");$.prototype._rand=function(tt){return _e.randomBytes(tt)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var _=requireBn$5(),$=requireBrorand();function _e(et){this.rand=et||new $.Rand}return mr=_e,_e.create=function(tt){return new _e(tt)},_e.prototype._randbelow=function(tt){var rt=tt.bitLength(),nt=Math.ceil(rt/8);do var it=new _(this.rand.generate(nt));while(it.cmp(tt)>=0);return it},_e.prototype._randrange=function(tt,rt){var nt=rt.sub(tt);return tt.add(this._randbelow(nt))},_e.prototype.test=function(tt,rt,nt){var it=tt.bitLength(),st=_.mont(tt),at=new _(1).toRed(st);rt||(rt=Math.max(1,it/48|0));for(var ot=tt.subn(1),dt=0;!ot.testn(dt);dt++);for(var ht=tt.shrn(dt),yt=ot.toRed(st),vt=!0;rt>0;rt--){var xt=this._randrange(new _(2),ot);nt&&nt(xt);var wt=xt.toRed(st).redPow(ht);if(!(wt.cmp(at)===0||wt.cmp(yt)===0)){for(var Et=1;Et<dt;Et++){if(wt=wt.redSqr(),wt.cmp(at)===0)return!1;if(wt.cmp(yt)===0)break}if(Et===dt)return!1}}return vt},_e.prototype.getDivisor=function(tt,rt){var nt=tt.bitLength(),it=_.mont(tt),st=new _(1).toRed(it);rt||(rt=Math.max(1,nt/48|0));for(var at=tt.subn(1),ot=0;!at.testn(ot);ot++);for(var dt=tt.shrn(ot),ht=at.toRed(it);rt>0;rt--){var yt=this._randrange(new _(2),at),vt=tt.gcd(yt);if(vt.cmpn(1)!==0)return vt;var xt=yt.toRed(it).redPow(dt);if(!(xt.cmp(st)===0||xt.cmp(ht)===0)){for(var wt=1;wt<ot;wt++){if(xt=xt.redSqr(),xt.cmp(st)===0)return xt.fromRed().subn(1).gcd(tt);if(xt.cmp(ht)===0)break}if(wt===ot)return xt=xt.redSqr(),xt.fromRed().subn(1).gcd(tt)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var _=requireBrowser$b();generatePrime=wt,wt.simpleSieve=vt,wt.fermatTest=xt;var $=requireBn$6(),_e=new $(24),et=requireMr(),tt=new et,rt=new $(1),nt=new $(2),it=new $(5);new $(16),new $(8);var st=new $(10),at=new $(3);new $(7);var ot=new $(11),dt=new $(4);new $(12);var ht=null;function yt(){if(ht!==null)return ht;var Et=1048576,At=[];At[0]=2;for(var jt=1,kt=3;kt<Et;kt+=2){for(var Lt=Math.ceil(Math.sqrt(kt)),Bt=0;Bt<jt&&At[Bt]<=Lt&&kt%At[Bt]!==0;Bt++);jt!==Bt&&At[Bt]<=Lt||(At[jt++]=kt)}return ht=At,At}function vt(Et){for(var At=yt(),jt=0;jt<At.length;jt++)if(Et.modn(At[jt])===0)return Et.cmpn(At[jt])===0;return!0}function xt(Et){var At=$.mont(Et);return nt.toRed(At).redPow(Et.subn(1)).fromRed().cmpn(1)===0}function wt(Et,At){if(Et<16)return At===2||At===5?new $([140,123]):new $([140,39]);At=new $(At);for(var jt,kt;;){for(jt=new $(_(Math.ceil(Et/8)));jt.bitLength()>Et;)jt.ishrn(1);if(jt.isEven()&&jt.iadd(rt),jt.testn(1)||jt.iadd(nt),At.cmp(nt)){if(!At.cmp(it))for(;jt.mod(st).cmp(at);)jt.iadd(dt)}else for(;jt.mod(_e).cmp(ot);)jt.iadd(dt);if(kt=jt.shrn(1),vt(kt)&&vt(jt)&&xt(kt)&&xt(jt)&&tt.test(kt)&&tt.test(jt))return jt}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$1={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var _=requireBn$6(),$=requireMr(),_e=new $,et=new _(24),tt=new _(11),rt=new _(10),nt=new _(3),it=new _(7),st=requireGeneratePrime(),at=requireBrowser$b();dh=vt;function ot(wt,Et){return Et=Et||"utf8",Buffer.isBuffer(wt)||(wt=new Buffer(wt,Et)),this._pub=new _(wt),this}function dt(wt,Et){return Et=Et||"utf8",Buffer.isBuffer(wt)||(wt=new Buffer(wt,Et)),this._priv=new _(wt),this}var ht={};function yt(wt,Et){var At=Et.toString("hex"),jt=[At,wt.toString(16)].join("_");if(jt in ht)return ht[jt];var kt=0;if(wt.isEven()||!st.simpleSieve||!st.fermatTest(wt)||!_e.test(wt))return kt+=1,At==="02"||At==="05"?kt+=8:kt+=4,ht[jt]=kt,kt;_e.test(wt.shrn(1))||(kt+=2);var Lt;switch(At){case"02":wt.mod(et).cmp(tt)&&(kt+=8);break;case"05":Lt=wt.mod(rt),Lt.cmp(nt)&&Lt.cmp(it)&&(kt+=8);break;default:kt+=4}return ht[jt]=kt,kt}function vt(wt,Et,At){this.setGenerator(Et),this.__prime=new _(wt),this._prime=_.mont(this.__prime),this._primeLen=wt.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,At?(this.setPublicKey=ot,this.setPrivateKey=dt):this._primeCode=8}Object.defineProperty(vt.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=yt(this.__prime,this.__gen)),this._primeCode}}),vt.prototype.generateKeys=function(){return this._priv||(this._priv=new _(at(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},vt.prototype.computeSecret=function(wt){wt=new _(wt),wt=wt.toRed(this._prime);var Et=wt.redPow(this._priv).fromRed(),At=new Buffer(Et.toArray()),jt=this.getPrime();if(At.length<jt.length){var kt=new Buffer(jt.length-At.length);kt.fill(0),At=Buffer.concat([kt,At])}return At},vt.prototype.getPublicKey=function(Et){return xt(this._pub,Et)},vt.prototype.getPrivateKey=function(Et){return xt(this._priv,Et)},vt.prototype.getPrime=function(wt){return xt(this.__prime,wt)},vt.prototype.getGenerator=function(wt){return xt(this._gen,wt)},vt.prototype.setGenerator=function(wt,Et){return Et=Et||"utf8",Buffer.isBuffer(wt)||(wt=new Buffer(wt,Et)),this.__gen=wt,this._gen=new _(wt),this};function xt(wt,Et){var At=new Buffer(wt.toArray());return Et?At.toString(Et):At}return dh}var hasRequiredBrowser$4;function requireBrowser$4(){if(hasRequiredBrowser$4)return browser$5;hasRequiredBrowser$4=1;var _=requireGeneratePrime(),$=require$$1$1,_e=requireDh();function et(nt){var it=new Buffer($[nt].prime,"hex"),st=new Buffer($[nt].gen,"hex");return new _e(it,st)}var tt={binary:!0,hex:!0,base64:!0};function rt(nt,it,st,at){return Buffer.isBuffer(it)||tt[it]===void 0?rt(nt,"binary",it,st):(it=it||"binary",at=at||"binary",st=st||new Buffer([2]),Buffer.isBuffer(st)||(st=new Buffer(st,at)),typeof nt=="number"?new _e(_(nt,st),st,!0):(Buffer.isBuffer(nt)||(nt=new Buffer(nt,it)),new _e(nt,st,!0)))}return browser$5.DiffieHellmanGroup=browser$5.createDiffieHellmanGroup=browser$5.getDiffieHellman=et,browser$5.createDiffieHellman=browser$5.DiffieHellman=rt,browser$5}var readableBrowser={exports:{}},processNextickArgs={exports:{}},hasRequiredProcessNextickArgs;function requireProcessNextickArgs(){if(hasRequiredProcessNextickArgs)return processNextickArgs.exports;hasRequiredProcessNextickArgs=1,typeof process$1>"u"||!process$1.version||process$1.version.indexOf("v0.")===0||process$1.version.indexOf("v1.")===0&&process$1.version.indexOf("v1.8.")!==0?processNextickArgs.exports={nextTick:_}:processNextickArgs.exports=process$1;function _($,_e,et,tt){if(typeof $!="function")throw new TypeError('"callback" argument must be a function');var rt=arguments.length,nt,it;switch(rt){case 0:case 1:return process$1.nextTick($);case 2:return process$1.nextTick(function(){$.call(null,_e)});case 3:return process$1.nextTick(function(){$.call(null,_e,et)});case 4:return process$1.nextTick(function(){$.call(null,_e,et,tt)});default:for(nt=new Array(rt-1),it=0;it<nt.length;)nt[it++]=arguments[it];return process$1.nextTick(function(){$.apply(null,nt)})}}return processNextickArgs.exports}var isarray,hasRequiredIsarray;function requireIsarray(){if(hasRequiredIsarray)return isarray;hasRequiredIsarray=1;var _={}.toString;return isarray=Array.isArray||function($){return _.call($)=="[object Array]"},isarray}var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=requireEvents().EventEmitter),streamBrowser}var safeBuffer={exports:{}},hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(_,$){var _e=require$$0$2,et=_e.Buffer;function tt(nt,it){for(var st in nt)it[st]=nt[st]}et.from&&et.alloc&&et.allocUnsafe&&et.allocUnsafeSlow?_.exports=_e:(tt(_e,$),$.Buffer=rt);function rt(nt,it,st){return et(nt,it,st)}tt(et,rt),rt.from=function(nt,it,st){if(typeof nt=="number")throw new TypeError("Argument must not be a number");return et(nt,it,st)},rt.alloc=function(nt,it,st){if(typeof nt!="number")throw new TypeError("Argument must be a number");var at=et(nt);return it!==void 0?typeof st=="string"?at.fill(it,st):at.fill(it):at.fill(0),at},rt.allocUnsafe=function(nt){if(typeof nt!="number")throw new TypeError("Argument must be a number");return et(nt)},rt.allocUnsafeSlow=function(nt){if(typeof nt!="number")throw new TypeError("Argument must be a number");return _e.SlowBuffer(nt)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var util={},hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util;hasRequiredUtil=1;function _(xt){return Array.isArray?Array.isArray(xt):vt(xt)==="[object Array]"}util.isArray=_;function $(xt){return typeof xt=="boolean"}util.isBoolean=$;function _e(xt){return xt===null}util.isNull=_e;function et(xt){return xt==null}util.isNullOrUndefined=et;function tt(xt){return typeof xt=="number"}util.isNumber=tt;function rt(xt){return typeof xt=="string"}util.isString=rt;function nt(xt){return typeof xt=="symbol"}util.isSymbol=nt;function it(xt){return xt===void 0}util.isUndefined=it;function st(xt){return vt(xt)==="[object RegExp]"}util.isRegExp=st;function at(xt){return typeof xt=="object"&&xt!==null}util.isObject=at;function ot(xt){return vt(xt)==="[object Date]"}util.isDate=ot;function dt(xt){return vt(xt)==="[object Error]"||xt instanceof Error}util.isError=dt;function ht(xt){return typeof xt=="function"}util.isFunction=ht;function yt(xt){return xt===null||typeof xt=="boolean"||typeof xt=="number"||typeof xt=="string"||typeof xt=="symbol"||typeof xt>"u"}util.isPrimitive=yt,util.isBuffer=require$$0$2.Buffer.isBuffer;function vt(xt){return Object.prototype.toString.call(xt)}return util}var BufferList={exports:{}},hasRequiredBufferList;function requireBufferList(){return hasRequiredBufferList||(hasRequiredBufferList=1,function(_){function $(rt,nt){if(!(rt instanceof nt))throw new TypeError("Cannot call a class as a function")}var _e=requireSafeBuffer().Buffer,et=requireUtil$1();function tt(rt,nt,it){rt.copy(nt,it)}_.exports=function(){function rt(){$(this,rt),this.head=null,this.tail=null,this.length=0}return rt.prototype.push=function(it){var st={data:it,next:null};this.length>0?this.tail.next=st:this.head=st,this.tail=st,++this.length},rt.prototype.unshift=function(it){var st={data:it,next:this.head};this.length===0&&(this.tail=st),this.head=st,++this.length},rt.prototype.shift=function(){if(this.length!==0){var it=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,it}},rt.prototype.clear=function(){this.head=this.tail=null,this.length=0},rt.prototype.join=function(it){if(this.length===0)return"";for(var st=this.head,at=""+st.data;st=st.next;)at+=it+st.data;return at},rt.prototype.concat=function(it){if(this.length===0)return _e.alloc(0);for(var st=_e.allocUnsafe(it>>>0),at=this.head,ot=0;at;)tt(at.data,st,ot),ot+=at.data.length,at=at.next;return st},rt}(),et&&et.inspect&&et.inspect.custom&&(_.exports.prototype[et.inspect.custom]=function(){var rt=et.inspect({length:this.length});return this.constructor.name+" "+rt})}(BufferList)),BufferList.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;var _=requireProcessNextickArgs();function $(tt,rt){var nt=this,it=this._readableState&&this._readableState.destroyed,st=this._writableState&&this._writableState.destroyed;return it||st?(rt?rt(tt):tt&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,_.nextTick(et,this,tt)):_.nextTick(et,this,tt)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(tt||null,function(at){!rt&&at?nt._writableState?nt._writableState.errorEmitted||(nt._writableState.errorEmitted=!0,_.nextTick(et,nt,at)):_.nextTick(et,nt,at):rt&&rt(at)}),this)}function _e(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function et(tt,rt){tt.emit("error",rt)}return destroy_1={destroy:$,undestroy:_e},destroy_1}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1;var _=requireProcessNextickArgs();_stream_writable=xt;function $(Nt){var Pt=this;this.next=null,this.entry=null,this.finish=function(){St(Pt,Nt)}}var _e=!process$1.browser&&["v0.10","v0.9."].indexOf(process$1.version.slice(0,5))>-1?setImmediate:_.nextTick,et;xt.WritableState=yt;var tt=Object.create(requireUtil());tt.inherits=requireInherits_browser();var rt={deprecate:requireBrowser$a()},nt=requireStreamBrowser(),it=requireSafeBuffer().Buffer,st=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function at(Nt){return it.from(Nt)}function ot(Nt){return it.isBuffer(Nt)||Nt instanceof st}var dt=requireDestroy();tt.inherits(xt,nt);function ht(){}function yt(Nt,Pt){et=et||require_stream_duplex(),Nt=Nt||{};var Tt=Pt instanceof et;this.objectMode=!!Nt.objectMode,Tt&&(this.objectMode=this.objectMode||!!Nt.writableObjectMode);var pt=Nt.highWaterMark,Rt=Nt.writableHighWaterMark,zt=this.objectMode?16:16*1024;pt||pt===0?this.highWaterMark=pt:Tt&&(Rt||Rt===0)?this.highWaterMark=Rt:this.highWaterMark=zt,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Yt=Nt.decodeStrings===!1;this.decodeStrings=!Yt,this.defaultEncoding=Nt.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ir){Gt(Pt,ir)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new $(this)}yt.prototype.getBuffer=function(){for(var Pt=this.bufferedRequest,Tt=[];Pt;)Tt.push(Pt),Pt=Pt.next;return Tt},function(){try{Object.defineProperty(yt.prototype,"buffer",{get:rt.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var vt;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(vt=Function.prototype[Symbol.hasInstance],Object.defineProperty(xt,Symbol.hasInstance,{value:function(Nt){return vt.call(this,Nt)?!0:this!==xt?!1:Nt&&Nt._writableState instanceof yt}})):vt=function(Nt){return Nt instanceof this};function xt(Nt){if(et=et||require_stream_duplex(),!vt.call(xt,this)&&!(this instanceof et))return new xt(Nt);this._writableState=new yt(Nt,this),this.writable=!0,Nt&&(typeof Nt.write=="function"&&(this._write=Nt.write),typeof Nt.writev=="function"&&(this._writev=Nt.writev),typeof Nt.destroy=="function"&&(this._destroy=Nt.destroy),typeof Nt.final=="function"&&(this._final=Nt.final)),nt.call(this)}xt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function wt(Nt,Pt){var Tt=new Error("write after end");Nt.emit("error",Tt),_.nextTick(Pt,Tt)}function Et(Nt,Pt,Tt,pt){var Rt=!0,zt=!1;return Tt===null?zt=new TypeError("May not write null values to stream"):typeof Tt!="string"&&Tt!==void 0&&!Pt.objectMode&&(zt=new TypeError("Invalid non-string/buffer chunk")),zt&&(Nt.emit("error",zt),_.nextTick(pt,zt),Rt=!1),Rt}xt.prototype.write=function(Nt,Pt,Tt){var pt=this._writableState,Rt=!1,zt=!pt.objectMode&&ot(Nt);return zt&&!it.isBuffer(Nt)&&(Nt=at(Nt)),typeof Pt=="function"&&(Tt=Pt,Pt=null),zt?Pt="buffer":Pt||(Pt=pt.defaultEncoding),typeof Tt!="function"&&(Tt=ht),pt.ended?wt(this,Tt):(zt||Et(this,pt,Nt,Tt))&&(pt.pendingcb++,Rt=jt(this,pt,zt,Nt,Pt,Tt)),Rt},xt.prototype.cork=function(){var Nt=this._writableState;Nt.corked++},xt.prototype.uncork=function(){var Nt=this._writableState;Nt.corked&&(Nt.corked--,!Nt.writing&&!Nt.corked&&!Nt.bufferProcessing&&Nt.bufferedRequest&&ar(this,Nt))},xt.prototype.setDefaultEncoding=function(Pt){if(typeof Pt=="string"&&(Pt=Pt.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Pt+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+Pt);return this._writableState.defaultEncoding=Pt,this};function At(Nt,Pt,Tt){return!Nt.objectMode&&Nt.decodeStrings!==!1&&typeof Pt=="string"&&(Pt=it.from(Pt,Tt)),Pt}Object.defineProperty(xt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function jt(Nt,Pt,Tt,pt,Rt,zt){if(!Tt){var Yt=At(Pt,pt,Rt);pt!==Yt&&(Tt=!0,Rt="buffer",pt=Yt)}var ir=Pt.objectMode?1:pt.length;Pt.length+=ir;var ur=Pt.length<Pt.highWaterMark;if(ur||(Pt.needDrain=!0),Pt.writing||Pt.corked){var cr=Pt.lastBufferedRequest;Pt.lastBufferedRequest={chunk:pt,encoding:Rt,isBuf:Tt,callback:zt,next:null},cr?cr.next=Pt.lastBufferedRequest:Pt.bufferedRequest=Pt.lastBufferedRequest,Pt.bufferedRequestCount+=1}else kt(Nt,Pt,!1,ir,pt,Rt,zt);return ur}function kt(Nt,Pt,Tt,pt,Rt,zt,Yt){Pt.writelen=pt,Pt.writecb=Yt,Pt.writing=!0,Pt.sync=!0,Tt?Nt._writev(Rt,Pt.onwrite):Nt._write(Rt,zt,Pt.onwrite),Pt.sync=!1}function Lt(Nt,Pt,Tt,pt,Rt){--Pt.pendingcb,Tt?(_.nextTick(Rt,pt),_.nextTick(gt,Nt,Pt),Nt._writableState.errorEmitted=!0,Nt.emit("error",pt)):(Rt(pt),Nt._writableState.errorEmitted=!0,Nt.emit("error",pt),gt(Nt,Pt))}function Bt(Nt){Nt.writing=!1,Nt.writecb=null,Nt.length-=Nt.writelen,Nt.writelen=0}function Gt(Nt,Pt){var Tt=Nt._writableState,pt=Tt.sync,Rt=Tt.writecb;if(Bt(Tt),Pt)Lt(Nt,Tt,pt,Pt,Rt);else{var zt=Mt(Tt);!zt&&!Tt.corked&&!Tt.bufferProcessing&&Tt.bufferedRequest&&ar(Nt,Tt),pt?_e(er,Nt,Tt,zt,Rt):er(Nt,Tt,zt,Rt)}}function er(Nt,Pt,Tt,pt){Tt||tr(Nt,Pt),Pt.pendingcb--,pt(),gt(Nt,Pt)}function tr(Nt,Pt){Pt.length===0&&Pt.needDrain&&(Pt.needDrain=!1,Nt.emit("drain"))}function ar(Nt,Pt){Pt.bufferProcessing=!0;var Tt=Pt.bufferedRequest;if(Nt._writev&&Tt&&Tt.next){var pt=Pt.bufferedRequestCount,Rt=new Array(pt),zt=Pt.corkedRequestsFree;zt.entry=Tt;for(var Yt=0,ir=!0;Tt;)Rt[Yt]=Tt,Tt.isBuf||(ir=!1),Tt=Tt.next,Yt+=1;Rt.allBuffers=ir,kt(Nt,Pt,!0,Pt.length,Rt,"",zt.finish),Pt.pendingcb++,Pt.lastBufferedRequest=null,zt.next?(Pt.corkedRequestsFree=zt.next,zt.next=null):Pt.corkedRequestsFree=new $(Pt),Pt.bufferedRequestCount=0}else{for(;Tt;){var ur=Tt.chunk,cr=Tt.encoding,rr=Tt.callback,fr=Pt.objectMode?1:ur.length;if(kt(Nt,Pt,!1,fr,ur,cr,rr),Tt=Tt.next,Pt.bufferedRequestCount--,Pt.writing)break}Tt===null&&(Pt.lastBufferedRequest=null)}Pt.bufferedRequest=Tt,Pt.bufferProcessing=!1}xt.prototype._write=function(Nt,Pt,Tt){Tt(new Error("_write() is not implemented"))},xt.prototype._writev=null,xt.prototype.end=function(Nt,Pt,Tt){var pt=this._writableState;typeof Nt=="function"?(Tt=Nt,Nt=null,Pt=null):typeof Pt=="function"&&(Tt=Pt,Pt=null),Nt!=null&&this.write(Nt,Pt),pt.corked&&(pt.corked=1,this.uncork()),pt.ending||bt(this,pt,Tt)};function Mt(Nt){return Nt.ending&&Nt.length===0&&Nt.bufferedRequest===null&&!Nt.finished&&!Nt.writing}function lt(Nt,Pt){Nt._final(function(Tt){Pt.pendingcb--,Tt&&Nt.emit("error",Tt),Pt.prefinished=!0,Nt.emit("prefinish"),gt(Nt,Pt)})}function mt(Nt,Pt){!Pt.prefinished&&!Pt.finalCalled&&(typeof Nt._final=="function"?(Pt.pendingcb++,Pt.finalCalled=!0,_.nextTick(lt,Nt,Pt)):(Pt.prefinished=!0,Nt.emit("prefinish")))}function gt(Nt,Pt){var Tt=Mt(Pt);return Tt&&(mt(Nt,Pt),Pt.pendingcb===0&&(Pt.finished=!0,Nt.emit("finish"))),Tt}function bt(Nt,Pt,Tt){Pt.ending=!0,gt(Nt,Pt),Tt&&(Pt.finished?_.nextTick(Tt):Nt.once("finish",Tt)),Pt.ended=!0,Nt.writable=!1}function St(Nt,Pt,Tt){var pt=Nt.entry;for(Nt.entry=null;pt;){var Rt=pt.callback;Pt.pendingcb--,Rt(Tt),pt=pt.next}Pt.corkedRequestsFree.next=Nt}return Object.defineProperty(xt.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(Nt){this._writableState&&(this._writableState.destroyed=Nt)}}),xt.prototype.destroy=dt.destroy,xt.prototype._undestroy=dt.undestroy,xt.prototype._destroy=function(Nt,Pt){this.end(),Pt(Nt)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var _=requireProcessNextickArgs(),$=Object.keys||function(dt){var ht=[];for(var yt in dt)ht.push(yt);return ht};_stream_duplex=st;var _e=Object.create(requireUtil());_e.inherits=requireInherits_browser();var et=require_stream_readable(),tt=require_stream_writable();_e.inherits(st,et);for(var rt=$(tt.prototype),nt=0;nt<rt.length;nt++){var it=rt[nt];st.prototype[it]||(st.prototype[it]=tt.prototype[it])}function st(dt){if(!(this instanceof st))return new st(dt);et.call(this,dt),tt.call(this,dt),dt&&dt.readable===!1&&(this.readable=!1),dt&&dt.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,dt&&dt.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",at)}Object.defineProperty(st.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function at(){this.allowHalfOpen||this._writableState.ended||_.nextTick(ot,this)}function ot(dt){dt.end()}return Object.defineProperty(st.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(dt){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=dt,this._writableState.destroyed=dt)}}),st.prototype._destroy=function(dt,ht){this.push(null),this.end(),_.nextTick(ht,dt)},_stream_duplex}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1;var _=requireProcessNextickArgs();_stream_readable=At;var $=requireIsarray(),_e;At.ReadableState=Et,requireEvents().EventEmitter;var et=function(rr,fr){return rr.listeners(fr).length},tt=requireStreamBrowser(),rt=requireSafeBuffer().Buffer,nt=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function it(rr){return rt.from(rr)}function st(rr){return rt.isBuffer(rr)||rr instanceof nt}var at=Object.create(requireUtil());at.inherits=requireInherits_browser();var ot=requireUtil$1(),dt=void 0;ot&&ot.debuglog?dt=ot.debuglog("stream"):dt=function(){};var ht=requireBufferList(),yt=requireDestroy(),vt;at.inherits(At,tt);var xt=["error","close","destroy","pause","resume"];function wt(rr,fr,dr){if(typeof rr.prependListener=="function")return rr.prependListener(fr,dr);!rr._events||!rr._events[fr]?rr.on(fr,dr):$(rr._events[fr])?rr._events[fr].unshift(dr):rr._events[fr]=[dr,rr._events[fr]]}function Et(rr,fr){_e=_e||require_stream_duplex(),rr=rr||{};var dr=fr instanceof _e;this.objectMode=!!rr.objectMode,dr&&(this.objectMode=this.objectMode||!!rr.readableObjectMode);var gr=rr.highWaterMark,hr=rr.readableHighWaterMark,or=this.objectMode?16:16*1024;gr||gr===0?this.highWaterMark=gr:dr&&(hr||hr===0)?this.highWaterMark=hr:this.highWaterMark=or,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new ht,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=rr.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,rr.encoding&&(vt||(vt=requireString_decoder().StringDecoder),this.decoder=new vt(rr.encoding),this.encoding=rr.encoding)}function At(rr){if(_e=_e||require_stream_duplex(),!(this instanceof At))return new At(rr);this._readableState=new Et(rr,this),this.readable=!0,rr&&(typeof rr.read=="function"&&(this._read=rr.read),typeof rr.destroy=="function"&&(this._destroy=rr.destroy)),tt.call(this)}Object.defineProperty(At.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(rr){this._readableState&&(this._readableState.destroyed=rr)}}),At.prototype.destroy=yt.destroy,At.prototype._undestroy=yt.undestroy,At.prototype._destroy=function(rr,fr){this.push(null),fr(rr)},At.prototype.push=function(rr,fr){var dr=this._readableState,gr;return dr.objectMode?gr=!0:typeof rr=="string"&&(fr=fr||dr.defaultEncoding,fr!==dr.encoding&&(rr=rt.from(rr,fr),fr=""),gr=!0),jt(this,rr,fr,!1,gr)},At.prototype.unshift=function(rr){return jt(this,rr,null,!0,!1)};function jt(rr,fr,dr,gr,hr){var or=rr._readableState;if(fr===null)or.reading=!1,ar(rr,or);else{var br;hr||(br=Lt(or,fr)),br?rr.emit("error",br):or.objectMode||fr&&fr.length>0?(typeof fr!="string"&&!or.objectMode&&Object.getPrototypeOf(fr)!==rt.prototype&&(fr=it(fr)),gr?or.endEmitted?rr.emit("error",new Error("stream.unshift() after end event")):kt(rr,or,fr,!0):or.ended?rr.emit("error",new Error("stream.push() after EOF")):(or.reading=!1,or.decoder&&!dr?(fr=or.decoder.write(fr),or.objectMode||fr.length!==0?kt(rr,or,fr,!1):mt(rr,or)):kt(rr,or,fr,!1))):gr||(or.reading=!1)}return Bt(or)}function kt(rr,fr,dr,gr){fr.flowing&&fr.length===0&&!fr.sync?(rr.emit("data",dr),rr.read(0)):(fr.length+=fr.objectMode?1:dr.length,gr?fr.buffer.unshift(dr):fr.buffer.push(dr),fr.needReadable&&Mt(rr)),mt(rr,fr)}function Lt(rr,fr){var dr;return!st(fr)&&typeof fr!="string"&&fr!==void 0&&!rr.objectMode&&(dr=new TypeError("Invalid non-string/buffer chunk")),dr}function Bt(rr){return!rr.ended&&(rr.needReadable||rr.length<rr.highWaterMark||rr.length===0)}At.prototype.isPaused=function(){return this._readableState.flowing===!1},At.prototype.setEncoding=function(rr){return vt||(vt=requireString_decoder().StringDecoder),this._readableState.decoder=new vt(rr),this._readableState.encoding=rr,this};var Gt=8388608;function er(rr){return rr>=Gt?rr=Gt:(rr--,rr|=rr>>>1,rr|=rr>>>2,rr|=rr>>>4,rr|=rr>>>8,rr|=rr>>>16,rr++),rr}function tr(rr,fr){return rr<=0||fr.length===0&&fr.ended?0:fr.objectMode?1:rr!==rr?fr.flowing&&fr.length?fr.buffer.head.data.length:fr.length:(rr>fr.highWaterMark&&(fr.highWaterMark=er(rr)),rr<=fr.length?rr:fr.ended?fr.length:(fr.needReadable=!0,0))}At.prototype.read=function(rr){dt("read",rr),rr=parseInt(rr,10);var fr=this._readableState,dr=rr;if(rr!==0&&(fr.emittedReadable=!1),rr===0&&fr.needReadable&&(fr.length>=fr.highWaterMark||fr.ended))return dt("read: emitReadable",fr.length,fr.ended),fr.length===0&&fr.ended?ir(this):Mt(this),null;if(rr=tr(rr,fr),rr===0&&fr.ended)return fr.length===0&&ir(this),null;var gr=fr.needReadable;dt("need readable",gr),(fr.length===0||fr.length-rr<fr.highWaterMark)&&(gr=!0,dt("length less than watermark",gr)),fr.ended||fr.reading?(gr=!1,dt("reading or ended",gr)):gr&&(dt("do read"),fr.reading=!0,fr.sync=!0,fr.length===0&&(fr.needReadable=!0),this._read(fr.highWaterMark),fr.sync=!1,fr.reading||(rr=tr(dr,fr)));var hr;return rr>0?hr=pt(rr,fr):hr=null,hr===null?(fr.needReadable=!0,rr=0):fr.length-=rr,fr.length===0&&(fr.ended||(fr.needReadable=!0),dr!==rr&&fr.ended&&ir(this)),hr!==null&&this.emit("data",hr),hr};function ar(rr,fr){if(!fr.ended){if(fr.decoder){var dr=fr.decoder.end();dr&&dr.length&&(fr.buffer.push(dr),fr.length+=fr.objectMode?1:dr.length)}fr.ended=!0,Mt(rr)}}function Mt(rr){var fr=rr._readableState;fr.needReadable=!1,fr.emittedReadable||(dt("emitReadable",fr.flowing),fr.emittedReadable=!0,fr.sync?_.nextTick(lt,rr):lt(rr))}function lt(rr){dt("emit readable"),rr.emit("readable"),Tt(rr)}function mt(rr,fr){fr.readingMore||(fr.readingMore=!0,_.nextTick(gt,rr,fr))}function gt(rr,fr){for(var dr=fr.length;!fr.reading&&!fr.flowing&&!fr.ended&&fr.length<fr.highWaterMark&&(dt("maybeReadMore read 0"),rr.read(0),dr!==fr.length);)dr=fr.length;fr.readingMore=!1}At.prototype._read=function(rr){this.emit("error",new Error("_read() is not implemented"))},At.prototype.pipe=function(rr,fr){var dr=this,gr=this._readableState;switch(gr.pipesCount){case 0:gr.pipes=rr;break;case 1:gr.pipes=[gr.pipes,rr];break;default:gr.pipes.push(rr);break}gr.pipesCount+=1,dt("pipe count=%d opts=%j",gr.pipesCount,fr);var hr=(!fr||fr.end!==!1)&&rr!==process$1.stdout&&rr!==process$1.stderr,or=hr?Rr:jr;gr.endEmitted?_.nextTick(or):dr.once("end",or),rr.on("unpipe",br);function br(Cr,Nr){dt("onunpipe"),Cr===dr&&Nr&&Nr.hasUnpiped===!1&&(Nr.hasUnpiped=!0,Hr())}function Rr(){dt("onend"),rr.end()}var _r=bt(dr);rr.on("drain",_r);var Er=!1;function Hr(){dt("cleanup"),rr.removeListener("close",$r),rr.removeListener("finish",Tr),rr.removeListener("drain",_r),rr.removeListener("error",Ar),rr.removeListener("unpipe",br),dr.removeListener("end",Rr),dr.removeListener("end",jr),dr.removeListener("data",yr),Er=!0,gr.awaitDrain&&(!rr._writableState||rr._writableState.needDrain)&&_r()}var xr=!1;dr.on("data",yr);function yr(Cr){dt("ondata"),xr=!1;var Nr=rr.write(Cr);Nr===!1&&!xr&&((gr.pipesCount===1&&gr.pipes===rr||gr.pipesCount>1&&cr(gr.pipes,rr)!==-1)&&!Er&&(dt("false write response, pause",gr.awaitDrain),gr.awaitDrain++,xr=!0),dr.pause())}function Ar(Cr){dt("onerror",Cr),jr(),rr.removeListener("error",Ar),et(rr,"error")===0&&rr.emit("error",Cr)}wt(rr,"error",Ar);function $r(){rr.removeListener("finish",Tr),jr()}rr.once("close",$r);function Tr(){dt("onfinish"),rr.removeListener("close",$r),jr()}rr.once("finish",Tr);function jr(){dt("unpipe"),dr.unpipe(rr)}return rr.emit("pipe",dr),gr.flowing||(dt("pipe resume"),dr.resume()),rr};function bt(rr){return function(){var fr=rr._readableState;dt("pipeOnDrain",fr.awaitDrain),fr.awaitDrain&&fr.awaitDrain--,fr.awaitDrain===0&&et(rr,"data")&&(fr.flowing=!0,Tt(rr))}}At.prototype.unpipe=function(rr){var fr=this._readableState,dr={hasUnpiped:!1};if(fr.pipesCount===0)return this;if(fr.pipesCount===1)return rr&&rr!==fr.pipes?this:(rr||(rr=fr.pipes),fr.pipes=null,fr.pipesCount=0,fr.flowing=!1,rr&&rr.emit("unpipe",this,dr),this);if(!rr){var gr=fr.pipes,hr=fr.pipesCount;fr.pipes=null,fr.pipesCount=0,fr.flowing=!1;for(var or=0;or<hr;or++)gr[or].emit("unpipe",this,{hasUnpiped:!1});return this}var br=cr(fr.pipes,rr);return br===-1?this:(fr.pipes.splice(br,1),fr.pipesCount-=1,fr.pipesCount===1&&(fr.pipes=fr.pipes[0]),rr.emit("unpipe",this,dr),this)},At.prototype.on=function(rr,fr){var dr=tt.prototype.on.call(this,rr,fr);if(rr==="data")this._readableState.flowing!==!1&&this.resume();else if(rr==="readable"){var gr=this._readableState;!gr.endEmitted&&!gr.readableListening&&(gr.readableListening=gr.needReadable=!0,gr.emittedReadable=!1,gr.reading?gr.length&&Mt(this):_.nextTick(St,this))}return dr},At.prototype.addListener=At.prototype.on;function St(rr){dt("readable nexttick read 0"),rr.read(0)}At.prototype.resume=function(){var rr=this._readableState;return rr.flowing||(dt("resume"),rr.flowing=!0,Nt(this,rr)),this};function Nt(rr,fr){fr.resumeScheduled||(fr.resumeScheduled=!0,_.nextTick(Pt,rr,fr))}function Pt(rr,fr){fr.reading||(dt("resume read 0"),rr.read(0)),fr.resumeScheduled=!1,fr.awaitDrain=0,rr.emit("resume"),Tt(rr),fr.flowing&&!fr.reading&&rr.read(0)}At.prototype.pause=function(){return dt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(dt("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Tt(rr){var fr=rr._readableState;for(dt("flow",fr.flowing);fr.flowing&&rr.read()!==null;);}At.prototype.wrap=function(rr){var fr=this,dr=this._readableState,gr=!1;rr.on("end",function(){if(dt("wrapped end"),dr.decoder&&!dr.ended){var br=dr.decoder.end();br&&br.length&&fr.push(br)}fr.push(null)}),rr.on("data",function(br){if(dt("wrapped data"),dr.decoder&&(br=dr.decoder.write(br)),!(dr.objectMode&&br==null)&&!(!dr.objectMode&&(!br||!br.length))){var Rr=fr.push(br);Rr||(gr=!0,rr.pause())}});for(var hr in rr)this[hr]===void 0&&typeof rr[hr]=="function"&&(this[hr]=function(br){return function(){return rr[br].apply(rr,arguments)}}(hr));for(var or=0;or<xt.length;or++)rr.on(xt[or],this.emit.bind(this,xt[or]));return this._read=function(br){dt("wrapped _read",br),gr&&(gr=!1,rr.resume())},this},Object.defineProperty(At.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),At._fromList=pt;function pt(rr,fr){if(fr.length===0)return null;var dr;return fr.objectMode?dr=fr.buffer.shift():!rr||rr>=fr.length?(fr.decoder?dr=fr.buffer.join(""):fr.buffer.length===1?dr=fr.buffer.head.data:dr=fr.buffer.concat(fr.length),fr.buffer.clear()):dr=Rt(rr,fr.buffer,fr.decoder),dr}function Rt(rr,fr,dr){var gr;return rr<fr.head.data.length?(gr=fr.head.data.slice(0,rr),fr.head.data=fr.head.data.slice(rr)):rr===fr.head.data.length?gr=fr.shift():gr=dr?zt(rr,fr):Yt(rr,fr),gr}function zt(rr,fr){var dr=fr.head,gr=1,hr=dr.data;for(rr-=hr.length;dr=dr.next;){var or=dr.data,br=rr>or.length?or.length:rr;if(br===or.length?hr+=or:hr+=or.slice(0,rr),rr-=br,rr===0){br===or.length?(++gr,dr.next?fr.head=dr.next:fr.head=fr.tail=null):(fr.head=dr,dr.data=or.slice(br));break}++gr}return fr.length-=gr,hr}function Yt(rr,fr){var dr=rt.allocUnsafe(rr),gr=fr.head,hr=1;for(gr.data.copy(dr),rr-=gr.data.length;gr=gr.next;){var or=gr.data,br=rr>or.length?or.length:rr;if(or.copy(dr,dr.length-rr,0,br),rr-=br,rr===0){br===or.length?(++hr,gr.next?fr.head=gr.next:fr.head=fr.tail=null):(fr.head=gr,gr.data=or.slice(br));break}++hr}return fr.length-=hr,dr}function ir(rr){var fr=rr._readableState;if(fr.length>0)throw new Error('"endReadable()" called on non-empty stream');fr.endEmitted||(fr.ended=!0,_.nextTick(ur,fr,rr))}function ur(rr,fr){!rr.endEmitted&&rr.length===0&&(rr.endEmitted=!0,fr.readable=!1,fr.emit("end"))}function cr(rr,fr){for(var dr=0,gr=rr.length;dr<gr;dr++)if(rr[dr]===fr)return dr;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=et;var _=require_stream_duplex(),$=Object.create(requireUtil());$.inherits=requireInherits_browser(),$.inherits(et,_);function _e(nt,it){var st=this._transformState;st.transforming=!1;var at=st.writecb;if(!at)return this.emit("error",new Error("write callback called multiple times"));st.writechunk=null,st.writecb=null,it!=null&&this.push(it),at(nt);var ot=this._readableState;ot.reading=!1,(ot.needReadable||ot.length<ot.highWaterMark)&&this._read(ot.highWaterMark)}function et(nt){if(!(this instanceof et))return new et(nt);_.call(this,nt),this._transformState={afterTransform:_e.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,nt&&(typeof nt.transform=="function"&&(this._transform=nt.transform),typeof nt.flush=="function"&&(this._flush=nt.flush)),this.on("prefinish",tt)}function tt(){var nt=this;typeof this._flush=="function"?this._flush(function(it,st){rt(nt,it,st)}):rt(this,null,null)}et.prototype.push=function(nt,it){return this._transformState.needTransform=!1,_.prototype.push.call(this,nt,it)},et.prototype._transform=function(nt,it,st){throw new Error("_transform() is not implemented")},et.prototype._write=function(nt,it,st){var at=this._transformState;if(at.writecb=st,at.writechunk=nt,at.writeencoding=it,!at.transforming){var ot=this._readableState;(at.needTransform||ot.needReadable||ot.length<ot.highWaterMark)&&this._read(ot.highWaterMark)}},et.prototype._read=function(nt){var it=this._transformState;it.writechunk!==null&&it.writecb&&!it.transforming?(it.transforming=!0,this._transform(it.writechunk,it.writeencoding,it.afterTransform)):it.needTransform=!0},et.prototype._destroy=function(nt,it){var st=this;_.prototype._destroy.call(this,nt,function(at){it(at),st.emit("close")})};function rt(nt,it,st){if(it)return nt.emit("error",it);if(st!=null&&nt.push(st),nt._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(nt._transformState.transforming)throw new Error("Calling transform done when still transforming");return nt.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=_e;var _=require_stream_transform(),$=Object.create(requireUtil());$.inherits=requireInherits_browser(),$.inherits(_e,_);function _e(et){if(!(this instanceof _e))return new _e(et);_.call(this,et)}return _e.prototype._transform=function(et,tt,rt){rt(null,et)},_stream_passthrough}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,function(_,$){$=_.exports=require_stream_readable(),$.Stream=$,$.Readable=$,$.Writable=require_stream_writable(),$.Duplex=require_stream_duplex(),$.Transform=require_stream_transform(),$.PassThrough=require_stream_passthrough()}(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var sign$4={exports:{}},bn$4={exports:{}};bn$4.exports;var hasRequiredBn$4;function requireBn$4(){return hasRequiredBn$4||(hasRequiredBn$4=1,function(_){(function($,_e){function et(mt,gt){if(!mt)throw new Error(gt||"Assertion failed")}function tt(mt,gt){mt.super_=gt;var bt=function(){};bt.prototype=gt.prototype,mt.prototype=new bt,mt.prototype.constructor=mt}function rt(mt,gt,bt){if(rt.isBN(mt))return mt;this.negative=0,this.words=null,this.length=0,this.red=null,mt!==null&&((gt==="le"||gt==="be")&&(bt=gt,gt=10),this._init(mt||0,gt||10,bt||"be"))}typeof $=="object"?$.exports=rt:_e.BN=rt,rt.BN=rt,rt.wordSize=26;var nt;try{typeof window<"u"&&typeof window.Buffer<"u"?nt=window.Buffer:nt=require$$0$2.Buffer}catch{}rt.isBN=function(gt){return gt instanceof rt?!0:gt!==null&&typeof gt=="object"&&gt.constructor.wordSize===rt.wordSize&&Array.isArray(gt.words)},rt.max=function(gt,bt){return gt.cmp(bt)>0?gt:bt},rt.min=function(gt,bt){return gt.cmp(bt)<0?gt:bt},rt.prototype._init=function(gt,bt,St){if(typeof gt=="number")return this._initNumber(gt,bt,St);if(typeof gt=="object")return this._initArray(gt,bt,St);bt==="hex"&&(bt=16),et(bt===(bt|0)&&bt>=2&&bt<=36),gt=gt.toString().replace(/\s+/g,"");var Nt=0;gt[0]==="-"&&(Nt++,this.negative=1),Nt<gt.length&&(bt===16?this._parseHex(gt,Nt,St):(this._parseBase(gt,bt,Nt),St==="le"&&this._initArray(this.toArray(),bt,St)))},rt.prototype._initNumber=function(gt,bt,St){gt<0&&(this.negative=1,gt=-gt),gt<67108864?(this.words=[gt&67108863],this.length=1):gt<4503599627370496?(this.words=[gt&67108863,gt/67108864&67108863],this.length=2):(et(gt<9007199254740992),this.words=[gt&67108863,gt/67108864&67108863,1],this.length=3),St==="le"&&this._initArray(this.toArray(),bt,St)},rt.prototype._initArray=function(gt,bt,St){if(et(typeof gt.length=="number"),gt.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(gt.length/3),this.words=new Array(this.length);for(var Nt=0;Nt<this.length;Nt++)this.words[Nt]=0;var Pt,Tt,pt=0;if(St==="be")for(Nt=gt.length-1,Pt=0;Nt>=0;Nt-=3)Tt=gt[Nt]|gt[Nt-1]<<8|gt[Nt-2]<<16,this.words[Pt]|=Tt<<pt&67108863,this.words[Pt+1]=Tt>>>26-pt&67108863,pt+=24,pt>=26&&(pt-=26,Pt++);else if(St==="le")for(Nt=0,Pt=0;Nt<gt.length;Nt+=3)Tt=gt[Nt]|gt[Nt+1]<<8|gt[Nt+2]<<16,this.words[Pt]|=Tt<<pt&67108863,this.words[Pt+1]=Tt>>>26-pt&67108863,pt+=24,pt>=26&&(pt-=26,Pt++);return this._strip()};function it(mt,gt){var bt=mt.charCodeAt(gt);if(bt>=48&&bt<=57)return bt-48;if(bt>=65&&bt<=70)return bt-55;if(bt>=97&&bt<=102)return bt-87;et(!1,"Invalid character in "+mt)}function st(mt,gt,bt){var St=it(mt,bt);return bt-1>=gt&&(St|=it(mt,bt-1)<<4),St}rt.prototype._parseHex=function(gt,bt,St){this.length=Math.ceil((gt.length-bt)/6),this.words=new Array(this.length);for(var Nt=0;Nt<this.length;Nt++)this.words[Nt]=0;var Pt=0,Tt=0,pt;if(St==="be")for(Nt=gt.length-1;Nt>=bt;Nt-=2)pt=st(gt,bt,Nt)<<Pt,this.words[Tt]|=pt&67108863,Pt>=18?(Pt-=18,Tt+=1,this.words[Tt]|=pt>>>26):Pt+=8;else{var Rt=gt.length-bt;for(Nt=Rt%2===0?bt+1:bt;Nt<gt.length;Nt+=2)pt=st(gt,bt,Nt)<<Pt,this.words[Tt]|=pt&67108863,Pt>=18?(Pt-=18,Tt+=1,this.words[Tt]|=pt>>>26):Pt+=8}this._strip()};function at(mt,gt,bt,St){for(var Nt=0,Pt=0,Tt=Math.min(mt.length,bt),pt=gt;pt<Tt;pt++){var Rt=mt.charCodeAt(pt)-48;Nt*=St,Rt>=49?Pt=Rt-49+10:Rt>=17?Pt=Rt-17+10:Pt=Rt,et(Rt>=0&&Pt<St,"Invalid character"),Nt+=Pt}return Nt}rt.prototype._parseBase=function(gt,bt,St){this.words=[0],this.length=1;for(var Nt=0,Pt=1;Pt<=67108863;Pt*=bt)Nt++;Nt--,Pt=Pt/bt|0;for(var Tt=gt.length-St,pt=Tt%Nt,Rt=Math.min(Tt,Tt-pt)+St,zt=0,Yt=St;Yt<Rt;Yt+=Nt)zt=at(gt,Yt,Yt+Nt,bt),this.imuln(Pt),this.words[0]+zt<67108864?this.words[0]+=zt:this._iaddn(zt);if(pt!==0){var ir=1;for(zt=at(gt,Yt,gt.length,bt),Yt=0;Yt<pt;Yt++)ir*=bt;this.imuln(ir),this.words[0]+zt<67108864?this.words[0]+=zt:this._iaddn(zt)}this._strip()},rt.prototype.copy=function(gt){gt.words=new Array(this.length);for(var bt=0;bt<this.length;bt++)gt.words[bt]=this.words[bt];gt.length=this.length,gt.negative=this.negative,gt.red=this.red};function ot(mt,gt){mt.words=gt.words,mt.length=gt.length,mt.negative=gt.negative,mt.red=gt.red}if(rt.prototype._move=function(gt){ot(gt,this)},rt.prototype.clone=function(){var gt=new rt(null);return this.copy(gt),gt},rt.prototype._expand=function(gt){for(;this.length<gt;)this.words[this.length++]=0;return this},rt.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},rt.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{rt.prototype[Symbol.for("nodejs.util.inspect.custom")]=dt}catch{rt.prototype.inspect=dt}else rt.prototype.inspect=dt;function dt(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var ht=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],yt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],vt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];rt.prototype.toString=function(gt,bt){gt=gt||10,bt=bt|0||1;var St;if(gt===16||gt==="hex"){St="";for(var Nt=0,Pt=0,Tt=0;Tt<this.length;Tt++){var pt=this.words[Tt],Rt=((pt<<Nt|Pt)&16777215).toString(16);Pt=pt>>>24-Nt&16777215,Nt+=2,Nt>=26&&(Nt-=26,Tt--),Pt!==0||Tt!==this.length-1?St=ht[6-Rt.length]+Rt+St:St=Rt+St}for(Pt!==0&&(St=Pt.toString(16)+St);St.length%bt!==0;)St="0"+St;return this.negative!==0&&(St="-"+St),St}if(gt===(gt|0)&&gt>=2&&gt<=36){var zt=yt[gt],Yt=vt[gt];St="";var ir=this.clone();for(ir.negative=0;!ir.isZero();){var ur=ir.modrn(Yt).toString(gt);ir=ir.idivn(Yt),ir.isZero()?St=ur+St:St=ht[zt-ur.length]+ur+St}for(this.isZero()&&(St="0"+St);St.length%bt!==0;)St="0"+St;return this.negative!==0&&(St="-"+St),St}et(!1,"Base should be between 2 and 36")},rt.prototype.toNumber=function(){var gt=this.words[0];return this.length===2?gt+=this.words[1]*67108864:this.length===3&&this.words[2]===1?gt+=4503599627370496+this.words[1]*67108864:this.length>2&&et(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-gt:gt},rt.prototype.toJSON=function(){return this.toString(16,2)},nt&&(rt.prototype.toBuffer=function(gt,bt){return this.toArrayLike(nt,gt,bt)}),rt.prototype.toArray=function(gt,bt){return this.toArrayLike(Array,gt,bt)};var xt=function(gt,bt){return gt.allocUnsafe?gt.allocUnsafe(bt):new gt(bt)};rt.prototype.toArrayLike=function(gt,bt,St){this._strip();var Nt=this.byteLength(),Pt=St||Math.max(1,Nt);et(Nt<=Pt,"byte array longer than desired length"),et(Pt>0,"Requested array length <= 0");var Tt=xt(gt,Pt),pt=bt==="le"?"LE":"BE";return this["_toArrayLike"+pt](Tt,Nt),Tt},rt.prototype._toArrayLikeLE=function(gt,bt){for(var St=0,Nt=0,Pt=0,Tt=0;Pt<this.length;Pt++){var pt=this.words[Pt]<<Tt|Nt;gt[St++]=pt&255,St<gt.length&&(gt[St++]=pt>>8&255),St<gt.length&&(gt[St++]=pt>>16&255),Tt===6?(St<gt.length&&(gt[St++]=pt>>24&255),Nt=0,Tt=0):(Nt=pt>>>24,Tt+=2)}if(St<gt.length)for(gt[St++]=Nt;St<gt.length;)gt[St++]=0},rt.prototype._toArrayLikeBE=function(gt,bt){for(var St=gt.length-1,Nt=0,Pt=0,Tt=0;Pt<this.length;Pt++){var pt=this.words[Pt]<<Tt|Nt;gt[St--]=pt&255,St>=0&&(gt[St--]=pt>>8&255),St>=0&&(gt[St--]=pt>>16&255),Tt===6?(St>=0&&(gt[St--]=pt>>24&255),Nt=0,Tt=0):(Nt=pt>>>24,Tt+=2)}if(St>=0)for(gt[St--]=Nt;St>=0;)gt[St--]=0},Math.clz32?rt.prototype._countBits=function(gt){return 32-Math.clz32(gt)}:rt.prototype._countBits=function(gt){var bt=gt,St=0;return bt>=4096&&(St+=13,bt>>>=13),bt>=64&&(St+=7,bt>>>=7),bt>=8&&(St+=4,bt>>>=4),bt>=2&&(St+=2,bt>>>=2),St+bt},rt.prototype._zeroBits=function(gt){if(gt===0)return 26;var bt=gt,St=0;return bt&8191||(St+=13,bt>>>=13),bt&127||(St+=7,bt>>>=7),bt&15||(St+=4,bt>>>=4),bt&3||(St+=2,bt>>>=2),bt&1||St++,St},rt.prototype.bitLength=function(){var gt=this.words[this.length-1],bt=this._countBits(gt);return(this.length-1)*26+bt};function wt(mt){for(var gt=new Array(mt.bitLength()),bt=0;bt<gt.length;bt++){var St=bt/26|0,Nt=bt%26;gt[bt]=mt.words[St]>>>Nt&1}return gt}rt.prototype.zeroBits=function(){if(this.isZero())return 0;for(var gt=0,bt=0;bt<this.length;bt++){var St=this._zeroBits(this.words[bt]);if(gt+=St,St!==26)break}return gt},rt.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},rt.prototype.toTwos=function(gt){return this.negative!==0?this.abs().inotn(gt).iaddn(1):this.clone()},rt.prototype.fromTwos=function(gt){return this.testn(gt-1)?this.notn(gt).iaddn(1).ineg():this.clone()},rt.prototype.isNeg=function(){return this.negative!==0},rt.prototype.neg=function(){return this.clone().ineg()},rt.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},rt.prototype.iuor=function(gt){for(;this.length<gt.length;)this.words[this.length++]=0;for(var bt=0;bt<gt.length;bt++)this.words[bt]=this.words[bt]|gt.words[bt];return this._strip()},rt.prototype.ior=function(gt){return et((this.negative|gt.negative)===0),this.iuor(gt)},rt.prototype.or=function(gt){return this.length>gt.length?this.clone().ior(gt):gt.clone().ior(this)},rt.prototype.uor=function(gt){return this.length>gt.length?this.clone().iuor(gt):gt.clone().iuor(this)},rt.prototype.iuand=function(gt){var bt;this.length>gt.length?bt=gt:bt=this;for(var St=0;St<bt.length;St++)this.words[St]=this.words[St]&gt.words[St];return this.length=bt.length,this._strip()},rt.prototype.iand=function(gt){return et((this.negative|gt.negative)===0),this.iuand(gt)},rt.prototype.and=function(gt){return this.length>gt.length?this.clone().iand(gt):gt.clone().iand(this)},rt.prototype.uand=function(gt){return this.length>gt.length?this.clone().iuand(gt):gt.clone().iuand(this)},rt.prototype.iuxor=function(gt){var bt,St;this.length>gt.length?(bt=this,St=gt):(bt=gt,St=this);for(var Nt=0;Nt<St.length;Nt++)this.words[Nt]=bt.words[Nt]^St.words[Nt];if(this!==bt)for(;Nt<bt.length;Nt++)this.words[Nt]=bt.words[Nt];return this.length=bt.length,this._strip()},rt.prototype.ixor=function(gt){return et((this.negative|gt.negative)===0),this.iuxor(gt)},rt.prototype.xor=function(gt){return this.length>gt.length?this.clone().ixor(gt):gt.clone().ixor(this)},rt.prototype.uxor=function(gt){return this.length>gt.length?this.clone().iuxor(gt):gt.clone().iuxor(this)},rt.prototype.inotn=function(gt){et(typeof gt=="number"&&gt>=0);var bt=Math.ceil(gt/26)|0,St=gt%26;this._expand(bt),St>0&&bt--;for(var Nt=0;Nt<bt;Nt++)this.words[Nt]=~this.words[Nt]&67108863;return St>0&&(this.words[Nt]=~this.words[Nt]&67108863>>26-St),this._strip()},rt.prototype.notn=function(gt){return this.clone().inotn(gt)},rt.prototype.setn=function(gt,bt){et(typeof gt=="number"&&gt>=0);var St=gt/26|0,Nt=gt%26;return this._expand(St+1),bt?this.words[St]=this.words[St]|1<<Nt:this.words[St]=this.words[St]&~(1<<Nt),this._strip()},rt.prototype.iadd=function(gt){var bt;if(this.negative!==0&&gt.negative===0)return this.negative=0,bt=this.isub(gt),this.negative^=1,this._normSign();if(this.negative===0&&gt.negative!==0)return gt.negative=0,bt=this.isub(gt),gt.negative=1,bt._normSign();var St,Nt;this.length>gt.length?(St=this,Nt=gt):(St=gt,Nt=this);for(var Pt=0,Tt=0;Tt<Nt.length;Tt++)bt=(St.words[Tt]|0)+(Nt.words[Tt]|0)+Pt,this.words[Tt]=bt&67108863,Pt=bt>>>26;for(;Pt!==0&&Tt<St.length;Tt++)bt=(St.words[Tt]|0)+Pt,this.words[Tt]=bt&67108863,Pt=bt>>>26;if(this.length=St.length,Pt!==0)this.words[this.length]=Pt,this.length++;else if(St!==this)for(;Tt<St.length;Tt++)this.words[Tt]=St.words[Tt];return this},rt.prototype.add=function(gt){var bt;return gt.negative!==0&&this.negative===0?(gt.negative=0,bt=this.sub(gt),gt.negative^=1,bt):gt.negative===0&&this.negative!==0?(this.negative=0,bt=gt.sub(this),this.negative=1,bt):this.length>gt.length?this.clone().iadd(gt):gt.clone().iadd(this)},rt.prototype.isub=function(gt){if(gt.negative!==0){gt.negative=0;var bt=this.iadd(gt);return gt.negative=1,bt._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(gt),this.negative=1,this._normSign();var St=this.cmp(gt);if(St===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Nt,Pt;St>0?(Nt=this,Pt=gt):(Nt=gt,Pt=this);for(var Tt=0,pt=0;pt<Pt.length;pt++)bt=(Nt.words[pt]|0)-(Pt.words[pt]|0)+Tt,Tt=bt>>26,this.words[pt]=bt&67108863;for(;Tt!==0&&pt<Nt.length;pt++)bt=(Nt.words[pt]|0)+Tt,Tt=bt>>26,this.words[pt]=bt&67108863;if(Tt===0&&pt<Nt.length&&Nt!==this)for(;pt<Nt.length;pt++)this.words[pt]=Nt.words[pt];return this.length=Math.max(this.length,pt),Nt!==this&&(this.negative=1),this._strip()},rt.prototype.sub=function(gt){return this.clone().isub(gt)};function Et(mt,gt,bt){bt.negative=gt.negative^mt.negative;var St=mt.length+gt.length|0;bt.length=St,St=St-1|0;var Nt=mt.words[0]|0,Pt=gt.words[0]|0,Tt=Nt*Pt,pt=Tt&67108863,Rt=Tt/67108864|0;bt.words[0]=pt;for(var zt=1;zt<St;zt++){for(var Yt=Rt>>>26,ir=Rt&67108863,ur=Math.min(zt,gt.length-1),cr=Math.max(0,zt-mt.length+1);cr<=ur;cr++){var rr=zt-cr|0;Nt=mt.words[rr]|0,Pt=gt.words[cr]|0,Tt=Nt*Pt+ir,Yt+=Tt/67108864|0,ir=Tt&67108863}bt.words[zt]=ir|0,Rt=Yt|0}return Rt!==0?bt.words[zt]=Rt|0:bt.length--,bt._strip()}var At=function(gt,bt,St){var Nt=gt.words,Pt=bt.words,Tt=St.words,pt=0,Rt,zt,Yt,ir=Nt[0]|0,ur=ir&8191,cr=ir>>>13,rr=Nt[1]|0,fr=rr&8191,dr=rr>>>13,gr=Nt[2]|0,hr=gr&8191,or=gr>>>13,br=Nt[3]|0,Rr=br&8191,_r=br>>>13,Er=Nt[4]|0,Hr=Er&8191,xr=Er>>>13,yr=Nt[5]|0,Ar=yr&8191,$r=yr>>>13,Tr=Nt[6]|0,jr=Tr&8191,Cr=Tr>>>13,Nr=Nt[7]|0,nn=Nr&8191,Mr=Nr>>>13,Lr=Nt[8]|0,an=Lr&8191,pr=Lr>>>13,nr=Nt[9]|0,lr=nr&8191,vr=nr>>>13,wr=Pt[0]|0,Pr=wr&8191,Sr=wr>>>13,Dr=Pt[1]|0,rn=Dr&8191,Ir=Dr>>>13,Or=Pt[2]|0,sn=Or&8191,Fr=Or>>>13,Kr=Pt[3]|0,fn=Kr&8191,Br=Kr>>>13,Zr=Pt[4]|0,hn=Zr&8191,zr=Zr>>>13,Xr=Pt[5]|0,pn=Xr&8191,Vr=Xr>>>13,Yr=Pt[6]|0,mn=Yr&8191,Ur=Yr>>>13,Qr=Pt[7]|0,gn=Qr&8191,Gr=Qr>>>13,Jr=Pt[8]|0,yn=Jr&8191,Wr=Jr>>>13,en=Pt[9]|0,on=en&8191,un=en>>>13;St.negative=gt.negative^bt.negative,St.length=19,Rt=Math.imul(ur,Pr),zt=Math.imul(ur,Sr),zt=zt+Math.imul(cr,Pr)|0,Yt=Math.imul(cr,Sr);var wn=(pt+Rt|0)+((zt&8191)<<13)|0;pt=(Yt+(zt>>>13)|0)+(wn>>>26)|0,wn&=67108863,Rt=Math.imul(fr,Pr),zt=Math.imul(fr,Sr),zt=zt+Math.imul(dr,Pr)|0,Yt=Math.imul(dr,Sr),Rt=Rt+Math.imul(ur,rn)|0,zt=zt+Math.imul(ur,Ir)|0,zt=zt+Math.imul(cr,rn)|0,Yt=Yt+Math.imul(cr,Ir)|0;var $n=(pt+Rt|0)+((zt&8191)<<13)|0;pt=(Yt+(zt>>>13)|0)+($n>>>26)|0,$n&=67108863,Rt=Math.imul(hr,Pr),zt=Math.imul(hr,Sr),zt=zt+Math.imul(or,Pr)|0,Yt=Math.imul(or,Sr),Rt=Rt+Math.imul(fr,rn)|0,zt=zt+Math.imul(fr,Ir)|0,zt=zt+Math.imul(dr,rn)|0,Yt=Yt+Math.imul(dr,Ir)|0,Rt=Rt+Math.imul(ur,sn)|0,zt=zt+Math.imul(ur,Fr)|0,zt=zt+Math.imul(cr,sn)|0,Yt=Yt+Math.imul(cr,Fr)|0;var Sn=(pt+Rt|0)+((zt&8191)<<13)|0;pt=(Yt+(zt>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,Rt=Math.imul(Rr,Pr),zt=Math.imul(Rr,Sr),zt=zt+Math.imul(_r,Pr)|0,Yt=Math.imul(_r,Sr),Rt=Rt+Math.imul(hr,rn)|0,zt=zt+Math.imul(hr,Ir)|0,zt=zt+Math.imul(or,rn)|0,Yt=Yt+Math.imul(or,Ir)|0,Rt=Rt+Math.imul(fr,sn)|0,zt=zt+Math.imul(fr,Fr)|0,zt=zt+Math.imul(dr,sn)|0,Yt=Yt+Math.imul(dr,Fr)|0,Rt=Rt+Math.imul(ur,fn)|0,zt=zt+Math.imul(ur,Br)|0,zt=zt+Math.imul(cr,fn)|0,Yt=Yt+Math.imul(cr,Br)|0;var En=(pt+Rt|0)+((zt&8191)<<13)|0;pt=(Yt+(zt>>>13)|0)+(En>>>26)|0,En&=67108863,Rt=Math.imul(Hr,Pr),zt=Math.imul(Hr,Sr),zt=zt+Math.imul(xr,Pr)|0,Yt=Math.imul(xr,Sr),Rt=Rt+Math.imul(Rr,rn)|0,zt=zt+Math.imul(Rr,Ir)|0,zt=zt+Math.imul(_r,rn)|0,Yt=Yt+Math.imul(_r,Ir)|0,Rt=Rt+Math.imul(hr,sn)|0,zt=zt+Math.imul(hr,Fr)|0,zt=zt+Math.imul(or,sn)|0,Yt=Yt+Math.imul(or,Fr)|0,Rt=Rt+Math.imul(fr,fn)|0,zt=zt+Math.imul(fr,Br)|0,zt=zt+Math.imul(dr,fn)|0,Yt=Yt+Math.imul(dr,Br)|0,Rt=Rt+Math.imul(ur,hn)|0,zt=zt+Math.imul(ur,zr)|0,zt=zt+Math.imul(cr,hn)|0,Yt=Yt+Math.imul(cr,zr)|0;var _n=(pt+Rt|0)+((zt&8191)<<13)|0;pt=(Yt+(zt>>>13)|0)+(_n>>>26)|0,_n&=67108863,Rt=Math.imul(Ar,Pr),zt=Math.imul(Ar,Sr),zt=zt+Math.imul($r,Pr)|0,Yt=Math.imul($r,Sr),Rt=Rt+Math.imul(Hr,rn)|0,zt=zt+Math.imul(Hr,Ir)|0,zt=zt+Math.imul(xr,rn)|0,Yt=Yt+Math.imul(xr,Ir)|0,Rt=Rt+Math.imul(Rr,sn)|0,zt=zt+Math.imul(Rr,Fr)|0,zt=zt+Math.imul(_r,sn)|0,Yt=Yt+Math.imul(_r,Fr)|0,Rt=Rt+Math.imul(hr,fn)|0,zt=zt+Math.imul(hr,Br)|0,zt=zt+Math.imul(or,fn)|0,Yt=Yt+Math.imul(or,Br)|0,Rt=Rt+Math.imul(fr,hn)|0,zt=zt+Math.imul(fr,zr)|0,zt=zt+Math.imul(dr,hn)|0,Yt=Yt+Math.imul(dr,zr)|0,Rt=Rt+Math.imul(ur,pn)|0,zt=zt+Math.imul(ur,Vr)|0,zt=zt+Math.imul(cr,pn)|0,Yt=Yt+Math.imul(cr,Vr)|0;var Tn=(pt+Rt|0)+((zt&8191)<<13)|0;pt=(Yt+(zt>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,Rt=Math.imul(jr,Pr),zt=Math.imul(jr,Sr),zt=zt+Math.imul(Cr,Pr)|0,Yt=Math.imul(Cr,Sr),Rt=Rt+Math.imul(Ar,rn)|0,zt=zt+Math.imul(Ar,Ir)|0,zt=zt+Math.imul($r,rn)|0,Yt=Yt+Math.imul($r,Ir)|0,Rt=Rt+Math.imul(Hr,sn)|0,zt=zt+Math.imul(Hr,Fr)|0,zt=zt+Math.imul(xr,sn)|0,Yt=Yt+Math.imul(xr,Fr)|0,Rt=Rt+Math.imul(Rr,fn)|0,zt=zt+Math.imul(Rr,Br)|0,zt=zt+Math.imul(_r,fn)|0,Yt=Yt+Math.imul(_r,Br)|0,Rt=Rt+Math.imul(hr,hn)|0,zt=zt+Math.imul(hr,zr)|0,zt=zt+Math.imul(or,hn)|0,Yt=Yt+Math.imul(or,zr)|0,Rt=Rt+Math.imul(fr,pn)|0,zt=zt+Math.imul(fr,Vr)|0,zt=zt+Math.imul(dr,pn)|0,Yt=Yt+Math.imul(dr,Vr)|0,Rt=Rt+Math.imul(ur,mn)|0,zt=zt+Math.imul(ur,Ur)|0,zt=zt+Math.imul(cr,mn)|0,Yt=Yt+Math.imul(cr,Ur)|0;var Cn=(pt+Rt|0)+((zt&8191)<<13)|0;pt=(Yt+(zt>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Rt=Math.imul(nn,Pr),zt=Math.imul(nn,Sr),zt=zt+Math.imul(Mr,Pr)|0,Yt=Math.imul(Mr,Sr),Rt=Rt+Math.imul(jr,rn)|0,zt=zt+Math.imul(jr,Ir)|0,zt=zt+Math.imul(Cr,rn)|0,Yt=Yt+Math.imul(Cr,Ir)|0,Rt=Rt+Math.imul(Ar,sn)|0,zt=zt+Math.imul(Ar,Fr)|0,zt=zt+Math.imul($r,sn)|0,Yt=Yt+Math.imul($r,Fr)|0,Rt=Rt+Math.imul(Hr,fn)|0,zt=zt+Math.imul(Hr,Br)|0,zt=zt+Math.imul(xr,fn)|0,Yt=Yt+Math.imul(xr,Br)|0,Rt=Rt+Math.imul(Rr,hn)|0,zt=zt+Math.imul(Rr,zr)|0,zt=zt+Math.imul(_r,hn)|0,Yt=Yt+Math.imul(_r,zr)|0,Rt=Rt+Math.imul(hr,pn)|0,zt=zt+Math.imul(hr,Vr)|0,zt=zt+Math.imul(or,pn)|0,Yt=Yt+Math.imul(or,Vr)|0,Rt=Rt+Math.imul(fr,mn)|0,zt=zt+Math.imul(fr,Ur)|0,zt=zt+Math.imul(dr,mn)|0,Yt=Yt+Math.imul(dr,Ur)|0,Rt=Rt+Math.imul(ur,gn)|0,zt=zt+Math.imul(ur,Gr)|0,zt=zt+Math.imul(cr,gn)|0,Yt=Yt+Math.imul(cr,Gr)|0;var An=(pt+Rt|0)+((zt&8191)<<13)|0;pt=(Yt+(zt>>>13)|0)+(An>>>26)|0,An&=67108863,Rt=Math.imul(an,Pr),zt=Math.imul(an,Sr),zt=zt+Math.imul(pr,Pr)|0,Yt=Math.imul(pr,Sr),Rt=Rt+Math.imul(nn,rn)|0,zt=zt+Math.imul(nn,Ir)|0,zt=zt+Math.imul(Mr,rn)|0,Yt=Yt+Math.imul(Mr,Ir)|0,Rt=Rt+Math.imul(jr,sn)|0,zt=zt+Math.imul(jr,Fr)|0,zt=zt+Math.imul(Cr,sn)|0,Yt=Yt+Math.imul(Cr,Fr)|0,Rt=Rt+Math.imul(Ar,fn)|0,zt=zt+Math.imul(Ar,Br)|0,zt=zt+Math.imul($r,fn)|0,Yt=Yt+Math.imul($r,Br)|0,Rt=Rt+Math.imul(Hr,hn)|0,zt=zt+Math.imul(Hr,zr)|0,zt=zt+Math.imul(xr,hn)|0,Yt=Yt+Math.imul(xr,zr)|0,Rt=Rt+Math.imul(Rr,pn)|0,zt=zt+Math.imul(Rr,Vr)|0,zt=zt+Math.imul(_r,pn)|0,Yt=Yt+Math.imul(_r,Vr)|0,Rt=Rt+Math.imul(hr,mn)|0,zt=zt+Math.imul(hr,Ur)|0,zt=zt+Math.imul(or,mn)|0,Yt=Yt+Math.imul(or,Ur)|0,Rt=Rt+Math.imul(fr,gn)|0,zt=zt+Math.imul(fr,Gr)|0,zt=zt+Math.imul(dr,gn)|0,Yt=Yt+Math.imul(dr,Gr)|0,Rt=Rt+Math.imul(ur,yn)|0,zt=zt+Math.imul(ur,Wr)|0,zt=zt+Math.imul(cr,yn)|0,Yt=Yt+Math.imul(cr,Wr)|0;var Rn=(pt+Rt|0)+((zt&8191)<<13)|0;pt=(Yt+(zt>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,Rt=Math.imul(lr,Pr),zt=Math.imul(lr,Sr),zt=zt+Math.imul(vr,Pr)|0,Yt=Math.imul(vr,Sr),Rt=Rt+Math.imul(an,rn)|0,zt=zt+Math.imul(an,Ir)|0,zt=zt+Math.imul(pr,rn)|0,Yt=Yt+Math.imul(pr,Ir)|0,Rt=Rt+Math.imul(nn,sn)|0,zt=zt+Math.imul(nn,Fr)|0,zt=zt+Math.imul(Mr,sn)|0,Yt=Yt+Math.imul(Mr,Fr)|0,Rt=Rt+Math.imul(jr,fn)|0,zt=zt+Math.imul(jr,Br)|0,zt=zt+Math.imul(Cr,fn)|0,Yt=Yt+Math.imul(Cr,Br)|0,Rt=Rt+Math.imul(Ar,hn)|0,zt=zt+Math.imul(Ar,zr)|0,zt=zt+Math.imul($r,hn)|0,Yt=Yt+Math.imul($r,zr)|0,Rt=Rt+Math.imul(Hr,pn)|0,zt=zt+Math.imul(Hr,Vr)|0,zt=zt+Math.imul(xr,pn)|0,Yt=Yt+Math.imul(xr,Vr)|0,Rt=Rt+Math.imul(Rr,mn)|0,zt=zt+Math.imul(Rr,Ur)|0,zt=zt+Math.imul(_r,mn)|0,Yt=Yt+Math.imul(_r,Ur)|0,Rt=Rt+Math.imul(hr,gn)|0,zt=zt+Math.imul(hr,Gr)|0,zt=zt+Math.imul(or,gn)|0,Yt=Yt+Math.imul(or,Gr)|0,Rt=Rt+Math.imul(fr,yn)|0,zt=zt+Math.imul(fr,Wr)|0,zt=zt+Math.imul(dr,yn)|0,Yt=Yt+Math.imul(dr,Wr)|0,Rt=Rt+Math.imul(ur,on)|0,zt=zt+Math.imul(ur,un)|0,zt=zt+Math.imul(cr,on)|0,Yt=Yt+Math.imul(cr,un)|0;var Nn=(pt+Rt|0)+((zt&8191)<<13)|0;pt=(Yt+(zt>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,Rt=Math.imul(lr,rn),zt=Math.imul(lr,Ir),zt=zt+Math.imul(vr,rn)|0,Yt=Math.imul(vr,Ir),Rt=Rt+Math.imul(an,sn)|0,zt=zt+Math.imul(an,Fr)|0,zt=zt+Math.imul(pr,sn)|0,Yt=Yt+Math.imul(pr,Fr)|0,Rt=Rt+Math.imul(nn,fn)|0,zt=zt+Math.imul(nn,Br)|0,zt=zt+Math.imul(Mr,fn)|0,Yt=Yt+Math.imul(Mr,Br)|0,Rt=Rt+Math.imul(jr,hn)|0,zt=zt+Math.imul(jr,zr)|0,zt=zt+Math.imul(Cr,hn)|0,Yt=Yt+Math.imul(Cr,zr)|0,Rt=Rt+Math.imul(Ar,pn)|0,zt=zt+Math.imul(Ar,Vr)|0,zt=zt+Math.imul($r,pn)|0,Yt=Yt+Math.imul($r,Vr)|0,Rt=Rt+Math.imul(Hr,mn)|0,zt=zt+Math.imul(Hr,Ur)|0,zt=zt+Math.imul(xr,mn)|0,Yt=Yt+Math.imul(xr,Ur)|0,Rt=Rt+Math.imul(Rr,gn)|0,zt=zt+Math.imul(Rr,Gr)|0,zt=zt+Math.imul(_r,gn)|0,Yt=Yt+Math.imul(_r,Gr)|0,Rt=Rt+Math.imul(hr,yn)|0,zt=zt+Math.imul(hr,Wr)|0,zt=zt+Math.imul(or,yn)|0,Yt=Yt+Math.imul(or,Wr)|0,Rt=Rt+Math.imul(fr,on)|0,zt=zt+Math.imul(fr,un)|0,zt=zt+Math.imul(dr,on)|0,Yt=Yt+Math.imul(dr,un)|0;var In=(pt+Rt|0)+((zt&8191)<<13)|0;pt=(Yt+(zt>>>13)|0)+(In>>>26)|0,In&=67108863,Rt=Math.imul(lr,sn),zt=Math.imul(lr,Fr),zt=zt+Math.imul(vr,sn)|0,Yt=Math.imul(vr,Fr),Rt=Rt+Math.imul(an,fn)|0,zt=zt+Math.imul(an,Br)|0,zt=zt+Math.imul(pr,fn)|0,Yt=Yt+Math.imul(pr,Br)|0,Rt=Rt+Math.imul(nn,hn)|0,zt=zt+Math.imul(nn,zr)|0,zt=zt+Math.imul(Mr,hn)|0,Yt=Yt+Math.imul(Mr,zr)|0,Rt=Rt+Math.imul(jr,pn)|0,zt=zt+Math.imul(jr,Vr)|0,zt=zt+Math.imul(Cr,pn)|0,Yt=Yt+Math.imul(Cr,Vr)|0,Rt=Rt+Math.imul(Ar,mn)|0,zt=zt+Math.imul(Ar,Ur)|0,zt=zt+Math.imul($r,mn)|0,Yt=Yt+Math.imul($r,Ur)|0,Rt=Rt+Math.imul(Hr,gn)|0,zt=zt+Math.imul(Hr,Gr)|0,zt=zt+Math.imul(xr,gn)|0,Yt=Yt+Math.imul(xr,Gr)|0,Rt=Rt+Math.imul(Rr,yn)|0,zt=zt+Math.imul(Rr,Wr)|0,zt=zt+Math.imul(_r,yn)|0,Yt=Yt+Math.imul(_r,Wr)|0,Rt=Rt+Math.imul(hr,on)|0,zt=zt+Math.imul(hr,un)|0,zt=zt+Math.imul(or,on)|0,Yt=Yt+Math.imul(or,un)|0;var Mn=(pt+Rt|0)+((zt&8191)<<13)|0;pt=(Yt+(zt>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,Rt=Math.imul(lr,fn),zt=Math.imul(lr,Br),zt=zt+Math.imul(vr,fn)|0,Yt=Math.imul(vr,Br),Rt=Rt+Math.imul(an,hn)|0,zt=zt+Math.imul(an,zr)|0,zt=zt+Math.imul(pr,hn)|0,Yt=Yt+Math.imul(pr,zr)|0,Rt=Rt+Math.imul(nn,pn)|0,zt=zt+Math.imul(nn,Vr)|0,zt=zt+Math.imul(Mr,pn)|0,Yt=Yt+Math.imul(Mr,Vr)|0,Rt=Rt+Math.imul(jr,mn)|0,zt=zt+Math.imul(jr,Ur)|0,zt=zt+Math.imul(Cr,mn)|0,Yt=Yt+Math.imul(Cr,Ur)|0,Rt=Rt+Math.imul(Ar,gn)|0,zt=zt+Math.imul(Ar,Gr)|0,zt=zt+Math.imul($r,gn)|0,Yt=Yt+Math.imul($r,Gr)|0,Rt=Rt+Math.imul(Hr,yn)|0,zt=zt+Math.imul(Hr,Wr)|0,zt=zt+Math.imul(xr,yn)|0,Yt=Yt+Math.imul(xr,Wr)|0,Rt=Rt+Math.imul(Rr,on)|0,zt=zt+Math.imul(Rr,un)|0,zt=zt+Math.imul(_r,on)|0,Yt=Yt+Math.imul(_r,un)|0;var Pn=(pt+Rt|0)+((zt&8191)<<13)|0;pt=(Yt+(zt>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,Rt=Math.imul(lr,hn),zt=Math.imul(lr,zr),zt=zt+Math.imul(vr,hn)|0,Yt=Math.imul(vr,zr),Rt=Rt+Math.imul(an,pn)|0,zt=zt+Math.imul(an,Vr)|0,zt=zt+Math.imul(pr,pn)|0,Yt=Yt+Math.imul(pr,Vr)|0,Rt=Rt+Math.imul(nn,mn)|0,zt=zt+Math.imul(nn,Ur)|0,zt=zt+Math.imul(Mr,mn)|0,Yt=Yt+Math.imul(Mr,Ur)|0,Rt=Rt+Math.imul(jr,gn)|0,zt=zt+Math.imul(jr,Gr)|0,zt=zt+Math.imul(Cr,gn)|0,Yt=Yt+Math.imul(Cr,Gr)|0,Rt=Rt+Math.imul(Ar,yn)|0,zt=zt+Math.imul(Ar,Wr)|0,zt=zt+Math.imul($r,yn)|0,Yt=Yt+Math.imul($r,Wr)|0,Rt=Rt+Math.imul(Hr,on)|0,zt=zt+Math.imul(Hr,un)|0,zt=zt+Math.imul(xr,on)|0,Yt=Yt+Math.imul(xr,un)|0;var kn=(pt+Rt|0)+((zt&8191)<<13)|0;pt=(Yt+(zt>>>13)|0)+(kn>>>26)|0,kn&=67108863,Rt=Math.imul(lr,pn),zt=Math.imul(lr,Vr),zt=zt+Math.imul(vr,pn)|0,Yt=Math.imul(vr,Vr),Rt=Rt+Math.imul(an,mn)|0,zt=zt+Math.imul(an,Ur)|0,zt=zt+Math.imul(pr,mn)|0,Yt=Yt+Math.imul(pr,Ur)|0,Rt=Rt+Math.imul(nn,gn)|0,zt=zt+Math.imul(nn,Gr)|0,zt=zt+Math.imul(Mr,gn)|0,Yt=Yt+Math.imul(Mr,Gr)|0,Rt=Rt+Math.imul(jr,yn)|0,zt=zt+Math.imul(jr,Wr)|0,zt=zt+Math.imul(Cr,yn)|0,Yt=Yt+Math.imul(Cr,Wr)|0,Rt=Rt+Math.imul(Ar,on)|0,zt=zt+Math.imul(Ar,un)|0,zt=zt+Math.imul($r,on)|0,Yt=Yt+Math.imul($r,un)|0;var On=(pt+Rt|0)+((zt&8191)<<13)|0;pt=(Yt+(zt>>>13)|0)+(On>>>26)|0,On&=67108863,Rt=Math.imul(lr,mn),zt=Math.imul(lr,Ur),zt=zt+Math.imul(vr,mn)|0,Yt=Math.imul(vr,Ur),Rt=Rt+Math.imul(an,gn)|0,zt=zt+Math.imul(an,Gr)|0,zt=zt+Math.imul(pr,gn)|0,Yt=Yt+Math.imul(pr,Gr)|0,Rt=Rt+Math.imul(nn,yn)|0,zt=zt+Math.imul(nn,Wr)|0,zt=zt+Math.imul(Mr,yn)|0,Yt=Yt+Math.imul(Mr,Wr)|0,Rt=Rt+Math.imul(jr,on)|0,zt=zt+Math.imul(jr,un)|0,zt=zt+Math.imul(Cr,on)|0,Yt=Yt+Math.imul(Cr,un)|0;var Dn=(pt+Rt|0)+((zt&8191)<<13)|0;pt=(Yt+(zt>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,Rt=Math.imul(lr,gn),zt=Math.imul(lr,Gr),zt=zt+Math.imul(vr,gn)|0,Yt=Math.imul(vr,Gr),Rt=Rt+Math.imul(an,yn)|0,zt=zt+Math.imul(an,Wr)|0,zt=zt+Math.imul(pr,yn)|0,Yt=Yt+Math.imul(pr,Wr)|0,Rt=Rt+Math.imul(nn,on)|0,zt=zt+Math.imul(nn,un)|0,zt=zt+Math.imul(Mr,on)|0,Yt=Yt+Math.imul(Mr,un)|0;var jn=(pt+Rt|0)+((zt&8191)<<13)|0;pt=(Yt+(zt>>>13)|0)+(jn>>>26)|0,jn&=67108863,Rt=Math.imul(lr,yn),zt=Math.imul(lr,Wr),zt=zt+Math.imul(vr,yn)|0,Yt=Math.imul(vr,Wr),Rt=Rt+Math.imul(an,on)|0,zt=zt+Math.imul(an,un)|0,zt=zt+Math.imul(pr,on)|0,Yt=Yt+Math.imul(pr,un)|0;var xs=(pt+Rt|0)+((zt&8191)<<13)|0;pt=(Yt+(zt>>>13)|0)+(xs>>>26)|0,xs&=67108863,Rt=Math.imul(lr,on),zt=Math.imul(lr,un),zt=zt+Math.imul(vr,on)|0,Yt=Math.imul(vr,un);var bs=(pt+Rt|0)+((zt&8191)<<13)|0;return pt=(Yt+(zt>>>13)|0)+(bs>>>26)|0,bs&=67108863,Tt[0]=wn,Tt[1]=$n,Tt[2]=Sn,Tt[3]=En,Tt[4]=_n,Tt[5]=Tn,Tt[6]=Cn,Tt[7]=An,Tt[8]=Rn,Tt[9]=Nn,Tt[10]=In,Tt[11]=Mn,Tt[12]=Pn,Tt[13]=kn,Tt[14]=On,Tt[15]=Dn,Tt[16]=jn,Tt[17]=xs,Tt[18]=bs,pt!==0&&(Tt[19]=pt,St.length++),St};Math.imul||(At=Et);function jt(mt,gt,bt){bt.negative=gt.negative^mt.negative,bt.length=mt.length+gt.length;for(var St=0,Nt=0,Pt=0;Pt<bt.length-1;Pt++){var Tt=Nt;Nt=0;for(var pt=St&67108863,Rt=Math.min(Pt,gt.length-1),zt=Math.max(0,Pt-mt.length+1);zt<=Rt;zt++){var Yt=Pt-zt,ir=mt.words[Yt]|0,ur=gt.words[zt]|0,cr=ir*ur,rr=cr&67108863;Tt=Tt+(cr/67108864|0)|0,rr=rr+pt|0,pt=rr&67108863,Tt=Tt+(rr>>>26)|0,Nt+=Tt>>>26,Tt&=67108863}bt.words[Pt]=pt,St=Tt,Tt=Nt}return St!==0?bt.words[Pt]=St:bt.length--,bt._strip()}function kt(mt,gt,bt){return jt(mt,gt,bt)}rt.prototype.mulTo=function(gt,bt){var St,Nt=this.length+gt.length;return this.length===10&&gt.length===10?St=At(this,gt,bt):Nt<63?St=Et(this,gt,bt):Nt<1024?St=jt(this,gt,bt):St=kt(this,gt,bt),St},rt.prototype.mul=function(gt){var bt=new rt(null);return bt.words=new Array(this.length+gt.length),this.mulTo(gt,bt)},rt.prototype.mulf=function(gt){var bt=new rt(null);return bt.words=new Array(this.length+gt.length),kt(this,gt,bt)},rt.prototype.imul=function(gt){return this.clone().mulTo(gt,this)},rt.prototype.imuln=function(gt){var bt=gt<0;bt&&(gt=-gt),et(typeof gt=="number"),et(gt<67108864);for(var St=0,Nt=0;Nt<this.length;Nt++){var Pt=(this.words[Nt]|0)*gt,Tt=(Pt&67108863)+(St&67108863);St>>=26,St+=Pt/67108864|0,St+=Tt>>>26,this.words[Nt]=Tt&67108863}return St!==0&&(this.words[Nt]=St,this.length++),bt?this.ineg():this},rt.prototype.muln=function(gt){return this.clone().imuln(gt)},rt.prototype.sqr=function(){return this.mul(this)},rt.prototype.isqr=function(){return this.imul(this.clone())},rt.prototype.pow=function(gt){var bt=wt(gt);if(bt.length===0)return new rt(1);for(var St=this,Nt=0;Nt<bt.length&&bt[Nt]===0;Nt++,St=St.sqr());if(++Nt<bt.length)for(var Pt=St.sqr();Nt<bt.length;Nt++,Pt=Pt.sqr())bt[Nt]!==0&&(St=St.mul(Pt));return St},rt.prototype.iushln=function(gt){et(typeof gt=="number"&&gt>=0);var bt=gt%26,St=(gt-bt)/26,Nt=67108863>>>26-bt<<26-bt,Pt;if(bt!==0){var Tt=0;for(Pt=0;Pt<this.length;Pt++){var pt=this.words[Pt]&Nt,Rt=(this.words[Pt]|0)-pt<<bt;this.words[Pt]=Rt|Tt,Tt=pt>>>26-bt}Tt&&(this.words[Pt]=Tt,this.length++)}if(St!==0){for(Pt=this.length-1;Pt>=0;Pt--)this.words[Pt+St]=this.words[Pt];for(Pt=0;Pt<St;Pt++)this.words[Pt]=0;this.length+=St}return this._strip()},rt.prototype.ishln=function(gt){return et(this.negative===0),this.iushln(gt)},rt.prototype.iushrn=function(gt,bt,St){et(typeof gt=="number"&&gt>=0);var Nt;bt?Nt=(bt-bt%26)/26:Nt=0;var Pt=gt%26,Tt=Math.min((gt-Pt)/26,this.length),pt=67108863^67108863>>>Pt<<Pt,Rt=St;if(Nt-=Tt,Nt=Math.max(0,Nt),Rt){for(var zt=0;zt<Tt;zt++)Rt.words[zt]=this.words[zt];Rt.length=Tt}if(Tt!==0)if(this.length>Tt)for(this.length-=Tt,zt=0;zt<this.length;zt++)this.words[zt]=this.words[zt+Tt];else this.words[0]=0,this.length=1;var Yt=0;for(zt=this.length-1;zt>=0&&(Yt!==0||zt>=Nt);zt--){var ir=this.words[zt]|0;this.words[zt]=Yt<<26-Pt|ir>>>Pt,Yt=ir&pt}return Rt&&Yt!==0&&(Rt.words[Rt.length++]=Yt),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},rt.prototype.ishrn=function(gt,bt,St){return et(this.negative===0),this.iushrn(gt,bt,St)},rt.prototype.shln=function(gt){return this.clone().ishln(gt)},rt.prototype.ushln=function(gt){return this.clone().iushln(gt)},rt.prototype.shrn=function(gt){return this.clone().ishrn(gt)},rt.prototype.ushrn=function(gt){return this.clone().iushrn(gt)},rt.prototype.testn=function(gt){et(typeof gt=="number"&&gt>=0);var bt=gt%26,St=(gt-bt)/26,Nt=1<<bt;if(this.length<=St)return!1;var Pt=this.words[St];return!!(Pt&Nt)},rt.prototype.imaskn=function(gt){et(typeof gt=="number"&&gt>=0);var bt=gt%26,St=(gt-bt)/26;if(et(this.negative===0,"imaskn works only with positive numbers"),this.length<=St)return this;if(bt!==0&&St++,this.length=Math.min(St,this.length),bt!==0){var Nt=67108863^67108863>>>bt<<bt;this.words[this.length-1]&=Nt}return this._strip()},rt.prototype.maskn=function(gt){return this.clone().imaskn(gt)},rt.prototype.iaddn=function(gt){return et(typeof gt=="number"),et(gt<67108864),gt<0?this.isubn(-gt):this.negative!==0?this.length===1&&(this.words[0]|0)<=gt?(this.words[0]=gt-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(gt),this.negative=1,this):this._iaddn(gt)},rt.prototype._iaddn=function(gt){this.words[0]+=gt;for(var bt=0;bt<this.length&&this.words[bt]>=67108864;bt++)this.words[bt]-=67108864,bt===this.length-1?this.words[bt+1]=1:this.words[bt+1]++;return this.length=Math.max(this.length,bt+1),this},rt.prototype.isubn=function(gt){if(et(typeof gt=="number"),et(gt<67108864),gt<0)return this.iaddn(-gt);if(this.negative!==0)return this.negative=0,this.iaddn(gt),this.negative=1,this;if(this.words[0]-=gt,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var bt=0;bt<this.length&&this.words[bt]<0;bt++)this.words[bt]+=67108864,this.words[bt+1]-=1;return this._strip()},rt.prototype.addn=function(gt){return this.clone().iaddn(gt)},rt.prototype.subn=function(gt){return this.clone().isubn(gt)},rt.prototype.iabs=function(){return this.negative=0,this},rt.prototype.abs=function(){return this.clone().iabs()},rt.prototype._ishlnsubmul=function(gt,bt,St){var Nt=gt.length+St,Pt;this._expand(Nt);var Tt,pt=0;for(Pt=0;Pt<gt.length;Pt++){Tt=(this.words[Pt+St]|0)+pt;var Rt=(gt.words[Pt]|0)*bt;Tt-=Rt&67108863,pt=(Tt>>26)-(Rt/67108864|0),this.words[Pt+St]=Tt&67108863}for(;Pt<this.length-St;Pt++)Tt=(this.words[Pt+St]|0)+pt,pt=Tt>>26,this.words[Pt+St]=Tt&67108863;if(pt===0)return this._strip();for(et(pt===-1),pt=0,Pt=0;Pt<this.length;Pt++)Tt=-(this.words[Pt]|0)+pt,pt=Tt>>26,this.words[Pt]=Tt&67108863;return this.negative=1,this._strip()},rt.prototype._wordDiv=function(gt,bt){var St=this.length-gt.length,Nt=this.clone(),Pt=gt,Tt=Pt.words[Pt.length-1]|0,pt=this._countBits(Tt);St=26-pt,St!==0&&(Pt=Pt.ushln(St),Nt.iushln(St),Tt=Pt.words[Pt.length-1]|0);var Rt=Nt.length-Pt.length,zt;if(bt!=="mod"){zt=new rt(null),zt.length=Rt+1,zt.words=new Array(zt.length);for(var Yt=0;Yt<zt.length;Yt++)zt.words[Yt]=0}var ir=Nt.clone()._ishlnsubmul(Pt,1,Rt);ir.negative===0&&(Nt=ir,zt&&(zt.words[Rt]=1));for(var ur=Rt-1;ur>=0;ur--){var cr=(Nt.words[Pt.length+ur]|0)*67108864+(Nt.words[Pt.length+ur-1]|0);for(cr=Math.min(cr/Tt|0,67108863),Nt._ishlnsubmul(Pt,cr,ur);Nt.negative!==0;)cr--,Nt.negative=0,Nt._ishlnsubmul(Pt,1,ur),Nt.isZero()||(Nt.negative^=1);zt&&(zt.words[ur]=cr)}return zt&&zt._strip(),Nt._strip(),bt!=="div"&&St!==0&&Nt.iushrn(St),{div:zt||null,mod:Nt}},rt.prototype.divmod=function(gt,bt,St){if(et(!gt.isZero()),this.isZero())return{div:new rt(0),mod:new rt(0)};var Nt,Pt,Tt;return this.negative!==0&&gt.negative===0?(Tt=this.neg().divmod(gt,bt),bt!=="mod"&&(Nt=Tt.div.neg()),bt!=="div"&&(Pt=Tt.mod.neg(),St&&Pt.negative!==0&&Pt.iadd(gt)),{div:Nt,mod:Pt}):this.negative===0&&gt.negative!==0?(Tt=this.divmod(gt.neg(),bt),bt!=="mod"&&(Nt=Tt.div.neg()),{div:Nt,mod:Tt.mod}):this.negative&gt.negative?(Tt=this.neg().divmod(gt.neg(),bt),bt!=="div"&&(Pt=Tt.mod.neg(),St&&Pt.negative!==0&&Pt.isub(gt)),{div:Tt.div,mod:Pt}):gt.length>this.length||this.cmp(gt)<0?{div:new rt(0),mod:this}:gt.length===1?bt==="div"?{div:this.divn(gt.words[0]),mod:null}:bt==="mod"?{div:null,mod:new rt(this.modrn(gt.words[0]))}:{div:this.divn(gt.words[0]),mod:new rt(this.modrn(gt.words[0]))}:this._wordDiv(gt,bt)},rt.prototype.div=function(gt){return this.divmod(gt,"div",!1).div},rt.prototype.mod=function(gt){return this.divmod(gt,"mod",!1).mod},rt.prototype.umod=function(gt){return this.divmod(gt,"mod",!0).mod},rt.prototype.divRound=function(gt){var bt=this.divmod(gt);if(bt.mod.isZero())return bt.div;var St=bt.div.negative!==0?bt.mod.isub(gt):bt.mod,Nt=gt.ushrn(1),Pt=gt.andln(1),Tt=St.cmp(Nt);return Tt<0||Pt===1&&Tt===0?bt.div:bt.div.negative!==0?bt.div.isubn(1):bt.div.iaddn(1)},rt.prototype.modrn=function(gt){var bt=gt<0;bt&&(gt=-gt),et(gt<=67108863);for(var St=(1<<26)%gt,Nt=0,Pt=this.length-1;Pt>=0;Pt--)Nt=(St*Nt+(this.words[Pt]|0))%gt;return bt?-Nt:Nt},rt.prototype.modn=function(gt){return this.modrn(gt)},rt.prototype.idivn=function(gt){var bt=gt<0;bt&&(gt=-gt),et(gt<=67108863);for(var St=0,Nt=this.length-1;Nt>=0;Nt--){var Pt=(this.words[Nt]|0)+St*67108864;this.words[Nt]=Pt/gt|0,St=Pt%gt}return this._strip(),bt?this.ineg():this},rt.prototype.divn=function(gt){return this.clone().idivn(gt)},rt.prototype.egcd=function(gt){et(gt.negative===0),et(!gt.isZero());var bt=this,St=gt.clone();bt.negative!==0?bt=bt.umod(gt):bt=bt.clone();for(var Nt=new rt(1),Pt=new rt(0),Tt=new rt(0),pt=new rt(1),Rt=0;bt.isEven()&&St.isEven();)bt.iushrn(1),St.iushrn(1),++Rt;for(var zt=St.clone(),Yt=bt.clone();!bt.isZero();){for(var ir=0,ur=1;!(bt.words[0]&ur)&&ir<26;++ir,ur<<=1);if(ir>0)for(bt.iushrn(ir);ir-- >0;)(Nt.isOdd()||Pt.isOdd())&&(Nt.iadd(zt),Pt.isub(Yt)),Nt.iushrn(1),Pt.iushrn(1);for(var cr=0,rr=1;!(St.words[0]&rr)&&cr<26;++cr,rr<<=1);if(cr>0)for(St.iushrn(cr);cr-- >0;)(Tt.isOdd()||pt.isOdd())&&(Tt.iadd(zt),pt.isub(Yt)),Tt.iushrn(1),pt.iushrn(1);bt.cmp(St)>=0?(bt.isub(St),Nt.isub(Tt),Pt.isub(pt)):(St.isub(bt),Tt.isub(Nt),pt.isub(Pt))}return{a:Tt,b:pt,gcd:St.iushln(Rt)}},rt.prototype._invmp=function(gt){et(gt.negative===0),et(!gt.isZero());var bt=this,St=gt.clone();bt.negative!==0?bt=bt.umod(gt):bt=bt.clone();for(var Nt=new rt(1),Pt=new rt(0),Tt=St.clone();bt.cmpn(1)>0&&St.cmpn(1)>0;){for(var pt=0,Rt=1;!(bt.words[0]&Rt)&&pt<26;++pt,Rt<<=1);if(pt>0)for(bt.iushrn(pt);pt-- >0;)Nt.isOdd()&&Nt.iadd(Tt),Nt.iushrn(1);for(var zt=0,Yt=1;!(St.words[0]&Yt)&&zt<26;++zt,Yt<<=1);if(zt>0)for(St.iushrn(zt);zt-- >0;)Pt.isOdd()&&Pt.iadd(Tt),Pt.iushrn(1);bt.cmp(St)>=0?(bt.isub(St),Nt.isub(Pt)):(St.isub(bt),Pt.isub(Nt))}var ir;return bt.cmpn(1)===0?ir=Nt:ir=Pt,ir.cmpn(0)<0&&ir.iadd(gt),ir},rt.prototype.gcd=function(gt){if(this.isZero())return gt.abs();if(gt.isZero())return this.abs();var bt=this.clone(),St=gt.clone();bt.negative=0,St.negative=0;for(var Nt=0;bt.isEven()&&St.isEven();Nt++)bt.iushrn(1),St.iushrn(1);do{for(;bt.isEven();)bt.iushrn(1);for(;St.isEven();)St.iushrn(1);var Pt=bt.cmp(St);if(Pt<0){var Tt=bt;bt=St,St=Tt}else if(Pt===0||St.cmpn(1)===0)break;bt.isub(St)}while(!0);return St.iushln(Nt)},rt.prototype.invm=function(gt){return this.egcd(gt).a.umod(gt)},rt.prototype.isEven=function(){return(this.words[0]&1)===0},rt.prototype.isOdd=function(){return(this.words[0]&1)===1},rt.prototype.andln=function(gt){return this.words[0]&gt},rt.prototype.bincn=function(gt){et(typeof gt=="number");var bt=gt%26,St=(gt-bt)/26,Nt=1<<bt;if(this.length<=St)return this._expand(St+1),this.words[St]|=Nt,this;for(var Pt=Nt,Tt=St;Pt!==0&&Tt<this.length;Tt++){var pt=this.words[Tt]|0;pt+=Pt,Pt=pt>>>26,pt&=67108863,this.words[Tt]=pt}return Pt!==0&&(this.words[Tt]=Pt,this.length++),this},rt.prototype.isZero=function(){return this.length===1&&this.words[0]===0},rt.prototype.cmpn=function(gt){var bt=gt<0;if(this.negative!==0&&!bt)return-1;if(this.negative===0&&bt)return 1;this._strip();var St;if(this.length>1)St=1;else{bt&&(gt=-gt),et(gt<=67108863,"Number is too big");var Nt=this.words[0]|0;St=Nt===gt?0:Nt<gt?-1:1}return this.negative!==0?-St|0:St},rt.prototype.cmp=function(gt){if(this.negative!==0&&gt.negative===0)return-1;if(this.negative===0&&gt.negative!==0)return 1;var bt=this.ucmp(gt);return this.negative!==0?-bt|0:bt},rt.prototype.ucmp=function(gt){if(this.length>gt.length)return 1;if(this.length<gt.length)return-1;for(var bt=0,St=this.length-1;St>=0;St--){var Nt=this.words[St]|0,Pt=gt.words[St]|0;if(Nt!==Pt){Nt<Pt?bt=-1:Nt>Pt&&(bt=1);break}}return bt},rt.prototype.gtn=function(gt){return this.cmpn(gt)===1},rt.prototype.gt=function(gt){return this.cmp(gt)===1},rt.prototype.gten=function(gt){return this.cmpn(gt)>=0},rt.prototype.gte=function(gt){return this.cmp(gt)>=0},rt.prototype.ltn=function(gt){return this.cmpn(gt)===-1},rt.prototype.lt=function(gt){return this.cmp(gt)===-1},rt.prototype.lten=function(gt){return this.cmpn(gt)<=0},rt.prototype.lte=function(gt){return this.cmp(gt)<=0},rt.prototype.eqn=function(gt){return this.cmpn(gt)===0},rt.prototype.eq=function(gt){return this.cmp(gt)===0},rt.red=function(gt){return new Mt(gt)},rt.prototype.toRed=function(gt){return et(!this.red,"Already a number in reduction context"),et(this.negative===0,"red works only with positives"),gt.convertTo(this)._forceRed(gt)},rt.prototype.fromRed=function(){return et(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},rt.prototype._forceRed=function(gt){return this.red=gt,this},rt.prototype.forceRed=function(gt){return et(!this.red,"Already a number in reduction context"),this._forceRed(gt)},rt.prototype.redAdd=function(gt){return et(this.red,"redAdd works only with red numbers"),this.red.add(this,gt)},rt.prototype.redIAdd=function(gt){return et(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,gt)},rt.prototype.redSub=function(gt){return et(this.red,"redSub works only with red numbers"),this.red.sub(this,gt)},rt.prototype.redISub=function(gt){return et(this.red,"redISub works only with red numbers"),this.red.isub(this,gt)},rt.prototype.redShl=function(gt){return et(this.red,"redShl works only with red numbers"),this.red.shl(this,gt)},rt.prototype.redMul=function(gt){return et(this.red,"redMul works only with red numbers"),this.red._verify2(this,gt),this.red.mul(this,gt)},rt.prototype.redIMul=function(gt){return et(this.red,"redMul works only with red numbers"),this.red._verify2(this,gt),this.red.imul(this,gt)},rt.prototype.redSqr=function(){return et(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},rt.prototype.redISqr=function(){return et(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},rt.prototype.redSqrt=function(){return et(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},rt.prototype.redInvm=function(){return et(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},rt.prototype.redNeg=function(){return et(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},rt.prototype.redPow=function(gt){return et(this.red&&!gt.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,gt)};var Lt={k256:null,p224:null,p192:null,p25519:null};function Bt(mt,gt){this.name=mt,this.p=new rt(gt,16),this.n=this.p.bitLength(),this.k=new rt(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Bt.prototype._tmp=function(){var gt=new rt(null);return gt.words=new Array(Math.ceil(this.n/13)),gt},Bt.prototype.ireduce=function(gt){var bt=gt,St;do this.split(bt,this.tmp),bt=this.imulK(bt),bt=bt.iadd(this.tmp),St=bt.bitLength();while(St>this.n);var Nt=St<this.n?-1:bt.ucmp(this.p);return Nt===0?(bt.words[0]=0,bt.length=1):Nt>0?bt.isub(this.p):bt.strip!==void 0?bt.strip():bt._strip(),bt},Bt.prototype.split=function(gt,bt){gt.iushrn(this.n,0,bt)},Bt.prototype.imulK=function(gt){return gt.imul(this.k)};function Gt(){Bt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}tt(Gt,Bt),Gt.prototype.split=function(gt,bt){for(var St=4194303,Nt=Math.min(gt.length,9),Pt=0;Pt<Nt;Pt++)bt.words[Pt]=gt.words[Pt];if(bt.length=Nt,gt.length<=9){gt.words[0]=0,gt.length=1;return}var Tt=gt.words[9];for(bt.words[bt.length++]=Tt&St,Pt=10;Pt<gt.length;Pt++){var pt=gt.words[Pt]|0;gt.words[Pt-10]=(pt&St)<<4|Tt>>>22,Tt=pt}Tt>>>=22,gt.words[Pt-10]=Tt,Tt===0&&gt.length>10?gt.length-=10:gt.length-=9},Gt.prototype.imulK=function(gt){gt.words[gt.length]=0,gt.words[gt.length+1]=0,gt.length+=2;for(var bt=0,St=0;St<gt.length;St++){var Nt=gt.words[St]|0;bt+=Nt*977,gt.words[St]=bt&67108863,bt=Nt*64+(bt/67108864|0)}return gt.words[gt.length-1]===0&&(gt.length--,gt.words[gt.length-1]===0&&gt.length--),gt};function er(){Bt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}tt(er,Bt);function tr(){Bt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}tt(tr,Bt);function ar(){Bt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}tt(ar,Bt),ar.prototype.imulK=function(gt){for(var bt=0,St=0;St<gt.length;St++){var Nt=(gt.words[St]|0)*19+bt,Pt=Nt&67108863;Nt>>>=26,gt.words[St]=Pt,bt=Nt}return bt!==0&&(gt.words[gt.length++]=bt),gt},rt._prime=function(gt){if(Lt[gt])return Lt[gt];var bt;if(gt==="k256")bt=new Gt;else if(gt==="p224")bt=new er;else if(gt==="p192")bt=new tr;else if(gt==="p25519")bt=new ar;else throw new Error("Unknown prime "+gt);return Lt[gt]=bt,bt};function Mt(mt){if(typeof mt=="string"){var gt=rt._prime(mt);this.m=gt.p,this.prime=gt}else et(mt.gtn(1),"modulus must be greater than 1"),this.m=mt,this.prime=null}Mt.prototype._verify1=function(gt){et(gt.negative===0,"red works only with positives"),et(gt.red,"red works only with red numbers")},Mt.prototype._verify2=function(gt,bt){et((gt.negative|bt.negative)===0,"red works only with positives"),et(gt.red&&gt.red===bt.red,"red works only with red numbers")},Mt.prototype.imod=function(gt){return this.prime?this.prime.ireduce(gt)._forceRed(this):(ot(gt,gt.umod(this.m)._forceRed(this)),gt)},Mt.prototype.neg=function(gt){return gt.isZero()?gt.clone():this.m.sub(gt)._forceRed(this)},Mt.prototype.add=function(gt,bt){this._verify2(gt,bt);var St=gt.add(bt);return St.cmp(this.m)>=0&&St.isub(this.m),St._forceRed(this)},Mt.prototype.iadd=function(gt,bt){this._verify2(gt,bt);var St=gt.iadd(bt);return St.cmp(this.m)>=0&&St.isub(this.m),St},Mt.prototype.sub=function(gt,bt){this._verify2(gt,bt);var St=gt.sub(bt);return St.cmpn(0)<0&&St.iadd(this.m),St._forceRed(this)},Mt.prototype.isub=function(gt,bt){this._verify2(gt,bt);var St=gt.isub(bt);return St.cmpn(0)<0&&St.iadd(this.m),St},Mt.prototype.shl=function(gt,bt){return this._verify1(gt),this.imod(gt.ushln(bt))},Mt.prototype.imul=function(gt,bt){return this._verify2(gt,bt),this.imod(gt.imul(bt))},Mt.prototype.mul=function(gt,bt){return this._verify2(gt,bt),this.imod(gt.mul(bt))},Mt.prototype.isqr=function(gt){return this.imul(gt,gt.clone())},Mt.prototype.sqr=function(gt){return this.mul(gt,gt)},Mt.prototype.sqrt=function(gt){if(gt.isZero())return gt.clone();var bt=this.m.andln(3);if(et(bt%2===1),bt===3){var St=this.m.add(new rt(1)).iushrn(2);return this.pow(gt,St)}for(var Nt=this.m.subn(1),Pt=0;!Nt.isZero()&&Nt.andln(1)===0;)Pt++,Nt.iushrn(1);et(!Nt.isZero());var Tt=new rt(1).toRed(this),pt=Tt.redNeg(),Rt=this.m.subn(1).iushrn(1),zt=this.m.bitLength();for(zt=new rt(2*zt*zt).toRed(this);this.pow(zt,Rt).cmp(pt)!==0;)zt.redIAdd(pt);for(var Yt=this.pow(zt,Nt),ir=this.pow(gt,Nt.addn(1).iushrn(1)),ur=this.pow(gt,Nt),cr=Pt;ur.cmp(Tt)!==0;){for(var rr=ur,fr=0;rr.cmp(Tt)!==0;fr++)rr=rr.redSqr();et(fr<cr);var dr=this.pow(Yt,new rt(1).iushln(cr-fr-1));ir=ir.redMul(dr),Yt=dr.redSqr(),ur=ur.redMul(Yt),cr=fr}return ir},Mt.prototype.invm=function(gt){var bt=gt._invmp(this.m);return bt.negative!==0?(bt.negative=0,this.imod(bt).redNeg()):this.imod(bt)},Mt.prototype.pow=function(gt,bt){if(bt.isZero())return new rt(1).toRed(this);if(bt.cmpn(1)===0)return gt.clone();var St=4,Nt=new Array(1<<St);Nt[0]=new rt(1).toRed(this),Nt[1]=gt;for(var Pt=2;Pt<Nt.length;Pt++)Nt[Pt]=this.mul(Nt[Pt-1],gt);var Tt=Nt[0],pt=0,Rt=0,zt=bt.bitLength()%26;for(zt===0&&(zt=26),Pt=bt.length-1;Pt>=0;Pt--){for(var Yt=bt.words[Pt],ir=zt-1;ir>=0;ir--){var ur=Yt>>ir&1;if(Tt!==Nt[0]&&(Tt=this.sqr(Tt)),ur===0&&pt===0){Rt=0;continue}pt<<=1,pt|=ur,Rt++,!(Rt!==St&&(Pt!==0||ir!==0))&&(Tt=this.mul(Tt,Nt[pt]),Rt=0,pt=0)}zt=26}return Tt},Mt.prototype.convertTo=function(gt){var bt=gt.umod(this.m);return bt===gt?bt.clone():bt},Mt.prototype.convertFrom=function(gt){var bt=gt.clone();return bt.red=null,bt},rt.mont=function(gt){return new lt(gt)};function lt(mt){Mt.call(this,mt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new rt(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}tt(lt,Mt),lt.prototype.convertTo=function(gt){return this.imod(gt.ushln(this.shift))},lt.prototype.convertFrom=function(gt){var bt=this.imod(gt.mul(this.rinv));return bt.red=null,bt},lt.prototype.imul=function(gt,bt){if(gt.isZero()||bt.isZero())return gt.words[0]=0,gt.length=1,gt;var St=gt.imul(bt),Nt=St.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Pt=St.isub(Nt).iushrn(this.shift),Tt=Pt;return Pt.cmp(this.m)>=0?Tt=Pt.isub(this.m):Pt.cmpn(0)<0&&(Tt=Pt.iadd(this.m)),Tt._forceRed(this)},lt.prototype.mul=function(gt,bt){if(gt.isZero()||bt.isZero())return new rt(0)._forceRed(this);var St=gt.mul(bt),Nt=St.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Pt=St.isub(Nt).iushrn(this.shift),Tt=Pt;return Pt.cmp(this.m)>=0?Tt=Pt.isub(this.m):Pt.cmpn(0)<0&&(Tt=Pt.iadd(this.m)),Tt._forceRed(this)},lt.prototype.invm=function(gt){var bt=this.imod(gt._invmp(this.m).mul(this.r2));return bt._forceRed(this)}})(_,commonjsGlobal)}(bn$4)),bn$4.exports}var browserifyRsa,hasRequiredBrowserifyRsa;function requireBrowserifyRsa(){if(hasRequiredBrowserifyRsa)return browserifyRsa;hasRequiredBrowserifyRsa=1;var _=requireBn$4(),$=requireBrowser$b(),_e=requireSafeBuffer$1().Buffer;function et(nt){var it=nt.modulus.byteLength(),st;do st=new _($(it));while(st.cmp(nt.modulus)>=0||!st.umod(nt.prime1)||!st.umod(nt.prime2));return st}function tt(nt){var it=et(nt),st=it.toRed(_.mont(nt.modulus)).redPow(new _(nt.publicExponent)).fromRed();return{blinder:st,unblinder:it.invm(nt.modulus)}}function rt(nt,it){var st=tt(it),at=it.modulus.byteLength(),ot=new _(nt).mul(st.blinder).umod(it.modulus),dt=ot.toRed(_.mont(it.prime1)),ht=ot.toRed(_.mont(it.prime2)),yt=it.coefficient,vt=it.prime1,xt=it.prime2,wt=dt.redPow(it.exponent1).fromRed(),Et=ht.redPow(it.exponent2).fromRed(),At=wt.isub(Et).imul(yt).umod(vt).imul(xt);return Et.iadd(At).imul(st.unblinder).umod(it.modulus).toArrayLike(_e,"be",at)}return rt.getr=et,browserifyRsa=rt,browserifyRsa}var elliptic={};const name="elliptic",version$8="6.6.1",description="EC cryptography",main="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0$1={name,version:version$8,description,main,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies};var utils$2={},bn$3={exports:{}};bn$3.exports;var hasRequiredBn$3;function requireBn$3(){return hasRequiredBn$3||(hasRequiredBn$3=1,function(_){(function($,_e){function et(Mt,lt){if(!Mt)throw new Error(lt||"Assertion failed")}function tt(Mt,lt){Mt.super_=lt;var mt=function(){};mt.prototype=lt.prototype,Mt.prototype=new mt,Mt.prototype.constructor=Mt}function rt(Mt,lt,mt){if(rt.isBN(Mt))return Mt;this.negative=0,this.words=null,this.length=0,this.red=null,Mt!==null&&((lt==="le"||lt==="be")&&(mt=lt,lt=10),this._init(Mt||0,lt||10,mt||"be"))}typeof $=="object"?$.exports=rt:_e.BN=rt,rt.BN=rt,rt.wordSize=26;var nt;try{typeof window<"u"&&typeof window.Buffer<"u"?nt=window.Buffer:nt=require$$0$2.Buffer}catch{}rt.isBN=function(lt){return lt instanceof rt?!0:lt!==null&&typeof lt=="object"&&lt.constructor.wordSize===rt.wordSize&&Array.isArray(lt.words)},rt.max=function(lt,mt){return lt.cmp(mt)>0?lt:mt},rt.min=function(lt,mt){return lt.cmp(mt)<0?lt:mt},rt.prototype._init=function(lt,mt,gt){if(typeof lt=="number")return this._initNumber(lt,mt,gt);if(typeof lt=="object")return this._initArray(lt,mt,gt);mt==="hex"&&(mt=16),et(mt===(mt|0)&&mt>=2&&mt<=36),lt=lt.toString().replace(/\s+/g,"");var bt=0;lt[0]==="-"&&(bt++,this.negative=1),bt<lt.length&&(mt===16?this._parseHex(lt,bt,gt):(this._parseBase(lt,mt,bt),gt==="le"&&this._initArray(this.toArray(),mt,gt)))},rt.prototype._initNumber=function(lt,mt,gt){lt<0&&(this.negative=1,lt=-lt),lt<67108864?(this.words=[lt&67108863],this.length=1):lt<4503599627370496?(this.words=[lt&67108863,lt/67108864&67108863],this.length=2):(et(lt<9007199254740992),this.words=[lt&67108863,lt/67108864&67108863,1],this.length=3),gt==="le"&&this._initArray(this.toArray(),mt,gt)},rt.prototype._initArray=function(lt,mt,gt){if(et(typeof lt.length=="number"),lt.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(lt.length/3),this.words=new Array(this.length);for(var bt=0;bt<this.length;bt++)this.words[bt]=0;var St,Nt,Pt=0;if(gt==="be")for(bt=lt.length-1,St=0;bt>=0;bt-=3)Nt=lt[bt]|lt[bt-1]<<8|lt[bt-2]<<16,this.words[St]|=Nt<<Pt&67108863,this.words[St+1]=Nt>>>26-Pt&67108863,Pt+=24,Pt>=26&&(Pt-=26,St++);else if(gt==="le")for(bt=0,St=0;bt<lt.length;bt+=3)Nt=lt[bt]|lt[bt+1]<<8|lt[bt+2]<<16,this.words[St]|=Nt<<Pt&67108863,this.words[St+1]=Nt>>>26-Pt&67108863,Pt+=24,Pt>=26&&(Pt-=26,St++);return this.strip()};function it(Mt,lt){var mt=Mt.charCodeAt(lt);return mt>=65&&mt<=70?mt-55:mt>=97&&mt<=102?mt-87:mt-48&15}function st(Mt,lt,mt){var gt=it(Mt,mt);return mt-1>=lt&&(gt|=it(Mt,mt-1)<<4),gt}rt.prototype._parseHex=function(lt,mt,gt){this.length=Math.ceil((lt.length-mt)/6),this.words=new Array(this.length);for(var bt=0;bt<this.length;bt++)this.words[bt]=0;var St=0,Nt=0,Pt;if(gt==="be")for(bt=lt.length-1;bt>=mt;bt-=2)Pt=st(lt,mt,bt)<<St,this.words[Nt]|=Pt&67108863,St>=18?(St-=18,Nt+=1,this.words[Nt]|=Pt>>>26):St+=8;else{var Tt=lt.length-mt;for(bt=Tt%2===0?mt+1:mt;bt<lt.length;bt+=2)Pt=st(lt,mt,bt)<<St,this.words[Nt]|=Pt&67108863,St>=18?(St-=18,Nt+=1,this.words[Nt]|=Pt>>>26):St+=8}this.strip()};function at(Mt,lt,mt,gt){for(var bt=0,St=Math.min(Mt.length,mt),Nt=lt;Nt<St;Nt++){var Pt=Mt.charCodeAt(Nt)-48;bt*=gt,Pt>=49?bt+=Pt-49+10:Pt>=17?bt+=Pt-17+10:bt+=Pt}return bt}rt.prototype._parseBase=function(lt,mt,gt){this.words=[0],this.length=1;for(var bt=0,St=1;St<=67108863;St*=mt)bt++;bt--,St=St/mt|0;for(var Nt=lt.length-gt,Pt=Nt%bt,Tt=Math.min(Nt,Nt-Pt)+gt,pt=0,Rt=gt;Rt<Tt;Rt+=bt)pt=at(lt,Rt,Rt+bt,mt),this.imuln(St),this.words[0]+pt<67108864?this.words[0]+=pt:this._iaddn(pt);if(Pt!==0){var zt=1;for(pt=at(lt,Rt,lt.length,mt),Rt=0;Rt<Pt;Rt++)zt*=mt;this.imuln(zt),this.words[0]+pt<67108864?this.words[0]+=pt:this._iaddn(pt)}this.strip()},rt.prototype.copy=function(lt){lt.words=new Array(this.length);for(var mt=0;mt<this.length;mt++)lt.words[mt]=this.words[mt];lt.length=this.length,lt.negative=this.negative,lt.red=this.red},rt.prototype.clone=function(){var lt=new rt(null);return this.copy(lt),lt},rt.prototype._expand=function(lt){for(;this.length<lt;)this.words[this.length++]=0;return this},rt.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},rt.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},rt.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ot=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],dt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ht=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];rt.prototype.toString=function(lt,mt){lt=lt||10,mt=mt|0||1;var gt;if(lt===16||lt==="hex"){gt="";for(var bt=0,St=0,Nt=0;Nt<this.length;Nt++){var Pt=this.words[Nt],Tt=((Pt<<bt|St)&16777215).toString(16);St=Pt>>>24-bt&16777215,bt+=2,bt>=26&&(bt-=26,Nt--),St!==0||Nt!==this.length-1?gt=ot[6-Tt.length]+Tt+gt:gt=Tt+gt}for(St!==0&&(gt=St.toString(16)+gt);gt.length%mt!==0;)gt="0"+gt;return this.negative!==0&&(gt="-"+gt),gt}if(lt===(lt|0)&&lt>=2&&lt<=36){var pt=dt[lt],Rt=ht[lt];gt="";var zt=this.clone();for(zt.negative=0;!zt.isZero();){var Yt=zt.modn(Rt).toString(lt);zt=zt.idivn(Rt),zt.isZero()?gt=Yt+gt:gt=ot[pt-Yt.length]+Yt+gt}for(this.isZero()&&(gt="0"+gt);gt.length%mt!==0;)gt="0"+gt;return this.negative!==0&&(gt="-"+gt),gt}et(!1,"Base should be between 2 and 36")},rt.prototype.toNumber=function(){var lt=this.words[0];return this.length===2?lt+=this.words[1]*67108864:this.length===3&&this.words[2]===1?lt+=4503599627370496+this.words[1]*67108864:this.length>2&&et(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-lt:lt},rt.prototype.toJSON=function(){return this.toString(16)},rt.prototype.toBuffer=function(lt,mt){return et(typeof nt<"u"),this.toArrayLike(nt,lt,mt)},rt.prototype.toArray=function(lt,mt){return this.toArrayLike(Array,lt,mt)},rt.prototype.toArrayLike=function(lt,mt,gt){var bt=this.byteLength(),St=gt||Math.max(1,bt);et(bt<=St,"byte array longer than desired length"),et(St>0,"Requested array length <= 0"),this.strip();var Nt=mt==="le",Pt=new lt(St),Tt,pt,Rt=this.clone();if(Nt){for(pt=0;!Rt.isZero();pt++)Tt=Rt.andln(255),Rt.iushrn(8),Pt[pt]=Tt;for(;pt<St;pt++)Pt[pt]=0}else{for(pt=0;pt<St-bt;pt++)Pt[pt]=0;for(pt=0;!Rt.isZero();pt++)Tt=Rt.andln(255),Rt.iushrn(8),Pt[St-pt-1]=Tt}return Pt},Math.clz32?rt.prototype._countBits=function(lt){return 32-Math.clz32(lt)}:rt.prototype._countBits=function(lt){var mt=lt,gt=0;return mt>=4096&&(gt+=13,mt>>>=13),mt>=64&&(gt+=7,mt>>>=7),mt>=8&&(gt+=4,mt>>>=4),mt>=2&&(gt+=2,mt>>>=2),gt+mt},rt.prototype._zeroBits=function(lt){if(lt===0)return 26;var mt=lt,gt=0;return mt&8191||(gt+=13,mt>>>=13),mt&127||(gt+=7,mt>>>=7),mt&15||(gt+=4,mt>>>=4),mt&3||(gt+=2,mt>>>=2),mt&1||gt++,gt},rt.prototype.bitLength=function(){var lt=this.words[this.length-1],mt=this._countBits(lt);return(this.length-1)*26+mt};function yt(Mt){for(var lt=new Array(Mt.bitLength()),mt=0;mt<lt.length;mt++){var gt=mt/26|0,bt=mt%26;lt[mt]=(Mt.words[gt]&1<<bt)>>>bt}return lt}rt.prototype.zeroBits=function(){if(this.isZero())return 0;for(var lt=0,mt=0;mt<this.length;mt++){var gt=this._zeroBits(this.words[mt]);if(lt+=gt,gt!==26)break}return lt},rt.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},rt.prototype.toTwos=function(lt){return this.negative!==0?this.abs().inotn(lt).iaddn(1):this.clone()},rt.prototype.fromTwos=function(lt){return this.testn(lt-1)?this.notn(lt).iaddn(1).ineg():this.clone()},rt.prototype.isNeg=function(){return this.negative!==0},rt.prototype.neg=function(){return this.clone().ineg()},rt.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},rt.prototype.iuor=function(lt){for(;this.length<lt.length;)this.words[this.length++]=0;for(var mt=0;mt<lt.length;mt++)this.words[mt]=this.words[mt]|lt.words[mt];return this.strip()},rt.prototype.ior=function(lt){return et((this.negative|lt.negative)===0),this.iuor(lt)},rt.prototype.or=function(lt){return this.length>lt.length?this.clone().ior(lt):lt.clone().ior(this)},rt.prototype.uor=function(lt){return this.length>lt.length?this.clone().iuor(lt):lt.clone().iuor(this)},rt.prototype.iuand=function(lt){var mt;this.length>lt.length?mt=lt:mt=this;for(var gt=0;gt<mt.length;gt++)this.words[gt]=this.words[gt]&lt.words[gt];return this.length=mt.length,this.strip()},rt.prototype.iand=function(lt){return et((this.negative|lt.negative)===0),this.iuand(lt)},rt.prototype.and=function(lt){return this.length>lt.length?this.clone().iand(lt):lt.clone().iand(this)},rt.prototype.uand=function(lt){return this.length>lt.length?this.clone().iuand(lt):lt.clone().iuand(this)},rt.prototype.iuxor=function(lt){var mt,gt;this.length>lt.length?(mt=this,gt=lt):(mt=lt,gt=this);for(var bt=0;bt<gt.length;bt++)this.words[bt]=mt.words[bt]^gt.words[bt];if(this!==mt)for(;bt<mt.length;bt++)this.words[bt]=mt.words[bt];return this.length=mt.length,this.strip()},rt.prototype.ixor=function(lt){return et((this.negative|lt.negative)===0),this.iuxor(lt)},rt.prototype.xor=function(lt){return this.length>lt.length?this.clone().ixor(lt):lt.clone().ixor(this)},rt.prototype.uxor=function(lt){return this.length>lt.length?this.clone().iuxor(lt):lt.clone().iuxor(this)},rt.prototype.inotn=function(lt){et(typeof lt=="number"&&lt>=0);var mt=Math.ceil(lt/26)|0,gt=lt%26;this._expand(mt),gt>0&&mt--;for(var bt=0;bt<mt;bt++)this.words[bt]=~this.words[bt]&67108863;return gt>0&&(this.words[bt]=~this.words[bt]&67108863>>26-gt),this.strip()},rt.prototype.notn=function(lt){return this.clone().inotn(lt)},rt.prototype.setn=function(lt,mt){et(typeof lt=="number"&&lt>=0);var gt=lt/26|0,bt=lt%26;return this._expand(gt+1),mt?this.words[gt]=this.words[gt]|1<<bt:this.words[gt]=this.words[gt]&~(1<<bt),this.strip()},rt.prototype.iadd=function(lt){var mt;if(this.negative!==0&&lt.negative===0)return this.negative=0,mt=this.isub(lt),this.negative^=1,this._normSign();if(this.negative===0&&lt.negative!==0)return lt.negative=0,mt=this.isub(lt),lt.negative=1,mt._normSign();var gt,bt;this.length>lt.length?(gt=this,bt=lt):(gt=lt,bt=this);for(var St=0,Nt=0;Nt<bt.length;Nt++)mt=(gt.words[Nt]|0)+(bt.words[Nt]|0)+St,this.words[Nt]=mt&67108863,St=mt>>>26;for(;St!==0&&Nt<gt.length;Nt++)mt=(gt.words[Nt]|0)+St,this.words[Nt]=mt&67108863,St=mt>>>26;if(this.length=gt.length,St!==0)this.words[this.length]=St,this.length++;else if(gt!==this)for(;Nt<gt.length;Nt++)this.words[Nt]=gt.words[Nt];return this},rt.prototype.add=function(lt){var mt;return lt.negative!==0&&this.negative===0?(lt.negative=0,mt=this.sub(lt),lt.negative^=1,mt):lt.negative===0&&this.negative!==0?(this.negative=0,mt=lt.sub(this),this.negative=1,mt):this.length>lt.length?this.clone().iadd(lt):lt.clone().iadd(this)},rt.prototype.isub=function(lt){if(lt.negative!==0){lt.negative=0;var mt=this.iadd(lt);return lt.negative=1,mt._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(lt),this.negative=1,this._normSign();var gt=this.cmp(lt);if(gt===0)return this.negative=0,this.length=1,this.words[0]=0,this;var bt,St;gt>0?(bt=this,St=lt):(bt=lt,St=this);for(var Nt=0,Pt=0;Pt<St.length;Pt++)mt=(bt.words[Pt]|0)-(St.words[Pt]|0)+Nt,Nt=mt>>26,this.words[Pt]=mt&67108863;for(;Nt!==0&&Pt<bt.length;Pt++)mt=(bt.words[Pt]|0)+Nt,Nt=mt>>26,this.words[Pt]=mt&67108863;if(Nt===0&&Pt<bt.length&&bt!==this)for(;Pt<bt.length;Pt++)this.words[Pt]=bt.words[Pt];return this.length=Math.max(this.length,Pt),bt!==this&&(this.negative=1),this.strip()},rt.prototype.sub=function(lt){return this.clone().isub(lt)};function vt(Mt,lt,mt){mt.negative=lt.negative^Mt.negative;var gt=Mt.length+lt.length|0;mt.length=gt,gt=gt-1|0;var bt=Mt.words[0]|0,St=lt.words[0]|0,Nt=bt*St,Pt=Nt&67108863,Tt=Nt/67108864|0;mt.words[0]=Pt;for(var pt=1;pt<gt;pt++){for(var Rt=Tt>>>26,zt=Tt&67108863,Yt=Math.min(pt,lt.length-1),ir=Math.max(0,pt-Mt.length+1);ir<=Yt;ir++){var ur=pt-ir|0;bt=Mt.words[ur]|0,St=lt.words[ir]|0,Nt=bt*St+zt,Rt+=Nt/67108864|0,zt=Nt&67108863}mt.words[pt]=zt|0,Tt=Rt|0}return Tt!==0?mt.words[pt]=Tt|0:mt.length--,mt.strip()}var xt=function(lt,mt,gt){var bt=lt.words,St=mt.words,Nt=gt.words,Pt=0,Tt,pt,Rt,zt=bt[0]|0,Yt=zt&8191,ir=zt>>>13,ur=bt[1]|0,cr=ur&8191,rr=ur>>>13,fr=bt[2]|0,dr=fr&8191,gr=fr>>>13,hr=bt[3]|0,or=hr&8191,br=hr>>>13,Rr=bt[4]|0,_r=Rr&8191,Er=Rr>>>13,Hr=bt[5]|0,xr=Hr&8191,yr=Hr>>>13,Ar=bt[6]|0,$r=Ar&8191,Tr=Ar>>>13,jr=bt[7]|0,Cr=jr&8191,Nr=jr>>>13,nn=bt[8]|0,Mr=nn&8191,Lr=nn>>>13,an=bt[9]|0,pr=an&8191,nr=an>>>13,lr=St[0]|0,vr=lr&8191,wr=lr>>>13,Pr=St[1]|0,Sr=Pr&8191,Dr=Pr>>>13,rn=St[2]|0,Ir=rn&8191,Or=rn>>>13,sn=St[3]|0,Fr=sn&8191,Kr=sn>>>13,fn=St[4]|0,Br=fn&8191,Zr=fn>>>13,hn=St[5]|0,zr=hn&8191,Xr=hn>>>13,pn=St[6]|0,Vr=pn&8191,Yr=pn>>>13,mn=St[7]|0,Ur=mn&8191,Qr=mn>>>13,gn=St[8]|0,Gr=gn&8191,Jr=gn>>>13,yn=St[9]|0,Wr=yn&8191,en=yn>>>13;gt.negative=lt.negative^mt.negative,gt.length=19,Tt=Math.imul(Yt,vr),pt=Math.imul(Yt,wr),pt=pt+Math.imul(ir,vr)|0,Rt=Math.imul(ir,wr);var on=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(on>>>26)|0,on&=67108863,Tt=Math.imul(cr,vr),pt=Math.imul(cr,wr),pt=pt+Math.imul(rr,vr)|0,Rt=Math.imul(rr,wr),Tt=Tt+Math.imul(Yt,Sr)|0,pt=pt+Math.imul(Yt,Dr)|0,pt=pt+Math.imul(ir,Sr)|0,Rt=Rt+Math.imul(ir,Dr)|0;var un=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(un>>>26)|0,un&=67108863,Tt=Math.imul(dr,vr),pt=Math.imul(dr,wr),pt=pt+Math.imul(gr,vr)|0,Rt=Math.imul(gr,wr),Tt=Tt+Math.imul(cr,Sr)|0,pt=pt+Math.imul(cr,Dr)|0,pt=pt+Math.imul(rr,Sr)|0,Rt=Rt+Math.imul(rr,Dr)|0,Tt=Tt+Math.imul(Yt,Ir)|0,pt=pt+Math.imul(Yt,Or)|0,pt=pt+Math.imul(ir,Ir)|0,Rt=Rt+Math.imul(ir,Or)|0;var wn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(wn>>>26)|0,wn&=67108863,Tt=Math.imul(or,vr),pt=Math.imul(or,wr),pt=pt+Math.imul(br,vr)|0,Rt=Math.imul(br,wr),Tt=Tt+Math.imul(dr,Sr)|0,pt=pt+Math.imul(dr,Dr)|0,pt=pt+Math.imul(gr,Sr)|0,Rt=Rt+Math.imul(gr,Dr)|0,Tt=Tt+Math.imul(cr,Ir)|0,pt=pt+Math.imul(cr,Or)|0,pt=pt+Math.imul(rr,Ir)|0,Rt=Rt+Math.imul(rr,Or)|0,Tt=Tt+Math.imul(Yt,Fr)|0,pt=pt+Math.imul(Yt,Kr)|0,pt=pt+Math.imul(ir,Fr)|0,Rt=Rt+Math.imul(ir,Kr)|0;var $n=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+($n>>>26)|0,$n&=67108863,Tt=Math.imul(_r,vr),pt=Math.imul(_r,wr),pt=pt+Math.imul(Er,vr)|0,Rt=Math.imul(Er,wr),Tt=Tt+Math.imul(or,Sr)|0,pt=pt+Math.imul(or,Dr)|0,pt=pt+Math.imul(br,Sr)|0,Rt=Rt+Math.imul(br,Dr)|0,Tt=Tt+Math.imul(dr,Ir)|0,pt=pt+Math.imul(dr,Or)|0,pt=pt+Math.imul(gr,Ir)|0,Rt=Rt+Math.imul(gr,Or)|0,Tt=Tt+Math.imul(cr,Fr)|0,pt=pt+Math.imul(cr,Kr)|0,pt=pt+Math.imul(rr,Fr)|0,Rt=Rt+Math.imul(rr,Kr)|0,Tt=Tt+Math.imul(Yt,Br)|0,pt=pt+Math.imul(Yt,Zr)|0,pt=pt+Math.imul(ir,Br)|0,Rt=Rt+Math.imul(ir,Zr)|0;var Sn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,Tt=Math.imul(xr,vr),pt=Math.imul(xr,wr),pt=pt+Math.imul(yr,vr)|0,Rt=Math.imul(yr,wr),Tt=Tt+Math.imul(_r,Sr)|0,pt=pt+Math.imul(_r,Dr)|0,pt=pt+Math.imul(Er,Sr)|0,Rt=Rt+Math.imul(Er,Dr)|0,Tt=Tt+Math.imul(or,Ir)|0,pt=pt+Math.imul(or,Or)|0,pt=pt+Math.imul(br,Ir)|0,Rt=Rt+Math.imul(br,Or)|0,Tt=Tt+Math.imul(dr,Fr)|0,pt=pt+Math.imul(dr,Kr)|0,pt=pt+Math.imul(gr,Fr)|0,Rt=Rt+Math.imul(gr,Kr)|0,Tt=Tt+Math.imul(cr,Br)|0,pt=pt+Math.imul(cr,Zr)|0,pt=pt+Math.imul(rr,Br)|0,Rt=Rt+Math.imul(rr,Zr)|0,Tt=Tt+Math.imul(Yt,zr)|0,pt=pt+Math.imul(Yt,Xr)|0,pt=pt+Math.imul(ir,zr)|0,Rt=Rt+Math.imul(ir,Xr)|0;var En=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(En>>>26)|0,En&=67108863,Tt=Math.imul($r,vr),pt=Math.imul($r,wr),pt=pt+Math.imul(Tr,vr)|0,Rt=Math.imul(Tr,wr),Tt=Tt+Math.imul(xr,Sr)|0,pt=pt+Math.imul(xr,Dr)|0,pt=pt+Math.imul(yr,Sr)|0,Rt=Rt+Math.imul(yr,Dr)|0,Tt=Tt+Math.imul(_r,Ir)|0,pt=pt+Math.imul(_r,Or)|0,pt=pt+Math.imul(Er,Ir)|0,Rt=Rt+Math.imul(Er,Or)|0,Tt=Tt+Math.imul(or,Fr)|0,pt=pt+Math.imul(or,Kr)|0,pt=pt+Math.imul(br,Fr)|0,Rt=Rt+Math.imul(br,Kr)|0,Tt=Tt+Math.imul(dr,Br)|0,pt=pt+Math.imul(dr,Zr)|0,pt=pt+Math.imul(gr,Br)|0,Rt=Rt+Math.imul(gr,Zr)|0,Tt=Tt+Math.imul(cr,zr)|0,pt=pt+Math.imul(cr,Xr)|0,pt=pt+Math.imul(rr,zr)|0,Rt=Rt+Math.imul(rr,Xr)|0,Tt=Tt+Math.imul(Yt,Vr)|0,pt=pt+Math.imul(Yt,Yr)|0,pt=pt+Math.imul(ir,Vr)|0,Rt=Rt+Math.imul(ir,Yr)|0;var _n=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(_n>>>26)|0,_n&=67108863,Tt=Math.imul(Cr,vr),pt=Math.imul(Cr,wr),pt=pt+Math.imul(Nr,vr)|0,Rt=Math.imul(Nr,wr),Tt=Tt+Math.imul($r,Sr)|0,pt=pt+Math.imul($r,Dr)|0,pt=pt+Math.imul(Tr,Sr)|0,Rt=Rt+Math.imul(Tr,Dr)|0,Tt=Tt+Math.imul(xr,Ir)|0,pt=pt+Math.imul(xr,Or)|0,pt=pt+Math.imul(yr,Ir)|0,Rt=Rt+Math.imul(yr,Or)|0,Tt=Tt+Math.imul(_r,Fr)|0,pt=pt+Math.imul(_r,Kr)|0,pt=pt+Math.imul(Er,Fr)|0,Rt=Rt+Math.imul(Er,Kr)|0,Tt=Tt+Math.imul(or,Br)|0,pt=pt+Math.imul(or,Zr)|0,pt=pt+Math.imul(br,Br)|0,Rt=Rt+Math.imul(br,Zr)|0,Tt=Tt+Math.imul(dr,zr)|0,pt=pt+Math.imul(dr,Xr)|0,pt=pt+Math.imul(gr,zr)|0,Rt=Rt+Math.imul(gr,Xr)|0,Tt=Tt+Math.imul(cr,Vr)|0,pt=pt+Math.imul(cr,Yr)|0,pt=pt+Math.imul(rr,Vr)|0,Rt=Rt+Math.imul(rr,Yr)|0,Tt=Tt+Math.imul(Yt,Ur)|0,pt=pt+Math.imul(Yt,Qr)|0,pt=pt+Math.imul(ir,Ur)|0,Rt=Rt+Math.imul(ir,Qr)|0;var Tn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,Tt=Math.imul(Mr,vr),pt=Math.imul(Mr,wr),pt=pt+Math.imul(Lr,vr)|0,Rt=Math.imul(Lr,wr),Tt=Tt+Math.imul(Cr,Sr)|0,pt=pt+Math.imul(Cr,Dr)|0,pt=pt+Math.imul(Nr,Sr)|0,Rt=Rt+Math.imul(Nr,Dr)|0,Tt=Tt+Math.imul($r,Ir)|0,pt=pt+Math.imul($r,Or)|0,pt=pt+Math.imul(Tr,Ir)|0,Rt=Rt+Math.imul(Tr,Or)|0,Tt=Tt+Math.imul(xr,Fr)|0,pt=pt+Math.imul(xr,Kr)|0,pt=pt+Math.imul(yr,Fr)|0,Rt=Rt+Math.imul(yr,Kr)|0,Tt=Tt+Math.imul(_r,Br)|0,pt=pt+Math.imul(_r,Zr)|0,pt=pt+Math.imul(Er,Br)|0,Rt=Rt+Math.imul(Er,Zr)|0,Tt=Tt+Math.imul(or,zr)|0,pt=pt+Math.imul(or,Xr)|0,pt=pt+Math.imul(br,zr)|0,Rt=Rt+Math.imul(br,Xr)|0,Tt=Tt+Math.imul(dr,Vr)|0,pt=pt+Math.imul(dr,Yr)|0,pt=pt+Math.imul(gr,Vr)|0,Rt=Rt+Math.imul(gr,Yr)|0,Tt=Tt+Math.imul(cr,Ur)|0,pt=pt+Math.imul(cr,Qr)|0,pt=pt+Math.imul(rr,Ur)|0,Rt=Rt+Math.imul(rr,Qr)|0,Tt=Tt+Math.imul(Yt,Gr)|0,pt=pt+Math.imul(Yt,Jr)|0,pt=pt+Math.imul(ir,Gr)|0,Rt=Rt+Math.imul(ir,Jr)|0;var Cn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Tt=Math.imul(pr,vr),pt=Math.imul(pr,wr),pt=pt+Math.imul(nr,vr)|0,Rt=Math.imul(nr,wr),Tt=Tt+Math.imul(Mr,Sr)|0,pt=pt+Math.imul(Mr,Dr)|0,pt=pt+Math.imul(Lr,Sr)|0,Rt=Rt+Math.imul(Lr,Dr)|0,Tt=Tt+Math.imul(Cr,Ir)|0,pt=pt+Math.imul(Cr,Or)|0,pt=pt+Math.imul(Nr,Ir)|0,Rt=Rt+Math.imul(Nr,Or)|0,Tt=Tt+Math.imul($r,Fr)|0,pt=pt+Math.imul($r,Kr)|0,pt=pt+Math.imul(Tr,Fr)|0,Rt=Rt+Math.imul(Tr,Kr)|0,Tt=Tt+Math.imul(xr,Br)|0,pt=pt+Math.imul(xr,Zr)|0,pt=pt+Math.imul(yr,Br)|0,Rt=Rt+Math.imul(yr,Zr)|0,Tt=Tt+Math.imul(_r,zr)|0,pt=pt+Math.imul(_r,Xr)|0,pt=pt+Math.imul(Er,zr)|0,Rt=Rt+Math.imul(Er,Xr)|0,Tt=Tt+Math.imul(or,Vr)|0,pt=pt+Math.imul(or,Yr)|0,pt=pt+Math.imul(br,Vr)|0,Rt=Rt+Math.imul(br,Yr)|0,Tt=Tt+Math.imul(dr,Ur)|0,pt=pt+Math.imul(dr,Qr)|0,pt=pt+Math.imul(gr,Ur)|0,Rt=Rt+Math.imul(gr,Qr)|0,Tt=Tt+Math.imul(cr,Gr)|0,pt=pt+Math.imul(cr,Jr)|0,pt=pt+Math.imul(rr,Gr)|0,Rt=Rt+Math.imul(rr,Jr)|0,Tt=Tt+Math.imul(Yt,Wr)|0,pt=pt+Math.imul(Yt,en)|0,pt=pt+Math.imul(ir,Wr)|0,Rt=Rt+Math.imul(ir,en)|0;var An=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(An>>>26)|0,An&=67108863,Tt=Math.imul(pr,Sr),pt=Math.imul(pr,Dr),pt=pt+Math.imul(nr,Sr)|0,Rt=Math.imul(nr,Dr),Tt=Tt+Math.imul(Mr,Ir)|0,pt=pt+Math.imul(Mr,Or)|0,pt=pt+Math.imul(Lr,Ir)|0,Rt=Rt+Math.imul(Lr,Or)|0,Tt=Tt+Math.imul(Cr,Fr)|0,pt=pt+Math.imul(Cr,Kr)|0,pt=pt+Math.imul(Nr,Fr)|0,Rt=Rt+Math.imul(Nr,Kr)|0,Tt=Tt+Math.imul($r,Br)|0,pt=pt+Math.imul($r,Zr)|0,pt=pt+Math.imul(Tr,Br)|0,Rt=Rt+Math.imul(Tr,Zr)|0,Tt=Tt+Math.imul(xr,zr)|0,pt=pt+Math.imul(xr,Xr)|0,pt=pt+Math.imul(yr,zr)|0,Rt=Rt+Math.imul(yr,Xr)|0,Tt=Tt+Math.imul(_r,Vr)|0,pt=pt+Math.imul(_r,Yr)|0,pt=pt+Math.imul(Er,Vr)|0,Rt=Rt+Math.imul(Er,Yr)|0,Tt=Tt+Math.imul(or,Ur)|0,pt=pt+Math.imul(or,Qr)|0,pt=pt+Math.imul(br,Ur)|0,Rt=Rt+Math.imul(br,Qr)|0,Tt=Tt+Math.imul(dr,Gr)|0,pt=pt+Math.imul(dr,Jr)|0,pt=pt+Math.imul(gr,Gr)|0,Rt=Rt+Math.imul(gr,Jr)|0,Tt=Tt+Math.imul(cr,Wr)|0,pt=pt+Math.imul(cr,en)|0,pt=pt+Math.imul(rr,Wr)|0,Rt=Rt+Math.imul(rr,en)|0;var Rn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,Tt=Math.imul(pr,Ir),pt=Math.imul(pr,Or),pt=pt+Math.imul(nr,Ir)|0,Rt=Math.imul(nr,Or),Tt=Tt+Math.imul(Mr,Fr)|0,pt=pt+Math.imul(Mr,Kr)|0,pt=pt+Math.imul(Lr,Fr)|0,Rt=Rt+Math.imul(Lr,Kr)|0,Tt=Tt+Math.imul(Cr,Br)|0,pt=pt+Math.imul(Cr,Zr)|0,pt=pt+Math.imul(Nr,Br)|0,Rt=Rt+Math.imul(Nr,Zr)|0,Tt=Tt+Math.imul($r,zr)|0,pt=pt+Math.imul($r,Xr)|0,pt=pt+Math.imul(Tr,zr)|0,Rt=Rt+Math.imul(Tr,Xr)|0,Tt=Tt+Math.imul(xr,Vr)|0,pt=pt+Math.imul(xr,Yr)|0,pt=pt+Math.imul(yr,Vr)|0,Rt=Rt+Math.imul(yr,Yr)|0,Tt=Tt+Math.imul(_r,Ur)|0,pt=pt+Math.imul(_r,Qr)|0,pt=pt+Math.imul(Er,Ur)|0,Rt=Rt+Math.imul(Er,Qr)|0,Tt=Tt+Math.imul(or,Gr)|0,pt=pt+Math.imul(or,Jr)|0,pt=pt+Math.imul(br,Gr)|0,Rt=Rt+Math.imul(br,Jr)|0,Tt=Tt+Math.imul(dr,Wr)|0,pt=pt+Math.imul(dr,en)|0,pt=pt+Math.imul(gr,Wr)|0,Rt=Rt+Math.imul(gr,en)|0;var Nn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,Tt=Math.imul(pr,Fr),pt=Math.imul(pr,Kr),pt=pt+Math.imul(nr,Fr)|0,Rt=Math.imul(nr,Kr),Tt=Tt+Math.imul(Mr,Br)|0,pt=pt+Math.imul(Mr,Zr)|0,pt=pt+Math.imul(Lr,Br)|0,Rt=Rt+Math.imul(Lr,Zr)|0,Tt=Tt+Math.imul(Cr,zr)|0,pt=pt+Math.imul(Cr,Xr)|0,pt=pt+Math.imul(Nr,zr)|0,Rt=Rt+Math.imul(Nr,Xr)|0,Tt=Tt+Math.imul($r,Vr)|0,pt=pt+Math.imul($r,Yr)|0,pt=pt+Math.imul(Tr,Vr)|0,Rt=Rt+Math.imul(Tr,Yr)|0,Tt=Tt+Math.imul(xr,Ur)|0,pt=pt+Math.imul(xr,Qr)|0,pt=pt+Math.imul(yr,Ur)|0,Rt=Rt+Math.imul(yr,Qr)|0,Tt=Tt+Math.imul(_r,Gr)|0,pt=pt+Math.imul(_r,Jr)|0,pt=pt+Math.imul(Er,Gr)|0,Rt=Rt+Math.imul(Er,Jr)|0,Tt=Tt+Math.imul(or,Wr)|0,pt=pt+Math.imul(or,en)|0,pt=pt+Math.imul(br,Wr)|0,Rt=Rt+Math.imul(br,en)|0;var In=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(In>>>26)|0,In&=67108863,Tt=Math.imul(pr,Br),pt=Math.imul(pr,Zr),pt=pt+Math.imul(nr,Br)|0,Rt=Math.imul(nr,Zr),Tt=Tt+Math.imul(Mr,zr)|0,pt=pt+Math.imul(Mr,Xr)|0,pt=pt+Math.imul(Lr,zr)|0,Rt=Rt+Math.imul(Lr,Xr)|0,Tt=Tt+Math.imul(Cr,Vr)|0,pt=pt+Math.imul(Cr,Yr)|0,pt=pt+Math.imul(Nr,Vr)|0,Rt=Rt+Math.imul(Nr,Yr)|0,Tt=Tt+Math.imul($r,Ur)|0,pt=pt+Math.imul($r,Qr)|0,pt=pt+Math.imul(Tr,Ur)|0,Rt=Rt+Math.imul(Tr,Qr)|0,Tt=Tt+Math.imul(xr,Gr)|0,pt=pt+Math.imul(xr,Jr)|0,pt=pt+Math.imul(yr,Gr)|0,Rt=Rt+Math.imul(yr,Jr)|0,Tt=Tt+Math.imul(_r,Wr)|0,pt=pt+Math.imul(_r,en)|0,pt=pt+Math.imul(Er,Wr)|0,Rt=Rt+Math.imul(Er,en)|0;var Mn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,Tt=Math.imul(pr,zr),pt=Math.imul(pr,Xr),pt=pt+Math.imul(nr,zr)|0,Rt=Math.imul(nr,Xr),Tt=Tt+Math.imul(Mr,Vr)|0,pt=pt+Math.imul(Mr,Yr)|0,pt=pt+Math.imul(Lr,Vr)|0,Rt=Rt+Math.imul(Lr,Yr)|0,Tt=Tt+Math.imul(Cr,Ur)|0,pt=pt+Math.imul(Cr,Qr)|0,pt=pt+Math.imul(Nr,Ur)|0,Rt=Rt+Math.imul(Nr,Qr)|0,Tt=Tt+Math.imul($r,Gr)|0,pt=pt+Math.imul($r,Jr)|0,pt=pt+Math.imul(Tr,Gr)|0,Rt=Rt+Math.imul(Tr,Jr)|0,Tt=Tt+Math.imul(xr,Wr)|0,pt=pt+Math.imul(xr,en)|0,pt=pt+Math.imul(yr,Wr)|0,Rt=Rt+Math.imul(yr,en)|0;var Pn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,Tt=Math.imul(pr,Vr),pt=Math.imul(pr,Yr),pt=pt+Math.imul(nr,Vr)|0,Rt=Math.imul(nr,Yr),Tt=Tt+Math.imul(Mr,Ur)|0,pt=pt+Math.imul(Mr,Qr)|0,pt=pt+Math.imul(Lr,Ur)|0,Rt=Rt+Math.imul(Lr,Qr)|0,Tt=Tt+Math.imul(Cr,Gr)|0,pt=pt+Math.imul(Cr,Jr)|0,pt=pt+Math.imul(Nr,Gr)|0,Rt=Rt+Math.imul(Nr,Jr)|0,Tt=Tt+Math.imul($r,Wr)|0,pt=pt+Math.imul($r,en)|0,pt=pt+Math.imul(Tr,Wr)|0,Rt=Rt+Math.imul(Tr,en)|0;var kn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(kn>>>26)|0,kn&=67108863,Tt=Math.imul(pr,Ur),pt=Math.imul(pr,Qr),pt=pt+Math.imul(nr,Ur)|0,Rt=Math.imul(nr,Qr),Tt=Tt+Math.imul(Mr,Gr)|0,pt=pt+Math.imul(Mr,Jr)|0,pt=pt+Math.imul(Lr,Gr)|0,Rt=Rt+Math.imul(Lr,Jr)|0,Tt=Tt+Math.imul(Cr,Wr)|0,pt=pt+Math.imul(Cr,en)|0,pt=pt+Math.imul(Nr,Wr)|0,Rt=Rt+Math.imul(Nr,en)|0;var On=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(On>>>26)|0,On&=67108863,Tt=Math.imul(pr,Gr),pt=Math.imul(pr,Jr),pt=pt+Math.imul(nr,Gr)|0,Rt=Math.imul(nr,Jr),Tt=Tt+Math.imul(Mr,Wr)|0,pt=pt+Math.imul(Mr,en)|0,pt=pt+Math.imul(Lr,Wr)|0,Rt=Rt+Math.imul(Lr,en)|0;var Dn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,Tt=Math.imul(pr,Wr),pt=Math.imul(pr,en),pt=pt+Math.imul(nr,Wr)|0,Rt=Math.imul(nr,en);var jn=(Pt+Tt|0)+((pt&8191)<<13)|0;return Pt=(Rt+(pt>>>13)|0)+(jn>>>26)|0,jn&=67108863,Nt[0]=on,Nt[1]=un,Nt[2]=wn,Nt[3]=$n,Nt[4]=Sn,Nt[5]=En,Nt[6]=_n,Nt[7]=Tn,Nt[8]=Cn,Nt[9]=An,Nt[10]=Rn,Nt[11]=Nn,Nt[12]=In,Nt[13]=Mn,Nt[14]=Pn,Nt[15]=kn,Nt[16]=On,Nt[17]=Dn,Nt[18]=jn,Pt!==0&&(Nt[19]=Pt,gt.length++),gt};Math.imul||(xt=vt);function wt(Mt,lt,mt){mt.negative=lt.negative^Mt.negative,mt.length=Mt.length+lt.length;for(var gt=0,bt=0,St=0;St<mt.length-1;St++){var Nt=bt;bt=0;for(var Pt=gt&67108863,Tt=Math.min(St,lt.length-1),pt=Math.max(0,St-Mt.length+1);pt<=Tt;pt++){var Rt=St-pt,zt=Mt.words[Rt]|0,Yt=lt.words[pt]|0,ir=zt*Yt,ur=ir&67108863;Nt=Nt+(ir/67108864|0)|0,ur=ur+Pt|0,Pt=ur&67108863,Nt=Nt+(ur>>>26)|0,bt+=Nt>>>26,Nt&=67108863}mt.words[St]=Pt,gt=Nt,Nt=bt}return gt!==0?mt.words[St]=gt:mt.length--,mt.strip()}function Et(Mt,lt,mt){var gt=new At;return gt.mulp(Mt,lt,mt)}rt.prototype.mulTo=function(lt,mt){var gt,bt=this.length+lt.length;return this.length===10&&lt.length===10?gt=xt(this,lt,mt):bt<63?gt=vt(this,lt,mt):bt<1024?gt=wt(this,lt,mt):gt=Et(this,lt,mt),gt};function At(Mt,lt){this.x=Mt,this.y=lt}At.prototype.makeRBT=function(lt){for(var mt=new Array(lt),gt=rt.prototype._countBits(lt)-1,bt=0;bt<lt;bt++)mt[bt]=this.revBin(bt,gt,lt);return mt},At.prototype.revBin=function(lt,mt,gt){if(lt===0||lt===gt-1)return lt;for(var bt=0,St=0;St<mt;St++)bt|=(lt&1)<<mt-St-1,lt>>=1;return bt},At.prototype.permute=function(lt,mt,gt,bt,St,Nt){for(var Pt=0;Pt<Nt;Pt++)bt[Pt]=mt[lt[Pt]],St[Pt]=gt[lt[Pt]]},At.prototype.transform=function(lt,mt,gt,bt,St,Nt){this.permute(Nt,lt,mt,gt,bt,St);for(var Pt=1;Pt<St;Pt<<=1)for(var Tt=Pt<<1,pt=Math.cos(2*Math.PI/Tt),Rt=Math.sin(2*Math.PI/Tt),zt=0;zt<St;zt+=Tt)for(var Yt=pt,ir=Rt,ur=0;ur<Pt;ur++){var cr=gt[zt+ur],rr=bt[zt+ur],fr=gt[zt+ur+Pt],dr=bt[zt+ur+Pt],gr=Yt*fr-ir*dr;dr=Yt*dr+ir*fr,fr=gr,gt[zt+ur]=cr+fr,bt[zt+ur]=rr+dr,gt[zt+ur+Pt]=cr-fr,bt[zt+ur+Pt]=rr-dr,ur!==Tt&&(gr=pt*Yt-Rt*ir,ir=pt*ir+Rt*Yt,Yt=gr)}},At.prototype.guessLen13b=function(lt,mt){var gt=Math.max(mt,lt)|1,bt=gt&1,St=0;for(gt=gt/2|0;gt;gt=gt>>>1)St++;return 1<<St+1+bt},At.prototype.conjugate=function(lt,mt,gt){if(!(gt<=1))for(var bt=0;bt<gt/2;bt++){var St=lt[bt];lt[bt]=lt[gt-bt-1],lt[gt-bt-1]=St,St=mt[bt],mt[bt]=-mt[gt-bt-1],mt[gt-bt-1]=-St}},At.prototype.normalize13b=function(lt,mt){for(var gt=0,bt=0;bt<mt/2;bt++){var St=Math.round(lt[2*bt+1]/mt)*8192+Math.round(lt[2*bt]/mt)+gt;lt[bt]=St&67108863,St<67108864?gt=0:gt=St/67108864|0}return lt},At.prototype.convert13b=function(lt,mt,gt,bt){for(var St=0,Nt=0;Nt<mt;Nt++)St=St+(lt[Nt]|0),gt[2*Nt]=St&8191,St=St>>>13,gt[2*Nt+1]=St&8191,St=St>>>13;for(Nt=2*mt;Nt<bt;++Nt)gt[Nt]=0;et(St===0),et((St&-8192)===0)},At.prototype.stub=function(lt){for(var mt=new Array(lt),gt=0;gt<lt;gt++)mt[gt]=0;return mt},At.prototype.mulp=function(lt,mt,gt){var bt=2*this.guessLen13b(lt.length,mt.length),St=this.makeRBT(bt),Nt=this.stub(bt),Pt=new Array(bt),Tt=new Array(bt),pt=new Array(bt),Rt=new Array(bt),zt=new Array(bt),Yt=new Array(bt),ir=gt.words;ir.length=bt,this.convert13b(lt.words,lt.length,Pt,bt),this.convert13b(mt.words,mt.length,Rt,bt),this.transform(Pt,Nt,Tt,pt,bt,St),this.transform(Rt,Nt,zt,Yt,bt,St);for(var ur=0;ur<bt;ur++){var cr=Tt[ur]*zt[ur]-pt[ur]*Yt[ur];pt[ur]=Tt[ur]*Yt[ur]+pt[ur]*zt[ur],Tt[ur]=cr}return this.conjugate(Tt,pt,bt),this.transform(Tt,pt,ir,Nt,bt,St),this.conjugate(ir,Nt,bt),this.normalize13b(ir,bt),gt.negative=lt.negative^mt.negative,gt.length=lt.length+mt.length,gt.strip()},rt.prototype.mul=function(lt){var mt=new rt(null);return mt.words=new Array(this.length+lt.length),this.mulTo(lt,mt)},rt.prototype.mulf=function(lt){var mt=new rt(null);return mt.words=new Array(this.length+lt.length),Et(this,lt,mt)},rt.prototype.imul=function(lt){return this.clone().mulTo(lt,this)},rt.prototype.imuln=function(lt){et(typeof lt=="number"),et(lt<67108864);for(var mt=0,gt=0;gt<this.length;gt++){var bt=(this.words[gt]|0)*lt,St=(bt&67108863)+(mt&67108863);mt>>=26,mt+=bt/67108864|0,mt+=St>>>26,this.words[gt]=St&67108863}return mt!==0&&(this.words[gt]=mt,this.length++),this},rt.prototype.muln=function(lt){return this.clone().imuln(lt)},rt.prototype.sqr=function(){return this.mul(this)},rt.prototype.isqr=function(){return this.imul(this.clone())},rt.prototype.pow=function(lt){var mt=yt(lt);if(mt.length===0)return new rt(1);for(var gt=this,bt=0;bt<mt.length&&mt[bt]===0;bt++,gt=gt.sqr());if(++bt<mt.length)for(var St=gt.sqr();bt<mt.length;bt++,St=St.sqr())mt[bt]!==0&&(gt=gt.mul(St));return gt},rt.prototype.iushln=function(lt){et(typeof lt=="number"&&lt>=0);var mt=lt%26,gt=(lt-mt)/26,bt=67108863>>>26-mt<<26-mt,St;if(mt!==0){var Nt=0;for(St=0;St<this.length;St++){var Pt=this.words[St]&bt,Tt=(this.words[St]|0)-Pt<<mt;this.words[St]=Tt|Nt,Nt=Pt>>>26-mt}Nt&&(this.words[St]=Nt,this.length++)}if(gt!==0){for(St=this.length-1;St>=0;St--)this.words[St+gt]=this.words[St];for(St=0;St<gt;St++)this.words[St]=0;this.length+=gt}return this.strip()},rt.prototype.ishln=function(lt){return et(this.negative===0),this.iushln(lt)},rt.prototype.iushrn=function(lt,mt,gt){et(typeof lt=="number"&&lt>=0);var bt;mt?bt=(mt-mt%26)/26:bt=0;var St=lt%26,Nt=Math.min((lt-St)/26,this.length),Pt=67108863^67108863>>>St<<St,Tt=gt;if(bt-=Nt,bt=Math.max(0,bt),Tt){for(var pt=0;pt<Nt;pt++)Tt.words[pt]=this.words[pt];Tt.length=Nt}if(Nt!==0)if(this.length>Nt)for(this.length-=Nt,pt=0;pt<this.length;pt++)this.words[pt]=this.words[pt+Nt];else this.words[0]=0,this.length=1;var Rt=0;for(pt=this.length-1;pt>=0&&(Rt!==0||pt>=bt);pt--){var zt=this.words[pt]|0;this.words[pt]=Rt<<26-St|zt>>>St,Rt=zt&Pt}return Tt&&Rt!==0&&(Tt.words[Tt.length++]=Rt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},rt.prototype.ishrn=function(lt,mt,gt){return et(this.negative===0),this.iushrn(lt,mt,gt)},rt.prototype.shln=function(lt){return this.clone().ishln(lt)},rt.prototype.ushln=function(lt){return this.clone().iushln(lt)},rt.prototype.shrn=function(lt){return this.clone().ishrn(lt)},rt.prototype.ushrn=function(lt){return this.clone().iushrn(lt)},rt.prototype.testn=function(lt){et(typeof lt=="number"&&lt>=0);var mt=lt%26,gt=(lt-mt)/26,bt=1<<mt;if(this.length<=gt)return!1;var St=this.words[gt];return!!(St&bt)},rt.prototype.imaskn=function(lt){et(typeof lt=="number"&&lt>=0);var mt=lt%26,gt=(lt-mt)/26;if(et(this.negative===0,"imaskn works only with positive numbers"),this.length<=gt)return this;if(mt!==0&&gt++,this.length=Math.min(gt,this.length),mt!==0){var bt=67108863^67108863>>>mt<<mt;this.words[this.length-1]&=bt}return this.strip()},rt.prototype.maskn=function(lt){return this.clone().imaskn(lt)},rt.prototype.iaddn=function(lt){return et(typeof lt=="number"),et(lt<67108864),lt<0?this.isubn(-lt):this.negative!==0?this.length===1&&(this.words[0]|0)<lt?(this.words[0]=lt-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(lt),this.negative=1,this):this._iaddn(lt)},rt.prototype._iaddn=function(lt){this.words[0]+=lt;for(var mt=0;mt<this.length&&this.words[mt]>=67108864;mt++)this.words[mt]-=67108864,mt===this.length-1?this.words[mt+1]=1:this.words[mt+1]++;return this.length=Math.max(this.length,mt+1),this},rt.prototype.isubn=function(lt){if(et(typeof lt=="number"),et(lt<67108864),lt<0)return this.iaddn(-lt);if(this.negative!==0)return this.negative=0,this.iaddn(lt),this.negative=1,this;if(this.words[0]-=lt,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var mt=0;mt<this.length&&this.words[mt]<0;mt++)this.words[mt]+=67108864,this.words[mt+1]-=1;return this.strip()},rt.prototype.addn=function(lt){return this.clone().iaddn(lt)},rt.prototype.subn=function(lt){return this.clone().isubn(lt)},rt.prototype.iabs=function(){return this.negative=0,this},rt.prototype.abs=function(){return this.clone().iabs()},rt.prototype._ishlnsubmul=function(lt,mt,gt){var bt=lt.length+gt,St;this._expand(bt);var Nt,Pt=0;for(St=0;St<lt.length;St++){Nt=(this.words[St+gt]|0)+Pt;var Tt=(lt.words[St]|0)*mt;Nt-=Tt&67108863,Pt=(Nt>>26)-(Tt/67108864|0),this.words[St+gt]=Nt&67108863}for(;St<this.length-gt;St++)Nt=(this.words[St+gt]|0)+Pt,Pt=Nt>>26,this.words[St+gt]=Nt&67108863;if(Pt===0)return this.strip();for(et(Pt===-1),Pt=0,St=0;St<this.length;St++)Nt=-(this.words[St]|0)+Pt,Pt=Nt>>26,this.words[St]=Nt&67108863;return this.negative=1,this.strip()},rt.prototype._wordDiv=function(lt,mt){var gt=this.length-lt.length,bt=this.clone(),St=lt,Nt=St.words[St.length-1]|0,Pt=this._countBits(Nt);gt=26-Pt,gt!==0&&(St=St.ushln(gt),bt.iushln(gt),Nt=St.words[St.length-1]|0);var Tt=bt.length-St.length,pt;if(mt!=="mod"){pt=new rt(null),pt.length=Tt+1,pt.words=new Array(pt.length);for(var Rt=0;Rt<pt.length;Rt++)pt.words[Rt]=0}var zt=bt.clone()._ishlnsubmul(St,1,Tt);zt.negative===0&&(bt=zt,pt&&(pt.words[Tt]=1));for(var Yt=Tt-1;Yt>=0;Yt--){var ir=(bt.words[St.length+Yt]|0)*67108864+(bt.words[St.length+Yt-1]|0);for(ir=Math.min(ir/Nt|0,67108863),bt._ishlnsubmul(St,ir,Yt);bt.negative!==0;)ir--,bt.negative=0,bt._ishlnsubmul(St,1,Yt),bt.isZero()||(bt.negative^=1);pt&&(pt.words[Yt]=ir)}return pt&&pt.strip(),bt.strip(),mt!=="div"&&gt!==0&&bt.iushrn(gt),{div:pt||null,mod:bt}},rt.prototype.divmod=function(lt,mt,gt){if(et(!lt.isZero()),this.isZero())return{div:new rt(0),mod:new rt(0)};var bt,St,Nt;return this.negative!==0&&lt.negative===0?(Nt=this.neg().divmod(lt,mt),mt!=="mod"&&(bt=Nt.div.neg()),mt!=="div"&&(St=Nt.mod.neg(),gt&&St.negative!==0&&St.iadd(lt)),{div:bt,mod:St}):this.negative===0&&lt.negative!==0?(Nt=this.divmod(lt.neg(),mt),mt!=="mod"&&(bt=Nt.div.neg()),{div:bt,mod:Nt.mod}):this.negative&lt.negative?(Nt=this.neg().divmod(lt.neg(),mt),mt!=="div"&&(St=Nt.mod.neg(),gt&&St.negative!==0&&St.isub(lt)),{div:Nt.div,mod:St}):lt.length>this.length||this.cmp(lt)<0?{div:new rt(0),mod:this}:lt.length===1?mt==="div"?{div:this.divn(lt.words[0]),mod:null}:mt==="mod"?{div:null,mod:new rt(this.modn(lt.words[0]))}:{div:this.divn(lt.words[0]),mod:new rt(this.modn(lt.words[0]))}:this._wordDiv(lt,mt)},rt.prototype.div=function(lt){return this.divmod(lt,"div",!1).div},rt.prototype.mod=function(lt){return this.divmod(lt,"mod",!1).mod},rt.prototype.umod=function(lt){return this.divmod(lt,"mod",!0).mod},rt.prototype.divRound=function(lt){var mt=this.divmod(lt);if(mt.mod.isZero())return mt.div;var gt=mt.div.negative!==0?mt.mod.isub(lt):mt.mod,bt=lt.ushrn(1),St=lt.andln(1),Nt=gt.cmp(bt);return Nt<0||St===1&&Nt===0?mt.div:mt.div.negative!==0?mt.div.isubn(1):mt.div.iaddn(1)},rt.prototype.modn=function(lt){et(lt<=67108863);for(var mt=(1<<26)%lt,gt=0,bt=this.length-1;bt>=0;bt--)gt=(mt*gt+(this.words[bt]|0))%lt;return gt},rt.prototype.idivn=function(lt){et(lt<=67108863);for(var mt=0,gt=this.length-1;gt>=0;gt--){var bt=(this.words[gt]|0)+mt*67108864;this.words[gt]=bt/lt|0,mt=bt%lt}return this.strip()},rt.prototype.divn=function(lt){return this.clone().idivn(lt)},rt.prototype.egcd=function(lt){et(lt.negative===0),et(!lt.isZero());var mt=this,gt=lt.clone();mt.negative!==0?mt=mt.umod(lt):mt=mt.clone();for(var bt=new rt(1),St=new rt(0),Nt=new rt(0),Pt=new rt(1),Tt=0;mt.isEven()&&gt.isEven();)mt.iushrn(1),gt.iushrn(1),++Tt;for(var pt=gt.clone(),Rt=mt.clone();!mt.isZero();){for(var zt=0,Yt=1;!(mt.words[0]&Yt)&&zt<26;++zt,Yt<<=1);if(zt>0)for(mt.iushrn(zt);zt-- >0;)(bt.isOdd()||St.isOdd())&&(bt.iadd(pt),St.isub(Rt)),bt.iushrn(1),St.iushrn(1);for(var ir=0,ur=1;!(gt.words[0]&ur)&&ir<26;++ir,ur<<=1);if(ir>0)for(gt.iushrn(ir);ir-- >0;)(Nt.isOdd()||Pt.isOdd())&&(Nt.iadd(pt),Pt.isub(Rt)),Nt.iushrn(1),Pt.iushrn(1);mt.cmp(gt)>=0?(mt.isub(gt),bt.isub(Nt),St.isub(Pt)):(gt.isub(mt),Nt.isub(bt),Pt.isub(St))}return{a:Nt,b:Pt,gcd:gt.iushln(Tt)}},rt.prototype._invmp=function(lt){et(lt.negative===0),et(!lt.isZero());var mt=this,gt=lt.clone();mt.negative!==0?mt=mt.umod(lt):mt=mt.clone();for(var bt=new rt(1),St=new rt(0),Nt=gt.clone();mt.cmpn(1)>0&&gt.cmpn(1)>0;){for(var Pt=0,Tt=1;!(mt.words[0]&Tt)&&Pt<26;++Pt,Tt<<=1);if(Pt>0)for(mt.iushrn(Pt);Pt-- >0;)bt.isOdd()&&bt.iadd(Nt),bt.iushrn(1);for(var pt=0,Rt=1;!(gt.words[0]&Rt)&&pt<26;++pt,Rt<<=1);if(pt>0)for(gt.iushrn(pt);pt-- >0;)St.isOdd()&&St.iadd(Nt),St.iushrn(1);mt.cmp(gt)>=0?(mt.isub(gt),bt.isub(St)):(gt.isub(mt),St.isub(bt))}var zt;return mt.cmpn(1)===0?zt=bt:zt=St,zt.cmpn(0)<0&&zt.iadd(lt),zt},rt.prototype.gcd=function(lt){if(this.isZero())return lt.abs();if(lt.isZero())return this.abs();var mt=this.clone(),gt=lt.clone();mt.negative=0,gt.negative=0;for(var bt=0;mt.isEven()&&gt.isEven();bt++)mt.iushrn(1),gt.iushrn(1);do{for(;mt.isEven();)mt.iushrn(1);for(;gt.isEven();)gt.iushrn(1);var St=mt.cmp(gt);if(St<0){var Nt=mt;mt=gt,gt=Nt}else if(St===0||gt.cmpn(1)===0)break;mt.isub(gt)}while(!0);return gt.iushln(bt)},rt.prototype.invm=function(lt){return this.egcd(lt).a.umod(lt)},rt.prototype.isEven=function(){return(this.words[0]&1)===0},rt.prototype.isOdd=function(){return(this.words[0]&1)===1},rt.prototype.andln=function(lt){return this.words[0]&lt},rt.prototype.bincn=function(lt){et(typeof lt=="number");var mt=lt%26,gt=(lt-mt)/26,bt=1<<mt;if(this.length<=gt)return this._expand(gt+1),this.words[gt]|=bt,this;for(var St=bt,Nt=gt;St!==0&&Nt<this.length;Nt++){var Pt=this.words[Nt]|0;Pt+=St,St=Pt>>>26,Pt&=67108863,this.words[Nt]=Pt}return St!==0&&(this.words[Nt]=St,this.length++),this},rt.prototype.isZero=function(){return this.length===1&&this.words[0]===0},rt.prototype.cmpn=function(lt){var mt=lt<0;if(this.negative!==0&&!mt)return-1;if(this.negative===0&&mt)return 1;this.strip();var gt;if(this.length>1)gt=1;else{mt&&(lt=-lt),et(lt<=67108863,"Number is too big");var bt=this.words[0]|0;gt=bt===lt?0:bt<lt?-1:1}return this.negative!==0?-gt|0:gt},rt.prototype.cmp=function(lt){if(this.negative!==0&&lt.negative===0)return-1;if(this.negative===0&&lt.negative!==0)return 1;var mt=this.ucmp(lt);return this.negative!==0?-mt|0:mt},rt.prototype.ucmp=function(lt){if(this.length>lt.length)return 1;if(this.length<lt.length)return-1;for(var mt=0,gt=this.length-1;gt>=0;gt--){var bt=this.words[gt]|0,St=lt.words[gt]|0;if(bt!==St){bt<St?mt=-1:bt>St&&(mt=1);break}}return mt},rt.prototype.gtn=function(lt){return this.cmpn(lt)===1},rt.prototype.gt=function(lt){return this.cmp(lt)===1},rt.prototype.gten=function(lt){return this.cmpn(lt)>=0},rt.prototype.gte=function(lt){return this.cmp(lt)>=0},rt.prototype.ltn=function(lt){return this.cmpn(lt)===-1},rt.prototype.lt=function(lt){return this.cmp(lt)===-1},rt.prototype.lten=function(lt){return this.cmpn(lt)<=0},rt.prototype.lte=function(lt){return this.cmp(lt)<=0},rt.prototype.eqn=function(lt){return this.cmpn(lt)===0},rt.prototype.eq=function(lt){return this.cmp(lt)===0},rt.red=function(lt){return new tr(lt)},rt.prototype.toRed=function(lt){return et(!this.red,"Already a number in reduction context"),et(this.negative===0,"red works only with positives"),lt.convertTo(this)._forceRed(lt)},rt.prototype.fromRed=function(){return et(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},rt.prototype._forceRed=function(lt){return this.red=lt,this},rt.prototype.forceRed=function(lt){return et(!this.red,"Already a number in reduction context"),this._forceRed(lt)},rt.prototype.redAdd=function(lt){return et(this.red,"redAdd works only with red numbers"),this.red.add(this,lt)},rt.prototype.redIAdd=function(lt){return et(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,lt)},rt.prototype.redSub=function(lt){return et(this.red,"redSub works only with red numbers"),this.red.sub(this,lt)},rt.prototype.redISub=function(lt){return et(this.red,"redISub works only with red numbers"),this.red.isub(this,lt)},rt.prototype.redShl=function(lt){return et(this.red,"redShl works only with red numbers"),this.red.shl(this,lt)},rt.prototype.redMul=function(lt){return et(this.red,"redMul works only with red numbers"),this.red._verify2(this,lt),this.red.mul(this,lt)},rt.prototype.redIMul=function(lt){return et(this.red,"redMul works only with red numbers"),this.red._verify2(this,lt),this.red.imul(this,lt)},rt.prototype.redSqr=function(){return et(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},rt.prototype.redISqr=function(){return et(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},rt.prototype.redSqrt=function(){return et(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},rt.prototype.redInvm=function(){return et(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},rt.prototype.redNeg=function(){return et(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},rt.prototype.redPow=function(lt){return et(this.red&&!lt.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,lt)};var jt={k256:null,p224:null,p192:null,p25519:null};function kt(Mt,lt){this.name=Mt,this.p=new rt(lt,16),this.n=this.p.bitLength(),this.k=new rt(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}kt.prototype._tmp=function(){var lt=new rt(null);return lt.words=new Array(Math.ceil(this.n/13)),lt},kt.prototype.ireduce=function(lt){var mt=lt,gt;do this.split(mt,this.tmp),mt=this.imulK(mt),mt=mt.iadd(this.tmp),gt=mt.bitLength();while(gt>this.n);var bt=gt<this.n?-1:mt.ucmp(this.p);return bt===0?(mt.words[0]=0,mt.length=1):bt>0?mt.isub(this.p):mt.strip!==void 0?mt.strip():mt._strip(),mt},kt.prototype.split=function(lt,mt){lt.iushrn(this.n,0,mt)},kt.prototype.imulK=function(lt){return lt.imul(this.k)};function Lt(){kt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}tt(Lt,kt),Lt.prototype.split=function(lt,mt){for(var gt=4194303,bt=Math.min(lt.length,9),St=0;St<bt;St++)mt.words[St]=lt.words[St];if(mt.length=bt,lt.length<=9){lt.words[0]=0,lt.length=1;return}var Nt=lt.words[9];for(mt.words[mt.length++]=Nt&gt,St=10;St<lt.length;St++){var Pt=lt.words[St]|0;lt.words[St-10]=(Pt&gt)<<4|Nt>>>22,Nt=Pt}Nt>>>=22,lt.words[St-10]=Nt,Nt===0&&lt.length>10?lt.length-=10:lt.length-=9},Lt.prototype.imulK=function(lt){lt.words[lt.length]=0,lt.words[lt.length+1]=0,lt.length+=2;for(var mt=0,gt=0;gt<lt.length;gt++){var bt=lt.words[gt]|0;mt+=bt*977,lt.words[gt]=mt&67108863,mt=bt*64+(mt/67108864|0)}return lt.words[lt.length-1]===0&&(lt.length--,lt.words[lt.length-1]===0&&lt.length--),lt};function Bt(){kt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}tt(Bt,kt);function Gt(){kt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}tt(Gt,kt);function er(){kt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}tt(er,kt),er.prototype.imulK=function(lt){for(var mt=0,gt=0;gt<lt.length;gt++){var bt=(lt.words[gt]|0)*19+mt,St=bt&67108863;bt>>>=26,lt.words[gt]=St,mt=bt}return mt!==0&&(lt.words[lt.length++]=mt),lt},rt._prime=function(lt){if(jt[lt])return jt[lt];var mt;if(lt==="k256")mt=new Lt;else if(lt==="p224")mt=new Bt;else if(lt==="p192")mt=new Gt;else if(lt==="p25519")mt=new er;else throw new Error("Unknown prime "+lt);return jt[lt]=mt,mt};function tr(Mt){if(typeof Mt=="string"){var lt=rt._prime(Mt);this.m=lt.p,this.prime=lt}else et(Mt.gtn(1),"modulus must be greater than 1"),this.m=Mt,this.prime=null}tr.prototype._verify1=function(lt){et(lt.negative===0,"red works only with positives"),et(lt.red,"red works only with red numbers")},tr.prototype._verify2=function(lt,mt){et((lt.negative|mt.negative)===0,"red works only with positives"),et(lt.red&&lt.red===mt.red,"red works only with red numbers")},tr.prototype.imod=function(lt){return this.prime?this.prime.ireduce(lt)._forceRed(this):lt.umod(this.m)._forceRed(this)},tr.prototype.neg=function(lt){return lt.isZero()?lt.clone():this.m.sub(lt)._forceRed(this)},tr.prototype.add=function(lt,mt){this._verify2(lt,mt);var gt=lt.add(mt);return gt.cmp(this.m)>=0&&gt.isub(this.m),gt._forceRed(this)},tr.prototype.iadd=function(lt,mt){this._verify2(lt,mt);var gt=lt.iadd(mt);return gt.cmp(this.m)>=0&&gt.isub(this.m),gt},tr.prototype.sub=function(lt,mt){this._verify2(lt,mt);var gt=lt.sub(mt);return gt.cmpn(0)<0&&gt.iadd(this.m),gt._forceRed(this)},tr.prototype.isub=function(lt,mt){this._verify2(lt,mt);var gt=lt.isub(mt);return gt.cmpn(0)<0&&gt.iadd(this.m),gt},tr.prototype.shl=function(lt,mt){return this._verify1(lt),this.imod(lt.ushln(mt))},tr.prototype.imul=function(lt,mt){return this._verify2(lt,mt),this.imod(lt.imul(mt))},tr.prototype.mul=function(lt,mt){return this._verify2(lt,mt),this.imod(lt.mul(mt))},tr.prototype.isqr=function(lt){return this.imul(lt,lt.clone())},tr.prototype.sqr=function(lt){return this.mul(lt,lt)},tr.prototype.sqrt=function(lt){if(lt.isZero())return lt.clone();var mt=this.m.andln(3);if(et(mt%2===1),mt===3){var gt=this.m.add(new rt(1)).iushrn(2);return this.pow(lt,gt)}for(var bt=this.m.subn(1),St=0;!bt.isZero()&&bt.andln(1)===0;)St++,bt.iushrn(1);et(!bt.isZero());var Nt=new rt(1).toRed(this),Pt=Nt.redNeg(),Tt=this.m.subn(1).iushrn(1),pt=this.m.bitLength();for(pt=new rt(2*pt*pt).toRed(this);this.pow(pt,Tt).cmp(Pt)!==0;)pt.redIAdd(Pt);for(var Rt=this.pow(pt,bt),zt=this.pow(lt,bt.addn(1).iushrn(1)),Yt=this.pow(lt,bt),ir=St;Yt.cmp(Nt)!==0;){for(var ur=Yt,cr=0;ur.cmp(Nt)!==0;cr++)ur=ur.redSqr();et(cr<ir);var rr=this.pow(Rt,new rt(1).iushln(ir-cr-1));zt=zt.redMul(rr),Rt=rr.redSqr(),Yt=Yt.redMul(Rt),ir=cr}return zt},tr.prototype.invm=function(lt){var mt=lt._invmp(this.m);return mt.negative!==0?(mt.negative=0,this.imod(mt).redNeg()):this.imod(mt)},tr.prototype.pow=function(lt,mt){if(mt.isZero())return new rt(1).toRed(this);if(mt.cmpn(1)===0)return lt.clone();var gt=4,bt=new Array(1<<gt);bt[0]=new rt(1).toRed(this),bt[1]=lt;for(var St=2;St<bt.length;St++)bt[St]=this.mul(bt[St-1],lt);var Nt=bt[0],Pt=0,Tt=0,pt=mt.bitLength()%26;for(pt===0&&(pt=26),St=mt.length-1;St>=0;St--){for(var Rt=mt.words[St],zt=pt-1;zt>=0;zt--){var Yt=Rt>>zt&1;if(Nt!==bt[0]&&(Nt=this.sqr(Nt)),Yt===0&&Pt===0){Tt=0;continue}Pt<<=1,Pt|=Yt,Tt++,!(Tt!==gt&&(St!==0||zt!==0))&&(Nt=this.mul(Nt,bt[Pt]),Tt=0,Pt=0)}pt=26}return Nt},tr.prototype.convertTo=function(lt){var mt=lt.umod(this.m);return mt===lt?mt.clone():mt},tr.prototype.convertFrom=function(lt){var mt=lt.clone();return mt.red=null,mt},rt.mont=function(lt){return new ar(lt)};function ar(Mt){tr.call(this,Mt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new rt(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}tt(ar,tr),ar.prototype.convertTo=function(lt){return this.imod(lt.ushln(this.shift))},ar.prototype.convertFrom=function(lt){var mt=this.imod(lt.mul(this.rinv));return mt.red=null,mt},ar.prototype.imul=function(lt,mt){if(lt.isZero()||mt.isZero())return lt.words[0]=0,lt.length=1,lt;var gt=lt.imul(mt),bt=gt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),St=gt.isub(bt).iushrn(this.shift),Nt=St;return St.cmp(this.m)>=0?Nt=St.isub(this.m):St.cmpn(0)<0&&(Nt=St.iadd(this.m)),Nt._forceRed(this)},ar.prototype.mul=function(lt,mt){if(lt.isZero()||mt.isZero())return new rt(0)._forceRed(this);var gt=lt.mul(mt),bt=gt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),St=gt.isub(bt).iushrn(this.shift),Nt=St;return St.cmp(this.m)>=0?Nt=St.isub(this.m):St.cmpn(0)<0&&(Nt=St.iadd(this.m)),Nt._forceRed(this)},ar.prototype.invm=function(lt){var mt=this.imod(lt._invmp(this.m).mul(this.r2));return mt._forceRed(this)}})(_,commonjsGlobal)}(bn$3)),bn$3.exports}var utils$1={},hasRequiredUtils$2;function requireUtils$2(){return hasRequiredUtils$2||(hasRequiredUtils$2=1,function(_){var $=_;function _e(rt,nt){if(Array.isArray(rt))return rt.slice();if(!rt)return[];var it=[];if(typeof rt!="string"){for(var st=0;st<rt.length;st++)it[st]=rt[st]|0;return it}if(nt==="hex"){rt=rt.replace(/[^a-z0-9]+/ig,""),rt.length%2!==0&&(rt="0"+rt);for(var st=0;st<rt.length;st+=2)it.push(parseInt(rt[st]+rt[st+1],16))}else for(var st=0;st<rt.length;st++){var at=rt.charCodeAt(st),ot=at>>8,dt=at&255;ot?it.push(ot,dt):it.push(dt)}return it}$.toArray=_e;function et(rt){return rt.length===1?"0"+rt:rt}$.zero2=et;function tt(rt){for(var nt="",it=0;it<rt.length;it++)nt+=et(rt[it].toString(16));return nt}$.toHex=tt,$.encode=function(nt,it){return it==="hex"?tt(nt):nt}}(utils$1)),utils$1}var hasRequiredUtils$1;function requireUtils$1(){return hasRequiredUtils$1||(hasRequiredUtils$1=1,function(_){var $=_,_e=requireBn$3(),et=requireMinimalisticAssert(),tt=requireUtils$2();$.assert=et,$.toArray=tt.toArray,$.zero2=tt.zero2,$.toHex=tt.toHex,$.encode=tt.encode;function rt(ot,dt,ht){var yt=new Array(Math.max(ot.bitLength(),ht)+1),vt;for(vt=0;vt<yt.length;vt+=1)yt[vt]=0;var xt=1<<dt+1,wt=ot.clone();for(vt=0;vt<yt.length;vt++){var Et,At=wt.andln(xt-1);wt.isOdd()?(At>(xt>>1)-1?Et=(xt>>1)-At:Et=At,wt.isubn(Et)):Et=0,yt[vt]=Et,wt.iushrn(1)}return yt}$.getNAF=rt;function nt(ot,dt){var ht=[[],[]];ot=ot.clone(),dt=dt.clone();for(var yt=0,vt=0,xt;ot.cmpn(-yt)>0||dt.cmpn(-vt)>0;){var wt=ot.andln(3)+yt&3,Et=dt.andln(3)+vt&3;wt===3&&(wt=-1),Et===3&&(Et=-1);var At;wt&1?(xt=ot.andln(7)+yt&7,(xt===3||xt===5)&&Et===2?At=-wt:At=wt):At=0,ht[0].push(At);var jt;Et&1?(xt=dt.andln(7)+vt&7,(xt===3||xt===5)&&wt===2?jt=-Et:jt=Et):jt=0,ht[1].push(jt),2*yt===At+1&&(yt=1-yt),2*vt===jt+1&&(vt=1-vt),ot.iushrn(1),dt.iushrn(1)}return ht}$.getJSF=nt;function it(ot,dt,ht){var yt="_"+dt;ot.prototype[dt]=function(){return this[yt]!==void 0?this[yt]:this[yt]=ht.call(this)}}$.cachedProperty=it;function st(ot){return typeof ot=="string"?$.toArray(ot,"hex"):ot}$.parseBytes=st;function at(ot){return new _e(ot,"hex","le")}$.intFromLE=at}(utils$2)),utils$2}var curve={},base$1,hasRequiredBase$1;function requireBase$1(){if(hasRequiredBase$1)return base$1;hasRequiredBase$1=1;var _=requireBn$3(),$=requireUtils$1(),_e=$.getNAF,et=$.getJSF,tt=$.assert;function rt(it,st){this.type=it,this.p=new _(st.p,16),this.red=st.prime?_.red(st.prime):_.mont(this.p),this.zero=new _(0).toRed(this.red),this.one=new _(1).toRed(this.red),this.two=new _(2).toRed(this.red),this.n=st.n&&new _(st.n,16),this.g=st.g&&this.pointFromJSON(st.g,st.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var at=this.n&&this.p.div(this.n);!at||at.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}base$1=rt,rt.prototype.point=function(){throw new Error("Not implemented")},rt.prototype.validate=function(){throw new Error("Not implemented")},rt.prototype._fixedNafMul=function(st,at){tt(st.precomputed);var ot=st._getDoubles(),dt=_e(at,1,this._bitLength),ht=(1<<ot.step+1)-(ot.step%2===0?2:1);ht/=3;var yt=[],vt,xt;for(vt=0;vt<dt.length;vt+=ot.step){xt=0;for(var wt=vt+ot.step-1;wt>=vt;wt--)xt=(xt<<1)+dt[wt];yt.push(xt)}for(var Et=this.jpoint(null,null,null),At=this.jpoint(null,null,null),jt=ht;jt>0;jt--){for(vt=0;vt<yt.length;vt++)xt=yt[vt],xt===jt?At=At.mixedAdd(ot.points[vt]):xt===-jt&&(At=At.mixedAdd(ot.points[vt].neg()));Et=Et.add(At)}return Et.toP()},rt.prototype._wnafMul=function(st,at){var ot=4,dt=st._getNAFPoints(ot);ot=dt.wnd;for(var ht=dt.points,yt=_e(at,ot,this._bitLength),vt=this.jpoint(null,null,null),xt=yt.length-1;xt>=0;xt--){for(var wt=0;xt>=0&&yt[xt]===0;xt--)wt++;if(xt>=0&&wt++,vt=vt.dblp(wt),xt<0)break;var Et=yt[xt];tt(Et!==0),st.type==="affine"?Et>0?vt=vt.mixedAdd(ht[Et-1>>1]):vt=vt.mixedAdd(ht[-Et-1>>1].neg()):Et>0?vt=vt.add(ht[Et-1>>1]):vt=vt.add(ht[-Et-1>>1].neg())}return st.type==="affine"?vt.toP():vt},rt.prototype._wnafMulAdd=function(st,at,ot,dt,ht){var yt=this._wnafT1,vt=this._wnafT2,xt=this._wnafT3,wt=0,Et,At,jt;for(Et=0;Et<dt;Et++){jt=at[Et];var kt=jt._getNAFPoints(st);yt[Et]=kt.wnd,vt[Et]=kt.points}for(Et=dt-1;Et>=1;Et-=2){var Lt=Et-1,Bt=Et;if(yt[Lt]!==1||yt[Bt]!==1){xt[Lt]=_e(ot[Lt],yt[Lt],this._bitLength),xt[Bt]=_e(ot[Bt],yt[Bt],this._bitLength),wt=Math.max(xt[Lt].length,wt),wt=Math.max(xt[Bt].length,wt);continue}var Gt=[at[Lt],null,null,at[Bt]];at[Lt].y.cmp(at[Bt].y)===0?(Gt[1]=at[Lt].add(at[Bt]),Gt[2]=at[Lt].toJ().mixedAdd(at[Bt].neg())):at[Lt].y.cmp(at[Bt].y.redNeg())===0?(Gt[1]=at[Lt].toJ().mixedAdd(at[Bt]),Gt[2]=at[Lt].add(at[Bt].neg())):(Gt[1]=at[Lt].toJ().mixedAdd(at[Bt]),Gt[2]=at[Lt].toJ().mixedAdd(at[Bt].neg()));var er=[-3,-1,-5,-7,0,7,5,1,3],tr=et(ot[Lt],ot[Bt]);for(wt=Math.max(tr[0].length,wt),xt[Lt]=new Array(wt),xt[Bt]=new Array(wt),At=0;At<wt;At++){var ar=tr[0][At]|0,Mt=tr[1][At]|0;xt[Lt][At]=er[(ar+1)*3+(Mt+1)],xt[Bt][At]=0,vt[Lt]=Gt}}var lt=this.jpoint(null,null,null),mt=this._wnafT4;for(Et=wt;Et>=0;Et--){for(var gt=0;Et>=0;){var bt=!0;for(At=0;At<dt;At++)mt[At]=xt[At][Et]|0,mt[At]!==0&&(bt=!1);if(!bt)break;gt++,Et--}if(Et>=0&&gt++,lt=lt.dblp(gt),Et<0)break;for(At=0;At<dt;At++){var St=mt[At];St!==0&&(St>0?jt=vt[At][St-1>>1]:St<0&&(jt=vt[At][-St-1>>1].neg()),jt.type==="affine"?lt=lt.mixedAdd(jt):lt=lt.add(jt))}}for(Et=0;Et<dt;Et++)vt[Et]=null;return ht?lt:lt.toP()};function nt(it,st){this.curve=it,this.type=st,this.precomputed=null}return rt.BasePoint=nt,nt.prototype.eq=function(){throw new Error("Not implemented")},nt.prototype.validate=function(){return this.curve.validate(this)},rt.prototype.decodePoint=function(st,at){st=$.toArray(st,at);var ot=this.p.byteLength();if((st[0]===4||st[0]===6||st[0]===7)&&st.length-1===2*ot){st[0]===6?tt(st[st.length-1]%2===0):st[0]===7&&tt(st[st.length-1]%2===1);var dt=this.point(st.slice(1,1+ot),st.slice(1+ot,1+2*ot));return dt}else if((st[0]===2||st[0]===3)&&st.length-1===ot)return this.pointFromX(st.slice(1,1+ot),st[0]===3);throw new Error("Unknown point format")},nt.prototype.encodeCompressed=function(st){return this.encode(st,!0)},nt.prototype._encode=function(st){var at=this.curve.p.byteLength(),ot=this.getX().toArray("be",at);return st?[this.getY().isEven()?2:3].concat(ot):[4].concat(ot,this.getY().toArray("be",at))},nt.prototype.encode=function(st,at){return $.encode(this._encode(at),st)},nt.prototype.precompute=function(st){if(this.precomputed)return this;var at={doubles:null,naf:null,beta:null};return at.naf=this._getNAFPoints(8),at.doubles=this._getDoubles(4,st),at.beta=this._getBeta(),this.precomputed=at,this},nt.prototype._hasDoubles=function(st){if(!this.precomputed)return!1;var at=this.precomputed.doubles;return at?at.points.length>=Math.ceil((st.bitLength()+1)/at.step):!1},nt.prototype._getDoubles=function(st,at){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var ot=[this],dt=this,ht=0;ht<at;ht+=st){for(var yt=0;yt<st;yt++)dt=dt.dbl();ot.push(dt)}return{step:st,points:ot}},nt.prototype._getNAFPoints=function(st){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var at=[this],ot=(1<<st)-1,dt=ot===1?null:this.dbl(),ht=1;ht<ot;ht++)at[ht]=at[ht-1].add(dt);return{wnd:st,points:at}},nt.prototype._getBeta=function(){return null},nt.prototype.dblp=function(st){for(var at=this,ot=0;ot<st;ot++)at=at.dbl();return at},base$1}var short,hasRequiredShort;function requireShort(){if(hasRequiredShort)return short;hasRequiredShort=1;var _=requireUtils$1(),$=requireBn$3(),_e=requireInherits_browser(),et=requireBase$1(),tt=_.assert;function rt(st){et.call(this,"short",st),this.a=new $(st.a,16).toRed(this.red),this.b=new $(st.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(st),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}_e(rt,et),short=rt,rt.prototype._getEndomorphism=function(at){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var ot,dt;if(at.beta)ot=new $(at.beta,16).toRed(this.red);else{var ht=this._getEndoRoots(this.p);ot=ht[0].cmp(ht[1])<0?ht[0]:ht[1],ot=ot.toRed(this.red)}if(at.lambda)dt=new $(at.lambda,16);else{var yt=this._getEndoRoots(this.n);this.g.mul(yt[0]).x.cmp(this.g.x.redMul(ot))===0?dt=yt[0]:(dt=yt[1],tt(this.g.mul(dt).x.cmp(this.g.x.redMul(ot))===0))}var vt;return at.basis?vt=at.basis.map(function(xt){return{a:new $(xt.a,16),b:new $(xt.b,16)}}):vt=this._getEndoBasis(dt),{beta:ot,lambda:dt,basis:vt}}},rt.prototype._getEndoRoots=function(at){var ot=at===this.p?this.red:$.mont(at),dt=new $(2).toRed(ot).redInvm(),ht=dt.redNeg(),yt=new $(3).toRed(ot).redNeg().redSqrt().redMul(dt),vt=ht.redAdd(yt).fromRed(),xt=ht.redSub(yt).fromRed();return[vt,xt]},rt.prototype._getEndoBasis=function(at){for(var ot=this.n.ushrn(Math.floor(this.n.bitLength()/2)),dt=at,ht=this.n.clone(),yt=new $(1),vt=new $(0),xt=new $(0),wt=new $(1),Et,At,jt,kt,Lt,Bt,Gt,er=0,tr,ar;dt.cmpn(0)!==0;){var Mt=ht.div(dt);tr=ht.sub(Mt.mul(dt)),ar=xt.sub(Mt.mul(yt));var lt=wt.sub(Mt.mul(vt));if(!jt&&tr.cmp(ot)<0)Et=Gt.neg(),At=yt,jt=tr.neg(),kt=ar;else if(jt&&++er===2)break;Gt=tr,ht=dt,dt=tr,xt=yt,yt=ar,wt=vt,vt=lt}Lt=tr.neg(),Bt=ar;var mt=jt.sqr().add(kt.sqr()),gt=Lt.sqr().add(Bt.sqr());return gt.cmp(mt)>=0&&(Lt=Et,Bt=At),jt.negative&&(jt=jt.neg(),kt=kt.neg()),Lt.negative&&(Lt=Lt.neg(),Bt=Bt.neg()),[{a:jt,b:kt},{a:Lt,b:Bt}]},rt.prototype._endoSplit=function(at){var ot=this.endo.basis,dt=ot[0],ht=ot[1],yt=ht.b.mul(at).divRound(this.n),vt=dt.b.neg().mul(at).divRound(this.n),xt=yt.mul(dt.a),wt=vt.mul(ht.a),Et=yt.mul(dt.b),At=vt.mul(ht.b),jt=at.sub(xt).sub(wt),kt=Et.add(At).neg();return{k1:jt,k2:kt}},rt.prototype.pointFromX=function(at,ot){at=new $(at,16),at.red||(at=at.toRed(this.red));var dt=at.redSqr().redMul(at).redIAdd(at.redMul(this.a)).redIAdd(this.b),ht=dt.redSqrt();if(ht.redSqr().redSub(dt).cmp(this.zero)!==0)throw new Error("invalid point");var yt=ht.fromRed().isOdd();return(ot&&!yt||!ot&&yt)&&(ht=ht.redNeg()),this.point(at,ht)},rt.prototype.validate=function(at){if(at.inf)return!0;var ot=at.x,dt=at.y,ht=this.a.redMul(ot),yt=ot.redSqr().redMul(ot).redIAdd(ht).redIAdd(this.b);return dt.redSqr().redISub(yt).cmpn(0)===0},rt.prototype._endoWnafMulAdd=function(at,ot,dt){for(var ht=this._endoWnafT1,yt=this._endoWnafT2,vt=0;vt<at.length;vt++){var xt=this._endoSplit(ot[vt]),wt=at[vt],Et=wt._getBeta();xt.k1.negative&&(xt.k1.ineg(),wt=wt.neg(!0)),xt.k2.negative&&(xt.k2.ineg(),Et=Et.neg(!0)),ht[vt*2]=wt,ht[vt*2+1]=Et,yt[vt*2]=xt.k1,yt[vt*2+1]=xt.k2}for(var At=this._wnafMulAdd(1,ht,yt,vt*2,dt),jt=0;jt<vt*2;jt++)ht[jt]=null,yt[jt]=null;return At};function nt(st,at,ot,dt){et.BasePoint.call(this,st,"affine"),at===null&&ot===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new $(at,16),this.y=new $(ot,16),dt&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}_e(nt,et.BasePoint),rt.prototype.point=function(at,ot,dt){return new nt(this,at,ot,dt)},rt.prototype.pointFromJSON=function(at,ot){return nt.fromJSON(this,at,ot)},nt.prototype._getBeta=function(){if(this.curve.endo){var at=this.precomputed;if(at&&at.beta)return at.beta;var ot=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(at){var dt=this.curve,ht=function(yt){return dt.point(yt.x.redMul(dt.endo.beta),yt.y)};at.beta=ot,ot.precomputed={beta:null,naf:at.naf&&{wnd:at.naf.wnd,points:at.naf.points.map(ht)},doubles:at.doubles&&{step:at.doubles.step,points:at.doubles.points.map(ht)}}}return ot}},nt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},nt.fromJSON=function(at,ot,dt){typeof ot=="string"&&(ot=JSON.parse(ot));var ht=at.point(ot[0],ot[1],dt);if(!ot[2])return ht;function yt(xt){return at.point(xt[0],xt[1],dt)}var vt=ot[2];return ht.precomputed={beta:null,doubles:vt.doubles&&{step:vt.doubles.step,points:[ht].concat(vt.doubles.points.map(yt))},naf:vt.naf&&{wnd:vt.naf.wnd,points:[ht].concat(vt.naf.points.map(yt))}},ht},nt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},nt.prototype.isInfinity=function(){return this.inf},nt.prototype.add=function(at){if(this.inf)return at;if(at.inf)return this;if(this.eq(at))return this.dbl();if(this.neg().eq(at))return this.curve.point(null,null);if(this.x.cmp(at.x)===0)return this.curve.point(null,null);var ot=this.y.redSub(at.y);ot.cmpn(0)!==0&&(ot=ot.redMul(this.x.redSub(at.x).redInvm()));var dt=ot.redSqr().redISub(this.x).redISub(at.x),ht=ot.redMul(this.x.redSub(dt)).redISub(this.y);return this.curve.point(dt,ht)},nt.prototype.dbl=function(){if(this.inf)return this;var at=this.y.redAdd(this.y);if(at.cmpn(0)===0)return this.curve.point(null,null);var ot=this.curve.a,dt=this.x.redSqr(),ht=at.redInvm(),yt=dt.redAdd(dt).redIAdd(dt).redIAdd(ot).redMul(ht),vt=yt.redSqr().redISub(this.x.redAdd(this.x)),xt=yt.redMul(this.x.redSub(vt)).redISub(this.y);return this.curve.point(vt,xt)},nt.prototype.getX=function(){return this.x.fromRed()},nt.prototype.getY=function(){return this.y.fromRed()},nt.prototype.mul=function(at){return at=new $(at,16),this.isInfinity()?this:this._hasDoubles(at)?this.curve._fixedNafMul(this,at):this.curve.endo?this.curve._endoWnafMulAdd([this],[at]):this.curve._wnafMul(this,at)},nt.prototype.mulAdd=function(at,ot,dt){var ht=[this,ot],yt=[at,dt];return this.curve.endo?this.curve._endoWnafMulAdd(ht,yt):this.curve._wnafMulAdd(1,ht,yt,2)},nt.prototype.jmulAdd=function(at,ot,dt){var ht=[this,ot],yt=[at,dt];return this.curve.endo?this.curve._endoWnafMulAdd(ht,yt,!0):this.curve._wnafMulAdd(1,ht,yt,2,!0)},nt.prototype.eq=function(at){return this===at||this.inf===at.inf&&(this.inf||this.x.cmp(at.x)===0&&this.y.cmp(at.y)===0)},nt.prototype.neg=function(at){if(this.inf)return this;var ot=this.curve.point(this.x,this.y.redNeg());if(at&&this.precomputed){var dt=this.precomputed,ht=function(yt){return yt.neg()};ot.precomputed={naf:dt.naf&&{wnd:dt.naf.wnd,points:dt.naf.points.map(ht)},doubles:dt.doubles&&{step:dt.doubles.step,points:dt.doubles.points.map(ht)}}}return ot},nt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var at=this.curve.jpoint(this.x,this.y,this.curve.one);return at};function it(st,at,ot,dt){et.BasePoint.call(this,st,"jacobian"),at===null&&ot===null&&dt===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new $(0)):(this.x=new $(at,16),this.y=new $(ot,16),this.z=new $(dt,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return _e(it,et.BasePoint),rt.prototype.jpoint=function(at,ot,dt){return new it(this,at,ot,dt)},it.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var at=this.z.redInvm(),ot=at.redSqr(),dt=this.x.redMul(ot),ht=this.y.redMul(ot).redMul(at);return this.curve.point(dt,ht)},it.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},it.prototype.add=function(at){if(this.isInfinity())return at;if(at.isInfinity())return this;var ot=at.z.redSqr(),dt=this.z.redSqr(),ht=this.x.redMul(ot),yt=at.x.redMul(dt),vt=this.y.redMul(ot.redMul(at.z)),xt=at.y.redMul(dt.redMul(this.z)),wt=ht.redSub(yt),Et=vt.redSub(xt);if(wt.cmpn(0)===0)return Et.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var At=wt.redSqr(),jt=At.redMul(wt),kt=ht.redMul(At),Lt=Et.redSqr().redIAdd(jt).redISub(kt).redISub(kt),Bt=Et.redMul(kt.redISub(Lt)).redISub(vt.redMul(jt)),Gt=this.z.redMul(at.z).redMul(wt);return this.curve.jpoint(Lt,Bt,Gt)},it.prototype.mixedAdd=function(at){if(this.isInfinity())return at.toJ();if(at.isInfinity())return this;var ot=this.z.redSqr(),dt=this.x,ht=at.x.redMul(ot),yt=this.y,vt=at.y.redMul(ot).redMul(this.z),xt=dt.redSub(ht),wt=yt.redSub(vt);if(xt.cmpn(0)===0)return wt.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var Et=xt.redSqr(),At=Et.redMul(xt),jt=dt.redMul(Et),kt=wt.redSqr().redIAdd(At).redISub(jt).redISub(jt),Lt=wt.redMul(jt.redISub(kt)).redISub(yt.redMul(At)),Bt=this.z.redMul(xt);return this.curve.jpoint(kt,Lt,Bt)},it.prototype.dblp=function(at){if(at===0)return this;if(this.isInfinity())return this;if(!at)return this.dbl();var ot;if(this.curve.zeroA||this.curve.threeA){var dt=this;for(ot=0;ot<at;ot++)dt=dt.dbl();return dt}var ht=this.curve.a,yt=this.curve.tinv,vt=this.x,xt=this.y,wt=this.z,Et=wt.redSqr().redSqr(),At=xt.redAdd(xt);for(ot=0;ot<at;ot++){var jt=vt.redSqr(),kt=At.redSqr(),Lt=kt.redSqr(),Bt=jt.redAdd(jt).redIAdd(jt).redIAdd(ht.redMul(Et)),Gt=vt.redMul(kt),er=Bt.redSqr().redISub(Gt.redAdd(Gt)),tr=Gt.redISub(er),ar=Bt.redMul(tr);ar=ar.redIAdd(ar).redISub(Lt);var Mt=At.redMul(wt);ot+1<at&&(Et=Et.redMul(Lt)),vt=er,wt=Mt,At=ar}return this.curve.jpoint(vt,At.redMul(yt),wt)},it.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},it.prototype._zeroDbl=function(){var at,ot,dt;if(this.zOne){var ht=this.x.redSqr(),yt=this.y.redSqr(),vt=yt.redSqr(),xt=this.x.redAdd(yt).redSqr().redISub(ht).redISub(vt);xt=xt.redIAdd(xt);var wt=ht.redAdd(ht).redIAdd(ht),Et=wt.redSqr().redISub(xt).redISub(xt),At=vt.redIAdd(vt);At=At.redIAdd(At),At=At.redIAdd(At),at=Et,ot=wt.redMul(xt.redISub(Et)).redISub(At),dt=this.y.redAdd(this.y)}else{var jt=this.x.redSqr(),kt=this.y.redSqr(),Lt=kt.redSqr(),Bt=this.x.redAdd(kt).redSqr().redISub(jt).redISub(Lt);Bt=Bt.redIAdd(Bt);var Gt=jt.redAdd(jt).redIAdd(jt),er=Gt.redSqr(),tr=Lt.redIAdd(Lt);tr=tr.redIAdd(tr),tr=tr.redIAdd(tr),at=er.redISub(Bt).redISub(Bt),ot=Gt.redMul(Bt.redISub(at)).redISub(tr),dt=this.y.redMul(this.z),dt=dt.redIAdd(dt)}return this.curve.jpoint(at,ot,dt)},it.prototype._threeDbl=function(){var at,ot,dt;if(this.zOne){var ht=this.x.redSqr(),yt=this.y.redSqr(),vt=yt.redSqr(),xt=this.x.redAdd(yt).redSqr().redISub(ht).redISub(vt);xt=xt.redIAdd(xt);var wt=ht.redAdd(ht).redIAdd(ht).redIAdd(this.curve.a),Et=wt.redSqr().redISub(xt).redISub(xt);at=Et;var At=vt.redIAdd(vt);At=At.redIAdd(At),At=At.redIAdd(At),ot=wt.redMul(xt.redISub(Et)).redISub(At),dt=this.y.redAdd(this.y)}else{var jt=this.z.redSqr(),kt=this.y.redSqr(),Lt=this.x.redMul(kt),Bt=this.x.redSub(jt).redMul(this.x.redAdd(jt));Bt=Bt.redAdd(Bt).redIAdd(Bt);var Gt=Lt.redIAdd(Lt);Gt=Gt.redIAdd(Gt);var er=Gt.redAdd(Gt);at=Bt.redSqr().redISub(er),dt=this.y.redAdd(this.z).redSqr().redISub(kt).redISub(jt);var tr=kt.redSqr();tr=tr.redIAdd(tr),tr=tr.redIAdd(tr),tr=tr.redIAdd(tr),ot=Bt.redMul(Gt.redISub(at)).redISub(tr)}return this.curve.jpoint(at,ot,dt)},it.prototype._dbl=function(){var at=this.curve.a,ot=this.x,dt=this.y,ht=this.z,yt=ht.redSqr().redSqr(),vt=ot.redSqr(),xt=dt.redSqr(),wt=vt.redAdd(vt).redIAdd(vt).redIAdd(at.redMul(yt)),Et=ot.redAdd(ot);Et=Et.redIAdd(Et);var At=Et.redMul(xt),jt=wt.redSqr().redISub(At.redAdd(At)),kt=At.redISub(jt),Lt=xt.redSqr();Lt=Lt.redIAdd(Lt),Lt=Lt.redIAdd(Lt),Lt=Lt.redIAdd(Lt);var Bt=wt.redMul(kt).redISub(Lt),Gt=dt.redAdd(dt).redMul(ht);return this.curve.jpoint(jt,Bt,Gt)},it.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var at=this.x.redSqr(),ot=this.y.redSqr(),dt=this.z.redSqr(),ht=ot.redSqr(),yt=at.redAdd(at).redIAdd(at),vt=yt.redSqr(),xt=this.x.redAdd(ot).redSqr().redISub(at).redISub(ht);xt=xt.redIAdd(xt),xt=xt.redAdd(xt).redIAdd(xt),xt=xt.redISub(vt);var wt=xt.redSqr(),Et=ht.redIAdd(ht);Et=Et.redIAdd(Et),Et=Et.redIAdd(Et),Et=Et.redIAdd(Et);var At=yt.redIAdd(xt).redSqr().redISub(vt).redISub(wt).redISub(Et),jt=ot.redMul(At);jt=jt.redIAdd(jt),jt=jt.redIAdd(jt);var kt=this.x.redMul(wt).redISub(jt);kt=kt.redIAdd(kt),kt=kt.redIAdd(kt);var Lt=this.y.redMul(At.redMul(Et.redISub(At)).redISub(xt.redMul(wt)));Lt=Lt.redIAdd(Lt),Lt=Lt.redIAdd(Lt),Lt=Lt.redIAdd(Lt);var Bt=this.z.redAdd(xt).redSqr().redISub(dt).redISub(wt);return this.curve.jpoint(kt,Lt,Bt)},it.prototype.mul=function(at,ot){return at=new $(at,ot),this.curve._wnafMul(this,at)},it.prototype.eq=function(at){if(at.type==="affine")return this.eq(at.toJ());if(this===at)return!0;var ot=this.z.redSqr(),dt=at.z.redSqr();if(this.x.redMul(dt).redISub(at.x.redMul(ot)).cmpn(0)!==0)return!1;var ht=ot.redMul(this.z),yt=dt.redMul(at.z);return this.y.redMul(yt).redISub(at.y.redMul(ht)).cmpn(0)===0},it.prototype.eqXToP=function(at){var ot=this.z.redSqr(),dt=at.toRed(this.curve.red).redMul(ot);if(this.x.cmp(dt)===0)return!0;for(var ht=at.clone(),yt=this.curve.redN.redMul(ot);;){if(ht.iadd(this.curve.n),ht.cmp(this.curve.p)>=0)return!1;if(dt.redIAdd(yt),this.x.cmp(dt)===0)return!0}},it.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},it.prototype.isInfinity=function(){return this.z.cmpn(0)===0},short}var mont,hasRequiredMont;function requireMont(){if(hasRequiredMont)return mont;hasRequiredMont=1;var _=requireBn$3(),$=requireInherits_browser(),_e=requireBase$1(),et=requireUtils$1();function tt(nt){_e.call(this,"mont",nt),this.a=new _(nt.a,16).toRed(this.red),this.b=new _(nt.b,16).toRed(this.red),this.i4=new _(4).toRed(this.red).redInvm(),this.two=new _(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}$(tt,_e),mont=tt,tt.prototype.validate=function(it){var st=it.normalize().x,at=st.redSqr(),ot=at.redMul(st).redAdd(at.redMul(this.a)).redAdd(st),dt=ot.redSqrt();return dt.redSqr().cmp(ot)===0};function rt(nt,it,st){_e.BasePoint.call(this,nt,"projective"),it===null&&st===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new _(it,16),this.z=new _(st,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return $(rt,_e.BasePoint),tt.prototype.decodePoint=function(it,st){return this.point(et.toArray(it,st),1)},tt.prototype.point=function(it,st){return new rt(this,it,st)},tt.prototype.pointFromJSON=function(it){return rt.fromJSON(this,it)},rt.prototype.precompute=function(){},rt.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},rt.fromJSON=function(it,st){return new rt(it,st[0],st[1]||it.one)},rt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},rt.prototype.isInfinity=function(){return this.z.cmpn(0)===0},rt.prototype.dbl=function(){var it=this.x.redAdd(this.z),st=it.redSqr(),at=this.x.redSub(this.z),ot=at.redSqr(),dt=st.redSub(ot),ht=st.redMul(ot),yt=dt.redMul(ot.redAdd(this.curve.a24.redMul(dt)));return this.curve.point(ht,yt)},rt.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},rt.prototype.diffAdd=function(it,st){var at=this.x.redAdd(this.z),ot=this.x.redSub(this.z),dt=it.x.redAdd(it.z),ht=it.x.redSub(it.z),yt=ht.redMul(at),vt=dt.redMul(ot),xt=st.z.redMul(yt.redAdd(vt).redSqr()),wt=st.x.redMul(yt.redISub(vt).redSqr());return this.curve.point(xt,wt)},rt.prototype.mul=function(it){for(var st=it.clone(),at=this,ot=this.curve.point(null,null),dt=this,ht=[];st.cmpn(0)!==0;st.iushrn(1))ht.push(st.andln(1));for(var yt=ht.length-1;yt>=0;yt--)ht[yt]===0?(at=at.diffAdd(ot,dt),ot=ot.dbl()):(ot=at.diffAdd(ot,dt),at=at.dbl());return ot},rt.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},rt.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},rt.prototype.eq=function(it){return this.getX().cmp(it.getX())===0},rt.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},rt.prototype.getX=function(){return this.normalize(),this.x.fromRed()},mont}var edwards,hasRequiredEdwards;function requireEdwards(){if(hasRequiredEdwards)return edwards;hasRequiredEdwards=1;var _=requireUtils$1(),$=requireBn$3(),_e=requireInherits_browser(),et=requireBase$1(),tt=_.assert;function rt(it){this.twisted=(it.a|0)!==1,this.mOneA=this.twisted&&(it.a|0)===-1,this.extended=this.mOneA,et.call(this,"edwards",it),this.a=new $(it.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new $(it.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new $(it.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),tt(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(it.c|0)===1}_e(rt,et),edwards=rt,rt.prototype._mulA=function(st){return this.mOneA?st.redNeg():this.a.redMul(st)},rt.prototype._mulC=function(st){return this.oneC?st:this.c.redMul(st)},rt.prototype.jpoint=function(st,at,ot,dt){return this.point(st,at,ot,dt)},rt.prototype.pointFromX=function(st,at){st=new $(st,16),st.red||(st=st.toRed(this.red));var ot=st.redSqr(),dt=this.c2.redSub(this.a.redMul(ot)),ht=this.one.redSub(this.c2.redMul(this.d).redMul(ot)),yt=dt.redMul(ht.redInvm()),vt=yt.redSqrt();if(vt.redSqr().redSub(yt).cmp(this.zero)!==0)throw new Error("invalid point");var xt=vt.fromRed().isOdd();return(at&&!xt||!at&&xt)&&(vt=vt.redNeg()),this.point(st,vt)},rt.prototype.pointFromY=function(st,at){st=new $(st,16),st.red||(st=st.toRed(this.red));var ot=st.redSqr(),dt=ot.redSub(this.c2),ht=ot.redMul(this.d).redMul(this.c2).redSub(this.a),yt=dt.redMul(ht.redInvm());if(yt.cmp(this.zero)===0){if(at)throw new Error("invalid point");return this.point(this.zero,st)}var vt=yt.redSqrt();if(vt.redSqr().redSub(yt).cmp(this.zero)!==0)throw new Error("invalid point");return vt.fromRed().isOdd()!==at&&(vt=vt.redNeg()),this.point(vt,st)},rt.prototype.validate=function(st){if(st.isInfinity())return!0;st.normalize();var at=st.x.redSqr(),ot=st.y.redSqr(),dt=at.redMul(this.a).redAdd(ot),ht=this.c2.redMul(this.one.redAdd(this.d.redMul(at).redMul(ot)));return dt.cmp(ht)===0};function nt(it,st,at,ot,dt){et.BasePoint.call(this,it,"projective"),st===null&&at===null&&ot===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new $(st,16),this.y=new $(at,16),this.z=ot?new $(ot,16):this.curve.one,this.t=dt&&new $(dt,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return _e(nt,et.BasePoint),rt.prototype.pointFromJSON=function(st){return nt.fromJSON(this,st)},rt.prototype.point=function(st,at,ot,dt){return new nt(this,st,at,ot,dt)},nt.fromJSON=function(st,at){return new nt(st,at[0],at[1],at[2])},nt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},nt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},nt.prototype._extDbl=function(){var st=this.x.redSqr(),at=this.y.redSqr(),ot=this.z.redSqr();ot=ot.redIAdd(ot);var dt=this.curve._mulA(st),ht=this.x.redAdd(this.y).redSqr().redISub(st).redISub(at),yt=dt.redAdd(at),vt=yt.redSub(ot),xt=dt.redSub(at),wt=ht.redMul(vt),Et=yt.redMul(xt),At=ht.redMul(xt),jt=vt.redMul(yt);return this.curve.point(wt,Et,jt,At)},nt.prototype._projDbl=function(){var st=this.x.redAdd(this.y).redSqr(),at=this.x.redSqr(),ot=this.y.redSqr(),dt,ht,yt,vt,xt,wt;if(this.curve.twisted){vt=this.curve._mulA(at);var Et=vt.redAdd(ot);this.zOne?(dt=st.redSub(at).redSub(ot).redMul(Et.redSub(this.curve.two)),ht=Et.redMul(vt.redSub(ot)),yt=Et.redSqr().redSub(Et).redSub(Et)):(xt=this.z.redSqr(),wt=Et.redSub(xt).redISub(xt),dt=st.redSub(at).redISub(ot).redMul(wt),ht=Et.redMul(vt.redSub(ot)),yt=Et.redMul(wt))}else vt=at.redAdd(ot),xt=this.curve._mulC(this.z).redSqr(),wt=vt.redSub(xt).redSub(xt),dt=this.curve._mulC(st.redISub(vt)).redMul(wt),ht=this.curve._mulC(vt).redMul(at.redISub(ot)),yt=vt.redMul(wt);return this.curve.point(dt,ht,yt)},nt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},nt.prototype._extAdd=function(st){var at=this.y.redSub(this.x).redMul(st.y.redSub(st.x)),ot=this.y.redAdd(this.x).redMul(st.y.redAdd(st.x)),dt=this.t.redMul(this.curve.dd).redMul(st.t),ht=this.z.redMul(st.z.redAdd(st.z)),yt=ot.redSub(at),vt=ht.redSub(dt),xt=ht.redAdd(dt),wt=ot.redAdd(at),Et=yt.redMul(vt),At=xt.redMul(wt),jt=yt.redMul(wt),kt=vt.redMul(xt);return this.curve.point(Et,At,kt,jt)},nt.prototype._projAdd=function(st){var at=this.z.redMul(st.z),ot=at.redSqr(),dt=this.x.redMul(st.x),ht=this.y.redMul(st.y),yt=this.curve.d.redMul(dt).redMul(ht),vt=ot.redSub(yt),xt=ot.redAdd(yt),wt=this.x.redAdd(this.y).redMul(st.x.redAdd(st.y)).redISub(dt).redISub(ht),Et=at.redMul(vt).redMul(wt),At,jt;return this.curve.twisted?(At=at.redMul(xt).redMul(ht.redSub(this.curve._mulA(dt))),jt=vt.redMul(xt)):(At=at.redMul(xt).redMul(ht.redSub(dt)),jt=this.curve._mulC(vt).redMul(xt)),this.curve.point(Et,At,jt)},nt.prototype.add=function(st){return this.isInfinity()?st:st.isInfinity()?this:this.curve.extended?this._extAdd(st):this._projAdd(st)},nt.prototype.mul=function(st){return this._hasDoubles(st)?this.curve._fixedNafMul(this,st):this.curve._wnafMul(this,st)},nt.prototype.mulAdd=function(st,at,ot){return this.curve._wnafMulAdd(1,[this,at],[st,ot],2,!1)},nt.prototype.jmulAdd=function(st,at,ot){return this.curve._wnafMulAdd(1,[this,at],[st,ot],2,!0)},nt.prototype.normalize=function(){if(this.zOne)return this;var st=this.z.redInvm();return this.x=this.x.redMul(st),this.y=this.y.redMul(st),this.t&&(this.t=this.t.redMul(st)),this.z=this.curve.one,this.zOne=!0,this},nt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},nt.prototype.getX=function(){return this.normalize(),this.x.fromRed()},nt.prototype.getY=function(){return this.normalize(),this.y.fromRed()},nt.prototype.eq=function(st){return this===st||this.getX().cmp(st.getX())===0&&this.getY().cmp(st.getY())===0},nt.prototype.eqXToP=function(st){var at=st.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(at)===0)return!0;for(var ot=st.clone(),dt=this.curve.redN.redMul(this.z);;){if(ot.iadd(this.curve.n),ot.cmp(this.curve.p)>=0)return!1;if(at.redIAdd(dt),this.x.cmp(at)===0)return!0}},nt.prototype.toP=nt.prototype.normalize,nt.prototype.mixedAdd=nt.prototype.add,edwards}var hasRequiredCurve;function requireCurve(){return hasRequiredCurve||(hasRequiredCurve=1,function(_){var $=_;$.base=requireBase$1(),$.short=requireShort(),$.mont=requireMont(),$.edwards=requireEdwards()}(curve)),curve}var curves={},hash={},utils={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;var _=requireMinimalisticAssert(),$=requireInherits_browser();utils.inherits=$;function _e(lt,mt){return(lt.charCodeAt(mt)&64512)!==55296||mt<0||mt+1>=lt.length?!1:(lt.charCodeAt(mt+1)&64512)===56320}function et(lt,mt){if(Array.isArray(lt))return lt.slice();if(!lt)return[];var gt=[];if(typeof lt=="string")if(mt){if(mt==="hex")for(lt=lt.replace(/[^a-z0-9]+/ig,""),lt.length%2!==0&&(lt="0"+lt),St=0;St<lt.length;St+=2)gt.push(parseInt(lt[St]+lt[St+1],16))}else for(var bt=0,St=0;St<lt.length;St++){var Nt=lt.charCodeAt(St);Nt<128?gt[bt++]=Nt:Nt<2048?(gt[bt++]=Nt>>6|192,gt[bt++]=Nt&63|128):_e(lt,St)?(Nt=65536+((Nt&1023)<<10)+(lt.charCodeAt(++St)&1023),gt[bt++]=Nt>>18|240,gt[bt++]=Nt>>12&63|128,gt[bt++]=Nt>>6&63|128,gt[bt++]=Nt&63|128):(gt[bt++]=Nt>>12|224,gt[bt++]=Nt>>6&63|128,gt[bt++]=Nt&63|128)}else for(St=0;St<lt.length;St++)gt[St]=lt[St]|0;return gt}utils.toArray=et;function tt(lt){for(var mt="",gt=0;gt<lt.length;gt++)mt+=it(lt[gt].toString(16));return mt}utils.toHex=tt;function rt(lt){var mt=lt>>>24|lt>>>8&65280|lt<<8&16711680|(lt&255)<<24;return mt>>>0}utils.htonl=rt;function nt(lt,mt){for(var gt="",bt=0;bt<lt.length;bt++){var St=lt[bt];mt==="little"&&(St=rt(St)),gt+=st(St.toString(16))}return gt}utils.toHex32=nt;function it(lt){return lt.length===1?"0"+lt:lt}utils.zero2=it;function st(lt){return lt.length===7?"0"+lt:lt.length===6?"00"+lt:lt.length===5?"000"+lt:lt.length===4?"0000"+lt:lt.length===3?"00000"+lt:lt.length===2?"000000"+lt:lt.length===1?"0000000"+lt:lt}utils.zero8=st;function at(lt,mt,gt,bt){var St=gt-mt;_(St%4===0);for(var Nt=new Array(St/4),Pt=0,Tt=mt;Pt<Nt.length;Pt++,Tt+=4){var pt;bt==="big"?pt=lt[Tt]<<24|lt[Tt+1]<<16|lt[Tt+2]<<8|lt[Tt+3]:pt=lt[Tt+3]<<24|lt[Tt+2]<<16|lt[Tt+1]<<8|lt[Tt],Nt[Pt]=pt>>>0}return Nt}utils.join32=at;function ot(lt,mt){for(var gt=new Array(lt.length*4),bt=0,St=0;bt<lt.length;bt++,St+=4){var Nt=lt[bt];mt==="big"?(gt[St]=Nt>>>24,gt[St+1]=Nt>>>16&255,gt[St+2]=Nt>>>8&255,gt[St+3]=Nt&255):(gt[St+3]=Nt>>>24,gt[St+2]=Nt>>>16&255,gt[St+1]=Nt>>>8&255,gt[St]=Nt&255)}return gt}utils.split32=ot;function dt(lt,mt){return lt>>>mt|lt<<32-mt}utils.rotr32=dt;function ht(lt,mt){return lt<<mt|lt>>>32-mt}utils.rotl32=ht;function yt(lt,mt){return lt+mt>>>0}utils.sum32=yt;function vt(lt,mt,gt){return lt+mt+gt>>>0}utils.sum32_3=vt;function xt(lt,mt,gt,bt){return lt+mt+gt+bt>>>0}utils.sum32_4=xt;function wt(lt,mt,gt,bt,St){return lt+mt+gt+bt+St>>>0}utils.sum32_5=wt;function Et(lt,mt,gt,bt){var St=lt[mt],Nt=lt[mt+1],Pt=bt+Nt>>>0,Tt=(Pt<bt?1:0)+gt+St;lt[mt]=Tt>>>0,lt[mt+1]=Pt}utils.sum64=Et;function At(lt,mt,gt,bt){var St=mt+bt>>>0,Nt=(St<mt?1:0)+lt+gt;return Nt>>>0}utils.sum64_hi=At;function jt(lt,mt,gt,bt){var St=mt+bt;return St>>>0}utils.sum64_lo=jt;function kt(lt,mt,gt,bt,St,Nt,Pt,Tt){var pt=0,Rt=mt;Rt=Rt+bt>>>0,pt+=Rt<mt?1:0,Rt=Rt+Nt>>>0,pt+=Rt<Nt?1:0,Rt=Rt+Tt>>>0,pt+=Rt<Tt?1:0;var zt=lt+gt+St+Pt+pt;return zt>>>0}utils.sum64_4_hi=kt;function Lt(lt,mt,gt,bt,St,Nt,Pt,Tt){var pt=mt+bt+Nt+Tt;return pt>>>0}utils.sum64_4_lo=Lt;function Bt(lt,mt,gt,bt,St,Nt,Pt,Tt,pt,Rt){var zt=0,Yt=mt;Yt=Yt+bt>>>0,zt+=Yt<mt?1:0,Yt=Yt+Nt>>>0,zt+=Yt<Nt?1:0,Yt=Yt+Tt>>>0,zt+=Yt<Tt?1:0,Yt=Yt+Rt>>>0,zt+=Yt<Rt?1:0;var ir=lt+gt+St+Pt+pt+zt;return ir>>>0}utils.sum64_5_hi=Bt;function Gt(lt,mt,gt,bt,St,Nt,Pt,Tt,pt,Rt){var zt=mt+bt+Nt+Tt+Rt;return zt>>>0}utils.sum64_5_lo=Gt;function er(lt,mt,gt){var bt=mt<<32-gt|lt>>>gt;return bt>>>0}utils.rotr64_hi=er;function tr(lt,mt,gt){var bt=lt<<32-gt|mt>>>gt;return bt>>>0}utils.rotr64_lo=tr;function ar(lt,mt,gt){return lt>>>gt}utils.shr64_hi=ar;function Mt(lt,mt,gt){var bt=lt<<32-gt|mt>>>gt;return bt>>>0}return utils.shr64_lo=Mt,utils}var common$1={},hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common$1;hasRequiredCommon$1=1;var _=requireUtils(),$=requireMinimalisticAssert();function _e(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return common$1.BlockHash=_e,_e.prototype.update=function(tt,rt){if(tt=_.toArray(tt,rt),this.pending?this.pending=this.pending.concat(tt):this.pending=tt,this.pendingTotal+=tt.length,this.pending.length>=this._delta8){tt=this.pending;var nt=tt.length%this._delta8;this.pending=tt.slice(tt.length-nt,tt.length),this.pending.length===0&&(this.pending=null),tt=_.join32(tt,0,tt.length-nt,this.endian);for(var it=0;it<tt.length;it+=this._delta32)this._update(tt,it,it+this._delta32)}return this},_e.prototype.digest=function(tt){return this.update(this._pad()),$(this.pending===null),this._digest(tt)},_e.prototype._pad=function(){var tt=this.pendingTotal,rt=this._delta8,nt=rt-(tt+this.padLength)%rt,it=new Array(nt+this.padLength);it[0]=128;for(var st=1;st<nt;st++)it[st]=0;if(tt<<=3,this.endian==="big"){for(var at=8;at<this.padLength;at++)it[st++]=0;it[st++]=0,it[st++]=0,it[st++]=0,it[st++]=0,it[st++]=tt>>>24&255,it[st++]=tt>>>16&255,it[st++]=tt>>>8&255,it[st++]=tt&255}else for(it[st++]=tt&255,it[st++]=tt>>>8&255,it[st++]=tt>>>16&255,it[st++]=tt>>>24&255,it[st++]=0,it[st++]=0,it[st++]=0,it[st++]=0,at=8;at<this.padLength;at++)it[st++]=0;return it},common$1}var sha={},common={},hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;var _=requireUtils(),$=_.rotr32;function _e(ot,dt,ht,yt){if(ot===0)return et(dt,ht,yt);if(ot===1||ot===3)return rt(dt,ht,yt);if(ot===2)return tt(dt,ht,yt)}common.ft_1=_e;function et(ot,dt,ht){return ot&dt^~ot&ht}common.ch32=et;function tt(ot,dt,ht){return ot&dt^ot&ht^dt&ht}common.maj32=tt;function rt(ot,dt,ht){return ot^dt^ht}common.p32=rt;function nt(ot){return $(ot,2)^$(ot,13)^$(ot,22)}common.s0_256=nt;function it(ot){return $(ot,6)^$(ot,11)^$(ot,25)}common.s1_256=it;function st(ot){return $(ot,7)^$(ot,18)^ot>>>3}common.g0_256=st;function at(ot){return $(ot,17)^$(ot,19)^ot>>>10}return common.g1_256=at,common}var _1,hasRequired_1;function require_1(){if(hasRequired_1)return _1;hasRequired_1=1;var _=requireUtils(),$=requireCommon$1(),_e=requireCommon(),et=_.rotl32,tt=_.sum32,rt=_.sum32_5,nt=_e.ft_1,it=$.BlockHash,st=[1518500249,1859775393,2400959708,3395469782];function at(){if(!(this instanceof at))return new at;it.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return _.inherits(at,it),_1=at,at.blockSize=512,at.outSize=160,at.hmacStrength=80,at.padLength=64,at.prototype._update=function(dt,ht){for(var yt=this.W,vt=0;vt<16;vt++)yt[vt]=dt[ht+vt];for(;vt<yt.length;vt++)yt[vt]=et(yt[vt-3]^yt[vt-8]^yt[vt-14]^yt[vt-16],1);var xt=this.h[0],wt=this.h[1],Et=this.h[2],At=this.h[3],jt=this.h[4];for(vt=0;vt<yt.length;vt++){var kt=~~(vt/20),Lt=rt(et(xt,5),nt(kt,wt,Et,At),jt,yt[vt],st[kt]);jt=At,At=Et,Et=et(wt,30),wt=xt,xt=Lt}this.h[0]=tt(this.h[0],xt),this.h[1]=tt(this.h[1],wt),this.h[2]=tt(this.h[2],Et),this.h[3]=tt(this.h[3],At),this.h[4]=tt(this.h[4],jt)},at.prototype._digest=function(dt){return dt==="hex"?_.toHex32(this.h,"big"):_.split32(this.h,"big")},_1}var _256,hasRequired_256;function require_256(){if(hasRequired_256)return _256;hasRequired_256=1;var _=requireUtils(),$=requireCommon$1(),_e=requireCommon(),et=requireMinimalisticAssert(),tt=_.sum32,rt=_.sum32_4,nt=_.sum32_5,it=_e.ch32,st=_e.maj32,at=_e.s0_256,ot=_e.s1_256,dt=_e.g0_256,ht=_e.g1_256,yt=$.BlockHash,vt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function xt(){if(!(this instanceof xt))return new xt;yt.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=vt,this.W=new Array(64)}return _.inherits(xt,yt),_256=xt,xt.blockSize=512,xt.outSize=256,xt.hmacStrength=192,xt.padLength=64,xt.prototype._update=function(Et,At){for(var jt=this.W,kt=0;kt<16;kt++)jt[kt]=Et[At+kt];for(;kt<jt.length;kt++)jt[kt]=rt(ht(jt[kt-2]),jt[kt-7],dt(jt[kt-15]),jt[kt-16]);var Lt=this.h[0],Bt=this.h[1],Gt=this.h[2],er=this.h[3],tr=this.h[4],ar=this.h[5],Mt=this.h[6],lt=this.h[7];for(et(this.k.length===jt.length),kt=0;kt<jt.length;kt++){var mt=nt(lt,ot(tr),it(tr,ar,Mt),this.k[kt],jt[kt]),gt=tt(at(Lt),st(Lt,Bt,Gt));lt=Mt,Mt=ar,ar=tr,tr=tt(er,mt),er=Gt,Gt=Bt,Bt=Lt,Lt=tt(mt,gt)}this.h[0]=tt(this.h[0],Lt),this.h[1]=tt(this.h[1],Bt),this.h[2]=tt(this.h[2],Gt),this.h[3]=tt(this.h[3],er),this.h[4]=tt(this.h[4],tr),this.h[5]=tt(this.h[5],ar),this.h[6]=tt(this.h[6],Mt),this.h[7]=tt(this.h[7],lt)},xt.prototype._digest=function(Et){return Et==="hex"?_.toHex32(this.h,"big"):_.split32(this.h,"big")},_256}var _224,hasRequired_224;function require_224(){if(hasRequired_224)return _224;hasRequired_224=1;var _=requireUtils(),$=require_256();function _e(){if(!(this instanceof _e))return new _e;$.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return _.inherits(_e,$),_224=_e,_e.blockSize=512,_e.outSize=224,_e.hmacStrength=192,_e.padLength=64,_e.prototype._digest=function(tt){return tt==="hex"?_.toHex32(this.h.slice(0,7),"big"):_.split32(this.h.slice(0,7),"big")},_224}var _512,hasRequired_512;function require_512(){if(hasRequired_512)return _512;hasRequired_512=1;var _=requireUtils(),$=requireCommon$1(),_e=requireMinimalisticAssert(),et=_.rotr64_hi,tt=_.rotr64_lo,rt=_.shr64_hi,nt=_.shr64_lo,it=_.sum64,st=_.sum64_hi,at=_.sum64_lo,ot=_.sum64_4_hi,dt=_.sum64_4_lo,ht=_.sum64_5_hi,yt=_.sum64_5_lo,vt=$.BlockHash,xt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function wt(){if(!(this instanceof wt))return new wt;vt.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=xt,this.W=new Array(160)}_.inherits(wt,vt),_512=wt,wt.blockSize=1024,wt.outSize=512,wt.hmacStrength=192,wt.padLength=128,wt.prototype._prepareBlock=function(gt,bt){for(var St=this.W,Nt=0;Nt<32;Nt++)St[Nt]=gt[bt+Nt];for(;Nt<St.length;Nt+=2){var Pt=Mt(St[Nt-4],St[Nt-3]),Tt=lt(St[Nt-4],St[Nt-3]),pt=St[Nt-14],Rt=St[Nt-13],zt=tr(St[Nt-30],St[Nt-29]),Yt=ar(St[Nt-30],St[Nt-29]),ir=St[Nt-32],ur=St[Nt-31];St[Nt]=ot(Pt,Tt,pt,Rt,zt,Yt,ir,ur),St[Nt+1]=dt(Pt,Tt,pt,Rt,zt,Yt,ir,ur)}},wt.prototype._update=function(gt,bt){this._prepareBlock(gt,bt);var St=this.W,Nt=this.h[0],Pt=this.h[1],Tt=this.h[2],pt=this.h[3],Rt=this.h[4],zt=this.h[5],Yt=this.h[6],ir=this.h[7],ur=this.h[8],cr=this.h[9],rr=this.h[10],fr=this.h[11],dr=this.h[12],gr=this.h[13],hr=this.h[14],or=this.h[15];_e(this.k.length===St.length);for(var br=0;br<St.length;br+=2){var Rr=hr,_r=or,Er=Gt(ur,cr),Hr=er(ur,cr),xr=Et(ur,cr,rr,fr,dr),yr=At(ur,cr,rr,fr,dr,gr),Ar=this.k[br],$r=this.k[br+1],Tr=St[br],jr=St[br+1],Cr=ht(Rr,_r,Er,Hr,xr,yr,Ar,$r,Tr,jr),Nr=yt(Rr,_r,Er,Hr,xr,yr,Ar,$r,Tr,jr);Rr=Lt(Nt,Pt),_r=Bt(Nt,Pt),Er=jt(Nt,Pt,Tt,pt,Rt),Hr=kt(Nt,Pt,Tt,pt,Rt,zt);var nn=st(Rr,_r,Er,Hr),Mr=at(Rr,_r,Er,Hr);hr=dr,or=gr,dr=rr,gr=fr,rr=ur,fr=cr,ur=st(Yt,ir,Cr,Nr),cr=at(ir,ir,Cr,Nr),Yt=Rt,ir=zt,Rt=Tt,zt=pt,Tt=Nt,pt=Pt,Nt=st(Cr,Nr,nn,Mr),Pt=at(Cr,Nr,nn,Mr)}it(this.h,0,Nt,Pt),it(this.h,2,Tt,pt),it(this.h,4,Rt,zt),it(this.h,6,Yt,ir),it(this.h,8,ur,cr),it(this.h,10,rr,fr),it(this.h,12,dr,gr),it(this.h,14,hr,or)},wt.prototype._digest=function(gt){return gt==="hex"?_.toHex32(this.h,"big"):_.split32(this.h,"big")};function Et(mt,gt,bt,St,Nt){var Pt=mt&bt^~mt&Nt;return Pt<0&&(Pt+=4294967296),Pt}function At(mt,gt,bt,St,Nt,Pt){var Tt=gt&St^~gt&Pt;return Tt<0&&(Tt+=4294967296),Tt}function jt(mt,gt,bt,St,Nt){var Pt=mt&bt^mt&Nt^bt&Nt;return Pt<0&&(Pt+=4294967296),Pt}function kt(mt,gt,bt,St,Nt,Pt){var Tt=gt&St^gt&Pt^St&Pt;return Tt<0&&(Tt+=4294967296),Tt}function Lt(mt,gt){var bt=et(mt,gt,28),St=et(gt,mt,2),Nt=et(gt,mt,7),Pt=bt^St^Nt;return Pt<0&&(Pt+=4294967296),Pt}function Bt(mt,gt){var bt=tt(mt,gt,28),St=tt(gt,mt,2),Nt=tt(gt,mt,7),Pt=bt^St^Nt;return Pt<0&&(Pt+=4294967296),Pt}function Gt(mt,gt){var bt=et(mt,gt,14),St=et(mt,gt,18),Nt=et(gt,mt,9),Pt=bt^St^Nt;return Pt<0&&(Pt+=4294967296),Pt}function er(mt,gt){var bt=tt(mt,gt,14),St=tt(mt,gt,18),Nt=tt(gt,mt,9),Pt=bt^St^Nt;return Pt<0&&(Pt+=4294967296),Pt}function tr(mt,gt){var bt=et(mt,gt,1),St=et(mt,gt,8),Nt=rt(mt,gt,7),Pt=bt^St^Nt;return Pt<0&&(Pt+=4294967296),Pt}function ar(mt,gt){var bt=tt(mt,gt,1),St=tt(mt,gt,8),Nt=nt(mt,gt,7),Pt=bt^St^Nt;return Pt<0&&(Pt+=4294967296),Pt}function Mt(mt,gt){var bt=et(mt,gt,19),St=et(gt,mt,29),Nt=rt(mt,gt,6),Pt=bt^St^Nt;return Pt<0&&(Pt+=4294967296),Pt}function lt(mt,gt){var bt=tt(mt,gt,19),St=tt(gt,mt,29),Nt=nt(mt,gt,6),Pt=bt^St^Nt;return Pt<0&&(Pt+=4294967296),Pt}return _512}var _384,hasRequired_384;function require_384(){if(hasRequired_384)return _384;hasRequired_384=1;var _=requireUtils(),$=require_512();function _e(){if(!(this instanceof _e))return new _e;$.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return _.inherits(_e,$),_384=_e,_e.blockSize=1024,_e.outSize=384,_e.hmacStrength=192,_e.padLength=128,_e.prototype._digest=function(tt){return tt==="hex"?_.toHex32(this.h.slice(0,12),"big"):_.split32(this.h.slice(0,12),"big")},_384}var hasRequiredSha;function requireSha(){return hasRequiredSha||(hasRequiredSha=1,sha.sha1=require_1(),sha.sha224=require_224(),sha.sha256=require_256(),sha.sha384=require_384(),sha.sha512=require_512()),sha}var ripemd={},hasRequiredRipemd;function requireRipemd(){if(hasRequiredRipemd)return ripemd;hasRequiredRipemd=1;var _=requireUtils(),$=requireCommon$1(),_e=_.rotl32,et=_.sum32,tt=_.sum32_3,rt=_.sum32_4,nt=$.BlockHash;function it(){if(!(this instanceof it))return new it;nt.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}_.inherits(it,nt),ripemd.ripemd160=it,it.blockSize=512,it.outSize=160,it.hmacStrength=192,it.padLength=64,it.prototype._update=function(wt,Et){for(var At=this.h[0],jt=this.h[1],kt=this.h[2],Lt=this.h[3],Bt=this.h[4],Gt=At,er=jt,tr=kt,ar=Lt,Mt=Bt,lt=0;lt<80;lt++){var mt=et(_e(rt(At,st(lt,jt,kt,Lt),wt[dt[lt]+Et],at(lt)),yt[lt]),Bt);At=Bt,Bt=Lt,Lt=_e(kt,10),kt=jt,jt=mt,mt=et(_e(rt(Gt,st(79-lt,er,tr,ar),wt[ht[lt]+Et],ot(lt)),vt[lt]),Mt),Gt=Mt,Mt=ar,ar=_e(tr,10),tr=er,er=mt}mt=tt(this.h[1],kt,ar),this.h[1]=tt(this.h[2],Lt,Mt),this.h[2]=tt(this.h[3],Bt,Gt),this.h[3]=tt(this.h[4],At,er),this.h[4]=tt(this.h[0],jt,tr),this.h[0]=mt},it.prototype._digest=function(wt){return wt==="hex"?_.toHex32(this.h,"little"):_.split32(this.h,"little")};function st(xt,wt,Et,At){return xt<=15?wt^Et^At:xt<=31?wt&Et|~wt&At:xt<=47?(wt|~Et)^At:xt<=63?wt&At|Et&~At:wt^(Et|~At)}function at(xt){return xt<=15?0:xt<=31?1518500249:xt<=47?1859775393:xt<=63?2400959708:2840853838}function ot(xt){return xt<=15?1352829926:xt<=31?1548603684:xt<=47?1836072691:xt<=63?2053994217:0}var dt=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],ht=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],yt=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],vt=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return ripemd}var hmac,hasRequiredHmac;function requireHmac(){if(hasRequiredHmac)return hmac;hasRequiredHmac=1;var _=requireUtils(),$=requireMinimalisticAssert();function _e(et,tt,rt){if(!(this instanceof _e))return new _e(et,tt,rt);this.Hash=et,this.blockSize=et.blockSize/8,this.outSize=et.outSize/8,this.inner=null,this.outer=null,this._init(_.toArray(tt,rt))}return hmac=_e,_e.prototype._init=function(tt){tt.length>this.blockSize&&(tt=new this.Hash().update(tt).digest()),$(tt.length<=this.blockSize);for(var rt=tt.length;rt<this.blockSize;rt++)tt.push(0);for(rt=0;rt<tt.length;rt++)tt[rt]^=54;for(this.inner=new this.Hash().update(tt),rt=0;rt<tt.length;rt++)tt[rt]^=106;this.outer=new this.Hash().update(tt)},_e.prototype.update=function(tt,rt){return this.inner.update(tt,rt),this},_e.prototype.digest=function(tt){return this.outer.update(this.inner.digest()),this.outer.digest(tt)},hmac}var hasRequiredHash;function requireHash(){return hasRequiredHash||(hasRequiredHash=1,function(_){var $=_;$.utils=requireUtils(),$.common=requireCommon$1(),$.sha=requireSha(),$.ripemd=requireRipemd(),$.hmac=requireHmac(),$.sha1=$.sha.sha1,$.sha256=$.sha.sha256,$.sha224=$.sha.sha224,$.sha384=$.sha.sha384,$.sha512=$.sha.sha512,$.ripemd160=$.ripemd.ripemd160}(hash)),hash}var secp256k1,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1}var hasRequiredCurves;function requireCurves(){return hasRequiredCurves||(hasRequiredCurves=1,function(_){var $=_,_e=requireHash(),et=requireCurve(),tt=requireUtils$1(),rt=tt.assert;function nt(at){at.type==="short"?this.curve=new et.short(at):at.type==="edwards"?this.curve=new et.edwards(at):this.curve=new et.mont(at),this.g=this.curve.g,this.n=this.curve.n,this.hash=at.hash,rt(this.g.validate(),"Invalid curve"),rt(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}$.PresetCurve=nt;function it(at,ot){Object.defineProperty($,at,{configurable:!0,enumerable:!0,get:function(){var dt=new nt(ot);return Object.defineProperty($,at,{configurable:!0,enumerable:!0,value:dt}),dt}})}it("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:_e.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),it("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:_e.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),it("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:_e.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),it("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:_e.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),it("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:_e.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),it("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:_e.sha256,gRed:!1,g:["9"]}),it("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:_e.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var st;try{st=requireSecp256k1()}catch{st=void 0}it("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:_e.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",st]})}(curves)),curves}var hmacDrbg,hasRequiredHmacDrbg;function requireHmacDrbg(){if(hasRequiredHmacDrbg)return hmacDrbg;hasRequiredHmacDrbg=1;var _=requireHash(),$=requireUtils$2(),_e=requireMinimalisticAssert();function et(tt){if(!(this instanceof et))return new et(tt);this.hash=tt.hash,this.predResist=!!tt.predResist,this.outLen=this.hash.outSize,this.minEntropy=tt.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var rt=$.toArray(tt.entropy,tt.entropyEnc||"hex"),nt=$.toArray(tt.nonce,tt.nonceEnc||"hex"),it=$.toArray(tt.pers,tt.persEnc||"hex");_e(rt.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(rt,nt,it)}return hmacDrbg=et,et.prototype._init=function(rt,nt,it){var st=rt.concat(nt).concat(it);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var at=0;at<this.V.length;at++)this.K[at]=0,this.V[at]=1;this._update(st),this._reseed=1,this.reseedInterval=281474976710656},et.prototype._hmac=function(){return new _.hmac(this.hash,this.K)},et.prototype._update=function(rt){var nt=this._hmac().update(this.V).update([0]);rt&&(nt=nt.update(rt)),this.K=nt.digest(),this.V=this._hmac().update(this.V).digest(),rt&&(this.K=this._hmac().update(this.V).update([1]).update(rt).digest(),this.V=this._hmac().update(this.V).digest())},et.prototype.reseed=function(rt,nt,it,st){typeof nt!="string"&&(st=it,it=nt,nt=null),rt=$.toArray(rt,nt),it=$.toArray(it,st),_e(rt.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(rt.concat(it||[])),this._reseed=1},et.prototype.generate=function(rt,nt,it,st){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof nt!="string"&&(st=it,it=nt,nt=null),it&&(it=$.toArray(it,st||"hex"),this._update(it));for(var at=[];at.length<rt;)this.V=this._hmac().update(this.V).digest(),at=at.concat(this.V);var ot=at.slice(0,rt);return this._update(it),this._reseed++,$.encode(ot,nt)},hmacDrbg}var key$1,hasRequiredKey$1;function requireKey$1(){if(hasRequiredKey$1)return key$1;hasRequiredKey$1=1;var _=requireBn$3(),$=requireUtils$1(),_e=$.assert;function et(tt,rt){this.ec=tt,this.priv=null,this.pub=null,rt.priv&&this._importPrivate(rt.priv,rt.privEnc),rt.pub&&this._importPublic(rt.pub,rt.pubEnc)}return key$1=et,et.fromPublic=function(rt,nt,it){return nt instanceof et?nt:new et(rt,{pub:nt,pubEnc:it})},et.fromPrivate=function(rt,nt,it){return nt instanceof et?nt:new et(rt,{priv:nt,privEnc:it})},et.prototype.validate=function(){var rt=this.getPublic();return rt.isInfinity()?{result:!1,reason:"Invalid public key"}:rt.validate()?rt.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},et.prototype.getPublic=function(rt,nt){return typeof rt=="string"&&(nt=rt,rt=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),nt?this.pub.encode(nt,rt):this.pub},et.prototype.getPrivate=function(rt){return rt==="hex"?this.priv.toString(16,2):this.priv},et.prototype._importPrivate=function(rt,nt){this.priv=new _(rt,nt||16),this.priv=this.priv.umod(this.ec.curve.n)},et.prototype._importPublic=function(rt,nt){if(rt.x||rt.y){this.ec.curve.type==="mont"?_e(rt.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&_e(rt.x&&rt.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(rt.x,rt.y);return}this.pub=this.ec.curve.decodePoint(rt,nt)},et.prototype.derive=function(rt){return rt.validate()||_e(rt.validate(),"public point not validated"),rt.mul(this.priv).getX()},et.prototype.sign=function(rt,nt,it){return this.ec.sign(rt,this,nt,it)},et.prototype.verify=function(rt,nt,it){return this.ec.verify(rt,nt,this,void 0,it)},et.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},key$1}var signature$1,hasRequiredSignature$1;function requireSignature$1(){if(hasRequiredSignature$1)return signature$1;hasRequiredSignature$1=1;var _=requireBn$3(),$=requireUtils$1(),_e=$.assert;function et(st,at){if(st instanceof et)return st;this._importDER(st,at)||(_e(st.r&&st.s,"Signature without r or s"),this.r=new _(st.r,16),this.s=new _(st.s,16),st.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=st.recoveryParam)}signature$1=et;function tt(){this.place=0}function rt(st,at){var ot=st[at.place++];if(!(ot&128))return ot;var dt=ot&15;if(dt===0||dt>4||st[at.place]===0)return!1;for(var ht=0,yt=0,vt=at.place;yt<dt;yt++,vt++)ht<<=8,ht|=st[vt],ht>>>=0;return ht<=127?!1:(at.place=vt,ht)}function nt(st){for(var at=0,ot=st.length-1;!st[at]&&!(st[at+1]&128)&&at<ot;)at++;return at===0?st:st.slice(at)}et.prototype._importDER=function(at,ot){at=$.toArray(at,ot);var dt=new tt;if(at[dt.place++]!==48)return!1;var ht=rt(at,dt);if(ht===!1||ht+dt.place!==at.length||at[dt.place++]!==2)return!1;var yt=rt(at,dt);if(yt===!1||at[dt.place]&128)return!1;var vt=at.slice(dt.place,yt+dt.place);if(dt.place+=yt,at[dt.place++]!==2)return!1;var xt=rt(at,dt);if(xt===!1||at.length!==xt+dt.place||at[dt.place]&128)return!1;var wt=at.slice(dt.place,xt+dt.place);if(vt[0]===0)if(vt[1]&128)vt=vt.slice(1);else return!1;if(wt[0]===0)if(wt[1]&128)wt=wt.slice(1);else return!1;return this.r=new _(vt),this.s=new _(wt),this.recoveryParam=null,!0};function it(st,at){if(at<128){st.push(at);return}var ot=1+(Math.log(at)/Math.LN2>>>3);for(st.push(ot|128);--ot;)st.push(at>>>(ot<<3)&255);st.push(at)}return et.prototype.toDER=function(at){var ot=this.r.toArray(),dt=this.s.toArray();for(ot[0]&128&&(ot=[0].concat(ot)),dt[0]&128&&(dt=[0].concat(dt)),ot=nt(ot),dt=nt(dt);!dt[0]&&!(dt[1]&128);)dt=dt.slice(1);var ht=[2];it(ht,ot.length),ht=ht.concat(ot),ht.push(2),it(ht,dt.length);var yt=ht.concat(dt),vt=[48];return it(vt,yt.length),vt=vt.concat(yt),$.encode(vt,at)},signature$1}var ec,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec;hasRequiredEc=1;var _=requireBn$3(),$=requireHmacDrbg(),_e=requireUtils$1(),et=requireCurves(),tt=requireBrorand(),rt=_e.assert,nt=requireKey$1(),it=requireSignature$1();function st(at){if(!(this instanceof st))return new st(at);typeof at=="string"&&(rt(Object.prototype.hasOwnProperty.call(et,at),"Unknown curve "+at),at=et[at]),at instanceof et.PresetCurve&&(at={curve:at}),this.curve=at.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=at.curve.g,this.g.precompute(at.curve.n.bitLength()+1),this.hash=at.hash||at.curve.hash}return ec=st,st.prototype.keyPair=function(ot){return new nt(this,ot)},st.prototype.keyFromPrivate=function(ot,dt){return nt.fromPrivate(this,ot,dt)},st.prototype.keyFromPublic=function(ot,dt){return nt.fromPublic(this,ot,dt)},st.prototype.genKeyPair=function(ot){ot||(ot={});for(var dt=new $({hash:this.hash,pers:ot.pers,persEnc:ot.persEnc||"utf8",entropy:ot.entropy||tt(this.hash.hmacStrength),entropyEnc:ot.entropy&&ot.entropyEnc||"utf8",nonce:this.n.toArray()}),ht=this.n.byteLength(),yt=this.n.sub(new _(2));;){var vt=new _(dt.generate(ht));if(!(vt.cmp(yt)>0))return vt.iaddn(1),this.keyFromPrivate(vt)}},st.prototype._truncateToN=function(ot,dt,ht){var yt;if(_.isBN(ot)||typeof ot=="number")ot=new _(ot,16),yt=ot.byteLength();else if(typeof ot=="object")yt=ot.length,ot=new _(ot,16);else{var vt=ot.toString();yt=vt.length+1>>>1,ot=new _(vt,16)}typeof ht!="number"&&(ht=yt*8);var xt=ht-this.n.bitLength();return xt>0&&(ot=ot.ushrn(xt)),!dt&&ot.cmp(this.n)>=0?ot.sub(this.n):ot},st.prototype.sign=function(ot,dt,ht,yt){if(typeof ht=="object"&&(yt=ht,ht=null),yt||(yt={}),typeof ot!="string"&&typeof ot!="number"&&!_.isBN(ot)){rt(typeof ot=="object"&&ot&&typeof ot.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),rt(ot.length>>>0===ot.length);for(var vt=0;vt<ot.length;vt++)rt((ot[vt]&255)===ot[vt])}dt=this.keyFromPrivate(dt,ht),ot=this._truncateToN(ot,!1,yt.msgBitLength),rt(!ot.isNeg(),"Can not sign a negative message");var xt=this.n.byteLength(),wt=dt.getPrivate().toArray("be",xt),Et=ot.toArray("be",xt);rt(new _(Et).eq(ot),"Can not sign message");for(var At=new $({hash:this.hash,entropy:wt,nonce:Et,pers:yt.pers,persEnc:yt.persEnc||"utf8"}),jt=this.n.sub(new _(1)),kt=0;;kt++){var Lt=yt.k?yt.k(kt):new _(At.generate(this.n.byteLength()));if(Lt=this._truncateToN(Lt,!0),!(Lt.cmpn(1)<=0||Lt.cmp(jt)>=0)){var Bt=this.g.mul(Lt);if(!Bt.isInfinity()){var Gt=Bt.getX(),er=Gt.umod(this.n);if(er.cmpn(0)!==0){var tr=Lt.invm(this.n).mul(er.mul(dt.getPrivate()).iadd(ot));if(tr=tr.umod(this.n),tr.cmpn(0)!==0){var ar=(Bt.getY().isOdd()?1:0)|(Gt.cmp(er)!==0?2:0);return yt.canonical&&tr.cmp(this.nh)>0&&(tr=this.n.sub(tr),ar^=1),new it({r:er,s:tr,recoveryParam:ar})}}}}}},st.prototype.verify=function(ot,dt,ht,yt,vt){vt||(vt={}),ot=this._truncateToN(ot,!1,vt.msgBitLength),ht=this.keyFromPublic(ht,yt),dt=new it(dt,"hex");var xt=dt.r,wt=dt.s;if(xt.cmpn(1)<0||xt.cmp(this.n)>=0||wt.cmpn(1)<0||wt.cmp(this.n)>=0)return!1;var Et=wt.invm(this.n),At=Et.mul(ot).umod(this.n),jt=Et.mul(xt).umod(this.n),kt;return this.curve._maxwellTrick?(kt=this.g.jmulAdd(At,ht.getPublic(),jt),kt.isInfinity()?!1:kt.eqXToP(xt)):(kt=this.g.mulAdd(At,ht.getPublic(),jt),kt.isInfinity()?!1:kt.getX().umod(this.n).cmp(xt)===0)},st.prototype.recoverPubKey=function(at,ot,dt,ht){rt((3&dt)===dt,"The recovery param is more than two bits"),ot=new it(ot,ht);var yt=this.n,vt=new _(at),xt=ot.r,wt=ot.s,Et=dt&1,At=dt>>1;if(xt.cmp(this.curve.p.umod(this.curve.n))>=0&&At)throw new Error("Unable to find sencond key candinate");At?xt=this.curve.pointFromX(xt.add(this.curve.n),Et):xt=this.curve.pointFromX(xt,Et);var jt=ot.r.invm(yt),kt=yt.sub(vt).mul(jt).umod(yt),Lt=wt.mul(jt).umod(yt);return this.g.mulAdd(kt,xt,Lt)},st.prototype.getKeyRecoveryParam=function(at,ot,dt,ht){if(ot=new it(ot,ht),ot.recoveryParam!==null)return ot.recoveryParam;for(var yt=0;yt<4;yt++){var vt;try{vt=this.recoverPubKey(at,ot,yt)}catch{continue}if(vt.eq(dt))return yt}throw new Error("Unable to find valid recovery factor")},ec}var key,hasRequiredKey;function requireKey(){if(hasRequiredKey)return key;hasRequiredKey=1;var _=requireUtils$1(),$=_.assert,_e=_.parseBytes,et=_.cachedProperty;function tt(rt,nt){this.eddsa=rt,this._secret=_e(nt.secret),rt.isPoint(nt.pub)?this._pub=nt.pub:this._pubBytes=_e(nt.pub)}return tt.fromPublic=function(nt,it){return it instanceof tt?it:new tt(nt,{pub:it})},tt.fromSecret=function(nt,it){return it instanceof tt?it:new tt(nt,{secret:it})},tt.prototype.secret=function(){return this._secret},et(tt,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),et(tt,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),et(tt,"privBytes",function(){var nt=this.eddsa,it=this.hash(),st=nt.encodingLength-1,at=it.slice(0,nt.encodingLength);return at[0]&=248,at[st]&=127,at[st]|=64,at}),et(tt,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),et(tt,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),et(tt,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),tt.prototype.sign=function(nt){return $(this._secret,"KeyPair can only verify"),this.eddsa.sign(nt,this)},tt.prototype.verify=function(nt,it){return this.eddsa.verify(nt,it,this)},tt.prototype.getSecret=function(nt){return $(this._secret,"KeyPair is public only"),_.encode(this.secret(),nt)},tt.prototype.getPublic=function(nt){return _.encode(this.pubBytes(),nt)},key=tt,key}var signature,hasRequiredSignature;function requireSignature(){if(hasRequiredSignature)return signature;hasRequiredSignature=1;var _=requireBn$3(),$=requireUtils$1(),_e=$.assert,et=$.cachedProperty,tt=$.parseBytes;function rt(nt,it){this.eddsa=nt,typeof it!="object"&&(it=tt(it)),Array.isArray(it)&&(_e(it.length===nt.encodingLength*2,"Signature has invalid size"),it={R:it.slice(0,nt.encodingLength),S:it.slice(nt.encodingLength)}),_e(it.R&&it.S,"Signature without R or S"),nt.isPoint(it.R)&&(this._R=it.R),it.S instanceof _&&(this._S=it.S),this._Rencoded=Array.isArray(it.R)?it.R:it.Rencoded,this._Sencoded=Array.isArray(it.S)?it.S:it.Sencoded}return et(rt,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),et(rt,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),et(rt,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),et(rt,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),rt.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},rt.prototype.toHex=function(){return $.encode(this.toBytes(),"hex").toUpperCase()},signature=rt,signature}var eddsa,hasRequiredEddsa;function requireEddsa(){if(hasRequiredEddsa)return eddsa;hasRequiredEddsa=1;var _=requireHash(),$=requireCurves(),_e=requireUtils$1(),et=_e.assert,tt=_e.parseBytes,rt=requireKey(),nt=requireSignature();function it(st){if(et(st==="ed25519","only tested with ed25519 so far"),!(this instanceof it))return new it(st);st=$[st].curve,this.curve=st,this.g=st.g,this.g.precompute(st.n.bitLength()+1),this.pointClass=st.point().constructor,this.encodingLength=Math.ceil(st.n.bitLength()/8),this.hash=_.sha512}return eddsa=it,it.prototype.sign=function(at,ot){at=tt(at);var dt=this.keyFromSecret(ot),ht=this.hashInt(dt.messagePrefix(),at),yt=this.g.mul(ht),vt=this.encodePoint(yt),xt=this.hashInt(vt,dt.pubBytes(),at).mul(dt.priv()),wt=ht.add(xt).umod(this.curve.n);return this.makeSignature({R:yt,S:wt,Rencoded:vt})},it.prototype.verify=function(at,ot,dt){if(at=tt(at),ot=this.makeSignature(ot),ot.S().gte(ot.eddsa.curve.n)||ot.S().isNeg())return!1;var ht=this.keyFromPublic(dt),yt=this.hashInt(ot.Rencoded(),ht.pubBytes(),at),vt=this.g.mul(ot.S()),xt=ot.R().add(ht.pub().mul(yt));return xt.eq(vt)},it.prototype.hashInt=function(){for(var at=this.hash(),ot=0;ot<arguments.length;ot++)at.update(arguments[ot]);return _e.intFromLE(at.digest()).umod(this.curve.n)},it.prototype.keyFromPublic=function(at){return rt.fromPublic(this,at)},it.prototype.keyFromSecret=function(at){return rt.fromSecret(this,at)},it.prototype.makeSignature=function(at){return at instanceof nt?at:new nt(this,at)},it.prototype.encodePoint=function(at){var ot=at.getY().toArray("le",this.encodingLength);return ot[this.encodingLength-1]|=at.getX().isOdd()?128:0,ot},it.prototype.decodePoint=function(at){at=_e.parseBytes(at);var ot=at.length-1,dt=at.slice(0,ot).concat(at[ot]&-129),ht=(at[ot]&128)!==0,yt=_e.intFromLE(dt);return this.curve.pointFromY(yt,ht)},it.prototype.encodeInt=function(at){return at.toArray("le",this.encodingLength)},it.prototype.decodeInt=function(at){return _e.intFromLE(at)},it.prototype.isPoint=function(at){return at instanceof this.pointClass},eddsa}var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(_){var $=_;$.version=require$$0$1.version,$.utils=requireUtils$1(),$.rand=requireBrorand(),$.curve=requireCurve(),$.curves=requireCurves(),$.ec=requireEc(),$.eddsa=requireEddsa()}(elliptic)),elliptic}var asn1$1={},asn1={},bn$2={exports:{}};bn$2.exports;var hasRequiredBn$2;function requireBn$2(){return hasRequiredBn$2||(hasRequiredBn$2=1,function(_){(function($,_e){function et(Mt,lt){if(!Mt)throw new Error(lt||"Assertion failed")}function tt(Mt,lt){Mt.super_=lt;var mt=function(){};mt.prototype=lt.prototype,Mt.prototype=new mt,Mt.prototype.constructor=Mt}function rt(Mt,lt,mt){if(rt.isBN(Mt))return Mt;this.negative=0,this.words=null,this.length=0,this.red=null,Mt!==null&&((lt==="le"||lt==="be")&&(mt=lt,lt=10),this._init(Mt||0,lt||10,mt||"be"))}typeof $=="object"?$.exports=rt:_e.BN=rt,rt.BN=rt,rt.wordSize=26;var nt;try{typeof window<"u"&&typeof window.Buffer<"u"?nt=window.Buffer:nt=require$$0$2.Buffer}catch{}rt.isBN=function(lt){return lt instanceof rt?!0:lt!==null&&typeof lt=="object"&&lt.constructor.wordSize===rt.wordSize&&Array.isArray(lt.words)},rt.max=function(lt,mt){return lt.cmp(mt)>0?lt:mt},rt.min=function(lt,mt){return lt.cmp(mt)<0?lt:mt},rt.prototype._init=function(lt,mt,gt){if(typeof lt=="number")return this._initNumber(lt,mt,gt);if(typeof lt=="object")return this._initArray(lt,mt,gt);mt==="hex"&&(mt=16),et(mt===(mt|0)&&mt>=2&&mt<=36),lt=lt.toString().replace(/\s+/g,"");var bt=0;lt[0]==="-"&&(bt++,this.negative=1),bt<lt.length&&(mt===16?this._parseHex(lt,bt,gt):(this._parseBase(lt,mt,bt),gt==="le"&&this._initArray(this.toArray(),mt,gt)))},rt.prototype._initNumber=function(lt,mt,gt){lt<0&&(this.negative=1,lt=-lt),lt<67108864?(this.words=[lt&67108863],this.length=1):lt<4503599627370496?(this.words=[lt&67108863,lt/67108864&67108863],this.length=2):(et(lt<9007199254740992),this.words=[lt&67108863,lt/67108864&67108863,1],this.length=3),gt==="le"&&this._initArray(this.toArray(),mt,gt)},rt.prototype._initArray=function(lt,mt,gt){if(et(typeof lt.length=="number"),lt.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(lt.length/3),this.words=new Array(this.length);for(var bt=0;bt<this.length;bt++)this.words[bt]=0;var St,Nt,Pt=0;if(gt==="be")for(bt=lt.length-1,St=0;bt>=0;bt-=3)Nt=lt[bt]|lt[bt-1]<<8|lt[bt-2]<<16,this.words[St]|=Nt<<Pt&67108863,this.words[St+1]=Nt>>>26-Pt&67108863,Pt+=24,Pt>=26&&(Pt-=26,St++);else if(gt==="le")for(bt=0,St=0;bt<lt.length;bt+=3)Nt=lt[bt]|lt[bt+1]<<8|lt[bt+2]<<16,this.words[St]|=Nt<<Pt&67108863,this.words[St+1]=Nt>>>26-Pt&67108863,Pt+=24,Pt>=26&&(Pt-=26,St++);return this.strip()};function it(Mt,lt){var mt=Mt.charCodeAt(lt);return mt>=65&&mt<=70?mt-55:mt>=97&&mt<=102?mt-87:mt-48&15}function st(Mt,lt,mt){var gt=it(Mt,mt);return mt-1>=lt&&(gt|=it(Mt,mt-1)<<4),gt}rt.prototype._parseHex=function(lt,mt,gt){this.length=Math.ceil((lt.length-mt)/6),this.words=new Array(this.length);for(var bt=0;bt<this.length;bt++)this.words[bt]=0;var St=0,Nt=0,Pt;if(gt==="be")for(bt=lt.length-1;bt>=mt;bt-=2)Pt=st(lt,mt,bt)<<St,this.words[Nt]|=Pt&67108863,St>=18?(St-=18,Nt+=1,this.words[Nt]|=Pt>>>26):St+=8;else{var Tt=lt.length-mt;for(bt=Tt%2===0?mt+1:mt;bt<lt.length;bt+=2)Pt=st(lt,mt,bt)<<St,this.words[Nt]|=Pt&67108863,St>=18?(St-=18,Nt+=1,this.words[Nt]|=Pt>>>26):St+=8}this.strip()};function at(Mt,lt,mt,gt){for(var bt=0,St=Math.min(Mt.length,mt),Nt=lt;Nt<St;Nt++){var Pt=Mt.charCodeAt(Nt)-48;bt*=gt,Pt>=49?bt+=Pt-49+10:Pt>=17?bt+=Pt-17+10:bt+=Pt}return bt}rt.prototype._parseBase=function(lt,mt,gt){this.words=[0],this.length=1;for(var bt=0,St=1;St<=67108863;St*=mt)bt++;bt--,St=St/mt|0;for(var Nt=lt.length-gt,Pt=Nt%bt,Tt=Math.min(Nt,Nt-Pt)+gt,pt=0,Rt=gt;Rt<Tt;Rt+=bt)pt=at(lt,Rt,Rt+bt,mt),this.imuln(St),this.words[0]+pt<67108864?this.words[0]+=pt:this._iaddn(pt);if(Pt!==0){var zt=1;for(pt=at(lt,Rt,lt.length,mt),Rt=0;Rt<Pt;Rt++)zt*=mt;this.imuln(zt),this.words[0]+pt<67108864?this.words[0]+=pt:this._iaddn(pt)}this.strip()},rt.prototype.copy=function(lt){lt.words=new Array(this.length);for(var mt=0;mt<this.length;mt++)lt.words[mt]=this.words[mt];lt.length=this.length,lt.negative=this.negative,lt.red=this.red},rt.prototype.clone=function(){var lt=new rt(null);return this.copy(lt),lt},rt.prototype._expand=function(lt){for(;this.length<lt;)this.words[this.length++]=0;return this},rt.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},rt.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},rt.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ot=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],dt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ht=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];rt.prototype.toString=function(lt,mt){lt=lt||10,mt=mt|0||1;var gt;if(lt===16||lt==="hex"){gt="";for(var bt=0,St=0,Nt=0;Nt<this.length;Nt++){var Pt=this.words[Nt],Tt=((Pt<<bt|St)&16777215).toString(16);St=Pt>>>24-bt&16777215,bt+=2,bt>=26&&(bt-=26,Nt--),St!==0||Nt!==this.length-1?gt=ot[6-Tt.length]+Tt+gt:gt=Tt+gt}for(St!==0&&(gt=St.toString(16)+gt);gt.length%mt!==0;)gt="0"+gt;return this.negative!==0&&(gt="-"+gt),gt}if(lt===(lt|0)&&lt>=2&&lt<=36){var pt=dt[lt],Rt=ht[lt];gt="";var zt=this.clone();for(zt.negative=0;!zt.isZero();){var Yt=zt.modn(Rt).toString(lt);zt=zt.idivn(Rt),zt.isZero()?gt=Yt+gt:gt=ot[pt-Yt.length]+Yt+gt}for(this.isZero()&&(gt="0"+gt);gt.length%mt!==0;)gt="0"+gt;return this.negative!==0&&(gt="-"+gt),gt}et(!1,"Base should be between 2 and 36")},rt.prototype.toNumber=function(){var lt=this.words[0];return this.length===2?lt+=this.words[1]*67108864:this.length===3&&this.words[2]===1?lt+=4503599627370496+this.words[1]*67108864:this.length>2&&et(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-lt:lt},rt.prototype.toJSON=function(){return this.toString(16)},rt.prototype.toBuffer=function(lt,mt){return et(typeof nt<"u"),this.toArrayLike(nt,lt,mt)},rt.prototype.toArray=function(lt,mt){return this.toArrayLike(Array,lt,mt)},rt.prototype.toArrayLike=function(lt,mt,gt){var bt=this.byteLength(),St=gt||Math.max(1,bt);et(bt<=St,"byte array longer than desired length"),et(St>0,"Requested array length <= 0"),this.strip();var Nt=mt==="le",Pt=new lt(St),Tt,pt,Rt=this.clone();if(Nt){for(pt=0;!Rt.isZero();pt++)Tt=Rt.andln(255),Rt.iushrn(8),Pt[pt]=Tt;for(;pt<St;pt++)Pt[pt]=0}else{for(pt=0;pt<St-bt;pt++)Pt[pt]=0;for(pt=0;!Rt.isZero();pt++)Tt=Rt.andln(255),Rt.iushrn(8),Pt[St-pt-1]=Tt}return Pt},Math.clz32?rt.prototype._countBits=function(lt){return 32-Math.clz32(lt)}:rt.prototype._countBits=function(lt){var mt=lt,gt=0;return mt>=4096&&(gt+=13,mt>>>=13),mt>=64&&(gt+=7,mt>>>=7),mt>=8&&(gt+=4,mt>>>=4),mt>=2&&(gt+=2,mt>>>=2),gt+mt},rt.prototype._zeroBits=function(lt){if(lt===0)return 26;var mt=lt,gt=0;return mt&8191||(gt+=13,mt>>>=13),mt&127||(gt+=7,mt>>>=7),mt&15||(gt+=4,mt>>>=4),mt&3||(gt+=2,mt>>>=2),mt&1||gt++,gt},rt.prototype.bitLength=function(){var lt=this.words[this.length-1],mt=this._countBits(lt);return(this.length-1)*26+mt};function yt(Mt){for(var lt=new Array(Mt.bitLength()),mt=0;mt<lt.length;mt++){var gt=mt/26|0,bt=mt%26;lt[mt]=(Mt.words[gt]&1<<bt)>>>bt}return lt}rt.prototype.zeroBits=function(){if(this.isZero())return 0;for(var lt=0,mt=0;mt<this.length;mt++){var gt=this._zeroBits(this.words[mt]);if(lt+=gt,gt!==26)break}return lt},rt.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},rt.prototype.toTwos=function(lt){return this.negative!==0?this.abs().inotn(lt).iaddn(1):this.clone()},rt.prototype.fromTwos=function(lt){return this.testn(lt-1)?this.notn(lt).iaddn(1).ineg():this.clone()},rt.prototype.isNeg=function(){return this.negative!==0},rt.prototype.neg=function(){return this.clone().ineg()},rt.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},rt.prototype.iuor=function(lt){for(;this.length<lt.length;)this.words[this.length++]=0;for(var mt=0;mt<lt.length;mt++)this.words[mt]=this.words[mt]|lt.words[mt];return this.strip()},rt.prototype.ior=function(lt){return et((this.negative|lt.negative)===0),this.iuor(lt)},rt.prototype.or=function(lt){return this.length>lt.length?this.clone().ior(lt):lt.clone().ior(this)},rt.prototype.uor=function(lt){return this.length>lt.length?this.clone().iuor(lt):lt.clone().iuor(this)},rt.prototype.iuand=function(lt){var mt;this.length>lt.length?mt=lt:mt=this;for(var gt=0;gt<mt.length;gt++)this.words[gt]=this.words[gt]&lt.words[gt];return this.length=mt.length,this.strip()},rt.prototype.iand=function(lt){return et((this.negative|lt.negative)===0),this.iuand(lt)},rt.prototype.and=function(lt){return this.length>lt.length?this.clone().iand(lt):lt.clone().iand(this)},rt.prototype.uand=function(lt){return this.length>lt.length?this.clone().iuand(lt):lt.clone().iuand(this)},rt.prototype.iuxor=function(lt){var mt,gt;this.length>lt.length?(mt=this,gt=lt):(mt=lt,gt=this);for(var bt=0;bt<gt.length;bt++)this.words[bt]=mt.words[bt]^gt.words[bt];if(this!==mt)for(;bt<mt.length;bt++)this.words[bt]=mt.words[bt];return this.length=mt.length,this.strip()},rt.prototype.ixor=function(lt){return et((this.negative|lt.negative)===0),this.iuxor(lt)},rt.prototype.xor=function(lt){return this.length>lt.length?this.clone().ixor(lt):lt.clone().ixor(this)},rt.prototype.uxor=function(lt){return this.length>lt.length?this.clone().iuxor(lt):lt.clone().iuxor(this)},rt.prototype.inotn=function(lt){et(typeof lt=="number"&&lt>=0);var mt=Math.ceil(lt/26)|0,gt=lt%26;this._expand(mt),gt>0&&mt--;for(var bt=0;bt<mt;bt++)this.words[bt]=~this.words[bt]&67108863;return gt>0&&(this.words[bt]=~this.words[bt]&67108863>>26-gt),this.strip()},rt.prototype.notn=function(lt){return this.clone().inotn(lt)},rt.prototype.setn=function(lt,mt){et(typeof lt=="number"&&lt>=0);var gt=lt/26|0,bt=lt%26;return this._expand(gt+1),mt?this.words[gt]=this.words[gt]|1<<bt:this.words[gt]=this.words[gt]&~(1<<bt),this.strip()},rt.prototype.iadd=function(lt){var mt;if(this.negative!==0&&lt.negative===0)return this.negative=0,mt=this.isub(lt),this.negative^=1,this._normSign();if(this.negative===0&&lt.negative!==0)return lt.negative=0,mt=this.isub(lt),lt.negative=1,mt._normSign();var gt,bt;this.length>lt.length?(gt=this,bt=lt):(gt=lt,bt=this);for(var St=0,Nt=0;Nt<bt.length;Nt++)mt=(gt.words[Nt]|0)+(bt.words[Nt]|0)+St,this.words[Nt]=mt&67108863,St=mt>>>26;for(;St!==0&&Nt<gt.length;Nt++)mt=(gt.words[Nt]|0)+St,this.words[Nt]=mt&67108863,St=mt>>>26;if(this.length=gt.length,St!==0)this.words[this.length]=St,this.length++;else if(gt!==this)for(;Nt<gt.length;Nt++)this.words[Nt]=gt.words[Nt];return this},rt.prototype.add=function(lt){var mt;return lt.negative!==0&&this.negative===0?(lt.negative=0,mt=this.sub(lt),lt.negative^=1,mt):lt.negative===0&&this.negative!==0?(this.negative=0,mt=lt.sub(this),this.negative=1,mt):this.length>lt.length?this.clone().iadd(lt):lt.clone().iadd(this)},rt.prototype.isub=function(lt){if(lt.negative!==0){lt.negative=0;var mt=this.iadd(lt);return lt.negative=1,mt._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(lt),this.negative=1,this._normSign();var gt=this.cmp(lt);if(gt===0)return this.negative=0,this.length=1,this.words[0]=0,this;var bt,St;gt>0?(bt=this,St=lt):(bt=lt,St=this);for(var Nt=0,Pt=0;Pt<St.length;Pt++)mt=(bt.words[Pt]|0)-(St.words[Pt]|0)+Nt,Nt=mt>>26,this.words[Pt]=mt&67108863;for(;Nt!==0&&Pt<bt.length;Pt++)mt=(bt.words[Pt]|0)+Nt,Nt=mt>>26,this.words[Pt]=mt&67108863;if(Nt===0&&Pt<bt.length&&bt!==this)for(;Pt<bt.length;Pt++)this.words[Pt]=bt.words[Pt];return this.length=Math.max(this.length,Pt),bt!==this&&(this.negative=1),this.strip()},rt.prototype.sub=function(lt){return this.clone().isub(lt)};function vt(Mt,lt,mt){mt.negative=lt.negative^Mt.negative;var gt=Mt.length+lt.length|0;mt.length=gt,gt=gt-1|0;var bt=Mt.words[0]|0,St=lt.words[0]|0,Nt=bt*St,Pt=Nt&67108863,Tt=Nt/67108864|0;mt.words[0]=Pt;for(var pt=1;pt<gt;pt++){for(var Rt=Tt>>>26,zt=Tt&67108863,Yt=Math.min(pt,lt.length-1),ir=Math.max(0,pt-Mt.length+1);ir<=Yt;ir++){var ur=pt-ir|0;bt=Mt.words[ur]|0,St=lt.words[ir]|0,Nt=bt*St+zt,Rt+=Nt/67108864|0,zt=Nt&67108863}mt.words[pt]=zt|0,Tt=Rt|0}return Tt!==0?mt.words[pt]=Tt|0:mt.length--,mt.strip()}var xt=function(lt,mt,gt){var bt=lt.words,St=mt.words,Nt=gt.words,Pt=0,Tt,pt,Rt,zt=bt[0]|0,Yt=zt&8191,ir=zt>>>13,ur=bt[1]|0,cr=ur&8191,rr=ur>>>13,fr=bt[2]|0,dr=fr&8191,gr=fr>>>13,hr=bt[3]|0,or=hr&8191,br=hr>>>13,Rr=bt[4]|0,_r=Rr&8191,Er=Rr>>>13,Hr=bt[5]|0,xr=Hr&8191,yr=Hr>>>13,Ar=bt[6]|0,$r=Ar&8191,Tr=Ar>>>13,jr=bt[7]|0,Cr=jr&8191,Nr=jr>>>13,nn=bt[8]|0,Mr=nn&8191,Lr=nn>>>13,an=bt[9]|0,pr=an&8191,nr=an>>>13,lr=St[0]|0,vr=lr&8191,wr=lr>>>13,Pr=St[1]|0,Sr=Pr&8191,Dr=Pr>>>13,rn=St[2]|0,Ir=rn&8191,Or=rn>>>13,sn=St[3]|0,Fr=sn&8191,Kr=sn>>>13,fn=St[4]|0,Br=fn&8191,Zr=fn>>>13,hn=St[5]|0,zr=hn&8191,Xr=hn>>>13,pn=St[6]|0,Vr=pn&8191,Yr=pn>>>13,mn=St[7]|0,Ur=mn&8191,Qr=mn>>>13,gn=St[8]|0,Gr=gn&8191,Jr=gn>>>13,yn=St[9]|0,Wr=yn&8191,en=yn>>>13;gt.negative=lt.negative^mt.negative,gt.length=19,Tt=Math.imul(Yt,vr),pt=Math.imul(Yt,wr),pt=pt+Math.imul(ir,vr)|0,Rt=Math.imul(ir,wr);var on=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(on>>>26)|0,on&=67108863,Tt=Math.imul(cr,vr),pt=Math.imul(cr,wr),pt=pt+Math.imul(rr,vr)|0,Rt=Math.imul(rr,wr),Tt=Tt+Math.imul(Yt,Sr)|0,pt=pt+Math.imul(Yt,Dr)|0,pt=pt+Math.imul(ir,Sr)|0,Rt=Rt+Math.imul(ir,Dr)|0;var un=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(un>>>26)|0,un&=67108863,Tt=Math.imul(dr,vr),pt=Math.imul(dr,wr),pt=pt+Math.imul(gr,vr)|0,Rt=Math.imul(gr,wr),Tt=Tt+Math.imul(cr,Sr)|0,pt=pt+Math.imul(cr,Dr)|0,pt=pt+Math.imul(rr,Sr)|0,Rt=Rt+Math.imul(rr,Dr)|0,Tt=Tt+Math.imul(Yt,Ir)|0,pt=pt+Math.imul(Yt,Or)|0,pt=pt+Math.imul(ir,Ir)|0,Rt=Rt+Math.imul(ir,Or)|0;var wn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(wn>>>26)|0,wn&=67108863,Tt=Math.imul(or,vr),pt=Math.imul(or,wr),pt=pt+Math.imul(br,vr)|0,Rt=Math.imul(br,wr),Tt=Tt+Math.imul(dr,Sr)|0,pt=pt+Math.imul(dr,Dr)|0,pt=pt+Math.imul(gr,Sr)|0,Rt=Rt+Math.imul(gr,Dr)|0,Tt=Tt+Math.imul(cr,Ir)|0,pt=pt+Math.imul(cr,Or)|0,pt=pt+Math.imul(rr,Ir)|0,Rt=Rt+Math.imul(rr,Or)|0,Tt=Tt+Math.imul(Yt,Fr)|0,pt=pt+Math.imul(Yt,Kr)|0,pt=pt+Math.imul(ir,Fr)|0,Rt=Rt+Math.imul(ir,Kr)|0;var $n=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+($n>>>26)|0,$n&=67108863,Tt=Math.imul(_r,vr),pt=Math.imul(_r,wr),pt=pt+Math.imul(Er,vr)|0,Rt=Math.imul(Er,wr),Tt=Tt+Math.imul(or,Sr)|0,pt=pt+Math.imul(or,Dr)|0,pt=pt+Math.imul(br,Sr)|0,Rt=Rt+Math.imul(br,Dr)|0,Tt=Tt+Math.imul(dr,Ir)|0,pt=pt+Math.imul(dr,Or)|0,pt=pt+Math.imul(gr,Ir)|0,Rt=Rt+Math.imul(gr,Or)|0,Tt=Tt+Math.imul(cr,Fr)|0,pt=pt+Math.imul(cr,Kr)|0,pt=pt+Math.imul(rr,Fr)|0,Rt=Rt+Math.imul(rr,Kr)|0,Tt=Tt+Math.imul(Yt,Br)|0,pt=pt+Math.imul(Yt,Zr)|0,pt=pt+Math.imul(ir,Br)|0,Rt=Rt+Math.imul(ir,Zr)|0;var Sn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,Tt=Math.imul(xr,vr),pt=Math.imul(xr,wr),pt=pt+Math.imul(yr,vr)|0,Rt=Math.imul(yr,wr),Tt=Tt+Math.imul(_r,Sr)|0,pt=pt+Math.imul(_r,Dr)|0,pt=pt+Math.imul(Er,Sr)|0,Rt=Rt+Math.imul(Er,Dr)|0,Tt=Tt+Math.imul(or,Ir)|0,pt=pt+Math.imul(or,Or)|0,pt=pt+Math.imul(br,Ir)|0,Rt=Rt+Math.imul(br,Or)|0,Tt=Tt+Math.imul(dr,Fr)|0,pt=pt+Math.imul(dr,Kr)|0,pt=pt+Math.imul(gr,Fr)|0,Rt=Rt+Math.imul(gr,Kr)|0,Tt=Tt+Math.imul(cr,Br)|0,pt=pt+Math.imul(cr,Zr)|0,pt=pt+Math.imul(rr,Br)|0,Rt=Rt+Math.imul(rr,Zr)|0,Tt=Tt+Math.imul(Yt,zr)|0,pt=pt+Math.imul(Yt,Xr)|0,pt=pt+Math.imul(ir,zr)|0,Rt=Rt+Math.imul(ir,Xr)|0;var En=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(En>>>26)|0,En&=67108863,Tt=Math.imul($r,vr),pt=Math.imul($r,wr),pt=pt+Math.imul(Tr,vr)|0,Rt=Math.imul(Tr,wr),Tt=Tt+Math.imul(xr,Sr)|0,pt=pt+Math.imul(xr,Dr)|0,pt=pt+Math.imul(yr,Sr)|0,Rt=Rt+Math.imul(yr,Dr)|0,Tt=Tt+Math.imul(_r,Ir)|0,pt=pt+Math.imul(_r,Or)|0,pt=pt+Math.imul(Er,Ir)|0,Rt=Rt+Math.imul(Er,Or)|0,Tt=Tt+Math.imul(or,Fr)|0,pt=pt+Math.imul(or,Kr)|0,pt=pt+Math.imul(br,Fr)|0,Rt=Rt+Math.imul(br,Kr)|0,Tt=Tt+Math.imul(dr,Br)|0,pt=pt+Math.imul(dr,Zr)|0,pt=pt+Math.imul(gr,Br)|0,Rt=Rt+Math.imul(gr,Zr)|0,Tt=Tt+Math.imul(cr,zr)|0,pt=pt+Math.imul(cr,Xr)|0,pt=pt+Math.imul(rr,zr)|0,Rt=Rt+Math.imul(rr,Xr)|0,Tt=Tt+Math.imul(Yt,Vr)|0,pt=pt+Math.imul(Yt,Yr)|0,pt=pt+Math.imul(ir,Vr)|0,Rt=Rt+Math.imul(ir,Yr)|0;var _n=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(_n>>>26)|0,_n&=67108863,Tt=Math.imul(Cr,vr),pt=Math.imul(Cr,wr),pt=pt+Math.imul(Nr,vr)|0,Rt=Math.imul(Nr,wr),Tt=Tt+Math.imul($r,Sr)|0,pt=pt+Math.imul($r,Dr)|0,pt=pt+Math.imul(Tr,Sr)|0,Rt=Rt+Math.imul(Tr,Dr)|0,Tt=Tt+Math.imul(xr,Ir)|0,pt=pt+Math.imul(xr,Or)|0,pt=pt+Math.imul(yr,Ir)|0,Rt=Rt+Math.imul(yr,Or)|0,Tt=Tt+Math.imul(_r,Fr)|0,pt=pt+Math.imul(_r,Kr)|0,pt=pt+Math.imul(Er,Fr)|0,Rt=Rt+Math.imul(Er,Kr)|0,Tt=Tt+Math.imul(or,Br)|0,pt=pt+Math.imul(or,Zr)|0,pt=pt+Math.imul(br,Br)|0,Rt=Rt+Math.imul(br,Zr)|0,Tt=Tt+Math.imul(dr,zr)|0,pt=pt+Math.imul(dr,Xr)|0,pt=pt+Math.imul(gr,zr)|0,Rt=Rt+Math.imul(gr,Xr)|0,Tt=Tt+Math.imul(cr,Vr)|0,pt=pt+Math.imul(cr,Yr)|0,pt=pt+Math.imul(rr,Vr)|0,Rt=Rt+Math.imul(rr,Yr)|0,Tt=Tt+Math.imul(Yt,Ur)|0,pt=pt+Math.imul(Yt,Qr)|0,pt=pt+Math.imul(ir,Ur)|0,Rt=Rt+Math.imul(ir,Qr)|0;var Tn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,Tt=Math.imul(Mr,vr),pt=Math.imul(Mr,wr),pt=pt+Math.imul(Lr,vr)|0,Rt=Math.imul(Lr,wr),Tt=Tt+Math.imul(Cr,Sr)|0,pt=pt+Math.imul(Cr,Dr)|0,pt=pt+Math.imul(Nr,Sr)|0,Rt=Rt+Math.imul(Nr,Dr)|0,Tt=Tt+Math.imul($r,Ir)|0,pt=pt+Math.imul($r,Or)|0,pt=pt+Math.imul(Tr,Ir)|0,Rt=Rt+Math.imul(Tr,Or)|0,Tt=Tt+Math.imul(xr,Fr)|0,pt=pt+Math.imul(xr,Kr)|0,pt=pt+Math.imul(yr,Fr)|0,Rt=Rt+Math.imul(yr,Kr)|0,Tt=Tt+Math.imul(_r,Br)|0,pt=pt+Math.imul(_r,Zr)|0,pt=pt+Math.imul(Er,Br)|0,Rt=Rt+Math.imul(Er,Zr)|0,Tt=Tt+Math.imul(or,zr)|0,pt=pt+Math.imul(or,Xr)|0,pt=pt+Math.imul(br,zr)|0,Rt=Rt+Math.imul(br,Xr)|0,Tt=Tt+Math.imul(dr,Vr)|0,pt=pt+Math.imul(dr,Yr)|0,pt=pt+Math.imul(gr,Vr)|0,Rt=Rt+Math.imul(gr,Yr)|0,Tt=Tt+Math.imul(cr,Ur)|0,pt=pt+Math.imul(cr,Qr)|0,pt=pt+Math.imul(rr,Ur)|0,Rt=Rt+Math.imul(rr,Qr)|0,Tt=Tt+Math.imul(Yt,Gr)|0,pt=pt+Math.imul(Yt,Jr)|0,pt=pt+Math.imul(ir,Gr)|0,Rt=Rt+Math.imul(ir,Jr)|0;var Cn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Tt=Math.imul(pr,vr),pt=Math.imul(pr,wr),pt=pt+Math.imul(nr,vr)|0,Rt=Math.imul(nr,wr),Tt=Tt+Math.imul(Mr,Sr)|0,pt=pt+Math.imul(Mr,Dr)|0,pt=pt+Math.imul(Lr,Sr)|0,Rt=Rt+Math.imul(Lr,Dr)|0,Tt=Tt+Math.imul(Cr,Ir)|0,pt=pt+Math.imul(Cr,Or)|0,pt=pt+Math.imul(Nr,Ir)|0,Rt=Rt+Math.imul(Nr,Or)|0,Tt=Tt+Math.imul($r,Fr)|0,pt=pt+Math.imul($r,Kr)|0,pt=pt+Math.imul(Tr,Fr)|0,Rt=Rt+Math.imul(Tr,Kr)|0,Tt=Tt+Math.imul(xr,Br)|0,pt=pt+Math.imul(xr,Zr)|0,pt=pt+Math.imul(yr,Br)|0,Rt=Rt+Math.imul(yr,Zr)|0,Tt=Tt+Math.imul(_r,zr)|0,pt=pt+Math.imul(_r,Xr)|0,pt=pt+Math.imul(Er,zr)|0,Rt=Rt+Math.imul(Er,Xr)|0,Tt=Tt+Math.imul(or,Vr)|0,pt=pt+Math.imul(or,Yr)|0,pt=pt+Math.imul(br,Vr)|0,Rt=Rt+Math.imul(br,Yr)|0,Tt=Tt+Math.imul(dr,Ur)|0,pt=pt+Math.imul(dr,Qr)|0,pt=pt+Math.imul(gr,Ur)|0,Rt=Rt+Math.imul(gr,Qr)|0,Tt=Tt+Math.imul(cr,Gr)|0,pt=pt+Math.imul(cr,Jr)|0,pt=pt+Math.imul(rr,Gr)|0,Rt=Rt+Math.imul(rr,Jr)|0,Tt=Tt+Math.imul(Yt,Wr)|0,pt=pt+Math.imul(Yt,en)|0,pt=pt+Math.imul(ir,Wr)|0,Rt=Rt+Math.imul(ir,en)|0;var An=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(An>>>26)|0,An&=67108863,Tt=Math.imul(pr,Sr),pt=Math.imul(pr,Dr),pt=pt+Math.imul(nr,Sr)|0,Rt=Math.imul(nr,Dr),Tt=Tt+Math.imul(Mr,Ir)|0,pt=pt+Math.imul(Mr,Or)|0,pt=pt+Math.imul(Lr,Ir)|0,Rt=Rt+Math.imul(Lr,Or)|0,Tt=Tt+Math.imul(Cr,Fr)|0,pt=pt+Math.imul(Cr,Kr)|0,pt=pt+Math.imul(Nr,Fr)|0,Rt=Rt+Math.imul(Nr,Kr)|0,Tt=Tt+Math.imul($r,Br)|0,pt=pt+Math.imul($r,Zr)|0,pt=pt+Math.imul(Tr,Br)|0,Rt=Rt+Math.imul(Tr,Zr)|0,Tt=Tt+Math.imul(xr,zr)|0,pt=pt+Math.imul(xr,Xr)|0,pt=pt+Math.imul(yr,zr)|0,Rt=Rt+Math.imul(yr,Xr)|0,Tt=Tt+Math.imul(_r,Vr)|0,pt=pt+Math.imul(_r,Yr)|0,pt=pt+Math.imul(Er,Vr)|0,Rt=Rt+Math.imul(Er,Yr)|0,Tt=Tt+Math.imul(or,Ur)|0,pt=pt+Math.imul(or,Qr)|0,pt=pt+Math.imul(br,Ur)|0,Rt=Rt+Math.imul(br,Qr)|0,Tt=Tt+Math.imul(dr,Gr)|0,pt=pt+Math.imul(dr,Jr)|0,pt=pt+Math.imul(gr,Gr)|0,Rt=Rt+Math.imul(gr,Jr)|0,Tt=Tt+Math.imul(cr,Wr)|0,pt=pt+Math.imul(cr,en)|0,pt=pt+Math.imul(rr,Wr)|0,Rt=Rt+Math.imul(rr,en)|0;var Rn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,Tt=Math.imul(pr,Ir),pt=Math.imul(pr,Or),pt=pt+Math.imul(nr,Ir)|0,Rt=Math.imul(nr,Or),Tt=Tt+Math.imul(Mr,Fr)|0,pt=pt+Math.imul(Mr,Kr)|0,pt=pt+Math.imul(Lr,Fr)|0,Rt=Rt+Math.imul(Lr,Kr)|0,Tt=Tt+Math.imul(Cr,Br)|0,pt=pt+Math.imul(Cr,Zr)|0,pt=pt+Math.imul(Nr,Br)|0,Rt=Rt+Math.imul(Nr,Zr)|0,Tt=Tt+Math.imul($r,zr)|0,pt=pt+Math.imul($r,Xr)|0,pt=pt+Math.imul(Tr,zr)|0,Rt=Rt+Math.imul(Tr,Xr)|0,Tt=Tt+Math.imul(xr,Vr)|0,pt=pt+Math.imul(xr,Yr)|0,pt=pt+Math.imul(yr,Vr)|0,Rt=Rt+Math.imul(yr,Yr)|0,Tt=Tt+Math.imul(_r,Ur)|0,pt=pt+Math.imul(_r,Qr)|0,pt=pt+Math.imul(Er,Ur)|0,Rt=Rt+Math.imul(Er,Qr)|0,Tt=Tt+Math.imul(or,Gr)|0,pt=pt+Math.imul(or,Jr)|0,pt=pt+Math.imul(br,Gr)|0,Rt=Rt+Math.imul(br,Jr)|0,Tt=Tt+Math.imul(dr,Wr)|0,pt=pt+Math.imul(dr,en)|0,pt=pt+Math.imul(gr,Wr)|0,Rt=Rt+Math.imul(gr,en)|0;var Nn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,Tt=Math.imul(pr,Fr),pt=Math.imul(pr,Kr),pt=pt+Math.imul(nr,Fr)|0,Rt=Math.imul(nr,Kr),Tt=Tt+Math.imul(Mr,Br)|0,pt=pt+Math.imul(Mr,Zr)|0,pt=pt+Math.imul(Lr,Br)|0,Rt=Rt+Math.imul(Lr,Zr)|0,Tt=Tt+Math.imul(Cr,zr)|0,pt=pt+Math.imul(Cr,Xr)|0,pt=pt+Math.imul(Nr,zr)|0,Rt=Rt+Math.imul(Nr,Xr)|0,Tt=Tt+Math.imul($r,Vr)|0,pt=pt+Math.imul($r,Yr)|0,pt=pt+Math.imul(Tr,Vr)|0,Rt=Rt+Math.imul(Tr,Yr)|0,Tt=Tt+Math.imul(xr,Ur)|0,pt=pt+Math.imul(xr,Qr)|0,pt=pt+Math.imul(yr,Ur)|0,Rt=Rt+Math.imul(yr,Qr)|0,Tt=Tt+Math.imul(_r,Gr)|0,pt=pt+Math.imul(_r,Jr)|0,pt=pt+Math.imul(Er,Gr)|0,Rt=Rt+Math.imul(Er,Jr)|0,Tt=Tt+Math.imul(or,Wr)|0,pt=pt+Math.imul(or,en)|0,pt=pt+Math.imul(br,Wr)|0,Rt=Rt+Math.imul(br,en)|0;var In=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(In>>>26)|0,In&=67108863,Tt=Math.imul(pr,Br),pt=Math.imul(pr,Zr),pt=pt+Math.imul(nr,Br)|0,Rt=Math.imul(nr,Zr),Tt=Tt+Math.imul(Mr,zr)|0,pt=pt+Math.imul(Mr,Xr)|0,pt=pt+Math.imul(Lr,zr)|0,Rt=Rt+Math.imul(Lr,Xr)|0,Tt=Tt+Math.imul(Cr,Vr)|0,pt=pt+Math.imul(Cr,Yr)|0,pt=pt+Math.imul(Nr,Vr)|0,Rt=Rt+Math.imul(Nr,Yr)|0,Tt=Tt+Math.imul($r,Ur)|0,pt=pt+Math.imul($r,Qr)|0,pt=pt+Math.imul(Tr,Ur)|0,Rt=Rt+Math.imul(Tr,Qr)|0,Tt=Tt+Math.imul(xr,Gr)|0,pt=pt+Math.imul(xr,Jr)|0,pt=pt+Math.imul(yr,Gr)|0,Rt=Rt+Math.imul(yr,Jr)|0,Tt=Tt+Math.imul(_r,Wr)|0,pt=pt+Math.imul(_r,en)|0,pt=pt+Math.imul(Er,Wr)|0,Rt=Rt+Math.imul(Er,en)|0;var Mn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,Tt=Math.imul(pr,zr),pt=Math.imul(pr,Xr),pt=pt+Math.imul(nr,zr)|0,Rt=Math.imul(nr,Xr),Tt=Tt+Math.imul(Mr,Vr)|0,pt=pt+Math.imul(Mr,Yr)|0,pt=pt+Math.imul(Lr,Vr)|0,Rt=Rt+Math.imul(Lr,Yr)|0,Tt=Tt+Math.imul(Cr,Ur)|0,pt=pt+Math.imul(Cr,Qr)|0,pt=pt+Math.imul(Nr,Ur)|0,Rt=Rt+Math.imul(Nr,Qr)|0,Tt=Tt+Math.imul($r,Gr)|0,pt=pt+Math.imul($r,Jr)|0,pt=pt+Math.imul(Tr,Gr)|0,Rt=Rt+Math.imul(Tr,Jr)|0,Tt=Tt+Math.imul(xr,Wr)|0,pt=pt+Math.imul(xr,en)|0,pt=pt+Math.imul(yr,Wr)|0,Rt=Rt+Math.imul(yr,en)|0;var Pn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,Tt=Math.imul(pr,Vr),pt=Math.imul(pr,Yr),pt=pt+Math.imul(nr,Vr)|0,Rt=Math.imul(nr,Yr),Tt=Tt+Math.imul(Mr,Ur)|0,pt=pt+Math.imul(Mr,Qr)|0,pt=pt+Math.imul(Lr,Ur)|0,Rt=Rt+Math.imul(Lr,Qr)|0,Tt=Tt+Math.imul(Cr,Gr)|0,pt=pt+Math.imul(Cr,Jr)|0,pt=pt+Math.imul(Nr,Gr)|0,Rt=Rt+Math.imul(Nr,Jr)|0,Tt=Tt+Math.imul($r,Wr)|0,pt=pt+Math.imul($r,en)|0,pt=pt+Math.imul(Tr,Wr)|0,Rt=Rt+Math.imul(Tr,en)|0;var kn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(kn>>>26)|0,kn&=67108863,Tt=Math.imul(pr,Ur),pt=Math.imul(pr,Qr),pt=pt+Math.imul(nr,Ur)|0,Rt=Math.imul(nr,Qr),Tt=Tt+Math.imul(Mr,Gr)|0,pt=pt+Math.imul(Mr,Jr)|0,pt=pt+Math.imul(Lr,Gr)|0,Rt=Rt+Math.imul(Lr,Jr)|0,Tt=Tt+Math.imul(Cr,Wr)|0,pt=pt+Math.imul(Cr,en)|0,pt=pt+Math.imul(Nr,Wr)|0,Rt=Rt+Math.imul(Nr,en)|0;var On=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(On>>>26)|0,On&=67108863,Tt=Math.imul(pr,Gr),pt=Math.imul(pr,Jr),pt=pt+Math.imul(nr,Gr)|0,Rt=Math.imul(nr,Jr),Tt=Tt+Math.imul(Mr,Wr)|0,pt=pt+Math.imul(Mr,en)|0,pt=pt+Math.imul(Lr,Wr)|0,Rt=Rt+Math.imul(Lr,en)|0;var Dn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,Tt=Math.imul(pr,Wr),pt=Math.imul(pr,en),pt=pt+Math.imul(nr,Wr)|0,Rt=Math.imul(nr,en);var jn=(Pt+Tt|0)+((pt&8191)<<13)|0;return Pt=(Rt+(pt>>>13)|0)+(jn>>>26)|0,jn&=67108863,Nt[0]=on,Nt[1]=un,Nt[2]=wn,Nt[3]=$n,Nt[4]=Sn,Nt[5]=En,Nt[6]=_n,Nt[7]=Tn,Nt[8]=Cn,Nt[9]=An,Nt[10]=Rn,Nt[11]=Nn,Nt[12]=In,Nt[13]=Mn,Nt[14]=Pn,Nt[15]=kn,Nt[16]=On,Nt[17]=Dn,Nt[18]=jn,Pt!==0&&(Nt[19]=Pt,gt.length++),gt};Math.imul||(xt=vt);function wt(Mt,lt,mt){mt.negative=lt.negative^Mt.negative,mt.length=Mt.length+lt.length;for(var gt=0,bt=0,St=0;St<mt.length-1;St++){var Nt=bt;bt=0;for(var Pt=gt&67108863,Tt=Math.min(St,lt.length-1),pt=Math.max(0,St-Mt.length+1);pt<=Tt;pt++){var Rt=St-pt,zt=Mt.words[Rt]|0,Yt=lt.words[pt]|0,ir=zt*Yt,ur=ir&67108863;Nt=Nt+(ir/67108864|0)|0,ur=ur+Pt|0,Pt=ur&67108863,Nt=Nt+(ur>>>26)|0,bt+=Nt>>>26,Nt&=67108863}mt.words[St]=Pt,gt=Nt,Nt=bt}return gt!==0?mt.words[St]=gt:mt.length--,mt.strip()}function Et(Mt,lt,mt){var gt=new At;return gt.mulp(Mt,lt,mt)}rt.prototype.mulTo=function(lt,mt){var gt,bt=this.length+lt.length;return this.length===10&&lt.length===10?gt=xt(this,lt,mt):bt<63?gt=vt(this,lt,mt):bt<1024?gt=wt(this,lt,mt):gt=Et(this,lt,mt),gt};function At(Mt,lt){this.x=Mt,this.y=lt}At.prototype.makeRBT=function(lt){for(var mt=new Array(lt),gt=rt.prototype._countBits(lt)-1,bt=0;bt<lt;bt++)mt[bt]=this.revBin(bt,gt,lt);return mt},At.prototype.revBin=function(lt,mt,gt){if(lt===0||lt===gt-1)return lt;for(var bt=0,St=0;St<mt;St++)bt|=(lt&1)<<mt-St-1,lt>>=1;return bt},At.prototype.permute=function(lt,mt,gt,bt,St,Nt){for(var Pt=0;Pt<Nt;Pt++)bt[Pt]=mt[lt[Pt]],St[Pt]=gt[lt[Pt]]},At.prototype.transform=function(lt,mt,gt,bt,St,Nt){this.permute(Nt,lt,mt,gt,bt,St);for(var Pt=1;Pt<St;Pt<<=1)for(var Tt=Pt<<1,pt=Math.cos(2*Math.PI/Tt),Rt=Math.sin(2*Math.PI/Tt),zt=0;zt<St;zt+=Tt)for(var Yt=pt,ir=Rt,ur=0;ur<Pt;ur++){var cr=gt[zt+ur],rr=bt[zt+ur],fr=gt[zt+ur+Pt],dr=bt[zt+ur+Pt],gr=Yt*fr-ir*dr;dr=Yt*dr+ir*fr,fr=gr,gt[zt+ur]=cr+fr,bt[zt+ur]=rr+dr,gt[zt+ur+Pt]=cr-fr,bt[zt+ur+Pt]=rr-dr,ur!==Tt&&(gr=pt*Yt-Rt*ir,ir=pt*ir+Rt*Yt,Yt=gr)}},At.prototype.guessLen13b=function(lt,mt){var gt=Math.max(mt,lt)|1,bt=gt&1,St=0;for(gt=gt/2|0;gt;gt=gt>>>1)St++;return 1<<St+1+bt},At.prototype.conjugate=function(lt,mt,gt){if(!(gt<=1))for(var bt=0;bt<gt/2;bt++){var St=lt[bt];lt[bt]=lt[gt-bt-1],lt[gt-bt-1]=St,St=mt[bt],mt[bt]=-mt[gt-bt-1],mt[gt-bt-1]=-St}},At.prototype.normalize13b=function(lt,mt){for(var gt=0,bt=0;bt<mt/2;bt++){var St=Math.round(lt[2*bt+1]/mt)*8192+Math.round(lt[2*bt]/mt)+gt;lt[bt]=St&67108863,St<67108864?gt=0:gt=St/67108864|0}return lt},At.prototype.convert13b=function(lt,mt,gt,bt){for(var St=0,Nt=0;Nt<mt;Nt++)St=St+(lt[Nt]|0),gt[2*Nt]=St&8191,St=St>>>13,gt[2*Nt+1]=St&8191,St=St>>>13;for(Nt=2*mt;Nt<bt;++Nt)gt[Nt]=0;et(St===0),et((St&-8192)===0)},At.prototype.stub=function(lt){for(var mt=new Array(lt),gt=0;gt<lt;gt++)mt[gt]=0;return mt},At.prototype.mulp=function(lt,mt,gt){var bt=2*this.guessLen13b(lt.length,mt.length),St=this.makeRBT(bt),Nt=this.stub(bt),Pt=new Array(bt),Tt=new Array(bt),pt=new Array(bt),Rt=new Array(bt),zt=new Array(bt),Yt=new Array(bt),ir=gt.words;ir.length=bt,this.convert13b(lt.words,lt.length,Pt,bt),this.convert13b(mt.words,mt.length,Rt,bt),this.transform(Pt,Nt,Tt,pt,bt,St),this.transform(Rt,Nt,zt,Yt,bt,St);for(var ur=0;ur<bt;ur++){var cr=Tt[ur]*zt[ur]-pt[ur]*Yt[ur];pt[ur]=Tt[ur]*Yt[ur]+pt[ur]*zt[ur],Tt[ur]=cr}return this.conjugate(Tt,pt,bt),this.transform(Tt,pt,ir,Nt,bt,St),this.conjugate(ir,Nt,bt),this.normalize13b(ir,bt),gt.negative=lt.negative^mt.negative,gt.length=lt.length+mt.length,gt.strip()},rt.prototype.mul=function(lt){var mt=new rt(null);return mt.words=new Array(this.length+lt.length),this.mulTo(lt,mt)},rt.prototype.mulf=function(lt){var mt=new rt(null);return mt.words=new Array(this.length+lt.length),Et(this,lt,mt)},rt.prototype.imul=function(lt){return this.clone().mulTo(lt,this)},rt.prototype.imuln=function(lt){et(typeof lt=="number"),et(lt<67108864);for(var mt=0,gt=0;gt<this.length;gt++){var bt=(this.words[gt]|0)*lt,St=(bt&67108863)+(mt&67108863);mt>>=26,mt+=bt/67108864|0,mt+=St>>>26,this.words[gt]=St&67108863}return mt!==0&&(this.words[gt]=mt,this.length++),this},rt.prototype.muln=function(lt){return this.clone().imuln(lt)},rt.prototype.sqr=function(){return this.mul(this)},rt.prototype.isqr=function(){return this.imul(this.clone())},rt.prototype.pow=function(lt){var mt=yt(lt);if(mt.length===0)return new rt(1);for(var gt=this,bt=0;bt<mt.length&&mt[bt]===0;bt++,gt=gt.sqr());if(++bt<mt.length)for(var St=gt.sqr();bt<mt.length;bt++,St=St.sqr())mt[bt]!==0&&(gt=gt.mul(St));return gt},rt.prototype.iushln=function(lt){et(typeof lt=="number"&&lt>=0);var mt=lt%26,gt=(lt-mt)/26,bt=67108863>>>26-mt<<26-mt,St;if(mt!==0){var Nt=0;for(St=0;St<this.length;St++){var Pt=this.words[St]&bt,Tt=(this.words[St]|0)-Pt<<mt;this.words[St]=Tt|Nt,Nt=Pt>>>26-mt}Nt&&(this.words[St]=Nt,this.length++)}if(gt!==0){for(St=this.length-1;St>=0;St--)this.words[St+gt]=this.words[St];for(St=0;St<gt;St++)this.words[St]=0;this.length+=gt}return this.strip()},rt.prototype.ishln=function(lt){return et(this.negative===0),this.iushln(lt)},rt.prototype.iushrn=function(lt,mt,gt){et(typeof lt=="number"&&lt>=0);var bt;mt?bt=(mt-mt%26)/26:bt=0;var St=lt%26,Nt=Math.min((lt-St)/26,this.length),Pt=67108863^67108863>>>St<<St,Tt=gt;if(bt-=Nt,bt=Math.max(0,bt),Tt){for(var pt=0;pt<Nt;pt++)Tt.words[pt]=this.words[pt];Tt.length=Nt}if(Nt!==0)if(this.length>Nt)for(this.length-=Nt,pt=0;pt<this.length;pt++)this.words[pt]=this.words[pt+Nt];else this.words[0]=0,this.length=1;var Rt=0;for(pt=this.length-1;pt>=0&&(Rt!==0||pt>=bt);pt--){var zt=this.words[pt]|0;this.words[pt]=Rt<<26-St|zt>>>St,Rt=zt&Pt}return Tt&&Rt!==0&&(Tt.words[Tt.length++]=Rt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},rt.prototype.ishrn=function(lt,mt,gt){return et(this.negative===0),this.iushrn(lt,mt,gt)},rt.prototype.shln=function(lt){return this.clone().ishln(lt)},rt.prototype.ushln=function(lt){return this.clone().iushln(lt)},rt.prototype.shrn=function(lt){return this.clone().ishrn(lt)},rt.prototype.ushrn=function(lt){return this.clone().iushrn(lt)},rt.prototype.testn=function(lt){et(typeof lt=="number"&&lt>=0);var mt=lt%26,gt=(lt-mt)/26,bt=1<<mt;if(this.length<=gt)return!1;var St=this.words[gt];return!!(St&bt)},rt.prototype.imaskn=function(lt){et(typeof lt=="number"&&lt>=0);var mt=lt%26,gt=(lt-mt)/26;if(et(this.negative===0,"imaskn works only with positive numbers"),this.length<=gt)return this;if(mt!==0&&gt++,this.length=Math.min(gt,this.length),mt!==0){var bt=67108863^67108863>>>mt<<mt;this.words[this.length-1]&=bt}return this.strip()},rt.prototype.maskn=function(lt){return this.clone().imaskn(lt)},rt.prototype.iaddn=function(lt){return et(typeof lt=="number"),et(lt<67108864),lt<0?this.isubn(-lt):this.negative!==0?this.length===1&&(this.words[0]|0)<lt?(this.words[0]=lt-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(lt),this.negative=1,this):this._iaddn(lt)},rt.prototype._iaddn=function(lt){this.words[0]+=lt;for(var mt=0;mt<this.length&&this.words[mt]>=67108864;mt++)this.words[mt]-=67108864,mt===this.length-1?this.words[mt+1]=1:this.words[mt+1]++;return this.length=Math.max(this.length,mt+1),this},rt.prototype.isubn=function(lt){if(et(typeof lt=="number"),et(lt<67108864),lt<0)return this.iaddn(-lt);if(this.negative!==0)return this.negative=0,this.iaddn(lt),this.negative=1,this;if(this.words[0]-=lt,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var mt=0;mt<this.length&&this.words[mt]<0;mt++)this.words[mt]+=67108864,this.words[mt+1]-=1;return this.strip()},rt.prototype.addn=function(lt){return this.clone().iaddn(lt)},rt.prototype.subn=function(lt){return this.clone().isubn(lt)},rt.prototype.iabs=function(){return this.negative=0,this},rt.prototype.abs=function(){return this.clone().iabs()},rt.prototype._ishlnsubmul=function(lt,mt,gt){var bt=lt.length+gt,St;this._expand(bt);var Nt,Pt=0;for(St=0;St<lt.length;St++){Nt=(this.words[St+gt]|0)+Pt;var Tt=(lt.words[St]|0)*mt;Nt-=Tt&67108863,Pt=(Nt>>26)-(Tt/67108864|0),this.words[St+gt]=Nt&67108863}for(;St<this.length-gt;St++)Nt=(this.words[St+gt]|0)+Pt,Pt=Nt>>26,this.words[St+gt]=Nt&67108863;if(Pt===0)return this.strip();for(et(Pt===-1),Pt=0,St=0;St<this.length;St++)Nt=-(this.words[St]|0)+Pt,Pt=Nt>>26,this.words[St]=Nt&67108863;return this.negative=1,this.strip()},rt.prototype._wordDiv=function(lt,mt){var gt=this.length-lt.length,bt=this.clone(),St=lt,Nt=St.words[St.length-1]|0,Pt=this._countBits(Nt);gt=26-Pt,gt!==0&&(St=St.ushln(gt),bt.iushln(gt),Nt=St.words[St.length-1]|0);var Tt=bt.length-St.length,pt;if(mt!=="mod"){pt=new rt(null),pt.length=Tt+1,pt.words=new Array(pt.length);for(var Rt=0;Rt<pt.length;Rt++)pt.words[Rt]=0}var zt=bt.clone()._ishlnsubmul(St,1,Tt);zt.negative===0&&(bt=zt,pt&&(pt.words[Tt]=1));for(var Yt=Tt-1;Yt>=0;Yt--){var ir=(bt.words[St.length+Yt]|0)*67108864+(bt.words[St.length+Yt-1]|0);for(ir=Math.min(ir/Nt|0,67108863),bt._ishlnsubmul(St,ir,Yt);bt.negative!==0;)ir--,bt.negative=0,bt._ishlnsubmul(St,1,Yt),bt.isZero()||(bt.negative^=1);pt&&(pt.words[Yt]=ir)}return pt&&pt.strip(),bt.strip(),mt!=="div"&&gt!==0&&bt.iushrn(gt),{div:pt||null,mod:bt}},rt.prototype.divmod=function(lt,mt,gt){if(et(!lt.isZero()),this.isZero())return{div:new rt(0),mod:new rt(0)};var bt,St,Nt;return this.negative!==0&&lt.negative===0?(Nt=this.neg().divmod(lt,mt),mt!=="mod"&&(bt=Nt.div.neg()),mt!=="div"&&(St=Nt.mod.neg(),gt&&St.negative!==0&&St.iadd(lt)),{div:bt,mod:St}):this.negative===0&&lt.negative!==0?(Nt=this.divmod(lt.neg(),mt),mt!=="mod"&&(bt=Nt.div.neg()),{div:bt,mod:Nt.mod}):this.negative&lt.negative?(Nt=this.neg().divmod(lt.neg(),mt),mt!=="div"&&(St=Nt.mod.neg(),gt&&St.negative!==0&&St.isub(lt)),{div:Nt.div,mod:St}):lt.length>this.length||this.cmp(lt)<0?{div:new rt(0),mod:this}:lt.length===1?mt==="div"?{div:this.divn(lt.words[0]),mod:null}:mt==="mod"?{div:null,mod:new rt(this.modn(lt.words[0]))}:{div:this.divn(lt.words[0]),mod:new rt(this.modn(lt.words[0]))}:this._wordDiv(lt,mt)},rt.prototype.div=function(lt){return this.divmod(lt,"div",!1).div},rt.prototype.mod=function(lt){return this.divmod(lt,"mod",!1).mod},rt.prototype.umod=function(lt){return this.divmod(lt,"mod",!0).mod},rt.prototype.divRound=function(lt){var mt=this.divmod(lt);if(mt.mod.isZero())return mt.div;var gt=mt.div.negative!==0?mt.mod.isub(lt):mt.mod,bt=lt.ushrn(1),St=lt.andln(1),Nt=gt.cmp(bt);return Nt<0||St===1&&Nt===0?mt.div:mt.div.negative!==0?mt.div.isubn(1):mt.div.iaddn(1)},rt.prototype.modn=function(lt){et(lt<=67108863);for(var mt=(1<<26)%lt,gt=0,bt=this.length-1;bt>=0;bt--)gt=(mt*gt+(this.words[bt]|0))%lt;return gt},rt.prototype.idivn=function(lt){et(lt<=67108863);for(var mt=0,gt=this.length-1;gt>=0;gt--){var bt=(this.words[gt]|0)+mt*67108864;this.words[gt]=bt/lt|0,mt=bt%lt}return this.strip()},rt.prototype.divn=function(lt){return this.clone().idivn(lt)},rt.prototype.egcd=function(lt){et(lt.negative===0),et(!lt.isZero());var mt=this,gt=lt.clone();mt.negative!==0?mt=mt.umod(lt):mt=mt.clone();for(var bt=new rt(1),St=new rt(0),Nt=new rt(0),Pt=new rt(1),Tt=0;mt.isEven()&&gt.isEven();)mt.iushrn(1),gt.iushrn(1),++Tt;for(var pt=gt.clone(),Rt=mt.clone();!mt.isZero();){for(var zt=0,Yt=1;!(mt.words[0]&Yt)&&zt<26;++zt,Yt<<=1);if(zt>0)for(mt.iushrn(zt);zt-- >0;)(bt.isOdd()||St.isOdd())&&(bt.iadd(pt),St.isub(Rt)),bt.iushrn(1),St.iushrn(1);for(var ir=0,ur=1;!(gt.words[0]&ur)&&ir<26;++ir,ur<<=1);if(ir>0)for(gt.iushrn(ir);ir-- >0;)(Nt.isOdd()||Pt.isOdd())&&(Nt.iadd(pt),Pt.isub(Rt)),Nt.iushrn(1),Pt.iushrn(1);mt.cmp(gt)>=0?(mt.isub(gt),bt.isub(Nt),St.isub(Pt)):(gt.isub(mt),Nt.isub(bt),Pt.isub(St))}return{a:Nt,b:Pt,gcd:gt.iushln(Tt)}},rt.prototype._invmp=function(lt){et(lt.negative===0),et(!lt.isZero());var mt=this,gt=lt.clone();mt.negative!==0?mt=mt.umod(lt):mt=mt.clone();for(var bt=new rt(1),St=new rt(0),Nt=gt.clone();mt.cmpn(1)>0&&gt.cmpn(1)>0;){for(var Pt=0,Tt=1;!(mt.words[0]&Tt)&&Pt<26;++Pt,Tt<<=1);if(Pt>0)for(mt.iushrn(Pt);Pt-- >0;)bt.isOdd()&&bt.iadd(Nt),bt.iushrn(1);for(var pt=0,Rt=1;!(gt.words[0]&Rt)&&pt<26;++pt,Rt<<=1);if(pt>0)for(gt.iushrn(pt);pt-- >0;)St.isOdd()&&St.iadd(Nt),St.iushrn(1);mt.cmp(gt)>=0?(mt.isub(gt),bt.isub(St)):(gt.isub(mt),St.isub(bt))}var zt;return mt.cmpn(1)===0?zt=bt:zt=St,zt.cmpn(0)<0&&zt.iadd(lt),zt},rt.prototype.gcd=function(lt){if(this.isZero())return lt.abs();if(lt.isZero())return this.abs();var mt=this.clone(),gt=lt.clone();mt.negative=0,gt.negative=0;for(var bt=0;mt.isEven()&&gt.isEven();bt++)mt.iushrn(1),gt.iushrn(1);do{for(;mt.isEven();)mt.iushrn(1);for(;gt.isEven();)gt.iushrn(1);var St=mt.cmp(gt);if(St<0){var Nt=mt;mt=gt,gt=Nt}else if(St===0||gt.cmpn(1)===0)break;mt.isub(gt)}while(!0);return gt.iushln(bt)},rt.prototype.invm=function(lt){return this.egcd(lt).a.umod(lt)},rt.prototype.isEven=function(){return(this.words[0]&1)===0},rt.prototype.isOdd=function(){return(this.words[0]&1)===1},rt.prototype.andln=function(lt){return this.words[0]&lt},rt.prototype.bincn=function(lt){et(typeof lt=="number");var mt=lt%26,gt=(lt-mt)/26,bt=1<<mt;if(this.length<=gt)return this._expand(gt+1),this.words[gt]|=bt,this;for(var St=bt,Nt=gt;St!==0&&Nt<this.length;Nt++){var Pt=this.words[Nt]|0;Pt+=St,St=Pt>>>26,Pt&=67108863,this.words[Nt]=Pt}return St!==0&&(this.words[Nt]=St,this.length++),this},rt.prototype.isZero=function(){return this.length===1&&this.words[0]===0},rt.prototype.cmpn=function(lt){var mt=lt<0;if(this.negative!==0&&!mt)return-1;if(this.negative===0&&mt)return 1;this.strip();var gt;if(this.length>1)gt=1;else{mt&&(lt=-lt),et(lt<=67108863,"Number is too big");var bt=this.words[0]|0;gt=bt===lt?0:bt<lt?-1:1}return this.negative!==0?-gt|0:gt},rt.prototype.cmp=function(lt){if(this.negative!==0&&lt.negative===0)return-1;if(this.negative===0&&lt.negative!==0)return 1;var mt=this.ucmp(lt);return this.negative!==0?-mt|0:mt},rt.prototype.ucmp=function(lt){if(this.length>lt.length)return 1;if(this.length<lt.length)return-1;for(var mt=0,gt=this.length-1;gt>=0;gt--){var bt=this.words[gt]|0,St=lt.words[gt]|0;if(bt!==St){bt<St?mt=-1:bt>St&&(mt=1);break}}return mt},rt.prototype.gtn=function(lt){return this.cmpn(lt)===1},rt.prototype.gt=function(lt){return this.cmp(lt)===1},rt.prototype.gten=function(lt){return this.cmpn(lt)>=0},rt.prototype.gte=function(lt){return this.cmp(lt)>=0},rt.prototype.ltn=function(lt){return this.cmpn(lt)===-1},rt.prototype.lt=function(lt){return this.cmp(lt)===-1},rt.prototype.lten=function(lt){return this.cmpn(lt)<=0},rt.prototype.lte=function(lt){return this.cmp(lt)<=0},rt.prototype.eqn=function(lt){return this.cmpn(lt)===0},rt.prototype.eq=function(lt){return this.cmp(lt)===0},rt.red=function(lt){return new tr(lt)},rt.prototype.toRed=function(lt){return et(!this.red,"Already a number in reduction context"),et(this.negative===0,"red works only with positives"),lt.convertTo(this)._forceRed(lt)},rt.prototype.fromRed=function(){return et(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},rt.prototype._forceRed=function(lt){return this.red=lt,this},rt.prototype.forceRed=function(lt){return et(!this.red,"Already a number in reduction context"),this._forceRed(lt)},rt.prototype.redAdd=function(lt){return et(this.red,"redAdd works only with red numbers"),this.red.add(this,lt)},rt.prototype.redIAdd=function(lt){return et(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,lt)},rt.prototype.redSub=function(lt){return et(this.red,"redSub works only with red numbers"),this.red.sub(this,lt)},rt.prototype.redISub=function(lt){return et(this.red,"redISub works only with red numbers"),this.red.isub(this,lt)},rt.prototype.redShl=function(lt){return et(this.red,"redShl works only with red numbers"),this.red.shl(this,lt)},rt.prototype.redMul=function(lt){return et(this.red,"redMul works only with red numbers"),this.red._verify2(this,lt),this.red.mul(this,lt)},rt.prototype.redIMul=function(lt){return et(this.red,"redMul works only with red numbers"),this.red._verify2(this,lt),this.red.imul(this,lt)},rt.prototype.redSqr=function(){return et(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},rt.prototype.redISqr=function(){return et(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},rt.prototype.redSqrt=function(){return et(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},rt.prototype.redInvm=function(){return et(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},rt.prototype.redNeg=function(){return et(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},rt.prototype.redPow=function(lt){return et(this.red&&!lt.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,lt)};var jt={k256:null,p224:null,p192:null,p25519:null};function kt(Mt,lt){this.name=Mt,this.p=new rt(lt,16),this.n=this.p.bitLength(),this.k=new rt(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}kt.prototype._tmp=function(){var lt=new rt(null);return lt.words=new Array(Math.ceil(this.n/13)),lt},kt.prototype.ireduce=function(lt){var mt=lt,gt;do this.split(mt,this.tmp),mt=this.imulK(mt),mt=mt.iadd(this.tmp),gt=mt.bitLength();while(gt>this.n);var bt=gt<this.n?-1:mt.ucmp(this.p);return bt===0?(mt.words[0]=0,mt.length=1):bt>0?mt.isub(this.p):mt.strip!==void 0?mt.strip():mt._strip(),mt},kt.prototype.split=function(lt,mt){lt.iushrn(this.n,0,mt)},kt.prototype.imulK=function(lt){return lt.imul(this.k)};function Lt(){kt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}tt(Lt,kt),Lt.prototype.split=function(lt,mt){for(var gt=4194303,bt=Math.min(lt.length,9),St=0;St<bt;St++)mt.words[St]=lt.words[St];if(mt.length=bt,lt.length<=9){lt.words[0]=0,lt.length=1;return}var Nt=lt.words[9];for(mt.words[mt.length++]=Nt&gt,St=10;St<lt.length;St++){var Pt=lt.words[St]|0;lt.words[St-10]=(Pt&gt)<<4|Nt>>>22,Nt=Pt}Nt>>>=22,lt.words[St-10]=Nt,Nt===0&&lt.length>10?lt.length-=10:lt.length-=9},Lt.prototype.imulK=function(lt){lt.words[lt.length]=0,lt.words[lt.length+1]=0,lt.length+=2;for(var mt=0,gt=0;gt<lt.length;gt++){var bt=lt.words[gt]|0;mt+=bt*977,lt.words[gt]=mt&67108863,mt=bt*64+(mt/67108864|0)}return lt.words[lt.length-1]===0&&(lt.length--,lt.words[lt.length-1]===0&&lt.length--),lt};function Bt(){kt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}tt(Bt,kt);function Gt(){kt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}tt(Gt,kt);function er(){kt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}tt(er,kt),er.prototype.imulK=function(lt){for(var mt=0,gt=0;gt<lt.length;gt++){var bt=(lt.words[gt]|0)*19+mt,St=bt&67108863;bt>>>=26,lt.words[gt]=St,mt=bt}return mt!==0&&(lt.words[lt.length++]=mt),lt},rt._prime=function(lt){if(jt[lt])return jt[lt];var mt;if(lt==="k256")mt=new Lt;else if(lt==="p224")mt=new Bt;else if(lt==="p192")mt=new Gt;else if(lt==="p25519")mt=new er;else throw new Error("Unknown prime "+lt);return jt[lt]=mt,mt};function tr(Mt){if(typeof Mt=="string"){var lt=rt._prime(Mt);this.m=lt.p,this.prime=lt}else et(Mt.gtn(1),"modulus must be greater than 1"),this.m=Mt,this.prime=null}tr.prototype._verify1=function(lt){et(lt.negative===0,"red works only with positives"),et(lt.red,"red works only with red numbers")},tr.prototype._verify2=function(lt,mt){et((lt.negative|mt.negative)===0,"red works only with positives"),et(lt.red&&lt.red===mt.red,"red works only with red numbers")},tr.prototype.imod=function(lt){return this.prime?this.prime.ireduce(lt)._forceRed(this):lt.umod(this.m)._forceRed(this)},tr.prototype.neg=function(lt){return lt.isZero()?lt.clone():this.m.sub(lt)._forceRed(this)},tr.prototype.add=function(lt,mt){this._verify2(lt,mt);var gt=lt.add(mt);return gt.cmp(this.m)>=0&&gt.isub(this.m),gt._forceRed(this)},tr.prototype.iadd=function(lt,mt){this._verify2(lt,mt);var gt=lt.iadd(mt);return gt.cmp(this.m)>=0&&gt.isub(this.m),gt},tr.prototype.sub=function(lt,mt){this._verify2(lt,mt);var gt=lt.sub(mt);return gt.cmpn(0)<0&&gt.iadd(this.m),gt._forceRed(this)},tr.prototype.isub=function(lt,mt){this._verify2(lt,mt);var gt=lt.isub(mt);return gt.cmpn(0)<0&&gt.iadd(this.m),gt},tr.prototype.shl=function(lt,mt){return this._verify1(lt),this.imod(lt.ushln(mt))},tr.prototype.imul=function(lt,mt){return this._verify2(lt,mt),this.imod(lt.imul(mt))},tr.prototype.mul=function(lt,mt){return this._verify2(lt,mt),this.imod(lt.mul(mt))},tr.prototype.isqr=function(lt){return this.imul(lt,lt.clone())},tr.prototype.sqr=function(lt){return this.mul(lt,lt)},tr.prototype.sqrt=function(lt){if(lt.isZero())return lt.clone();var mt=this.m.andln(3);if(et(mt%2===1),mt===3){var gt=this.m.add(new rt(1)).iushrn(2);return this.pow(lt,gt)}for(var bt=this.m.subn(1),St=0;!bt.isZero()&&bt.andln(1)===0;)St++,bt.iushrn(1);et(!bt.isZero());var Nt=new rt(1).toRed(this),Pt=Nt.redNeg(),Tt=this.m.subn(1).iushrn(1),pt=this.m.bitLength();for(pt=new rt(2*pt*pt).toRed(this);this.pow(pt,Tt).cmp(Pt)!==0;)pt.redIAdd(Pt);for(var Rt=this.pow(pt,bt),zt=this.pow(lt,bt.addn(1).iushrn(1)),Yt=this.pow(lt,bt),ir=St;Yt.cmp(Nt)!==0;){for(var ur=Yt,cr=0;ur.cmp(Nt)!==0;cr++)ur=ur.redSqr();et(cr<ir);var rr=this.pow(Rt,new rt(1).iushln(ir-cr-1));zt=zt.redMul(rr),Rt=rr.redSqr(),Yt=Yt.redMul(Rt),ir=cr}return zt},tr.prototype.invm=function(lt){var mt=lt._invmp(this.m);return mt.negative!==0?(mt.negative=0,this.imod(mt).redNeg()):this.imod(mt)},tr.prototype.pow=function(lt,mt){if(mt.isZero())return new rt(1).toRed(this);if(mt.cmpn(1)===0)return lt.clone();var gt=4,bt=new Array(1<<gt);bt[0]=new rt(1).toRed(this),bt[1]=lt;for(var St=2;St<bt.length;St++)bt[St]=this.mul(bt[St-1],lt);var Nt=bt[0],Pt=0,Tt=0,pt=mt.bitLength()%26;for(pt===0&&(pt=26),St=mt.length-1;St>=0;St--){for(var Rt=mt.words[St],zt=pt-1;zt>=0;zt--){var Yt=Rt>>zt&1;if(Nt!==bt[0]&&(Nt=this.sqr(Nt)),Yt===0&&Pt===0){Tt=0;continue}Pt<<=1,Pt|=Yt,Tt++,!(Tt!==gt&&(St!==0||zt!==0))&&(Nt=this.mul(Nt,bt[Pt]),Tt=0,Pt=0)}pt=26}return Nt},tr.prototype.convertTo=function(lt){var mt=lt.umod(this.m);return mt===lt?mt.clone():mt},tr.prototype.convertFrom=function(lt){var mt=lt.clone();return mt.red=null,mt},rt.mont=function(lt){return new ar(lt)};function ar(Mt){tr.call(this,Mt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new rt(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}tt(ar,tr),ar.prototype.convertTo=function(lt){return this.imod(lt.ushln(this.shift))},ar.prototype.convertFrom=function(lt){var mt=this.imod(lt.mul(this.rinv));return mt.red=null,mt},ar.prototype.imul=function(lt,mt){if(lt.isZero()||mt.isZero())return lt.words[0]=0,lt.length=1,lt;var gt=lt.imul(mt),bt=gt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),St=gt.isub(bt).iushrn(this.shift),Nt=St;return St.cmp(this.m)>=0?Nt=St.isub(this.m):St.cmpn(0)<0&&(Nt=St.iadd(this.m)),Nt._forceRed(this)},ar.prototype.mul=function(lt,mt){if(lt.isZero()||mt.isZero())return new rt(0)._forceRed(this);var gt=lt.mul(mt),bt=gt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),St=gt.isub(bt).iushrn(this.shift),Nt=St;return St.cmp(this.m)>=0?Nt=St.isub(this.m):St.cmpn(0)<0&&(Nt=St.iadd(this.m)),Nt._forceRed(this)},ar.prototype.invm=function(lt){var mt=this.imod(lt._invmp(this.m).mul(this.r2));return mt._forceRed(this)}})(_,commonjsGlobal)}(bn$2)),bn$2.exports}var api={},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(_,$){if(_.indexOf)return _.indexOf($);for(var _e=0;_e<_.length;_e++)if(_[_e]===$)return _e;return-1},Object_keys=function(_){if(Object.keys)return Object.keys(_);var $=[];for(var _e in _)$.push(_e);return $},forEach=function(_,$){if(_.forEach)return _.forEach($);for(var _e=0;_e<_.length;_e++)$(_[_e],_e,_)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(_,$,_e){Object.defineProperty(_,$,{writable:!0,enumerable:!1,configurable:!0,value:_e})}}catch{return function($,_e,et){$[_e]=et}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function($){if(!(this instanceof Script))return new Script($);this.code=$};Script.prototype.runInContext=function(_){if(!(_ instanceof Context))throw new TypeError("needs a 'context' argument.");var $=document.createElement("iframe");$.style||($.style={}),$.style.display="none",document.body.appendChild($);var _e=$.contentWindow,et=_e.eval,tt=_e.execScript;!et&&tt&&(tt.call(_e,"null"),et=_e.eval),forEach(Object_keys(_),function(it){_e[it]=_[it]}),forEach(globals,function(it){_[it]&&(_e[it]=_[it])});var rt=Object_keys(_e),nt=et.call(_e,this.code);return forEach(Object_keys(_e),function(it){(it in _||indexOf(rt,it)===-1)&&(_[it]=_e[it])}),forEach(globals,function(it){it in _||defineProp(_,it,_e[it])}),document.body.removeChild($),nt},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(_){var $=Script.createContext(_),_e=this.runInContext($);return _&&forEach(Object_keys($),function(et){_[et]=$[et]}),_e},forEach(Object_keys(Script.prototype),function(_){exports[_]=Script[_]=function($){var _e=Script($);return _e[_].apply(_e,[].slice.call(arguments,1))}}),exports.isContext=function(_){return _ instanceof Context},exports.createScript=function(_){return exports.Script(_)},exports.createContext=Script.createContext=function(_){var $=new Context;return typeof _=="object"&&forEach(Object_keys(_),function(_e){$[_e]=_[_e]}),$}}(vmBrowserify)),vmBrowserify}var hasRequiredApi;function requireApi(){return hasRequiredApi||(hasRequiredApi=1,function(_){var $=requireAsn1$1(),_e=requireInherits_browser(),et=_;et.define=function(nt,it){return new tt(nt,it)};function tt(rt,nt){this.name=rt,this.body=nt,this.decoders={},this.encoders={}}tt.prototype._createNamed=function(nt){var it;try{it=requireVmBrowserify().runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{it=function(at){this._initNamed(at)}}return _e(it,nt),it.prototype._initNamed=function(at){nt.call(this,at)},new it(this)},tt.prototype._getDecoder=function(nt){return nt=nt||"der",this.decoders.hasOwnProperty(nt)||(this.decoders[nt]=this._createNamed($.decoders[nt])),this.decoders[nt]},tt.prototype.decode=function(nt,it,st){return this._getDecoder(it).decode(nt,st)},tt.prototype._getEncoder=function(nt){return nt=nt||"der",this.encoders.hasOwnProperty(nt)||(this.encoders[nt]=this._createNamed($.encoders[nt])),this.encoders[nt]},tt.prototype.encode=function(nt,it,st){return this._getEncoder(it).encode(nt,st)}}(api)),api}var base={},reporter={},hasRequiredReporter;function requireReporter(){if(hasRequiredReporter)return reporter;hasRequiredReporter=1;var _=requireInherits_browser();function $(et){this._reporterState={obj:null,path:[],options:et||{},errors:[]}}reporter.Reporter=$,$.prototype.isError=function(tt){return tt instanceof _e},$.prototype.save=function(){var tt=this._reporterState;return{obj:tt.obj,pathLen:tt.path.length}},$.prototype.restore=function(tt){var rt=this._reporterState;rt.obj=tt.obj,rt.path=rt.path.slice(0,tt.pathLen)},$.prototype.enterKey=function(tt){return this._reporterState.path.push(tt)},$.prototype.exitKey=function(tt){var rt=this._reporterState;rt.path=rt.path.slice(0,tt-1)},$.prototype.leaveKey=function(tt,rt,nt){var it=this._reporterState;this.exitKey(tt),it.obj!==null&&(it.obj[rt]=nt)},$.prototype.path=function(){return this._reporterState.path.join("/")},$.prototype.enterObject=function(){var tt=this._reporterState,rt=tt.obj;return tt.obj={},rt},$.prototype.leaveObject=function(tt){var rt=this._reporterState,nt=rt.obj;return rt.obj=tt,nt},$.prototype.error=function(tt){var rt,nt=this._reporterState,it=tt instanceof _e;if(it?rt=tt:rt=new _e(nt.path.map(function(st){return"["+JSON.stringify(st)+"]"}).join(""),tt.message||tt,tt.stack),!nt.options.partial)throw rt;return it||nt.errors.push(rt),rt},$.prototype.wrapResult=function(tt){var rt=this._reporterState;return rt.options.partial?{result:this.isError(tt)?null:tt,errors:rt.errors}:tt};function _e(et,tt){this.path=et,this.rethrow(tt)}return _(_e,Error),_e.prototype.rethrow=function(tt){if(this.message=tt+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,_e),!this.stack)try{throw new Error(this.message)}catch(rt){this.stack=rt.stack}return this},reporter}var buffer={},hasRequiredBuffer;function requireBuffer(){if(hasRequiredBuffer)return buffer;hasRequiredBuffer=1;var _=requireInherits_browser(),$=requireBase().Reporter,_e=require$$0$2.Buffer;function et(rt,nt){if($.call(this,nt),!_e.isBuffer(rt)){this.error("Input not Buffer");return}this.base=rt,this.offset=0,this.length=rt.length}_(et,$),buffer.DecoderBuffer=et,et.prototype.save=function(){return{offset:this.offset,reporter:$.prototype.save.call(this)}},et.prototype.restore=function(nt){var it=new et(this.base);return it.offset=nt.offset,it.length=this.offset,this.offset=nt.offset,$.prototype.restore.call(this,nt.reporter),it},et.prototype.isEmpty=function(){return this.offset===this.length},et.prototype.readUInt8=function(nt){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(nt||"DecoderBuffer overrun")},et.prototype.skip=function(nt,it){if(!(this.offset+nt<=this.length))return this.error(it||"DecoderBuffer overrun");var st=new et(this.base);return st._reporterState=this._reporterState,st.offset=this.offset,st.length=this.offset+nt,this.offset+=nt,st},et.prototype.raw=function(nt){return this.base.slice(nt?nt.offset:this.offset,this.length)};function tt(rt,nt){if(Array.isArray(rt))this.length=0,this.value=rt.map(function(it){return it instanceof tt||(it=new tt(it,nt)),this.length+=it.length,it},this);else if(typeof rt=="number"){if(!(0<=rt&&rt<=255))return nt.error("non-byte EncoderBuffer value");this.value=rt,this.length=1}else if(typeof rt=="string")this.value=rt,this.length=_e.byteLength(rt);else if(_e.isBuffer(rt))this.value=rt,this.length=rt.length;else return nt.error("Unsupported type: "+typeof rt)}return buffer.EncoderBuffer=tt,tt.prototype.join=function(nt,it){return nt||(nt=new _e(this.length)),it||(it=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(st){st.join(nt,it),it+=st.length}):(typeof this.value=="number"?nt[it]=this.value:typeof this.value=="string"?nt.write(this.value,it):_e.isBuffer(this.value)&&this.value.copy(nt,it),it+=this.length)),nt},buffer}var node,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;var _=requireBase().Reporter,$=requireBase().EncoderBuffer,_e=requireBase().DecoderBuffer,et=requireMinimalisticAssert(),tt=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],rt=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(tt),nt=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function it(at,ot){var dt={};this._baseState=dt,dt.enc=at,dt.parent=ot||null,dt.children=null,dt.tag=null,dt.args=null,dt.reverseArgs=null,dt.choice=null,dt.optional=!1,dt.any=!1,dt.obj=!1,dt.use=null,dt.useDecoder=null,dt.key=null,dt.default=null,dt.explicit=null,dt.implicit=null,dt.contains=null,dt.parent||(dt.children=[],this._wrap())}node=it;var st=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return it.prototype.clone=function(){var ot=this._baseState,dt={};st.forEach(function(yt){dt[yt]=ot[yt]});var ht=new this.constructor(dt.parent);return ht._baseState=dt,ht},it.prototype._wrap=function(){var ot=this._baseState;rt.forEach(function(dt){this[dt]=function(){var yt=new this.constructor(this);return ot.children.push(yt),yt[dt].apply(yt,arguments)}},this)},it.prototype._init=function(ot){var dt=this._baseState;et(dt.parent===null),ot.call(this),dt.children=dt.children.filter(function(ht){return ht._baseState.parent===this},this),et.equal(dt.children.length,1,"Root node can have only one child")},it.prototype._useArgs=function(ot){var dt=this._baseState,ht=ot.filter(function(yt){return yt instanceof this.constructor},this);ot=ot.filter(function(yt){return!(yt instanceof this.constructor)},this),ht.length!==0&&(et(dt.children===null),dt.children=ht,ht.forEach(function(yt){yt._baseState.parent=this},this)),ot.length!==0&&(et(dt.args===null),dt.args=ot,dt.reverseArgs=ot.map(function(yt){if(typeof yt!="object"||yt.constructor!==Object)return yt;var vt={};return Object.keys(yt).forEach(function(xt){xt==(xt|0)&&(xt|=0);var wt=yt[xt];vt[wt]=xt}),vt}))},nt.forEach(function(at){it.prototype[at]=function(){var dt=this._baseState;throw new Error(at+" not implemented for encoding: "+dt.enc)}}),tt.forEach(function(at){it.prototype[at]=function(){var dt=this._baseState,ht=Array.prototype.slice.call(arguments);return et(dt.tag===null),dt.tag=at,this._useArgs(ht),this}}),it.prototype.use=function(ot){et(ot);var dt=this._baseState;return et(dt.use===null),dt.use=ot,this},it.prototype.optional=function(){var ot=this._baseState;return ot.optional=!0,this},it.prototype.def=function(ot){var dt=this._baseState;return et(dt.default===null),dt.default=ot,dt.optional=!0,this},it.prototype.explicit=function(ot){var dt=this._baseState;return et(dt.explicit===null&&dt.implicit===null),dt.explicit=ot,this},it.prototype.implicit=function(ot){var dt=this._baseState;return et(dt.explicit===null&&dt.implicit===null),dt.implicit=ot,this},it.prototype.obj=function(){var ot=this._baseState,dt=Array.prototype.slice.call(arguments);return ot.obj=!0,dt.length!==0&&this._useArgs(dt),this},it.prototype.key=function(ot){var dt=this._baseState;return et(dt.key===null),dt.key=ot,this},it.prototype.any=function(){var ot=this._baseState;return ot.any=!0,this},it.prototype.choice=function(ot){var dt=this._baseState;return et(dt.choice===null),dt.choice=ot,this._useArgs(Object.keys(ot).map(function(ht){return ot[ht]})),this},it.prototype.contains=function(ot){var dt=this._baseState;return et(dt.use===null),dt.contains=ot,this},it.prototype._decode=function(ot,dt){var ht=this._baseState;if(ht.parent===null)return ot.wrapResult(ht.children[0]._decode(ot,dt));var yt=ht.default,vt=!0,xt=null;if(ht.key!==null&&(xt=ot.enterKey(ht.key)),ht.optional){var wt=null;if(ht.explicit!==null?wt=ht.explicit:ht.implicit!==null?wt=ht.implicit:ht.tag!==null&&(wt=ht.tag),wt===null&&!ht.any){var Et=ot.save();try{ht.choice===null?this._decodeGeneric(ht.tag,ot,dt):this._decodeChoice(ot,dt),vt=!0}catch{vt=!1}ot.restore(Et)}else if(vt=this._peekTag(ot,wt,ht.any),ot.isError(vt))return vt}var At;if(ht.obj&&vt&&(At=ot.enterObject()),vt){if(ht.explicit!==null){var jt=this._decodeTag(ot,ht.explicit);if(ot.isError(jt))return jt;ot=jt}var kt=ot.offset;if(ht.use===null&&ht.choice===null){if(ht.any)var Et=ot.save();var Lt=this._decodeTag(ot,ht.implicit!==null?ht.implicit:ht.tag,ht.any);if(ot.isError(Lt))return Lt;ht.any?yt=ot.raw(Et):ot=Lt}if(dt&&dt.track&&ht.tag!==null&&dt.track(ot.path(),kt,ot.length,"tagged"),dt&&dt.track&&ht.tag!==null&&dt.track(ot.path(),ot.offset,ot.length,"content"),ht.any?yt=yt:ht.choice===null?yt=this._decodeGeneric(ht.tag,ot,dt):yt=this._decodeChoice(ot,dt),ot.isError(yt))return yt;if(!ht.any&&ht.choice===null&&ht.children!==null&&ht.children.forEach(function(er){er._decode(ot,dt)}),ht.contains&&(ht.tag==="octstr"||ht.tag==="bitstr")){var Bt=new _e(yt);yt=this._getUse(ht.contains,ot._reporterState.obj)._decode(Bt,dt)}}return ht.obj&&vt&&(yt=ot.leaveObject(At)),ht.key!==null&&(yt!==null||vt===!0)?ot.leaveKey(xt,ht.key,yt):xt!==null&&ot.exitKey(xt),yt},it.prototype._decodeGeneric=function(ot,dt,ht){var yt=this._baseState;return ot==="seq"||ot==="set"?null:ot==="seqof"||ot==="setof"?this._decodeList(dt,ot,yt.args[0],ht):/str$/.test(ot)?this._decodeStr(dt,ot,ht):ot==="objid"&&yt.args?this._decodeObjid(dt,yt.args[0],yt.args[1],ht):ot==="objid"?this._decodeObjid(dt,null,null,ht):ot==="gentime"||ot==="utctime"?this._decodeTime(dt,ot,ht):ot==="null_"?this._decodeNull(dt,ht):ot==="bool"?this._decodeBool(dt,ht):ot==="objDesc"?this._decodeStr(dt,ot,ht):ot==="int"||ot==="enum"?this._decodeInt(dt,yt.args&&yt.args[0],ht):yt.use!==null?this._getUse(yt.use,dt._reporterState.obj)._decode(dt,ht):dt.error("unknown tag: "+ot)},it.prototype._getUse=function(ot,dt){var ht=this._baseState;return ht.useDecoder=this._use(ot,dt),et(ht.useDecoder._baseState.parent===null),ht.useDecoder=ht.useDecoder._baseState.children[0],ht.implicit!==ht.useDecoder._baseState.implicit&&(ht.useDecoder=ht.useDecoder.clone(),ht.useDecoder._baseState.implicit=ht.implicit),ht.useDecoder},it.prototype._decodeChoice=function(ot,dt){var ht=this._baseState,yt=null,vt=!1;return Object.keys(ht.choice).some(function(xt){var wt=ot.save(),Et=ht.choice[xt];try{var At=Et._decode(ot,dt);if(ot.isError(At))return!1;yt={type:xt,value:At},vt=!0}catch{return ot.restore(wt),!1}return!0},this),vt?yt:ot.error("Choice not matched")},it.prototype._createEncoderBuffer=function(ot){return new $(ot,this.reporter)},it.prototype._encode=function(ot,dt,ht){var yt=this._baseState;if(!(yt.default!==null&&yt.default===ot)){var vt=this._encodeValue(ot,dt,ht);if(vt!==void 0&&!this._skipDefault(vt,dt,ht))return vt}},it.prototype._encodeValue=function(ot,dt,ht){var yt=this._baseState;if(yt.parent===null)return yt.children[0]._encode(ot,dt||new _);var Et=null;if(this.reporter=dt,yt.optional&&ot===void 0)if(yt.default!==null)ot=yt.default;else return;var vt=null,xt=!1;if(yt.any)Et=this._createEncoderBuffer(ot);else if(yt.choice)Et=this._encodeChoice(ot,dt);else if(yt.contains)vt=this._getUse(yt.contains,ht)._encode(ot,dt),xt=!0;else if(yt.children)vt=yt.children.map(function(kt){if(kt._baseState.tag==="null_")return kt._encode(null,dt,ot);if(kt._baseState.key===null)return dt.error("Child should have a key");var Lt=dt.enterKey(kt._baseState.key);if(typeof ot!="object")return dt.error("Child expected, but input is not object");var Bt=kt._encode(ot[kt._baseState.key],dt,ot);return dt.leaveKey(Lt),Bt},this).filter(function(kt){return kt}),vt=this._createEncoderBuffer(vt);else if(yt.tag==="seqof"||yt.tag==="setof"){if(!(yt.args&&yt.args.length===1))return dt.error("Too many args for : "+yt.tag);if(!Array.isArray(ot))return dt.error("seqof/setof, but data is not Array");var wt=this.clone();wt._baseState.implicit=null,vt=this._createEncoderBuffer(ot.map(function(kt){var Lt=this._baseState;return this._getUse(Lt.args[0],ot)._encode(kt,dt)},wt))}else yt.use!==null?Et=this._getUse(yt.use,ht)._encode(ot,dt):(vt=this._encodePrimitive(yt.tag,ot),xt=!0);var Et;if(!yt.any&&yt.choice===null){var At=yt.implicit!==null?yt.implicit:yt.tag,jt=yt.implicit===null?"universal":"context";At===null?yt.use===null&&dt.error("Tag could be omitted only for .use()"):yt.use===null&&(Et=this._encodeComposite(At,xt,jt,vt))}return yt.explicit!==null&&(Et=this._encodeComposite(yt.explicit,!1,"context",Et)),Et},it.prototype._encodeChoice=function(ot,dt){var ht=this._baseState,yt=ht.choice[ot.type];return yt||et(!1,ot.type+" not found in "+JSON.stringify(Object.keys(ht.choice))),yt._encode(ot.value,dt)},it.prototype._encodePrimitive=function(ot,dt){var ht=this._baseState;if(/str$/.test(ot))return this._encodeStr(dt,ot);if(ot==="objid"&&ht.args)return this._encodeObjid(dt,ht.reverseArgs[0],ht.args[1]);if(ot==="objid")return this._encodeObjid(dt,null,null);if(ot==="gentime"||ot==="utctime")return this._encodeTime(dt,ot);if(ot==="null_")return this._encodeNull();if(ot==="int"||ot==="enum")return this._encodeInt(dt,ht.args&&ht.reverseArgs[0]);if(ot==="bool")return this._encodeBool(dt);if(ot==="objDesc")return this._encodeStr(dt,ot);throw new Error("Unsupported tag: "+ot)},it.prototype._isNumstr=function(ot){return/^[0-9 ]*$/.test(ot)},it.prototype._isPrintstr=function(ot){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(ot)},node}var hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,function(_){var $=_;$.Reporter=requireReporter().Reporter,$.DecoderBuffer=requireBuffer().DecoderBuffer,$.EncoderBuffer=requireBuffer().EncoderBuffer,$.Node=requireNode()}(base)),base}var constants$1={},der={},hasRequiredDer$2;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,function(_){var $=requireConstants();_.tagClass={0:"universal",1:"application",2:"context",3:"private"},_.tagClassByName=$._reverse(_.tagClass),_.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},_.tagByName=$._reverse(_.tag)}(der)),der}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,function(_){var $=_;$._reverse=function(et){var tt={};return Object.keys(et).forEach(function(rt){(rt|0)==rt&&(rt=rt|0);var nt=et[rt];tt[nt]=rt}),tt},$.der=requireDer$2()}(constants$1)),constants$1}var decoders={},der_1$1,hasRequiredDer$1;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;var _=requireInherits_browser(),$=requireAsn1$1(),_e=$.base,et=$.bignum,tt=$.constants.der;function rt(at){this.enc="der",this.name=at.name,this.entity=at,this.tree=new nt,this.tree._init(at.body)}der_1$1=rt,rt.prototype.decode=function(ot,dt){return ot instanceof _e.DecoderBuffer||(ot=new _e.DecoderBuffer(ot,dt)),this.tree._decode(ot,dt)};function nt(at){_e.Node.call(this,"der",at)}_(nt,_e.Node),nt.prototype._peekTag=function(ot,dt,ht){if(ot.isEmpty())return!1;var yt=ot.save(),vt=it(ot,'Failed to peek tag: "'+dt+'"');return ot.isError(vt)?vt:(ot.restore(yt),vt.tag===dt||vt.tagStr===dt||vt.tagStr+"of"===dt||ht)},nt.prototype._decodeTag=function(ot,dt,ht){var yt=it(ot,'Failed to decode tag of "'+dt+'"');if(ot.isError(yt))return yt;var vt=st(ot,yt.primitive,'Failed to get length of "'+dt+'"');if(ot.isError(vt))return vt;if(!ht&&yt.tag!==dt&&yt.tagStr!==dt&&yt.tagStr+"of"!==dt)return ot.error('Failed to match tag: "'+dt+'"');if(yt.primitive||vt!==null)return ot.skip(vt,'Failed to match body of: "'+dt+'"');var xt=ot.save(),wt=this._skipUntilEnd(ot,'Failed to skip indefinite length body: "'+this.tag+'"');return ot.isError(wt)?wt:(vt=ot.offset-xt.offset,ot.restore(xt),ot.skip(vt,'Failed to match body of: "'+dt+'"'))},nt.prototype._skipUntilEnd=function(ot,dt){for(;;){var ht=it(ot,dt);if(ot.isError(ht))return ht;var yt=st(ot,ht.primitive,dt);if(ot.isError(yt))return yt;var vt;if(ht.primitive||yt!==null?vt=ot.skip(yt):vt=this._skipUntilEnd(ot,dt),ot.isError(vt))return vt;if(ht.tagStr==="end")break}},nt.prototype._decodeList=function(ot,dt,ht,yt){for(var vt=[];!ot.isEmpty();){var xt=this._peekTag(ot,"end");if(ot.isError(xt))return xt;var wt=ht.decode(ot,"der",yt);if(ot.isError(wt)&&xt)break;vt.push(wt)}return vt},nt.prototype._decodeStr=function(ot,dt){if(dt==="bitstr"){var ht=ot.readUInt8();return ot.isError(ht)?ht:{unused:ht,data:ot.raw()}}else if(dt==="bmpstr"){var yt=ot.raw();if(yt.length%2===1)return ot.error("Decoding of string type: bmpstr length mismatch");for(var vt="",xt=0;xt<yt.length/2;xt++)vt+=String.fromCharCode(yt.readUInt16BE(xt*2));return vt}else if(dt==="numstr"){var wt=ot.raw().toString("ascii");return this._isNumstr(wt)?wt:ot.error("Decoding of string type: numstr unsupported characters")}else{if(dt==="octstr")return ot.raw();if(dt==="objDesc")return ot.raw();if(dt==="printstr"){var Et=ot.raw().toString("ascii");return this._isPrintstr(Et)?Et:ot.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(dt)?ot.raw().toString():ot.error("Decoding of string type: "+dt+" unsupported")}},nt.prototype._decodeObjid=function(ot,dt,ht){for(var yt,vt=[],xt=0;!ot.isEmpty();){var wt=ot.readUInt8();xt<<=7,xt|=wt&127,wt&128||(vt.push(xt),xt=0)}wt&128&&vt.push(xt);var Et=vt[0]/40|0,At=vt[0]%40;if(ht?yt=vt:yt=[Et,At].concat(vt.slice(1)),dt){var jt=dt[yt.join(" ")];jt===void 0&&(jt=dt[yt.join(".")]),jt!==void 0&&(yt=jt)}return yt},nt.prototype._decodeTime=function(ot,dt){var ht=ot.raw().toString();if(dt==="gentime")var yt=ht.slice(0,4)|0,vt=ht.slice(4,6)|0,xt=ht.slice(6,8)|0,wt=ht.slice(8,10)|0,Et=ht.slice(10,12)|0,At=ht.slice(12,14)|0;else if(dt==="utctime"){var yt=ht.slice(0,2)|0,vt=ht.slice(2,4)|0,xt=ht.slice(4,6)|0,wt=ht.slice(6,8)|0,Et=ht.slice(8,10)|0,At=ht.slice(10,12)|0;yt<70?yt=2e3+yt:yt=1900+yt}else return ot.error("Decoding "+dt+" time is not supported yet");return Date.UTC(yt,vt-1,xt,wt,Et,At,0)},nt.prototype._decodeNull=function(ot){return null},nt.prototype._decodeBool=function(ot){var dt=ot.readUInt8();return ot.isError(dt)?dt:dt!==0},nt.prototype._decodeInt=function(ot,dt){var ht=ot.raw(),yt=new et(ht);return dt&&(yt=dt[yt.toString(10)]||yt),yt},nt.prototype._use=function(ot,dt){return typeof ot=="function"&&(ot=ot(dt)),ot._getDecoder("der").tree};function it(at,ot){var dt=at.readUInt8(ot);if(at.isError(dt))return dt;var ht=tt.tagClass[dt>>6],yt=(dt&32)===0;if((dt&31)===31){var vt=dt;for(dt=0;(vt&128)===128;){if(vt=at.readUInt8(ot),at.isError(vt))return vt;dt<<=7,dt|=vt&127}}else dt&=31;var xt=tt.tag[dt];return{cls:ht,primitive:yt,tag:dt,tagStr:xt}}function st(at,ot,dt){var ht=at.readUInt8(dt);if(at.isError(ht))return ht;if(!ot&&ht===128)return null;if(!(ht&128))return ht;var yt=ht&127;if(yt>4)return at.error("length octect is too long");ht=0;for(var vt=0;vt<yt;vt++){ht<<=8;var xt=at.readUInt8(dt);if(at.isError(xt))return xt;ht|=xt}return ht}return der_1$1}var pem$1,hasRequiredPem$1;function requirePem$1(){if(hasRequiredPem$1)return pem$1;hasRequiredPem$1=1;var _=requireInherits_browser(),$=require$$0$2.Buffer,_e=requireDer$1();function et(tt){_e.call(this,tt),this.enc="pem"}return _(et,_e),pem$1=et,et.prototype.decode=function(rt,nt){for(var it=rt.toString().split(/[\r\n]+/g),st=nt.label.toUpperCase(),at=/^-----(BEGIN|END) ([^-]+)-----$/,ot=-1,dt=-1,ht=0;ht<it.length;ht++){var yt=it[ht].match(at);if(yt!==null&&yt[2]===st)if(ot===-1){if(yt[1]!=="BEGIN")break;ot=ht}else{if(yt[1]!=="END")break;dt=ht;break}}if(ot===-1||dt===-1)throw new Error("PEM section not found for: "+st);var vt=it.slice(ot+1,dt).join("");vt.replace(/[^a-z0-9\+\/=]+/gi,"");var xt=new $(vt,"base64");return _e.prototype.decode.call(this,xt,nt)},pem$1}var hasRequiredDecoders;function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,function(_){var $=_;$.der=requireDer$1(),$.pem=requirePem$1()}(decoders)),decoders}var encoders={},der_1,hasRequiredDer;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;var _=requireInherits_browser(),$=require$$0$2.Buffer,_e=requireAsn1$1(),et=_e.base,tt=_e.constants.der;function rt(at){this.enc="der",this.name=at.name,this.entity=at,this.tree=new nt,this.tree._init(at.body)}der_1=rt,rt.prototype.encode=function(ot,dt){return this.tree._encode(ot,dt).join()};function nt(at){et.Node.call(this,"der",at)}_(nt,et.Node),nt.prototype._encodeComposite=function(ot,dt,ht,yt){var vt=st(ot,dt,ht,this.reporter);if(yt.length<128){var Et=new $(2);return Et[0]=vt,Et[1]=yt.length,this._createEncoderBuffer([Et,yt])}for(var xt=1,wt=yt.length;wt>=256;wt>>=8)xt++;var Et=new $(2+xt);Et[0]=vt,Et[1]=128|xt;for(var wt=1+xt,At=yt.length;At>0;wt--,At>>=8)Et[wt]=At&255;return this._createEncoderBuffer([Et,yt])},nt.prototype._encodeStr=function(ot,dt){if(dt==="bitstr")return this._createEncoderBuffer([ot.unused|0,ot.data]);if(dt==="bmpstr"){for(var ht=new $(ot.length*2),yt=0;yt<ot.length;yt++)ht.writeUInt16BE(ot.charCodeAt(yt),yt*2);return this._createEncoderBuffer(ht)}else return dt==="numstr"?this._isNumstr(ot)?this._createEncoderBuffer(ot):this.reporter.error("Encoding of string type: numstr supports only digits and space"):dt==="printstr"?this._isPrintstr(ot)?this._createEncoderBuffer(ot):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(dt)?this._createEncoderBuffer(ot):dt==="objDesc"?this._createEncoderBuffer(ot):this.reporter.error("Encoding of string type: "+dt+" unsupported")},nt.prototype._encodeObjid=function(ot,dt,ht){if(typeof ot=="string"){if(!dt)return this.reporter.error("string objid given, but no values map found");if(!dt.hasOwnProperty(ot))return this.reporter.error("objid not found in values map");ot=dt[ot].split(/[\s\.]+/g);for(var yt=0;yt<ot.length;yt++)ot[yt]|=0}else if(Array.isArray(ot)){ot=ot.slice();for(var yt=0;yt<ot.length;yt++)ot[yt]|=0}if(!Array.isArray(ot))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(ot));if(!ht){if(ot[1]>=40)return this.reporter.error("Second objid identifier OOB");ot.splice(0,2,ot[0]*40+ot[1])}for(var vt=0,yt=0;yt<ot.length;yt++){var xt=ot[yt];for(vt++;xt>=128;xt>>=7)vt++}for(var wt=new $(vt),Et=wt.length-1,yt=ot.length-1;yt>=0;yt--){var xt=ot[yt];for(wt[Et--]=xt&127;(xt>>=7)>0;)wt[Et--]=128|xt&127}return this._createEncoderBuffer(wt)};function it(at){return at<10?"0"+at:at}nt.prototype._encodeTime=function(ot,dt){var ht,yt=new Date(ot);return dt==="gentime"?ht=[it(yt.getFullYear()),it(yt.getUTCMonth()+1),it(yt.getUTCDate()),it(yt.getUTCHours()),it(yt.getUTCMinutes()),it(yt.getUTCSeconds()),"Z"].join(""):dt==="utctime"?ht=[it(yt.getFullYear()%100),it(yt.getUTCMonth()+1),it(yt.getUTCDate()),it(yt.getUTCHours()),it(yt.getUTCMinutes()),it(yt.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+dt+" time is not supported yet"),this._encodeStr(ht,"octstr")},nt.prototype._encodeNull=function(){return this._createEncoderBuffer("")},nt.prototype._encodeInt=function(ot,dt){if(typeof ot=="string"){if(!dt)return this.reporter.error("String int or enum given, but no values map");if(!dt.hasOwnProperty(ot))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(ot));ot=dt[ot]}if(typeof ot!="number"&&!$.isBuffer(ot)){var ht=ot.toArray();!ot.sign&&ht[0]&128&&ht.unshift(0),ot=new $(ht)}if($.isBuffer(ot)){var yt=ot.length;ot.length===0&&yt++;var xt=new $(yt);return ot.copy(xt),ot.length===0&&(xt[0]=0),this._createEncoderBuffer(xt)}if(ot<128)return this._createEncoderBuffer(ot);if(ot<256)return this._createEncoderBuffer([0,ot]);for(var yt=1,vt=ot;vt>=256;vt>>=8)yt++;for(var xt=new Array(yt),vt=xt.length-1;vt>=0;vt--)xt[vt]=ot&255,ot>>=8;return xt[0]&128&&xt.unshift(0),this._createEncoderBuffer(new $(xt))},nt.prototype._encodeBool=function(ot){return this._createEncoderBuffer(ot?255:0)},nt.prototype._use=function(ot,dt){return typeof ot=="function"&&(ot=ot(dt)),ot._getEncoder("der").tree},nt.prototype._skipDefault=function(ot,dt,ht){var yt=this._baseState,vt;if(yt.default===null)return!1;var xt=ot.join();if(yt.defaultBuffer===void 0&&(yt.defaultBuffer=this._encodeValue(yt.default,dt,ht).join()),xt.length!==yt.defaultBuffer.length)return!1;for(vt=0;vt<xt.length;vt++)if(xt[vt]!==yt.defaultBuffer[vt])return!1;return!0};function st(at,ot,dt,ht){var yt;if(at==="seqof"?at="seq":at==="setof"&&(at="set"),tt.tagByName.hasOwnProperty(at))yt=tt.tagByName[at];else if(typeof at=="number"&&(at|0)===at)yt=at;else return ht.error("Unknown tag: "+at);return yt>=31?ht.error("Multi-octet tag encoding unsupported"):(ot||(yt|=32),yt|=tt.tagClassByName[dt||"universal"]<<6,yt)}return der_1}var pem,hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem;hasRequiredPem=1;var _=requireInherits_browser(),$=requireDer();function _e(et){$.call(this,et),this.enc="pem"}return _(_e,$),pem=_e,_e.prototype.encode=function(tt,rt){for(var nt=$.prototype.encode.call(this,tt),it=nt.toString("base64"),st=["-----BEGIN "+rt.label+"-----"],at=0;at<it.length;at+=64)st.push(it.slice(at,at+64));return st.push("-----END "+rt.label+"-----"),st.join(`
`)},pem}var hasRequiredEncoders;function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,function(_){var $=_;$.der=requireDer(),$.pem=requirePem()}(encoders)),encoders}var hasRequiredAsn1$1;function requireAsn1$1(){return hasRequiredAsn1$1||(hasRequiredAsn1$1=1,function(_){var $=_;$.bignum=requireBn$2(),$.define=requireApi().define,$.base=requireBase(),$.constants=requireConstants(),$.decoders=requireDecoders(),$.encoders=requireEncoders()}(asn1)),asn1}var certificate,hasRequiredCertificate;function requireCertificate(){if(hasRequiredCertificate)return certificate;hasRequiredCertificate=1;var _=requireAsn1$1(),$=_.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),_e=_.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),et=_.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),tt=_.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(et),this.key("subjectPublicKey").bitstr())}),rt=_.define("RelativeDistinguishedName",function(){this.setof(_e)}),nt=_.define("RDNSequence",function(){this.seqof(rt)}),it=_.define("Name",function(){this.choice({rdnSequence:this.use(nt)})}),st=_.define("Validity",function(){this.seq().obj(this.key("notBefore").use($),this.key("notAfter").use($))}),at=_.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),ot=_.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(et),this.key("issuer").use(it),this.key("validity").use(st),this.key("subject").use(it),this.key("subjectPublicKeyInfo").use(tt),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(at).optional())}),dt=_.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(ot),this.key("signatureAlgorithm").use(et),this.key("signatureValue").bitstr())});return certificate=dt,certificate}var hasRequiredAsn1;function requireAsn1(){if(hasRequiredAsn1)return asn1$1;hasRequiredAsn1=1;var _=requireAsn1$1();asn1$1.certificate=requireCertificate();var $=_.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$1.RSAPrivateKey=$;var _e=_.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$1.RSAPublicKey=_e;var et=_.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),tt=_.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(et),this.key("subjectPublicKey").bitstr())});asn1$1.PublicKey=tt;var rt=_.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(et),this.key("subjectPrivateKey").octstr())});asn1$1.PrivateKey=rt;var nt=_.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$1.EncryptedPrivateKey=nt;var it=_.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$1.DSAPrivateKey=it,asn1$1.DSAparam=_.define("DSAparam",function(){this.int()});var st=_.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),at=_.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(st),this.key("publicKey").optional().explicit(1).bitstr())});return asn1$1.ECPrivateKey=at,asn1$1.signature=_.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),asn1$1}const require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var fixProc,hasRequiredFixProc;function requireFixProc(){if(hasRequiredFixProc)return fixProc;hasRequiredFixProc=1;var _=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,$=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,_e=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,et=requireEvp_bytestokey(),tt=requireBrowser$6(),rt=requireSafeBuffer$1().Buffer;return fixProc=function(nt,it){var st=nt.toString(),at=st.match(_),ot;if(at){var ht="aes"+at[1],yt=rt.from(at[2],"hex"),vt=rt.from(at[3].replace(/[\r\n]/g,""),"base64"),xt=et(it,yt.slice(0,8),parseInt(at[1],10)).key,wt=[],Et=tt.createDecipheriv(ht,xt,yt);wt.push(Et.update(vt)),wt.push(Et.final()),ot=rt.concat(wt)}else{var dt=st.match(_e);ot=rt.from(dt[2].replace(/[\r\n]/g,""),"base64")}var At=st.match($)[1];return{tag:At,data:ot}},fixProc}var parseAsn1,hasRequiredParseAsn1;function requireParseAsn1(){if(hasRequiredParseAsn1)return parseAsn1;hasRequiredParseAsn1=1;var _=requireAsn1(),$=require$$1,_e=requireFixProc(),et=requireBrowser$6(),tt=requireBrowser$7(),rt=requireSafeBuffer$1().Buffer;function nt(st,at){var ot=st.algorithm.decrypt.kde.kdeparams.salt,dt=parseInt(st.algorithm.decrypt.kde.kdeparams.iters.toString(),10),ht=$[st.algorithm.decrypt.cipher.algo.join(".")],yt=st.algorithm.decrypt.cipher.iv,vt=st.subjectPrivateKey,xt=parseInt(ht.split("-")[1],10)/8,wt=tt.pbkdf2Sync(at,ot,dt,xt,"sha1"),Et=et.createDecipheriv(ht,wt,yt),At=[];return At.push(Et.update(vt)),At.push(Et.final()),rt.concat(At)}function it(st){var at;typeof st=="object"&&!rt.isBuffer(st)&&(at=st.passphrase,st=st.key),typeof st=="string"&&(st=rt.from(st));var ot=_e(st,at),dt=ot.tag,ht=ot.data,yt,vt;switch(dt){case"CERTIFICATE":vt=_.certificate.decode(ht,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(vt||(vt=_.PublicKey.decode(ht,"der")),yt=vt.algorithm.algorithm.join("."),yt){case"1.2.840.113549.1.1.1":return _.RSAPublicKey.decode(vt.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return vt.subjectPrivateKey=vt.subjectPublicKey,{type:"ec",data:vt};case"1.2.840.10040.4.1":return vt.algorithm.params.pub_key=_.DSAparam.decode(vt.subjectPublicKey.data,"der"),{type:"dsa",data:vt.algorithm.params};default:throw new Error("unknown key id "+yt)}case"ENCRYPTED PRIVATE KEY":ht=_.EncryptedPrivateKey.decode(ht,"der"),ht=nt(ht,at);case"PRIVATE KEY":switch(vt=_.PrivateKey.decode(ht,"der"),yt=vt.algorithm.algorithm.join("."),yt){case"1.2.840.113549.1.1.1":return _.RSAPrivateKey.decode(vt.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:vt.algorithm.curve,privateKey:_.ECPrivateKey.decode(vt.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return vt.algorithm.params.priv_key=_.DSAparam.decode(vt.subjectPrivateKey,"der"),{type:"dsa",params:vt.algorithm.params};default:throw new Error("unknown key id "+yt)}case"RSA PUBLIC KEY":return _.RSAPublicKey.decode(ht,"der");case"RSA PRIVATE KEY":return _.RSAPrivateKey.decode(ht,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:_.DSAPrivateKey.decode(ht,"der")};case"EC PRIVATE KEY":return ht=_.ECPrivateKey.decode(ht,"der"),{curve:ht.parameters.value,privateKey:ht.privateKey};default:throw new Error("unknown key type "+dt)}}return it.signature=_.signature,parseAsn1=it,parseAsn1}const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign$4.exports;hasRequiredSign=1;var _=requireSafeBuffer$1().Buffer,$=requireBrowser$8(),_e=requireBrowserifyRsa(),et=requireElliptic().ec,tt=requireBn$4(),rt=requireParseAsn1(),nt=require$$4,it=1;function st(Et,At,jt,kt,Lt){var Bt=rt(At);if(Bt.curve){if(kt!=="ecdsa"&&kt!=="ecdsa/rsa")throw new Error("wrong private key type");return at(Et,Bt)}else if(Bt.type==="dsa"){if(kt!=="dsa")throw new Error("wrong private key type");return ot(Et,Bt,jt)}if(kt!=="rsa"&&kt!=="ecdsa/rsa")throw new Error("wrong private key type");if(At.padding!==void 0&&At.padding!==it)throw new Error("illegal or unsupported padding mode");Et=_.concat([Lt,Et]);for(var Gt=Bt.modulus.byteLength(),er=[0,1];Et.length+er.length+1<Gt;)er.push(255);er.push(0);for(var tr=-1;++tr<Et.length;)er.push(Et[tr]);var ar=_e(er,Bt);return ar}function at(Et,At){var jt=nt[At.curve.join(".")];if(!jt)throw new Error("unknown curve "+At.curve.join("."));var kt=new et(jt),Lt=kt.keyFromPrivate(At.privateKey),Bt=Lt.sign(Et);return _.from(Bt.toDER())}function ot(Et,At,jt){for(var kt=At.params.priv_key,Lt=At.params.p,Bt=At.params.q,Gt=At.params.g,er=new tt(0),tr,ar=yt(Et,Bt).mod(Bt),Mt=!1,lt=ht(kt,Bt,Et,jt);Mt===!1;)tr=xt(Bt,lt,jt),er=wt(Gt,tr,Lt,Bt),Mt=tr.invm(Bt).imul(ar.add(kt.mul(er))).mod(Bt),Mt.cmpn(0)===0&&(Mt=!1,er=new tt(0));return dt(er,Mt)}function dt(Et,At){Et=Et.toArray(),At=At.toArray(),Et[0]&128&&(Et=[0].concat(Et)),At[0]&128&&(At=[0].concat(At));var jt=Et.length+At.length+4,kt=[48,jt,2,Et.length];return kt=kt.concat(Et,[2,At.length],At),_.from(kt)}function ht(Et,At,jt,kt){if(Et=_.from(Et.toArray()),Et.length<At.byteLength()){var Lt=_.alloc(At.byteLength()-Et.length);Et=_.concat([Lt,Et])}var Bt=jt.length,Gt=vt(jt,At),er=_.alloc(Bt);er.fill(1);var tr=_.alloc(Bt);return tr=$(kt,tr).update(er).update(_.from([0])).update(Et).update(Gt).digest(),er=$(kt,tr).update(er).digest(),tr=$(kt,tr).update(er).update(_.from([1])).update(Et).update(Gt).digest(),er=$(kt,tr).update(er).digest(),{k:tr,v:er}}function yt(Et,At){var jt=new tt(Et),kt=(Et.length<<3)-At.bitLength();return kt>0&&jt.ishrn(kt),jt}function vt(Et,At){Et=yt(Et,At),Et=Et.mod(At);var jt=_.from(Et.toArray());if(jt.length<At.byteLength()){var kt=_.alloc(At.byteLength()-jt.length);jt=_.concat([kt,jt])}return jt}function xt(Et,At,jt){var kt,Lt;do{for(kt=_.alloc(0);kt.length*8<Et.bitLength();)At.v=$(jt,At.k).update(At.v).digest(),kt=_.concat([kt,At.v]);Lt=yt(kt,Et),At.k=$(jt,At.k).update(At.v).update(_.from([0])).digest(),At.v=$(jt,At.k).update(At.v).digest()}while(Lt.cmp(Et)!==-1);return Lt}function wt(Et,At,jt,kt){return Et.toRed(tt.mont(jt)).redPow(At).fromRed().mod(kt)}return sign$4.exports=st,sign$4.exports.getKey=ht,sign$4.exports.makeKey=xt,sign$4.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var _=requireSafeBuffer$1().Buffer,$=requireBn$4(),_e=requireElliptic().ec,et=requireParseAsn1(),tt=require$$4;function rt(at,ot,dt,ht,yt){var vt=et(dt);if(vt.type==="ec"){if(ht!=="ecdsa"&&ht!=="ecdsa/rsa")throw new Error("wrong public key type");return nt(at,ot,vt)}else if(vt.type==="dsa"){if(ht!=="dsa")throw new Error("wrong public key type");return it(at,ot,vt)}if(ht!=="rsa"&&ht!=="ecdsa/rsa")throw new Error("wrong public key type");ot=_.concat([yt,ot]);for(var xt=vt.modulus.byteLength(),wt=[1],Et=0;ot.length+wt.length+2<xt;)wt.push(255),Et+=1;wt.push(0);for(var At=-1;++At<ot.length;)wt.push(ot[At]);wt=_.from(wt);var jt=$.mont(vt.modulus);at=new $(at).toRed(jt),at=at.redPow(new $(vt.publicExponent)),at=_.from(at.fromRed().toArray());var kt=Et<8?1:0;for(xt=Math.min(at.length,wt.length),at.length!==wt.length&&(kt=1),At=-1;++At<xt;)kt|=at[At]^wt[At];return kt===0}function nt(at,ot,dt){var ht=tt[dt.data.algorithm.curve.join(".")];if(!ht)throw new Error("unknown curve "+dt.data.algorithm.curve.join("."));var yt=new _e(ht),vt=dt.data.subjectPrivateKey.data;return yt.verify(ot,at,vt)}function it(at,ot,dt){var ht=dt.data.p,yt=dt.data.q,vt=dt.data.g,xt=dt.data.pub_key,wt=et.signature.decode(at,"der"),Et=wt.s,At=wt.r;st(Et,yt),st(At,yt);var jt=$.mont(ht),kt=Et.invm(yt),Lt=vt.toRed(jt).redPow(new $(ot).mul(kt).mod(yt)).fromRed().mul(xt.toRed(jt).redPow(At.mul(kt).mod(yt)).fromRed()).mod(ht).mod(yt);return Lt.cmp(At)===0}function st(at,ot){if(at.cmpn(0)<=0)throw new Error("invalid sig");if(at.cmp(ot)>=0)throw new Error("invalid sig")}return verify_1=rt,verify_1}var browser$4,hasRequiredBrowser$3;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$4;hasRequiredBrowser$3=1;var _=requireSafeBuffer$1().Buffer,$=requireBrowser$9(),_e=requireReadableBrowser(),et=requireInherits_browser(),tt=requireSign(),rt=requireVerify(),nt=require$$6;Object.keys(nt).forEach(function(dt){nt[dt].id=_.from(nt[dt].id,"hex"),nt[dt.toLowerCase()]=nt[dt]});function it(dt){_e.Writable.call(this);var ht=nt[dt];if(!ht)throw new Error("Unknown message digest");this._hashType=ht.hash,this._hash=$(ht.hash),this._tag=ht.id,this._signType=ht.sign}et(it,_e.Writable),it.prototype._write=function(ht,yt,vt){this._hash.update(ht),vt()},it.prototype.update=function(ht,yt){return this._hash.update(typeof ht=="string"?_.from(ht,yt):ht),this},it.prototype.sign=function(ht,yt){this.end();var vt=this._hash.digest(),xt=tt(vt,ht,this._hashType,this._signType,this._tag);return yt?xt.toString(yt):xt};function st(dt){_e.Writable.call(this);var ht=nt[dt];if(!ht)throw new Error("Unknown message digest");this._hash=$(ht.hash),this._tag=ht.id,this._signType=ht.sign}et(st,_e.Writable),st.prototype._write=function(ht,yt,vt){this._hash.update(ht),vt()},st.prototype.update=function(ht,yt){return this._hash.update(typeof ht=="string"?_.from(ht,yt):ht),this},st.prototype.verify=function(ht,yt,vt){var xt=typeof yt=="string"?_.from(yt,vt):yt;this.end();var wt=this._hash.digest();return rt(xt,wt,ht,this._signType,this._tag)};function at(dt){return new it(dt)}function ot(dt){return new st(dt)}return browser$4={Sign:at,Verify:ot,createSign:at,createVerify:ot},browser$4}var bn$1={exports:{}};bn$1.exports;var hasRequiredBn$1;function requireBn$1(){return hasRequiredBn$1||(hasRequiredBn$1=1,function(_){(function($,_e){function et(Mt,lt){if(!Mt)throw new Error(lt||"Assertion failed")}function tt(Mt,lt){Mt.super_=lt;var mt=function(){};mt.prototype=lt.prototype,Mt.prototype=new mt,Mt.prototype.constructor=Mt}function rt(Mt,lt,mt){if(rt.isBN(Mt))return Mt;this.negative=0,this.words=null,this.length=0,this.red=null,Mt!==null&&((lt==="le"||lt==="be")&&(mt=lt,lt=10),this._init(Mt||0,lt||10,mt||"be"))}typeof $=="object"?$.exports=rt:_e.BN=rt,rt.BN=rt,rt.wordSize=26;var nt;try{typeof window<"u"&&typeof window.Buffer<"u"?nt=window.Buffer:nt=require$$0$2.Buffer}catch{}rt.isBN=function(lt){return lt instanceof rt?!0:lt!==null&&typeof lt=="object"&&lt.constructor.wordSize===rt.wordSize&&Array.isArray(lt.words)},rt.max=function(lt,mt){return lt.cmp(mt)>0?lt:mt},rt.min=function(lt,mt){return lt.cmp(mt)<0?lt:mt},rt.prototype._init=function(lt,mt,gt){if(typeof lt=="number")return this._initNumber(lt,mt,gt);if(typeof lt=="object")return this._initArray(lt,mt,gt);mt==="hex"&&(mt=16),et(mt===(mt|0)&&mt>=2&&mt<=36),lt=lt.toString().replace(/\s+/g,"");var bt=0;lt[0]==="-"&&(bt++,this.negative=1),bt<lt.length&&(mt===16?this._parseHex(lt,bt,gt):(this._parseBase(lt,mt,bt),gt==="le"&&this._initArray(this.toArray(),mt,gt)))},rt.prototype._initNumber=function(lt,mt,gt){lt<0&&(this.negative=1,lt=-lt),lt<67108864?(this.words=[lt&67108863],this.length=1):lt<4503599627370496?(this.words=[lt&67108863,lt/67108864&67108863],this.length=2):(et(lt<9007199254740992),this.words=[lt&67108863,lt/67108864&67108863,1],this.length=3),gt==="le"&&this._initArray(this.toArray(),mt,gt)},rt.prototype._initArray=function(lt,mt,gt){if(et(typeof lt.length=="number"),lt.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(lt.length/3),this.words=new Array(this.length);for(var bt=0;bt<this.length;bt++)this.words[bt]=0;var St,Nt,Pt=0;if(gt==="be")for(bt=lt.length-1,St=0;bt>=0;bt-=3)Nt=lt[bt]|lt[bt-1]<<8|lt[bt-2]<<16,this.words[St]|=Nt<<Pt&67108863,this.words[St+1]=Nt>>>26-Pt&67108863,Pt+=24,Pt>=26&&(Pt-=26,St++);else if(gt==="le")for(bt=0,St=0;bt<lt.length;bt+=3)Nt=lt[bt]|lt[bt+1]<<8|lt[bt+2]<<16,this.words[St]|=Nt<<Pt&67108863,this.words[St+1]=Nt>>>26-Pt&67108863,Pt+=24,Pt>=26&&(Pt-=26,St++);return this.strip()};function it(Mt,lt){var mt=Mt.charCodeAt(lt);return mt>=65&&mt<=70?mt-55:mt>=97&&mt<=102?mt-87:mt-48&15}function st(Mt,lt,mt){var gt=it(Mt,mt);return mt-1>=lt&&(gt|=it(Mt,mt-1)<<4),gt}rt.prototype._parseHex=function(lt,mt,gt){this.length=Math.ceil((lt.length-mt)/6),this.words=new Array(this.length);for(var bt=0;bt<this.length;bt++)this.words[bt]=0;var St=0,Nt=0,Pt;if(gt==="be")for(bt=lt.length-1;bt>=mt;bt-=2)Pt=st(lt,mt,bt)<<St,this.words[Nt]|=Pt&67108863,St>=18?(St-=18,Nt+=1,this.words[Nt]|=Pt>>>26):St+=8;else{var Tt=lt.length-mt;for(bt=Tt%2===0?mt+1:mt;bt<lt.length;bt+=2)Pt=st(lt,mt,bt)<<St,this.words[Nt]|=Pt&67108863,St>=18?(St-=18,Nt+=1,this.words[Nt]|=Pt>>>26):St+=8}this.strip()};function at(Mt,lt,mt,gt){for(var bt=0,St=Math.min(Mt.length,mt),Nt=lt;Nt<St;Nt++){var Pt=Mt.charCodeAt(Nt)-48;bt*=gt,Pt>=49?bt+=Pt-49+10:Pt>=17?bt+=Pt-17+10:bt+=Pt}return bt}rt.prototype._parseBase=function(lt,mt,gt){this.words=[0],this.length=1;for(var bt=0,St=1;St<=67108863;St*=mt)bt++;bt--,St=St/mt|0;for(var Nt=lt.length-gt,Pt=Nt%bt,Tt=Math.min(Nt,Nt-Pt)+gt,pt=0,Rt=gt;Rt<Tt;Rt+=bt)pt=at(lt,Rt,Rt+bt,mt),this.imuln(St),this.words[0]+pt<67108864?this.words[0]+=pt:this._iaddn(pt);if(Pt!==0){var zt=1;for(pt=at(lt,Rt,lt.length,mt),Rt=0;Rt<Pt;Rt++)zt*=mt;this.imuln(zt),this.words[0]+pt<67108864?this.words[0]+=pt:this._iaddn(pt)}this.strip()},rt.prototype.copy=function(lt){lt.words=new Array(this.length);for(var mt=0;mt<this.length;mt++)lt.words[mt]=this.words[mt];lt.length=this.length,lt.negative=this.negative,lt.red=this.red},rt.prototype.clone=function(){var lt=new rt(null);return this.copy(lt),lt},rt.prototype._expand=function(lt){for(;this.length<lt;)this.words[this.length++]=0;return this},rt.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},rt.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},rt.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ot=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],dt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ht=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];rt.prototype.toString=function(lt,mt){lt=lt||10,mt=mt|0||1;var gt;if(lt===16||lt==="hex"){gt="";for(var bt=0,St=0,Nt=0;Nt<this.length;Nt++){var Pt=this.words[Nt],Tt=((Pt<<bt|St)&16777215).toString(16);St=Pt>>>24-bt&16777215,bt+=2,bt>=26&&(bt-=26,Nt--),St!==0||Nt!==this.length-1?gt=ot[6-Tt.length]+Tt+gt:gt=Tt+gt}for(St!==0&&(gt=St.toString(16)+gt);gt.length%mt!==0;)gt="0"+gt;return this.negative!==0&&(gt="-"+gt),gt}if(lt===(lt|0)&&lt>=2&&lt<=36){var pt=dt[lt],Rt=ht[lt];gt="";var zt=this.clone();for(zt.negative=0;!zt.isZero();){var Yt=zt.modn(Rt).toString(lt);zt=zt.idivn(Rt),zt.isZero()?gt=Yt+gt:gt=ot[pt-Yt.length]+Yt+gt}for(this.isZero()&&(gt="0"+gt);gt.length%mt!==0;)gt="0"+gt;return this.negative!==0&&(gt="-"+gt),gt}et(!1,"Base should be between 2 and 36")},rt.prototype.toNumber=function(){var lt=this.words[0];return this.length===2?lt+=this.words[1]*67108864:this.length===3&&this.words[2]===1?lt+=4503599627370496+this.words[1]*67108864:this.length>2&&et(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-lt:lt},rt.prototype.toJSON=function(){return this.toString(16)},rt.prototype.toBuffer=function(lt,mt){return et(typeof nt<"u"),this.toArrayLike(nt,lt,mt)},rt.prototype.toArray=function(lt,mt){return this.toArrayLike(Array,lt,mt)},rt.prototype.toArrayLike=function(lt,mt,gt){var bt=this.byteLength(),St=gt||Math.max(1,bt);et(bt<=St,"byte array longer than desired length"),et(St>0,"Requested array length <= 0"),this.strip();var Nt=mt==="le",Pt=new lt(St),Tt,pt,Rt=this.clone();if(Nt){for(pt=0;!Rt.isZero();pt++)Tt=Rt.andln(255),Rt.iushrn(8),Pt[pt]=Tt;for(;pt<St;pt++)Pt[pt]=0}else{for(pt=0;pt<St-bt;pt++)Pt[pt]=0;for(pt=0;!Rt.isZero();pt++)Tt=Rt.andln(255),Rt.iushrn(8),Pt[St-pt-1]=Tt}return Pt},Math.clz32?rt.prototype._countBits=function(lt){return 32-Math.clz32(lt)}:rt.prototype._countBits=function(lt){var mt=lt,gt=0;return mt>=4096&&(gt+=13,mt>>>=13),mt>=64&&(gt+=7,mt>>>=7),mt>=8&&(gt+=4,mt>>>=4),mt>=2&&(gt+=2,mt>>>=2),gt+mt},rt.prototype._zeroBits=function(lt){if(lt===0)return 26;var mt=lt,gt=0;return mt&8191||(gt+=13,mt>>>=13),mt&127||(gt+=7,mt>>>=7),mt&15||(gt+=4,mt>>>=4),mt&3||(gt+=2,mt>>>=2),mt&1||gt++,gt},rt.prototype.bitLength=function(){var lt=this.words[this.length-1],mt=this._countBits(lt);return(this.length-1)*26+mt};function yt(Mt){for(var lt=new Array(Mt.bitLength()),mt=0;mt<lt.length;mt++){var gt=mt/26|0,bt=mt%26;lt[mt]=(Mt.words[gt]&1<<bt)>>>bt}return lt}rt.prototype.zeroBits=function(){if(this.isZero())return 0;for(var lt=0,mt=0;mt<this.length;mt++){var gt=this._zeroBits(this.words[mt]);if(lt+=gt,gt!==26)break}return lt},rt.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},rt.prototype.toTwos=function(lt){return this.negative!==0?this.abs().inotn(lt).iaddn(1):this.clone()},rt.prototype.fromTwos=function(lt){return this.testn(lt-1)?this.notn(lt).iaddn(1).ineg():this.clone()},rt.prototype.isNeg=function(){return this.negative!==0},rt.prototype.neg=function(){return this.clone().ineg()},rt.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},rt.prototype.iuor=function(lt){for(;this.length<lt.length;)this.words[this.length++]=0;for(var mt=0;mt<lt.length;mt++)this.words[mt]=this.words[mt]|lt.words[mt];return this.strip()},rt.prototype.ior=function(lt){return et((this.negative|lt.negative)===0),this.iuor(lt)},rt.prototype.or=function(lt){return this.length>lt.length?this.clone().ior(lt):lt.clone().ior(this)},rt.prototype.uor=function(lt){return this.length>lt.length?this.clone().iuor(lt):lt.clone().iuor(this)},rt.prototype.iuand=function(lt){var mt;this.length>lt.length?mt=lt:mt=this;for(var gt=0;gt<mt.length;gt++)this.words[gt]=this.words[gt]&lt.words[gt];return this.length=mt.length,this.strip()},rt.prototype.iand=function(lt){return et((this.negative|lt.negative)===0),this.iuand(lt)},rt.prototype.and=function(lt){return this.length>lt.length?this.clone().iand(lt):lt.clone().iand(this)},rt.prototype.uand=function(lt){return this.length>lt.length?this.clone().iuand(lt):lt.clone().iuand(this)},rt.prototype.iuxor=function(lt){var mt,gt;this.length>lt.length?(mt=this,gt=lt):(mt=lt,gt=this);for(var bt=0;bt<gt.length;bt++)this.words[bt]=mt.words[bt]^gt.words[bt];if(this!==mt)for(;bt<mt.length;bt++)this.words[bt]=mt.words[bt];return this.length=mt.length,this.strip()},rt.prototype.ixor=function(lt){return et((this.negative|lt.negative)===0),this.iuxor(lt)},rt.prototype.xor=function(lt){return this.length>lt.length?this.clone().ixor(lt):lt.clone().ixor(this)},rt.prototype.uxor=function(lt){return this.length>lt.length?this.clone().iuxor(lt):lt.clone().iuxor(this)},rt.prototype.inotn=function(lt){et(typeof lt=="number"&&lt>=0);var mt=Math.ceil(lt/26)|0,gt=lt%26;this._expand(mt),gt>0&&mt--;for(var bt=0;bt<mt;bt++)this.words[bt]=~this.words[bt]&67108863;return gt>0&&(this.words[bt]=~this.words[bt]&67108863>>26-gt),this.strip()},rt.prototype.notn=function(lt){return this.clone().inotn(lt)},rt.prototype.setn=function(lt,mt){et(typeof lt=="number"&&lt>=0);var gt=lt/26|0,bt=lt%26;return this._expand(gt+1),mt?this.words[gt]=this.words[gt]|1<<bt:this.words[gt]=this.words[gt]&~(1<<bt),this.strip()},rt.prototype.iadd=function(lt){var mt;if(this.negative!==0&&lt.negative===0)return this.negative=0,mt=this.isub(lt),this.negative^=1,this._normSign();if(this.negative===0&&lt.negative!==0)return lt.negative=0,mt=this.isub(lt),lt.negative=1,mt._normSign();var gt,bt;this.length>lt.length?(gt=this,bt=lt):(gt=lt,bt=this);for(var St=0,Nt=0;Nt<bt.length;Nt++)mt=(gt.words[Nt]|0)+(bt.words[Nt]|0)+St,this.words[Nt]=mt&67108863,St=mt>>>26;for(;St!==0&&Nt<gt.length;Nt++)mt=(gt.words[Nt]|0)+St,this.words[Nt]=mt&67108863,St=mt>>>26;if(this.length=gt.length,St!==0)this.words[this.length]=St,this.length++;else if(gt!==this)for(;Nt<gt.length;Nt++)this.words[Nt]=gt.words[Nt];return this},rt.prototype.add=function(lt){var mt;return lt.negative!==0&&this.negative===0?(lt.negative=0,mt=this.sub(lt),lt.negative^=1,mt):lt.negative===0&&this.negative!==0?(this.negative=0,mt=lt.sub(this),this.negative=1,mt):this.length>lt.length?this.clone().iadd(lt):lt.clone().iadd(this)},rt.prototype.isub=function(lt){if(lt.negative!==0){lt.negative=0;var mt=this.iadd(lt);return lt.negative=1,mt._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(lt),this.negative=1,this._normSign();var gt=this.cmp(lt);if(gt===0)return this.negative=0,this.length=1,this.words[0]=0,this;var bt,St;gt>0?(bt=this,St=lt):(bt=lt,St=this);for(var Nt=0,Pt=0;Pt<St.length;Pt++)mt=(bt.words[Pt]|0)-(St.words[Pt]|0)+Nt,Nt=mt>>26,this.words[Pt]=mt&67108863;for(;Nt!==0&&Pt<bt.length;Pt++)mt=(bt.words[Pt]|0)+Nt,Nt=mt>>26,this.words[Pt]=mt&67108863;if(Nt===0&&Pt<bt.length&&bt!==this)for(;Pt<bt.length;Pt++)this.words[Pt]=bt.words[Pt];return this.length=Math.max(this.length,Pt),bt!==this&&(this.negative=1),this.strip()},rt.prototype.sub=function(lt){return this.clone().isub(lt)};function vt(Mt,lt,mt){mt.negative=lt.negative^Mt.negative;var gt=Mt.length+lt.length|0;mt.length=gt,gt=gt-1|0;var bt=Mt.words[0]|0,St=lt.words[0]|0,Nt=bt*St,Pt=Nt&67108863,Tt=Nt/67108864|0;mt.words[0]=Pt;for(var pt=1;pt<gt;pt++){for(var Rt=Tt>>>26,zt=Tt&67108863,Yt=Math.min(pt,lt.length-1),ir=Math.max(0,pt-Mt.length+1);ir<=Yt;ir++){var ur=pt-ir|0;bt=Mt.words[ur]|0,St=lt.words[ir]|0,Nt=bt*St+zt,Rt+=Nt/67108864|0,zt=Nt&67108863}mt.words[pt]=zt|0,Tt=Rt|0}return Tt!==0?mt.words[pt]=Tt|0:mt.length--,mt.strip()}var xt=function(lt,mt,gt){var bt=lt.words,St=mt.words,Nt=gt.words,Pt=0,Tt,pt,Rt,zt=bt[0]|0,Yt=zt&8191,ir=zt>>>13,ur=bt[1]|0,cr=ur&8191,rr=ur>>>13,fr=bt[2]|0,dr=fr&8191,gr=fr>>>13,hr=bt[3]|0,or=hr&8191,br=hr>>>13,Rr=bt[4]|0,_r=Rr&8191,Er=Rr>>>13,Hr=bt[5]|0,xr=Hr&8191,yr=Hr>>>13,Ar=bt[6]|0,$r=Ar&8191,Tr=Ar>>>13,jr=bt[7]|0,Cr=jr&8191,Nr=jr>>>13,nn=bt[8]|0,Mr=nn&8191,Lr=nn>>>13,an=bt[9]|0,pr=an&8191,nr=an>>>13,lr=St[0]|0,vr=lr&8191,wr=lr>>>13,Pr=St[1]|0,Sr=Pr&8191,Dr=Pr>>>13,rn=St[2]|0,Ir=rn&8191,Or=rn>>>13,sn=St[3]|0,Fr=sn&8191,Kr=sn>>>13,fn=St[4]|0,Br=fn&8191,Zr=fn>>>13,hn=St[5]|0,zr=hn&8191,Xr=hn>>>13,pn=St[6]|0,Vr=pn&8191,Yr=pn>>>13,mn=St[7]|0,Ur=mn&8191,Qr=mn>>>13,gn=St[8]|0,Gr=gn&8191,Jr=gn>>>13,yn=St[9]|0,Wr=yn&8191,en=yn>>>13;gt.negative=lt.negative^mt.negative,gt.length=19,Tt=Math.imul(Yt,vr),pt=Math.imul(Yt,wr),pt=pt+Math.imul(ir,vr)|0,Rt=Math.imul(ir,wr);var on=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(on>>>26)|0,on&=67108863,Tt=Math.imul(cr,vr),pt=Math.imul(cr,wr),pt=pt+Math.imul(rr,vr)|0,Rt=Math.imul(rr,wr),Tt=Tt+Math.imul(Yt,Sr)|0,pt=pt+Math.imul(Yt,Dr)|0,pt=pt+Math.imul(ir,Sr)|0,Rt=Rt+Math.imul(ir,Dr)|0;var un=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(un>>>26)|0,un&=67108863,Tt=Math.imul(dr,vr),pt=Math.imul(dr,wr),pt=pt+Math.imul(gr,vr)|0,Rt=Math.imul(gr,wr),Tt=Tt+Math.imul(cr,Sr)|0,pt=pt+Math.imul(cr,Dr)|0,pt=pt+Math.imul(rr,Sr)|0,Rt=Rt+Math.imul(rr,Dr)|0,Tt=Tt+Math.imul(Yt,Ir)|0,pt=pt+Math.imul(Yt,Or)|0,pt=pt+Math.imul(ir,Ir)|0,Rt=Rt+Math.imul(ir,Or)|0;var wn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(wn>>>26)|0,wn&=67108863,Tt=Math.imul(or,vr),pt=Math.imul(or,wr),pt=pt+Math.imul(br,vr)|0,Rt=Math.imul(br,wr),Tt=Tt+Math.imul(dr,Sr)|0,pt=pt+Math.imul(dr,Dr)|0,pt=pt+Math.imul(gr,Sr)|0,Rt=Rt+Math.imul(gr,Dr)|0,Tt=Tt+Math.imul(cr,Ir)|0,pt=pt+Math.imul(cr,Or)|0,pt=pt+Math.imul(rr,Ir)|0,Rt=Rt+Math.imul(rr,Or)|0,Tt=Tt+Math.imul(Yt,Fr)|0,pt=pt+Math.imul(Yt,Kr)|0,pt=pt+Math.imul(ir,Fr)|0,Rt=Rt+Math.imul(ir,Kr)|0;var $n=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+($n>>>26)|0,$n&=67108863,Tt=Math.imul(_r,vr),pt=Math.imul(_r,wr),pt=pt+Math.imul(Er,vr)|0,Rt=Math.imul(Er,wr),Tt=Tt+Math.imul(or,Sr)|0,pt=pt+Math.imul(or,Dr)|0,pt=pt+Math.imul(br,Sr)|0,Rt=Rt+Math.imul(br,Dr)|0,Tt=Tt+Math.imul(dr,Ir)|0,pt=pt+Math.imul(dr,Or)|0,pt=pt+Math.imul(gr,Ir)|0,Rt=Rt+Math.imul(gr,Or)|0,Tt=Tt+Math.imul(cr,Fr)|0,pt=pt+Math.imul(cr,Kr)|0,pt=pt+Math.imul(rr,Fr)|0,Rt=Rt+Math.imul(rr,Kr)|0,Tt=Tt+Math.imul(Yt,Br)|0,pt=pt+Math.imul(Yt,Zr)|0,pt=pt+Math.imul(ir,Br)|0,Rt=Rt+Math.imul(ir,Zr)|0;var Sn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,Tt=Math.imul(xr,vr),pt=Math.imul(xr,wr),pt=pt+Math.imul(yr,vr)|0,Rt=Math.imul(yr,wr),Tt=Tt+Math.imul(_r,Sr)|0,pt=pt+Math.imul(_r,Dr)|0,pt=pt+Math.imul(Er,Sr)|0,Rt=Rt+Math.imul(Er,Dr)|0,Tt=Tt+Math.imul(or,Ir)|0,pt=pt+Math.imul(or,Or)|0,pt=pt+Math.imul(br,Ir)|0,Rt=Rt+Math.imul(br,Or)|0,Tt=Tt+Math.imul(dr,Fr)|0,pt=pt+Math.imul(dr,Kr)|0,pt=pt+Math.imul(gr,Fr)|0,Rt=Rt+Math.imul(gr,Kr)|0,Tt=Tt+Math.imul(cr,Br)|0,pt=pt+Math.imul(cr,Zr)|0,pt=pt+Math.imul(rr,Br)|0,Rt=Rt+Math.imul(rr,Zr)|0,Tt=Tt+Math.imul(Yt,zr)|0,pt=pt+Math.imul(Yt,Xr)|0,pt=pt+Math.imul(ir,zr)|0,Rt=Rt+Math.imul(ir,Xr)|0;var En=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(En>>>26)|0,En&=67108863,Tt=Math.imul($r,vr),pt=Math.imul($r,wr),pt=pt+Math.imul(Tr,vr)|0,Rt=Math.imul(Tr,wr),Tt=Tt+Math.imul(xr,Sr)|0,pt=pt+Math.imul(xr,Dr)|0,pt=pt+Math.imul(yr,Sr)|0,Rt=Rt+Math.imul(yr,Dr)|0,Tt=Tt+Math.imul(_r,Ir)|0,pt=pt+Math.imul(_r,Or)|0,pt=pt+Math.imul(Er,Ir)|0,Rt=Rt+Math.imul(Er,Or)|0,Tt=Tt+Math.imul(or,Fr)|0,pt=pt+Math.imul(or,Kr)|0,pt=pt+Math.imul(br,Fr)|0,Rt=Rt+Math.imul(br,Kr)|0,Tt=Tt+Math.imul(dr,Br)|0,pt=pt+Math.imul(dr,Zr)|0,pt=pt+Math.imul(gr,Br)|0,Rt=Rt+Math.imul(gr,Zr)|0,Tt=Tt+Math.imul(cr,zr)|0,pt=pt+Math.imul(cr,Xr)|0,pt=pt+Math.imul(rr,zr)|0,Rt=Rt+Math.imul(rr,Xr)|0,Tt=Tt+Math.imul(Yt,Vr)|0,pt=pt+Math.imul(Yt,Yr)|0,pt=pt+Math.imul(ir,Vr)|0,Rt=Rt+Math.imul(ir,Yr)|0;var _n=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(_n>>>26)|0,_n&=67108863,Tt=Math.imul(Cr,vr),pt=Math.imul(Cr,wr),pt=pt+Math.imul(Nr,vr)|0,Rt=Math.imul(Nr,wr),Tt=Tt+Math.imul($r,Sr)|0,pt=pt+Math.imul($r,Dr)|0,pt=pt+Math.imul(Tr,Sr)|0,Rt=Rt+Math.imul(Tr,Dr)|0,Tt=Tt+Math.imul(xr,Ir)|0,pt=pt+Math.imul(xr,Or)|0,pt=pt+Math.imul(yr,Ir)|0,Rt=Rt+Math.imul(yr,Or)|0,Tt=Tt+Math.imul(_r,Fr)|0,pt=pt+Math.imul(_r,Kr)|0,pt=pt+Math.imul(Er,Fr)|0,Rt=Rt+Math.imul(Er,Kr)|0,Tt=Tt+Math.imul(or,Br)|0,pt=pt+Math.imul(or,Zr)|0,pt=pt+Math.imul(br,Br)|0,Rt=Rt+Math.imul(br,Zr)|0,Tt=Tt+Math.imul(dr,zr)|0,pt=pt+Math.imul(dr,Xr)|0,pt=pt+Math.imul(gr,zr)|0,Rt=Rt+Math.imul(gr,Xr)|0,Tt=Tt+Math.imul(cr,Vr)|0,pt=pt+Math.imul(cr,Yr)|0,pt=pt+Math.imul(rr,Vr)|0,Rt=Rt+Math.imul(rr,Yr)|0,Tt=Tt+Math.imul(Yt,Ur)|0,pt=pt+Math.imul(Yt,Qr)|0,pt=pt+Math.imul(ir,Ur)|0,Rt=Rt+Math.imul(ir,Qr)|0;var Tn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,Tt=Math.imul(Mr,vr),pt=Math.imul(Mr,wr),pt=pt+Math.imul(Lr,vr)|0,Rt=Math.imul(Lr,wr),Tt=Tt+Math.imul(Cr,Sr)|0,pt=pt+Math.imul(Cr,Dr)|0,pt=pt+Math.imul(Nr,Sr)|0,Rt=Rt+Math.imul(Nr,Dr)|0,Tt=Tt+Math.imul($r,Ir)|0,pt=pt+Math.imul($r,Or)|0,pt=pt+Math.imul(Tr,Ir)|0,Rt=Rt+Math.imul(Tr,Or)|0,Tt=Tt+Math.imul(xr,Fr)|0,pt=pt+Math.imul(xr,Kr)|0,pt=pt+Math.imul(yr,Fr)|0,Rt=Rt+Math.imul(yr,Kr)|0,Tt=Tt+Math.imul(_r,Br)|0,pt=pt+Math.imul(_r,Zr)|0,pt=pt+Math.imul(Er,Br)|0,Rt=Rt+Math.imul(Er,Zr)|0,Tt=Tt+Math.imul(or,zr)|0,pt=pt+Math.imul(or,Xr)|0,pt=pt+Math.imul(br,zr)|0,Rt=Rt+Math.imul(br,Xr)|0,Tt=Tt+Math.imul(dr,Vr)|0,pt=pt+Math.imul(dr,Yr)|0,pt=pt+Math.imul(gr,Vr)|0,Rt=Rt+Math.imul(gr,Yr)|0,Tt=Tt+Math.imul(cr,Ur)|0,pt=pt+Math.imul(cr,Qr)|0,pt=pt+Math.imul(rr,Ur)|0,Rt=Rt+Math.imul(rr,Qr)|0,Tt=Tt+Math.imul(Yt,Gr)|0,pt=pt+Math.imul(Yt,Jr)|0,pt=pt+Math.imul(ir,Gr)|0,Rt=Rt+Math.imul(ir,Jr)|0;var Cn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Tt=Math.imul(pr,vr),pt=Math.imul(pr,wr),pt=pt+Math.imul(nr,vr)|0,Rt=Math.imul(nr,wr),Tt=Tt+Math.imul(Mr,Sr)|0,pt=pt+Math.imul(Mr,Dr)|0,pt=pt+Math.imul(Lr,Sr)|0,Rt=Rt+Math.imul(Lr,Dr)|0,Tt=Tt+Math.imul(Cr,Ir)|0,pt=pt+Math.imul(Cr,Or)|0,pt=pt+Math.imul(Nr,Ir)|0,Rt=Rt+Math.imul(Nr,Or)|0,Tt=Tt+Math.imul($r,Fr)|0,pt=pt+Math.imul($r,Kr)|0,pt=pt+Math.imul(Tr,Fr)|0,Rt=Rt+Math.imul(Tr,Kr)|0,Tt=Tt+Math.imul(xr,Br)|0,pt=pt+Math.imul(xr,Zr)|0,pt=pt+Math.imul(yr,Br)|0,Rt=Rt+Math.imul(yr,Zr)|0,Tt=Tt+Math.imul(_r,zr)|0,pt=pt+Math.imul(_r,Xr)|0,pt=pt+Math.imul(Er,zr)|0,Rt=Rt+Math.imul(Er,Xr)|0,Tt=Tt+Math.imul(or,Vr)|0,pt=pt+Math.imul(or,Yr)|0,pt=pt+Math.imul(br,Vr)|0,Rt=Rt+Math.imul(br,Yr)|0,Tt=Tt+Math.imul(dr,Ur)|0,pt=pt+Math.imul(dr,Qr)|0,pt=pt+Math.imul(gr,Ur)|0,Rt=Rt+Math.imul(gr,Qr)|0,Tt=Tt+Math.imul(cr,Gr)|0,pt=pt+Math.imul(cr,Jr)|0,pt=pt+Math.imul(rr,Gr)|0,Rt=Rt+Math.imul(rr,Jr)|0,Tt=Tt+Math.imul(Yt,Wr)|0,pt=pt+Math.imul(Yt,en)|0,pt=pt+Math.imul(ir,Wr)|0,Rt=Rt+Math.imul(ir,en)|0;var An=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(An>>>26)|0,An&=67108863,Tt=Math.imul(pr,Sr),pt=Math.imul(pr,Dr),pt=pt+Math.imul(nr,Sr)|0,Rt=Math.imul(nr,Dr),Tt=Tt+Math.imul(Mr,Ir)|0,pt=pt+Math.imul(Mr,Or)|0,pt=pt+Math.imul(Lr,Ir)|0,Rt=Rt+Math.imul(Lr,Or)|0,Tt=Tt+Math.imul(Cr,Fr)|0,pt=pt+Math.imul(Cr,Kr)|0,pt=pt+Math.imul(Nr,Fr)|0,Rt=Rt+Math.imul(Nr,Kr)|0,Tt=Tt+Math.imul($r,Br)|0,pt=pt+Math.imul($r,Zr)|0,pt=pt+Math.imul(Tr,Br)|0,Rt=Rt+Math.imul(Tr,Zr)|0,Tt=Tt+Math.imul(xr,zr)|0,pt=pt+Math.imul(xr,Xr)|0,pt=pt+Math.imul(yr,zr)|0,Rt=Rt+Math.imul(yr,Xr)|0,Tt=Tt+Math.imul(_r,Vr)|0,pt=pt+Math.imul(_r,Yr)|0,pt=pt+Math.imul(Er,Vr)|0,Rt=Rt+Math.imul(Er,Yr)|0,Tt=Tt+Math.imul(or,Ur)|0,pt=pt+Math.imul(or,Qr)|0,pt=pt+Math.imul(br,Ur)|0,Rt=Rt+Math.imul(br,Qr)|0,Tt=Tt+Math.imul(dr,Gr)|0,pt=pt+Math.imul(dr,Jr)|0,pt=pt+Math.imul(gr,Gr)|0,Rt=Rt+Math.imul(gr,Jr)|0,Tt=Tt+Math.imul(cr,Wr)|0,pt=pt+Math.imul(cr,en)|0,pt=pt+Math.imul(rr,Wr)|0,Rt=Rt+Math.imul(rr,en)|0;var Rn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,Tt=Math.imul(pr,Ir),pt=Math.imul(pr,Or),pt=pt+Math.imul(nr,Ir)|0,Rt=Math.imul(nr,Or),Tt=Tt+Math.imul(Mr,Fr)|0,pt=pt+Math.imul(Mr,Kr)|0,pt=pt+Math.imul(Lr,Fr)|0,Rt=Rt+Math.imul(Lr,Kr)|0,Tt=Tt+Math.imul(Cr,Br)|0,pt=pt+Math.imul(Cr,Zr)|0,pt=pt+Math.imul(Nr,Br)|0,Rt=Rt+Math.imul(Nr,Zr)|0,Tt=Tt+Math.imul($r,zr)|0,pt=pt+Math.imul($r,Xr)|0,pt=pt+Math.imul(Tr,zr)|0,Rt=Rt+Math.imul(Tr,Xr)|0,Tt=Tt+Math.imul(xr,Vr)|0,pt=pt+Math.imul(xr,Yr)|0,pt=pt+Math.imul(yr,Vr)|0,Rt=Rt+Math.imul(yr,Yr)|0,Tt=Tt+Math.imul(_r,Ur)|0,pt=pt+Math.imul(_r,Qr)|0,pt=pt+Math.imul(Er,Ur)|0,Rt=Rt+Math.imul(Er,Qr)|0,Tt=Tt+Math.imul(or,Gr)|0,pt=pt+Math.imul(or,Jr)|0,pt=pt+Math.imul(br,Gr)|0,Rt=Rt+Math.imul(br,Jr)|0,Tt=Tt+Math.imul(dr,Wr)|0,pt=pt+Math.imul(dr,en)|0,pt=pt+Math.imul(gr,Wr)|0,Rt=Rt+Math.imul(gr,en)|0;var Nn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,Tt=Math.imul(pr,Fr),pt=Math.imul(pr,Kr),pt=pt+Math.imul(nr,Fr)|0,Rt=Math.imul(nr,Kr),Tt=Tt+Math.imul(Mr,Br)|0,pt=pt+Math.imul(Mr,Zr)|0,pt=pt+Math.imul(Lr,Br)|0,Rt=Rt+Math.imul(Lr,Zr)|0,Tt=Tt+Math.imul(Cr,zr)|0,pt=pt+Math.imul(Cr,Xr)|0,pt=pt+Math.imul(Nr,zr)|0,Rt=Rt+Math.imul(Nr,Xr)|0,Tt=Tt+Math.imul($r,Vr)|0,pt=pt+Math.imul($r,Yr)|0,pt=pt+Math.imul(Tr,Vr)|0,Rt=Rt+Math.imul(Tr,Yr)|0,Tt=Tt+Math.imul(xr,Ur)|0,pt=pt+Math.imul(xr,Qr)|0,pt=pt+Math.imul(yr,Ur)|0,Rt=Rt+Math.imul(yr,Qr)|0,Tt=Tt+Math.imul(_r,Gr)|0,pt=pt+Math.imul(_r,Jr)|0,pt=pt+Math.imul(Er,Gr)|0,Rt=Rt+Math.imul(Er,Jr)|0,Tt=Tt+Math.imul(or,Wr)|0,pt=pt+Math.imul(or,en)|0,pt=pt+Math.imul(br,Wr)|0,Rt=Rt+Math.imul(br,en)|0;var In=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(In>>>26)|0,In&=67108863,Tt=Math.imul(pr,Br),pt=Math.imul(pr,Zr),pt=pt+Math.imul(nr,Br)|0,Rt=Math.imul(nr,Zr),Tt=Tt+Math.imul(Mr,zr)|0,pt=pt+Math.imul(Mr,Xr)|0,pt=pt+Math.imul(Lr,zr)|0,Rt=Rt+Math.imul(Lr,Xr)|0,Tt=Tt+Math.imul(Cr,Vr)|0,pt=pt+Math.imul(Cr,Yr)|0,pt=pt+Math.imul(Nr,Vr)|0,Rt=Rt+Math.imul(Nr,Yr)|0,Tt=Tt+Math.imul($r,Ur)|0,pt=pt+Math.imul($r,Qr)|0,pt=pt+Math.imul(Tr,Ur)|0,Rt=Rt+Math.imul(Tr,Qr)|0,Tt=Tt+Math.imul(xr,Gr)|0,pt=pt+Math.imul(xr,Jr)|0,pt=pt+Math.imul(yr,Gr)|0,Rt=Rt+Math.imul(yr,Jr)|0,Tt=Tt+Math.imul(_r,Wr)|0,pt=pt+Math.imul(_r,en)|0,pt=pt+Math.imul(Er,Wr)|0,Rt=Rt+Math.imul(Er,en)|0;var Mn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,Tt=Math.imul(pr,zr),pt=Math.imul(pr,Xr),pt=pt+Math.imul(nr,zr)|0,Rt=Math.imul(nr,Xr),Tt=Tt+Math.imul(Mr,Vr)|0,pt=pt+Math.imul(Mr,Yr)|0,pt=pt+Math.imul(Lr,Vr)|0,Rt=Rt+Math.imul(Lr,Yr)|0,Tt=Tt+Math.imul(Cr,Ur)|0,pt=pt+Math.imul(Cr,Qr)|0,pt=pt+Math.imul(Nr,Ur)|0,Rt=Rt+Math.imul(Nr,Qr)|0,Tt=Tt+Math.imul($r,Gr)|0,pt=pt+Math.imul($r,Jr)|0,pt=pt+Math.imul(Tr,Gr)|0,Rt=Rt+Math.imul(Tr,Jr)|0,Tt=Tt+Math.imul(xr,Wr)|0,pt=pt+Math.imul(xr,en)|0,pt=pt+Math.imul(yr,Wr)|0,Rt=Rt+Math.imul(yr,en)|0;var Pn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,Tt=Math.imul(pr,Vr),pt=Math.imul(pr,Yr),pt=pt+Math.imul(nr,Vr)|0,Rt=Math.imul(nr,Yr),Tt=Tt+Math.imul(Mr,Ur)|0,pt=pt+Math.imul(Mr,Qr)|0,pt=pt+Math.imul(Lr,Ur)|0,Rt=Rt+Math.imul(Lr,Qr)|0,Tt=Tt+Math.imul(Cr,Gr)|0,pt=pt+Math.imul(Cr,Jr)|0,pt=pt+Math.imul(Nr,Gr)|0,Rt=Rt+Math.imul(Nr,Jr)|0,Tt=Tt+Math.imul($r,Wr)|0,pt=pt+Math.imul($r,en)|0,pt=pt+Math.imul(Tr,Wr)|0,Rt=Rt+Math.imul(Tr,en)|0;var kn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(kn>>>26)|0,kn&=67108863,Tt=Math.imul(pr,Ur),pt=Math.imul(pr,Qr),pt=pt+Math.imul(nr,Ur)|0,Rt=Math.imul(nr,Qr),Tt=Tt+Math.imul(Mr,Gr)|0,pt=pt+Math.imul(Mr,Jr)|0,pt=pt+Math.imul(Lr,Gr)|0,Rt=Rt+Math.imul(Lr,Jr)|0,Tt=Tt+Math.imul(Cr,Wr)|0,pt=pt+Math.imul(Cr,en)|0,pt=pt+Math.imul(Nr,Wr)|0,Rt=Rt+Math.imul(Nr,en)|0;var On=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(On>>>26)|0,On&=67108863,Tt=Math.imul(pr,Gr),pt=Math.imul(pr,Jr),pt=pt+Math.imul(nr,Gr)|0,Rt=Math.imul(nr,Jr),Tt=Tt+Math.imul(Mr,Wr)|0,pt=pt+Math.imul(Mr,en)|0,pt=pt+Math.imul(Lr,Wr)|0,Rt=Rt+Math.imul(Lr,en)|0;var Dn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,Tt=Math.imul(pr,Wr),pt=Math.imul(pr,en),pt=pt+Math.imul(nr,Wr)|0,Rt=Math.imul(nr,en);var jn=(Pt+Tt|0)+((pt&8191)<<13)|0;return Pt=(Rt+(pt>>>13)|0)+(jn>>>26)|0,jn&=67108863,Nt[0]=on,Nt[1]=un,Nt[2]=wn,Nt[3]=$n,Nt[4]=Sn,Nt[5]=En,Nt[6]=_n,Nt[7]=Tn,Nt[8]=Cn,Nt[9]=An,Nt[10]=Rn,Nt[11]=Nn,Nt[12]=In,Nt[13]=Mn,Nt[14]=Pn,Nt[15]=kn,Nt[16]=On,Nt[17]=Dn,Nt[18]=jn,Pt!==0&&(Nt[19]=Pt,gt.length++),gt};Math.imul||(xt=vt);function wt(Mt,lt,mt){mt.negative=lt.negative^Mt.negative,mt.length=Mt.length+lt.length;for(var gt=0,bt=0,St=0;St<mt.length-1;St++){var Nt=bt;bt=0;for(var Pt=gt&67108863,Tt=Math.min(St,lt.length-1),pt=Math.max(0,St-Mt.length+1);pt<=Tt;pt++){var Rt=St-pt,zt=Mt.words[Rt]|0,Yt=lt.words[pt]|0,ir=zt*Yt,ur=ir&67108863;Nt=Nt+(ir/67108864|0)|0,ur=ur+Pt|0,Pt=ur&67108863,Nt=Nt+(ur>>>26)|0,bt+=Nt>>>26,Nt&=67108863}mt.words[St]=Pt,gt=Nt,Nt=bt}return gt!==0?mt.words[St]=gt:mt.length--,mt.strip()}function Et(Mt,lt,mt){var gt=new At;return gt.mulp(Mt,lt,mt)}rt.prototype.mulTo=function(lt,mt){var gt,bt=this.length+lt.length;return this.length===10&&lt.length===10?gt=xt(this,lt,mt):bt<63?gt=vt(this,lt,mt):bt<1024?gt=wt(this,lt,mt):gt=Et(this,lt,mt),gt};function At(Mt,lt){this.x=Mt,this.y=lt}At.prototype.makeRBT=function(lt){for(var mt=new Array(lt),gt=rt.prototype._countBits(lt)-1,bt=0;bt<lt;bt++)mt[bt]=this.revBin(bt,gt,lt);return mt},At.prototype.revBin=function(lt,mt,gt){if(lt===0||lt===gt-1)return lt;for(var bt=0,St=0;St<mt;St++)bt|=(lt&1)<<mt-St-1,lt>>=1;return bt},At.prototype.permute=function(lt,mt,gt,bt,St,Nt){for(var Pt=0;Pt<Nt;Pt++)bt[Pt]=mt[lt[Pt]],St[Pt]=gt[lt[Pt]]},At.prototype.transform=function(lt,mt,gt,bt,St,Nt){this.permute(Nt,lt,mt,gt,bt,St);for(var Pt=1;Pt<St;Pt<<=1)for(var Tt=Pt<<1,pt=Math.cos(2*Math.PI/Tt),Rt=Math.sin(2*Math.PI/Tt),zt=0;zt<St;zt+=Tt)for(var Yt=pt,ir=Rt,ur=0;ur<Pt;ur++){var cr=gt[zt+ur],rr=bt[zt+ur],fr=gt[zt+ur+Pt],dr=bt[zt+ur+Pt],gr=Yt*fr-ir*dr;dr=Yt*dr+ir*fr,fr=gr,gt[zt+ur]=cr+fr,bt[zt+ur]=rr+dr,gt[zt+ur+Pt]=cr-fr,bt[zt+ur+Pt]=rr-dr,ur!==Tt&&(gr=pt*Yt-Rt*ir,ir=pt*ir+Rt*Yt,Yt=gr)}},At.prototype.guessLen13b=function(lt,mt){var gt=Math.max(mt,lt)|1,bt=gt&1,St=0;for(gt=gt/2|0;gt;gt=gt>>>1)St++;return 1<<St+1+bt},At.prototype.conjugate=function(lt,mt,gt){if(!(gt<=1))for(var bt=0;bt<gt/2;bt++){var St=lt[bt];lt[bt]=lt[gt-bt-1],lt[gt-bt-1]=St,St=mt[bt],mt[bt]=-mt[gt-bt-1],mt[gt-bt-1]=-St}},At.prototype.normalize13b=function(lt,mt){for(var gt=0,bt=0;bt<mt/2;bt++){var St=Math.round(lt[2*bt+1]/mt)*8192+Math.round(lt[2*bt]/mt)+gt;lt[bt]=St&67108863,St<67108864?gt=0:gt=St/67108864|0}return lt},At.prototype.convert13b=function(lt,mt,gt,bt){for(var St=0,Nt=0;Nt<mt;Nt++)St=St+(lt[Nt]|0),gt[2*Nt]=St&8191,St=St>>>13,gt[2*Nt+1]=St&8191,St=St>>>13;for(Nt=2*mt;Nt<bt;++Nt)gt[Nt]=0;et(St===0),et((St&-8192)===0)},At.prototype.stub=function(lt){for(var mt=new Array(lt),gt=0;gt<lt;gt++)mt[gt]=0;return mt},At.prototype.mulp=function(lt,mt,gt){var bt=2*this.guessLen13b(lt.length,mt.length),St=this.makeRBT(bt),Nt=this.stub(bt),Pt=new Array(bt),Tt=new Array(bt),pt=new Array(bt),Rt=new Array(bt),zt=new Array(bt),Yt=new Array(bt),ir=gt.words;ir.length=bt,this.convert13b(lt.words,lt.length,Pt,bt),this.convert13b(mt.words,mt.length,Rt,bt),this.transform(Pt,Nt,Tt,pt,bt,St),this.transform(Rt,Nt,zt,Yt,bt,St);for(var ur=0;ur<bt;ur++){var cr=Tt[ur]*zt[ur]-pt[ur]*Yt[ur];pt[ur]=Tt[ur]*Yt[ur]+pt[ur]*zt[ur],Tt[ur]=cr}return this.conjugate(Tt,pt,bt),this.transform(Tt,pt,ir,Nt,bt,St),this.conjugate(ir,Nt,bt),this.normalize13b(ir,bt),gt.negative=lt.negative^mt.negative,gt.length=lt.length+mt.length,gt.strip()},rt.prototype.mul=function(lt){var mt=new rt(null);return mt.words=new Array(this.length+lt.length),this.mulTo(lt,mt)},rt.prototype.mulf=function(lt){var mt=new rt(null);return mt.words=new Array(this.length+lt.length),Et(this,lt,mt)},rt.prototype.imul=function(lt){return this.clone().mulTo(lt,this)},rt.prototype.imuln=function(lt){et(typeof lt=="number"),et(lt<67108864);for(var mt=0,gt=0;gt<this.length;gt++){var bt=(this.words[gt]|0)*lt,St=(bt&67108863)+(mt&67108863);mt>>=26,mt+=bt/67108864|0,mt+=St>>>26,this.words[gt]=St&67108863}return mt!==0&&(this.words[gt]=mt,this.length++),this},rt.prototype.muln=function(lt){return this.clone().imuln(lt)},rt.prototype.sqr=function(){return this.mul(this)},rt.prototype.isqr=function(){return this.imul(this.clone())},rt.prototype.pow=function(lt){var mt=yt(lt);if(mt.length===0)return new rt(1);for(var gt=this,bt=0;bt<mt.length&&mt[bt]===0;bt++,gt=gt.sqr());if(++bt<mt.length)for(var St=gt.sqr();bt<mt.length;bt++,St=St.sqr())mt[bt]!==0&&(gt=gt.mul(St));return gt},rt.prototype.iushln=function(lt){et(typeof lt=="number"&&lt>=0);var mt=lt%26,gt=(lt-mt)/26,bt=67108863>>>26-mt<<26-mt,St;if(mt!==0){var Nt=0;for(St=0;St<this.length;St++){var Pt=this.words[St]&bt,Tt=(this.words[St]|0)-Pt<<mt;this.words[St]=Tt|Nt,Nt=Pt>>>26-mt}Nt&&(this.words[St]=Nt,this.length++)}if(gt!==0){for(St=this.length-1;St>=0;St--)this.words[St+gt]=this.words[St];for(St=0;St<gt;St++)this.words[St]=0;this.length+=gt}return this.strip()},rt.prototype.ishln=function(lt){return et(this.negative===0),this.iushln(lt)},rt.prototype.iushrn=function(lt,mt,gt){et(typeof lt=="number"&&lt>=0);var bt;mt?bt=(mt-mt%26)/26:bt=0;var St=lt%26,Nt=Math.min((lt-St)/26,this.length),Pt=67108863^67108863>>>St<<St,Tt=gt;if(bt-=Nt,bt=Math.max(0,bt),Tt){for(var pt=0;pt<Nt;pt++)Tt.words[pt]=this.words[pt];Tt.length=Nt}if(Nt!==0)if(this.length>Nt)for(this.length-=Nt,pt=0;pt<this.length;pt++)this.words[pt]=this.words[pt+Nt];else this.words[0]=0,this.length=1;var Rt=0;for(pt=this.length-1;pt>=0&&(Rt!==0||pt>=bt);pt--){var zt=this.words[pt]|0;this.words[pt]=Rt<<26-St|zt>>>St,Rt=zt&Pt}return Tt&&Rt!==0&&(Tt.words[Tt.length++]=Rt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},rt.prototype.ishrn=function(lt,mt,gt){return et(this.negative===0),this.iushrn(lt,mt,gt)},rt.prototype.shln=function(lt){return this.clone().ishln(lt)},rt.prototype.ushln=function(lt){return this.clone().iushln(lt)},rt.prototype.shrn=function(lt){return this.clone().ishrn(lt)},rt.prototype.ushrn=function(lt){return this.clone().iushrn(lt)},rt.prototype.testn=function(lt){et(typeof lt=="number"&&lt>=0);var mt=lt%26,gt=(lt-mt)/26,bt=1<<mt;if(this.length<=gt)return!1;var St=this.words[gt];return!!(St&bt)},rt.prototype.imaskn=function(lt){et(typeof lt=="number"&&lt>=0);var mt=lt%26,gt=(lt-mt)/26;if(et(this.negative===0,"imaskn works only with positive numbers"),this.length<=gt)return this;if(mt!==0&&gt++,this.length=Math.min(gt,this.length),mt!==0){var bt=67108863^67108863>>>mt<<mt;this.words[this.length-1]&=bt}return this.strip()},rt.prototype.maskn=function(lt){return this.clone().imaskn(lt)},rt.prototype.iaddn=function(lt){return et(typeof lt=="number"),et(lt<67108864),lt<0?this.isubn(-lt):this.negative!==0?this.length===1&&(this.words[0]|0)<lt?(this.words[0]=lt-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(lt),this.negative=1,this):this._iaddn(lt)},rt.prototype._iaddn=function(lt){this.words[0]+=lt;for(var mt=0;mt<this.length&&this.words[mt]>=67108864;mt++)this.words[mt]-=67108864,mt===this.length-1?this.words[mt+1]=1:this.words[mt+1]++;return this.length=Math.max(this.length,mt+1),this},rt.prototype.isubn=function(lt){if(et(typeof lt=="number"),et(lt<67108864),lt<0)return this.iaddn(-lt);if(this.negative!==0)return this.negative=0,this.iaddn(lt),this.negative=1,this;if(this.words[0]-=lt,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var mt=0;mt<this.length&&this.words[mt]<0;mt++)this.words[mt]+=67108864,this.words[mt+1]-=1;return this.strip()},rt.prototype.addn=function(lt){return this.clone().iaddn(lt)},rt.prototype.subn=function(lt){return this.clone().isubn(lt)},rt.prototype.iabs=function(){return this.negative=0,this},rt.prototype.abs=function(){return this.clone().iabs()},rt.prototype._ishlnsubmul=function(lt,mt,gt){var bt=lt.length+gt,St;this._expand(bt);var Nt,Pt=0;for(St=0;St<lt.length;St++){Nt=(this.words[St+gt]|0)+Pt;var Tt=(lt.words[St]|0)*mt;Nt-=Tt&67108863,Pt=(Nt>>26)-(Tt/67108864|0),this.words[St+gt]=Nt&67108863}for(;St<this.length-gt;St++)Nt=(this.words[St+gt]|0)+Pt,Pt=Nt>>26,this.words[St+gt]=Nt&67108863;if(Pt===0)return this.strip();for(et(Pt===-1),Pt=0,St=0;St<this.length;St++)Nt=-(this.words[St]|0)+Pt,Pt=Nt>>26,this.words[St]=Nt&67108863;return this.negative=1,this.strip()},rt.prototype._wordDiv=function(lt,mt){var gt=this.length-lt.length,bt=this.clone(),St=lt,Nt=St.words[St.length-1]|0,Pt=this._countBits(Nt);gt=26-Pt,gt!==0&&(St=St.ushln(gt),bt.iushln(gt),Nt=St.words[St.length-1]|0);var Tt=bt.length-St.length,pt;if(mt!=="mod"){pt=new rt(null),pt.length=Tt+1,pt.words=new Array(pt.length);for(var Rt=0;Rt<pt.length;Rt++)pt.words[Rt]=0}var zt=bt.clone()._ishlnsubmul(St,1,Tt);zt.negative===0&&(bt=zt,pt&&(pt.words[Tt]=1));for(var Yt=Tt-1;Yt>=0;Yt--){var ir=(bt.words[St.length+Yt]|0)*67108864+(bt.words[St.length+Yt-1]|0);for(ir=Math.min(ir/Nt|0,67108863),bt._ishlnsubmul(St,ir,Yt);bt.negative!==0;)ir--,bt.negative=0,bt._ishlnsubmul(St,1,Yt),bt.isZero()||(bt.negative^=1);pt&&(pt.words[Yt]=ir)}return pt&&pt.strip(),bt.strip(),mt!=="div"&&gt!==0&&bt.iushrn(gt),{div:pt||null,mod:bt}},rt.prototype.divmod=function(lt,mt,gt){if(et(!lt.isZero()),this.isZero())return{div:new rt(0),mod:new rt(0)};var bt,St,Nt;return this.negative!==0&&lt.negative===0?(Nt=this.neg().divmod(lt,mt),mt!=="mod"&&(bt=Nt.div.neg()),mt!=="div"&&(St=Nt.mod.neg(),gt&&St.negative!==0&&St.iadd(lt)),{div:bt,mod:St}):this.negative===0&&lt.negative!==0?(Nt=this.divmod(lt.neg(),mt),mt!=="mod"&&(bt=Nt.div.neg()),{div:bt,mod:Nt.mod}):this.negative&lt.negative?(Nt=this.neg().divmod(lt.neg(),mt),mt!=="div"&&(St=Nt.mod.neg(),gt&&St.negative!==0&&St.isub(lt)),{div:Nt.div,mod:St}):lt.length>this.length||this.cmp(lt)<0?{div:new rt(0),mod:this}:lt.length===1?mt==="div"?{div:this.divn(lt.words[0]),mod:null}:mt==="mod"?{div:null,mod:new rt(this.modn(lt.words[0]))}:{div:this.divn(lt.words[0]),mod:new rt(this.modn(lt.words[0]))}:this._wordDiv(lt,mt)},rt.prototype.div=function(lt){return this.divmod(lt,"div",!1).div},rt.prototype.mod=function(lt){return this.divmod(lt,"mod",!1).mod},rt.prototype.umod=function(lt){return this.divmod(lt,"mod",!0).mod},rt.prototype.divRound=function(lt){var mt=this.divmod(lt);if(mt.mod.isZero())return mt.div;var gt=mt.div.negative!==0?mt.mod.isub(lt):mt.mod,bt=lt.ushrn(1),St=lt.andln(1),Nt=gt.cmp(bt);return Nt<0||St===1&&Nt===0?mt.div:mt.div.negative!==0?mt.div.isubn(1):mt.div.iaddn(1)},rt.prototype.modn=function(lt){et(lt<=67108863);for(var mt=(1<<26)%lt,gt=0,bt=this.length-1;bt>=0;bt--)gt=(mt*gt+(this.words[bt]|0))%lt;return gt},rt.prototype.idivn=function(lt){et(lt<=67108863);for(var mt=0,gt=this.length-1;gt>=0;gt--){var bt=(this.words[gt]|0)+mt*67108864;this.words[gt]=bt/lt|0,mt=bt%lt}return this.strip()},rt.prototype.divn=function(lt){return this.clone().idivn(lt)},rt.prototype.egcd=function(lt){et(lt.negative===0),et(!lt.isZero());var mt=this,gt=lt.clone();mt.negative!==0?mt=mt.umod(lt):mt=mt.clone();for(var bt=new rt(1),St=new rt(0),Nt=new rt(0),Pt=new rt(1),Tt=0;mt.isEven()&&gt.isEven();)mt.iushrn(1),gt.iushrn(1),++Tt;for(var pt=gt.clone(),Rt=mt.clone();!mt.isZero();){for(var zt=0,Yt=1;!(mt.words[0]&Yt)&&zt<26;++zt,Yt<<=1);if(zt>0)for(mt.iushrn(zt);zt-- >0;)(bt.isOdd()||St.isOdd())&&(bt.iadd(pt),St.isub(Rt)),bt.iushrn(1),St.iushrn(1);for(var ir=0,ur=1;!(gt.words[0]&ur)&&ir<26;++ir,ur<<=1);if(ir>0)for(gt.iushrn(ir);ir-- >0;)(Nt.isOdd()||Pt.isOdd())&&(Nt.iadd(pt),Pt.isub(Rt)),Nt.iushrn(1),Pt.iushrn(1);mt.cmp(gt)>=0?(mt.isub(gt),bt.isub(Nt),St.isub(Pt)):(gt.isub(mt),Nt.isub(bt),Pt.isub(St))}return{a:Nt,b:Pt,gcd:gt.iushln(Tt)}},rt.prototype._invmp=function(lt){et(lt.negative===0),et(!lt.isZero());var mt=this,gt=lt.clone();mt.negative!==0?mt=mt.umod(lt):mt=mt.clone();for(var bt=new rt(1),St=new rt(0),Nt=gt.clone();mt.cmpn(1)>0&&gt.cmpn(1)>0;){for(var Pt=0,Tt=1;!(mt.words[0]&Tt)&&Pt<26;++Pt,Tt<<=1);if(Pt>0)for(mt.iushrn(Pt);Pt-- >0;)bt.isOdd()&&bt.iadd(Nt),bt.iushrn(1);for(var pt=0,Rt=1;!(gt.words[0]&Rt)&&pt<26;++pt,Rt<<=1);if(pt>0)for(gt.iushrn(pt);pt-- >0;)St.isOdd()&&St.iadd(Nt),St.iushrn(1);mt.cmp(gt)>=0?(mt.isub(gt),bt.isub(St)):(gt.isub(mt),St.isub(bt))}var zt;return mt.cmpn(1)===0?zt=bt:zt=St,zt.cmpn(0)<0&&zt.iadd(lt),zt},rt.prototype.gcd=function(lt){if(this.isZero())return lt.abs();if(lt.isZero())return this.abs();var mt=this.clone(),gt=lt.clone();mt.negative=0,gt.negative=0;for(var bt=0;mt.isEven()&&gt.isEven();bt++)mt.iushrn(1),gt.iushrn(1);do{for(;mt.isEven();)mt.iushrn(1);for(;gt.isEven();)gt.iushrn(1);var St=mt.cmp(gt);if(St<0){var Nt=mt;mt=gt,gt=Nt}else if(St===0||gt.cmpn(1)===0)break;mt.isub(gt)}while(!0);return gt.iushln(bt)},rt.prototype.invm=function(lt){return this.egcd(lt).a.umod(lt)},rt.prototype.isEven=function(){return(this.words[0]&1)===0},rt.prototype.isOdd=function(){return(this.words[0]&1)===1},rt.prototype.andln=function(lt){return this.words[0]&lt},rt.prototype.bincn=function(lt){et(typeof lt=="number");var mt=lt%26,gt=(lt-mt)/26,bt=1<<mt;if(this.length<=gt)return this._expand(gt+1),this.words[gt]|=bt,this;for(var St=bt,Nt=gt;St!==0&&Nt<this.length;Nt++){var Pt=this.words[Nt]|0;Pt+=St,St=Pt>>>26,Pt&=67108863,this.words[Nt]=Pt}return St!==0&&(this.words[Nt]=St,this.length++),this},rt.prototype.isZero=function(){return this.length===1&&this.words[0]===0},rt.prototype.cmpn=function(lt){var mt=lt<0;if(this.negative!==0&&!mt)return-1;if(this.negative===0&&mt)return 1;this.strip();var gt;if(this.length>1)gt=1;else{mt&&(lt=-lt),et(lt<=67108863,"Number is too big");var bt=this.words[0]|0;gt=bt===lt?0:bt<lt?-1:1}return this.negative!==0?-gt|0:gt},rt.prototype.cmp=function(lt){if(this.negative!==0&&lt.negative===0)return-1;if(this.negative===0&&lt.negative!==0)return 1;var mt=this.ucmp(lt);return this.negative!==0?-mt|0:mt},rt.prototype.ucmp=function(lt){if(this.length>lt.length)return 1;if(this.length<lt.length)return-1;for(var mt=0,gt=this.length-1;gt>=0;gt--){var bt=this.words[gt]|0,St=lt.words[gt]|0;if(bt!==St){bt<St?mt=-1:bt>St&&(mt=1);break}}return mt},rt.prototype.gtn=function(lt){return this.cmpn(lt)===1},rt.prototype.gt=function(lt){return this.cmp(lt)===1},rt.prototype.gten=function(lt){return this.cmpn(lt)>=0},rt.prototype.gte=function(lt){return this.cmp(lt)>=0},rt.prototype.ltn=function(lt){return this.cmpn(lt)===-1},rt.prototype.lt=function(lt){return this.cmp(lt)===-1},rt.prototype.lten=function(lt){return this.cmpn(lt)<=0},rt.prototype.lte=function(lt){return this.cmp(lt)<=0},rt.prototype.eqn=function(lt){return this.cmpn(lt)===0},rt.prototype.eq=function(lt){return this.cmp(lt)===0},rt.red=function(lt){return new tr(lt)},rt.prototype.toRed=function(lt){return et(!this.red,"Already a number in reduction context"),et(this.negative===0,"red works only with positives"),lt.convertTo(this)._forceRed(lt)},rt.prototype.fromRed=function(){return et(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},rt.prototype._forceRed=function(lt){return this.red=lt,this},rt.prototype.forceRed=function(lt){return et(!this.red,"Already a number in reduction context"),this._forceRed(lt)},rt.prototype.redAdd=function(lt){return et(this.red,"redAdd works only with red numbers"),this.red.add(this,lt)},rt.prototype.redIAdd=function(lt){return et(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,lt)},rt.prototype.redSub=function(lt){return et(this.red,"redSub works only with red numbers"),this.red.sub(this,lt)},rt.prototype.redISub=function(lt){return et(this.red,"redISub works only with red numbers"),this.red.isub(this,lt)},rt.prototype.redShl=function(lt){return et(this.red,"redShl works only with red numbers"),this.red.shl(this,lt)},rt.prototype.redMul=function(lt){return et(this.red,"redMul works only with red numbers"),this.red._verify2(this,lt),this.red.mul(this,lt)},rt.prototype.redIMul=function(lt){return et(this.red,"redMul works only with red numbers"),this.red._verify2(this,lt),this.red.imul(this,lt)},rt.prototype.redSqr=function(){return et(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},rt.prototype.redISqr=function(){return et(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},rt.prototype.redSqrt=function(){return et(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},rt.prototype.redInvm=function(){return et(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},rt.prototype.redNeg=function(){return et(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},rt.prototype.redPow=function(lt){return et(this.red&&!lt.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,lt)};var jt={k256:null,p224:null,p192:null,p25519:null};function kt(Mt,lt){this.name=Mt,this.p=new rt(lt,16),this.n=this.p.bitLength(),this.k=new rt(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}kt.prototype._tmp=function(){var lt=new rt(null);return lt.words=new Array(Math.ceil(this.n/13)),lt},kt.prototype.ireduce=function(lt){var mt=lt,gt;do this.split(mt,this.tmp),mt=this.imulK(mt),mt=mt.iadd(this.tmp),gt=mt.bitLength();while(gt>this.n);var bt=gt<this.n?-1:mt.ucmp(this.p);return bt===0?(mt.words[0]=0,mt.length=1):bt>0?mt.isub(this.p):mt.strip!==void 0?mt.strip():mt._strip(),mt},kt.prototype.split=function(lt,mt){lt.iushrn(this.n,0,mt)},kt.prototype.imulK=function(lt){return lt.imul(this.k)};function Lt(){kt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}tt(Lt,kt),Lt.prototype.split=function(lt,mt){for(var gt=4194303,bt=Math.min(lt.length,9),St=0;St<bt;St++)mt.words[St]=lt.words[St];if(mt.length=bt,lt.length<=9){lt.words[0]=0,lt.length=1;return}var Nt=lt.words[9];for(mt.words[mt.length++]=Nt&gt,St=10;St<lt.length;St++){var Pt=lt.words[St]|0;lt.words[St-10]=(Pt&gt)<<4|Nt>>>22,Nt=Pt}Nt>>>=22,lt.words[St-10]=Nt,Nt===0&&lt.length>10?lt.length-=10:lt.length-=9},Lt.prototype.imulK=function(lt){lt.words[lt.length]=0,lt.words[lt.length+1]=0,lt.length+=2;for(var mt=0,gt=0;gt<lt.length;gt++){var bt=lt.words[gt]|0;mt+=bt*977,lt.words[gt]=mt&67108863,mt=bt*64+(mt/67108864|0)}return lt.words[lt.length-1]===0&&(lt.length--,lt.words[lt.length-1]===0&&lt.length--),lt};function Bt(){kt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}tt(Bt,kt);function Gt(){kt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}tt(Gt,kt);function er(){kt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}tt(er,kt),er.prototype.imulK=function(lt){for(var mt=0,gt=0;gt<lt.length;gt++){var bt=(lt.words[gt]|0)*19+mt,St=bt&67108863;bt>>>=26,lt.words[gt]=St,mt=bt}return mt!==0&&(lt.words[lt.length++]=mt),lt},rt._prime=function(lt){if(jt[lt])return jt[lt];var mt;if(lt==="k256")mt=new Lt;else if(lt==="p224")mt=new Bt;else if(lt==="p192")mt=new Gt;else if(lt==="p25519")mt=new er;else throw new Error("Unknown prime "+lt);return jt[lt]=mt,mt};function tr(Mt){if(typeof Mt=="string"){var lt=rt._prime(Mt);this.m=lt.p,this.prime=lt}else et(Mt.gtn(1),"modulus must be greater than 1"),this.m=Mt,this.prime=null}tr.prototype._verify1=function(lt){et(lt.negative===0,"red works only with positives"),et(lt.red,"red works only with red numbers")},tr.prototype._verify2=function(lt,mt){et((lt.negative|mt.negative)===0,"red works only with positives"),et(lt.red&&lt.red===mt.red,"red works only with red numbers")},tr.prototype.imod=function(lt){return this.prime?this.prime.ireduce(lt)._forceRed(this):lt.umod(this.m)._forceRed(this)},tr.prototype.neg=function(lt){return lt.isZero()?lt.clone():this.m.sub(lt)._forceRed(this)},tr.prototype.add=function(lt,mt){this._verify2(lt,mt);var gt=lt.add(mt);return gt.cmp(this.m)>=0&&gt.isub(this.m),gt._forceRed(this)},tr.prototype.iadd=function(lt,mt){this._verify2(lt,mt);var gt=lt.iadd(mt);return gt.cmp(this.m)>=0&&gt.isub(this.m),gt},tr.prototype.sub=function(lt,mt){this._verify2(lt,mt);var gt=lt.sub(mt);return gt.cmpn(0)<0&&gt.iadd(this.m),gt._forceRed(this)},tr.prototype.isub=function(lt,mt){this._verify2(lt,mt);var gt=lt.isub(mt);return gt.cmpn(0)<0&&gt.iadd(this.m),gt},tr.prototype.shl=function(lt,mt){return this._verify1(lt),this.imod(lt.ushln(mt))},tr.prototype.imul=function(lt,mt){return this._verify2(lt,mt),this.imod(lt.imul(mt))},tr.prototype.mul=function(lt,mt){return this._verify2(lt,mt),this.imod(lt.mul(mt))},tr.prototype.isqr=function(lt){return this.imul(lt,lt.clone())},tr.prototype.sqr=function(lt){return this.mul(lt,lt)},tr.prototype.sqrt=function(lt){if(lt.isZero())return lt.clone();var mt=this.m.andln(3);if(et(mt%2===1),mt===3){var gt=this.m.add(new rt(1)).iushrn(2);return this.pow(lt,gt)}for(var bt=this.m.subn(1),St=0;!bt.isZero()&&bt.andln(1)===0;)St++,bt.iushrn(1);et(!bt.isZero());var Nt=new rt(1).toRed(this),Pt=Nt.redNeg(),Tt=this.m.subn(1).iushrn(1),pt=this.m.bitLength();for(pt=new rt(2*pt*pt).toRed(this);this.pow(pt,Tt).cmp(Pt)!==0;)pt.redIAdd(Pt);for(var Rt=this.pow(pt,bt),zt=this.pow(lt,bt.addn(1).iushrn(1)),Yt=this.pow(lt,bt),ir=St;Yt.cmp(Nt)!==0;){for(var ur=Yt,cr=0;ur.cmp(Nt)!==0;cr++)ur=ur.redSqr();et(cr<ir);var rr=this.pow(Rt,new rt(1).iushln(ir-cr-1));zt=zt.redMul(rr),Rt=rr.redSqr(),Yt=Yt.redMul(Rt),ir=cr}return zt},tr.prototype.invm=function(lt){var mt=lt._invmp(this.m);return mt.negative!==0?(mt.negative=0,this.imod(mt).redNeg()):this.imod(mt)},tr.prototype.pow=function(lt,mt){if(mt.isZero())return new rt(1).toRed(this);if(mt.cmpn(1)===0)return lt.clone();var gt=4,bt=new Array(1<<gt);bt[0]=new rt(1).toRed(this),bt[1]=lt;for(var St=2;St<bt.length;St++)bt[St]=this.mul(bt[St-1],lt);var Nt=bt[0],Pt=0,Tt=0,pt=mt.bitLength()%26;for(pt===0&&(pt=26),St=mt.length-1;St>=0;St--){for(var Rt=mt.words[St],zt=pt-1;zt>=0;zt--){var Yt=Rt>>zt&1;if(Nt!==bt[0]&&(Nt=this.sqr(Nt)),Yt===0&&Pt===0){Tt=0;continue}Pt<<=1,Pt|=Yt,Tt++,!(Tt!==gt&&(St!==0||zt!==0))&&(Nt=this.mul(Nt,bt[Pt]),Tt=0,Pt=0)}pt=26}return Nt},tr.prototype.convertTo=function(lt){var mt=lt.umod(this.m);return mt===lt?mt.clone():mt},tr.prototype.convertFrom=function(lt){var mt=lt.clone();return mt.red=null,mt},rt.mont=function(lt){return new ar(lt)};function ar(Mt){tr.call(this,Mt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new rt(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}tt(ar,tr),ar.prototype.convertTo=function(lt){return this.imod(lt.ushln(this.shift))},ar.prototype.convertFrom=function(lt){var mt=this.imod(lt.mul(this.rinv));return mt.red=null,mt},ar.prototype.imul=function(lt,mt){if(lt.isZero()||mt.isZero())return lt.words[0]=0,lt.length=1,lt;var gt=lt.imul(mt),bt=gt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),St=gt.isub(bt).iushrn(this.shift),Nt=St;return St.cmp(this.m)>=0?Nt=St.isub(this.m):St.cmpn(0)<0&&(Nt=St.iadd(this.m)),Nt._forceRed(this)},ar.prototype.mul=function(lt,mt){if(lt.isZero()||mt.isZero())return new rt(0)._forceRed(this);var gt=lt.mul(mt),bt=gt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),St=gt.isub(bt).iushrn(this.shift),Nt=St;return St.cmp(this.m)>=0?Nt=St.isub(this.m):St.cmpn(0)<0&&(Nt=St.iadd(this.m)),Nt._forceRed(this)},ar.prototype.invm=function(lt){var mt=this.imod(lt._invmp(this.m).mul(this.r2));return mt._forceRed(this)}})(_,commonjsGlobal)}(bn$1)),bn$1.exports}var browser$3,hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$3;hasRequiredBrowser$2=1;var _=requireElliptic(),$=requireBn$1();browser$3=function(nt){return new et(nt)};var _e={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};_e.p224=_e.secp224r1,_e.p256=_e.secp256r1=_e.prime256v1,_e.p192=_e.secp192r1=_e.prime192v1,_e.p384=_e.secp384r1,_e.p521=_e.secp521r1;function et(rt){this.curveType=_e[rt],this.curveType||(this.curveType={name:rt}),this.curve=new _.ec(this.curveType.name),this.keys=void 0}et.prototype.generateKeys=function(rt,nt){return this.keys=this.curve.genKeyPair(),this.getPublicKey(rt,nt)},et.prototype.computeSecret=function(rt,nt,it){nt=nt||"utf8",Buffer.isBuffer(rt)||(rt=new Buffer(rt,nt));var st=this.curve.keyFromPublic(rt).getPublic(),at=st.mul(this.keys.getPrivate()).getX();return tt(at,it,this.curveType.byteLength)},et.prototype.getPublicKey=function(rt,nt){var it=this.keys.getPublic(nt==="compressed",!0);return nt==="hybrid"&&(it[it.length-1]%2?it[0]=7:it[0]=6),tt(it,rt)},et.prototype.getPrivateKey=function(rt){return tt(this.keys.getPrivate(),rt)},et.prototype.setPublicKey=function(rt,nt){return nt=nt||"utf8",Buffer.isBuffer(rt)||(rt=new Buffer(rt,nt)),this.keys._importPublic(rt),this},et.prototype.setPrivateKey=function(rt,nt){nt=nt||"utf8",Buffer.isBuffer(rt)||(rt=new Buffer(rt,nt));var it=new $(rt);return it=it.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(it),this};function tt(rt,nt,it){Array.isArray(rt)||(rt=rt.toArray());var st=new Buffer(rt);if(it&&st.length<it){var at=new Buffer(it-st.length);at.fill(0),st=Buffer.concat([at,st])}return nt?st.toString(nt):st}return browser$3}var browser$2={},mgf,hasRequiredMgf;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var _=requireBrowser$9(),$=requireSafeBuffer$1().Buffer;mgf=function(et,tt){for(var rt=$.alloc(0),nt=0,it;rt.length<tt;)it=_e(nt++),rt=$.concat([rt,_("sha1").update(et).update(it).digest()]);return rt.slice(0,tt)};function _e(et){var tt=$.allocUnsafe(4);return tt.writeUInt32BE(et,0),tt}return mgf}var xor,hasRequiredXor;function requireXor(){return hasRequiredXor||(hasRequiredXor=1,xor=function($,_e){for(var et=$.length,tt=-1;++tt<et;)$[tt]^=_e[tt];return $}),xor}var bn={exports:{}};bn.exports;var hasRequiredBn;function requireBn(){return hasRequiredBn||(hasRequiredBn=1,function(_){(function($,_e){function et(Mt,lt){if(!Mt)throw new Error(lt||"Assertion failed")}function tt(Mt,lt){Mt.super_=lt;var mt=function(){};mt.prototype=lt.prototype,Mt.prototype=new mt,Mt.prototype.constructor=Mt}function rt(Mt,lt,mt){if(rt.isBN(Mt))return Mt;this.negative=0,this.words=null,this.length=0,this.red=null,Mt!==null&&((lt==="le"||lt==="be")&&(mt=lt,lt=10),this._init(Mt||0,lt||10,mt||"be"))}typeof $=="object"?$.exports=rt:_e.BN=rt,rt.BN=rt,rt.wordSize=26;var nt;try{typeof window<"u"&&typeof window.Buffer<"u"?nt=window.Buffer:nt=require$$0$2.Buffer}catch{}rt.isBN=function(lt){return lt instanceof rt?!0:lt!==null&&typeof lt=="object"&&lt.constructor.wordSize===rt.wordSize&&Array.isArray(lt.words)},rt.max=function(lt,mt){return lt.cmp(mt)>0?lt:mt},rt.min=function(lt,mt){return lt.cmp(mt)<0?lt:mt},rt.prototype._init=function(lt,mt,gt){if(typeof lt=="number")return this._initNumber(lt,mt,gt);if(typeof lt=="object")return this._initArray(lt,mt,gt);mt==="hex"&&(mt=16),et(mt===(mt|0)&&mt>=2&&mt<=36),lt=lt.toString().replace(/\s+/g,"");var bt=0;lt[0]==="-"&&(bt++,this.negative=1),bt<lt.length&&(mt===16?this._parseHex(lt,bt,gt):(this._parseBase(lt,mt,bt),gt==="le"&&this._initArray(this.toArray(),mt,gt)))},rt.prototype._initNumber=function(lt,mt,gt){lt<0&&(this.negative=1,lt=-lt),lt<67108864?(this.words=[lt&67108863],this.length=1):lt<4503599627370496?(this.words=[lt&67108863,lt/67108864&67108863],this.length=2):(et(lt<9007199254740992),this.words=[lt&67108863,lt/67108864&67108863,1],this.length=3),gt==="le"&&this._initArray(this.toArray(),mt,gt)},rt.prototype._initArray=function(lt,mt,gt){if(et(typeof lt.length=="number"),lt.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(lt.length/3),this.words=new Array(this.length);for(var bt=0;bt<this.length;bt++)this.words[bt]=0;var St,Nt,Pt=0;if(gt==="be")for(bt=lt.length-1,St=0;bt>=0;bt-=3)Nt=lt[bt]|lt[bt-1]<<8|lt[bt-2]<<16,this.words[St]|=Nt<<Pt&67108863,this.words[St+1]=Nt>>>26-Pt&67108863,Pt+=24,Pt>=26&&(Pt-=26,St++);else if(gt==="le")for(bt=0,St=0;bt<lt.length;bt+=3)Nt=lt[bt]|lt[bt+1]<<8|lt[bt+2]<<16,this.words[St]|=Nt<<Pt&67108863,this.words[St+1]=Nt>>>26-Pt&67108863,Pt+=24,Pt>=26&&(Pt-=26,St++);return this.strip()};function it(Mt,lt){var mt=Mt.charCodeAt(lt);return mt>=65&&mt<=70?mt-55:mt>=97&&mt<=102?mt-87:mt-48&15}function st(Mt,lt,mt){var gt=it(Mt,mt);return mt-1>=lt&&(gt|=it(Mt,mt-1)<<4),gt}rt.prototype._parseHex=function(lt,mt,gt){this.length=Math.ceil((lt.length-mt)/6),this.words=new Array(this.length);for(var bt=0;bt<this.length;bt++)this.words[bt]=0;var St=0,Nt=0,Pt;if(gt==="be")for(bt=lt.length-1;bt>=mt;bt-=2)Pt=st(lt,mt,bt)<<St,this.words[Nt]|=Pt&67108863,St>=18?(St-=18,Nt+=1,this.words[Nt]|=Pt>>>26):St+=8;else{var Tt=lt.length-mt;for(bt=Tt%2===0?mt+1:mt;bt<lt.length;bt+=2)Pt=st(lt,mt,bt)<<St,this.words[Nt]|=Pt&67108863,St>=18?(St-=18,Nt+=1,this.words[Nt]|=Pt>>>26):St+=8}this.strip()};function at(Mt,lt,mt,gt){for(var bt=0,St=Math.min(Mt.length,mt),Nt=lt;Nt<St;Nt++){var Pt=Mt.charCodeAt(Nt)-48;bt*=gt,Pt>=49?bt+=Pt-49+10:Pt>=17?bt+=Pt-17+10:bt+=Pt}return bt}rt.prototype._parseBase=function(lt,mt,gt){this.words=[0],this.length=1;for(var bt=0,St=1;St<=67108863;St*=mt)bt++;bt--,St=St/mt|0;for(var Nt=lt.length-gt,Pt=Nt%bt,Tt=Math.min(Nt,Nt-Pt)+gt,pt=0,Rt=gt;Rt<Tt;Rt+=bt)pt=at(lt,Rt,Rt+bt,mt),this.imuln(St),this.words[0]+pt<67108864?this.words[0]+=pt:this._iaddn(pt);if(Pt!==0){var zt=1;for(pt=at(lt,Rt,lt.length,mt),Rt=0;Rt<Pt;Rt++)zt*=mt;this.imuln(zt),this.words[0]+pt<67108864?this.words[0]+=pt:this._iaddn(pt)}this.strip()},rt.prototype.copy=function(lt){lt.words=new Array(this.length);for(var mt=0;mt<this.length;mt++)lt.words[mt]=this.words[mt];lt.length=this.length,lt.negative=this.negative,lt.red=this.red},rt.prototype.clone=function(){var lt=new rt(null);return this.copy(lt),lt},rt.prototype._expand=function(lt){for(;this.length<lt;)this.words[this.length++]=0;return this},rt.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},rt.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},rt.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var ot=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],dt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ht=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];rt.prototype.toString=function(lt,mt){lt=lt||10,mt=mt|0||1;var gt;if(lt===16||lt==="hex"){gt="";for(var bt=0,St=0,Nt=0;Nt<this.length;Nt++){var Pt=this.words[Nt],Tt=((Pt<<bt|St)&16777215).toString(16);St=Pt>>>24-bt&16777215,bt+=2,bt>=26&&(bt-=26,Nt--),St!==0||Nt!==this.length-1?gt=ot[6-Tt.length]+Tt+gt:gt=Tt+gt}for(St!==0&&(gt=St.toString(16)+gt);gt.length%mt!==0;)gt="0"+gt;return this.negative!==0&&(gt="-"+gt),gt}if(lt===(lt|0)&&lt>=2&&lt<=36){var pt=dt[lt],Rt=ht[lt];gt="";var zt=this.clone();for(zt.negative=0;!zt.isZero();){var Yt=zt.modn(Rt).toString(lt);zt=zt.idivn(Rt),zt.isZero()?gt=Yt+gt:gt=ot[pt-Yt.length]+Yt+gt}for(this.isZero()&&(gt="0"+gt);gt.length%mt!==0;)gt="0"+gt;return this.negative!==0&&(gt="-"+gt),gt}et(!1,"Base should be between 2 and 36")},rt.prototype.toNumber=function(){var lt=this.words[0];return this.length===2?lt+=this.words[1]*67108864:this.length===3&&this.words[2]===1?lt+=4503599627370496+this.words[1]*67108864:this.length>2&&et(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-lt:lt},rt.prototype.toJSON=function(){return this.toString(16)},rt.prototype.toBuffer=function(lt,mt){return et(typeof nt<"u"),this.toArrayLike(nt,lt,mt)},rt.prototype.toArray=function(lt,mt){return this.toArrayLike(Array,lt,mt)},rt.prototype.toArrayLike=function(lt,mt,gt){var bt=this.byteLength(),St=gt||Math.max(1,bt);et(bt<=St,"byte array longer than desired length"),et(St>0,"Requested array length <= 0"),this.strip();var Nt=mt==="le",Pt=new lt(St),Tt,pt,Rt=this.clone();if(Nt){for(pt=0;!Rt.isZero();pt++)Tt=Rt.andln(255),Rt.iushrn(8),Pt[pt]=Tt;for(;pt<St;pt++)Pt[pt]=0}else{for(pt=0;pt<St-bt;pt++)Pt[pt]=0;for(pt=0;!Rt.isZero();pt++)Tt=Rt.andln(255),Rt.iushrn(8),Pt[St-pt-1]=Tt}return Pt},Math.clz32?rt.prototype._countBits=function(lt){return 32-Math.clz32(lt)}:rt.prototype._countBits=function(lt){var mt=lt,gt=0;return mt>=4096&&(gt+=13,mt>>>=13),mt>=64&&(gt+=7,mt>>>=7),mt>=8&&(gt+=4,mt>>>=4),mt>=2&&(gt+=2,mt>>>=2),gt+mt},rt.prototype._zeroBits=function(lt){if(lt===0)return 26;var mt=lt,gt=0;return mt&8191||(gt+=13,mt>>>=13),mt&127||(gt+=7,mt>>>=7),mt&15||(gt+=4,mt>>>=4),mt&3||(gt+=2,mt>>>=2),mt&1||gt++,gt},rt.prototype.bitLength=function(){var lt=this.words[this.length-1],mt=this._countBits(lt);return(this.length-1)*26+mt};function yt(Mt){for(var lt=new Array(Mt.bitLength()),mt=0;mt<lt.length;mt++){var gt=mt/26|0,bt=mt%26;lt[mt]=(Mt.words[gt]&1<<bt)>>>bt}return lt}rt.prototype.zeroBits=function(){if(this.isZero())return 0;for(var lt=0,mt=0;mt<this.length;mt++){var gt=this._zeroBits(this.words[mt]);if(lt+=gt,gt!==26)break}return lt},rt.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},rt.prototype.toTwos=function(lt){return this.negative!==0?this.abs().inotn(lt).iaddn(1):this.clone()},rt.prototype.fromTwos=function(lt){return this.testn(lt-1)?this.notn(lt).iaddn(1).ineg():this.clone()},rt.prototype.isNeg=function(){return this.negative!==0},rt.prototype.neg=function(){return this.clone().ineg()},rt.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},rt.prototype.iuor=function(lt){for(;this.length<lt.length;)this.words[this.length++]=0;for(var mt=0;mt<lt.length;mt++)this.words[mt]=this.words[mt]|lt.words[mt];return this.strip()},rt.prototype.ior=function(lt){return et((this.negative|lt.negative)===0),this.iuor(lt)},rt.prototype.or=function(lt){return this.length>lt.length?this.clone().ior(lt):lt.clone().ior(this)},rt.prototype.uor=function(lt){return this.length>lt.length?this.clone().iuor(lt):lt.clone().iuor(this)},rt.prototype.iuand=function(lt){var mt;this.length>lt.length?mt=lt:mt=this;for(var gt=0;gt<mt.length;gt++)this.words[gt]=this.words[gt]&lt.words[gt];return this.length=mt.length,this.strip()},rt.prototype.iand=function(lt){return et((this.negative|lt.negative)===0),this.iuand(lt)},rt.prototype.and=function(lt){return this.length>lt.length?this.clone().iand(lt):lt.clone().iand(this)},rt.prototype.uand=function(lt){return this.length>lt.length?this.clone().iuand(lt):lt.clone().iuand(this)},rt.prototype.iuxor=function(lt){var mt,gt;this.length>lt.length?(mt=this,gt=lt):(mt=lt,gt=this);for(var bt=0;bt<gt.length;bt++)this.words[bt]=mt.words[bt]^gt.words[bt];if(this!==mt)for(;bt<mt.length;bt++)this.words[bt]=mt.words[bt];return this.length=mt.length,this.strip()},rt.prototype.ixor=function(lt){return et((this.negative|lt.negative)===0),this.iuxor(lt)},rt.prototype.xor=function(lt){return this.length>lt.length?this.clone().ixor(lt):lt.clone().ixor(this)},rt.prototype.uxor=function(lt){return this.length>lt.length?this.clone().iuxor(lt):lt.clone().iuxor(this)},rt.prototype.inotn=function(lt){et(typeof lt=="number"&&lt>=0);var mt=Math.ceil(lt/26)|0,gt=lt%26;this._expand(mt),gt>0&&mt--;for(var bt=0;bt<mt;bt++)this.words[bt]=~this.words[bt]&67108863;return gt>0&&(this.words[bt]=~this.words[bt]&67108863>>26-gt),this.strip()},rt.prototype.notn=function(lt){return this.clone().inotn(lt)},rt.prototype.setn=function(lt,mt){et(typeof lt=="number"&&lt>=0);var gt=lt/26|0,bt=lt%26;return this._expand(gt+1),mt?this.words[gt]=this.words[gt]|1<<bt:this.words[gt]=this.words[gt]&~(1<<bt),this.strip()},rt.prototype.iadd=function(lt){var mt;if(this.negative!==0&&lt.negative===0)return this.negative=0,mt=this.isub(lt),this.negative^=1,this._normSign();if(this.negative===0&&lt.negative!==0)return lt.negative=0,mt=this.isub(lt),lt.negative=1,mt._normSign();var gt,bt;this.length>lt.length?(gt=this,bt=lt):(gt=lt,bt=this);for(var St=0,Nt=0;Nt<bt.length;Nt++)mt=(gt.words[Nt]|0)+(bt.words[Nt]|0)+St,this.words[Nt]=mt&67108863,St=mt>>>26;for(;St!==0&&Nt<gt.length;Nt++)mt=(gt.words[Nt]|0)+St,this.words[Nt]=mt&67108863,St=mt>>>26;if(this.length=gt.length,St!==0)this.words[this.length]=St,this.length++;else if(gt!==this)for(;Nt<gt.length;Nt++)this.words[Nt]=gt.words[Nt];return this},rt.prototype.add=function(lt){var mt;return lt.negative!==0&&this.negative===0?(lt.negative=0,mt=this.sub(lt),lt.negative^=1,mt):lt.negative===0&&this.negative!==0?(this.negative=0,mt=lt.sub(this),this.negative=1,mt):this.length>lt.length?this.clone().iadd(lt):lt.clone().iadd(this)},rt.prototype.isub=function(lt){if(lt.negative!==0){lt.negative=0;var mt=this.iadd(lt);return lt.negative=1,mt._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(lt),this.negative=1,this._normSign();var gt=this.cmp(lt);if(gt===0)return this.negative=0,this.length=1,this.words[0]=0,this;var bt,St;gt>0?(bt=this,St=lt):(bt=lt,St=this);for(var Nt=0,Pt=0;Pt<St.length;Pt++)mt=(bt.words[Pt]|0)-(St.words[Pt]|0)+Nt,Nt=mt>>26,this.words[Pt]=mt&67108863;for(;Nt!==0&&Pt<bt.length;Pt++)mt=(bt.words[Pt]|0)+Nt,Nt=mt>>26,this.words[Pt]=mt&67108863;if(Nt===0&&Pt<bt.length&&bt!==this)for(;Pt<bt.length;Pt++)this.words[Pt]=bt.words[Pt];return this.length=Math.max(this.length,Pt),bt!==this&&(this.negative=1),this.strip()},rt.prototype.sub=function(lt){return this.clone().isub(lt)};function vt(Mt,lt,mt){mt.negative=lt.negative^Mt.negative;var gt=Mt.length+lt.length|0;mt.length=gt,gt=gt-1|0;var bt=Mt.words[0]|0,St=lt.words[0]|0,Nt=bt*St,Pt=Nt&67108863,Tt=Nt/67108864|0;mt.words[0]=Pt;for(var pt=1;pt<gt;pt++){for(var Rt=Tt>>>26,zt=Tt&67108863,Yt=Math.min(pt,lt.length-1),ir=Math.max(0,pt-Mt.length+1);ir<=Yt;ir++){var ur=pt-ir|0;bt=Mt.words[ur]|0,St=lt.words[ir]|0,Nt=bt*St+zt,Rt+=Nt/67108864|0,zt=Nt&67108863}mt.words[pt]=zt|0,Tt=Rt|0}return Tt!==0?mt.words[pt]=Tt|0:mt.length--,mt.strip()}var xt=function(lt,mt,gt){var bt=lt.words,St=mt.words,Nt=gt.words,Pt=0,Tt,pt,Rt,zt=bt[0]|0,Yt=zt&8191,ir=zt>>>13,ur=bt[1]|0,cr=ur&8191,rr=ur>>>13,fr=bt[2]|0,dr=fr&8191,gr=fr>>>13,hr=bt[3]|0,or=hr&8191,br=hr>>>13,Rr=bt[4]|0,_r=Rr&8191,Er=Rr>>>13,Hr=bt[5]|0,xr=Hr&8191,yr=Hr>>>13,Ar=bt[6]|0,$r=Ar&8191,Tr=Ar>>>13,jr=bt[7]|0,Cr=jr&8191,Nr=jr>>>13,nn=bt[8]|0,Mr=nn&8191,Lr=nn>>>13,an=bt[9]|0,pr=an&8191,nr=an>>>13,lr=St[0]|0,vr=lr&8191,wr=lr>>>13,Pr=St[1]|0,Sr=Pr&8191,Dr=Pr>>>13,rn=St[2]|0,Ir=rn&8191,Or=rn>>>13,sn=St[3]|0,Fr=sn&8191,Kr=sn>>>13,fn=St[4]|0,Br=fn&8191,Zr=fn>>>13,hn=St[5]|0,zr=hn&8191,Xr=hn>>>13,pn=St[6]|0,Vr=pn&8191,Yr=pn>>>13,mn=St[7]|0,Ur=mn&8191,Qr=mn>>>13,gn=St[8]|0,Gr=gn&8191,Jr=gn>>>13,yn=St[9]|0,Wr=yn&8191,en=yn>>>13;gt.negative=lt.negative^mt.negative,gt.length=19,Tt=Math.imul(Yt,vr),pt=Math.imul(Yt,wr),pt=pt+Math.imul(ir,vr)|0,Rt=Math.imul(ir,wr);var on=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(on>>>26)|0,on&=67108863,Tt=Math.imul(cr,vr),pt=Math.imul(cr,wr),pt=pt+Math.imul(rr,vr)|0,Rt=Math.imul(rr,wr),Tt=Tt+Math.imul(Yt,Sr)|0,pt=pt+Math.imul(Yt,Dr)|0,pt=pt+Math.imul(ir,Sr)|0,Rt=Rt+Math.imul(ir,Dr)|0;var un=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(un>>>26)|0,un&=67108863,Tt=Math.imul(dr,vr),pt=Math.imul(dr,wr),pt=pt+Math.imul(gr,vr)|0,Rt=Math.imul(gr,wr),Tt=Tt+Math.imul(cr,Sr)|0,pt=pt+Math.imul(cr,Dr)|0,pt=pt+Math.imul(rr,Sr)|0,Rt=Rt+Math.imul(rr,Dr)|0,Tt=Tt+Math.imul(Yt,Ir)|0,pt=pt+Math.imul(Yt,Or)|0,pt=pt+Math.imul(ir,Ir)|0,Rt=Rt+Math.imul(ir,Or)|0;var wn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(wn>>>26)|0,wn&=67108863,Tt=Math.imul(or,vr),pt=Math.imul(or,wr),pt=pt+Math.imul(br,vr)|0,Rt=Math.imul(br,wr),Tt=Tt+Math.imul(dr,Sr)|0,pt=pt+Math.imul(dr,Dr)|0,pt=pt+Math.imul(gr,Sr)|0,Rt=Rt+Math.imul(gr,Dr)|0,Tt=Tt+Math.imul(cr,Ir)|0,pt=pt+Math.imul(cr,Or)|0,pt=pt+Math.imul(rr,Ir)|0,Rt=Rt+Math.imul(rr,Or)|0,Tt=Tt+Math.imul(Yt,Fr)|0,pt=pt+Math.imul(Yt,Kr)|0,pt=pt+Math.imul(ir,Fr)|0,Rt=Rt+Math.imul(ir,Kr)|0;var $n=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+($n>>>26)|0,$n&=67108863,Tt=Math.imul(_r,vr),pt=Math.imul(_r,wr),pt=pt+Math.imul(Er,vr)|0,Rt=Math.imul(Er,wr),Tt=Tt+Math.imul(or,Sr)|0,pt=pt+Math.imul(or,Dr)|0,pt=pt+Math.imul(br,Sr)|0,Rt=Rt+Math.imul(br,Dr)|0,Tt=Tt+Math.imul(dr,Ir)|0,pt=pt+Math.imul(dr,Or)|0,pt=pt+Math.imul(gr,Ir)|0,Rt=Rt+Math.imul(gr,Or)|0,Tt=Tt+Math.imul(cr,Fr)|0,pt=pt+Math.imul(cr,Kr)|0,pt=pt+Math.imul(rr,Fr)|0,Rt=Rt+Math.imul(rr,Kr)|0,Tt=Tt+Math.imul(Yt,Br)|0,pt=pt+Math.imul(Yt,Zr)|0,pt=pt+Math.imul(ir,Br)|0,Rt=Rt+Math.imul(ir,Zr)|0;var Sn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,Tt=Math.imul(xr,vr),pt=Math.imul(xr,wr),pt=pt+Math.imul(yr,vr)|0,Rt=Math.imul(yr,wr),Tt=Tt+Math.imul(_r,Sr)|0,pt=pt+Math.imul(_r,Dr)|0,pt=pt+Math.imul(Er,Sr)|0,Rt=Rt+Math.imul(Er,Dr)|0,Tt=Tt+Math.imul(or,Ir)|0,pt=pt+Math.imul(or,Or)|0,pt=pt+Math.imul(br,Ir)|0,Rt=Rt+Math.imul(br,Or)|0,Tt=Tt+Math.imul(dr,Fr)|0,pt=pt+Math.imul(dr,Kr)|0,pt=pt+Math.imul(gr,Fr)|0,Rt=Rt+Math.imul(gr,Kr)|0,Tt=Tt+Math.imul(cr,Br)|0,pt=pt+Math.imul(cr,Zr)|0,pt=pt+Math.imul(rr,Br)|0,Rt=Rt+Math.imul(rr,Zr)|0,Tt=Tt+Math.imul(Yt,zr)|0,pt=pt+Math.imul(Yt,Xr)|0,pt=pt+Math.imul(ir,zr)|0,Rt=Rt+Math.imul(ir,Xr)|0;var En=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(En>>>26)|0,En&=67108863,Tt=Math.imul($r,vr),pt=Math.imul($r,wr),pt=pt+Math.imul(Tr,vr)|0,Rt=Math.imul(Tr,wr),Tt=Tt+Math.imul(xr,Sr)|0,pt=pt+Math.imul(xr,Dr)|0,pt=pt+Math.imul(yr,Sr)|0,Rt=Rt+Math.imul(yr,Dr)|0,Tt=Tt+Math.imul(_r,Ir)|0,pt=pt+Math.imul(_r,Or)|0,pt=pt+Math.imul(Er,Ir)|0,Rt=Rt+Math.imul(Er,Or)|0,Tt=Tt+Math.imul(or,Fr)|0,pt=pt+Math.imul(or,Kr)|0,pt=pt+Math.imul(br,Fr)|0,Rt=Rt+Math.imul(br,Kr)|0,Tt=Tt+Math.imul(dr,Br)|0,pt=pt+Math.imul(dr,Zr)|0,pt=pt+Math.imul(gr,Br)|0,Rt=Rt+Math.imul(gr,Zr)|0,Tt=Tt+Math.imul(cr,zr)|0,pt=pt+Math.imul(cr,Xr)|0,pt=pt+Math.imul(rr,zr)|0,Rt=Rt+Math.imul(rr,Xr)|0,Tt=Tt+Math.imul(Yt,Vr)|0,pt=pt+Math.imul(Yt,Yr)|0,pt=pt+Math.imul(ir,Vr)|0,Rt=Rt+Math.imul(ir,Yr)|0;var _n=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(_n>>>26)|0,_n&=67108863,Tt=Math.imul(Cr,vr),pt=Math.imul(Cr,wr),pt=pt+Math.imul(Nr,vr)|0,Rt=Math.imul(Nr,wr),Tt=Tt+Math.imul($r,Sr)|0,pt=pt+Math.imul($r,Dr)|0,pt=pt+Math.imul(Tr,Sr)|0,Rt=Rt+Math.imul(Tr,Dr)|0,Tt=Tt+Math.imul(xr,Ir)|0,pt=pt+Math.imul(xr,Or)|0,pt=pt+Math.imul(yr,Ir)|0,Rt=Rt+Math.imul(yr,Or)|0,Tt=Tt+Math.imul(_r,Fr)|0,pt=pt+Math.imul(_r,Kr)|0,pt=pt+Math.imul(Er,Fr)|0,Rt=Rt+Math.imul(Er,Kr)|0,Tt=Tt+Math.imul(or,Br)|0,pt=pt+Math.imul(or,Zr)|0,pt=pt+Math.imul(br,Br)|0,Rt=Rt+Math.imul(br,Zr)|0,Tt=Tt+Math.imul(dr,zr)|0,pt=pt+Math.imul(dr,Xr)|0,pt=pt+Math.imul(gr,zr)|0,Rt=Rt+Math.imul(gr,Xr)|0,Tt=Tt+Math.imul(cr,Vr)|0,pt=pt+Math.imul(cr,Yr)|0,pt=pt+Math.imul(rr,Vr)|0,Rt=Rt+Math.imul(rr,Yr)|0,Tt=Tt+Math.imul(Yt,Ur)|0,pt=pt+Math.imul(Yt,Qr)|0,pt=pt+Math.imul(ir,Ur)|0,Rt=Rt+Math.imul(ir,Qr)|0;var Tn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,Tt=Math.imul(Mr,vr),pt=Math.imul(Mr,wr),pt=pt+Math.imul(Lr,vr)|0,Rt=Math.imul(Lr,wr),Tt=Tt+Math.imul(Cr,Sr)|0,pt=pt+Math.imul(Cr,Dr)|0,pt=pt+Math.imul(Nr,Sr)|0,Rt=Rt+Math.imul(Nr,Dr)|0,Tt=Tt+Math.imul($r,Ir)|0,pt=pt+Math.imul($r,Or)|0,pt=pt+Math.imul(Tr,Ir)|0,Rt=Rt+Math.imul(Tr,Or)|0,Tt=Tt+Math.imul(xr,Fr)|0,pt=pt+Math.imul(xr,Kr)|0,pt=pt+Math.imul(yr,Fr)|0,Rt=Rt+Math.imul(yr,Kr)|0,Tt=Tt+Math.imul(_r,Br)|0,pt=pt+Math.imul(_r,Zr)|0,pt=pt+Math.imul(Er,Br)|0,Rt=Rt+Math.imul(Er,Zr)|0,Tt=Tt+Math.imul(or,zr)|0,pt=pt+Math.imul(or,Xr)|0,pt=pt+Math.imul(br,zr)|0,Rt=Rt+Math.imul(br,Xr)|0,Tt=Tt+Math.imul(dr,Vr)|0,pt=pt+Math.imul(dr,Yr)|0,pt=pt+Math.imul(gr,Vr)|0,Rt=Rt+Math.imul(gr,Yr)|0,Tt=Tt+Math.imul(cr,Ur)|0,pt=pt+Math.imul(cr,Qr)|0,pt=pt+Math.imul(rr,Ur)|0,Rt=Rt+Math.imul(rr,Qr)|0,Tt=Tt+Math.imul(Yt,Gr)|0,pt=pt+Math.imul(Yt,Jr)|0,pt=pt+Math.imul(ir,Gr)|0,Rt=Rt+Math.imul(ir,Jr)|0;var Cn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,Tt=Math.imul(pr,vr),pt=Math.imul(pr,wr),pt=pt+Math.imul(nr,vr)|0,Rt=Math.imul(nr,wr),Tt=Tt+Math.imul(Mr,Sr)|0,pt=pt+Math.imul(Mr,Dr)|0,pt=pt+Math.imul(Lr,Sr)|0,Rt=Rt+Math.imul(Lr,Dr)|0,Tt=Tt+Math.imul(Cr,Ir)|0,pt=pt+Math.imul(Cr,Or)|0,pt=pt+Math.imul(Nr,Ir)|0,Rt=Rt+Math.imul(Nr,Or)|0,Tt=Tt+Math.imul($r,Fr)|0,pt=pt+Math.imul($r,Kr)|0,pt=pt+Math.imul(Tr,Fr)|0,Rt=Rt+Math.imul(Tr,Kr)|0,Tt=Tt+Math.imul(xr,Br)|0,pt=pt+Math.imul(xr,Zr)|0,pt=pt+Math.imul(yr,Br)|0,Rt=Rt+Math.imul(yr,Zr)|0,Tt=Tt+Math.imul(_r,zr)|0,pt=pt+Math.imul(_r,Xr)|0,pt=pt+Math.imul(Er,zr)|0,Rt=Rt+Math.imul(Er,Xr)|0,Tt=Tt+Math.imul(or,Vr)|0,pt=pt+Math.imul(or,Yr)|0,pt=pt+Math.imul(br,Vr)|0,Rt=Rt+Math.imul(br,Yr)|0,Tt=Tt+Math.imul(dr,Ur)|0,pt=pt+Math.imul(dr,Qr)|0,pt=pt+Math.imul(gr,Ur)|0,Rt=Rt+Math.imul(gr,Qr)|0,Tt=Tt+Math.imul(cr,Gr)|0,pt=pt+Math.imul(cr,Jr)|0,pt=pt+Math.imul(rr,Gr)|0,Rt=Rt+Math.imul(rr,Jr)|0,Tt=Tt+Math.imul(Yt,Wr)|0,pt=pt+Math.imul(Yt,en)|0,pt=pt+Math.imul(ir,Wr)|0,Rt=Rt+Math.imul(ir,en)|0;var An=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(An>>>26)|0,An&=67108863,Tt=Math.imul(pr,Sr),pt=Math.imul(pr,Dr),pt=pt+Math.imul(nr,Sr)|0,Rt=Math.imul(nr,Dr),Tt=Tt+Math.imul(Mr,Ir)|0,pt=pt+Math.imul(Mr,Or)|0,pt=pt+Math.imul(Lr,Ir)|0,Rt=Rt+Math.imul(Lr,Or)|0,Tt=Tt+Math.imul(Cr,Fr)|0,pt=pt+Math.imul(Cr,Kr)|0,pt=pt+Math.imul(Nr,Fr)|0,Rt=Rt+Math.imul(Nr,Kr)|0,Tt=Tt+Math.imul($r,Br)|0,pt=pt+Math.imul($r,Zr)|0,pt=pt+Math.imul(Tr,Br)|0,Rt=Rt+Math.imul(Tr,Zr)|0,Tt=Tt+Math.imul(xr,zr)|0,pt=pt+Math.imul(xr,Xr)|0,pt=pt+Math.imul(yr,zr)|0,Rt=Rt+Math.imul(yr,Xr)|0,Tt=Tt+Math.imul(_r,Vr)|0,pt=pt+Math.imul(_r,Yr)|0,pt=pt+Math.imul(Er,Vr)|0,Rt=Rt+Math.imul(Er,Yr)|0,Tt=Tt+Math.imul(or,Ur)|0,pt=pt+Math.imul(or,Qr)|0,pt=pt+Math.imul(br,Ur)|0,Rt=Rt+Math.imul(br,Qr)|0,Tt=Tt+Math.imul(dr,Gr)|0,pt=pt+Math.imul(dr,Jr)|0,pt=pt+Math.imul(gr,Gr)|0,Rt=Rt+Math.imul(gr,Jr)|0,Tt=Tt+Math.imul(cr,Wr)|0,pt=pt+Math.imul(cr,en)|0,pt=pt+Math.imul(rr,Wr)|0,Rt=Rt+Math.imul(rr,en)|0;var Rn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,Tt=Math.imul(pr,Ir),pt=Math.imul(pr,Or),pt=pt+Math.imul(nr,Ir)|0,Rt=Math.imul(nr,Or),Tt=Tt+Math.imul(Mr,Fr)|0,pt=pt+Math.imul(Mr,Kr)|0,pt=pt+Math.imul(Lr,Fr)|0,Rt=Rt+Math.imul(Lr,Kr)|0,Tt=Tt+Math.imul(Cr,Br)|0,pt=pt+Math.imul(Cr,Zr)|0,pt=pt+Math.imul(Nr,Br)|0,Rt=Rt+Math.imul(Nr,Zr)|0,Tt=Tt+Math.imul($r,zr)|0,pt=pt+Math.imul($r,Xr)|0,pt=pt+Math.imul(Tr,zr)|0,Rt=Rt+Math.imul(Tr,Xr)|0,Tt=Tt+Math.imul(xr,Vr)|0,pt=pt+Math.imul(xr,Yr)|0,pt=pt+Math.imul(yr,Vr)|0,Rt=Rt+Math.imul(yr,Yr)|0,Tt=Tt+Math.imul(_r,Ur)|0,pt=pt+Math.imul(_r,Qr)|0,pt=pt+Math.imul(Er,Ur)|0,Rt=Rt+Math.imul(Er,Qr)|0,Tt=Tt+Math.imul(or,Gr)|0,pt=pt+Math.imul(or,Jr)|0,pt=pt+Math.imul(br,Gr)|0,Rt=Rt+Math.imul(br,Jr)|0,Tt=Tt+Math.imul(dr,Wr)|0,pt=pt+Math.imul(dr,en)|0,pt=pt+Math.imul(gr,Wr)|0,Rt=Rt+Math.imul(gr,en)|0;var Nn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,Tt=Math.imul(pr,Fr),pt=Math.imul(pr,Kr),pt=pt+Math.imul(nr,Fr)|0,Rt=Math.imul(nr,Kr),Tt=Tt+Math.imul(Mr,Br)|0,pt=pt+Math.imul(Mr,Zr)|0,pt=pt+Math.imul(Lr,Br)|0,Rt=Rt+Math.imul(Lr,Zr)|0,Tt=Tt+Math.imul(Cr,zr)|0,pt=pt+Math.imul(Cr,Xr)|0,pt=pt+Math.imul(Nr,zr)|0,Rt=Rt+Math.imul(Nr,Xr)|0,Tt=Tt+Math.imul($r,Vr)|0,pt=pt+Math.imul($r,Yr)|0,pt=pt+Math.imul(Tr,Vr)|0,Rt=Rt+Math.imul(Tr,Yr)|0,Tt=Tt+Math.imul(xr,Ur)|0,pt=pt+Math.imul(xr,Qr)|0,pt=pt+Math.imul(yr,Ur)|0,Rt=Rt+Math.imul(yr,Qr)|0,Tt=Tt+Math.imul(_r,Gr)|0,pt=pt+Math.imul(_r,Jr)|0,pt=pt+Math.imul(Er,Gr)|0,Rt=Rt+Math.imul(Er,Jr)|0,Tt=Tt+Math.imul(or,Wr)|0,pt=pt+Math.imul(or,en)|0,pt=pt+Math.imul(br,Wr)|0,Rt=Rt+Math.imul(br,en)|0;var In=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(In>>>26)|0,In&=67108863,Tt=Math.imul(pr,Br),pt=Math.imul(pr,Zr),pt=pt+Math.imul(nr,Br)|0,Rt=Math.imul(nr,Zr),Tt=Tt+Math.imul(Mr,zr)|0,pt=pt+Math.imul(Mr,Xr)|0,pt=pt+Math.imul(Lr,zr)|0,Rt=Rt+Math.imul(Lr,Xr)|0,Tt=Tt+Math.imul(Cr,Vr)|0,pt=pt+Math.imul(Cr,Yr)|0,pt=pt+Math.imul(Nr,Vr)|0,Rt=Rt+Math.imul(Nr,Yr)|0,Tt=Tt+Math.imul($r,Ur)|0,pt=pt+Math.imul($r,Qr)|0,pt=pt+Math.imul(Tr,Ur)|0,Rt=Rt+Math.imul(Tr,Qr)|0,Tt=Tt+Math.imul(xr,Gr)|0,pt=pt+Math.imul(xr,Jr)|0,pt=pt+Math.imul(yr,Gr)|0,Rt=Rt+Math.imul(yr,Jr)|0,Tt=Tt+Math.imul(_r,Wr)|0,pt=pt+Math.imul(_r,en)|0,pt=pt+Math.imul(Er,Wr)|0,Rt=Rt+Math.imul(Er,en)|0;var Mn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,Tt=Math.imul(pr,zr),pt=Math.imul(pr,Xr),pt=pt+Math.imul(nr,zr)|0,Rt=Math.imul(nr,Xr),Tt=Tt+Math.imul(Mr,Vr)|0,pt=pt+Math.imul(Mr,Yr)|0,pt=pt+Math.imul(Lr,Vr)|0,Rt=Rt+Math.imul(Lr,Yr)|0,Tt=Tt+Math.imul(Cr,Ur)|0,pt=pt+Math.imul(Cr,Qr)|0,pt=pt+Math.imul(Nr,Ur)|0,Rt=Rt+Math.imul(Nr,Qr)|0,Tt=Tt+Math.imul($r,Gr)|0,pt=pt+Math.imul($r,Jr)|0,pt=pt+Math.imul(Tr,Gr)|0,Rt=Rt+Math.imul(Tr,Jr)|0,Tt=Tt+Math.imul(xr,Wr)|0,pt=pt+Math.imul(xr,en)|0,pt=pt+Math.imul(yr,Wr)|0,Rt=Rt+Math.imul(yr,en)|0;var Pn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,Tt=Math.imul(pr,Vr),pt=Math.imul(pr,Yr),pt=pt+Math.imul(nr,Vr)|0,Rt=Math.imul(nr,Yr),Tt=Tt+Math.imul(Mr,Ur)|0,pt=pt+Math.imul(Mr,Qr)|0,pt=pt+Math.imul(Lr,Ur)|0,Rt=Rt+Math.imul(Lr,Qr)|0,Tt=Tt+Math.imul(Cr,Gr)|0,pt=pt+Math.imul(Cr,Jr)|0,pt=pt+Math.imul(Nr,Gr)|0,Rt=Rt+Math.imul(Nr,Jr)|0,Tt=Tt+Math.imul($r,Wr)|0,pt=pt+Math.imul($r,en)|0,pt=pt+Math.imul(Tr,Wr)|0,Rt=Rt+Math.imul(Tr,en)|0;var kn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(kn>>>26)|0,kn&=67108863,Tt=Math.imul(pr,Ur),pt=Math.imul(pr,Qr),pt=pt+Math.imul(nr,Ur)|0,Rt=Math.imul(nr,Qr),Tt=Tt+Math.imul(Mr,Gr)|0,pt=pt+Math.imul(Mr,Jr)|0,pt=pt+Math.imul(Lr,Gr)|0,Rt=Rt+Math.imul(Lr,Jr)|0,Tt=Tt+Math.imul(Cr,Wr)|0,pt=pt+Math.imul(Cr,en)|0,pt=pt+Math.imul(Nr,Wr)|0,Rt=Rt+Math.imul(Nr,en)|0;var On=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(On>>>26)|0,On&=67108863,Tt=Math.imul(pr,Gr),pt=Math.imul(pr,Jr),pt=pt+Math.imul(nr,Gr)|0,Rt=Math.imul(nr,Jr),Tt=Tt+Math.imul(Mr,Wr)|0,pt=pt+Math.imul(Mr,en)|0,pt=pt+Math.imul(Lr,Wr)|0,Rt=Rt+Math.imul(Lr,en)|0;var Dn=(Pt+Tt|0)+((pt&8191)<<13)|0;Pt=(Rt+(pt>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,Tt=Math.imul(pr,Wr),pt=Math.imul(pr,en),pt=pt+Math.imul(nr,Wr)|0,Rt=Math.imul(nr,en);var jn=(Pt+Tt|0)+((pt&8191)<<13)|0;return Pt=(Rt+(pt>>>13)|0)+(jn>>>26)|0,jn&=67108863,Nt[0]=on,Nt[1]=un,Nt[2]=wn,Nt[3]=$n,Nt[4]=Sn,Nt[5]=En,Nt[6]=_n,Nt[7]=Tn,Nt[8]=Cn,Nt[9]=An,Nt[10]=Rn,Nt[11]=Nn,Nt[12]=In,Nt[13]=Mn,Nt[14]=Pn,Nt[15]=kn,Nt[16]=On,Nt[17]=Dn,Nt[18]=jn,Pt!==0&&(Nt[19]=Pt,gt.length++),gt};Math.imul||(xt=vt);function wt(Mt,lt,mt){mt.negative=lt.negative^Mt.negative,mt.length=Mt.length+lt.length;for(var gt=0,bt=0,St=0;St<mt.length-1;St++){var Nt=bt;bt=0;for(var Pt=gt&67108863,Tt=Math.min(St,lt.length-1),pt=Math.max(0,St-Mt.length+1);pt<=Tt;pt++){var Rt=St-pt,zt=Mt.words[Rt]|0,Yt=lt.words[pt]|0,ir=zt*Yt,ur=ir&67108863;Nt=Nt+(ir/67108864|0)|0,ur=ur+Pt|0,Pt=ur&67108863,Nt=Nt+(ur>>>26)|0,bt+=Nt>>>26,Nt&=67108863}mt.words[St]=Pt,gt=Nt,Nt=bt}return gt!==0?mt.words[St]=gt:mt.length--,mt.strip()}function Et(Mt,lt,mt){var gt=new At;return gt.mulp(Mt,lt,mt)}rt.prototype.mulTo=function(lt,mt){var gt,bt=this.length+lt.length;return this.length===10&&lt.length===10?gt=xt(this,lt,mt):bt<63?gt=vt(this,lt,mt):bt<1024?gt=wt(this,lt,mt):gt=Et(this,lt,mt),gt};function At(Mt,lt){this.x=Mt,this.y=lt}At.prototype.makeRBT=function(lt){for(var mt=new Array(lt),gt=rt.prototype._countBits(lt)-1,bt=0;bt<lt;bt++)mt[bt]=this.revBin(bt,gt,lt);return mt},At.prototype.revBin=function(lt,mt,gt){if(lt===0||lt===gt-1)return lt;for(var bt=0,St=0;St<mt;St++)bt|=(lt&1)<<mt-St-1,lt>>=1;return bt},At.prototype.permute=function(lt,mt,gt,bt,St,Nt){for(var Pt=0;Pt<Nt;Pt++)bt[Pt]=mt[lt[Pt]],St[Pt]=gt[lt[Pt]]},At.prototype.transform=function(lt,mt,gt,bt,St,Nt){this.permute(Nt,lt,mt,gt,bt,St);for(var Pt=1;Pt<St;Pt<<=1)for(var Tt=Pt<<1,pt=Math.cos(2*Math.PI/Tt),Rt=Math.sin(2*Math.PI/Tt),zt=0;zt<St;zt+=Tt)for(var Yt=pt,ir=Rt,ur=0;ur<Pt;ur++){var cr=gt[zt+ur],rr=bt[zt+ur],fr=gt[zt+ur+Pt],dr=bt[zt+ur+Pt],gr=Yt*fr-ir*dr;dr=Yt*dr+ir*fr,fr=gr,gt[zt+ur]=cr+fr,bt[zt+ur]=rr+dr,gt[zt+ur+Pt]=cr-fr,bt[zt+ur+Pt]=rr-dr,ur!==Tt&&(gr=pt*Yt-Rt*ir,ir=pt*ir+Rt*Yt,Yt=gr)}},At.prototype.guessLen13b=function(lt,mt){var gt=Math.max(mt,lt)|1,bt=gt&1,St=0;for(gt=gt/2|0;gt;gt=gt>>>1)St++;return 1<<St+1+bt},At.prototype.conjugate=function(lt,mt,gt){if(!(gt<=1))for(var bt=0;bt<gt/2;bt++){var St=lt[bt];lt[bt]=lt[gt-bt-1],lt[gt-bt-1]=St,St=mt[bt],mt[bt]=-mt[gt-bt-1],mt[gt-bt-1]=-St}},At.prototype.normalize13b=function(lt,mt){for(var gt=0,bt=0;bt<mt/2;bt++){var St=Math.round(lt[2*bt+1]/mt)*8192+Math.round(lt[2*bt]/mt)+gt;lt[bt]=St&67108863,St<67108864?gt=0:gt=St/67108864|0}return lt},At.prototype.convert13b=function(lt,mt,gt,bt){for(var St=0,Nt=0;Nt<mt;Nt++)St=St+(lt[Nt]|0),gt[2*Nt]=St&8191,St=St>>>13,gt[2*Nt+1]=St&8191,St=St>>>13;for(Nt=2*mt;Nt<bt;++Nt)gt[Nt]=0;et(St===0),et((St&-8192)===0)},At.prototype.stub=function(lt){for(var mt=new Array(lt),gt=0;gt<lt;gt++)mt[gt]=0;return mt},At.prototype.mulp=function(lt,mt,gt){var bt=2*this.guessLen13b(lt.length,mt.length),St=this.makeRBT(bt),Nt=this.stub(bt),Pt=new Array(bt),Tt=new Array(bt),pt=new Array(bt),Rt=new Array(bt),zt=new Array(bt),Yt=new Array(bt),ir=gt.words;ir.length=bt,this.convert13b(lt.words,lt.length,Pt,bt),this.convert13b(mt.words,mt.length,Rt,bt),this.transform(Pt,Nt,Tt,pt,bt,St),this.transform(Rt,Nt,zt,Yt,bt,St);for(var ur=0;ur<bt;ur++){var cr=Tt[ur]*zt[ur]-pt[ur]*Yt[ur];pt[ur]=Tt[ur]*Yt[ur]+pt[ur]*zt[ur],Tt[ur]=cr}return this.conjugate(Tt,pt,bt),this.transform(Tt,pt,ir,Nt,bt,St),this.conjugate(ir,Nt,bt),this.normalize13b(ir,bt),gt.negative=lt.negative^mt.negative,gt.length=lt.length+mt.length,gt.strip()},rt.prototype.mul=function(lt){var mt=new rt(null);return mt.words=new Array(this.length+lt.length),this.mulTo(lt,mt)},rt.prototype.mulf=function(lt){var mt=new rt(null);return mt.words=new Array(this.length+lt.length),Et(this,lt,mt)},rt.prototype.imul=function(lt){return this.clone().mulTo(lt,this)},rt.prototype.imuln=function(lt){et(typeof lt=="number"),et(lt<67108864);for(var mt=0,gt=0;gt<this.length;gt++){var bt=(this.words[gt]|0)*lt,St=(bt&67108863)+(mt&67108863);mt>>=26,mt+=bt/67108864|0,mt+=St>>>26,this.words[gt]=St&67108863}return mt!==0&&(this.words[gt]=mt,this.length++),this},rt.prototype.muln=function(lt){return this.clone().imuln(lt)},rt.prototype.sqr=function(){return this.mul(this)},rt.prototype.isqr=function(){return this.imul(this.clone())},rt.prototype.pow=function(lt){var mt=yt(lt);if(mt.length===0)return new rt(1);for(var gt=this,bt=0;bt<mt.length&&mt[bt]===0;bt++,gt=gt.sqr());if(++bt<mt.length)for(var St=gt.sqr();bt<mt.length;bt++,St=St.sqr())mt[bt]!==0&&(gt=gt.mul(St));return gt},rt.prototype.iushln=function(lt){et(typeof lt=="number"&&lt>=0);var mt=lt%26,gt=(lt-mt)/26,bt=67108863>>>26-mt<<26-mt,St;if(mt!==0){var Nt=0;for(St=0;St<this.length;St++){var Pt=this.words[St]&bt,Tt=(this.words[St]|0)-Pt<<mt;this.words[St]=Tt|Nt,Nt=Pt>>>26-mt}Nt&&(this.words[St]=Nt,this.length++)}if(gt!==0){for(St=this.length-1;St>=0;St--)this.words[St+gt]=this.words[St];for(St=0;St<gt;St++)this.words[St]=0;this.length+=gt}return this.strip()},rt.prototype.ishln=function(lt){return et(this.negative===0),this.iushln(lt)},rt.prototype.iushrn=function(lt,mt,gt){et(typeof lt=="number"&&lt>=0);var bt;mt?bt=(mt-mt%26)/26:bt=0;var St=lt%26,Nt=Math.min((lt-St)/26,this.length),Pt=67108863^67108863>>>St<<St,Tt=gt;if(bt-=Nt,bt=Math.max(0,bt),Tt){for(var pt=0;pt<Nt;pt++)Tt.words[pt]=this.words[pt];Tt.length=Nt}if(Nt!==0)if(this.length>Nt)for(this.length-=Nt,pt=0;pt<this.length;pt++)this.words[pt]=this.words[pt+Nt];else this.words[0]=0,this.length=1;var Rt=0;for(pt=this.length-1;pt>=0&&(Rt!==0||pt>=bt);pt--){var zt=this.words[pt]|0;this.words[pt]=Rt<<26-St|zt>>>St,Rt=zt&Pt}return Tt&&Rt!==0&&(Tt.words[Tt.length++]=Rt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},rt.prototype.ishrn=function(lt,mt,gt){return et(this.negative===0),this.iushrn(lt,mt,gt)},rt.prototype.shln=function(lt){return this.clone().ishln(lt)},rt.prototype.ushln=function(lt){return this.clone().iushln(lt)},rt.prototype.shrn=function(lt){return this.clone().ishrn(lt)},rt.prototype.ushrn=function(lt){return this.clone().iushrn(lt)},rt.prototype.testn=function(lt){et(typeof lt=="number"&&lt>=0);var mt=lt%26,gt=(lt-mt)/26,bt=1<<mt;if(this.length<=gt)return!1;var St=this.words[gt];return!!(St&bt)},rt.prototype.imaskn=function(lt){et(typeof lt=="number"&&lt>=0);var mt=lt%26,gt=(lt-mt)/26;if(et(this.negative===0,"imaskn works only with positive numbers"),this.length<=gt)return this;if(mt!==0&&gt++,this.length=Math.min(gt,this.length),mt!==0){var bt=67108863^67108863>>>mt<<mt;this.words[this.length-1]&=bt}return this.strip()},rt.prototype.maskn=function(lt){return this.clone().imaskn(lt)},rt.prototype.iaddn=function(lt){return et(typeof lt=="number"),et(lt<67108864),lt<0?this.isubn(-lt):this.negative!==0?this.length===1&&(this.words[0]|0)<lt?(this.words[0]=lt-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(lt),this.negative=1,this):this._iaddn(lt)},rt.prototype._iaddn=function(lt){this.words[0]+=lt;for(var mt=0;mt<this.length&&this.words[mt]>=67108864;mt++)this.words[mt]-=67108864,mt===this.length-1?this.words[mt+1]=1:this.words[mt+1]++;return this.length=Math.max(this.length,mt+1),this},rt.prototype.isubn=function(lt){if(et(typeof lt=="number"),et(lt<67108864),lt<0)return this.iaddn(-lt);if(this.negative!==0)return this.negative=0,this.iaddn(lt),this.negative=1,this;if(this.words[0]-=lt,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var mt=0;mt<this.length&&this.words[mt]<0;mt++)this.words[mt]+=67108864,this.words[mt+1]-=1;return this.strip()},rt.prototype.addn=function(lt){return this.clone().iaddn(lt)},rt.prototype.subn=function(lt){return this.clone().isubn(lt)},rt.prototype.iabs=function(){return this.negative=0,this},rt.prototype.abs=function(){return this.clone().iabs()},rt.prototype._ishlnsubmul=function(lt,mt,gt){var bt=lt.length+gt,St;this._expand(bt);var Nt,Pt=0;for(St=0;St<lt.length;St++){Nt=(this.words[St+gt]|0)+Pt;var Tt=(lt.words[St]|0)*mt;Nt-=Tt&67108863,Pt=(Nt>>26)-(Tt/67108864|0),this.words[St+gt]=Nt&67108863}for(;St<this.length-gt;St++)Nt=(this.words[St+gt]|0)+Pt,Pt=Nt>>26,this.words[St+gt]=Nt&67108863;if(Pt===0)return this.strip();for(et(Pt===-1),Pt=0,St=0;St<this.length;St++)Nt=-(this.words[St]|0)+Pt,Pt=Nt>>26,this.words[St]=Nt&67108863;return this.negative=1,this.strip()},rt.prototype._wordDiv=function(lt,mt){var gt=this.length-lt.length,bt=this.clone(),St=lt,Nt=St.words[St.length-1]|0,Pt=this._countBits(Nt);gt=26-Pt,gt!==0&&(St=St.ushln(gt),bt.iushln(gt),Nt=St.words[St.length-1]|0);var Tt=bt.length-St.length,pt;if(mt!=="mod"){pt=new rt(null),pt.length=Tt+1,pt.words=new Array(pt.length);for(var Rt=0;Rt<pt.length;Rt++)pt.words[Rt]=0}var zt=bt.clone()._ishlnsubmul(St,1,Tt);zt.negative===0&&(bt=zt,pt&&(pt.words[Tt]=1));for(var Yt=Tt-1;Yt>=0;Yt--){var ir=(bt.words[St.length+Yt]|0)*67108864+(bt.words[St.length+Yt-1]|0);for(ir=Math.min(ir/Nt|0,67108863),bt._ishlnsubmul(St,ir,Yt);bt.negative!==0;)ir--,bt.negative=0,bt._ishlnsubmul(St,1,Yt),bt.isZero()||(bt.negative^=1);pt&&(pt.words[Yt]=ir)}return pt&&pt.strip(),bt.strip(),mt!=="div"&&gt!==0&&bt.iushrn(gt),{div:pt||null,mod:bt}},rt.prototype.divmod=function(lt,mt,gt){if(et(!lt.isZero()),this.isZero())return{div:new rt(0),mod:new rt(0)};var bt,St,Nt;return this.negative!==0&&lt.negative===0?(Nt=this.neg().divmod(lt,mt),mt!=="mod"&&(bt=Nt.div.neg()),mt!=="div"&&(St=Nt.mod.neg(),gt&&St.negative!==0&&St.iadd(lt)),{div:bt,mod:St}):this.negative===0&&lt.negative!==0?(Nt=this.divmod(lt.neg(),mt),mt!=="mod"&&(bt=Nt.div.neg()),{div:bt,mod:Nt.mod}):this.negative&lt.negative?(Nt=this.neg().divmod(lt.neg(),mt),mt!=="div"&&(St=Nt.mod.neg(),gt&&St.negative!==0&&St.isub(lt)),{div:Nt.div,mod:St}):lt.length>this.length||this.cmp(lt)<0?{div:new rt(0),mod:this}:lt.length===1?mt==="div"?{div:this.divn(lt.words[0]),mod:null}:mt==="mod"?{div:null,mod:new rt(this.modn(lt.words[0]))}:{div:this.divn(lt.words[0]),mod:new rt(this.modn(lt.words[0]))}:this._wordDiv(lt,mt)},rt.prototype.div=function(lt){return this.divmod(lt,"div",!1).div},rt.prototype.mod=function(lt){return this.divmod(lt,"mod",!1).mod},rt.prototype.umod=function(lt){return this.divmod(lt,"mod",!0).mod},rt.prototype.divRound=function(lt){var mt=this.divmod(lt);if(mt.mod.isZero())return mt.div;var gt=mt.div.negative!==0?mt.mod.isub(lt):mt.mod,bt=lt.ushrn(1),St=lt.andln(1),Nt=gt.cmp(bt);return Nt<0||St===1&&Nt===0?mt.div:mt.div.negative!==0?mt.div.isubn(1):mt.div.iaddn(1)},rt.prototype.modn=function(lt){et(lt<=67108863);for(var mt=(1<<26)%lt,gt=0,bt=this.length-1;bt>=0;bt--)gt=(mt*gt+(this.words[bt]|0))%lt;return gt},rt.prototype.idivn=function(lt){et(lt<=67108863);for(var mt=0,gt=this.length-1;gt>=0;gt--){var bt=(this.words[gt]|0)+mt*67108864;this.words[gt]=bt/lt|0,mt=bt%lt}return this.strip()},rt.prototype.divn=function(lt){return this.clone().idivn(lt)},rt.prototype.egcd=function(lt){et(lt.negative===0),et(!lt.isZero());var mt=this,gt=lt.clone();mt.negative!==0?mt=mt.umod(lt):mt=mt.clone();for(var bt=new rt(1),St=new rt(0),Nt=new rt(0),Pt=new rt(1),Tt=0;mt.isEven()&&gt.isEven();)mt.iushrn(1),gt.iushrn(1),++Tt;for(var pt=gt.clone(),Rt=mt.clone();!mt.isZero();){for(var zt=0,Yt=1;!(mt.words[0]&Yt)&&zt<26;++zt,Yt<<=1);if(zt>0)for(mt.iushrn(zt);zt-- >0;)(bt.isOdd()||St.isOdd())&&(bt.iadd(pt),St.isub(Rt)),bt.iushrn(1),St.iushrn(1);for(var ir=0,ur=1;!(gt.words[0]&ur)&&ir<26;++ir,ur<<=1);if(ir>0)for(gt.iushrn(ir);ir-- >0;)(Nt.isOdd()||Pt.isOdd())&&(Nt.iadd(pt),Pt.isub(Rt)),Nt.iushrn(1),Pt.iushrn(1);mt.cmp(gt)>=0?(mt.isub(gt),bt.isub(Nt),St.isub(Pt)):(gt.isub(mt),Nt.isub(bt),Pt.isub(St))}return{a:Nt,b:Pt,gcd:gt.iushln(Tt)}},rt.prototype._invmp=function(lt){et(lt.negative===0),et(!lt.isZero());var mt=this,gt=lt.clone();mt.negative!==0?mt=mt.umod(lt):mt=mt.clone();for(var bt=new rt(1),St=new rt(0),Nt=gt.clone();mt.cmpn(1)>0&&gt.cmpn(1)>0;){for(var Pt=0,Tt=1;!(mt.words[0]&Tt)&&Pt<26;++Pt,Tt<<=1);if(Pt>0)for(mt.iushrn(Pt);Pt-- >0;)bt.isOdd()&&bt.iadd(Nt),bt.iushrn(1);for(var pt=0,Rt=1;!(gt.words[0]&Rt)&&pt<26;++pt,Rt<<=1);if(pt>0)for(gt.iushrn(pt);pt-- >0;)St.isOdd()&&St.iadd(Nt),St.iushrn(1);mt.cmp(gt)>=0?(mt.isub(gt),bt.isub(St)):(gt.isub(mt),St.isub(bt))}var zt;return mt.cmpn(1)===0?zt=bt:zt=St,zt.cmpn(0)<0&&zt.iadd(lt),zt},rt.prototype.gcd=function(lt){if(this.isZero())return lt.abs();if(lt.isZero())return this.abs();var mt=this.clone(),gt=lt.clone();mt.negative=0,gt.negative=0;for(var bt=0;mt.isEven()&&gt.isEven();bt++)mt.iushrn(1),gt.iushrn(1);do{for(;mt.isEven();)mt.iushrn(1);for(;gt.isEven();)gt.iushrn(1);var St=mt.cmp(gt);if(St<0){var Nt=mt;mt=gt,gt=Nt}else if(St===0||gt.cmpn(1)===0)break;mt.isub(gt)}while(!0);return gt.iushln(bt)},rt.prototype.invm=function(lt){return this.egcd(lt).a.umod(lt)},rt.prototype.isEven=function(){return(this.words[0]&1)===0},rt.prototype.isOdd=function(){return(this.words[0]&1)===1},rt.prototype.andln=function(lt){return this.words[0]&lt},rt.prototype.bincn=function(lt){et(typeof lt=="number");var mt=lt%26,gt=(lt-mt)/26,bt=1<<mt;if(this.length<=gt)return this._expand(gt+1),this.words[gt]|=bt,this;for(var St=bt,Nt=gt;St!==0&&Nt<this.length;Nt++){var Pt=this.words[Nt]|0;Pt+=St,St=Pt>>>26,Pt&=67108863,this.words[Nt]=Pt}return St!==0&&(this.words[Nt]=St,this.length++),this},rt.prototype.isZero=function(){return this.length===1&&this.words[0]===0},rt.prototype.cmpn=function(lt){var mt=lt<0;if(this.negative!==0&&!mt)return-1;if(this.negative===0&&mt)return 1;this.strip();var gt;if(this.length>1)gt=1;else{mt&&(lt=-lt),et(lt<=67108863,"Number is too big");var bt=this.words[0]|0;gt=bt===lt?0:bt<lt?-1:1}return this.negative!==0?-gt|0:gt},rt.prototype.cmp=function(lt){if(this.negative!==0&&lt.negative===0)return-1;if(this.negative===0&&lt.negative!==0)return 1;var mt=this.ucmp(lt);return this.negative!==0?-mt|0:mt},rt.prototype.ucmp=function(lt){if(this.length>lt.length)return 1;if(this.length<lt.length)return-1;for(var mt=0,gt=this.length-1;gt>=0;gt--){var bt=this.words[gt]|0,St=lt.words[gt]|0;if(bt!==St){bt<St?mt=-1:bt>St&&(mt=1);break}}return mt},rt.prototype.gtn=function(lt){return this.cmpn(lt)===1},rt.prototype.gt=function(lt){return this.cmp(lt)===1},rt.prototype.gten=function(lt){return this.cmpn(lt)>=0},rt.prototype.gte=function(lt){return this.cmp(lt)>=0},rt.prototype.ltn=function(lt){return this.cmpn(lt)===-1},rt.prototype.lt=function(lt){return this.cmp(lt)===-1},rt.prototype.lten=function(lt){return this.cmpn(lt)<=0},rt.prototype.lte=function(lt){return this.cmp(lt)<=0},rt.prototype.eqn=function(lt){return this.cmpn(lt)===0},rt.prototype.eq=function(lt){return this.cmp(lt)===0},rt.red=function(lt){return new tr(lt)},rt.prototype.toRed=function(lt){return et(!this.red,"Already a number in reduction context"),et(this.negative===0,"red works only with positives"),lt.convertTo(this)._forceRed(lt)},rt.prototype.fromRed=function(){return et(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},rt.prototype._forceRed=function(lt){return this.red=lt,this},rt.prototype.forceRed=function(lt){return et(!this.red,"Already a number in reduction context"),this._forceRed(lt)},rt.prototype.redAdd=function(lt){return et(this.red,"redAdd works only with red numbers"),this.red.add(this,lt)},rt.prototype.redIAdd=function(lt){return et(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,lt)},rt.prototype.redSub=function(lt){return et(this.red,"redSub works only with red numbers"),this.red.sub(this,lt)},rt.prototype.redISub=function(lt){return et(this.red,"redISub works only with red numbers"),this.red.isub(this,lt)},rt.prototype.redShl=function(lt){return et(this.red,"redShl works only with red numbers"),this.red.shl(this,lt)},rt.prototype.redMul=function(lt){return et(this.red,"redMul works only with red numbers"),this.red._verify2(this,lt),this.red.mul(this,lt)},rt.prototype.redIMul=function(lt){return et(this.red,"redMul works only with red numbers"),this.red._verify2(this,lt),this.red.imul(this,lt)},rt.prototype.redSqr=function(){return et(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},rt.prototype.redISqr=function(){return et(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},rt.prototype.redSqrt=function(){return et(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},rt.prototype.redInvm=function(){return et(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},rt.prototype.redNeg=function(){return et(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},rt.prototype.redPow=function(lt){return et(this.red&&!lt.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,lt)};var jt={k256:null,p224:null,p192:null,p25519:null};function kt(Mt,lt){this.name=Mt,this.p=new rt(lt,16),this.n=this.p.bitLength(),this.k=new rt(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}kt.prototype._tmp=function(){var lt=new rt(null);return lt.words=new Array(Math.ceil(this.n/13)),lt},kt.prototype.ireduce=function(lt){var mt=lt,gt;do this.split(mt,this.tmp),mt=this.imulK(mt),mt=mt.iadd(this.tmp),gt=mt.bitLength();while(gt>this.n);var bt=gt<this.n?-1:mt.ucmp(this.p);return bt===0?(mt.words[0]=0,mt.length=1):bt>0?mt.isub(this.p):mt.strip!==void 0?mt.strip():mt._strip(),mt},kt.prototype.split=function(lt,mt){lt.iushrn(this.n,0,mt)},kt.prototype.imulK=function(lt){return lt.imul(this.k)};function Lt(){kt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}tt(Lt,kt),Lt.prototype.split=function(lt,mt){for(var gt=4194303,bt=Math.min(lt.length,9),St=0;St<bt;St++)mt.words[St]=lt.words[St];if(mt.length=bt,lt.length<=9){lt.words[0]=0,lt.length=1;return}var Nt=lt.words[9];for(mt.words[mt.length++]=Nt&gt,St=10;St<lt.length;St++){var Pt=lt.words[St]|0;lt.words[St-10]=(Pt&gt)<<4|Nt>>>22,Nt=Pt}Nt>>>=22,lt.words[St-10]=Nt,Nt===0&&lt.length>10?lt.length-=10:lt.length-=9},Lt.prototype.imulK=function(lt){lt.words[lt.length]=0,lt.words[lt.length+1]=0,lt.length+=2;for(var mt=0,gt=0;gt<lt.length;gt++){var bt=lt.words[gt]|0;mt+=bt*977,lt.words[gt]=mt&67108863,mt=bt*64+(mt/67108864|0)}return lt.words[lt.length-1]===0&&(lt.length--,lt.words[lt.length-1]===0&&lt.length--),lt};function Bt(){kt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}tt(Bt,kt);function Gt(){kt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}tt(Gt,kt);function er(){kt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}tt(er,kt),er.prototype.imulK=function(lt){for(var mt=0,gt=0;gt<lt.length;gt++){var bt=(lt.words[gt]|0)*19+mt,St=bt&67108863;bt>>>=26,lt.words[gt]=St,mt=bt}return mt!==0&&(lt.words[lt.length++]=mt),lt},rt._prime=function(lt){if(jt[lt])return jt[lt];var mt;if(lt==="k256")mt=new Lt;else if(lt==="p224")mt=new Bt;else if(lt==="p192")mt=new Gt;else if(lt==="p25519")mt=new er;else throw new Error("Unknown prime "+lt);return jt[lt]=mt,mt};function tr(Mt){if(typeof Mt=="string"){var lt=rt._prime(Mt);this.m=lt.p,this.prime=lt}else et(Mt.gtn(1),"modulus must be greater than 1"),this.m=Mt,this.prime=null}tr.prototype._verify1=function(lt){et(lt.negative===0,"red works only with positives"),et(lt.red,"red works only with red numbers")},tr.prototype._verify2=function(lt,mt){et((lt.negative|mt.negative)===0,"red works only with positives"),et(lt.red&&lt.red===mt.red,"red works only with red numbers")},tr.prototype.imod=function(lt){return this.prime?this.prime.ireduce(lt)._forceRed(this):lt.umod(this.m)._forceRed(this)},tr.prototype.neg=function(lt){return lt.isZero()?lt.clone():this.m.sub(lt)._forceRed(this)},tr.prototype.add=function(lt,mt){this._verify2(lt,mt);var gt=lt.add(mt);return gt.cmp(this.m)>=0&&gt.isub(this.m),gt._forceRed(this)},tr.prototype.iadd=function(lt,mt){this._verify2(lt,mt);var gt=lt.iadd(mt);return gt.cmp(this.m)>=0&&gt.isub(this.m),gt},tr.prototype.sub=function(lt,mt){this._verify2(lt,mt);var gt=lt.sub(mt);return gt.cmpn(0)<0&&gt.iadd(this.m),gt._forceRed(this)},tr.prototype.isub=function(lt,mt){this._verify2(lt,mt);var gt=lt.isub(mt);return gt.cmpn(0)<0&&gt.iadd(this.m),gt},tr.prototype.shl=function(lt,mt){return this._verify1(lt),this.imod(lt.ushln(mt))},tr.prototype.imul=function(lt,mt){return this._verify2(lt,mt),this.imod(lt.imul(mt))},tr.prototype.mul=function(lt,mt){return this._verify2(lt,mt),this.imod(lt.mul(mt))},tr.prototype.isqr=function(lt){return this.imul(lt,lt.clone())},tr.prototype.sqr=function(lt){return this.mul(lt,lt)},tr.prototype.sqrt=function(lt){if(lt.isZero())return lt.clone();var mt=this.m.andln(3);if(et(mt%2===1),mt===3){var gt=this.m.add(new rt(1)).iushrn(2);return this.pow(lt,gt)}for(var bt=this.m.subn(1),St=0;!bt.isZero()&&bt.andln(1)===0;)St++,bt.iushrn(1);et(!bt.isZero());var Nt=new rt(1).toRed(this),Pt=Nt.redNeg(),Tt=this.m.subn(1).iushrn(1),pt=this.m.bitLength();for(pt=new rt(2*pt*pt).toRed(this);this.pow(pt,Tt).cmp(Pt)!==0;)pt.redIAdd(Pt);for(var Rt=this.pow(pt,bt),zt=this.pow(lt,bt.addn(1).iushrn(1)),Yt=this.pow(lt,bt),ir=St;Yt.cmp(Nt)!==0;){for(var ur=Yt,cr=0;ur.cmp(Nt)!==0;cr++)ur=ur.redSqr();et(cr<ir);var rr=this.pow(Rt,new rt(1).iushln(ir-cr-1));zt=zt.redMul(rr),Rt=rr.redSqr(),Yt=Yt.redMul(Rt),ir=cr}return zt},tr.prototype.invm=function(lt){var mt=lt._invmp(this.m);return mt.negative!==0?(mt.negative=0,this.imod(mt).redNeg()):this.imod(mt)},tr.prototype.pow=function(lt,mt){if(mt.isZero())return new rt(1).toRed(this);if(mt.cmpn(1)===0)return lt.clone();var gt=4,bt=new Array(1<<gt);bt[0]=new rt(1).toRed(this),bt[1]=lt;for(var St=2;St<bt.length;St++)bt[St]=this.mul(bt[St-1],lt);var Nt=bt[0],Pt=0,Tt=0,pt=mt.bitLength()%26;for(pt===0&&(pt=26),St=mt.length-1;St>=0;St--){for(var Rt=mt.words[St],zt=pt-1;zt>=0;zt--){var Yt=Rt>>zt&1;if(Nt!==bt[0]&&(Nt=this.sqr(Nt)),Yt===0&&Pt===0){Tt=0;continue}Pt<<=1,Pt|=Yt,Tt++,!(Tt!==gt&&(St!==0||zt!==0))&&(Nt=this.mul(Nt,bt[Pt]),Tt=0,Pt=0)}pt=26}return Nt},tr.prototype.convertTo=function(lt){var mt=lt.umod(this.m);return mt===lt?mt.clone():mt},tr.prototype.convertFrom=function(lt){var mt=lt.clone();return mt.red=null,mt},rt.mont=function(lt){return new ar(lt)};function ar(Mt){tr.call(this,Mt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new rt(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}tt(ar,tr),ar.prototype.convertTo=function(lt){return this.imod(lt.ushln(this.shift))},ar.prototype.convertFrom=function(lt){var mt=this.imod(lt.mul(this.rinv));return mt.red=null,mt},ar.prototype.imul=function(lt,mt){if(lt.isZero()||mt.isZero())return lt.words[0]=0,lt.length=1,lt;var gt=lt.imul(mt),bt=gt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),St=gt.isub(bt).iushrn(this.shift),Nt=St;return St.cmp(this.m)>=0?Nt=St.isub(this.m):St.cmpn(0)<0&&(Nt=St.iadd(this.m)),Nt._forceRed(this)},ar.prototype.mul=function(lt,mt){if(lt.isZero()||mt.isZero())return new rt(0)._forceRed(this);var gt=lt.mul(mt),bt=gt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),St=gt.isub(bt).iushrn(this.shift),Nt=St;return St.cmp(this.m)>=0?Nt=St.isub(this.m):St.cmpn(0)<0&&(Nt=St.iadd(this.m)),Nt._forceRed(this)},ar.prototype.invm=function(lt){var mt=this.imod(lt._invmp(this.m).mul(this.r2));return mt._forceRed(this)}})(_,commonjsGlobal)}(bn)),bn.exports}var withPublic_1,hasRequiredWithPublic;function requireWithPublic(){if(hasRequiredWithPublic)return withPublic_1;hasRequiredWithPublic=1;var _=requireBn(),$=requireSafeBuffer$1().Buffer;function _e(et,tt){return $.from(et.toRed(_.mont(tt.modulus)).redPow(new _(tt.publicExponent)).fromRed().toArray())}return withPublic_1=_e,withPublic_1}var publicEncrypt,hasRequiredPublicEncrypt;function requirePublicEncrypt(){if(hasRequiredPublicEncrypt)return publicEncrypt;hasRequiredPublicEncrypt=1;var _=requireParseAsn1(),$=requireBrowser$b(),_e=requireBrowser$9(),et=requireMgf(),tt=requireXor(),rt=requireBn(),nt=requireWithPublic(),it=requireBrowserifyRsa(),st=requireSafeBuffer$1().Buffer;publicEncrypt=function(yt,vt,xt){var wt;yt.padding?wt=yt.padding:xt?wt=1:wt=4;var Et=_(yt),At;if(wt===4)At=at(Et,vt);else if(wt===1)At=ot(Et,vt,xt);else if(wt===3){if(At=new rt(vt),At.cmp(Et.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return xt?it(At,Et):nt(At,Et)};function at(ht,yt){var vt=ht.modulus.byteLength(),xt=yt.length,wt=_e("sha1").update(st.alloc(0)).digest(),Et=wt.length,At=2*Et;if(xt>vt-At-2)throw new Error("message too long");var jt=st.alloc(vt-xt-At-2),kt=vt-Et-1,Lt=$(Et),Bt=tt(st.concat([wt,jt,st.alloc(1,1),yt],kt),et(Lt,kt)),Gt=tt(Lt,et(Bt,Et));return new rt(st.concat([st.alloc(1),Gt,Bt],vt))}function ot(ht,yt,vt){var xt=yt.length,wt=ht.modulus.byteLength();if(xt>wt-11)throw new Error("message too long");var Et;return vt?Et=st.alloc(wt-xt-3,255):Et=dt(wt-xt-3),new rt(st.concat([st.from([0,vt?1:2]),Et,st.alloc(1),yt],wt))}function dt(ht){for(var yt=st.allocUnsafe(ht),vt=0,xt=$(ht*2),wt=0,Et;vt<ht;)wt===xt.length&&(xt=$(ht*2),wt=0),Et=xt[wt++],Et&&(yt[vt++]=Et);return yt}return publicEncrypt}var privateDecrypt,hasRequiredPrivateDecrypt;function requirePrivateDecrypt(){if(hasRequiredPrivateDecrypt)return privateDecrypt;hasRequiredPrivateDecrypt=1;var _=requireParseAsn1(),$=requireMgf(),_e=requireXor(),et=requireBn(),tt=requireBrowserifyRsa(),rt=requireBrowser$9(),nt=requireWithPublic(),it=requireSafeBuffer$1().Buffer;privateDecrypt=function(ht,yt,vt){var xt;ht.padding?xt=ht.padding:vt?xt=1:xt=4;var wt=_(ht),Et=wt.modulus.byteLength();if(yt.length>Et||new et(yt).cmp(wt.modulus)>=0)throw new Error("decryption error");var At;vt?At=nt(new et(yt),wt):At=tt(yt,wt);var jt=it.alloc(Et-At.length);if(At=it.concat([jt,At],Et),xt===4)return st(wt,At);if(xt===1)return at(wt,At,vt);if(xt===3)return At;throw new Error("unknown padding")};function st(dt,ht){var yt=dt.modulus.byteLength(),vt=rt("sha1").update(it.alloc(0)).digest(),xt=vt.length;if(ht[0]!==0)throw new Error("decryption error");var wt=ht.slice(1,xt+1),Et=ht.slice(xt+1),At=_e(wt,$(Et,xt)),jt=_e(Et,$(At,yt-xt-1));if(ot(vt,jt.slice(0,xt)))throw new Error("decryption error");for(var kt=xt;jt[kt]===0;)kt++;if(jt[kt++]!==1)throw new Error("decryption error");return jt.slice(kt)}function at(dt,ht,yt){for(var vt=ht.slice(0,2),xt=2,wt=0;ht[xt++]!==0;)if(xt>=ht.length){wt++;break}var Et=ht.slice(2,xt-1);if((vt.toString("hex")!=="0002"&&!yt||vt.toString("hex")!=="0001"&&yt)&&wt++,Et.length<8&&wt++,wt)throw new Error("decryption error");return ht.slice(xt)}function ot(dt,ht){dt=it.from(dt),ht=it.from(ht);var yt=0,vt=dt.length;dt.length!==ht.length&&(yt++,vt=Math.min(dt.length,ht.length));for(var xt=-1;++xt<vt;)yt+=dt[xt]^ht[xt];return yt}return privateDecrypt}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,function(_){_.publicEncrypt=requirePublicEncrypt(),_.privateDecrypt=requirePrivateDecrypt(),_.privateEncrypt=function(_e,et){return _.publicEncrypt(_e,et,!0)},_.publicDecrypt=function(_e,et){return _.privateDecrypt(_e,et,!0)}}(browser$2)),browser$2}var browser$1={},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$1;hasRequiredBrowser=1;function _(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var $=requireSafeBuffer$1(),_e=requireBrowser$b(),et=$.Buffer,tt=$.kMaxLength,rt=commonjsGlobal.crypto||commonjsGlobal.msCrypto,nt=Math.pow(2,32)-1;function it(ht,yt){if(typeof ht!="number"||ht!==ht)throw new TypeError("offset must be a number");if(ht>nt||ht<0)throw new TypeError("offset must be a uint32");if(ht>tt||ht>yt)throw new RangeError("offset out of range")}function st(ht,yt,vt){if(typeof ht!="number"||ht!==ht)throw new TypeError("size must be a number");if(ht>nt||ht<0)throw new TypeError("size must be a uint32");if(ht+yt>vt||ht>tt)throw new RangeError("buffer too small")}rt&&rt.getRandomValues||!process$1.browser?(browser$1.randomFill=at,browser$1.randomFillSync=dt):(browser$1.randomFill=_,browser$1.randomFillSync=_);function at(ht,yt,vt,xt){if(!et.isBuffer(ht)&&!(ht instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof yt=="function")xt=yt,yt=0,vt=ht.length;else if(typeof vt=="function")xt=vt,vt=ht.length-yt;else if(typeof xt!="function")throw new TypeError('"cb" argument must be a function');return it(yt,ht.length),st(vt,yt,ht.length),ot(ht,yt,vt,xt)}function ot(ht,yt,vt,xt){if(process$1.browser){var wt=ht.buffer,Et=new Uint8Array(wt,yt,vt);if(rt.getRandomValues(Et),xt){process$1.nextTick(function(){xt(null,ht)});return}return ht}if(xt){_e(vt,function(jt,kt){if(jt)return xt(jt);kt.copy(ht,yt),xt(null,ht)});return}var At=_e(vt);return At.copy(ht,yt),ht}function dt(ht,yt,vt){if(typeof yt>"u"&&(yt=0),!et.isBuffer(ht)&&!(ht instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return it(yt,ht.length),vt===void 0&&(vt=ht.length-yt),st(vt,yt,ht.length),ot(ht,yt,vt)}return browser$1}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=requireBrowser$b(),cryptoBrowserify.createHash=cryptoBrowserify.Hash=requireBrowser$9(),cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=requireBrowser$8();var _=requireAlgos(),$=Object.keys(_),_e=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat($);cryptoBrowserify.getHashes=function(){return _e};var et=requireBrowser$7();cryptoBrowserify.pbkdf2=et.pbkdf2,cryptoBrowserify.pbkdf2Sync=et.pbkdf2Sync;var tt=requireBrowser$5();cryptoBrowserify.Cipher=tt.Cipher,cryptoBrowserify.createCipher=tt.createCipher,cryptoBrowserify.Cipheriv=tt.Cipheriv,cryptoBrowserify.createCipheriv=tt.createCipheriv,cryptoBrowserify.Decipher=tt.Decipher,cryptoBrowserify.createDecipher=tt.createDecipher,cryptoBrowserify.Decipheriv=tt.Decipheriv,cryptoBrowserify.createDecipheriv=tt.createDecipheriv,cryptoBrowserify.getCiphers=tt.getCiphers,cryptoBrowserify.listCiphers=tt.listCiphers;var rt=requireBrowser$4();cryptoBrowserify.DiffieHellmanGroup=rt.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=rt.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=rt.getDiffieHellman,cryptoBrowserify.createDiffieHellman=rt.createDiffieHellman,cryptoBrowserify.DiffieHellman=rt.DiffieHellman;var nt=requireBrowser$3();cryptoBrowserify.createSign=nt.createSign,cryptoBrowserify.Sign=nt.Sign,cryptoBrowserify.createVerify=nt.createVerify,cryptoBrowserify.Verify=nt.Verify,cryptoBrowserify.createECDH=requireBrowser$2();var it=requireBrowser$1();cryptoBrowserify.publicEncrypt=it.publicEncrypt,cryptoBrowserify.privateEncrypt=it.privateEncrypt,cryptoBrowserify.publicDecrypt=it.publicDecrypt,cryptoBrowserify.privateDecrypt=it.privateDecrypt;var st=requireBrowser();return cryptoBrowserify.randomFill=st.randomFill,cryptoBrowserify.randomFillSync=st.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(`sorry, createCredentials is not implemented yet
we accept pull requests
https://github.com/browserify/crypto-browserify`)},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}(function(_){(function($,_e,et){var tt=256,rt=6,nt=52,it="random",st=et.pow(tt,rt),at=et.pow(2,nt),ot=at*2,dt=tt-1,ht;function yt(kt,Lt,Bt){var Gt=[];Lt=Lt==!0?{entropy:!0}:Lt||{};var er=Et(wt(Lt.entropy?[kt,jt(_e)]:kt??At(),3),Gt),tr=new vt(Gt),ar=function(){for(var Mt=tr.g(rt),lt=st,mt=0;Mt<at;)Mt=(Mt+mt)*tt,lt*=tt,mt=tr.g(1);for(;Mt>=ot;)Mt/=2,lt/=2,mt>>>=1;return(Mt+mt)/lt};return ar.int32=function(){return tr.g(4)|0},ar.quick=function(){return tr.g(4)/4294967296},ar.double=ar,Et(jt(tr.S),_e),(Lt.pass||Bt||function(Mt,lt,mt,gt){return gt&&(gt.S&&xt(gt,tr),Mt.state=function(){return xt(tr,{})}),mt?(et[it]=Mt,lt):Mt})(ar,er,"global"in Lt?Lt.global:this==et,Lt.state)}function vt(kt){var Lt,Bt=kt.length,Gt=this,er=0,tr=Gt.i=Gt.j=0,ar=Gt.S=[];for(Bt||(kt=[Bt++]);er<tt;)ar[er]=er++;for(er=0;er<tt;er++)ar[er]=ar[tr=dt&tr+kt[er%Bt]+(Lt=ar[er])],ar[tr]=Lt;(Gt.g=function(Mt){for(var lt,mt=0,gt=Gt.i,bt=Gt.j,St=Gt.S;Mt--;)lt=St[gt=dt&gt+1],mt=mt*tt+St[dt&(St[gt]=St[bt=dt&bt+lt])+(St[bt]=lt)];return Gt.i=gt,Gt.j=bt,mt})(tt)}function xt(kt,Lt){return Lt.i=kt.i,Lt.j=kt.j,Lt.S=kt.S.slice(),Lt}function wt(kt,Lt){var Bt=[],Gt=typeof kt,er;if(Lt&&Gt=="object")for(er in kt)try{Bt.push(wt(kt[er],Lt-1))}catch{}return Bt.length?Bt:Gt=="string"?kt:kt+"\0"}function Et(kt,Lt){for(var Bt=kt+"",Gt,er=0;er<Bt.length;)Lt[dt&er]=dt&(Gt^=Lt[dt&er]*19)+Bt.charCodeAt(er++);return jt(Lt)}function At(){try{var kt;return ht&&(kt=ht.randomBytes)?kt=kt(tt):(kt=new Uint8Array(tt),($.crypto||$.msCrypto).getRandomValues(kt)),jt(kt)}catch{var Lt=$.navigator,Bt=Lt&&Lt.plugins;return[+new Date,$,Bt,$.screen,jt(_e)]}}function jt(kt){return String.fromCharCode.apply(0,kt)}if(Et(et.random(),_e),_.exports){_.exports=yt;try{ht=requireCryptoBrowserify()}catch{}}else et["seed"+it]=yt})(typeof self<"u"?self:commonjsGlobal,[],Math)})(seedrandom$1);var seedrandomExports=seedrandom$1.exports,alea=aleaExports,xor128=xor128Exports,xorwow=xorwowExports,xorshift7=xorshift7Exports,xor4096=xor4096Exports,tychei=tycheiExports,sr=seedrandomExports;sr.alea=alea;sr.xor128=xor128;sr.xorwow=xorwow;sr.xorshift7=xorshift7;sr.xor4096=xor4096;sr.tychei=tychei;var seedrandom=sr;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TEST_EPSILON_FLOAT32=.001,TEST_EPSILON_FLOAT16=.1;function expectArraysClose(_,$,_e){return _e==null&&(_e=testEpsilon()),expectArraysPredicate(_,$,(et,tt)=>areClose(et,tt,_e))}function testEpsilon(){return ENGINE.backend.floatPrecision()===32?TEST_EPSILON_FLOAT32:TEST_EPSILON_FLOAT16}function expectArraysPredicate(_,$,_e){let et=!0;if((isTypedArray$5(_)||isTypedArray$5($))&&(et=!1),isTypedArray$5(_)&&isTypedArray$5($)&&(et=!0),et){const nt=_.constructor.name,it=$.constructor.name;if(nt!==it)throw new Error(`Arrays are of different type. Actual: ${nt}. Expected: ${it}`)}if(Array.isArray(_)&&Array.isArray($)){const nt=inferShape(_),it=inferShape($);if(!arraysEqual(nt,it))throw new Error(`Arrays have different shapes. Actual: [${nt}]. Expected: [${it}]`)}const tt=isTypedArray$5(_)?_:flatten$2(_),rt=isTypedArray$5($)?$:flatten$2($);if(tt.length!==rt.length)throw new Error(`Arrays have different lengths actual: ${tt.length} vs expected: ${rt.length}.
Actual:   ${tt}.
Expected: ${rt}.`);for(let nt=0;nt<rt.length;++nt){const it=tt[nt],st=rt[nt];if(!_e(it,st))throw new Error(`Arrays differ: actual[${nt}] = ${it}, expected[${nt}] = ${st}.
Actual:   ${tt}.
Expected: ${rt}.`)}typeof expect<"u"&&expect().nothing()}function expectPromiseToFail(_,$){_().then(()=>$.fail(),()=>$()),typeof expect<"u"&&expect().nothing()}function expectArraysEqual(_,$){const _e=typeof $=="string"||typeof $=="number"||typeof $=="boolean"?[$]:$;return isString$2(_)||isString$2(_[0])||isString$2($)||isString$2($[0])?expectArraysPredicate(_,_e,(et,tt)=>et==tt):expectArraysPredicate(_,$,(et,tt)=>areClose(et,tt,0))}function expectNumbersClose(_,$,_e){if(_e==null&&(_e=testEpsilon()),!areClose(_,$,_e))throw new Error(`Numbers differ: actual === ${_}, expected === ${$}`);typeof expect<"u"&&expect().nothing()}function areClose(_,$,_e){return!isFinite(_)&&!isFinite($)?!0:!(isNaN(_)||isNaN($)||Math.abs(_-$)>_e)}function expectValuesInRange(_,$,_e){for(let et=0;et<_.length;et++)if(_[et]<$||_[et]>_e)throw new Error(`Value out of range:${_[et]} low: ${$}, high: ${_e}`)}function expectArrayBuffersEqual(_,$){const _e=new Float32Array(_),et=new Float32Array($);if(_e.length!==et.length)throw new Error(`Expected ArrayBuffer to be of length ${et.length}, but it was ${_e.length}`);for(let tt=0;tt<et.length;tt++)if(_e[tt]!==et[tt])throw new Error(`Expected ArrayBuffer value at ${tt} to be ${et[tt]} but got ${_e[tt]} instead`)}function encodeStrings(_){for(let $=0;$<_.length;$++){const _e=_[$];Array.isArray(_e)?encodeStrings(_e):_[$]=encodeString(_e)}return _}function createVideoElement(_){const $=document.createElement("video");return"playsInline"in $&&($.playsInline=!0),$.muted=!0,$.loop=!0,$.style.position="fixed",$.style.left="0px",$.style.top="0px",$.preload="auto",$.appendChild(_),new Promise(_e=>{$.addEventListener("loadeddata",et=>_e($)),$.load()})}async function play(_){await _.play(),"requestVideoFrameCallback"in _&&await new Promise($=>{_.requestVideoFrameCallback($)})}const test_util=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16,createVideoElement,encodeStrings,expectArrayBuffersEqual,expectArraysClose,expectArraysEqual,expectNumbersClose,expectPromiseToFail,expectValuesInRange,play,testEpsilon},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MPRandGauss{constructor($,_e,et,tt,rt){this.mean=$,this.stdDev=_e,this.dtype=et,this.nextVal=NaN,this.truncated=tt,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const nt=rt||Math.random();this.random=seedrandom.alea(nt.toString())}nextValue(){if(!isNaN(this.nextVal)){const tt=this.nextVal;return this.nextVal=NaN,tt}let $,_e,et=!1;for(;!et;){let tt,rt,nt;do tt=2*this.random()-1,rt=2*this.random()-1,nt=tt*tt+rt*rt;while(nt>=1||nt===0);const it=Math.sqrt(-2*Math.log(nt)/nt);$=this.mean+this.stdDev*tt*it,_e=this.mean+this.stdDev*rt*it,(!this.truncated||this.isValidTruncated($))&&(et=!0)}return(!this.truncated||this.isValidTruncated(_e))&&(this.nextVal=this.convertValue(_e)),this.convertValue($)}convertValue($){return this.dtype==null||this.dtype==="float32"?$:Math.round($)}isValidTruncated($){return $<=this.upper&&$>=this.lower}}class RandGamma{constructor($,_e,et,tt){this.alpha=$,this.beta=1/_e,this.dtype=et;const rt=tt||Math.random();this.randu=seedrandom.alea(rt.toString()),this.randn=new MPRandGauss(0,1,et,!1,this.randu()),$<1?this.d=$+2/3:this.d=$-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let $,_e,et,tt,rt,nt;for(;;){do tt=this.randn.nextValue(),nt=1+this.c*tt;while(nt<=0);if(nt*=nt*nt,$=tt*tt,_e=1-.331*$*$,et=.5*$+this.d*(1-nt+Math.log(nt)),rt=this.randu(),rt<_e||Math.log(rt)<et)break}return nt=1/this.beta*this.d*nt,this.alpha<1&&(nt*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(nt)}convertValue($){return this.dtype==="float32"?$:Math.round($)}}class UniformRandom{constructor($=0,_e=1,et,tt){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=$,this.range=_e-$,this.dtype=et,tt==null&&(tt=Math.random()),typeof tt=="number"&&(tt=tt.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${$} - ${_e} <= 1 and dtype is not float`);this.random=seedrandom.alea(tt)}convertValue($){return this.canReturnFloat()?$:Math.round($)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function randomGamma_(_,$,_e=1,et="float32",tt){if(assertNonNegativeIntegerDimensions(_),_e==null&&(_e=1),et==null&&(et="float32"),et!=="float32"&&et!=="int32")throw new Error(`Unsupported data type ${et}`);const rt=new RandGamma($,_e,et,tt),nt=buffer$1(_,et);for(let it=0;it<nt.values.length;it++)nt.values[it]=rt.nextValue();return nt.toTensor()}const randomGamma=op({randomGamma_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function randomNormal_(_,$=0,_e=1,et,tt){if(assertNonNegativeIntegerDimensions(_),et!=null&&et==="bool")throw new Error(`Unsupported data type ${et}`);const rt=new MPRandGauss($,_e,et,!1,tt),nt=buffer$1(_,et);for(let it=0;it<nt.values.length;it++)nt.values[it]=rt.nextValue();return nt.toTensor()}const randomNormal$2=op({randomNormal_});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function randomStandardNormal_(_,$,_e){if($!=null&&$==="bool")throw new Error(`Unsupported data type ${$}`);return randomNormal$2(_,0,1,$,_e)}const randomStandardNormal=op({randomStandardNormal_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function randomUniform_(_,$=0,_e=1,et="float32",tt){assertNonNegativeIntegerDimensions(_);const rt=buffer$1(_,et),nt=new UniformRandom($,_e,null,tt);for(let it=0;it<rt.values.length;it++)rt.values[it]=nt.nextValue();return rt.toTensor()}const randomUniform$1=op({randomUniform_});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function randomUniformInt_(_,$,_e,et){return randomUniform$1(_,$,_e,"int32",et)}const randomUniformInt=op({randomUniformInt_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function range$7(_,$,_e=1,et="float32"){if(_e===0)throw new Error("Cannot have a step of zero");const tt={start:_,stop:$,step:_e,dtype:et};return ENGINE.runKernel(Range$1,{},tt)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function real_(_){const _e={input:convertToTensor(_,"input","real")};return ENGINE.runKernel(Real,_e)}const real$2=op({real_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reciprocal_(_){const _e={x:convertToTensor(_,"x","reciprocal")};return ENGINE.runKernel(Reciprocal,_e)}const reciprocal$2=op({reciprocal_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function relu_(_){const _e={x:convertToTensor(_,"x","relu")};return ENGINE.runKernel(Relu$1,_e)}const relu$2=op({relu_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function relu6_(_){const _e={x:convertToTensor(_,"x","relu6")};return ENGINE.runKernel(Relu6$1,_e)}const relu6$2=op({relu6_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reverse_(_,$){const et={x:convertToTensor(_,"x","reverse")},tt={dims:$};return ENGINE.runKernel(Reverse,et,tt)}const reverse$3=op({reverse_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reverse1d_(_){const $=convertToTensor(_,"x","reverse");return assert$1($.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${$.rank}.`),reverse$3($,0)}const reverse1d=op({reverse1d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reverse2d_(_,$){const _e=convertToTensor(_,"x","reverse");return assert$1(_e.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${_e.rank}.`),reverse$3(_e,$)}const reverse2d=op({reverse2d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reverse3d_(_,$){const _e=convertToTensor(_,"x","reverse");return assert$1(_e.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${_e.rank}.`),reverse$3(_e,$)}const reverse3d=op({reverse3d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reverse4d_(_,$){const _e=convertToTensor(_,"x","reverse");return assert$1(_e.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${_e.rank}.`),reverse$3(_e,$)}const reverse4d=op({reverse4d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function round_(_){const _e={x:convertToTensor(_,"x","round")};return ENGINE.runKernel(Round,_e)}const round$3=op({round_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rsqrt_(_){const _e={x:convertToTensor(_,"x","rsqrt","float32")};return ENGINE.runKernel(Rsqrt,_e)}const rsqrt$2=op({rsqrt_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function selu_(_){const _e={x:convertToTensor(_,"x","selu")};return ENGINE.runKernel(Selu$1,_e)}const selu$2=op({selu_});function separableConv2d_(_,$,_e,et,tt,rt=[1,1],nt="NHWC"){const it=convertToTensor(_,"x","separableConv2d"),st=convertToTensor($,"depthwiseFilter","separableConv2d"),at=convertToTensor(_e,"pointwiseFilter","separableConv2d");let ot=it,dt=!1;if(it.rank===3&&(dt=!0,ot=reshape$3(it,[1,it.shape[0],it.shape[1],it.shape[2]])),nt==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");assert$1(ot.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${ot.rank}.`),assert$1(st.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${st.rank}.`),assert$1(at.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${st.rank}.`),assert$1(at.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${at.shape[0]}.`),assert$1(at.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${at.shape[1]}.`);const ht=st.shape[2],yt=st.shape[3];assert$1(at.shape[2]===ht*yt,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${ht*yt}, but got ${at.shape[2]}.`);const vt=depthwiseConv2d$3(ot,st,et,tt,nt,rt),wt=conv2d$3(vt,at,1,"valid",nt);return dt?reshape$3(wt,[wt.shape[1],wt.shape[2],wt.shape[3]]):wt}const separableConv2d$1=op({separableConv2d_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function setdiff1dAsync_(_,$){const _e=convertToTensor(_,"x","setdiff1d"),et=convertToTensor($,"y","setdiff1d");assert$1(_e.dtype===et.dtype,()=>`x and y should have the same dtype, but got x (${_e.dtype}) and y (${et.dtype}).`),assert$1(_e.rank===1,()=>`x should be 1D tensor, but got x (${_e.shape}).`),assert$1(et.rank===1,()=>`y should be 1D tensor, but got y (${et.shape}).`);const tt=await _e.data(),rt=await et.data(),nt=new Set(rt);let it=0;for(let ot=0;ot<tt.length;ot++)nt.has(tt[ot])||it++;const st=new TensorBuffer([it],_e.dtype),at=new TensorBuffer([it],"int32");for(let ot=0,dt=0;ot<tt.length;ot++)nt.has(tt[ot])||(st.values[dt]=tt[ot],at.values[dt]=ot,dt++);return[st.toTensor(),at.toTensor()]}const setdiff1dAsync=setdiff1dAsync_;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sign_(_){const _e={x:convertToTensor(_,"x","sign")};return ENGINE.runKernel(Sign,_e)}const sign$3=op({sign_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sin_(_){const _e={x:convertToTensor(_,"x","sin","float32")};return ENGINE.runKernel(Sin,_e)}const sin$3=op({sin_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sinh_(_){const _e={x:convertToTensor(_,"x","sinh")};return ENGINE.runKernel(Sinh,_e)}const sinh$2=op({sinh_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice1d_(_,$,_e){const et=convertToTensor(_,"x","slice1d");return assert$1(et.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${et.rank} tensor`),slice$2(et,[$],[_e])}const slice1d=op({slice1d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice2d_(_,$,_e){const et=convertToTensor(_,"x","slice2d");return assert$1(et.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${et.rank} tensor`),slice$2(et,$,_e)}const slice2d=op({slice2d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice3d_(_,$,_e){const et=convertToTensor(_,"x","slice3d");return assert$1(et.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${et.rank} tensor`),slice$2(et,$,_e)}const slice3d=op({slice3d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice4d_(_,$,_e){const et=convertToTensor(_,"x","slice4d");return assert$1(et.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${et.rank} tensor`),slice$2(et,$,_e)}const slice4d=op({slice4d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function softmax_(_,$=-1){const _e=convertToTensor(_,"logits","softmax","float32");if($===-1&&($=_e.rank-1),$!==_e.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${_e.rank} and dim was ${$}`);const et={logits:_e},tt={dim:$};return ENGINE.runKernel(Softmax$2,et,tt)}const softmax$3=op({softmax_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fft_(_){assert$1(_.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${_.dtype}.`);const $={input:_};return ENGINE.runKernel(FFT,$)}const fft$2=op({fft_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ifft_(_){assert$1(_.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${_.dtype}.`);const $={input:_};return ENGINE.runKernel(IFFT,$)}const ifft$2=op({ifft_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function irfft_(_){const $=_.shape[_.shape.length-1],_e=_.size/$;let et;if($<=2){const tt=reshape$3(_,[_e,$]);et=ifft$2(tt)}else{const tt=[_e,2*($-1)],rt=reshape$3(real$2(_),[_e,$]),nt=reshape$3(imag$2(_),[_e,$]),it=reverse$3(slice$2(rt,[0,1],[_e,$-2]),1),st=mul(reverse$3(slice$2(nt,[0,1],[_e,$-2]),1),scalar(-1)),at=concat$2([rt,it],1),ot=concat$2([nt,st],1),dt=reshape$3(complex$2(at,ot),[tt[0],tt[1]]);et=ifft$2(dt)}if(et=real$2(et),_.rank===3&&_.shape[0]!==0){const tt=et,rt=_.shape[0];et=reshape$3(et,[rt,et.shape[0]/rt,et.shape[1]]),tt.dispose()}return et}const irfft=op({irfft_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function split_(_,$,_e=0){const tt={x:convertToTensor(_,"x","split")},rt={numOrSizeSplits:$,axis:_e};return ENGINE.runKernel(SplitV,tt,rt)}const split$2=op({split_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rfft_(_,$){assert$1(_.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${_.dtype}`);let _e=_.shape[_.shape.length-1];const et=_.size/_e;let tt;if($!=null&&$<_e){const vt=_.shape.map(wt=>0),xt=_.shape.map(wt=>wt);xt[_.shape.length-1]=$,tt=slice$2(_,vt,xt),_e=$}else if($!=null&&$>_e){const vt=_.shape.map(xt=>xt);vt[_.shape.length-1]=$-_e,tt=concat$2([_,zeros$2(vt)],_.shape.length-1),_e=$}else tt=_;const rt=zerosLike$2(tt),nt=reshape$3(complex$2(tt,rt),[et,_e]),it=fft$2(nt),st=Math.floor(_e/2)+1,at=real$2(it),ot=imag$2(it),dt=split$2(at,[st,_e-st],at.shape.length-1),ht=split$2(ot,[st,_e-st],ot.shape.length-1),yt=tt.shape.slice();return yt[tt.shape.length-1]=st,reshape$3(complex$2(dt[0],ht[0]),yt)}const rfft=op({rfft_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function squaredDifference_(_,$){let _e=convertToTensor(_,"a","squaredDifference"),et=convertToTensor($,"b","squaredDifference");[_e,et]=makeTypesMatch(_e,et),assertAndGetBroadcastShape(_e.shape,et.shape);const tt={a:_e,b:et},rt={};return ENGINE.runKernel(SquaredDifference,tt,rt)}const squaredDifference$2=op({squaredDifference_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function squeeze_(_,$){const _e=convertToTensor(_,"x","squeeze","string_or_numeric");return reshape$3(_e,squeezeShape(_e.shape,$).newShape)}const squeeze=op({squeeze_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stack_(_,$=0){const _e=convertToTensorArray(_,"tensors","stack","string_or_numeric");assert$1(_e.length>=1,()=>"Pass at least one tensor to tf.stack"),_e.length>0&&assert$1($<=_e[0].rank,()=>"Axis must be <= rank of the tensor");const et=_e,tt={axis:$};return ENGINE.runKernel(Pack,et,tt)}const stack=op({stack_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function step_(_,$=0){const et={x:convertToTensor(_,"x","step")},tt={alpha:$};return ENGINE.runKernel(Step$1,et,tt)}const step$2=op({step_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stridedSlice_(_,$,_e,et,tt=0,rt=0,nt=0,it=0,st=0){const ot={x:convertToTensor(_,"x","stridedSlice","string_or_numeric")},dt={begin:$,end:_e,strides:et,beginMask:tt,endMask:rt,ellipsisMask:nt,newAxisMask:it,shrinkAxisMask:st};return ENGINE.runKernel(StridedSlice,ot,dt)}const stridedSlice$2=op({stridedSlice_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tan_(_){const _e={x:convertToTensor(_,"x","tan","float32")};return ENGINE.runKernel(Tan,_e)}const tan$2=op({tan_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tensor1d(_,$){assertNonNull(_);const _e=inferShape(_,$);if(_e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return makeTensor(_,null,_e,$)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tensor2d(_,$,_e){if(assertNonNull(_),$!=null&&$.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const et=inferShape(_,_e);if(et.length!==2&&et.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(et.length===1&&$==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return makeTensor(_,$,et,_e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tensor3d(_,$,_e){if(assertNonNull(_),$!=null&&$.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const et=inferShape(_,_e);if(et.length!==3&&et.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(et.length===1&&$==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return makeTensor(_,$,et,_e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tensor4d(_,$,_e){if(assertNonNull(_),$!=null&&$.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const et=inferShape(_,_e);if(et.length!==4&&et.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(et.length===1&&$==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return makeTensor(_,$,et,_e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tensor5d(_,$,_e){if(assertNonNull(_),$!=null&&$.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const et=inferShape(_,_e);if(et.length!==5&&et.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(et.length===1&&$==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return makeTensor(_,$,et,_e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tensor6d(_,$,_e){if(assertNonNull(_),$!=null&&$.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const et=inferShape(_,_e);if(et.length!==6&&et.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(et.length===1&&$==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return $=$||et,makeTensor(_,$,et,_e)}function validateUpdateShape(_,$,_e){const et=$.rank>1?$.shape[$.rank-1]:1,tt=$.rank>1?$.rank-1:1,rt=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${_e.shape}, indices.shape: ${$.shape}, shape: ${_}, sliceDim: ${et}, and batchDim: ${tt}.`;if(_e.rank<tt)throw new Error(rt+` update.rank < ${tt}. `);if(_.length<et+(_e.rank-tt))throw new Error(rt+` Output shape length < ${et+(_e.rank-tt)}`);if(_e.rank!==tt+_.length-et)throw new Error(rt+` update.rank != ${tt+_.length-et}`);for(let nt=0;nt<tt;++nt)if(_e.shape[nt]!==$.shape[nt])throw new Error(rt+` updates.shape[${nt}] (${_e.shape[nt]}) != indices.shape[${nt}] (${$.shape[nt]}).`);for(let nt=0;nt<_e.rank-tt;++nt)if(_e.shape[nt+tt]!==_[nt+et])throw new Error(rt+` updates.shape[${nt+tt}] (${_e.shape[nt+tt]}) != shape[${nt+tt}] (${_[nt+tt]})`)}function validateInput$1(_,$,_e){if($.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${$.rank}.`);if(_.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${_.rank}.`);if($.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${$.dtype}`);if(_e.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${_e}`);if(_e.length===0){if($.size===0)throw new Error(`Indices specified for empty output. indices shape: ${$.shape}`);if(_.size===0)throw new Error(`Updates specified for empty output. updates shape: ${_.shape}`)}validateUpdateShape(_e,$,_)}function calculateShapes(_,$,_e){const et=$.shape.length,tt=et>1?$.shape[et-1]:1,rt=_e.length;let nt=1;for(let dt=tt;dt<rt;++dt)nt*=_e[dt];const it=tt<1?1:tt,st=sizeFromShape($.shape)/it,at=[...computeStrides(_e.slice(0,tt)),1],ot=sizeFromShape(_e);return{sliceRank:tt,numUpdates:st,sliceSize:nt,strides:at,outputSize:ot}}const scatter_nd_util=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes,validateInput:validateInput$1,validateUpdateShape},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tensorScatterUpdate_(_,$,_e){const et=convertToTensor(_,"tensor","tensorScatterupdate"),tt=convertToTensor($,"indices","tensorScatterupdate","int32"),rt=convertToTensor(_e,"updates","tensorScatterupdate");if(validateInput$1(rt,tt,et.shape),et.dtype!==rt.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${et.dtype} and ${rt.dtype}.`);const nt={tensor:et,indices:tt,updates:rt},it={};return ENGINE.runKernel(TensorScatterUpdate,nt,it)}const tensorScatterUpdate$2=op({tensorScatterUpdate_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function topk_(_,$=1,_e=!0){const et=convertToTensor(_,"x","topk");if(et.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const tt=et.shape[et.shape.length-1];if($<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${$}`);if($>tt)throw new Error(`'k' passed to topk() must be <= the last dimension (${tt}) but got ${$}`);const rt={x:et},nt={k:$,sorted:_e},[it,st]=ENGINE.runKernel(TopK,rt,nt);return{values:it,indices:st}}const topk=op({topk_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function truncatedNormal_(_,$=0,_e=1,et,tt){if(assertNonNegativeIntegerDimensions(_),et!=null&&et==="bool")throw new Error("Unsupported data type $ { dtype }");const rt=new MPRandGauss($,_e,et,!0,tt),nt=buffer$1(_,et);for(let it=0;it<nt.values.length;it++)nt.values[it]=rt.nextValue();return nt.toTensor()}const truncatedNormal$1=op({truncatedNormal_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unique_(_,$=0){const _e=convertToTensor(_,"x","unique","string_or_numeric");assert$1(_e.rank>0,()=>"The input tensor must be at least 1D");const et={x:_e},tt={axis:$},[rt,nt]=ENGINE.runKernel(Unique,et,tt);return{values:rt,indices:nt}}const unique$3=op({unique_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unsortedSegmentSum_(_,$,_e){const et=convertToTensor(_,"x","unsortedSegmentSum"),tt=convertToTensor($,"segmentIds","unsortedSegmentSum","int32");assert$1(isInt(_e),()=>"numSegments must be of dtype int");const rt={x:et,segmentIds:tt},nt={numSegments:_e};return ENGINE.runKernel(UnsortedSegmentSum,rt,nt)}const unsortedSegmentSum$2=op({unsortedSegmentSum_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unstack_(_,$=0){const _e=convertToTensor(_,"x","unstack","string_or_numeric");assert$1($>=-_e.shape.length&&$<_e.shape.length,()=>`Axis = ${$} is not in [-${_e.shape.length}, ${_e.shape.length})`);const et={value:_e},tt={axis:$};return ENGINE.runKernel(Unpack,et,tt)}const unstack=op({unstack_});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function upperBound$1(_,$){return searchSorted$2(_,$,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function variable(_,$=!0,_e,et){return ENGINE.makeVariable(_,$,_e,et)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function whereImpl$2(_,$){const _e=[];for(let rt=0;rt<$.length;rt++)$[rt]&&_e.push(rt);const et=buffer$1(_,"int32"),tt=buffer$1([_e.length,_.length],"int32");for(let rt=0;rt<_e.length;rt++){const nt=et.indexToLoc(_e[rt]),it=rt*_.length;tt.values.set(nt,it)}return tt.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function whereAsync_(_){const $=convertToTensor(_,"condition","whereAsync","bool"),_e=await $.data(),et=whereImpl$2($.shape,_e);return _!==$&&$.dispose(),et}const whereAsync=whereAsync_;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function booleanMaskAsync_(_,$,_e){const et=convertToTensor(_,"tensor","boolMask"),tt=convertToTensor($,"mask","boolMask","bool"),rt=_e??0,nt=tt.rank,it=et.shape;assert$1(nt>0,()=>"mask cannot be scalar"),assertShapesMatch(it.slice(rt,rt+nt),tt.shape,"mask's shape must match the first K dimensions of tensor's shape,");let st=1;for(let xt=rt;xt<rt+nt;xt++)st*=it[xt];const at=it.slice(0,rt).concat([st],it.slice(rt+nt)),ot=reshape$3(et,at),dt=reshape$3(tt,[-1]),ht=await whereAsync(dt),yt=squeeze(ht,[1]),vt=gather$1(ot,yt,rt);return _!==et&&et.dispose(),$!==tt&&tt.dispose(),yt.dispose(),ot.dispose(),dt.dispose(),ht.dispose(),vt}const booleanMaskAsync=booleanMaskAsync_;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transpose_(_,$,_e){const et=convertToTensor(_,"x","transpose");if($==null&&($=et.shape.map((nt,it)=>it).reverse()),assert$1(et.rank===$.length,()=>`Error in transpose: rank of input ${et.rank} must match length of perm ${$}.`),$.forEach(nt=>{assert$1(nt>=0&&nt<et.rank,()=>`All entries in 'perm' must be between 0 and ${et.rank-1} but got ${$}`)}),et.rank<=1)return et.clone();const tt={x:et},rt={perm:$};return et.dtype==="complex64"?tidy(()=>{let nt=real$2(et),it=imag$2(et);return nt=ENGINE.runKernel(Transpose,{x:nt},rt),it=ENGINE.runKernel(Transpose,{x:it},rt),_e&&(it=neg$2(it)),complex$2(nt,it)}):ENGINE.runKernel(Transpose,tt,rt)}const transpose$2=op({transpose_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function movingAverage_(_,$,_e,et,tt=!0){const rt=convertToTensor(_,"v","movingAverage"),nt=convertToTensor($,"x","movingAverage"),it=convertToTensor(_e,"decay","movingAverage");assertTypesMatch(rt,nt),assert$1(arraysEqual(rt.shape,nt.shape),()=>"Shape mismatch in v and x");const st=scalar(1),at=sub$2(st,it);let ot=mul(sub$2(nt,rt),at);if(tt){assert$1(et!=null,()=>"When using zeroDebias: true, step is required.");const dt=convertToTensor(et,"step","movingAverage");ot=div$1(ot,sub$2(st,pow$3(it,dt)))}return add$3(rt,ot)}const movingAverage=op({movingAverage_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function scatterND_(_,$,_e){assertNonNegativeIntegerDimensions(_e);const et=convertToTensor(_,"indices","scatterND","int32"),tt=convertToTensor($,"updates","scatterND");validateInput$1(tt,et,_e);const rt={indices:et,updates:tt},nt={shape:_e};return ENGINE.runKernel(ScatterNd,rt,nt)}const scatterND=op({scatterND_});function validateInput(_,$,_e,et){if(_.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${_.dtype}.`);if(_.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${_.shape}.`);const tt=_.rank>0?_.shape[0]:1,rt=_.rank>1?_.shape[1]:1;if(_e.length!==rt)throw new Error(`outputShape has incorrect number of elements:, ${_e.length}, should be: ${rt}.`);const nt=$.size;if(!($.rank===0||$.rank===1&&nt===tt))throw new Error(`sparseValues has incorrect shape ${$.shape}, should be [] or [${tt}]`);if($.dtype!==et.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseToDense_(_,$,_e,et=0){assertNonNegativeIntegerDimensions(_e);const tt=convertToTensor(_,"sparseIndices","sparseToDense","int32"),rt=convertToTensor($,"sparseValues","sparseToDense","string_or_numeric"),nt=convertToTensor(et,"defaultValue","sparseToDense",rt.dtype);validateInput(tt,rt,_e,nt);const it={sparseIndices:tt,sparseValues:rt,defaultValue:nt},st={outputShape:_e};return ENGINE.runKernel(SparseToDense,it,st)}const sparseToDense$2=op({sparseToDense_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherND_(_,$){const _e=convertToTensor($,"indices","gatherND","int32"),tt={params:convertToTensor(_,"x","gatherND","string_or_numeric"),indices:_e};return ENGINE.runKernel(GatherNd,tt)}const gatherND=op({gatherND_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getNoiseShape(_,$){if($==null)return _.shape.slice();if(arraysEqual(_.shape,$))return $;if(_.shape.length===$.length){const _e=[];for(let et=0;et<_.shape.length;et++)$[et]==null&&_.shape[et]!=null?_e.push(_.shape[et]):_e.push($[et]);return _e}return $}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dropout_(_,$,_e,et){const tt=convertToTensor(_,"x","dropout");if(assert$1(tt.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${tt.dtype} tensor instead.`),assert$1($>=0&&$<1,()=>`rate must be a float in the range [0, 1), but got ${$}.`),$===0)return _ instanceof Tensor?tt.clone():tt;const rt=getNoiseShape(tt,_e),nt=1-$,it=div$1(floor$2(add$3(randomUniform$1(rt,0,1,"float32",et),nt)),nt);return mul(tt,it)}const dropout$2=op({dropout_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function enclosingPowerOfTwo(_){return Math.floor(Math.pow(2,Math.ceil(Math.log(_)/Math.log(2))))}function cosineWindow(_,$,_e){const et=1-_%2,tt=new Float32Array(_);for(let rt=0;rt<_;++rt){const nt=2*Math.PI*rt/(_+et-1);tt[rt]=$-_e*Math.cos(nt)}return tensor1d(tt,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function inTopKAsync_(_,$,_e=1){const et=convertToTensor(_,"predictions","inTopK"),tt=convertToTensor($,"targets","inTopK");assert$1(et.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${et.rank}`),assert$1(et.rank-1===tt.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${et.rank} and targets rank ${tt.rank}`),assertShapesMatch(et.shape.slice(0,et.shape.length-1),tt.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const rt=et.shape[et.shape.length-1];assert$1(_e>0&&_e<=rt,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${rt}), but got ${_e}`);const nt=await et.data(),it=await tt.data(),[st,at]=[nt.length/rt,rt],ot=getTypedArrayFromDType("bool",st);for(let dt=0;dt<st;dt++){const ht=dt*at,yt=nt.subarray(ht,ht+at),vt=[];for(let xt=0;xt<yt.length;xt++)vt.push({value:yt[xt],index:xt});vt.sort((xt,wt)=>wt.value-xt.value),ot[dt]=0;for(let xt=0;xt<_e;xt++)if(vt[xt].index===it[dt]){ot[dt]=1;break}}return _!==et&&et.dispose(),$!==tt&&tt.dispose(),tensor(ot,tt.shape,"bool")}const inTopKAsync=inTopKAsync_;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropFilter_(_,$,_e,et,tt,rt="NHWC",nt){let it=_;_.rank===3&&(it=reshape$3(_,[1,_.shape[0],_.shape[1],_.shape[2]]));let st=$;st.rank===3&&(st=reshape$3($,[1,$.shape[0],$.shape[1],$.shape[2]])),assert$1(it.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${it.shape}.`),assert$1(st.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${st.shape}.`),assert$1(_e.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${_e}.`);const at=rt==="NHWC"?it.shape[3]:it.shape[1],ot=rt==="NHWC"?st.shape[3]:st.shape[1];assert$1(at===_e[2],()=>`Error in conv2dDerFilter: depth of input ${at}) must match input depth in filter (${_e[2]}.`),assert$1(ot===_e[3],()=>`Error in conv2dDerFilter: depth of dy (${ot}) must match output depth for filter (${_e[3]}).`),checkPadOnDimRoundingMode("conv2dDerFilter",tt,nt);const dt={x:it,dy:st},ht={strides:et,pad:tt,dataFormat:rt,dimRoundingMode:nt,filterShape:_e};return ENGINE.runKernel(Conv2DBackpropFilter,dt,ht)}const conv2DBackpropFilter$2=op({conv2DBackpropFilter_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getFusedDyActivation(_,$,_e){if(_e==null||_e==="linear")return _;if(_e==="relu")return mul(_,step$2($));throw new Error(`Cannot compute gradient for fused activation ${_e}.`)}function getFusedBiasGradient(_,$){let _e=$;const et=getReductionAxes(_.shape,$.shape);return et.length>0&&(_e=sum$2(_e,et)),reshape$3(_e,_.shape)}function applyActivation$1(_,$,_e,et){if($==="linear")return _;if($==="relu")return relu$2(_);if($==="elu")return elu$4(_);if($==="relu6")return relu6$2(_);if($==="prelu")return prelu$3(_,_e);if($==="leakyrelu")return leakyRelu$2(_,et);if($==="sigmoid")return sigmoid$2(_);throw new Error(`Unknown fused activation ${$}.`)}const shouldFuse=(_,$)=>!(_>0)||$==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedConv2d_({x:_,filter:$,strides:_e,pad:et,dataFormat:tt="NHWC",dilations:rt=[1,1],dimRoundingMode:nt,bias:it,activation:st="linear",preluActivationWeights:at,leakyreluAlpha:ot}){if(st=st||"linear",shouldFuse(ENGINE.state.gradientDepth,st)===!1){assert$1(tt==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${tt} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let Bt=conv2d$3(_,$,_e,et,tt,rt,nt);return it!=null&&(Bt=add$3(Bt,it)),applyActivation$1(Bt,st,at,ot)}const dt=convertToTensor(_,"x","conv2d","float32"),ht=convertToTensor($,"filter","conv2d","float32");let yt=dt,vt=!1;dt.rank===3&&(vt=!0,yt=reshape$3(dt,[1,dt.shape[0],dt.shape[1],dt.shape[2]])),assert$1(yt.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${yt.rank}.`),assert$1(ht.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${ht.rank}.`),checkPadOnDimRoundingMode("fused conv2d",et,nt);const xt=tt==="NHWC"?yt.shape[3]:yt.shape[1];assert$1(ht.shape[2]===xt,()=>`Error in conv2d: depth of input (${xt}) must match input depth for filter ${ht.shape[2]}.`),assert$1(eitherStridesOrDilationsAreOne(_e,rt),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${_e} and dilations '${rt}'`);const wt=computeConv2DInfo(yt.shape,ht.shape,_e,rt,et,nt);let Et;it!=null&&(Et=convertToTensor(it,"bias","fused conv2d"),[Et]=makeTypesMatch(Et,dt),tt==="NHWC"?assertAndGetBroadcastShape(wt.outShape,Et.shape):(assert$1(Et.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${Et.shape.length}.`),assert$1(Et.shape.length===0||Et.shape[0]===wt.outChannels||Et.shape[0]===1,()=>`Error in fused conv2d: bias shape (${Et.shape}) is not compatible with the number of output channels (${wt.outChannels})`)));let At;if(at!=null){const Bt=at.shape;if(assert$1(Bt.length<=1||Bt.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${Bt.length}.`),Bt.length===1)assert$1(Bt[0]===1||Bt[0]===wt.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${Bt}) is not compatible with the number of output channels (${wt.outChannels}).`);else if(Bt.length===3)try{assertAndGetBroadcastShape(Bt,wt.outShape)}catch{const er=`Error in fused conv2d: PReLU activation weights (${Bt}) is not compatible with the output shape of the conv2d (${wt.outShape}).`;throw Error(er)}At=convertToTensor(at,"prelu weights","fused conv2d")}const jt=(Bt,Gt)=>{assert$1(tt==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${tt} but only NHWC is currently supported.`);const[er,tr,ar,Mt]=Gt,lt=getFusedDyActivation(Bt,ar,st);assert$1(tupleValuesAreOne(rt),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${rt}'`);const mt=conv2DBackpropInput$2(tr.shape,lt,er,_e,et),gt=conv2DBackpropFilter$2(tr,lt,er.shape,_e,et),bt=[mt,gt];if(Mt!=null){const St=getFusedBiasGradient(Mt,lt);bt.push(St)}return bt},kt={x:yt,filter:ht,bias:Et,preluActivationWeights:At},Lt={strides:_e,pad:et,dataFormat:tt,dilations:rt,dimRoundingMode:nt,activation:st,leakyreluAlpha:ot};return it==null?customGrad((Gt,er,tr)=>{let ar=ENGINE.runKernel(FusedConv2D,kt,Lt);return tr([er,Gt,ar]),vt&&(ar=reshape$3(ar,[ar.shape[1],ar.shape[2],ar.shape[3]])),{value:ar,gradFunc:jt}})(yt,ht):customGrad((Gt,er,tr,ar)=>{let Mt=ENGINE.runKernel(FusedConv2D,kt,Lt);return ar([er,Gt,Mt,tr]),vt&&(Mt=reshape$3(Mt,[Mt.shape[1],Mt.shape[2],Mt.shape[3]])),{value:Mt,gradFunc:jt}})(yt,ht,Et)}const conv2d$2=op({fusedConv2d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropFilter_(_,$,_e,et,tt,rt=[1,1],nt){let it=_;_.rank===3&&(it=reshape$3(_,[1,_.shape[0],_.shape[1],_.shape[2]]));let st=$;st.rank===3&&(st=reshape$3($,[1,$.shape[0],$.shape[1],$.shape[2]]));const at={x:it,dy:st},ot={strides:et,pad:tt,dimRoundingMode:nt,dilations:rt,filterShape:_e};return ENGINE.runKernel(DepthwiseConv2dNativeBackpropFilter,at,ot)}const depthwiseConv2dNativeBackpropFilter$2=op({depthwiseConv2dNativeBackpropFilter_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropInput_(_,$,_e,et,tt,rt=[1,1],nt){let it=$,st=!1;$.rank===3&&(st=!0,it=reshape$3($,[1,$.shape[0],$.shape[1],$.shape[2]]));const at={dy:it,filter:_e},ot={strides:et,pad:tt,dimRoundingMode:nt,dilations:rt,inputShape:_},dt=ENGINE.runKernel(DepthwiseConv2dNativeBackpropInput,at,ot);return st?reshape$3(dt,[dt.shape[1],dt.shape[2],dt.shape[3]]):dt}const depthwiseConv2dNativeBackpropInput$2=op({depthwiseConv2dNativeBackpropInput_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedDepthwiseConv2d_({x:_,filter:$,strides:_e,pad:et,dataFormat:tt="NHWC",dilations:rt=[1,1],dimRoundingMode:nt,bias:it,activation:st="linear",preluActivationWeights:at,leakyreluAlpha:ot}){if(shouldFuse(ENGINE.state.gradientDepth,st)===!1){let Lt=depthwiseConv2d$3(_,$,_e,et,tt,rt,nt);return it!=null&&(Lt=add$3(Lt,it)),applyActivation$1(Lt,st,at,ot)}const dt=convertToTensor(_,"x","depthwiseConv2d","float32"),ht=convertToTensor($,"filter","depthwiseConv2d","float32");let yt=dt,vt=!1;dt.rank===3&&(vt=!0,yt=reshape$3(dt,[1,dt.shape[0],dt.shape[1],dt.shape[2]])),assert$1(yt.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${yt.rank}.`),assert$1(ht.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${ht.rank}.`),assert$1(yt.shape[3]===ht.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${yt.shape[3]}) must match the inChannels dimension in filter ${ht.shape[2]}.`),rt==null&&(rt=[1,1]),assert$1(eitherStridesOrDilationsAreOne(_e,rt),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${_e} and dilations '${rt}'`),checkPadOnDimRoundingMode("fused depthwiseConv2d",et,nt);const xt=computeConv2DInfo(yt.shape,ht.shape,_e,rt,et,nt,!0);let wt;it!=null&&(wt=convertToTensor(it,"bias","fused conv2d"),[wt]=makeTypesMatch(wt,dt),assertAndGetBroadcastShape(xt.outShape,wt.shape));let Et;at!=null&&(Et=convertToTensor(at,"prelu weights","fused depthwiseConv2d"));const At=(Lt,Bt)=>{assert$1(tupleValuesAreOne(rt),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${rt}'`);const[Gt,er,tr,ar]=Bt,Mt=getFusedDyActivation(Lt,tr,st),lt=depthwiseConv2dNativeBackpropInput$2(er.shape,Mt,Gt,_e,et,rt,nt),mt=depthwiseConv2dNativeBackpropFilter$2(er,Mt,Gt.shape,_e,et,rt,nt);if(ar!=null){const gt=getFusedBiasGradient(wt,Mt);return[lt,mt,gt]}return[lt,mt]},jt={x:yt,filter:ht,bias:wt,preluActivationWeights:Et},kt={strides:_e,pad:et,dataFormat:tt,dilations:rt,dimRoundingMode:nt,activation:st,leakyreluAlpha:ot};return it==null?customGrad((Bt,Gt,er)=>{let tr=ENGINE.runKernel(FusedDepthwiseConv2D,jt,kt);return er([Gt,Bt,tr]),vt&&(tr=reshape$3(tr,[tr.shape[1],tr.shape[2],tr.shape[3]])),{value:tr,gradFunc:At}})(yt,ht):customGrad((Bt,Gt,er,tr)=>{let ar=ENGINE.runKernel(FusedDepthwiseConv2D,jt,kt);return tr([Gt,Bt,ar,er]),vt&&(ar=reshape$3(ar,[ar.shape[1],ar.shape[2],ar.shape[3]])),{value:ar,gradFunc:At}})(yt,ht,wt)}const depthwiseConv2d$2=op({fusedDepthwiseConv2d_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedMatMul_({a:_,b:$,transposeA:_e=!1,transposeB:et=!1,bias:tt,activation:rt="linear",preluActivationWeights:nt,leakyreluAlpha:it=.2}){if(shouldFuse(ENGINE.state.gradientDepth,rt)===!1){let Mt=matMul$1(_,$,_e,et);return tt!=null&&(Mt=add$3(Mt,tt)),applyActivation$1(Mt,rt,nt,it)}let st=convertToTensor(_,"a","fused matMul"),at=convertToTensor($,"b","fused matMul");[st,at]=makeTypesMatch(st,at);const ot=_e?st.shape[st.rank-2]:st.shape[st.rank-1],dt=et?at.shape[at.rank-1]:at.shape[at.rank-2],ht=_e?st.shape[st.rank-1]:st.shape[st.rank-2],yt=et?at.shape[at.rank-2]:at.shape[at.rank-1],vt=st.shape.slice(0,-2),xt=at.shape.slice(0,-2),wt=sizeFromShape(vt),Et=sizeFromShape(xt);assert$1(ot===dt,()=>`Error in fused matMul: inner shapes (${ot}) and (${dt}) of Tensors with shapes ${st.shape} and ${at.shape} and transposeA=${_e} and transposeB=${et} must match.`);const jt=assertAndGetBroadcastShape(st.shape.slice(0,-2),at.shape.slice(0,-2)).concat([ht,yt]),kt=_e?reshape$3(st,[wt,ot,ht]):reshape$3(st,[wt,ht,ot]),Lt=et?reshape$3(at,[Et,yt,dt]):reshape$3(at,[Et,dt,yt]);let Bt;tt!=null&&(Bt=convertToTensor(tt,"bias","fused matMul"),[Bt]=makeTypesMatch(Bt,st),assertAndGetBroadcastShape(jt,Bt.shape));let Gt;nt!=null&&(Gt=convertToTensor(nt,"prelu weights","fused matMul"));const er=(Mt,lt)=>{const[mt,gt,bt,St]=lt,Nt=getFusedDyActivation(reshape$3(Mt,bt.shape),bt,rt);let Pt,Tt;if(!_e&&!et?(Pt=matMul$1(Nt,gt,!1,!0),Tt=matMul$1(mt,Nt,!0,!1)):!_e&&et?(Pt=matMul$1(Nt,gt,!1,!1),Tt=matMul$1(Nt,mt,!0,!1)):_e&&!et?(Pt=matMul$1(gt,Nt,!1,!0),Tt=matMul$1(mt,Nt,!1,!1)):(Pt=matMul$1(gt,Nt,!0,!0),Tt=matMul$1(Nt,mt,!0,!0)),tt!=null){const pt=getFusedBiasGradient(St,Nt);return[Pt,Tt,pt]}else return[Pt,Tt]},tr={a:kt,b:Lt,bias:Bt,preluActivationWeights:Gt},ar={transposeA:_e,transposeB:et,activation:rt,leakyreluAlpha:it};return tt==null?customGrad((lt,mt,gt)=>{const bt=ENGINE.runKernel(_FusedMatMul,tr,ar);return gt([lt,mt,bt]),{value:reshape$3(bt,jt),gradFunc:er}})(kt,Lt):customGrad((lt,mt,gt,bt)=>{const St=ENGINE.runKernel(_FusedMatMul,tr,ar);return bt([lt,mt,St,gt]),{value:reshape$3(St,jt),gradFunc:er}})(kt,Lt,Bt)}const matMul=op({fusedMatMul_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fused_ops=Object.freeze(Object.defineProperty({__proto__:null,conv2d:conv2d$2,depthwiseConv2d:depthwiseConv2d$2,matMul},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hammingWindow_(_){return cosineWindow(_,.54,.46)}const hammingWindow=op({hammingWindow_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hannWindow_(_){return cosineWindow(_,.5,.5)}const hannWindow=op({hannWindow_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function frame_(_,$,_e,et=!1,tt=0){let rt=0;const nt=[];for(;rt+$<=_.size;)nt.push(slice$2(_,rt,$)),rt+=_e;if(et)for(;rt<_.size;){const it=rt+$-_.size,st=concat$2([slice$2(_,rt,$-it),fill$2([it],tt)]);nt.push(st),rt+=_e}return nt.length===0?tensor2d([],[0,$]):reshape$3(concat$2(nt),[nt.length,$])}const frame=op({frame_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stft_(_,$,_e,et,tt=hannWindow){et==null&&(et=enclosingPowerOfTwo($));const rt=frame(_,$,_e),nt=mul(rt,tt($));return rfft(nt,et)}const stft=op({stft_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cropAndResize_(_,$,_e,et,tt="bilinear",rt=0){const nt=convertToTensor(_,"image","cropAndResize"),it=convertToTensor($,"boxes","cropAndResize","float32"),st=convertToTensor(_e,"boxInd","cropAndResize","int32"),at=it.shape[0];assert$1(nt.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${nt.rank}.`),assert$1(it.rank===2&&it.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${at},4] but had shape ${it.shape}.`),assert$1(st.rank===1&&st.shape[0]===at,()=>`Error in cropAndResize: boxInd must be have size [${at}] but had shape ${it.shape}.`),assert$1(et.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${et.length}.`),assert$1(et[0]>=1&&et[1]>=1,()=>`cropSize must be atleast [1,1], but was ${et}`),assert$1(tt==="bilinear"||tt==="nearest",()=>`method must be bilinear or nearest, but was ${tt}`);const ot={image:nt,boxes:it,boxInd:st},dt={method:tt,extrapolationValue:rt,cropSize:et};return ENGINE.runKernel(CropAndResize,ot,dt)}const cropAndResize$3=op({cropAndResize_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function flipLeftRight_(_){const $=convertToTensor(_,"image","flipLeftRight","float32");assert$1($.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${$.rank}.`);const _e={image:$};return ENGINE.runKernel(FlipLeftRight,_e,{})}const flipLeftRight=op({flipLeftRight_});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function grayscaleToRGB_(_){const $=convertToTensor(_,"image","grayscaleToRGB"),_e=$.rank-1,et=$.shape[_e];assert$1($.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${$.rank}.`),assert$1(et===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${et}.`);const tt=new Array($.rank);return tt.fill(1,0,_e),tt[_e]=3,tile$3($,tt)}const grayscaleToRGB=op({grayscaleToRGB_});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rgbToGrayscale_(_){const $=convertToTensor(_,"image","RGBToGrayscale"),_e=$.rank-1,et=$.shape[_e];assert$1($.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${$.rank}.`),assert$1(et===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${et}.`);const tt=$.dtype,rt=cast$3($,"float32"),nt=tensor1d([.2989,.587,.114]);let it;switch($.rank){case 2:it=einsum$2("ij,j->i",rt,nt);break;case 3:it=einsum$2("ijk,k->ij",rt,nt);break;case 4:it=einsum$2("ijkl,l->ijk",rt,nt);break;case 5:it=einsum$2("ijklm,m->ijkl",rt,nt);break;case 6:it=einsum$2("ijklmn,n->ijklm",rt,nt);break;default:throw new Error("Not a valid tensor rank.")}return it=expandDims$3(it,-1),cast$3(it,tt)}const rgbToGrayscale=op({rgbToGrayscale_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rotateWithOffset_(_,$,_e=0,et=.5){const tt=convertToTensor(_,"image","rotateWithOffset","float32");assert$1(tt.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${tt.rank}.`);const rt={image:tt},nt={radians:$,fillValue:_e,center:et};return ENGINE.runKernel(RotateWithOffset,rt,nt)}const rotateWithOffset=op({rotateWithOffset_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nonMaxSuppSanityCheck(_,$,_e,et,tt,rt){et==null&&(et=.5),tt==null&&(tt=Number.NEGATIVE_INFINITY),rt==null&&(rt=0);const nt=_.shape[0];return _e=Math.min(_e,nt),assert$1(0<=et&&et<=1,()=>`iouThreshold must be in [0, 1], but was '${et}'`),assert$1(_.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${_.rank}'`),assert$1(_.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${_.shape[1]}`),assert$1($.rank===1,()=>"scores must be a 1D tensor"),assert$1($.shape[0]===nt,()=>`scores has incompatible shape with boxes. Expected ${nt}, but was ${$.shape[0]}`),assert$1(0<=rt&&rt<=1,()=>`softNmsSigma must be in [0, 1], but was '${rt}'`),{maxOutputSize:_e,iouThreshold:et,scoreThreshold:tt,softNmsSigma:rt}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nonMaxSuppression_(_,$,_e,et=.5,tt=Number.NEGATIVE_INFINITY){const rt=convertToTensor(_,"boxes","nonMaxSuppression","float32"),nt=convertToTensor($,"scores","nonMaxSuppression","float32"),it=nonMaxSuppSanityCheck(rt,nt,_e,et,tt);_e=it.maxOutputSize,et=it.iouThreshold,tt=it.scoreThreshold;const st={maxOutputSize:_e,iouThreshold:et,scoreThreshold:tt};return ENGINE.runKernel(NonMaxSuppressionV3,{boxes:rt,scores:nt},st)}const nonMaxSuppression=op({nonMaxSuppression_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function binaryInsert(_,$,_e){const et=binarySearch(_,$,_e),tt=et<0?-(et+1):et;_.splice(tt,0,$)}function binarySearch(_,$,_e){return binarySearch_(_,$,_e||defaultComparator)}function defaultComparator(_,$){return _>$?1:_<$?-1:0}function binarySearch_(_,$,_e){let et=0,tt=_.length,rt=0,nt=!1;for(;et<tt;){rt=et+(tt-et>>>1);const it=_e($,_[rt]);it>0?et=rt+1:(tt=rt,nt=!it)}return nt?et:-et-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nonMaxSuppressionV3Impl$2(_,$,_e,et,tt){return nonMaxSuppressionImpl_(_,$,_e,et,tt,0)}function nonMaxSuppressionV4Impl$2(_,$,_e,et,tt,rt){return nonMaxSuppressionImpl_(_,$,_e,et,tt,0,!1,rt,!0)}function nonMaxSuppressionV5Impl$2(_,$,_e,et,tt,rt){return nonMaxSuppressionImpl_(_,$,_e,et,tt,rt,!0)}function nonMaxSuppressionImpl_(_,$,_e,et,tt,rt,nt=!1,it=!1,st=!1){const at=[];for(let wt=0;wt<$.length;wt++)$[wt]>tt&&at.push({score:$[wt],boxIndex:wt,suppressBeginIndex:0});at.sort(ascendingComparator);const ot=rt>0?-.5/rt:0,dt=[],ht=[];for(;dt.length<_e&&at.length>0;){const wt=at.pop(),{score:Et,boxIndex:At,suppressBeginIndex:jt}=wt;if(Et<tt)break;let kt=!1;for(let Lt=dt.length-1;Lt>=jt;--Lt){const Bt=intersectionOverUnion(_,At,dt[Lt]);if(Bt>=et){kt=!0;break}if(wt.score=wt.score*suppressWeight(et,ot,Bt),wt.score<=tt)break}wt.suppressBeginIndex=dt.length,kt||(wt.score===Et?(dt.push(At),ht.push(wt.score)):wt.score>tt&&binaryInsert(at,wt,ascendingComparator))}const yt=dt.length,vt=_e-yt;it&&vt>0&&(dt.push(...new Array(vt).fill(0)),ht.push(...new Array(vt).fill(0)));const xt={selectedIndices:dt};return nt&&(xt.selectedScores=ht),st&&(xt.validOutputs=yt),xt}function intersectionOverUnion(_,$,_e){const et=_.subarray($*4,$*4+4),tt=_.subarray(_e*4,_e*4+4),rt=Math.min(et[0],et[2]),nt=Math.min(et[1],et[3]),it=Math.max(et[0],et[2]),st=Math.max(et[1],et[3]),at=Math.min(tt[0],tt[2]),ot=Math.min(tt[1],tt[3]),dt=Math.max(tt[0],tt[2]),ht=Math.max(tt[1],tt[3]),yt=(it-rt)*(st-nt),vt=(dt-at)*(ht-ot);if(yt<=0||vt<=0)return 0;const xt=Math.max(rt,at),wt=Math.max(nt,ot),Et=Math.min(it,dt),At=Math.min(st,ht),jt=Math.max(Et-xt,0)*Math.max(At-wt,0);return jt/(yt+vt-jt)}function suppressWeight(_,$,_e){const et=Math.exp($*_e*_e);return _e<=_?et:0}function ascendingComparator(_,$){return _.score-$.score||_.score===$.score&&$.boxIndex-_.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function nonMaxSuppressionAsync_(_,$,_e,et=.5,tt=Number.NEGATIVE_INFINITY){const rt=convertToTensor(_,"boxes","nonMaxSuppressionAsync"),nt=convertToTensor($,"scores","nonMaxSuppressionAsync"),it=nonMaxSuppSanityCheck(rt,nt,_e,et,tt);_e=it.maxOutputSize,et=it.iouThreshold,tt=it.scoreThreshold;const st=await Promise.all([rt.data(),nt.data()]),at=st[0],ot=st[1],{selectedIndices:dt}=nonMaxSuppressionV3Impl$2(at,ot,_e,et,tt);return rt!==_&&rt.dispose(),nt!==$&&nt.dispose(),tensor1d(dt,"int32")}const nonMaxSuppressionAsync=nonMaxSuppressionAsync_;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nonMaxSuppressionWithScore_(_,$,_e,et=.5,tt=Number.NEGATIVE_INFINITY,rt=0){const nt=convertToTensor(_,"boxes","nonMaxSuppression"),it=convertToTensor($,"scores","nonMaxSuppression"),st=nonMaxSuppSanityCheck(nt,it,_e,et,tt,rt);_e=st.maxOutputSize,et=st.iouThreshold,tt=st.scoreThreshold,rt=st.softNmsSigma;const at={boxes:nt,scores:it},ot={maxOutputSize:_e,iouThreshold:et,scoreThreshold:tt,softNmsSigma:rt},dt=ENGINE.runKernel(NonMaxSuppressionV5,at,ot);return{selectedIndices:dt[0],selectedScores:dt[1]}}const nonMaxSuppressionWithScore=op({nonMaxSuppressionWithScore_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function nonMaxSuppressionWithScoreAsync_(_,$,_e,et=.5,tt=Number.NEGATIVE_INFINITY,rt=0){const nt=convertToTensor(_,"boxes","nonMaxSuppressionAsync"),it=convertToTensor($,"scores","nonMaxSuppressionAsync"),st=nonMaxSuppSanityCheck(nt,it,_e,et,tt,rt);_e=st.maxOutputSize,et=st.iouThreshold,tt=st.scoreThreshold,rt=st.softNmsSigma;const at=await Promise.all([nt.data(),it.data()]),ot=at[0],dt=at[1],{selectedIndices:ht,selectedScores:yt}=nonMaxSuppressionV5Impl$2(ot,dt,_e,et,tt,rt);return nt!==_&&nt.dispose(),it!==$&&it.dispose(),{selectedIndices:tensor1d(ht,"int32"),selectedScores:tensor1d(yt)}}const nonMaxSuppressionWithScoreAsync=nonMaxSuppressionWithScoreAsync_;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nonMaxSuppressionPadded_(_,$,_e,et=.5,tt=Number.NEGATIVE_INFINITY,rt=!1){const nt=convertToTensor(_,"boxes","nonMaxSuppression"),it=convertToTensor($,"scores","nonMaxSuppression"),st=nonMaxSuppSanityCheck(nt,it,_e,et,tt,null),at=st.maxOutputSize,ot=st.iouThreshold,dt=st.scoreThreshold,ht={boxes:nt,scores:it},yt={maxOutputSize:at,iouThreshold:ot,scoreThreshold:dt,padToMaxOutputSize:rt},vt=ENGINE.runKernel(NonMaxSuppressionV4,ht,yt);return{selectedIndices:vt[0],validOutputs:vt[1]}}const nonMaxSuppressionPadded=op({nonMaxSuppressionPadded_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function nonMaxSuppressionPaddedAsync_(_,$,_e,et=.5,tt=Number.NEGATIVE_INFINITY,rt=!1){const nt=convertToTensor(_,"boxes","nonMaxSuppressionAsync"),it=convertToTensor($,"scores","nonMaxSuppressionAsync"),st=nonMaxSuppSanityCheck(nt,it,_e,et,tt,null),at=st.maxOutputSize,ot=st.iouThreshold,dt=st.scoreThreshold,[ht,yt]=await Promise.all([nt.data(),it.data()]),{selectedIndices:vt,validOutputs:xt}=nonMaxSuppressionV4Impl$2(ht,yt,at,ot,dt,rt);return nt!==_&&nt.dispose(),it!==$&&it.dispose(),{selectedIndices:tensor1d(vt,"int32"),validOutputs:scalar(xt,"int32")}}const nonMaxSuppressionPaddedAsync=nonMaxSuppressionPaddedAsync_;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinear_(_,$,_e=!1,et=!1){const tt=convertToTensor(_,"images","resizeBilinear");assert$1(tt.rank===3||tt.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${tt.rank}.`),assert$1($.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${$}.`),assert$1(et===!1||_e===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let rt=tt,nt=!1;tt.rank===3&&(nt=!0,rt=reshape$3(tt,[1,tt.shape[0],tt.shape[1],tt.shape[2]]));const it={images:rt},st={alignCorners:_e,halfPixelCenters:et,size:$},at=ENGINE.runKernel(ResizeBilinear,it,st);return nt?reshape$3(at,[at.shape[1],at.shape[2],at.shape[3]]):at}const resizeBilinear$3=op({resizeBilinear_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighbor_(_,$,_e=!1,et=!1){const tt=convertToTensor(_,"images","resizeNearestNeighbor");assert$1(tt.rank===3||tt.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${tt.rank}.`),assert$1($.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${$}.`),assert$1(tt.dtype==="float32"||tt.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),assert$1(et===!1||_e===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let rt=tt,nt=!1;tt.rank===3&&(nt=!0,rt=reshape$3(tt,[1,tt.shape[0],tt.shape[1],tt.shape[2]]));const it={images:rt},st={alignCorners:_e,halfPixelCenters:et,size:$},at=ENGINE.runKernel(ResizeNearestNeighbor,it,st);return nt?reshape$3(at,[at.shape[1],at.shape[2],at.shape[3]]):at}const resizeNearestNeighbor$2=op({resizeNearestNeighbor_});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function threshold_(_,$="binary",_e=!1,et=.5){const tt=convertToTensor(_,"image","threshold"),rt=.2989,nt=.587,it=.114,st=tt.shape[0]*tt.shape[1];let at=mul(tensor1d([et]),255),ot,dt,ht,yt;if(assert$1(tt.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${tt.rank}.`),assert$1(tt.shape[2]===3||tt.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${tt.shape[2]}.`),assert$1(tt.dtype==="int32"||tt.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${tt.dtype}.`),assert$1($==="otsu"||$==="binary",()=>`Method must be binary or otsu, but was ${$}`),tt.shape[2]===3){[ot,dt,ht]=split$2(tt,[1,1,1],-1);const wt=mul(ot,rt),Et=mul(dt,nt),At=mul(ht,it);yt=add$3(add$3(wt,Et),At)}else yt=_;if($==="otsu"){const wt=bincount$2(cast$3(round$3(yt),"int32"),tensor([]),256);at=otsu(wt,st)}const vt=_e?lessEqual$2(yt,at):greater$3(yt,at);return cast$3(mul(vt,255),"int32")}function otsu(_,$){let _e=tensor1d([-1]),et=tensor1d([0]),tt=tensor1d([0]),rt,nt,it,st,at,ot;for(let dt=0;dt<_.size-1;dt++){rt=slice$2(_,0,dt+1),nt=slice$2(_,dt+1),at=div$1(sum$2(rt),$),ot=div$1(sum$2(nt),$);const ht=sum$2(mul(rt,range$7(0,rt.size)));it=div$1(ht,sum$2(rt));const yt=fill$2(nt.shape,rt.size),vt=add$3(range$7(0,nt.size),yt),xt=mul(nt,vt);st=div$1(sum$2(xt),sum$2(nt));const wt=sub$2(it,st),Et=sub$2(it,st),At=mul(at,ot);tt=mul(mul(At,wt),Et);const jt=greater$3(tt,et);et=where(jt,tt,et),_e=where(jt,tensor1d([dt]),_e)}return _e}const threshold$2=op({threshold_});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transform_(_,$,_e="nearest",et="constant",tt=0,rt){const nt=convertToTensor(_,"image","transform","float32"),it=convertToTensor($,"transforms","transform","float32");assert$1(nt.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${nt.rank}.`),assert$1(it.rank===2&&(it.shape[0]===nt.shape[0]||it.shape[0]===1)&&it.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),assert$1(rt==null||rt.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${rt}.`);const st={image:nt,transforms:it},at={interpolation:_e,fillMode:et,fillValue:tt,outputShape:rt};return ENGINE.runKernel(Transform,st,at)}const transform$2=op({transform_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bandPart_(_,$,_e){const et=convertToTensor(_,"a","bandPart");assert$1(et.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${et.rank}.`);const tt=et.shape,[rt,nt]=et.shape.slice(-2);let it,st;typeof $=="number"?(assert$1($%1===0,()=>`bandPart(): numLower must be an integer, got ${$}.`),assert$1($<=rt,()=>`bandPart(): numLower (${$}) must not be greater than the number of rows (${rt}).`),it=convertToTensor($<0?rt:$,"numLower","bandPart")):(assert$1($.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),it=where(less$3($,0),rt,minimum$3($,rt))),typeof _e=="number"?(assert$1(_e%1===0,()=>`bandPart(): numUpper must be an integer, got ${_e}.`),assert$1(_e<=nt,()=>`bandPart(): numUpper (${_e}) must not be greater than the number of columns (${nt}).`),st=convertToTensor(_e<0?nt:_e,"numUpper","bandPart")):(assert$1(_e.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),st=where(less$3(_e,0),nt,minimum$3(_e,nt)));const at=reshape$3(range$7(0,rt,1,"int32"),[-1,1]),ot=range$7(0,nt,1,"int32"),dt=sub$2(at,ot),ht=logicalAnd$2(lessEqual$2(dt,it),greaterEqual$2(dt,neg$2(st))),yt=zeros$2([rt,nt],et.dtype);return reshape$3(stack(unstack(reshape$3(et,[-1,rt,nt])).map(vt=>where(ht,vt,yt))),tt)}const bandPart=op({bandPart_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gramSchmidt_(_){let $;if(Array.isArray(_)){$=!1,assert$1(_!=null&&_.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const tt=_[0].shape[0];for(let rt=1;rt<_.length;++rt)assert$1(_[rt].shape[0]===tt,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${_[rt].shape[0]} vs. ${tt})`)}else $=!0,_=split$2(_,_.shape[0],0).map(tt=>squeeze(tt,[0]));assert$1(_.length<=_[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${_.length}) exceeds number of dimensions (${_[0].shape[0]}).`);const _e=[],et=_;for(let tt=0;tt<_.length;++tt)_e.push(ENGINE.tidy(()=>{let rt=et[tt];if(tt>0)for(let nt=0;nt<tt;++nt){const it=mul(sum$2(mul(_e[nt],rt)),_e[nt]);rt=sub$2(rt,it)}return div$1(rt,norm(rt,"euclidean"))}));return $?stack(_e,0):_e}const gramSchmidt=op({gramSchmidt_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qr_(_,$=!1){if(assert$1(_.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${_.rank}`),_.rank===2)return qr2d(_,$);{const _e=_.shape.slice(0,_.shape.length-2).reduce((st,at)=>st*at),et=unstack(reshape$3(_,[_e,_.shape[_.shape.length-2],_.shape[_.shape.length-1]]),0),tt=[],rt=[];et.forEach(st=>{const[at,ot]=qr2d(st,$);tt.push(at),rt.push(ot)});const nt=reshape$3(stack(tt,0),_.shape),it=reshape$3(stack(rt,0),_.shape);return[nt,it]}}function qr2d(_,$=!1){return ENGINE.tidy(()=>{assert$1(_.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${_.shape.length}D Tensor.`);const _e=_.shape[0],et=_.shape[1];let tt=eye(_e),rt=clone$1(_);const nt=tensor2d([[1]],[1,1]);let it=clone$1(nt);const st=_e>=et?et:_e;for(let at=0;at<st;++at){const ot=rt,dt=it,ht=tt;[it,rt,tt]=ENGINE.tidy(()=>{const yt=slice$2(rt,[at,at],[_e-at,1]),vt=norm(yt),xt=slice$2(rt,[at,at],[1,1]),wt=where(greater$3(xt,0),tensor2d([[-1]]),tensor2d([[1]])),Et=sub$2(xt,mul(wt,vt)),At=div$1(yt,Et);At.shape[0]===1?it=clone$1(nt):it=concat$2([nt,slice$2(At,[1,0],[At.shape[0]-1,At.shape[1]])],0);const jt=neg$2(div$1(matMul$1(wt,Et),vt)),kt=slice$2(rt,[at,0],[_e-at,et]),Lt=mul(jt,it),Bt=transpose$2(it);if(at===0)rt=sub$2(kt,matMul$1(Lt,matMul$1(Bt,kt)));else{const tr=sub$2(kt,matMul$1(Lt,matMul$1(Bt,kt)));rt=concat$2([slice$2(rt,[0,0],[at,et]),tr],0)}const Gt=transpose$2(Lt),er=slice$2(tt,[0,at],[_e,tt.shape[1]-at]);if(at===0)tt=sub$2(er,matMul$1(matMul$1(er,it),Gt));else{const tr=sub$2(er,matMul$1(matMul$1(er,it),Gt));tt=concat$2([slice$2(tt,[0,0],[_e,at]),tr],1)}return[it,rt,tt]}),dispose([ot,dt,ht])}return!$&&_e>et&&(tt=slice$2(tt,[0,0],[_e,et]),rt=slice$2(rt,[0,0],[et,et])),[tt,rt]})}const qr=op({qr_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Reduction;(function(_){_[_.NONE=0]="NONE",_[_.MEAN=1]="MEAN",_[_.SUM=2]="SUM",_[_.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Reduction||(Reduction={}));function computeWeightedLoss_(_,$,_e=Reduction.SUM_BY_NONZERO_WEIGHTS){const et=convertToTensor(_,"losses","computeWeightedLoss");let tt=null;$!=null&&(tt=convertToTensor($,"weights","computeWeightedLoss"));const rt=tt==null?et:mul(et,tt);if(_e===Reduction.NONE)return rt;if(_e===Reduction.SUM)return sum$2(rt);if(_e===Reduction.MEAN){if(tt==null)return mean$1(rt);{const nt=et.size/tt.size,it=div$1(sum$2(rt),sum$2(tt));return nt>1?div$1(it,scalar(nt)):it}}if(_e===Reduction.SUM_BY_NONZERO_WEIGHTS){if(tt==null)return div$1(sum$2(rt),scalar(et.size));{const nt=mul(tt,ones$1(et.shape)),it=cast$3(sum$2(notEqual$2(nt,scalar(0))),"float32");return div$1(sum$2(rt),it)}}throw Error(`Unknown reduction: ${_e}`)}const computeWeightedLoss$1=op({computeWeightedLoss_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function absoluteDifference_(_,$,_e,et=Reduction.SUM_BY_NONZERO_WEIGHTS){const tt=convertToTensor(_,"labels","absoluteDifference"),rt=convertToTensor($,"predictions","absoluteDifference");let nt=null;_e!=null&&(nt=convertToTensor(_e,"weights","absoluteDifference")),assertShapesMatch(tt.shape,rt.shape,"Error in absoluteDifference: ");const it=abs$2(sub$2(tt,rt));return computeWeightedLoss$1(it,nt,et)}const absoluteDifference=op({absoluteDifference_});function cosineDistance_(_,$,_e,et,tt=Reduction.SUM_BY_NONZERO_WEIGHTS){const rt=convertToTensor(_,"labels","cosineDistance"),nt=convertToTensor($,"predictions","cosineDistance");let it=null;et!=null&&(it=convertToTensor(et,"weights","cosineDistance")),assertShapesMatch(rt.shape,nt.shape,"Error in cosineDistance: ");const st=scalar(1),at=sub$2(st,sum$2(mul(rt,nt),_e,!0));return computeWeightedLoss$1(at,it,tt)}const cosineDistance=op({cosineDistance_});function hingeLoss_(_,$,_e,et=Reduction.SUM_BY_NONZERO_WEIGHTS){let tt=convertToTensor(_,"labels","hingeLoss");const rt=convertToTensor($,"predictions","hingeLoss");let nt=null;_e!=null&&(nt=convertToTensor(_e,"weights","hingeLoss")),assertShapesMatch(tt.shape,rt.shape,"Error in hingeLoss: ");const it=scalar(1);tt=sub$2(mul(scalar(2),tt),it);const st=relu$2(sub$2(it,mul(tt,rt)));return computeWeightedLoss$1(st,nt,et)}const hingeLoss=op({hingeLoss_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function huberLoss_(_,$,_e,et=1,tt=Reduction.SUM_BY_NONZERO_WEIGHTS){const rt=convertToTensor(_,"labels","huberLoss"),nt=convertToTensor($,"predictions","huberLoss");let it=null;_e!=null&&(it=convertToTensor(_e,"weights","huberLoss")),assertShapesMatch(rt.shape,nt.shape,"Error in huberLoss: ");const st=scalar(et),at=abs$2(sub$2(nt,rt)),ot=minimum$3(at,st),dt=sub$2(at,ot),ht=add$3(mul(scalar(.5),square$3(ot)),mul(st,dt));return computeWeightedLoss$1(ht,it,tt)}const huberLoss=op({huberLoss_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logLoss_(_,$,_e,et=1e-7,tt=Reduction.SUM_BY_NONZERO_WEIGHTS){const rt=convertToTensor(_,"labels","logLoss"),nt=convertToTensor($,"predictions","logLoss");let it=null;_e!=null&&(it=convertToTensor(_e,"weights","logLoss")),assertShapesMatch(rt.shape,nt.shape,"Error in logLoss: ");const st=scalar(1),at=scalar(et),ot=neg$2(mul(rt,log$3(add$3(nt,at)))),dt=mul(sub$2(st,rt),log$3(add$3(sub$2(st,nt),at))),ht=sub$2(ot,dt);return computeWeightedLoss$1(ht,it,tt)}const logLoss=op({logLoss_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function meanSquaredError_(_,$,_e,et=Reduction.SUM_BY_NONZERO_WEIGHTS){const tt=convertToTensor(_,"labels","meanSquaredError"),rt=convertToTensor($,"predictions","meanSquaredError");let nt=null;_e!=null&&(nt=convertToTensor(_e,"weights","meanSquaredError")),assertShapesMatch(tt.shape,rt.shape,"Error in meanSquaredError: ");const it=squaredDifference$2(tt,rt);return computeWeightedLoss$1(it,nt,et)}const meanSquaredError$2=op({meanSquaredError_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sigmoidCrossEntropyWithLogits_(_,$){const _e=convertToTensor(_,"labels","sigmoidCrossEntropyWithLogits"),et=convertToTensor($,"logits","sigmoidCrossEntropyWithLogits");assertShapesMatch(_e.shape,et.shape,"Error in sigmoidCrossEntropyWithLogits: ");const tt=relu$2(et),rt=mul(et,_e),nt=log1p$2(exp$3(neg$2(abs$2(et))));return add$3(sub$2(tt,rt),nt)}function sigmoidCrossEntropy_(_,$,_e,et=0,tt=Reduction.SUM_BY_NONZERO_WEIGHTS){let rt=convertToTensor(_,"multiClassLabels","sigmoidCrossEntropy");const nt=convertToTensor($,"logits","sigmoidCrossEntropy");let it=null;if(_e!=null&&(it=convertToTensor(_e,"weights","sigmoidCrossEntropy")),assertShapesMatch(rt.shape,nt.shape,"Error in sigmoidCrossEntropy: "),et>0){const at=scalar(et),ot=scalar(1),dt=scalar(.5);rt=add$3(mul(rt,sub$2(ot,at)),mul(dt,at))}const st=sigmoidCrossEntropyWithLogits_(rt,nt);return computeWeightedLoss$1(st,it,tt)}const sigmoidCrossEntropy=op({sigmoidCrossEntropy_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function softmaxCrossEntropyWithLogits_(_,$,_e=-1){if(_e===-1&&(_e=$.rank-1),_e!==$.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${$.rank} and dim was ${_e}`);return customGrad((tt,rt,nt)=>{const st=logSumExp(rt,[_e],!0),at=sub$2(cast$3(rt,"float32"),st);nt([tt,at]);const ot=neg$2(mul(at,tt));return{value:sum$2(ot,[_e]),gradFunc:(yt,vt)=>{const[xt,wt]=vt,Et=expandShapeToKeepDim(yt.shape,[_e]);return[mul(reshape$3(yt,Et),sub$2(cast$3(xt,"float32"),exp$3(wt))),mul(reshape$3(yt,Et),sub$2(exp$3(wt),cast$3(xt,"float32")))]}}})(_,$)}function softmaxCrossEntropy_(_,$,_e,et=0,tt=Reduction.SUM_BY_NONZERO_WEIGHTS){let rt=convertToTensor(_,"onehotLabels","softmaxCrossEntropy");const nt=convertToTensor($,"logits","softmaxCrossEntropy");let it=null;if(_e!=null&&(it=convertToTensor(_e,"weights","softmaxCrossEntropy")),assertShapesMatch(rt.shape,nt.shape,"Error in softmaxCrossEntropy: "),et>0){const at=scalar(et),ot=scalar(1),dt=scalar(rt.shape[1]);rt=add$3(mul(rt,sub$2(ot,at)),div$1(at,dt))}const st=softmaxCrossEntropyWithLogits_(rt,nt);return computeWeightedLoss$1(st,it,tt)}const softmaxCrossEntropy=op({softmaxCrossEntropy_});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseFillEmptyRows_(_,$,_e,et){const tt=convertToTensor(_,"indices","sparseFillEmptyRows","int32"),rt=convertToTensor($,"values","sparseFillEmptyRows"),nt=convertToTensor(_e,"denseShape","sparseFillEmptyRows","int32"),it=convertToTensor(et,"defaultValue","sparseFillEmptyRows",rt.dtype);if(tt.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${tt.shape}`);if(rt.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${rt.shape}`);if(nt.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${nt.shape}`);if(it.rank!==0)throw new Error(`Default value should be a scalar but received shape ${it.shape}`);const st={indices:tt,values:rt,denseShape:nt,defaultValue:it},at=ENGINE.runKernel(SparseFillEmptyRows,st);return{outputIndices:at[0],outputValues:at[1],emptyRowIndicator:at[2],reverseIndexMap:at[3]}}const sparseFillEmptyRows$2=op({sparseFillEmptyRows_});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseReshape_(_,$,_e){const et=convertToTensor(_,"inputIndices","sparseReshape","int32"),tt=convertToTensor($,"inputShape","sparseReshape","int32"),rt=convertToTensor(_e,"newShape","sparseReshape","int32");if(et.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${et.shape}`);if(tt.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${tt.shape}`);if(rt.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${rt.shape}`);const nt={inputIndices:et,inputShape:tt,newShape:rt},it=ENGINE.runKernel(SparseReshape,nt);return{outputIndices:it[0],outputShape:it[1]}}const sparseReshape$2=op({sparseReshape_});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseSegmentMean_(_,$,_e){const et=convertToTensor(_,"data","sparseSegmentMean"),tt=convertToTensor($,"indices","sparseSegmentMean","int32"),rt=convertToTensor(_e,"segmentIds","sparseSegmentMean","int32");if(et.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(tt.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${tt.shape}`);if(rt.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${rt.shape}`);const nt={data:et,indices:tt,segmentIds:rt};return ENGINE.runKernel(SparseSegmentMean,nt)}const sparseSegmentMean$2=op({sparseSegmentMean_});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseSegmentSum_(_,$,_e){const et=convertToTensor(_,"data","sparseSegmentSum"),tt=convertToTensor($,"indices","sparseSegmentSum","int32"),rt=convertToTensor(_e,"segmentIds","sparseSegmentSum","int32");if(et.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(tt.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${tt.shape}`);if(rt.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${rt.shape}`);const nt={data:et,indices:tt,segmentIds:rt};return ENGINE.runKernel(SparseSegmentSum,nt)}const sparseSegmentSum$2=op({sparseSegmentSum_});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stringNGrams_(_,$,_e,et,tt,rt,nt,it){const st=convertToTensor(_,"data","stringNGrams","string");if(st.dtype!=="string")throw new Error("Data must be of datatype string");if(st.shape.length!==1)throw new Error(`Data must be a vector, saw: ${st.shape}`);const at=convertToTensor($,"dataSplits","stringNGrams");if(at.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const ot={separator:_e,nGramWidths:et,leftPad:tt,rightPad:rt,padWidth:nt,preserveShortSequences:it},dt={data:st,dataSplits:at},ht=ENGINE.runKernel(StringNGrams,dt,ot);return{nGrams:ht[0],nGramsSplits:ht[1]}}const stringNGrams$2=op({stringNGrams_});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stringSplit_(_,$,_e=!0){const et=convertToTensor(_,"input","stringSplit","string"),tt=convertToTensor($,"delimiter","stringSplit","string");if(et.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${et.shape}`);if(tt.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${tt.shape}`);const rt={skipEmpty:_e},nt={input:et,delimiter:tt},it=ENGINE.runKernel(StringSplit,nt,rt);return{indices:it[0],values:it[1],shape:it[2]}}const stringSplit$2=op({stringSplit_});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stringToHashBucketFast_(_,$){const _e=convertToTensor(_,"input","stringToHashBucketFast","string"),et={numBuckets:$};if($<=0)throw new Error("Number of buckets must be at least 1");const tt={input:_e};return ENGINE.runKernel(StringToHashBucketFast,tt,et)}const stringToHashBucketFast$2=op({stringToHashBucketFast_});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function staticRegexReplace_(_,$,_e,et=!0){const tt=convertToTensor(_,"input","staticRegexReplace","string"),rt={pattern:$,rewrite:_e,replaceGlobal:et};return ENGINE.runKernel(StaticRegexReplace,{x:tt},rt)}const staticRegexReplace$2=op({staticRegexReplace_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const spectral$1={fft:fft$2,ifft:ifft$2,rfft,irfft},signal={hammingWindow,hannWindow,frame,stft},image$1={flipLeftRight,grayscaleToRGB,resizeNearestNeighbor:resizeNearestNeighbor$2,resizeBilinear:resizeBilinear$3,rgbToGrayscale,rotateWithOffset,cropAndResize:cropAndResize$3,nonMaxSuppression,nonMaxSuppressionAsync,nonMaxSuppressionWithScore,nonMaxSuppressionWithScoreAsync,nonMaxSuppressionPadded,nonMaxSuppressionPaddedAsync,threshold:threshold$2,transform:transform$2},linalg={bandPart,gramSchmidt,qr},losses={absoluteDifference,computeWeightedLoss:computeWeightedLoss$1,cosineDistance,hingeLoss,huberLoss,logLoss,meanSquaredError:meanSquaredError$2,sigmoidCrossEntropy,softmaxCrossEntropy},sparse$1={sparseFillEmptyRows:sparseFillEmptyRows$2,sparseReshape:sparseReshape$2,sparseSegmentMean:sparseSegmentMean$2,sparseSegmentSum:sparseSegmentSum$2},string$2={stringNGrams:stringNGrams$2,stringSplit:stringSplit$2,stringToHashBucketFast:stringToHashBucketFast$2,staticRegexReplace:staticRegexReplace$2};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GLOBAL_CUSTOM_OBJECT=new Map,GLOBAL_CUSTOM_NAMES=new Map;class Serializable{getClassName(){return this.constructor.className}static fromConfig($,_e){return new $(_e)}}class SerializationMap{constructor(){this.classNameMap={}}static getMap(){return SerializationMap.instance==null&&(SerializationMap.instance=new SerializationMap),SerializationMap.instance}static register($){SerializationMap.getMap().classNameMap[$.className]=[$,$.fromConfig]}}function registerClass(_,$,_e){assert$1(_.className!=null,()=>"Class being registered does not have the static className property defined."),assert$1(typeof _.className=="string",()=>"className is required to be a string, but got type "+typeof _.className),assert$1(_.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof $>"u"&&($="Custom"),typeof _e>"u"&&(_e=_.className);const et=_e,tt=$+">"+et;return SerializationMap.register(_),GLOBAL_CUSTOM_OBJECT.set(tt,_),GLOBAL_CUSTOM_NAMES.set(_,tt),_}function getRegisteredName(_){return GLOBAL_CUSTOM_NAMES.has(_)?GLOBAL_CUSTOM_NAMES.get(_):_.className}const serialization=Object.freeze(Object.defineProperty({__proto__:null,Serializable,SerializationMap,getRegisteredName,registerClass},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Optimizer extends Serializable{minimize($,_e=!1,et){const{value:tt,grads:rt}=this.computeGradients($,et);if(et!=null){const nt=et.map(it=>({name:it.name,tensor:rt[it.name]}));this.applyGradients(nt)}else this.applyGradients(rt);return dispose(rt),_e?tt:(tt.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients($,_e){return variableGrads($,_e)}dispose(){this.iterations_!=null&&dispose(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:scalar(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights($){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations($){return this.iterations_=(await $[0].tensor.data())[0],$.slice(1)}}Object.defineProperty(Optimizer,Symbol.hasInstance,{value:_=>_.minimize!=null&&_.computeGradients!=null&&_.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AdadeltaOptimizer extends Optimizer{static get className(){return"Adadelta"}constructor($,_e,et=null){super(),this.learningRate=$,this.rho=_e,this.epsilon=et,this.accumulatedGrads=[],this.accumulatedUpdates=[],et==null&&(this.epsilon=ENGINE.backend.epsilon())}applyGradients($){(Array.isArray($)?$.map(et=>et.name):Object.keys($)).forEach((et,tt)=>{const rt=ENGINE.registeredVariables[et],nt=!1;this.accumulatedGrads[tt]==null&&(this.accumulatedGrads[tt]={originalName:`${et}/accum_grad`,variable:tidy(()=>zerosLike$2(rt).variable(nt))}),this.accumulatedUpdates[tt]==null&&(this.accumulatedUpdates[tt]={originalName:`${et}/accum_var`,variable:tidy(()=>zerosLike$2(rt).variable(nt))});const it=Array.isArray($)?$[tt].tensor:$[et];if(it==null)return;const st=this.accumulatedGrads[tt].variable,at=this.accumulatedUpdates[tt].variable;tidy(()=>{const ot=add$3(mul(st,this.rho),mul(square$3(it),1-this.rho)),dt=mul(div$1(sqrt$4(add$3(at,this.epsilon)),sqrt$4(add$3(st,this.epsilon))),it),ht=add$3(mul(at,this.rho),mul(square$3(dt),1-this.rho));st.assign(ot),at.assign(ht);const yt=add$3(mul(dt,-this.learningRate),rt);rt.assign(yt)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(dispose(this.accumulatedGrads.map($=>$.variable)),dispose(this.accumulatedUpdates.map($=>$.variable)))}async getWeights(){const $=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat($.map(_e=>({name:_e.originalName,tensor:_e.variable})))}async setWeights($){$=await this.extractIterations($);const _e=$.length/2,et=!1;this.accumulatedGrads=$.slice(0,_e).map(tt=>({originalName:tt.name,variable:tt.tensor.variable(et)})),this.accumulatedUpdates=$.slice(_e,_e*2).map(tt=>({originalName:tt.name,variable:tt.tensor.variable(et)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig($,_e){return new $(_e.learningRate,_e.rho,_e.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AdagradOptimizer extends Optimizer{static get className(){return"Adagrad"}constructor($,_e=.1){super(),this.learningRate=$,this.initialAccumulatorValue=_e,this.accumulatedGrads=[]}applyGradients($){(Array.isArray($)?$.map(et=>et.name):Object.keys($)).forEach((et,tt)=>{const rt=ENGINE.registeredVariables[et];this.accumulatedGrads[tt]==null&&(this.accumulatedGrads[tt]={originalName:`${et}/accumulator`,variable:tidy(()=>fill$2(rt.shape,this.initialAccumulatorValue).variable(!1))});const nt=Array.isArray($)?$[tt].tensor:$[et];if(nt==null)return;const it=this.accumulatedGrads[tt].variable;tidy(()=>{const st=add$3(it,square$3(nt));it.assign(st);const at=add$3(mul(div$1(nt,sqrt$4(add$3(st,ENGINE.backend.epsilon()))),-this.learningRate),rt);rt.assign(at)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&dispose(this.accumulatedGrads.map($=>$.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map($=>({name:$.originalName,tensor:$.variable})))}async setWeights($){$=await this.extractIterations($);const _e=!1;this.accumulatedGrads=$.map(et=>({originalName:et.name,variable:et.tensor.variable(_e)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig($,_e){return new $(_e.learningRate,_e.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AdamOptimizer extends Optimizer{static get className(){return"Adam"}constructor($,_e,et,tt=null){super(),this.learningRate=$,this.beta1=_e,this.beta2=et,this.epsilon=tt,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],tidy(()=>{this.accBeta1=scalar(_e).variable(),this.accBeta2=scalar(et).variable()}),tt==null&&(this.epsilon=ENGINE.backend.epsilon())}applyGradients($){const _e=Array.isArray($)?$.map(et=>et.name):Object.keys($);tidy(()=>{const et=sub$2(1,this.accBeta1),tt=sub$2(1,this.accBeta2);_e.forEach((rt,nt)=>{const it=ENGINE.registeredVariables[rt],st=!1;this.accumulatedFirstMoment[nt]==null&&(this.accumulatedFirstMoment[nt]={originalName:`${rt}/m`,variable:tidy(()=>zerosLike$2(it).variable(st))}),this.accumulatedSecondMoment[nt]==null&&(this.accumulatedSecondMoment[nt]={originalName:`${rt}/v`,variable:tidy(()=>zerosLike$2(it).variable(st))});const at=Array.isArray($)?$[nt].tensor:$[rt];if(at==null)return;const ot=this.accumulatedFirstMoment[nt].variable,dt=this.accumulatedSecondMoment[nt].variable,ht=add$3(mul(ot,this.beta1),mul(at,1-this.beta1)),yt=add$3(mul(dt,this.beta2),mul(square$3(at),1-this.beta2)),vt=div$1(ht,et),xt=div$1(yt,tt);ot.assign(ht),dt.assign(yt);const wt=add$3(mul(div$1(vt,add$3(sqrt$4(xt),this.epsilon)),-this.learningRate),it);it.assign(wt)}),this.accBeta1.assign(mul(this.accBeta1,this.beta1)),this.accBeta2.assign(mul(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&dispose(this.accumulatedFirstMoment.map($=>$.variable)),this.accumulatedSecondMoment!=null&&dispose(this.accumulatedSecondMoment.map($=>$.variable))}async getWeights(){const $=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat($.map(_e=>({name:_e.originalName,tensor:_e.variable})))}async setWeights($){$=await this.extractIterations($),tidy(()=>{this.accBeta1.assign(pow$3(this.beta1,this.iterations_+1)),this.accBeta2.assign(pow$3(this.beta2,this.iterations_+1))});const _e=$.length/2,et=!1;this.accumulatedFirstMoment=$.slice(0,_e).map(tt=>({originalName:tt.name,variable:tt.tensor.variable(et)})),this.accumulatedSecondMoment=$.slice(_e,_e*2).map(tt=>({originalName:tt.name,variable:tt.tensor.variable(et)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig($,_e){return new $(_e.learningRate,_e.beta1,_e.beta2,_e.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AdamaxOptimizer extends Optimizer{static get className(){return"Adamax"}constructor($,_e,et,tt=null,rt=0){super(),this.learningRate=$,this.beta1=_e,this.beta2=et,this.epsilon=tt,this.decay=rt,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],tidy(()=>{this.iteration=scalar(0).variable(),this.accBeta1=scalar(_e).variable()}),tt==null&&(this.epsilon=ENGINE.backend.epsilon())}applyGradients($){const _e=Array.isArray($)?$.map(et=>et.name):Object.keys($);tidy(()=>{const et=sub$2(1,this.accBeta1),tt=div$1(-this.learningRate,add$3(mul(this.iteration,this.decay),1));_e.forEach((rt,nt)=>{const it=ENGINE.registeredVariables[rt],st=!1;this.accumulatedFirstMoment[nt]==null&&(this.accumulatedFirstMoment[nt]={originalName:`${rt}/m`,variable:zerosLike$2(it).variable(st)}),this.accumulatedWeightedInfNorm[nt]==null&&(this.accumulatedWeightedInfNorm[nt]={originalName:`${rt}/v`,variable:zerosLike$2(it).variable(st)});const at=Array.isArray($)?$[nt].tensor:$[rt];if(at==null)return;const ot=this.accumulatedFirstMoment[nt].variable,dt=this.accumulatedWeightedInfNorm[nt].variable,ht=add$3(mul(ot,this.beta1),mul(at,1-this.beta1)),yt=mul(dt,this.beta2),vt=abs$2(at),xt=maximum$3(yt,vt);ot.assign(ht),dt.assign(xt);const wt=add$3(mul(div$1(tt,et),div$1(ht,add$3(xt,this.epsilon))),it);it.assign(wt)}),this.iteration.assign(add$3(this.iteration,1)),this.accBeta1.assign(mul(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&dispose(this.accumulatedFirstMoment.map($=>$.variable)),this.accumulatedWeightedInfNorm!=null&&dispose(this.accumulatedWeightedInfNorm.map($=>$.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights($){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig($,_e){return new $(_e.learningRate,_e.beta1,_e.beta2,_e.epsilon,_e.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SGDOptimizer extends Optimizer{static get className(){return"SGD"}constructor($){super(),this.learningRate=$,this.setLearningRate($)}applyGradients($){(Array.isArray($)?$.map(et=>et.name):Object.keys($)).forEach((et,tt)=>{const rt=Array.isArray($)?$[tt].tensor:$[et];if(rt==null)return;const nt=ENGINE.registeredVariables[et];tidy(()=>{const it=add$3(mul(this.c,rt),nt);nt.assign(it)})}),this.incrementIterations()}setLearningRate($){this.learningRate=$,this.c!=null&&this.c.dispose(),this.c=keep(scalar(-$))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights($){if($=await this.extractIterations($),$.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig($,_e){return new $(_e.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MomentumOptimizer extends SGDOptimizer{static get className(){return"Momentum"}constructor($,_e,et=!1){super($),this.learningRate=$,this.momentum=_e,this.useNesterov=et,this.accumulations=[],this.m=scalar(this.momentum)}applyGradients($){(Array.isArray($)?$.map(et=>et.name):Object.keys($)).forEach((et,tt)=>{const rt=ENGINE.registeredVariables[et];this.accumulations[tt]==null&&(this.accumulations[tt]={originalName:`${et}/momentum`,variable:tidy(()=>zerosLike$2(rt).variable(!1))});const nt=this.accumulations[tt].variable,it=Array.isArray($)?$[tt].tensor:$[et];it!=null&&tidy(()=>{let st;const at=add$3(mul(this.m,nt),it);this.useNesterov?st=add$3(mul(this.c,add$3(it,mul(at,this.m))),rt):st=add$3(mul(this.c,at),rt),nt.assign(at),rt.assign(st)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&dispose(this.accumulations.map($=>$.variable))}setMomentum($){this.momentum=$}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map($=>({name:$.originalName,tensor:$.variable})))}async setWeights($){$=await this.extractIterations($);const _e=!1;this.accumulations=$.map(et=>({originalName:et.name,variable:et.tensor.variable(_e)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig($,_e){return new $(_e.learningRate,_e.momentum,_e.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RMSPropOptimizer extends Optimizer{static get className(){return"RMSProp"}constructor($,_e=.9,et=0,tt=null,rt=!1){if(super(),this.learningRate=$,this.decay=_e,this.momentum=et,this.epsilon=tt,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=rt,tt==null&&(this.epsilon=ENGINE.backend.epsilon()),$==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients($){(Array.isArray($)?$.map(et=>et.name):Object.keys($)).forEach((et,tt)=>{const rt=ENGINE.registeredVariables[et],nt=!1;this.accumulatedMeanSquares[tt]==null&&(this.accumulatedMeanSquares[tt]={originalName:`${et}/rms`,variable:tidy(()=>zerosLike$2(rt).variable(nt))}),this.accumulatedMoments[tt]==null&&(this.accumulatedMoments[tt]={originalName:`${et}/momentum`,variable:tidy(()=>zerosLike$2(rt).variable(nt))}),this.accumulatedMeanGrads[tt]==null&&this.centered&&(this.accumulatedMeanGrads[tt]={originalName:`${et}/mg`,variable:tidy(()=>zerosLike$2(rt).variable(nt))});const it=Array.isArray($)?$[tt].tensor:$[et];if(it==null)return;const st=this.accumulatedMeanSquares[tt].variable,at=this.accumulatedMoments[tt].variable;tidy(()=>{const ot=add$3(mul(st,this.decay),mul(square$3(it),1-this.decay));if(this.centered){const dt=this.accumulatedMeanGrads[tt].variable,ht=add$3(mul(dt,this.decay),mul(it,1-this.decay)),yt=div$1(mul(it,this.learningRate),sqrt$4(sub$2(ot,add$3(square$3(ht),this.epsilon)))),vt=add$3(mul(at,this.momentum),yt);st.assign(ot),dt.assign(ht),at.assign(vt);const xt=sub$2(rt,vt);rt.assign(xt)}else{const dt=add$3(mul(st,this.decay),mul(square$3(it),1-this.decay)),ht=add$3(mul(at,this.momentum),div$1(mul(it,this.learningRate),sqrt$4(add$3(dt,this.epsilon))));st.assign(dt),at.assign(ht);const yt=sub$2(rt,ht);rt.assign(yt)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&dispose(this.accumulatedMeanSquares.map($=>$.variable)),this.accumulatedMeanGrads!=null&&this.centered&&dispose(this.accumulatedMeanGrads.map($=>$.variable)),this.accumulatedMoments!=null&&dispose(this.accumulatedMoments.map($=>$.variable))}async getWeights(){const $=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&$.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat($.map(_e=>({name:_e.originalName,tensor:_e.variable})))}async setWeights($){$=await this.extractIterations($);const _e=this.centered?$.length/3:$.length/2,et=!1;this.accumulatedMeanSquares=$.slice(0,_e).map(tt=>({originalName:tt.name,variable:tt.tensor.variable(et)})),this.accumulatedMoments=$.slice(_e,_e*2).map(tt=>({originalName:tt.name,variable:tt.tensor.variable(et)})),this.centered&&(this.accumulatedMeanGrads=$.slice(_e*2,_e*3).map(tt=>({originalName:tt.name,variable:tt.tensor.variable(et)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig($,_e){return new $(_e.learningRate,_e.decay,_e.momentum,_e.epsilon,_e.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OPTIMIZERS=[AdadeltaOptimizer,AdagradOptimizer,AdamOptimizer,AdamaxOptimizer,MomentumOptimizer,RMSPropOptimizer,SGDOptimizer];function registerOptimizers(){for(const _ of OPTIMIZERS)registerClass(_)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DEFAULT_FILE_NAME_PREFIX="model",DEFAULT_JSON_EXTENSION_NAME=".json",DEFAULT_WEIGHT_DATA_EXTENSION_NAME=".weights.bin";function defer(_){return new Promise($=>setTimeout($)).then(_)}class BrowserDownloads{constructor($){if(!env().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");$.startsWith(BrowserDownloads.URL_SCHEME)&&($=$.slice(BrowserDownloads.URL_SCHEME.length)),($==null||$.length===0)&&($=DEFAULT_FILE_NAME_PREFIX),this.modelJsonFileName=$+DEFAULT_JSON_EXTENSION_NAME,this.weightDataFileName=$+DEFAULT_WEIGHT_DATA_EXTENSION_NAME}async save($){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const _e=CompositeArrayBuffer.join($.weightData),et=window.URL.createObjectURL(new Blob([_e],{type:"application/octet-stream"}));if($.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const tt=[{paths:["./"+this.weightDataFileName],weights:$.weightSpecs}],rt=getModelJSONForModelArtifacts($,tt),nt=window.URL.createObjectURL(new Blob([JSON.stringify(rt)],{type:"application/json"})),it=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(it.download=this.modelJsonFileName,it.href=nt,await defer(()=>it.dispatchEvent(new MouseEvent("click"))),$.weightData!=null){const st=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;st.download=this.weightDataFileName,st.href=et,await defer(()=>st.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:getModelArtifactsInfoForJSON($)}}}}BrowserDownloads.URL_SCHEME="downloads://";class BrowserFiles{constructor($){if($==null||$.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${$}`);this.jsonFile=$[0],this.weightsFiles=$.slice(1)}async load(){return new Promise(($,_e)=>{const et=new FileReader;et.onload=tt=>{const rt=JSON.parse(tt.target.result),nt=rt.modelTopology;if(nt==null){_e(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(rt.weightsManifest==null){_e(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){$({modelTopology:nt});return}const st=getModelArtifactsForJSON(rt,at=>this.loadWeights(at));$(st)},et.onerror=tt=>_e(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),et.readAsText(this.jsonFile)})}loadWeights($){const _e=[],et=[];for(const nt of $)_e.push(...nt.weights),et.push(...nt.paths);const tt=this.checkManifestAndWeightFiles($),rt=et.map(nt=>this.loadWeightsFile(nt,tt[nt]));return Promise.all(rt).then(nt=>[_e,nt])}loadWeightsFile($,_e){return new Promise((et,tt)=>{const rt=new FileReader;rt.onload=nt=>{const it=nt.target.result;et(it)},rt.onerror=nt=>tt(`Failed to weights data from file of path '${$}'.`),rt.readAsArrayBuffer(_e)})}checkManifestAndWeightFiles($){const _e=[],et=this.weightsFiles.map(rt=>basename(rt.name)),tt={};for(const rt of $)rt.paths.forEach(nt=>{const it=basename(nt);if(_e.indexOf(it)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${it}'`);if(_e.push(it),et.indexOf(it)===-1)throw new Error(`Weight file with basename '${it}' is not provided.`);tt[nt]=this.weightsFiles[et.indexOf(it)]});if(_e.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${_e.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return tt}}const browserDownloadsRouter=_=>env().getBool("IS_BROWSER")&&!Array.isArray(_)&&_.startsWith(BrowserDownloads.URL_SCHEME)?browserDownloads(_.slice(BrowserDownloads.URL_SCHEME.length)):null;IORouterRegistry.registerSaveRouter(browserDownloadsRouter);function browserDownloads(_="model"){return new BrowserDownloads(_)}function browserFiles(_){return new BrowserFiles(_)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function monitorPromisesProgress(_,$,_e,et){nt(_),_e=_e??0,et=et??1,it(_e,et);let tt=0;const rt=st=>(st.then(at=>{const ot=_e+ ++tt/_.length*(et-_e);return $(ot),at}),st);function nt(st){assert$1(st!=null&&Array.isArray(st)&&st.length>0,()=>"promises must be a none empty array")}function it(st,at){assert$1(st>=0&&st<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${st}`),assert$1(at>=0&&at<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${at}`),assert$1(at>=st,()=>`startFraction must be no more than endFraction, but got startFraction ${st} and endFraction ${at}`)}return Promise.all(_.map(rt))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function loadWeightsAsArrayBuffer(_,$){$==null&&($={});const _e=$.fetchFunc==null?env().platform.fetch:$.fetchFunc,et=_.map(dt=>_e(dt,$.requestInit,{isBinary:!0})),it=($.onProgress==null?await Promise.all(et):await monitorPromisesProgress(et,$.onProgress,0,.5)).map(dt=>dt.arrayBuffer());return $.onProgress==null?await Promise.all(it):await monitorPromisesProgress(it,$.onProgress,.5,1)}function streamWeights(_,$){var _e;const et=$.fetchFunc==null?env().platform.fetch:$.fetchFunc;let tt=0,rt;return(_e=$.onProgress)===null||_e===void 0||_e.call($,0),new ReadableStream({pull:async nt=>{for(var it;tt<_.length;){rt||(rt=(await et(_[tt],$.requestInit,{isBinary:!0})).body.getReader());const{done:st,value:at}=await rt.read();if(st){tt++,rt=void 0,(it=$.onProgress)===null||it===void 0||it.call($,tt/_.length);continue}nt.enqueue(at);return}nt.close()}})}async function loadWeights(_,$="",_e,et){return weightsLoaderFactory(nt=>loadWeightsAsArrayBuffer(nt,{requestInit:et}))(_,$,_e)}function weightsLoaderFactory(_){return async($,_e="",et)=>{const tt=$.map(()=>!1),rt={},nt=et!=null?et.map(()=>!1):[],it=[];if($.forEach((yt,vt)=>{let xt=0;yt.weights.forEach(wt=>{const Et="quantization"in wt?wt.quantization.dtype:wt.dtype,At=DTYPE_VALUE_SIZE_MAP[Et]*sizeFromShape(wt.shape),jt=()=>{tt[vt]=!0,rt[vt]==null&&(rt[vt]=[]),rt[vt].push({manifestEntry:wt,groupOffset:xt,sizeBytes:At})};et!=null?et.forEach((kt,Lt)=>{kt===wt.name&&(jt(),nt[Lt]=!0)}):jt(),it.push(wt.name),xt+=At})}),!nt.every(yt=>yt)){const yt=et.filter((vt,xt)=>!nt[xt]);throw new Error(`Could not find weights in manifest with names: ${yt.join(", ")}. 
Manifest JSON has weights with names: ${it.join(", ")}.`)}const st=tt.reduce((yt,vt,xt)=>(vt&&yt.push(xt),yt),[]),at=[];st.forEach(yt=>{$[yt].paths.forEach(vt=>{const xt=_e+(_e.endsWith("/")?"":"/")+vt;at.push(xt)})});const ot=await _(at),dt={};let ht=0;return st.forEach(yt=>{const vt=$[yt].paths.length,xt=new CompositeArrayBuffer(ot.slice(ht,ht+vt));rt[yt].forEach(Et=>{const At=xt.slice(Et.groupOffset,Et.groupOffset+Et.sizeBytes),jt=decodeWeights(At,[Et.manifestEntry]);for(const kt in jt)dt[kt]=jt[kt]}),ht+=vt}),dt}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OCTET_STREAM_MIME_TYPE="application/octet-stream",JSON_TYPE="application/json";class HTTPRequest{constructor($,_e){if(this.DEFAULT_METHOD="POST",_e==null&&(_e={}),this.weightPathPrefix=_e.weightPathPrefix,this.weightUrlConverter=_e.weightUrlConverter,_e.fetchFunc!=null?(assert$1(typeof _e.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=_e.fetchFunc):this.fetch=env().platform.fetch,assert$1($!=null&&$.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray($)&&assert$1($.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${$.length}).`),this.path=$,_e.requestInit!=null&&_e.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=_e.requestInit||{},this.loadOptions=_e}async save($){if($.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const _e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);_e.body=new FormData;const et=[{paths:["./model.weights.bin"],weights:$.weightSpecs}],tt=getModelJSONForModelArtifacts($,et);if(_e.body.append("model.json",new Blob([JSON.stringify(tt)],{type:JSON_TYPE}),"model.json"),$.weightData!=null){const nt=CompositeArrayBuffer.join($.weightData);_e.body.append("model.weights.bin",new Blob([nt],{type:OCTET_STREAM_MIME_TYPE}),"model.weights.bin")}const rt=await this.fetch(this.path,_e);if(rt.ok)return{modelArtifactsInfo:getModelArtifactsInfoForJSON($),responses:[rt]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${rt.status}.`)}async loadModelJSON(){const $=await this.fetch(this.path,this.requestInit);if(!$.ok)throw new Error(`Request to ${this.path} failed with status code ${$.status}. Please verify this URL points to the model JSON of the model to load.`);let _e;try{_e=await $.json()}catch{let nt=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?nt+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":nt+=" Please make sure the server is serving valid JSON for this request.",new Error(nt)}const et=_e.modelTopology,tt=_e.weightsManifest;if(et==null&&tt==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return _e}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const $=await this.loadModelJSON();return getModelArtifactsForJSON($,_e=>this.loadWeights(_e))}async loadStream(){const $=await this.loadModelJSON(),_e=await this.getWeightUrls($.weightsManifest),et=getWeightSpecs($.weightsManifest),tt=()=>streamWeights(_e,this.loadOptions);return Object.assign(Object.assign({},$),{weightSpecs:et,getWeightStream:tt})}async getWeightUrls($){const _e=Array.isArray(this.path)?this.path[1]:this.path,[et,tt]=parseUrl(_e),rt=this.weightPathPrefix||et,nt=[],it=[];for(const st of $)for(const at of st.paths)this.weightUrlConverter!=null?it.push(this.weightUrlConverter(at)):nt.push(rt+at+tt);return this.weightUrlConverter&&nt.push(...await Promise.all(it)),nt}async loadWeights($){const _e=await this.getWeightUrls($),et=getWeightSpecs($),tt=await loadWeightsAsArrayBuffer(_e,this.loadOptions);return[et,tt]}}HTTPRequest.URL_SCHEME_REGEX=/^https?:\/\//;function parseUrl(_){const $=_.lastIndexOf("/"),_e=_.lastIndexOf("?"),et=_.substring(0,$),tt=_e>$?_.substring(_e):"";return[et+"/",tt]}function isHTTPScheme(_){return _.match(HTTPRequest.URL_SCHEME_REGEX)!=null}const httpRouter=(_,$)=>{if(typeof fetch>"u"&&($==null||$.fetchFunc==null))return null;{let _e=!0;if(Array.isArray(_)?_e=_.every(et=>isHTTPScheme(et)):_e=isHTTPScheme(_),_e)return http(_,$)}return null};IORouterRegistry.registerSaveRouter(httpRouter);IORouterRegistry.registerLoadRouter(httpRouter);function http(_,$){return new HTTPRequest(_,$)}function browserHTTPRequest(_,$){return http(_,$)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PassthroughLoader{constructor($){this.modelArtifacts=$}load(){return this.modelArtifacts}}class PassthroughSaver{constructor($){this.saveHandler=$}save($){return this.saveHandler($)}}class PassthroughAsync{constructor($){$.load&&(this.load=()=>Promise.resolve($.load())),$.save&&(this.save=_e=>Promise.resolve($.save(_e)))}}function fromMemory(_,$,_e,et){const tt=arguments;return new PassthroughAsync(fromMemorySync(...tt))}function fromMemorySync(_,$,_e,et){return arguments.length===1?_.modelTopology!=null||_.weightSpecs!=null?new PassthroughLoader(_):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new PassthroughLoader({modelTopology:_})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new PassthroughLoader({modelTopology:_,weightSpecs:$,weightData:_e,trainingConfig:et}))}function withSaveHandler(_){return new PassthroughSaver(_)}function withSaveHandlerSync(_){return new PassthroughSaver(_)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const io=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer,browserFiles,browserHTTPRequest,concatenateArrayBuffers,copyModel,decodeWeights,decodeWeightsStream,encodeWeights,fromMemory,fromMemorySync,getLoadHandlers,getModelArtifactsForJSON,getModelArtifactsForJSONSync,getModelArtifactsInfoForJSON,getSaveHandlers,getWeightSpecs,http,isHTTPScheme,listModels,loadWeights,moveModel,registerLoadRouter,registerSaveRouter,removeModel,weightsLoaderFactory,withSaveHandler,withSaveHandlerSync},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function confusionMatrix_(_,$,_e){const et=convertToTensor(_,"labels","confusionMatrix"),tt=convertToTensor($,"predictions","confusionMatrix");assert$1(_e==null||_e>0&&Number.isInteger(_e),()=>`If provided, numClasses must be a positive integer, but got ${_e}`),assert$1(et.rank===1,()=>`Expected the rank of labels to be 1, but got ${et.rank}`),assert$1(tt.rank===1,()=>`Expected the rank of predictions to be 1, but got ${tt.rank}`),assert$1(et.shape[0]===tt.shape[0],()=>`Mismatch in the number of examples: ${et.shape[0]} vs. ${tt.shape[0]}. Labels and predictions should have the same number of elements.`),assert$1(_e>0&&Number.isInteger(_e),()=>`numClasses is required to be a positive integer, but got ${_e}`);const rt=oneHot$2(cast$3(et,"int32"),_e),nt=oneHot$2(cast$3(tt,"int32"),_e),it=transpose$2(rt),st=matMul$1(it,nt);return cast$3(st,"int32")}const confusionMatrix=op({confusionMatrix_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const math=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let fromPixels2DContext$1,hasToPixelsWarned=!1;function fromPixels_(_,$=3){if($>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(_==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let _e=!1,et=!1,tt=!1,rt=!1,nt=!1,it=!1;if(_.data instanceof Uint8Array)_e=!0;else if(typeof ImageData<"u"&&_ instanceof ImageData)et=!0;else if(typeof HTMLVideoElement<"u"&&_ instanceof HTMLVideoElement)tt=!0;else if(typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement)rt=!0;else if(_.getContext!=null)nt=!0;else if(typeof ImageBitmap<"u"&&_ instanceof ImageBitmap)it=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${_.constructor.name}`);if(getKernel(FromPixels,ENGINE.backendName)!=null){const vt={pixels:_},xt={numChannels:$};return ENGINE.runKernel(FromPixels,vt,xt)}const[at,ot]=tt?[_.videoWidth,_.videoHeight]:[_.width,_.height];let dt;if(nt)dt=_.getContext("2d").getImageData(0,0,at,ot).data;else if(et||_e)dt=_.data;else if(rt||tt||it){if(fromPixels2DContext$1==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")fromPixels2DContext$1=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else fromPixels2DContext$1=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});fromPixels2DContext$1.canvas.width=at,fromPixels2DContext$1.canvas.height=ot,fromPixels2DContext$1.drawImage(_,0,0,at,ot),dt=fromPixels2DContext$1.getImageData(0,0,at,ot).data}let ht;if($===4)ht=new Int32Array(dt);else{const vt=at*ot;ht=new Int32Array(vt*$);for(let xt=0;xt<vt;xt++)for(let wt=0;wt<$;++wt)ht[xt*$+wt]=dt[xt*4+wt]}return tensor3d(ht,[ot,at,$],"int32")}function isPixelData(_){return _!=null&&_.data instanceof Uint8Array}function isImageBitmapFullySupported(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function isNonEmptyPixels(_){return _!=null&&_.width!==0&&_.height!==0}function canWrapPixelsToImageBitmap(_){return isImageBitmapFullySupported()&&!(_ instanceof ImageBitmap)&&isNonEmptyPixels(_)&&!isPixelData(_)}async function fromPixelsAsync(_,$=3){let _e=null;if(env().getBool("WRAP_TO_IMAGEBITMAP")&&canWrapPixelsToImageBitmap(_)){let et;try{et=await createImageBitmap(_,{premultiplyAlpha:"none"})}catch{et=null}et!=null&&et.width===_.width&&et.height===_.height?_e=et:_e=_}else _e=_;return fromPixels_(_e,$)}function validateImgTensor(_){if(_.rank!==2&&_.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${_.rank}.`);const $=_.rank===2?1:_.shape[2];if($>4||$===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${$}`);if(_.dtype!=="float32"&&_.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${_.dtype}. Please use float32 or int32 tensors.`)}function validateImageOptions(_){const $=(_==null?void 0:_.alpha)||1;if($>1||$<0)throw new Error(`Alpha value ${$} is suppoed to be in range [0 - 1].`)}async function toPixels(_,$){let _e=convertToTensor(_,"img","toPixels");if(!(_ instanceof Tensor)){const at=_e;_e=cast$3(at,"int32"),at.dispose()}validateImgTensor(_e);const[et,tt]=_e.shape.slice(0,2),rt=_e.rank===2?1:_e.shape[2],nt=await _e.data(),it=_e.dtype==="float32"?255:1,st=new Uint8ClampedArray(tt*et*4);for(let at=0;at<et*tt;++at){const ot=[0,0,0,255];for(let ht=0;ht<rt;ht++){const yt=nt[at*rt+ht];if(_e.dtype==="float32"){if(yt<0||yt>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${yt}.`)}else if(_e.dtype==="int32"&&(yt<0||yt>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${yt}.`);rt===1?(ot[0]=yt*it,ot[1]=yt*it,ot[2]=yt*it):ot[ht]=yt*it}const dt=at*4;st[dt+0]=Math.round(ot[0]),st[dt+1]=Math.round(ot[1]),st[dt+2]=Math.round(ot[2]),st[dt+3]=Math.round(ot[3])}if($!=null){hasToPixelsWarned||getKernel(Draw,ENGINE.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),hasToPixelsWarned=!0),$.width=tt,$.height=et;const at=$.getContext("2d"),ot=new ImageData(st,tt,et);at.putImageData(ot,0,0)}return _e!==_&&_e.dispose(),st}function draw$1(_,$,_e){let et=convertToTensor(_,"img","draw");if(!(_ instanceof Tensor)){const nt=et;et=cast$3(nt,"int32"),nt.dispose()}validateImgTensor(et),validateImageOptions(_e==null?void 0:_e.imageOptions);const tt={image:et},rt={canvas:$,options:_e};ENGINE.runKernel(Draw,tt,rt)}const fromPixels$1=op({fromPixels_}),browser=Object.freeze(Object.defineProperty({__proto__:null,draw:draw$1,fromPixels:fromPixels$1,fromPixelsAsync,toPixels},Symbol.toStringTag,{value:"Module"}));function prepareAndValidate(_,$){const _e=_.shape.length,et=$.shape.length;if(_e<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${_e}.`);if(et<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${et}.`);if($.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${$.dtype}.`);if($.shape[et-1]>_e)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${$.shape[et-1]} vs. ${_e}`);if(sizeFromShape(_.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${_.shape}.`);const tt=$.shape,rt=tt[tt.length-1];let nt=1;for(let dt=0;dt<tt.length-1;++dt)nt*=tt[dt];const it=_.shape,st=tt.slice();st.pop();let at=1;for(let dt=rt;dt<_e;++dt)at*=it[dt],st.push(it[dt]);const ot=[...computeStrides(_.shape).map(dt=>dt/at),1].slice(0,rt);return[st,nt,at,ot]}const gather_nd_util=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NEW_AXIS=-2,SHRINK_AXIS=-1;function assertParamsValid(_,$,_e){const et=_.shape.length;assert$1(et===$.length,()=>`Error in slice${et}D: Length of begin ${$} must match the rank of the array (${et}).`),assert$1(et===_e.length,()=>`Error in slice${et}D: Length of size ${_e} must match the rank of the array (${et}).`);for(let tt=0;tt<et;++tt)assert$1($[tt]+_e[tt]<=_.shape[tt],()=>`Error in slice${et}D: begin[${tt}] + size[${tt}] (${$[tt]+_e[tt]}) would overflow input.shape[${tt}] (${_.shape[tt]})`)}function maskToAxes(_){const $=[];let _e=0;for(;_>0;)_&1&&$.push(_e),_/=2,_e++;return $}function computeOutShape$2(_,$,_e){const et=[];for(let tt=0;tt<_.length;tt++)et[tt]=Math.ceil(($[tt]-_[tt])/_e[tt]);return et}function stridesWithElidedDims(_,$,_e,et){const tt=[..._];for(let rt=tt.length;rt<et.length;rt++)tt.push(1);for(let rt=0;rt<_e;rt++)rt===0?tt[$]=1:(tt.splice($,0,1),tt.pop());return tt}function unnormalizeAxis(_,$,_e){return _e<=_?_e:_e-($-1)}function getElidedAxes(_,$){const _e=[];for(let et=0;et<_;et++)_e.push($+et);return _e}function getNormalizedAxes(_,$,_e,et,tt,rt,nt,it,st){const at=_.length;let ot=new Array(at),dt=new Array(at),ht=new Array(at);if($.length&&_e>0){const yt=$[0],vt=_e+1;ot=startIndicesWithElidedDims(nt,yt,vt,et,_),dt=stopIndicesWithElidedDims(it,yt,vt,tt,_),ht=stridesWithElidedDims(rt,yt,vt,_)}else for(let yt=0;yt<at;yt++)ot[yt]=startForAxis(nt,et,rt,_,yt,st),dt[yt]=stopForAxis(it,tt,rt,_,yt,st),ht[yt]=stridesForAxis(rt,yt,st);return{begin:ot,end:dt,strides:ht}}function startIndicesWithElidedDims(_,$,_e,et,tt){const rt=[...tt],nt=getElidedAxes(_e,$);for(let it=0;it<rt.length;it++)if(nt.indexOf(it)>-1)rt[it]=0;else{const st=unnormalizeAxis($,_e,it);let at=et[st];_&1<<st&&(at=0),rt[it]=at}return rt}function stopIndicesWithElidedDims(_,$,_e,et,tt){const rt=[...tt],nt=getElidedAxes(_e,$);for(let it=0;it<rt.length;it++)if(nt.indexOf(it)>-1)rt[it]=Number.MAX_SAFE_INTEGER;else{const st=unnormalizeAxis($,_e,it);let at=et[st];_&1<<st&&(at=Number.MAX_SAFE_INTEGER),rt[it]=at}for(let it=0;it<rt.length;it++){const st=tt[it];rt[it]<0&&(rt[it]+=st),rt[it]=clamp(0,rt[it],tt[it])}return rt}function stridesForAxis(_,$,_e){let et=_[$];return(_e&1<<$||et==null)&&(et=1),et}function startForAxis(_,$,_e,et,tt,rt){let nt=$[tt];const it=_e[tt]||1;(_&1<<tt||rt&1<<tt||nt==null)&&(it>0?nt=Number.MIN_SAFE_INTEGER:nt=Number.MAX_SAFE_INTEGER);const st=et[tt];return nt<0&&(nt+=st),nt=clamp(0,nt,st-1),nt}function stopForAxis(_,$,_e,et,tt,rt){let nt=$[tt];const it=_e[tt]||1;(_&1<<tt||rt&1<<tt||nt==null)&&(it>0?nt=Number.MAX_SAFE_INTEGER:nt=Number.MIN_SAFE_INTEGER);const st=et[tt];return nt<0&&(nt+=st),it>0?nt=clamp(0,nt,st):nt=clamp(-1,nt,st-1),nt}function isSliceContinous(_,$,_e){let et=_e.length;for(let tt=0;tt<_e.length;tt++)if(_e[tt]>1){et=tt;break}for(let tt=et+1;tt<_e.length;tt++)if($[tt]>0||_e[tt]!==_[tt])return!1;return!0}function computeFlatOffset(_,$){let _e=_.length>0?_[_.length-1]:1;for(let et=0;et<_.length-1;et++)_e+=_[et]*$[et];return _e}function parseSliceParams(_,$,_e){let et;const tt=_.shape.length;typeof $=="number"?et=[$,...new Array(tt-1).fill(0)]:$.length<tt?et=$.concat(new Array(tt-$.length).fill(0)):et=$.slice(),et.forEach(nt=>{assert$1(nt!==-1,()=>"slice() does not support negative begin indexing.")});let rt;return _e==null?rt=new Array(tt).fill(-1):typeof _e=="number"?rt=[_e,...new Array(tt-1).fill(-1)]:_e.length<tt?rt=_e.concat(new Array(tt-_e.length).fill(-1)):rt=_e,rt=rt.map((nt,it)=>nt>=0?nt:(assert$1(nt===-1,()=>`Negative size values should be exactly -1 but got ${nt} for the slice() size at index ${it}.`),_.shape[it]-et[it])),[et,rt]}function sliceInfo(_,$,_e,et,tt,rt,nt,it,st){let at;if(et==null?(at=new Array($.length),at.fill(1)):at=et,nt!=null&&nt&nt-1)throw new Error("Multiple ellipses in slice is not allowed.");let ot=!1;const dt={dims:at.length,numAddAxisAfterEllipsis:0,begin:$.slice(),end:_e.slice(),strides:at.slice(),beginMask:tt,endMask:rt,ellipsisMask:nt,newAxisMask:it,shrinkAxisMask:st};for(let jt=0;jt<dt.dims;jt++)ot&&1<<jt&it&&dt.numAddAxisAfterEllipsis++,1<<jt&nt&&(ot=!0);ot||(dt.ellipsisMask|=1<<dt.dims,dt.dims++);const ht={dims:_.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};buildDenseSpec(dt,ht);let yt=!0,vt=!0,xt=!0;const wt=[],Et=[];for(let jt=0;jt<_.length;++jt){if(ht.strides[jt]===0)throw Error(`strides[${jt}] must be non-zero`);const kt=!!(ht.shrinkAxisMask&1<<jt),Lt=_[jt];if(Lt===-1){wt.push(kt?1:-1);continue}const Bt=[ht.beginMask&1<<jt,ht.endMask&1<<jt],Gt=[ht.strides[jt]>0?0:-1,ht.strides[jt]>0?Lt:Lt-1];if(kt&&ht.strides[jt]<=0)throw Error("only stride 1 allowed on non-range indexing.");xt=xt&&ht.strides[jt]===1;const er=!!(ht.beginMask&1<<jt&&ht.endMask&1<<jt);if(ht.beginValid&&ht.endValid){if(kt){const lt=ht.begin[jt]<0?Lt+ht.begin[jt]:ht.begin[jt];if(ht.begin[jt]=lt,ht.end[jt]=ht.begin[jt]+1,lt<0||lt>=Lt)throw Error(`slice index ${ht.begin[jt]} of dimension ${jt} out of bounds.`)}else ht.begin[jt]=canonical(ht.begin[jt],0,ht.strides[jt],Lt,Bt,Gt),ht.end[jt]=canonical(ht.end[jt],1,ht.strides[jt],Lt,Bt,Gt);const Mt=ht.strides[jt]===1&&ht.begin[jt]===0&&ht.end[jt]===Lt;yt=yt&&Mt,vt=vt&&(jt===0&&ht.strides[jt]===1||Mt)}else yt=yt&&ht.strides[jt]===1&&er,vt=vt&&(jt===0&&ht.strides[jt]===1||er);let tr,ar=!1;if(ht.beginValid&&ht.endValid?(tr=ht.end[jt]-ht.begin[jt],ar=!0):kt?(tr=1,ar=!0):er&&Lt>=0&&(ht.strides[jt]<0?tr=-Lt:tr=Lt,ar=!0),ar){let Mt;tr===0||tr<0!=ht.strides[jt]<0?Mt=0:Mt=Math.trunc(tr/ht.strides[jt])+(tr%ht.strides[jt]!==0?1:0),wt.push(Mt)}else wt.push(-1)}for(let jt=0;jt<ht.finalShapeGatherIndices.length;++jt){const kt=ht.finalShapeGatherIndices[jt];kt>=0?Et.push(wt[kt]):kt===NEW_AXIS&&Et.push(1)}return{finalShapeSparse:Et.filter((jt,kt)=>ht.finalShapeGatherIndices[kt]!==NEW_AXIS),finalShape:Et,isIdentity:yt,sliceDim0:vt,isSimpleSlice:xt,begin:ht.begin,end:ht.end,strides:ht.strides}}function buildDenseSpec(_,$){$.beginMask=0,$.endMask=0,$.shrinkAxisMask=0;let _e=0;$.beginValid=_.begin!=null,$.endValid=_.end!=null,$.begin=new Array($.dims),$.end=new Array($.dims),$.strides=new Array($.dims),$.finalShapeGatherIndices=[],$.finalShapeGatherIndicesSparse=[],$.inputShapeGatherIndicesSparse=new Array($.dims);for(let et=0;et<_.dims;et++)if(1<<et&_.ellipsisMask){const tt=Math.min($.dims-(_.dims-et)+1+_.numAddAxisAfterEllipsis,$.dims);for(;_e<tt;_e++)$.begin[_e]=0,$.end[_e]=0,$.strides[_e]=1,$.beginMask|=1<<_e,$.endMask|=1<<_e,$.finalShapeGatherIndices.push(_e),$.finalShapeGatherIndicesSparse.push(-1),$.inputShapeGatherIndicesSparse[_e]=et}else if(1<<et&_.newAxisMask)$.finalShapeGatherIndices.push(NEW_AXIS),$.finalShapeGatherIndicesSparse.push(-1);else{if(_e===$.begin.length)throw Error(`Index out of range using input dim ${_e}; input has only ${$.dims} dims, ${$.begin.length}.`);_.begin!=null&&($.begin[_e]=_.begin[et]),_.end!=null&&($.end[_e]=_.end[et]),$.strides[_e]=_.strides[et],_.beginMask&1<<et&&($.beginMask|=1<<_e),_.endMask&1<<et&&($.endMask|=1<<_e),_.shrinkAxisMask&1<<et?($.finalShapeGatherIndices.push(SHRINK_AXIS),$.finalShapeGatherIndicesSparse.push(-1),$.shrinkAxisMask|=1<<_e):($.finalShapeGatherIndices.push(_e),$.finalShapeGatherIndicesSparse.push(et)),$.inputShapeGatherIndicesSparse[_e]=et,_e++}}function canonical(_,$,_e,et,tt,rt){if(tt[$])return _e>0?rt[$]:rt[$+1&1];{const nt=_<0?et+_:_;return nt<rt[0]?rt[0]:nt>rt[1]?rt[1]:nt}}const slice_util=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid,computeFlatOffset,computeOutShape:computeOutShape$2,getNormalizedAxes,isSliceContinous,maskToAxes,parseSliceParams,sliceInfo,startForAxis,startIndicesWithElidedDims,stopForAxis,stopIndicesWithElidedDims,stridesForAxis,stridesWithElidedDims},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const version$7="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OptimizerConstructors{static sgd($){return new SGDOptimizer($)}static momentum($,_e,et=!1){return new MomentumOptimizer($,_e,et)}static rmsprop($,_e=.9,et=0,tt=null,rt=!1){return new RMSPropOptimizer($,_e,et,tt,rt)}static adam($=.001,_e=.9,et=.999,tt=null){return new AdamOptimizer($,_e,et,tt)}static adadelta($=.001,_e=.95,et=null){return new AdadeltaOptimizer($,_e,et)}static adamax($=.002,_e=.9,et=.999,tt=null,rt=0){return new AdamaxOptimizer($,_e,et,tt,rt)}static adagrad($,_e=.1){return new AdagradOptimizer($,_e)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const train=OptimizerConstructors;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const delayCallback=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:_=>_();function nextFrame(){return new Promise(_=>delayCallback(()=>_()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function assertParamsConsistent(_,$){const _e=_[0].length;_.forEach((tt,rt)=>{assert$1(tt.length===_e,()=>`Error in concat${_e}D: rank of tensors[${rt}] must be the same as the rank of the rest (${_e})`)}),assert$1($>=0&&$<_e,()=>`Error in concat${_e}D: axis must be between 0 and ${_e-1}.`);const et=_[0];_.forEach((tt,rt)=>{for(let nt=0;nt<_e;nt++)assert$1(nt===$||tt[nt]===et[nt],()=>`Error in concat${_e}D: Shape of tensors[${rt}] (${tt}) does not match the shape of the rest (${et}) along the non-concatenated axis ${rt}.`)})}function computeOutShape$1(_,$){const _e=_[0].slice();for(let et=1;et<_.length;et++)_e[$]+=_[et][$];return _e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var RowPartitionType$1;(function(_){_[_.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",_[_.VALUE_ROWIDS=1]="VALUE_ROWIDS",_[_.ROW_LENGTHS=2]="ROW_LENGTHS",_[_.ROW_SPLITS=3]="ROW_SPLITS",_[_.ROW_LIMITS=4]="ROW_LIMITS",_[_.ROW_STARTS=5]="ROW_STARTS"})(RowPartitionType$1||(RowPartitionType$1={}));function combineRaggedTensorToTensorShapes(_,$,_e){let et=new Array;if(_e==null&&$==null)return et;if($==null)for(;et.length<_+_e.length;)et.push(-1);else et=$.slice();if(_e==null)return et;if(_+_e.length!==et.length)throw new Error(`rt input.shape and shape=${$} are incompatible: rt input.rank = ${_+_e.length}, but shape.rank = ${et.length}`);for(let tt=1;tt<_e.length;++tt){const rt=_e[tt],nt=et[et.length-_e.length+tt],it=et[nt];if(rt>=0)if(it>=0){if(it!==rt)throw new Error(`rt input.shape and shape=${$} are incompatible: rt input.shape[${tt+_}] = ${rt} but shape[${tt+_}] = ${it}`)}else et[nt]=rt}return et}function getRowPartitionTypesHelper(_){const $={FIRST_DIM_SIZE:RowPartitionType$1.FIRST_DIM_SIZE,VALUE_ROWIDS:RowPartitionType$1.VALUE_ROWIDS,ROW_LENGTHS:RowPartitionType$1.ROW_LENGTHS,ROW_SPLITS:RowPartitionType$1.ROW_SPLITS,ROW_LIMITS:RowPartitionType$1.ROW_LIMITS,ROW_STARTS:RowPartitionType$1.ROW_STARTS},_e=[];for(const et of _)if(et in $)_e.push($[et]);else break;return _e}function getRaggedRank(_){return _.length===0?0:_[0]===RowPartitionType$1.FIRST_DIM_SIZE?_.length-1:_.length}function validateDefaultValueShape(_,$){if(_==null||$==null)return;const _e=_.length,et=$.length;if(_e>=et)throw new Error(`defaultValue.shape=${_} and ragged tensor flatValues.shape=${$}, are incompatible: defaultValue.rank = ${_e} must be less than ragged tensor input flatValues.rank = ${et})`);for(let tt=0;tt<Math.min(_e,et-1);++tt){const rt=_[tt],nt=$[tt+1];if(rt>=0&&nt>=0&&rt!==1&&rt!==nt)throw new Error(`defaultValue.shape=${_}, and ragged tensor input flatValues.shape=${$} are incompatible: defaultValue.shape[${tt-_.length}] = ${rt} but ragged tensor input.flatValues.shape[${tt-_.length}] = ${nt}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PARALLELIZE_THRESHOLD=30;function computeOptimalWindowSize(_){return _<=PARALLELIZE_THRESHOLD?_:nearestDivisor(_,Math.floor(Math.sqrt(_)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getImageCenter(_,$,_e){const et=_e*(typeof _=="number"?_:_[0]),tt=$*(typeof _=="number"?_:_[1]);return[et,tt]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getReshaped(_,$,_e,et=!0){let tt=[];if(et)tt=tt.concat($.slice(0)),tt.push(_[0]/_e),tt=tt.concat(_.slice(1));else{tt=tt.concat(_[0]);const rt=$.length;for(let nt=0;nt<rt;++nt)tt=tt.concat([_[nt+1]/$[nt],$[nt]]);tt=tt.concat(_.slice(rt+1))}return tt}function getPermuted(_,$,_e=!0){const et=[];if(_e){et.push($);for(let tt=$+1;tt<_;++tt)tt<=2*$?(et.push(tt),et.push(tt-($+1))):et.push(tt)}else{const tt=[],rt=[];for(let nt=1;nt<_;++nt)nt>=$*2+1||nt%2===1?rt.push(nt):tt.push(nt);et.push(...tt),et.push(0),et.push(...rt)}return et}function getReshapedPermuted(_,$,_e,et=!0){const tt=[];et?tt.push(_[0]/_e):tt.push(_[0]*_e);for(let rt=1;rt<_.length;++rt)rt<=$.length?et?tt.push($[rt-1]*_[rt]):tt.push(_[rt]/$[rt-1]):tt.push(_[rt]);return tt}function getSliceBeginCoords(_,$){const _e=[0];for(let et=0;et<$;++et)_e.push(_[et][0]);return _e}function getSliceSize(_,$,_e){const et=_.slice(0,1);for(let tt=0;tt<_e;++tt)et.push(_[tt+1]-$[tt][0]-$[tt][1]);return et}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SELU_SCALEALPHA=1.7580993408473768,SELU_SCALE=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ERF_P=.3275911,ERF_A1=.254829592,ERF_A2=-.284496736,ERF_A3=1.421413741,ERF_A4=-1.453152027,ERF_A5=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mergeRealAndImagArrays(_,$){if(_.length!==$.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${_.length}, imag: ${$.length}.`);const _e=new Float32Array(_.length*2);for(let et=0;et<_e.length;et+=2)_e[et]=_[et/2],_e[et+1]=$[et/2];return _e}function splitRealAndImagArrays(_){const $=new Float32Array(_.length/2),_e=new Float32Array(_.length/2);for(let et=0;et<_.length;et+=2)$[et/2]=_[et],_e[et/2]=_[et+1];return{real:$,imag:_e}}function complexWithEvenIndex(_){const $=Math.ceil(_.length/4),_e=new Float32Array($),et=new Float32Array($);for(let tt=0;tt<_.length;tt+=4)_e[Math.floor(tt/4)]=_[tt],et[Math.floor(tt/4)]=_[tt+1];return{real:_e,imag:et}}function complexWithOddIndex(_){const $=Math.floor(_.length/4),_e=new Float32Array($),et=new Float32Array($);for(let tt=2;tt<_.length;tt+=4)_e[Math.floor(tt/4)]=_[tt],et[Math.floor(tt/4)]=_[tt+1];return{real:_e,imag:et}}function getComplexWithIndex(_,$){const _e=_[$*2],et=_[$*2+1];return{real:_e,imag:et}}function assignToTypedArray(_,$,_e,et){_[et*2]=$,_[et*2+1]=_e}function exponents(_,$){const _e=new Float32Array(_/2),et=new Float32Array(_/2);for(let tt=0;tt<Math.ceil(_/2);tt++){const rt=($?2:-2)*Math.PI*(tt/_);_e[tt]=Math.cos(rt),et[tt]=Math.sin(rt)}return{real:_e,imag:et}}function exponent$1(_,$,_e){const et=(_e?2:-2)*Math.PI*(_/$),tt=Math.cos(et),rt=Math.sin(et);return{real:tt,imag:rt}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ARROW="->",ARROW_REGEX=/->/g,COMMA=",",ELLIPSIS="...";function decodeEinsumEquation(_,$){_=_.replace(/\s/g,"");const _e=(_.length-_.replace(ARROW_REGEX,"").length)/ARROW.length;if(_e<1)throw new Error("Equations without an arrow are not supported.");if(_e>1)throw new Error(`Equation must contain exactly one arrow ("${ARROW}").`);const[et,tt]=_.split(ARROW);assert$1(et.indexOf(ELLIPSIS)===-1,()=>`The ellipsis notation ("${ELLIPSIS}") is not supported yet.`);const rt=et.split(COMMA),nt=rt.length;if($!==nt)throw new Error(`Expected ${nt} input tensors, received ${$}`);if(nt>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const it=[];for(let ht=0;ht<tt.length;++ht){const yt=tt[ht];if(!rt.some(vt=>vt.indexOf(yt)!==-1))throw new Error(`Output subscripts contain the label ${yt} not present in the input subscripts.`);it.indexOf(yt)===-1&&it.push(yt)}for(let ht=0;ht<et.length;++ht){const yt=et[ht];it.indexOf(yt)===-1&&yt!==COMMA&&it.push(yt)}const st=new Array(rt.length);for(let ht=0;ht<nt;++ht){if(new Set(rt[ht].split("")).size!==rt[ht].length)throw new Error(`Found duplicate axes in input component ${rt[ht]}. Support for duplicate axes in input is not implemented yet.`);st[ht]=[];for(let yt=0;yt<rt[ht].length;++yt)st[ht].push(it.indexOf(rt[ht][yt]))}const at=it.length,ot=tt.length,dt=[];for(let ht=ot;ht<at;++ht)dt.push(ht);return{allDims:it,summedDims:dt,idDims:st}}function getEinsumPermutation(_,$){let _e=new Array(_);_e.fill(-1);for(let tt=0;tt<$.length;++tt)_e[$[tt]]=tt;const et=[];for(let tt=0;tt<_;++tt)_e[tt]===-1&&et.push(tt);return _e=_e.filter(tt=>tt!==-1),{permutationIndices:_e,expandDims:et}}function checkEinsumDimSizes(_,$,_e){const et=new Array(_);for(let tt=0;tt<_e.length;++tt){const rt=_e[tt].shape;for(let nt=0;nt<$[tt].length;++nt)et[$[tt][nt]]===void 0?et[$[tt][nt]]=rt[nt]:assert$1(et[$[tt][nt]]===rt[nt],()=>`Expected dimension ${et[$[tt][nt]]} at axis ${nt} of input shaped ${JSON.stringify(rt)}, but got dimension ${rt[nt]}`)}}function getEinsumComputePath(_,$){const _e=_,et=[];let tt=0;_.length===0&&_e.push(-1),tt=_.length+1;for(let nt=0;nt<tt;++nt)et.push([]);const rt=[];for(let nt=0;nt<_e.length;++nt){const it=_e[nt],st=findTermsWithDim($,it);for(const at of st)rt.indexOf(at)===-1&&(et[nt].push(at),rt.push(at))}return{path:_e,steps:et}}function isIdentityPermutation(_){return _.every(($,_e)=>$===_e)}function findTermsWithDim(_,$){const _e=[];for(let et=0;et<_.length;++et)(_[et].length===0||_[et].indexOf($)!==-1||$===-1)&&_e.push(et);return _e}function prepareSplitSize(_,$,_e=0){let et=[];if(typeof $=="number")assert$1(_.shape[_e]%$===0,()=>"Number of splits must evenly divide the axis."),et=new Array($).fill(_.shape[_e]/$);else{const tt=$.reduce((nt,it)=>(it===-1&&(nt+=1),nt),0);assert$1(tt<=1,()=>"There should be only one negative value in split array.");const rt=$.indexOf(-1);if(rt!==-1){const nt=$.reduce((it,st)=>st>0?it+st:it);$[rt]=_.shape[_e]-nt}assert$1(_.shape[_e]===$.reduce((nt,it)=>nt+it),()=>"The sum of sizes must match the size of the axis dimension."),et=$}return et}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getSparseFillEmptyRowsIndicesDenseShapeMismatch(_){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${_}`}function getSparseFillEmptyRowsNegativeIndexErrorMessage(_,$){return`indices(${_}, 0) is invalid: ${$} < 0`}function getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(_,$,_e){return`indices(${_}, 0) is invalid: ${$} >= ${_e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(_,$){return`only one output dimension may be -1, not both ${_} and ${$}`}function getSparseReshapeNegativeOutputDimErrorMessage(_,$){return`size ${_} must be non-negative, not ${$}`}function getSparseReshapeEmptyTensorZeroOutputDimErrorMessage(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function getSparseReshapeInputOutputMultipleErrorMessage(_,$){const _e=sizeFromShape(_),et=sizeFromShape($);return`Input to reshape is a SparseTensor with ${_e}
  dense values, but the requested shape requires a multiple of ${et}. inputShape=${_} outputShape= ${$}`}function getSparseReshapeInputOutputMismatchErrorMessage(_,$){const _e=sizeFromShape(_),et=sizeFromShape($);return`Input to reshape is a tensor with ${_e} dense values, but the requested shape has ${et}. inputShape=${_} outputShape=${$}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getSparseSegmentReductionNegativeSegmentIdsErrorMessage(){return"segment ids must be >= 0"}function getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage(){return"segment ids are not increasing"}function getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(_,$){return`Segment id ${_} out of range [0, ${$}), possibly because segmentIds input is not sorted.`}function getSparseSegmentReductionIndicesOutOfRangeErrorMessage(_,$,_e){return`Bad: indices[${_}] == ${$} out of range [0, ${_e})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function segOpComputeOptimalWindowSize(_,$){let _e=!1,et;for(_<=PARALLELIZE_THRESHOLD?(et=_,_e=!0):et=nearestDivisor(_,Math.floor(Math.sqrt(_)));!_e;)et>$||et===_?_e=!0:et=nearestDivisor(_,et+1);return et}function computeOutShape(_,$,_e){const et=[],tt=_.length;for(let rt=0;rt<tt;rt++)rt!==$?et.push(_[rt]):et.push(_e);return et}function collectGatherOpShapeInfo(_,$,_e,et){const tt=$.shape.length,rt=_.shape.length;if(et!==0&&(et<-tt||et>tt))throw new Error(`Expect batchDims in the range of [-${tt}, ${tt}], but got ${et}`);if(et<0&&(et+=tt),et>rt)throw new Error(`batchDims (${et}) must be less than rank(x) (
    ${rt}).`);if(_e<et)throw new Error(`batchDims (${et}) must be less than or equal to axis (${_e}).`);for(let dt=0;dt<et;++dt)if(_.shape[dt]!==$.shape[dt])throw new Error(`x.shape[${dt}]: ${_.shape[dt]} should be equal to indices.shape[${dt}]: ${$.shape[dt]}.`);const nt=_.shape[_e],it=[];let st=1,at=1,ot=1;for(let dt=0;dt<et;++dt)it.push(_.shape[dt]),st*=_.shape[dt];for(let dt=et;dt<_e;dt++)it.push(_.shape[dt]),at*=_.shape[dt];for(let dt=et;dt<tt;dt++)it.push($.shape[dt]);for(let dt=_e+1;dt<rt;dt++)it.push(_.shape[dt]),ot*=_.shape[dt];return{batchSize:st,sliceSize:ot,outerSize:at,dimSize:nt,outputShape:it}}const segment_util=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo,computeOutShape,segOpComputeOptimalWindowSize},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fromUint8ToStringArray(_){try{return _.map($=>decodeString($))}catch($){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${$}`)}}function fromStringArrayToUint8(_){return _.map($=>encodeString($))}const backend_util=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1,ERF_A2,ERF_A3,ERF_A4,ERF_A5,ERF_P,PARALLELIZE_THRESHOLD,get RowPartitionType(){return RowPartitionType$1},SELU_SCALE,SELU_SCALEALPHA,applyActivation:applyActivation$1,assertAndGetBroadcastShape,assertAxesAreInnerMostDims,assertParamsConsistent,assignToTypedArray,axesAreInnerMostDims,calculateShapes,checkEinsumDimSizes,checkPadOnDimRoundingMode,combineLocations,combineRaggedTensorToTensorShapes,complexWithEvenIndex,complexWithOddIndex,computeConv2DInfo,computeConv3DInfo,computeDefaultPad,computeDilation2DInfo,computeOptimalWindowSize,computeOutAndReduceShapes,computeOutShape:computeOutShape$1,computePool2DInfo,computePool3DInfo,convertConv2DDataFormat,decodeEinsumEquation,eitherStridesOrDilationsAreOne,expandShapeToKeepDim,exponent:exponent$1,exponents,fromStringArrayToUint8,fromUint8ToStringArray,getAxesPermutation,getBroadcastDims:getBroadcastDims$1,getComplexWithIndex,getEinsumComputePath,getEinsumPermutation,getFusedBiasGradient,getFusedDyActivation,getImageCenter,getInnerMostAxes,getPermuted,getRaggedRank,getReductionAxes,getReshaped,getReshapedPermuted,getRowPartitionTypesHelper,getSliceBeginCoords,getSliceSize,getSparseFillEmptyRowsIndicesDenseShapeMismatch,getSparseFillEmptyRowsNegativeIndexErrorMessage,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage,getSparseReshapeInputOutputMismatchErrorMessage,getSparseReshapeInputOutputMultipleErrorMessage,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage,getSparseReshapeNegativeOutputDimErrorMessage,getSparseSegmentReductionIndicesOutOfRangeErrorMessage,getSparseSegmentReductionNegativeSegmentIdsErrorMessage,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage,getUndoAxesPermutation,isIdentityPermutation,log:log$4,mergeRealAndImagArrays,prepareAndValidate,prepareSplitSize,segment_util,shouldFuse,slice_util,splitRealAndImagArrays,stridesOrDilationsArePositive,tupleValuesAreOne,upcastType,validateDefaultValueShape,validateInput:validateInput$1,validateUpdateShape,warn:warn$1},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kernel_impls=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:nonMaxSuppressionV3Impl$2,nonMaxSuppressionV4Impl:nonMaxSuppressionV4Impl$2,nonMaxSuppressionV5Impl:nonMaxSuppressionV5Impl$2,whereImpl:whereImpl$2},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */registerOptimizers();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const absGradConfig={kernelName:Abs,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>mul(_,step$2(cast$3(_e,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const acosGradConfig={kernelName:Acos,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>{const et=square$3(cast$3(_e,"float32")),tt=sqrt$4(sub$2(scalar(1),et));return neg$2(div$1(_,tt))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const acoshGradConfig={kernelName:Acosh,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>{const et=sqrt$4(sub$2(square$3(cast$3(_e,"float32")),1));return div$1(_,et)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const addGradConfig={kernelName:Add$1,inputsToSave:["a","b"],gradFunc:(_,$)=>{const[_e,et]=$,tt=assertAndGetBroadcastShape(_e.shape,et.shape);return{a:()=>{let it=_;const st=getReductionAxes(_e.shape,tt);return st.length>0&&(it=sum$2(it,st)),reshape$3(it,_e.shape)},b:()=>{let it=_;const st=getReductionAxes(et.shape,tt);return st.length>0&&(it=sum$2(it,st)),reshape$3(it,et.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const addNGradConfig={kernelName:AddN,saveAllInputs:!0,gradFunc:(_,$)=>{const _e={};return $.forEach((et,tt)=>{_e[tt]=()=>_.clone()}),_e}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const argMaxGradConfig={kernelName:ArgMax,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>zerosLike$2(_e)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const argMinGradConfig={kernelName:ArgMin,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>zerosLike$2(_e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const asinGradConfig={kernelName:Asin,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>div$1(_,sqrt$4(sub$2(scalar(1),square$3(cast$3(_e,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const asinhGradConfig={kernelName:Asinh,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>{const et=sqrt$4(add$3(scalar(1),square$3(cast$3(_e,"float32"))));return div$1(_,et)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atan2GradConfig={kernelName:Atan2,inputsToSave:["a","b"],gradFunc:(_,$)=>{const[_e,et]=$,tt=assertAndGetBroadcastShape(_e.shape,et.shape);return{a:()=>{const it=add$3(square$3(_e),square$3(et));let st=mul(_,div$1(et,it));const at=getReductionAxes(_e.shape,tt);return at.length>0&&(st=sum$2(st,at)),reshape$3(st,_e.shape)},b:()=>{const it=add$3(square$3(_e),square$3(et));let st=neg$2(mul(_,div$1(_e,it)));const at=getReductionAxes(et.shape,tt);return at.length>0&&(st=sum$2(st,at)),reshape$3(st,et.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atanGradConfig={kernelName:Atan,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>div$1(_,add$3(square$3(cast$3(_e,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atanhGradConfig={kernelName:Atanh,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>div$1(_,sub$2(scalar(1),square$3(cast$3(_e,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3dGrad_(_,$,_e,et,tt,rt){const nt=convertToTensor(_,"dy","avgPool3dGrad"),it=convertToTensor($,"input","avgPool3dGrad");let st=nt,at=it,ot=!1;it.rank===4&&(ot=!0,st=reshape$3(nt,[1,nt.shape[0],nt.shape[1],nt.shape[2],nt.shape[3]]),at=reshape$3(it,[1,it.shape[0],it.shape[1],it.shape[2],it.shape[3]])),assert$1(st.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${st.rank}.`),assert$1(at.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${at.rank}.`),checkPadOnDimRoundingMode("avgPool3dGrad",tt,rt);const dt={dy:st,input:at},ht={filterSize:_e,strides:et,pad:tt,dimRoundingMode:rt},yt=ENGINE.runKernel(AvgPool3DGrad,dt,ht);return ot?reshape$3(yt,[yt.shape[1],yt.shape[2],yt.shape[3],yt.shape[4]]):yt}const avgPool3dGrad=op({avgPool3dGrad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const avgPool3DGradConfig$2={kernelName:AvgPool3D,inputsToSave:["x"],gradFunc:(_,$,_e)=>{const[et]=$,{filterSize:tt,strides:rt,pad:nt,dimRoundingMode:it}=_e;return{x:()=>avgPool3dGrad(_,et,tt,rt,nt,it)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPoolGrad_(_,$,_e,et,tt){const rt=convertToTensor(_,"dy","avgPoolGrad"),nt=convertToTensor($,"input","avgPoolGrad");assert$1(nt.rank===rt.rank,()=>`Rank of input (${nt.rank}) does not match rank of dy (${rt.rank})`);let it=nt,st=rt,at=!1;nt.rank===3&&(at=!0,it=reshape$3(nt,[1,nt.shape[0],nt.shape[1],nt.shape[2]]),st=reshape$3(rt,[1,rt.shape[0],rt.shape[1],rt.shape[2]])),assert$1(st.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${st.rank}.`),assert$1(it.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${it.rank}.`);const ot={dy:st,input:it},dt={filterSize:_e,strides:et,pad:tt},ht=ENGINE.runKernel(AvgPoolGrad,ot,dt);return at?reshape$3(ht,[ht.shape[1],ht.shape[2],ht.shape[3]]):ht}const avgPoolGrad$2=op({avgPoolGrad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const avgPoolGradConfig$2={kernelName:AvgPool,inputsToSave:["x"],gradFunc:(_,$,_e)=>{const[et]=$,{filterSize:tt,strides:rt,pad:nt}=_e;return{x:()=>avgPoolGrad$2(_,et,tt,rt,nt)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const batchMatMulGradConfig={kernelName:BatchMatMul,inputsToSave:["a","b"],gradFunc:(_,$,_e)=>{const[et,tt]=$,{transposeA:rt,transposeB:nt}=_e;return!rt&&!nt?{a:()=>matMul$1(_,tt,!1,!0),b:()=>matMul$1(et,_,!0,!1)}:!rt&&nt?{a:()=>matMul$1(_,tt,!1,!1),b:()=>matMul$1(_,et,!0,!1)}:rt&&!nt?{a:()=>matMul$1(tt,_,!1,!0),b:()=>matMul$1(et,_,!1,!1)}:{a:()=>matMul$1(tt,_,!0,!0),b:()=>matMul$1(_,et,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const batchToSpaceNDGradConfig={kernelName:BatchToSpaceND,gradFunc:(_,$,_e)=>{const{blockShape:et,crops:tt}=_e;return{x:()=>spaceToBatchND$2(_,et,tt)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const broadcastToGradConfig={kernelName:BroadcastTo,gradFunc:(_,$,_e)=>{const et=_e,tt=et.inputShape,rt=et.shape,nt=Array.from(rt);for(let st=tt.length-1;st>=0;st--)if(tt[st]===rt[st])nt[st]=1;else if(tt[st]!==1)throw new Error(`broadcastTo(): [${tt}] cannot be broadcast to [${rt}].`);const it=[];for(let st=0;st<nt.length;st++)nt[st]>1&&it.push(st);return{x:()=>sum$2(_,it,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const castGradConfig={kernelName:Cast,gradFunc:_=>({x:()=>_.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ceilGradConfig={kernelName:Ceil,gradFunc:_=>({x:()=>zerosLike$2(_)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const clipByValueGradConfig={kernelName:ClipByValue,inputsToSave:["x"],gradFunc:(_,$,_e)=>{const[et]=$,{clipValueMin:tt,clipValueMax:rt}=_e;return{x:()=>where(logicalAnd$2(greaterEqual$2(et,tt),lessEqual$2(et,rt)),_,zerosLike$2(_))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const complexAbsGradConfig={kernelName:ComplexAbs,inputsToSave:["x"],gradFunc:absGradConfig.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const concatGradConfig={kernelName:Concat,saveAllInputs:!0,gradFunc:(_,$,_e)=>{const et=$.map(st=>st.shape),{axis:tt}=_e,rt=parseAxisParam(tt,$[0].shape)[0],nt=et.map(st=>st[rt]);return split$2(_,nt,rt).map(st=>()=>st)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const conv2DGradConfig={kernelName:Conv2D$1,inputsToSave:["x","filter"],gradFunc:(_,$,_e)=>{const[et,tt]=$,{dilations:rt,strides:nt,pad:it,dataFormat:st}=_e;return assert$1(tupleValuesAreOne(rt),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${rt}'`),{x:()=>conv2DBackpropInput$2(et.shape,_,tt,nt,it,st),filter:()=>conv2DBackpropFilter$2(et,_,tt.shape,nt,it,st)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const conv2DBackpropInputGradConfig={kernelName:Conv2DBackpropInput,inputsToSave:["dy","filter"],gradFunc:(_,$,_e)=>{const[et,tt]=$,{strides:rt,pad:nt,dataFormat:it,dimRoundingMode:st}=_e;return{dy:()=>conv2d$3(_,tt,rt,nt,it,1,st),filter:()=>conv2DBackpropFilter$2(_,et,tt.shape,rt,nt,it,st)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropFilter_(_,$,_e,et,tt){let rt=_;_.rank===4&&(rt=reshape$3(_,[1,_.shape[0],_.shape[1],_.shape[2],_.shape[3]]));let nt=$;nt.rank===4&&(nt=reshape$3($,[1,$.shape[0],$.shape[1],$.shape[2],$.shape[3]])),assert$1(rt.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${rt.shape}.`),assert$1(nt.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${nt.shape}.`),assert$1(_e.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${_e}.`),assert$1(rt.shape[4]===_e[3],()=>`Error in conv3dDerFilter: depth of input ${rt.shape[4]}) must match input depth in filter (${_e[3]}.`),assert$1(nt.shape[4]===_e[4],()=>`Error in conv3dDerFilter: depth of dy (${nt.shape[4]}) must match output depth for filter (${_e[4]}).`);const it={x:rt,dy:nt},st={strides:et,pad:tt,filterShape:_e};return ENGINE.runKernel(Conv3DBackpropFilterV2,it,st)}const conv3DBackpropFilter=op({conv3DBackpropFilter_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const conv3DGradConfig={kernelName:Conv3D$1,inputsToSave:["x","filter"],gradFunc:(_,$,_e)=>{const{dilations:et,strides:tt,pad:rt}=_e;assert$1(tupleValuesAreOne(et),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${et}'`);const[nt,it]=$;return{x:()=>conv3DBackpropInput$1(nt.shape,_,it,tt,rt),filter:()=>conv3DBackpropFilter(nt,_,it.shape,tt,rt)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cosGradConfig={kernelName:Cos,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>mul(neg$2(sin$3(cast$3(_e,"float32"))),_)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const coshGradConfig={kernelName:Cosh,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>mul(sinh$2(cast$3(_e,"float32")),_)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cumsumGradConfig={kernelName:Cumsum,inputsToSave:["x"],gradFunc:(_,$,_e)=>{const[et]=$,{axis:tt,exclusive:rt,reverse:nt}=_e;return{x:()=>{const it=getAxesPermutation([tt],et.rank);let st=cumsum$2(_,tt,rt,!nt);return it!=null&&(st=transpose$2(st,it)),st}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const depthwiseConv2dNativeGradConfig={kernelName:DepthwiseConv2dNative,inputsToSave:["x","filter"],gradFunc:(_,$,_e)=>{const{dilations:et,strides:tt,pad:rt,dimRoundingMode:nt}=_e,it=et??[1,1];assert$1(tupleValuesAreOne(it),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${it}'`);const[st,at]=$;return assert$1(st.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${st.rank}.`),assert$1(at.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${at.rank}.`),assert$1(st.shape[3]===at.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${st.shape[3]}) must match the inChannels dimension in filter ${at.shape[2]}.`),assert$1(eitherStridesOrDilationsAreOne(tt,it),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${tt} and dilations '${it}'.`),checkPadOnDimRoundingMode("depthwiseConv2d",rt,nt),{x:()=>depthwiseConv2dNativeBackpropInput$2(st.shape,_,at,tt,rt,it,nt),filter:()=>depthwiseConv2dNativeBackpropFilter$2(st,_,at.shape,tt,rt,it,nt)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dilation2dGradConfig={kernelName:Dilation2D,inputsToSave:["x","filter"],gradFunc:(_,$,_e)=>{const[et,tt]=$,rt={x:et,filter:tt,dy:_},nt={x:et,filter:tt,dy:_};return{x:()=>ENGINE.runKernel(Dilation2DBackpropInput,rt,_e),filter:()=>ENGINE.runKernel(Dilation2DBackpropFilter,nt,_e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eluGradConfig$2={kernelName:Elu$1,outputsToSave:[!0],gradFunc:(_,$)=>{const[_e]=$,et={dy:_,y:_e};return{x:()=>ENGINE.runKernel(EluGrad,et)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const erfGradConfig={kernelName:Erf,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$,et=mul(exp$3(neg$2(square$3(_e))),2/Math.sqrt(Math.PI));return{x:()=>mul(_,et)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expGradConfig={kernelName:Exp,outputsToSave:[!0],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>mul(_,_e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expandDimsGradConfig={kernelName:ExpandDims,inputsToSave:["input"],gradFunc:(_,$)=>{const[_e]=$;return{input:()=>reshape$3(_,_e.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expm1GradConfig={kernelName:Expm1,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>mul(_,exp$3(_e))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const floorGradConfig={kernelName:Floor,gradFunc:_=>({x:()=>zerosLike$2(_)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const floorDivGradConfig={kernelName:FloorDiv,inputsToSave:["a","b"],gradFunc:(_,$)=>{const[_e,et]=$,tt=assertAndGetBroadcastShape(_e.shape,et.shape);return{a:()=>{const it=div$1(_,cast$3(et,"float32")),st=getReductionAxes(_e.shape,tt);return st.length>0?reshape$3(sum$2(it,st),_e.shape):it},b:()=>{let it=mul(_,cast$3(_e,"float32"));const st=getReductionAxes(et.shape,tt);st.length>0&&(it=reshape$3(sum$2(it,st),et.shape));const at=square$3(et);return neg$2(div$1(it,cast$3(at,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fusedBatchNormGradConfig={kernelName:FusedBatchNorm,inputsToSave:["x","mean","variance","scale"],gradFunc:(_,$,_e)=>{const{varianceEpsilon:et}=_e,[tt,rt,nt,it]=$,st=it??scalar(1),at=getReductionAxes(rt.shape,tt.shape),ot=[];if(rt.rank===1){for(let kt=0;kt<tt.shape.length-1;++kt)ot.push(tt.shape[kt]);ot.push(1)}const dt=sub$2(tt,rt),ht=mul(_,st),yt=rsqrt$2(add$3(nt,scalar(et))),vt=mul(mul(mul(yt,yt),yt),scalar(-.5));return{x:()=>rt.rank===1?reshape$3(mul(mul(_,tile$3(reshape$3(yt,[1,1,1,rt.shape[0]]),ot)),st),tt.shape):reshape$3(mul(mul(_,yt),st),tt.shape),mean:()=>{let kt=mul(mul(yt,scalar(-1)),ht);return rt.rank===1&&(kt=sum$2(kt,at)),reshape$3(kt,rt.shape)},variance:()=>{let kt=mul(mul(vt,dt),ht);return rt.rank===1&&(kt=sum$2(kt,at)),reshape$3(kt,rt.shape)},scale:()=>{const kt=mul(dt,yt);let Lt=mul(_,kt);return rt.rank===1&&(Lt=sum$2(Lt,at)),reshape$3(Lt,rt.shape)},offset:()=>{let kt=_;return rt.rank===1&&(kt=sum$2(kt,at)),reshape$3(kt,rt.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gatherGradConfig={kernelName:GatherV2,inputsToSave:["x","indices"],gradFunc:(_,$,_e)=>{const[et,tt]=$,{axis:rt,batchDims:nt}=_e,it=parseAxisParam(rt,et.shape)[0],st=(at,ot,dt)=>()=>{const ht=at.shape,yt=ot.size,vt=ht.slice(0,it),xt=vt.length,wt=ht.slice(rt,ht.length).slice(1),Et=wt.length,At=arrayRange(0,xt),jt=arrayRange(xt+1,xt+1+Et),kt=arrayConcat([vt,[yt],wt]),Lt=reshape$3(dt,kt),Bt=reshape$3(ot,[yt]),Gt=arrayConcat([[xt],At,jt]),er=transpose$2(Lt,Gt);let tr=unsortedSegmentSum$2(er,Bt,at.shape[it]);const ar=getUndoAxesPermutation(Gt);return tr=transpose$2(tr,ar),tr};if(nt===1){const at=et.shape[0],ot=et.split(at,0);return{x:()=>stack(ot.map((yt,vt)=>st(yt,tt.slice(vt,1),_.slice(vt,1))())).reshape(et.shape),indices:()=>tt}}else return{x:st(et,tt,_),indices:()=>tt}}};function arrayRange(_,$){const _e=[];for(let et=_;et<$;++et)_e.push(et);return _e}function arrayConcat(_){const $=[];for(let _e=0;_e<_.length;++_e)for(let et=0;et<_[_e].length;++et)$.push(_[_e][et]);return $}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const greaterEqualGradConfig={kernelName:GreaterEqual,inputsToSave:["a","b"],gradFunc:(_,$)=>{const[_e,et]=$;return{a:()=>zerosLike$2(_e),b:()=>zerosLike$2(et)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const identityGradConfig={kernelName:Identity$1,gradFunc:_=>({x:()=>cast$3(_,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isFiniteGradConfig={kernelName:IsFinite,gradFunc:_=>({x:()=>zerosLike$2(_)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isInfGradConfig={kernelName:IsInf,gradFunc:_=>({x:()=>zerosLike$2(_)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isNanGradConfig={kernelName:IsNan,gradFunc:_=>({x:()=>zerosLike$2(_)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const leakyReluGradConfig={kernelName:LeakyRelu,inputsToSave:["x"],gradFunc:(_,$,_e)=>{const[et]=$,{alpha:tt}=_e,rt=greater$3(et,0);return{x:()=>where(rt,_,mul(_,tt))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const log1pGradConfig={kernelName:Log1p,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>div$1(_,add$3(_e,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logGradConfig={kernelName:Log,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>div$1(_,cast$3(_e,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logSoftmaxGradConfig={kernelName:LogSoftmax$1,inputsToSave:[],outputsToSave:[!0],gradFunc:(_,$,_e)=>{const[et]=$,{axis:tt}=_e;return{logits:()=>{const nt=exp$3(et);return sub$2(_,mul(sum$2(_,tt,!0),nt))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function localResponseNormalizationBackprop_(_,$,_e,et=5,tt=1,rt=1,nt=.5){const it={x:_,y:$,dy:_e},st={depthRadius:et,bias:tt,alpha:rt,beta:nt};return ENGINE.runKernel(LRNGrad,it,st)}const localResponseNormalizationBackprop=op({localResponseNormalizationBackprop_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lrnGradConfig={kernelName:LRN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(_,$,_e)=>{const[et,tt]=$,{depthRadius:rt,bias:nt,alpha:it,beta:st}=_e;return{x:()=>localResponseNormalizationBackprop(et,tt,_,rt,nt,it,st)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gradForMinAndMax(_,$,_e,et){return $.rank<_e.rank&&($=reshape$3($,expandShapeToKeepDim($.shape,et))),_.rank<_e.rank&&(_=reshape$3(_,expandShapeToKeepDim(_.shape,et))),{x:()=>mul(_,cast$3(equal$2(_e,$),_.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxGradConfig={kernelName:Max,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(_,$,_e)=>{const et=_e,{reductionIndices:tt}=et,rt=$[0],nt=$[1],it=parseAxisParam(tt,rt.shape),st=gradForMinAndMax(_,nt,rt,it);return{x:()=>st.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maximumGradConfig={kernelName:Maximum$1,inputsToSave:["a","b"],gradFunc:(_,$)=>{const[_e,et]=$;return{a:()=>mul(_,cast$3(greaterEqual$2(_e,et),"float32")),b:()=>mul(_,cast$3(less$3(_e,et),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3dGrad_(_,$,_e,et,tt,rt,nt){const it=convertToTensor(_,"dy","maxPool3dGrad"),st=convertToTensor($,"input","maxPool3dGrad"),at=convertToTensor(_e,"output","maxPool3dGrad");let ot=it,dt=st,ht=at,yt=!1;st.rank===4&&(yt=!0,ot=reshape$3(it,[1,it.shape[0],it.shape[1],it.shape[2],it.shape[3]]),dt=reshape$3(st,[1,st.shape[0],st.shape[1],st.shape[2],st.shape[3]]),ht=reshape$3(at,[1,at.shape[0],at.shape[1],at.shape[2],at.shape[3]])),assert$1(ot.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${ot.rank}.`),assert$1(dt.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${dt.rank}.`),assert$1(ht.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${ht.rank}.`),checkPadOnDimRoundingMode("maxPool3dGrad",rt,nt);const vt={dy:ot,input:dt,output:ht},xt={filterSize:et,strides:tt,pad:rt,dimRoundingMode:nt},wt=ENGINE.runKernel(MaxPool3DGrad,vt,xt);return yt?reshape$3(wt,[wt.shape[1],wt.shape[2],wt.shape[3],wt.shape[4]]):wt}const maxPool3dGrad=op({maxPool3dGrad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxPool3DGradConfig$2={kernelName:MaxPool3D,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(_,$,_e)=>{const[et,tt]=$,{filterSize:rt,strides:nt,pad:it,dimRoundingMode:st}=_e;return{x:()=>maxPool3dGrad(_,et,tt,rt,nt,it,st)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolGrad_(_,$,_e,et,tt,rt,nt){const it=convertToTensor(_,"dy","maxPoolGrad"),st=convertToTensor($,"input","maxPoolGrad"),at=convertToTensor(_e,"output","maxPoolGrad");assert$1(st.rank===it.rank,()=>`Rank of input (${st.rank}) does not match rank of dy (${it.rank})`),assert$1(it.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${it.rank}.`),assert$1(st.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${st.rank}.`),checkPadOnDimRoundingMode("maxPoolGrad",rt,nt);const ot={dy:it,input:st,output:at},dt={filterSize:et,strides:tt,pad:rt,dimRoundingMode:nt};return ENGINE.runKernel(MaxPoolGrad,ot,dt)}const maxPoolGrad$2=op({maxPoolGrad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxPoolGradConfig$2={kernelName:MaxPool,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(_,$,_e)=>{const[et,tt]=$,{filterSize:rt,strides:nt,pad:it}=_e;return{x:()=>maxPoolGrad$2(_,et,tt,rt,nt,it)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const meanGradConfig={kernelName:Mean,inputsToSave:["x"],gradFunc:(_,$,_e)=>{const[et]=$,{axis:tt}=_e,rt=parseAxisParam(tt,et.shape),it=computeOutAndReduceShapes(et.shape,rt)[1],st=sizeFromShape(it);return{x:()=>{const ot=et.shape.slice();rt.forEach(yt=>{ot[yt]=1});const dt=reshape$3(_,ot);return div$1(mul(dt,ones$1(et.shape,"float32")),st)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const minGradConfig={kernelName:Min,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(_,$,_e)=>{const et=_e,{axis:tt}=et,[rt,nt]=$,it=parseAxisParam(tt,rt.shape),st=gradForMinAndMax(_,nt,rt,it);return{x:()=>st.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const minimumGradConfig={kernelName:Minimum$1,inputsToSave:["a","b"],gradFunc:(_,$)=>{const[_e,et]=$;return{a:()=>mul(_,cast$3(lessEqual$2(_e,et),"float32")),b:()=>mul(_,cast$3(greater$3(_e,et),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mirrorPadGradConfig={kernelName:MirrorPad,inputsToSave:["x"],gradFunc:(_,$,_e)=>{const et=$[0],{paddings:tt}=_e,rt=tt.map(nt=>nt[0]);return{x:()=>slice$2(_,rt,et.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const modGradConfig={kernelName:Mod,inputsToSave:["a","b"],gradFunc:(_,$)=>{const[_e,et]=$,tt=assertAndGetBroadcastShape(_e.shape,et.shape);return{a:()=>{const it=getReductionAxes(_e.shape,tt);return it.length>0?reshape$3(sum$2(_,it),_e.shape):_},b:()=>{const it=mul(_,neg$2(floor$2(div$1(_e,et)))),st=getReductionAxes(et.shape,tt);return st.length>0?reshape$3(sum$2(it,st),et.shape):it}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const multiplyGradConfig={kernelName:Multiply$1,inputsToSave:["a","b"],gradFunc:(_,$)=>{const[_e,et]=$,tt=assertAndGetBroadcastShape(_e.shape,et.shape);return{a:()=>{const it=mul(_,cast$3(et,"float32")),st=getReductionAxes(_e.shape,tt);return st.length>0?reshape$3(sum$2(it,st),_e.shape):it},b:()=>{const it=mul(_,cast$3(_e,"float32")),st=getReductionAxes(et.shape,tt);return st.length>0?reshape$3(sum$2(it,st),et.shape):it}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const negGradConfig={kernelName:Neg,gradFunc:_=>({x:()=>neg$2(_)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oneHotGradConfig={kernelName:OneHot,inputsToSave:["indices"],gradFunc:(_,$)=>{const _e=$[0];return{indices:()=>zeros$2(_e.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const onesLikeGradConfig={kernelName:OnesLike,gradFunc:_=>({x:()=>zerosLike$2(_)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const packGradConfig={kernelName:Pack,saveAllInputs:!0,gradFunc:(_,$,_e)=>{const{axis:et}=_e;return unstack(_,et).map(rt=>()=>rt)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const padV2GradConfig={kernelName:PadV2,inputsToSave:["x"],gradFunc:(_,$,_e)=>{const et=$[0],{paddings:tt}=_e,rt=tt.map(nt=>nt[0]);return{x:()=>slice$2(_,rt,et.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const powGradConfig={kernelName:Pow,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(_,$)=>{const[_e,et,tt]=$,rt=_e,nt=et,it=assertAndGetBroadcastShape(rt.shape,nt.shape);return{a:()=>{const ot=cast$3(nt,"float32");let dt=mul(_,mul(ot,pow$3(rt,sub$2(ot,scalar(1)))));const ht=getReductionAxes(rt.shape,it);return ht.length>0&&(dt=sum$2(dt,ht)),reshape$3(dt,rt.shape)},b:()=>{const ot=greater$3(rt,0),dt=where(ot,log$3(rt),zerosLike$2(rt));let ht=mul(_,mul(tt,dt));const yt=getReductionAxes(nt.shape,it);return yt.length>0&&(ht=sum$2(ht,yt)),reshape$3(ht,nt.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const preluGradConfig={kernelName:Prelu,inputsToSave:["x","alpha"],gradFunc:(_,$)=>{const[_e,et]=$,tt=greater$3(_e,0);return{x:()=>where(tt,_,mul(_,et)),alpha:()=>{let rt=where(tt,zerosLike$2(_),mul(_,_e));const nt=getReductionAxes(et.shape,_.shape);return nt.length>0&&(rt=sum$2(rt,nt)),reshape$3(rt,et.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function prodGradFn_(_,$,_e){const et=_.shape.slice();et[_e]=1;const tt=reshape$3($,et),rt=cumprod$2(_,_e,!0,!1),nt=cumprod$2(_,_e,!0,!0),it=mul(rt,nt);return mul(tt,it)}function prodsGradFn_(_,$,_e){const et=_.shape.length,tt=et-_e.length,rt=getAxesPermutation(_e,et);let nt=_;rt!=null&&(nt=transpose$2(_,rt));const it=nt.shape.slice(),at=it.splice(et-_e.length,_e.length).reduce((ht,yt)=>ht*yt,1);it.push(at);const ot=nt.reshape(it);let dt=prodGradFn_(ot,$,tt);if(dt=dt.reshape(nt.shape),rt!=null){const ht=getUndoAxesPermutation(rt);dt=transpose$2(dt,ht)}return dt}const prodGradConfig={kernelName:Prod,inputsToSave:["x"],gradFunc:(_,$,_e)=>{const[et]=$,{axis:tt}=_e;let rt=[];return tt==null?rt=et.shape.map((nt,it)=>it):typeof tt=="number"?rt=[tt]:rt=tt,{x:()=>prodsGradFn_(et,_,rt)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const divGradConfig={kernelName:RealDiv,inputsToSave:["a","b"],gradFunc:(_,$)=>{const[_e,et]=$,tt=assertAndGetBroadcastShape(_e.shape,et.shape);return{a:()=>{const it=div$1(_,cast$3(et,"float32")),st=getReductionAxes(_e.shape,tt);return st.length>0?reshape$3(sum$2(it,st),_e.shape):it},b:()=>{let it=mul(_,cast$3(_e,"float32"));const st=getReductionAxes(et.shape,tt);st.length>0&&(it=reshape$3(sum$2(it,st),et.shape));const at=square$3(et);return neg$2(div$1(it,cast$3(at,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reciprocalGradConfig={kernelName:Reciprocal,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>div$1(_,neg$2(square$3(_e)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const relu6GradConfig={kernelName:Relu6$1,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$,et=mul(lessEqual$2(_e,6),step$2(_e));return{x:()=>mul(_,cast$3(et,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reluGradConfig={kernelName:Relu$1,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>mul(_,cast$3(step$2(_e),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reshapeGradConfig={kernelName:Reshape$1,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>reshape$3(_,_e.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const resizeBilinearGradConfig$2={kernelName:ResizeBilinear,inputsToSave:["images"],gradFunc:(_,$,_e)=>{const[et]=$,tt={dy:_,images:et};return{images:()=>ENGINE.runKernel(ResizeBilinearGrad,tt,_e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const resizeNearestNeighborGradConfig$2={kernelName:ResizeNearestNeighbor,inputsToSave:["images"],gradFunc:(_,$,_e)=>{const[et]=$,tt={dy:_,images:et};return{images:()=>ENGINE.runKernel(ResizeNearestNeighborGrad,tt,_e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reverseGradConfig={kernelName:Reverse,gradFunc:(_,$,_e)=>{const{dims:et}=_e,tt=parseAxisParam(et,_.shape);return{x:()=>reverse$3(_,tt)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const roundGradConfig={kernelName:Round,gradFunc:_=>({x:()=>zerosLike$2(_)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rsqrtGradConfig={kernelName:Rsqrt,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>neg$2(div$1(_,mul(pow$3(_e,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const selectGradConfig={kernelName:Select,inputsToSave:["condition"],gradFunc:(_,$)=>{const[_e]=$;return{condition:()=>cast$3(zerosLike$2(_e),"float32"),t:()=>mul(_,cast$3(_e,_.dtype)),e:()=>mul(_,cast$3(logicalNot$2(_e),_.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const seluGradConfig={kernelName:Selu$1,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>{const et=greater$3(_e,scalar(0)),tt=scalar(SELU_SCALEALPHA),rt=scalar(SELU_SCALE),nt=mul(_,rt),it=mul(mul(_,tt),exp$3(cast$3(_e,"float32")));return where(et,nt,it)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sigmoidGradConfig={kernelName:Sigmoid$1,outputsToSave:[!0],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>mul(_,mul(_e,sub$2(scalar(1),_e)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const signGradConfig={kernelName:Sign,gradFunc:_=>({x:()=>zerosLike$2(_)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sinGradConfig={kernelName:Sin,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>mul(cos$3(cast$3(_e,"float32")),_)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sinhGradConfig={kernelName:Sinh,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>mul(cosh$2(cast$3(_e,"float32")),_)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sliceGradConfig={kernelName:Slice,inputsToSave:["x"],gradFunc:(_,$,_e)=>{const[et]=$,{begin:tt,size:rt}=_e,nt=et.shape,[it,st]=parseSliceParams(et,tt,rt),at=[];for(let ot=0;ot<_.rank;ot++)at.push([it[ot],nt[ot]-it[ot]-st[ot]]);return{x:()=>pad$1(_,at)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const softmaxGradConfig={kernelName:Softmax$2,outputsToSave:[!0],gradFunc:(_,$,_e)=>{const[et]=$,{dim:tt}=_e,rt=!0,nt=mul(_,et);return{logits:()=>sub$2(nt,mul(sum$2(nt,[tt],rt),et))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const softplusGradConfig={kernelName:Softplus$1,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>mul(_,sigmoid$2(_e))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const spaceToBatchNDGradConfig={kernelName:SpaceToBatchND,gradFunc:(_,$,_e)=>{const{blockShape:et,paddings:tt}=_e;return{x:()=>batchToSpaceND$2(_,et,tt)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const splitVGradConfig={kernelName:SplitV,gradFunc:(_,$,_e)=>{const{axis:et}=_e;return{x:()=>concat$2(_,et)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sqrtGradConfig={kernelName:Sqrt,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>div$1(_,mul(sqrt$4(cast$3(_e,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const squareGradConfig={kernelName:Square,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>mul(_,mul(cast$3(_e,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const squaredDifferenceGradConfig={kernelName:SquaredDifference,inputsToSave:["a","b"],gradFunc:(_,$)=>{const[_e,et]=$,tt=scalar(2);return{a:()=>mul(_,mul(tt,sub$2(_e,et))),b:()=>mul(_,mul(tt,sub$2(et,_e)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const stepGradConfig={kernelName:Step$1,gradFunc:_=>({x:()=>zerosLike$2(_)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const subGradConfig={kernelName:Sub,inputsToSave:["a","b"],gradFunc:(_,$)=>{const[_e,et]=$,tt=assertAndGetBroadcastShape(_e.shape,et.shape);return{a:()=>{let it=_;const st=getReductionAxes(_e.shape,tt);return st.length>0&&(it=sum$2(it,st)),reshape$3(it,_e.shape)},b:()=>{let it=_;const st=getReductionAxes(et.shape,tt);return st.length>0&&(it=sum$2(it,st)),reshape$3(neg$2(it),et.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sumGradConfig={kernelName:Sum,inputsToSave:["x"],gradFunc:(_,$,_e)=>{const[et]=$,tt=et.shape.slice(),{axis:rt}=_e;parseAxisParam(rt,et.shape).forEach(at=>{tt[at]=1});const it=reshape$3(_,tt),st=mul(it,ones$1(et.shape,"float32"));return{x:()=>st}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tanGradConfig={kernelName:Tan,inputsToSave:["x"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>div$1(_,square$3(cos$3(_e)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tanhGradConfig={kernelName:Tanh$1,outputsToSave:[!0],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>mul(sub$2(scalar(1),square$3(_e)),_)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tileGradConfig={kernelName:Tile,inputsToSave:["x"],gradFunc:(_,$,_e)=>{const[et]=$,{reps:tt}=_e;return{x:()=>{let nt=zerosLike$2(et);if(et.rank===1)for(let it=0;it<tt[0];++it)nt=add$3(nt,slice$2(_,[it*et.shape[0]],[et.shape[0]]));else if(et.rank===2)for(let it=0;it<tt[0];++it)for(let st=0;st<tt[1];++st)nt=add$3(nt,slice$2(_,[it*et.shape[0],st*et.shape[1]],[et.shape[0],et.shape[1]]));else if(et.rank===3)for(let it=0;it<tt[0];++it)for(let st=0;st<tt[1];++st)for(let at=0;at<tt[2];++at)nt=add$3(nt,slice$2(_,[it*et.shape[0],st*et.shape[1],at*et.shape[2]],[et.shape[0],et.shape[1],et.shape[2]]));else if(et.rank===4)for(let it=0;it<tt[0];++it)for(let st=0;st<tt[1];++st)for(let at=0;at<tt[2];++at)for(let ot=0;ot<tt[3];++ot)nt=add$3(nt,slice$2(_,[it*et.shape[0],st*et.shape[1],at*et.shape[2],ot*et.shape[3]],[et.shape[0],et.shape[1],et.shape[2],et.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${et.rank} tensors yet.`);return nt}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const transposeGradConfig={kernelName:Transpose,gradFunc:(_,$,_e)=>{const et=_e,{perm:tt}=et,rt=getUndoAxesPermutation(tt);return{x:()=>transpose$2(_,rt)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const unpackGradConfig={kernelName:Unpack,gradFunc:(_,$,_e)=>{const et=_e,{axis:tt}=et;return{value:()=>stack(_,tt)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const unsortedSegmentSumGradConfig={kernelName:UnsortedSegmentSum,inputsToSave:["segmentIds"],gradFunc:(_,$)=>{const[_e]=$;return{x:()=>gatherDropNegatives(_,_e)}}};function gatherDropNegatives(_,$){const _e=maximum$3($,zerosLike$2($)),et=gather$1(_,_e);let tt=greaterEqual$2($,scalar(0,"int32"));const rt=et.rank-tt.rank;for(let it=0;it<rt;++it)tt=expandDims$3(tt,it+1);tt=logicalAnd$2(tt,ones$1(et.shape,"bool"));const nt=zerosLike$2(et);return where(tt,et,nt)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zerosLikeGradConfig={kernelName:ZerosLike,gradFunc:_=>({x:()=>zerosLike$2(_)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gradConfigs=[absGradConfig,acosGradConfig,acoshGradConfig,addGradConfig,addNGradConfig,argMaxGradConfig,argMinGradConfig,asinGradConfig,asinhGradConfig,atan2GradConfig,atanGradConfig,atanhGradConfig,avgPool3DGradConfig$2,avgPoolGradConfig$2,batchMatMulGradConfig,batchToSpaceNDGradConfig,broadcastToGradConfig,castGradConfig,ceilGradConfig,clipByValueGradConfig,complexAbsGradConfig,concatGradConfig,conv2DBackpropInputGradConfig,conv2DGradConfig,conv3DGradConfig,cosGradConfig,coshGradConfig,cumsumGradConfig,depthwiseConv2dNativeGradConfig,dilation2dGradConfig,divGradConfig,eluGradConfig$2,erfGradConfig,expGradConfig,expandDimsGradConfig,expm1GradConfig,floorDivGradConfig,floorGradConfig,fusedBatchNormGradConfig,gatherGradConfig,greaterEqualGradConfig,identityGradConfig,isFiniteGradConfig,isInfGradConfig,isNanGradConfig,leakyReluGradConfig,log1pGradConfig,logGradConfig,logSoftmaxGradConfig,lrnGradConfig,maxGradConfig,maxGradConfig,maximumGradConfig,maxPool3DGradConfig$2,maxPoolGradConfig$2,meanGradConfig,minGradConfig,minimumGradConfig,mirrorPadGradConfig,modGradConfig,multiplyGradConfig,negGradConfig,oneHotGradConfig,onesLikeGradConfig,packGradConfig,padV2GradConfig,padV2GradConfig,powGradConfig,preluGradConfig,prodGradConfig,reciprocalGradConfig,relu6GradConfig,reluGradConfig,reshapeGradConfig,resizeBilinearGradConfig$2,resizeNearestNeighborGradConfig$2,reverseGradConfig,roundGradConfig,rsqrtGradConfig,selectGradConfig,seluGradConfig,sigmoidGradConfig,signGradConfig,sinGradConfig,sinhGradConfig,sliceGradConfig,softmaxGradConfig,softplusGradConfig,spaceToBatchNDGradConfig,spaceToBatchNDGradConfig,splitVGradConfig,splitVGradConfig,sqrtGradConfig,squaredDifferenceGradConfig,squareGradConfig,stepGradConfig,subGradConfig,sumGradConfig,tanGradConfig,tanhGradConfig,tileGradConfig,transposeGradConfig,unpackGradConfig,unsortedSegmentSumGradConfig,zerosLikeGradConfig];for(const _ of gradConfigs)registerGradient(_);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.abs=function(){return this.throwIfDisposed(),abs$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.acos=function(){return this.throwIfDisposed(),acos$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.acosh=function(){return this.throwIfDisposed(),acosh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.add=function(_){return this.throwIfDisposed(),add$3(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.all=function(_,$){return this.throwIfDisposed(),all$2(this,_,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.any=function(_,$){return this.throwIfDisposed(),any$2(this,_,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.argMax=function(_){return this.throwIfDisposed(),argMax$2(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.argMin=function(_){return this.throwIfDisposed(),argMin$2(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.asScalar=function(){return this.throwIfDisposed(),assert$1(this.size===1,()=>"The array must have only 1 element."),reshape$3(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.asType=function(_){return this.throwIfDisposed(),cast$3(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.as1D=function(){return this.throwIfDisposed(),reshape$3(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.as2D=function(_,$){return this.throwIfDisposed(),reshape$3(this,[_,$])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.as3D=function(_,$,_e){return this.throwIfDisposed(),reshape$3(this,[_,$,_e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.as4D=function(_,$,_e,et){return this.throwIfDisposed(),reshape$3(this,[_,$,_e,et])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.as5D=function(_,$,_e,et,tt){return this.throwIfDisposed(),reshape$3(this,[_,$,_e,et,tt])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.asin=function(){return this.throwIfDisposed(),asin$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.asinh=function(){return this.throwIfDisposed(),asinh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.atan=function(){return this.throwIfDisposed(),atan$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.atan2=function(_){return this.throwIfDisposed(),atan2$2(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.atanh=function(){return this.throwIfDisposed(),atanh$2(this)};getGlobalTensorClass().prototype.avgPool=function(_,$,_e,et){return this.throwIfDisposed(),avgPool$2(this,_,$,_e,et)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.batchToSpaceND=function(_,$){return this.throwIfDisposed(),batchToSpaceND$2(this,_,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.batchNorm=function(_,$,_e,et,tt){return this.throwIfDisposed(),batchNorm$2(this,_,$,_e,et,tt)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.broadcastTo=function(_){return this.throwIfDisposed(),broadcastTo(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.cast=function(_){return this.throwIfDisposed(),cast$3(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.ceil=function(){return this.throwIfDisposed(),ceil$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.clipByValue=function(_,$){return this.throwIfDisposed(),clipByValue$2(this,_,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.concat=function(_,$){return this.throwIfDisposed(),_ instanceof Tensor&&(_=[_]),concat$2([this,..._],$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.conv1d=function(_,$,_e,et,tt,rt){return this.throwIfDisposed(),conv1d$1(this,_,$,_e,et,tt,rt)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.conv2dTranspose=function(_,$,_e,et,tt){return this.throwIfDisposed(),conv2dTranspose$1(this,_,$,_e,et,tt)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.conv2d=function(_,$,_e,et,tt,rt){return this.throwIfDisposed(),conv2d$3(this,_,$,_e,et,tt,rt)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.cos=function(){return this.throwIfDisposed(),cos$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.cosh=function(){return this.throwIfDisposed(),cosh$2(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.cumprod=function(_,$,_e){return this.throwIfDisposed(),cumprod$2(this,_,$,_e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.cumsum=function(_,$,_e){return this.throwIfDisposed(),cumsum$2(this,_,$,_e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.depthToSpace=function(_,$){return this.throwIfDisposed(),depthToSpace$2(this,_,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.depthwiseConv2d=function(_,$,_e,et,tt,rt){return this.throwIfDisposed(),depthwiseConv2d$3(this,_,$,_e,et,tt,rt)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.dilation2d=function(_,$,_e,et,tt){return this.throwIfDisposed(),dilation2d(this,_,$,_e,et,tt)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.divNoNan=function(_){return this.throwIfDisposed(),divNoNan(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.div=function(_){return this.throwIfDisposed(),div$1(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.dot=function(_){return this.throwIfDisposed(),dot$2(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.elu=function(){return this.throwIfDisposed(),elu$4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.equal=function(_){return this.throwIfDisposed(),equal$2(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.erf=function(){return this.throwIfDisposed(),erf$2(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.euclideanNorm=function(_,$){return this.throwIfDisposed(),euclideanNorm(this,_,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.exp=function(){return this.throwIfDisposed(),exp$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.expandDims=function(_){return this.throwIfDisposed(),expandDims$3(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.expm1=function(){return this.throwIfDisposed(),expm1$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.fft=function(){return this.throwIfDisposed(),fft$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.flatten=function(){return this.throwIfDisposed(),reshape$3(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.floor=function(){return this.throwIfDisposed(),floor$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.floorDiv=function(_){return this.throwIfDisposed(),floorDiv$2(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.gather=function(_,$,_e){return this.throwIfDisposed(),gather$1(this,_,$,_e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.greaterEqual=function(_){return this.throwIfDisposed(),greaterEqual$2(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.greater=function(_){return this.throwIfDisposed(),greater$3(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.ifft=function(){return this.throwIfDisposed(),ifft$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.irfft=function(){return this.throwIfDisposed(),irfft(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.isFinite=function(){return this.throwIfDisposed(),isFinite$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.isInf=function(){return this.throwIfDisposed(),isInf$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.isNaN=function(){return this.throwIfDisposed(),isNaN$4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.leakyRelu=function(_){return this.throwIfDisposed(),leakyRelu$2(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.lessEqual=function(_){return this.throwIfDisposed(),lessEqual$2(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.less=function(_){return this.throwIfDisposed(),less$3(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.localResponseNormalization=function(_,$,_e,et){return this.throwIfDisposed(),localResponseNormalization(this,_,$,_e,et)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.logSigmoid=function(){return this.throwIfDisposed(),logSigmoid(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.logSoftmax=function(_){return this.throwIfDisposed(),logSoftmax(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.logSumExp=function(_,$){return this.throwIfDisposed(),logSumExp(this,_,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.log=function(){return this.throwIfDisposed(),log$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.log1p=function(){return this.throwIfDisposed(),log1p$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.logicalAnd=function(_){return this.throwIfDisposed(),logicalAnd$2(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.logicalNot=function(){return this.throwIfDisposed(),logicalNot$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.logicalOr=function(_){return this.throwIfDisposed(),logicalOr$2(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.logicalXor=function(_){return this.throwIfDisposed(),logicalXor(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.matMul=function(_,$,_e){return this.throwIfDisposed(),matMul$1(this,_,$,_e)};getGlobalTensorClass().prototype.maxPool=function(_,$,_e,et){return this.throwIfDisposed(),maxPool$2(this,_,$,_e,et)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.max=function(_,$){return this.throwIfDisposed(),max$6(this,_,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.maximum=function(_){return this.throwIfDisposed(),maximum$3(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.mean=function(_,$){return this.throwIfDisposed(),mean$1(this,_,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.min=function(_,$){return this.throwIfDisposed(),min$6(this,_,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.minimum=function(_){return this.throwIfDisposed(),minimum$3(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.mirrorPad=function(_,$){return this.throwIfDisposed(),mirrorPad$1(this,_,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.mod=function(_){return this.throwIfDisposed(),mod$2(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.mul=function(_){return this.throwIfDisposed(),mul(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.neg=function(){return this.throwIfDisposed(),neg$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.norm=function(_,$,_e){return this.throwIfDisposed(),norm(this,_,$,_e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.notEqual=function(_){return this.throwIfDisposed(),notEqual$2(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.oneHot=function(_,$=1,_e=0){return this.throwIfDisposed(),oneHot$2(this,_,$,_e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.onesLike=function(){return this.throwIfDisposed(),onesLike$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.pad=function(_,$){return this.throwIfDisposed(),pad$1(this,_,$)};getGlobalTensorClass().prototype.pool=function(_,$,_e,et,tt,rt){return this.throwIfDisposed(),pool$1(this,_,$,_e,et,tt,rt)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.pow=function(_){return this.throwIfDisposed(),pow$3(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.prelu=function(_){return this.throwIfDisposed(),prelu$3(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.prod=function(_,$){return this.throwIfDisposed(),prod$2(this,_,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.reciprocal=function(){return this.throwIfDisposed(),reciprocal$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.relu=function(){return this.throwIfDisposed(),relu$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.relu6=function(){return this.throwIfDisposed(),relu6$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.reshapeAs=function(_){return this.throwIfDisposed(),reshape$3(this,_.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.reshape=function(_){return this.throwIfDisposed(),reshape$3(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.resizeBilinear=function(_,$,_e){return this.throwIfDisposed(),resizeBilinear$3(this,_,$,_e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.resizeNearestNeighbor=function(_,$,_e){return this.throwIfDisposed(),resizeNearestNeighbor$2(this,_,$,_e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.reverse=function(_){return this.throwIfDisposed(),reverse$3(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.rfft=function(){return this.throwIfDisposed(),rfft(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.round=function(){return this.throwIfDisposed(),round$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.rsqrt=function(){return this.throwIfDisposed(),rsqrt$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.selu=function(){return this.throwIfDisposed(),selu$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.separableConv2d=function(_,$,_e,et,tt,rt){return this.throwIfDisposed(),separableConv2d$1(this,_,$,_e,et,tt,rt)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.sigmoid=function(){return this.throwIfDisposed(),sigmoid$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.sign=function(){return this.throwIfDisposed(),sign$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.sin=function(){return this.throwIfDisposed(),sin$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.sinh=function(){return this.throwIfDisposed(),sinh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.slice=function(_,$){return this.throwIfDisposed(),slice$2(this,_,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.softmax=function(_){return this.throwIfDisposed(),softmax$3(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.softplus=function(){return this.throwIfDisposed(),softplus$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.spaceToBatchND=function(_,$){return this.throwIfDisposed(),spaceToBatchND$2(this,_,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.split=function(_,$){return this.throwIfDisposed(),split$2(this,_,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.sqrt=function(){return this.throwIfDisposed(),sqrt$4(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.square=function(){return this.throwIfDisposed(),square$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.squaredDifference=function(_){return this.throwIfDisposed(),squaredDifference$2(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.squeeze=function(_){return this.throwIfDisposed(),squeeze(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.stack=function(_,$){this.throwIfDisposed();const _e=_ instanceof Tensor?[this,_]:[this,..._];return stack(_e,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.step=function(_){return this.throwIfDisposed(),step$2(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.stridedSlice=function(_,$,_e,et,tt,rt,nt,it){return this.throwIfDisposed(),stridedSlice$2(this,_,$,_e,et,tt,rt,nt,it)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.sub=function(_){return this.throwIfDisposed(),sub$2(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.sum=function(_,$){return this.throwIfDisposed(),sum$2(this,_,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.tan=function(){return this.throwIfDisposed(),tan$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.tanh=function(){return this.throwIfDisposed(),tanh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.tile=function(_){return this.throwIfDisposed(),tile$3(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.toBool=function(){return this.throwIfDisposed(),cast$3(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.toFloat=function(){return this.throwIfDisposed(),cast$3(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.toInt=function(){return this.throwIfDisposed(),cast$3(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.topk=function(_,$){return this.throwIfDisposed(),topk(this,_,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.transpose=function(_){return this.throwIfDisposed(),transpose$2(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.unique=function(_){return this.throwIfDisposed(),unique$3(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.unsortedSegmentSum=function(_,$){return this.throwIfDisposed(),unsortedSegmentSum$2(this,_,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.unstack=function(_){return this.throwIfDisposed(),unstack(this,_)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.where=function(_,$){return this.throwIfDisposed(),where(_,this,$)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getGlobalTensorClass().prototype.zerosLike=function(){return this.throwIfDisposed(),zerosLike$2(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class AttributeError extends Error{constructor($){super($),Object.setPrototypeOf(this,AttributeError.prototype)}}class RuntimeError extends Error{constructor($){super($),Object.setPrototypeOf(this,RuntimeError.prototype)}}class ValueError extends Error{constructor($){super($),Object.setPrototypeOf(this,ValueError.prototype)}}class NotImplementedError extends Error{constructor($){super($),Object.setPrototypeOf(this,NotImplementedError.prototype)}}class AssertionError extends Error{constructor($){super($),Object.setPrototypeOf(this,AssertionError.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class LruCache{constructor($){this.maxEntries=$||100,this.cache=new Map}get($){let _e;return this.cache.has($)&&(_e=this.cache.get($),this.cache.delete($),this.cache.set($,_e)),_e}put($,_e){if(this.cache.has($))this.cache.delete($);else if(this.cache.size>=this.maxEntries){const et=this.cache.keys().next().value;this.cache.delete(et)}this.cache.set($,_e)}getMaxEntries(){return this.maxEntries}setMaxEntries($){if($<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${$}.`);if(this.maxEntries>$)for(let _e=0;_e<this.maxEntries-$;_e++){const et=this.cache.keys().next().value;this.cache.delete(et)}this.maxEntries=$}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pyListRepeat(_,$){if(Array.isArray(_)){let _e=[];for(let et=0;et<$;et++)_e=_e.concat(_);return _e}else{const _e=new Array($);return _e.fill(_),_e}}function assert(_,$){if(!_)throw new AssertionError($)}function count(_,$){let _e=0;for(const et of _)et===$&&_e++;return _e}function singletonOrArray(_){return _.length===1?_[0]:_}function toList(_){return Array.isArray(_)?_:[_]}function toSnakeCase(_){const _e=_.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return _e[0]!=="_"?_e:"private"+_e}function toCamelCase(_){return _.length<=1||_.indexOf("_")===-1?_:_.replace(/[_]+(\w|$)/g,($,_e)=>_e.toUpperCase())}let _GLOBAL_CUSTOM_OBJECTS={};function serializeKerasObject(_){if(_==null)return null;const $={};return $.className=_.getClassName(),$.config=_.getConfig(),$}function convertNDArrayScalarsInConfig(_){if(!(_==null||typeof _!="object"))if(Array.isArray(_))_.forEach($=>convertNDArrayScalarsInConfig($));else{const $=Object.keys(_);for(const _e of $){const et=_[_e];et!=null&&typeof et=="object"&&(!Array.isArray(et)&&et.type==="ndarray"&&typeof et.value=="number"?_[_e]=et.value:convertNDArrayScalarsInConfig(et))}}}function deserializeKerasObject(_,$={},_e={},et="object",tt=!1){if(typeof _=="string"){const rt=_;let nt;if(rt in _e)nt=_e[rt];else if(rt in _GLOBAL_CUSTOM_OBJECTS)nt=_GLOBAL_CUSTOM_OBJECTS[rt];else if(nt=$[rt],nt==null)throw new ValueError(`Unknown ${et}: ${_}. This may be due to one of the following reasons:
1. The ${et} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${et} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return nt}else{const rt=_;if(rt.className==null||rt.config==null)throw new ValueError(`${et}: Improper config format: ${JSON.stringify(rt)}.
'className' and 'config' must set.`);const nt=rt.className;let it,st;if(nt in _e?[it,st]=_e[nt]:nt in _GLOBAL_CUSTOM_OBJECTS?[it,st]=_GLOBAL_CUSTOM_OBJECTS.className:nt in $&&([it,st]=$[nt]),it==null)throw new ValueError(`Unknown ${et}: ${nt}. This may be due to one of the following reasons:
1. The ${et} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${et} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(st!=null){const at={};for(const yt of Object.keys(_GLOBAL_CUSTOM_OBJECTS))at[yt]=_GLOBAL_CUSTOM_OBJECTS[yt];for(const yt of Object.keys(_e))at[yt]=_e[yt];const ot=rt.config;ot.customObjects=at;const dt=Object.assign({},_GLOBAL_CUSTOM_OBJECTS);for(const yt of Object.keys(_e))_GLOBAL_CUSTOM_OBJECTS[yt]=_e[yt];convertNDArrayScalarsInConfig(rt.config);const ht=st(it,rt.config,_e,tt);return _GLOBAL_CUSTOM_OBJECTS=Object.assign({},dt),ht}else{const at=Object.assign({},_GLOBAL_CUSTOM_OBJECTS);for(const dt of Object.keys(_e))_GLOBAL_CUSTOM_OBJECTS[dt]=_e[dt];const ot=new it(rt.config);return _GLOBAL_CUSTOM_OBJECTS=Object.assign({},at),ot}}}function numberCompare(_,$){return _<$?-1:_>$?1:0}function reverseNumberCompare(_,$){return-1*numberCompare(_,$)}function unique$2(_){if(_==null)return _;const $=[];for(const _e of _)$.indexOf(_e)===-1&&$.push(_e);return $}function isObjectEmpty(_){if(_==null)throw new ValueError(`Invalid value in obj: ${JSON.stringify(_)}`);for(const $ in _)if(_.hasOwnProperty($))return!1;return!0}function checkStringTypeUnionValue(_,$,_e){if(_e!=null&&_.indexOf(_e)<0)throw new ValueError(`${_e} is not a valid ${$}.  Valid values are ${_} or null/undefined.`)}function checkArrayTypeAndLength(_,$,_e=0,et=1/0){return assert(_e>=0),assert(et>=_e),Array.isArray(_)&&_.length>=_e&&_.length<=et&&_.every(tt=>typeof tt===$)}function assertPositiveInteger(_,$){Array.isArray(_)?(assert$1(_.length>0,()=>`${$} is unexpectedly an empty array.`),_.forEach((_e,et)=>assertPositiveInteger(_e,`element ${et+1} of ${$}`))):assert$1(Number.isInteger(_)&&_>0,()=>`Expected ${$} to be a positive integer, but got ${formatAsFriendlyString(_)}.`)}function formatAsFriendlyString(_){return _===null?"null":Array.isArray(_)?"["+_.map($=>formatAsFriendlyString($)).join(",")+"]":typeof _=="string"?`"${_}"`:`${_}`}function debounce$2(_,$,_e){let et=_e!=null?_e():now$2(),tt;return(...nt)=>{const it=_e!=null?_e():now$2();return it-et<$||(et=it,tt=_(...nt)),tt}}function mapActivationToFusedKernel(_){return _==="relu"?"relu":_==="linear"?"linear":_==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let _nextUniqueTensorId=0;function getNextUniqueTensorId(){return _nextUniqueTensorId++}const _uidPrefixes={};function getUid(_=""){return _ in _uidPrefixes||(_uidPrefixes[_]=0),_uidPrefixes[_]+=1,_+_uidPrefixes[_].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const VALID_DATA_FORMAT_VALUES=["channelsFirst","channelsLast"],VALID_INTERPOLATION_FORMAT_VALUES=["nearest","bilinear"],VALID_PADDING_MODE_VALUES=["valid","same","causal"],VALID_POOL_MODE_VALUES=["max","avg"],VALID_BIDIRECTIONAL_MERGE_MODES=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const nameMap=new Map;function checkDataFormat(_){checkStringTypeUnionValue(VALID_DATA_FORMAT_VALUES,"DataFormat",_)}function checkInterpolationFormat(_){checkStringTypeUnionValue(VALID_INTERPOLATION_FORMAT_VALUES,"InterpolationFormat",_)}function checkPaddingMode(_){checkStringTypeUnionValue(VALID_PADDING_MODE_VALUES,"PaddingMode",_)}function checkPoolMode(_){checkStringTypeUnionValue(VALID_POOL_MODE_VALUES,"PoolMode",_)}const _nameScopeStack=[],_nameScopeDivider="/";function nameScope(_,$){_nameScopeStack.push(_);try{const _e=$();return _nameScopeStack.pop(),_e}catch(_e){throw _nameScopeStack.pop(),_e}}function currentNameScopePrefix(){return _nameScopeStack.length===0?"":_nameScopeStack.join(_nameScopeDivider)+_nameScopeDivider}function getScopedTensorName(_){if(!isValidTensorName(_))throw new Error("Not a valid tensor name: '"+_+"'");return currentNameScopePrefix()+_}function getUniqueTensorName(_){if(!isValidTensorName(_))throw new Error("Not a valid tensor name: '"+_+"'");nameMap.has(_)||nameMap.set(_,0);const $=nameMap.get(_);if(nameMap.set(_,nameMap.get(_)+1),$>0){const _e=`${_}_${$}`;return nameMap.set(_e,1),_e}else return _}const tensorNameRegex=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function isValidTensorName(_){return!!_.match(tensorNameRegex)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function isInteger(_){return _===parseInt(_.toString(),10)}function arrayProd(_,$,_e){$==null&&($=0),_e==null&&(_e=_.length);let et=1;for(let tt=$;tt<_e;++tt)et*=_[tt];return et}function min$5(_){if(_.length===0)return Number.NaN;let $=Number.POSITIVE_INFINITY;for(let _e=0;_e<_.length;_e++){const et=_[_e];et<$&&($=et)}return $}function max$5(_){if(_.length===0)return Number.NaN;let $=Number.NEGATIVE_INFINITY;for(let _e=0;_e<_.length;_e++){const et=_[_e];et>$&&($=et)}return $}function range$6(_,$){if($<_)throw new ValueError(`end (${$}) < begin (${_}) is forbidden.`);const _e=[];for(let et=_;et<$;++et)_e.push(et);return _e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let _epsilon;function epsilon$2(){return _epsilon==null&&(_epsilon=backend().epsilon()),_epsilon}function imageDataFormat(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cast$2(_,$){return cast$3(_,$)}function expandDims$2(_,$=-1){const _e=_.shape.slice();return $<0&&($=_e.length+$+1),_e.splice($,0,1),reshape$3(_,_e)}function repeat(_,$){return tidy(()=>{if(_.shape.length!==2)throw new ValueError(`repeat() expects a rank-2 tensor, but received a rank-${_.shape.length} tensor.`);const _e=expandDims$2(_,1);return tile$2(_e,[1,$,1])})}function flatten$1(_){const $=[arrayProd(_.shape)];return reshape$3(_,$)}function batchFlatten(_){if(_.rank<=1)throw new ValueError(`batchFlatten requires a minimum rank of 2. Got rank: ${_.rank}.`);const $=[_.shape[0],arrayProd(_.shape,1)];return reshape$3(_,$)}function sliceAlongFirstAxis(_,$,_e){return tidy(()=>{switch(_.rank){case 1:return slice1d(_,$,_e);case 2:return slice2d(_,[$,0],[_e,_.shape[1]]);case 3:return slice3d(_,[$,0,0],[_e,_.shape[1],_.shape[2]]);case 4:return slice4d(_,[$,0,0,0],[_e,_.shape[1],_.shape[2],_.shape[3]]);case 5:return slice$2(_,[$,0,0,0,0],[_e,_.shape[1],_.shape[2],_.shape[3],_.shape[4]]);case 6:return slice$2(_,[$,0,0,0,0,0],[_e,_.shape[1],_.shape[2],_.shape[3],_.shape[4],_.shape[5]]);default:throw new ValueError(`sliceAlongFirstAxis() received an unsupported tensor rank: ${_.rank}`)}})}function sliceAlongLastAxis(_,$,_e){return tidy(()=>{switch(_.rank){case 1:return slice1d(_,$,_e);case 2:return slice2d(_,[0,$],[_.shape[0],_e]);case 3:return slice3d(_,[0,0,$],[_.shape[0],_.shape[1],_e]);case 4:return slice4d(_,[0,0,0,$],[_.shape[0],_.shape[1],_.shape[2],_e]);default:throw new ValueError(`sliceAlongLastAxis() received an unsupported tensor rank: ${_.rank}`)}})}function sliceAlongAxis(_,$,_e,et){return tidy(()=>{switch(_.rank){case 1:return slice1d(_,$,_e);case 2:switch(et){case 1:return sliceAlongFirstAxis(_,$,_e);case 2:return sliceAlongLastAxis(_,$,_e);default:throw new ValueError(`The axis is not within the rank of the tensor ${et}`)}case 3:switch(et){case 1:return sliceAlongFirstAxis(_,$,_e);case 2:return slice3d(_,[0,$,0],[_.shape[0],_e,_.shape[2]]);case 3:return sliceAlongLastAxis(_,$,_e);default:throw new ValueError(`The axis is not within the rank of the tensor ${et}`)}case 4:switch(et){case 1:return sliceAlongFirstAxis(_,$,_e);case 2:return slice4d(_,[0,$,0,0],[_.shape[0],_e,_.shape[2],_.shape[3]]);case 3:return slice4d(_,[0,0,$,0],[_.shape[0],_.shape[1],_e,_.shape[3]]);case 4:return sliceAlongLastAxis(_,$,_e);default:throw new ValueError(`The axis is not within the rank of the tensor ${et}`)}default:throw new ValueError(`sliceAlongLastAxis() received an unsupported tensor rank: ${_.rank}`)}})}function concatenate$1(_,$=-1){let _e;return $<0&&(_e=_[0].rank,_e!==0?$=_e:$=0),$===_[0].rank&&($=-1),concat$2(_,$)}function concatAlongFirstAxis(_,$){switch(_.rank){case 1:return concat1d([_,$]);case 2:return concat2d([_,$],0);case 3:return concat3d([_,$],0);case 4:return concat4d([_,$],0);default:throw new ValueError(`concatAlongFirstAxis() received an unsupported tensor rank: ${_.rank}`)}}function tile$2(_,$){if(Array.isArray($)||($=[$]),_.rank!==$.length)throw new ValueError(`The length of input n (${$.length}) does not match the number of dimensions in input x (${_.rank})`);return tile$3(_,$)}function randomNormal$1(_,$=0,_e=1,et,tt){return randomNormal$2(_,$,_e,et,tt)}function dot$1(_,$,_e,et){if(_.rank<2||$.rank<2)throw new NotImplementedError(`dot requires both inputs to be rank >= 2 but got x shape = ${_.shape} and y shape = ${$.shape}`);if($.rank>=3){const tt=_.shape.slice(-1)[0],rt=$.shape.slice(-2)[0];if(tt!==rt)throw new NotImplementedError(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${_.shape} and  y shape = ${$.shape}`)}if(_.rank===2&&$.rank===2)return matMul({a:_,b:$,transposeA:!1,transposeB:!1,bias:et?reshapeBias(_.rank,et,imageDataFormat()):null,activation:_e});{const tt=_.shape.slice(),rt=tt.pop();_=reshape$3(_,[-1,rt]);const nt=$.shape.slice(),it=nt.pop(),st=nt.pop(),at=[...nt,it],ot=Array.from({length:$.rank},(vt,xt)=>xt===0?$.rank-2:xt<=$.rank-2?xt-1:xt);$=reshape$3(transpose$2($,ot),[st,-1]);const dt=[...tt,...at];return reshape$3(matMul({a:_,b:$,transposeA:!1,transposeB:!1,bias:et?reshapeBias(_.rank,et,imageDataFormat()):null,activation:_e}),dt)}}function gather(_,$,_e){return tidy(()=>(Array.isArray($)?$=tensor1d($,"int32"):$=cast$3($,"int32"),gather$1(_,$,_e)))}function square$2(_){return mul(_,_)}function reshapeBias(_,$,_e){const et=$.shape;if($.rank!==1&&$.rank!==_)throw new ValueError(`Unexpected bias dimensions: ${$.rank}; expected it to be 1 or ${_}`);if(_===5){if(_e==="channelsFirst")return et.length===1?reshape$3($,[1,et[0],1,1,1]):reshape$3($,[1,et[3],et[0],et[1],et[2]]);if(_e==="channelsLast")return et.length===1?reshape$3($,[1,1,1,1,et[0]]):reshape$3($,[1].concat(et))}else if(_===4){if(_e==="channelsFirst")return et.length===1?reshape$3($,[1,et[0],1,1]):reshape$3($,[1,et[2],et[0],et[1]]);if(_e==="channelsLast")return et.length===1?reshape$3($,[1,1,1,et[0]]):reshape$3($,[1].concat(et))}else if(_===3){if(_e==="channelsFirst")return et.length===1?reshape$3($,[1,et[0],1]):reshape$3($,[1,et[1],et[0]]);if(_e==="channelsLast")return et.length===1?reshape$3($,[1,1,et[0]]):reshape$3($,[1].concat(et))}else if(_<3)return $;throw new ValueError(`Unsupported input rank by biasAdd: ${$.rank}`)}function biasAdd(_,$,_e){return tidy(()=>(_e==null&&(_e=imageDataFormat()),checkDataFormat(_e),add$3(_,reshapeBias(_.rank,$,_e))))}function elu$3(_,$=1){if($!==1)throw new NotImplementedError(`Support for alpha values other than 1 (${$}) is not implemented yet.`);return elu$4(_)}function softsign(_){return tidy(()=>div$1(_,add$3(abs$2(_),1)))}function dropout$1(_,$,_e,et){return tidy(()=>dropout$2(_,$,_e,et))}function hardSigmoid(_){return tidy(()=>{const $=add$3(.5,mul(.2,_));return clipByValue$2($,0,1)})}function inTrainPhase(_,$,_e=!1){return _e?_():$()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const VALID_FAN_MODE_VALUES=["fanIn","fanOut","fanAvg"],VALID_DISTRIBUTION_VALUES=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function checkFanMode(_){checkStringTypeUnionValue(VALID_FAN_MODE_VALUES,"FanMode",_)}function checkDistribution(_){checkStringTypeUnionValue(VALID_DISTRIBUTION_VALUES,"Distribution",_)}class Initializer extends Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class Zeros extends Initializer{apply($,_e){return zeros$2($,_e)}}Zeros.className="Zeros";registerClass(Zeros);class Ones extends Initializer{apply($,_e){return ones$1($,_e)}}Ones.className="Ones";registerClass(Ones);class Constant extends Initializer{constructor($){if(super(),typeof $!="object")throw new ValueError(`Expected argument of type ConstantConfig but got ${$}`);if($.value===void 0)throw new ValueError(`config must have value set but got ${$}`);this.value=$.value}apply($,_e){return tidy(()=>mul(scalar(this.value),ones$1($,_e)))}getConfig(){return{value:this.value}}}Constant.className="Constant";registerClass(Constant);class RandomUniform extends Initializer{constructor($){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=$.minval||this.DEFAULT_MINVAL,this.maxval=$.maxval||this.DEFAULT_MAXVAL,this.seed=$.seed}apply($,_e){return randomUniform$1($,this.minval,this.maxval,_e,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}RandomUniform.className="RandomUniform";registerClass(RandomUniform);class RandomNormal extends Initializer{constructor($){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=$.mean||this.DEFAULT_MEAN,this.stddev=$.stddev||this.DEFAULT_STDDEV,this.seed=$.seed}apply($,_e){if(_e=_e||"float32",_e!=="float32"&&_e!=="int32")throw new NotImplementedError(`randomNormal does not support dType ${_e}.`);return randomNormal$1($,this.mean,this.stddev,_e,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}RandomNormal.className="RandomNormal";registerClass(RandomNormal);class TruncatedNormal extends Initializer{constructor($){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=$.mean||this.DEFAULT_MEAN,this.stddev=$.stddev||this.DEFAULT_STDDEV,this.seed=$.seed}apply($,_e){if(_e=_e||"float32",_e!=="float32"&&_e!=="int32")throw new NotImplementedError(`truncatedNormal does not support dType ${_e}.`);return truncatedNormal$1($,this.mean,this.stddev,_e,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}TruncatedNormal.className="TruncatedNormal";registerClass(TruncatedNormal);class Identity extends Initializer{constructor($){super(),this.gain=$.gain!=null?$.gain:1}apply($,_e){return tidy(()=>{if($.length!==2||$[0]!==$[1])throw new ValueError("Identity matrix initializer can only be used for 2D square matrices.");return mul(this.gain,eye($[0]))})}getConfig(){return{gain:this.gain}}}Identity.className="Identity";registerClass(Identity);function computeFans(_,$="channelsLast"){let _e,et;if(checkDataFormat($),_.length===2)_e=_[0],et=_[1];else if([3,4,5].indexOf(_.length)!==-1){if($==="channelsFirst"){const tt=arrayProd(_,2);_e=_[1]*tt,et=_[0]*tt}else if($==="channelsLast"){const tt=arrayProd(_,0,_.length-2);_e=_[_.length-2]*tt,et=_[_.length-1]*tt}}else{const tt=arrayProd(_);_e=Math.sqrt(tt),et=Math.sqrt(tt)}return[_e,et]}class VarianceScaling extends Initializer{constructor($){if(super(),$.scale<0)throw new ValueError(`scale must be a positive float. Got: ${$.scale}`);this.scale=$.scale==null?1:$.scale,this.mode=$.mode==null?"fanIn":$.mode,checkFanMode(this.mode),this.distribution=$.distribution==null?"normal":$.distribution,checkDistribution(this.distribution),this.seed=$.seed}apply($,_e){const et=computeFans($),tt=et[0],rt=et[1];let nt=this.scale;if(this.mode==="fanIn"?nt/=Math.max(1,tt):this.mode==="fanOut"?nt/=Math.max(1,rt):nt/=Math.max(1,(tt+rt)/2),this.distribution==="normal"){const it=Math.sqrt(nt);if(_e=_e||"float32",_e!=="float32"&&_e!=="int32")throw new NotImplementedError(`${this.getClassName()} does not support dType ${_e}.`);return truncatedNormal$1($,0,it,_e,this.seed)}else{const it=Math.sqrt(3*nt);return randomUniform$1($,-it,it,_e,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}VarianceScaling.className="VarianceScaling";registerClass(VarianceScaling);class GlorotUniform extends VarianceScaling{constructor($){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:$==null?null:$.seed})}getClassName(){return VarianceScaling.className}}GlorotUniform.className="GlorotUniform";registerClass(GlorotUniform);class GlorotNormal extends VarianceScaling{constructor($){super({scale:1,mode:"fanAvg",distribution:"normal",seed:$==null?null:$.seed})}getClassName(){return VarianceScaling.className}}GlorotNormal.className="GlorotNormal";registerClass(GlorotNormal);class HeNormal extends VarianceScaling{constructor($){super({scale:2,mode:"fanIn",distribution:"normal",seed:$==null?null:$.seed})}getClassName(){return VarianceScaling.className}}HeNormal.className="HeNormal";registerClass(HeNormal);class HeUniform extends VarianceScaling{constructor($){super({scale:2,mode:"fanIn",distribution:"uniform",seed:$==null?null:$.seed})}getClassName(){return VarianceScaling.className}}HeUniform.className="HeUniform";registerClass(HeUniform);class LeCunNormal extends VarianceScaling{constructor($){super({scale:1,mode:"fanIn",distribution:"normal",seed:$==null?null:$.seed})}getClassName(){return VarianceScaling.className}}LeCunNormal.className="LeCunNormal";registerClass(LeCunNormal);class LeCunUniform extends VarianceScaling{constructor($){super({scale:1,mode:"fanIn",distribution:"uniform",seed:$==null?null:$.seed})}getClassName(){return VarianceScaling.className}}LeCunUniform.className="LeCunUniform";registerClass(LeCunUniform);class Orthogonal extends Initializer{constructor($){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=$.gain==null?this.DEFAULT_GAIN:$.gain,this.seed=$.seed}apply($,_e){return tidy(()=>{if($.length<2)throw new NotImplementedError("Shape must be at least 2D.");if(_e!=="int32"&&_e!=="float32"&&_e!==void 0)throw new TypeError(`Unsupported data type ${_e}.`);_e=_e;const et=sizeFromShape($.slice(0,-1)),tt=$[$.length-1],rt=et*tt;rt>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${rt}) elements: Slowness may result.`);const nt=[Math.max(tt,et),Math.min(tt,et)],it=randomNormal$1(nt,0,1,_e,this.seed),st=linalg.qr(it,!1);let at=st[0];const dt=st[1].flatten().stridedSlice([0],[Math.min(tt,et)*Math.min(tt,et)],[Math.min(tt,et)+1]);return at=mul(at,dt.sign()),et<tt&&(at=at.transpose()),mul(scalar(this.gain),at.reshape($))})}getConfig(){return{gain:this.gain,seed:this.seed}}}Orthogonal.className="Orthogonal";registerClass(Orthogonal);const INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function deserializeInitializer(_,$={}){return deserializeKerasObject(_,SerializationMap.getMap().classNameMap,$,"initializer")}function serializeInitializer(_){return serializeKerasObject(_)}function getInitializer(_){if(typeof _=="string"){const $=_ in INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP?INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP[_]:_;if($==="GlorotNormal")return new GlorotNormal;if($==="GlorotUniform")return new GlorotUniform;if($==="HeNormal")return new HeNormal;if($==="HeUniform")return new HeUniform;if($==="LeCunNormal")return new LeCunNormal;if($==="LeCunUniform")return new LeCunUniform;{const _e={};return _e.className=$,_e.config={},deserializeInitializer(_e)}}else return _ instanceof Initializer?_:deserializeInitializer(_)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function isArrayOfShapes(_){return Array.isArray(_)&&Array.isArray(_[0])}function normalizeShapeList(_){return _.length===0?[]:Array.isArray(_[0])?_:[_]}function getExactlyOneTensor(_){let $;if(Array.isArray(_)){if(_.length!==1)throw new ValueError(`Expected Tensor length to be 1; got ${_.length}`);$=_[0]}else $=_;return $}function getExactlyOneShape(_){if(Array.isArray(_)&&Array.isArray(_[0])){if(_.length===1)return _=_,_[0];throw new ValueError(`Expected exactly 1 Shape; got ${_.length}`)}else return _}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function countParamsInWeights(_){let $=0;for(const _e of _)_e.shape.length===0?$+=1:$+=_e.shape.reduce((et,tt)=>et*tt);return $}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const DEFAULT_VARIABLE_NAME_PREFIX="Variable";class LayerVariable{constructor($,_e="float32",et=DEFAULT_VARIABLE_NAME_PREFIX,tt=!0,rt=null){this.dtype=_e??"float32",this.shape=$.shape,this.id=getNextUniqueTensorId(),et=et??DEFAULT_VARIABLE_NAME_PREFIX,this.originalName=getScopedTensorName(et),this.name=getUniqueTensorName(this.originalName),this.trainable_=tt,this.constraint=rt,this.val=variable($,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write($){return this.assertNotDisposed(),checkShapesMatch(this.val,$),this.val.id!==$.id&&(this.val.assign($),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable($){this.trainable_=$,this.val.trainable=$}}function checkShapesMatch(_,$){if(_.shape.toString()!==$.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(_.shape)+" vs. "+JSON.stringify($.shape))}function batchGetValue(_){return _.map($=>$.read())}function batchSetValue(_){_.forEach($=>{$[0].write($[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class InputSpec{constructor($){this.dtype=$.dtype,this.shape=$.shape,$.shape!=null?this.ndim=$.shape.length:this.ndim=$.ndim,this.maxNDim=$.maxNDim,this.minNDim=$.minNDim,this.axes=$.axes||{}}}class SymbolicTensor{constructor($,_e,et,tt,rt,nt,it){this.dtype=$,this.shape=_e,this.sourceLayer=et,this.inputs=tt,this.callArgs=rt,this.outputTensorIndex=it,this.id=getNextUniqueTensorId(),nt!=null&&(this.originalName=getScopedTensorName(nt),this.name=getUniqueTensorName(this.originalName)),this.rank=_e.length}}let _nextNodeID=0,Node$1=class{constructor($,_e){this.callArgs=_e,this.id=_nextNodeID++,this.outboundLayer=$.outboundLayer,this.inboundLayers=$.inboundLayers,this.nodeIndices=$.nodeIndices,this.tensorIndices=$.tensorIndices,this.inputTensors=$.inputTensors,this.outputTensors=$.outputTensors,this.inputMasks=$.inputMasks,this.outputMasks=$.outputMasks,this.inputShapes=$.inputShapes,this.outputShapes=$.outputShapes;for(const et of $.inboundLayers)et!=null&&et.outboundNodes.push(this);$.outboundLayer.inboundNodes.push(this)}getConfig(){const $=[];for(const _e of this.inboundLayers)_e!=null?$.push(_e.name):$.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:$,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},_nextLayerID=0,Layer$1=class extends Serializable{constructor($={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=_nextLayerID++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let _e=$.name;if(!_e){const et=this.getClassName();_e=toSnakeCase(et)+"_"+getUid(et)}if(this.name=_e,this.trainable_=$.trainable==null?!0:$.trainable,$.inputShape!=null||$.batchInputShape!=null){let et;if($.batchInputShape!=null)et=$.batchInputShape;else if($.inputShape!=null){let rt=null;$.batchSize!=null&&(rt=$.batchSize),et=[rt].concat($.inputShape)}this.batchInputShape=et;let tt=$.dtype;tt==null&&(tt=$.inputDType),tt==null&&(tt="float32"),this.dtype=tt}$.weights!=null?this.initialWeights=$.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey($,_e){return $.name+"_ib-"+_e.toString()}getNodeAtIndex($,_e){if(this.inboundNodes.length===0)throw new RuntimeError(`The layer has never been called and thus has no defined ${_e}.`);if(this.inboundNodes.length<=$)throw new ValueError(`Asked to get ${_e} at node ${$}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[$]}getInputAt($){return singletonOrArray(this.getNodeAtIndex($,"input").inputTensors)}getOutputAt($){return singletonOrArray(this.getNodeAtIndex($,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new AttributeError(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new AttributeError(`Layer ${this.name} is not connected, no input to return.`);return singletonOrArray(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new AttributeError(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new AttributeError(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return singletonOrArray(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map($=>$())}get updates(){return this._updates}get built(){return this._built}set built($){this._built=$}get trainable(){return this.trainable_}set trainable($){this._trainableWeights.forEach(_e=>_e.trainable=$),this.trainable_=$}get trainableWeights(){return this.trainable_?this._trainableWeights.filter($=>$.trainable):[]}set trainableWeights($){this._trainableWeights=$}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter($=>!$.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights($){this._nonTrainableWeights=$}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility($){const _e=toList($);if(this.inputSpec==null||this.inputSpec.length===0)return;const et=toList(this.inputSpec);if(_e.length!==et.length)throw new ValueError(`Layer ${this.name} expects ${et.length} inputs, but it received ${_e.length} input tensors. Input received: ${$}`);for(let tt=0;tt<_e.length;tt++){const rt=_e[tt],nt=et[tt];if(nt==null)continue;const it=rt.rank;if(nt.ndim!=null&&it!==nt.ndim)throw new ValueError(`Input ${tt} is incompatible with layer ${this.name}: expected ndim=${nt.ndim}, found ndim=${it}`);if(nt.maxNDim!=null&&it>nt.maxNDim)throw new ValueError(`Input ${tt} is incompatible with layer ${this.name}: expected max_ndim=${nt.maxNDim}, found ndim=${it}`);if(nt.minNDim!=null&&it<nt.minNDim)throw new ValueError(`Input ${tt} is incompatible with layer ${this.name}: expected min_ndim=${nt.minNDim}, found ndim=${it}.`);if(nt.dtype!=null&&rt.dtype!==nt.dtype)throw new ValueError(`Input ${tt} is incompatible with layer ${this.name} : expected dtype=${nt.dtype}, found dtype=${rt.dtype}.`);if(nt.axes){const st=rt.shape;for(const at in nt.axes){const ot=Number(at),dt=nt.axes[at],ht=ot>=0?st[ot]:st[st.length+ot];if(dt!=null&&[dt,null].indexOf(ht)===-1)throw new ValueError(`Input ${tt} is incompatible with layer ${this.name}: expected axis ${ot} of input shape to have value ${dt} but got shape ${st}.`)}}if(nt.shape!=null)for(let st=0;st<nt.shape.length;++st){const at=nt.shape[st],ot=rt.shape[st];if(at!=null&&ot!=null&&at!==ot)throw new ValueError(`Input ${tt} is incompatible with layer ${this.name}: expected shape=${nt.shape}, found shape=${rt.shape}.`)}}}call($,_e){return $}invokeCallHook($,_e){this._callHook!=null&&this._callHook($,_e)}setCallHook($){this._callHook=$}clearCallHook(){this._callHook=null}apply($,_e){_e=_e||{},this.assertNotDisposed();const et=toList($),tt=checkAllSymbolic($),rt=checkNoneSymbolic($);if(tt===rt)throw new ValueError("Arguments to apply() must be all SymbolicTensors or all Tensors");return nameScope(this.name,()=>{if(!this.built){this.assertInputCompatibility($);const nt=[];for(const it of toList($))nt.push(it.shape);this.build(singletonOrArray(nt)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&rt&&(this._refCount=1)}if(this.assertInputCompatibility($),rt){let nt=this.call($,_e);this.supportsMasking&&this.setMaskMetadata($,nt);const it=toList(nt),st=[];for(let at of it)et.indexOf(at)!==-1&&(at=at.clone()),st.push(at);if(nt=singletonOrArray(st),this.activityRegularizer!=null)throw new NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return nt}else{const nt=collectInputShape($),it=this.computeOutputShape(nt);let st;const at=guessOutputDType($);if(this.warnOnIncompatibleInputShape(Array.isArray($)?nt[0]:nt),it!=null&&it.length>0&&Array.isArray(it[0])?st=it.map((ot,dt)=>new SymbolicTensor(at,ot,this,toList($),_e,this.name,dt)):st=new SymbolicTensor(at,it,this,toList($),_e,this.name),this.addInboundNode($,st,null,null,nt,it,_e),this._refCount++,this.activityRegularizer!=null)throw new NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return st}})}warnOnIncompatibleInputShape($){if(this.batchInputShape!=null)if($.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify($)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let _e=!1;this.batchInputShape.forEach((et,tt)=>{et!=null&&$[tt]!=null&&$[tt]!==et&&(_e=!0)}),_e&&console.warn(`The shape of the input tensor (${JSON.stringify($)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new AttributeError(`The layer ${this.name} has never been called and thus has no defined output shape.`);const $=[];for(const _e of this.inboundNodes){const et=JSON.stringify(_e.outputShapes);$.indexOf(et)===-1&&$.push(et)}if($.length===1){const _e=this.inboundNodes[0].outputShapes;return Array.isArray(_e)&&Array.isArray(_e[0])&&_e.length===1?_e[0]:_e}else throw new AttributeError(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new RuntimeError(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return countParamsInWeights(this.weights)}build($){this.built=!0}getWeights($=!1){return batchGetValue($?this.trainableWeights:this.weights)}setWeights($){tidy(()=>{const _e=this.weights;if(_e.length!==$.length)throw new ValueError(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${$.length}, but the layer was expecting ${_e.length} weights. Provided weights: ${$}...`);if(_e.length===0)return;const et=[],tt=batchGetValue(_e);for(let rt=0;rt<tt.length;++rt){const nt=tt[rt],it=_e[rt],st=$[rt];if(!arraysEqual(nt.shape,st.shape))throw new ValueError(`Layer weight shape ${nt.shape} not compatible with provided weight shape ${st.shape}`);et.push([it,st])}batchSetValue(et)})}addWeight($,_e,et,tt,rt,nt,it,st){if(this._addedWeightNames.indexOf($)!==-1)throw new ValueError(`Duplicate weight name ${$} for layer ${this.name}`);this._addedWeightNames.push($),et==null&&(et="float32"),this.fastWeightInitDuringBuild&&(tt=st!=null?st():getInitializer("zeros"));const at=tt.apply(_e,et),ot=new LayerVariable(at,et,$,nt,it);return at.dispose(),rt!=null&&this.addLoss(()=>rt.apply(ot.read())),nt==null&&(nt=!0),nt?this._trainableWeights.push(ot):this._nonTrainableWeights.push(ot),ot}setFastWeightInitDuringBuild($){this.fastWeightInitDuringBuild=$}addLoss($){$==null||Array.isArray($)&&$.length===0||($=toList($),this._losses!==void 0&&this._losses!==null&&this.losses.push(...$))}computeOutputShape($){return $}computeMask($,_e){if(!this.supportsMasking){if(_e!=null)if(Array.isArray(_e))_e.forEach(et=>{if(et!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return _e}setMaskMetadata($,_e,et){if(!this.supportsMasking)return;const tt=this.computeMask($,et),rt=toList(_e),nt=toList(tt);if(rt.length!==nt.length)throw new Error(`${this.name} outputs ${rt.length} tensors but ${rt.length} masks for those tensors`);for(let it=0;it<rt.length;it++)rt[it].kerasMask=nt[it]}addInboundNode($,_e,et,tt,rt,nt,it=null){const st=toList($);_e=toList(_e),et=toList(et),tt=toList(tt),rt=normalizeShapeList(rt),nt=normalizeShapeList(nt);const at=[],ot=[],dt=[];for(const ht of st)at.push(ht.sourceLayer),ot.push(ht.nodeIndex),dt.push(ht.tensorIndex);new Node$1({outboundLayer:this,inboundLayers:at,nodeIndices:ot,tensorIndices:dt,inputTensors:st,outputTensors:_e,inputMasks:et,outputMasks:tt,inputShapes:rt,outputShapes:nt},it);for(let ht=0;ht<_e.length;ht++)_e[ht].sourceLayer=this,_e[ht].nodeIndex=this.inboundNodes.length-1,_e[ht].tensorIndex=ht}getConfig(){const $={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&($.batchInputShape=this.batchInputShape),this.dtype!=null&&($.dtype=this.dtype),$}disposeWeights(){return this.weights.forEach($=>$.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let $=0;return--this._refCount===0&&($=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:$}}};function collectInputShape(_){_=toList(_);const $=[];for(const _e of _)$.push(_e.shape);return singletonOrArray($)}function guessOutputDType(_){return"float32"}function getSourceInputs(_,$,_e){if(($==null||_e!=null&&_e>0)&&($=_.sourceLayer,_e=_.nodeIndex),$.inboundNodes.length===0)return[_];{const et=$.inboundNodes[_e];if(et.inboundLayers.length===0)return et.inputTensors;{const tt=[];for(let rt=0;rt<et.inboundLayers.length;rt++){const nt=et.inputTensors[rt],it=et.inboundLayers[rt],st=et.nodeIndices[rt],at=getSourceInputs(nt,it,st);for(const ot of at)tt.indexOf(ot)===-1&&tt.push(ot)}return tt}}}function checkAllSymbolic(_){let $=!0;for(const _e of toList(_))if(!(_e instanceof SymbolicTensor)){$=!1;break}return $}function checkNoneSymbolic(_){let $=!0;for(const _e of toList(_))if(_e instanceof SymbolicTensor){$=!1;break}return $}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class InputLayer extends Layer$1{constructor($){if(super({dtype:$.dtype,name:$.name!=null?$.name:getUid("input").toString()}),$.batchSize==null&&($.batchSize=null),$.sparse==null&&($.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=$.sparse,$.inputShape!=null&&$.batchInputShape!=null)throw new ValueError("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let _e=$.batchInputShape;if(_e==null){if($.inputShape==null)throw new ValueError("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");_e=[$.batchSize].concat($.inputShape)}else if($.batchSize!=null)throw new ValueError("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const et=$.dtype||"float32";this.batchInputShape=_e,this.dtype=et,this.inputSpec=[{shape:_e}];const tt=new SymbolicTensor(this.dtype,this.batchInputShape,this,[],{},this.name);tt.nodeIndex=0,tt.tensorIndex=0,new Node$1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[tt],outputTensors:[tt],inputMasks:[null],outputMasks:[null],inputShapes:[_e],outputShapes:[_e]})}apply($,_e){throw new ValueError(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}InputLayer.className="InputLayer";registerClass(InputLayer);function Input(_){if(_.batchShape==null&&_.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(_.batchShape!=null&&_.shape!=null)throw new ValueError("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let $=_.batchShape;_.shape!=null&&$==null&&($=[null].concat(_.shape));let _e=_.dtype;return _e==null&&(_e="float32"),new InputLayer({batchInputShape:$,name:_.name,dtype:_e,sparse:_.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function assertFeedCompatibility(_,$){if(_.dtype==null||_.dtype===$.dtype)return $;try{return cast$3($,_.dtype)}catch{throw new ValueError(`The dtype of the feed (${$.dtype}) can not be cast to the dtype of the key '${_.name}' (${_.dtype}).`)}}class FeedDict{constructor($){if(this.id2Value={},this.id2Mask={},this.name2Id={},$ instanceof FeedDict)for(const _e in $.id2Value)this.id2Value[_e]=$.id2Value[_e],_e in $.id2Mask&&(this.id2Mask[_e]=$.id2Mask[_e]);else{if($==null)return;for(const _e of $)this.add(_e.key,_e.value)}}add($,_e,et){if(this.id2Value[$.id]==null)this.id2Value[$.id]=assertFeedCompatibility($,_e),this.name2Id[$.name]=$.id,et!=null&&(this.id2Mask[$.id]=et);else throw new ValueError(`Duplicate key: name=${$.name}, id=${$.id}`);return this}addFeed($){this.add($.key,$.value)}hasKey($){return this.id2Value[$.id]!=null}names(){return Object.keys(this.name2Id)}getValue($){if($ instanceof SymbolicTensor){if(this.id2Value[$.id]==null)throw new ValueError(`Nonexistent key: ${$.name}`);return this.id2Value[$.id]}else{const _e=this.name2Id[$];if(_e==null)throw new ValueError(`Feed dict has no SymbolicTensor name: ${$}`);return this.id2Value[_e]}}getMask($){if($ instanceof SymbolicTensor){if(this.id2Value[$.id]==null)throw new ValueError(`Nonexistent key: ${$.name}`);return this.id2Mask[$.id]}else{const _e=this.name2Id[$];if(_e==null)throw new ValueError(`Feed dict has no SymbolicTensor name: ${$}`);return this.id2Mask[_e]}}disposeMasks(){this.id2Mask!=null&&dispose(this.id2Mask)}}const cachedSorted=new LruCache,cachedRecipientCounts=new LruCache;function updateCacheMaxEntries(_){cachedSorted!=null&&cachedSorted.setMaxEntries(_),cachedRecipientCounts!=null&&cachedRecipientCounts.setMaxEntries(_)}function execute(_,$,_e,et){const tt=_e==null?!1:_e.training,rt=Array.isArray(_),nt=rt?_:[_],it=nt.map(vt=>vt.name),st=[],at=$.names();for(const vt of it)at.indexOf(vt)!==-1?st.push($.getValue(vt)):st.push(null);const ot=it.join(",")+"|"+$.names().sort().join(",");let dt=cachedSorted.get(ot),ht;if(dt==null){const vt=getTopologicalSortAndRecipientCounts(nt,$);dt=vt.sorted,ht=vt.recipientCounts,cachedSorted.put(ot,dt),cachedRecipientCounts.put(ot,ht)}ht={},tt||Object.assign(ht,cachedRecipientCounts.get(ot));const yt=new FeedDict($);for(let vt=0;vt<dt.length;++vt){const xt=dt[vt],wt=xt.sourceLayer;if(wt instanceof InputLayer)continue;const Et=[],At=[],jt=[];let kt=!1;for(const tr of xt.inputs){const ar=yt.getValue(tr),Mt=yt.getMask(tr);Et.push(ar),At.push(Mt),Mt!=null&&(kt=!0),tt||(ht[tr.name]--,ht[tr.name]===0&&!$.hasKey(tr)&&it.indexOf(tr.name)===-1&&!ar.isDisposed&&tr.sourceLayer.stateful!==!0&&jt.push(ar))}kt&&(_e=_e||{},_e.mask=At[0]);const Lt=toList(wt.apply(Et,_e));let Bt=null;wt.supportsMasking&&(Bt=wt.computeMask(Et,At));const Gt=getNodeOutputs(xt),er=Array.isArray(Gt)?Gt:[Gt];for(let tr=0;tr<er.length;++tr){yt.hasKey(er[tr])||yt.add(er[tr],Lt[tr],Array.isArray(Bt)?Bt[0]:Bt);const ar=it.indexOf(er[tr].name);ar!==-1&&(st[ar]=Lt[tr])}tt||dispose(jt)}return yt.disposeMasks(),rt?st:st[0]}function getTopologicalSortAndRecipientCounts(_,$){assert$1(_!=null&&_.length>0,()=>"Expected at least one fetch, got none");let _e=[],et={};if(_.length===1){const tt=getTopologicalSortAndRecipientCountsForOneFetch(_[0],$);_e=tt.sorted,et=tt.recipientMap}else{const tt=new Set;for(const rt of _){const{sorted:nt,recipientMap:it}=getTopologicalSortAndRecipientCountsForOneFetch(rt,$);for(const st of nt)tt.has(st.name)||(_e.push(st),tt.add(st.name));for(const st in it)et[st]==null&&(et[st]=new Set),it[st].forEach(at=>et[st].add(at))}}return{sorted:_e,recipientCounts:recipientMap2Counts(et)}}function recipientMap2Counts(_){const $={};for(const _e in _)$[_e]=_[_e].size;return $}function getTopologicalSortAndRecipientCountsForOneFetch(_,$){const _e=new Set,et=[],tt={};for(const it of $.names())_e.add(it);const rt=[],nt=[];for(rt.push(_);rt.length>0;){const it=rt[rt.length-1];if(_e.has(it.name)){rt.pop();continue}const st=nt[nt.length-1]===rt.length-1;if(it.inputs.length===0||st)rt.pop(),et.push(it),_e.add(it.name),st&&nt.pop();else{nt.push(rt.length-1);for(const at of it.inputs)tt[at.name]==null&&(tt[at.name]=new Set),tt[at.name].add(it.name),!_e.has(at.name)&&rt.push(at)}}return{sorted:et,recipientMap:tt}}function getNodeOutputs(_){let $;if(_.sourceLayer.inboundNodes.length===1)$=_.sourceLayer.output;else{let _e=null;for(let et=0;et<_.sourceLayer.inboundNodes.length;++et)for(const tt of _.sourceLayer.inboundNodes[et].outputTensors)if(tt.id===_.id){_e=et;break}$=_.sourceLayer.getOutputAt(_e)}return $}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ENV$2=env();ENV$2.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,updateCacheMaxEntries);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function calcL2Norms(_,$){return tidy(()=>sqrt$4(sum$2(mul(_,_),$,!0)))}class Constraint extends Serializable{getConfig(){return{}}}class MaxNorm extends Constraint{constructor($){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=$.maxValue!=null?$.maxValue:this.defaultMaxValue,this.axis=$.axis!=null?$.axis:this.defaultAxis}apply($){return tidy(()=>{const _e=calcL2Norms($,this.axis),et=clipByValue$2(_e,0,this.maxValue);return mul($,div$1(et,add$3(epsilon$2(),_e)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}MaxNorm.className="MaxNorm";registerClass(MaxNorm);class UnitNorm extends Constraint{constructor($){super(),this.defaultAxis=0,this.axis=$.axis!=null?$.axis:this.defaultAxis}apply($){return tidy(()=>div$1($,add$3(epsilon$2(),calcL2Norms($,this.axis))))}getConfig(){return{axis:this.axis}}}UnitNorm.className="UnitNorm";registerClass(UnitNorm);class NonNeg extends Constraint{apply($){return relu$2($)}}NonNeg.className="NonNeg";registerClass(NonNeg);class MinMaxNorm extends Constraint{constructor($){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=$.minValue!=null?$.minValue:this.defaultMinValue,this.maxValue=$.maxValue!=null?$.maxValue:this.defaultMaxValue,this.rate=$.rate!=null?$.rate:this.defaultRate,this.axis=$.axis!=null?$.axis:this.defaultAxis}apply($){return tidy(()=>{const _e=calcL2Norms($,this.axis),et=add$3(mul(this.rate,clipByValue$2(_e,this.minValue,this.maxValue)),mul(1-this.rate,_e));return mul($,div$1(et,add$3(epsilon$2(),_e)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}MinMaxNorm.className="MinMaxNorm";registerClass(MinMaxNorm);const CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function serializeConstraint(_){return serializeKerasObject(_)}function deserializeConstraint(_,$={}){return deserializeKerasObject(_,SerializationMap.getMap().classNameMap,$,"constraint")}function getConstraint(_){if(_==null)return null;if(typeof _=="string"){const _e={className:_ in CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP?CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP[_]:_,config:{}};return deserializeConstraint(_e)}else return _ instanceof Constraint?_:deserializeConstraint(_)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function maxNorm(_){return new MaxNorm(_)}function unitNorm(_){return new UnitNorm(_)}function nonNeg(){return new NonNeg}function minMaxNorm(_){return new MinMaxNorm(_)}const exports_constraints=Object.freeze(Object.defineProperty({__proto__:null,maxNorm,minMaxNorm,nonNeg,unitNorm},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function zeros$1(){return new Zeros}function ones(){return new Ones}function constant$4(_){return new Constant(_)}function randomUniform(_){return new RandomUniform(_)}function randomNormal(_){return new RandomNormal(_)}function truncatedNormal(_){return new TruncatedNormal(_)}function identity$e(_){return new Identity(_)}function varianceScaling(_){return new VarianceScaling(_)}function glorotUniform(_){return new GlorotUniform(_)}function glorotNormal(_){return new GlorotNormal(_)}function heNormal(_){return new HeNormal(_)}function heUniform(_){return new HeUniform(_)}function leCunNormal(_){return new LeCunNormal(_)}function leCunUniform(_){return new LeCunUniform(_)}function orthogonal(_){return new Orthogonal(_)}const exports_initializers=Object.freeze(Object.defineProperty({__proto__:null,constant:constant$4,glorotNormal,glorotUniform,heNormal,heUniform,identity:identity$e,leCunNormal,leCunUniform,ones,orthogonal,randomNormal,randomUniform,truncatedNormal,varianceScaling,zeros:zeros$1},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function resolveScalarsInLogs(_){if(_==null)return;const $=[],_e=[],et=[];for(const tt in _){const rt=_[tt];if(typeof rt!="number"){const nt=rt;$.push(nt.data()),_e.push(tt),et.push(nt)}}if($.length>0){const tt=await Promise.all($);for(let rt=0;rt<tt.length;++rt)_[_e[rt]]=tt[rt][0];dispose(et)}}function disposeTensorsInLogs(_){if(_!=null)for(const $ in _){const _e=_[$];typeof _e!="number"&&_e.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var ModelLoggingVerbosity;(function(_){_[_.SILENT=0]="SILENT",_[_.VERBOSE=1]="VERBOSE"})(ModelLoggingVerbosity||(ModelLoggingVerbosity={}));const DEFAULT_YIELD_EVERY_MS=125;class BaseCallback{constructor(){this.validationData=null}setParams($){this.params=$}async onEpochBegin($,_e){}async onEpochEnd($,_e){}async onBatchBegin($,_e){}async onBatchEnd($,_e){}async onTrainBegin($){}async onTrainEnd($){}setModel($){}}class CallbackList{constructor($,_e=10){$==null&&($=[]),this.callbacks=$,this.queueLength=_e}append($){this.callbacks.push($)}setParams($){for(const _e of this.callbacks)_e.setParams($)}setModel($){for(const _e of this.callbacks)_e.setModel($)}async onEpochBegin($,_e){_e==null&&(_e={});for(const et of this.callbacks)await et.onEpochBegin($,_e)}async onEpochEnd($,_e){_e==null&&(_e={});for(const et of this.callbacks)await et.onEpochEnd($,_e)}async onBatchBegin($,_e){_e==null&&(_e={});for(const et of this.callbacks)await et.onBatchBegin($,_e)}async onBatchEnd($,_e){_e==null&&(_e={});for(const et of this.callbacks)await et.onBatchEnd($,_e)}async onTrainBegin($){$==null&&($={});for(const _e of this.callbacks)await _e.onTrainBegin($)}async onTrainEnd($){$==null&&($={});for(const _e of this.callbacks)await _e.onTrainEnd($)}}class BaseLogger extends BaseCallback{constructor(){super()}async onEpochBegin($){this.seen=0,this.totals={}}async onBatchEnd($,_e){_e==null&&(_e={});const et=_e.size==null?0:_e.size;this.seen+=et;for(const tt in _e){const rt=_e[tt];if(typeof rt=="number")this.totals.hasOwnProperty(tt)||(this.totals[tt]=0),this.totals[tt]=this.totals[tt]+rt*et;else{let nt;tt in this.totals?nt=this.totals[tt]:this.totals[tt]=0;const it=tidy(()=>add$3(this.totals[tt],mul(rt,et)));this.totals[tt]=it,nt!=null&&nt.dispose()}}}async onEpochEnd($,_e){if(_e!=null)for(const et of this.params.metrics)this.totals[et]!=null&&(typeof this.totals[et]=="number"?_e[et]=this.totals[et]/this.seen:tidy(()=>{const tt=mul(div$1(1,this.seen),this.totals[et]);_e[et]=tt,this.totals[et].dispose(),keep(_e[et])}))}}let History$1=class extends BaseCallback{async onTrainBegin($){this.epoch=[],this.history={}}async onEpochEnd($,_e){_e==null&&(_e={}),this.epoch.push($);for(const et in _e)this.history[et]==null&&(this.history[et]=[]),this.history[et].push(_e[et])}async syncData(){const $=[],_e=[],et=[];for(const rt in this.history){const nt=this.history[rt];for(let it=0;it<nt.length;++it)if(typeof nt[it]!="number"){const st=nt[it];$.push(st.data()),_e.push(rt),et.push(it)}}const tt=await Promise.all($);for(let rt=0;rt<tt.length;++rt)this.history[_e[rt]][et[rt]].dispose(),this.history[_e[rt]][et[rt]]=tt[rt][0]}};class CustomCallback extends BaseCallback{constructor($,_e){if(super(),this.currentEpoch=0,this.nowFunc=$.nowFunc,this.nextFrameFunc=$.nextFrameFunc||nextFrame,this.yieldEvery=_e||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=DEFAULT_YIELD_EVERY_MS),this.yieldEvery==="never"&&$.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");isNumber$4(this.yieldEvery)&&(this.maybeWait=debounce$2(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=$.onTrainBegin,this.trainEnd=$.onTrainEnd,this.epochBegin=$.onEpochBegin,this.epochEnd=$.onEpochEnd,this.batchBegin=$.onBatchBegin,this.batchEnd=$.onBatchEnd,this.yield=$.onYield}async maybeWait($,_e,et){const tt=[];this.yield!=null&&(await resolveScalarsInLogs(et),tt.push(this.yield($,_e,et))),tt.push(this.nextFrameFunc()),await Promise.all(tt)}async onEpochBegin($,_e){this.currentEpoch=$,this.epochBegin!=null&&(await resolveScalarsInLogs(_e),await this.epochBegin($,_e))}async onEpochEnd($,_e){const et=[];this.epochEnd!=null&&(await resolveScalarsInLogs(_e),et.push(this.epochEnd($,_e))),this.yieldEvery==="epoch"&&et.push(this.nextFrameFunc()),await Promise.all(et)}async onBatchBegin($,_e){this.batchBegin!=null&&(await resolveScalarsInLogs(_e),await this.batchBegin($,_e))}async onBatchEnd($,_e){const et=[];this.batchEnd!=null&&(await resolveScalarsInLogs(_e),et.push(this.batchEnd($,_e))),this.yieldEvery==="batch"?et.push(this.nextFrameFunc()):isNumber$4(this.yieldEvery)&&et.push(this.maybeWait(this.currentEpoch,$,_e)),await Promise.all(et)}async onTrainBegin($){this.trainBegin!=null&&(await resolveScalarsInLogs($),await this.trainBegin($))}async onTrainEnd($){this.trainEnd!=null&&(await resolveScalarsInLogs($),await this.trainEnd($))}}function standardizeCallbacks(_,$){return _==null&&(_={}),_ instanceof BaseCallback?[_]:Array.isArray(_)&&_[0]instanceof BaseCallback?_:toList(_).map(et=>new CustomCallback(et,$))}class CallbackConstructorRegistry{constructor(){}static registerCallbackConstructor($,_e){assert$1($>=0&&Number.isInteger($),()=>`Verbosity level is expected to be an integer >= 0, but got ${$}`),CallbackConstructorRegistry.checkForDuplicate(_e),CallbackConstructorRegistry.constructors[$]==null&&(CallbackConstructorRegistry.constructors[$]=[]),CallbackConstructorRegistry.constructors[$].push(_e)}static checkForDuplicate($){for(const _e in CallbackConstructorRegistry.constructors)CallbackConstructorRegistry.constructors[+_e].forEach(tt=>{if(tt===$)throw new ValueError("Duplicate callback constructor.")})}static clear(){CallbackConstructorRegistry.constructors={}}static createCallbacks($){const _e=[];for(const et in CallbackConstructorRegistry.constructors){const tt=+et;$>=tt&&_e.push(...CallbackConstructorRegistry.constructors[tt])}return _e.map(et=>new et)}}CallbackConstructorRegistry.constructors={};function configureCallbacks(_,$,_e,et,tt,rt,nt,it,st){const at=new History$1,ot=[new BaseLogger,...CallbackConstructorRegistry.createCallbacks($)];_!=null&&ot.push(..._),ot.push(at);const dt=new CallbackList(ot);return dt.setParams({epochs:_e,initialEpoch:et,samples:tt,steps:rt,batchSize:nt,verbose:$,doValidation:it,metrics:st}),{callbackList:dt,history:at}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function deserialize(_,$={},_e=!1){return deserializeKerasObject(_,SerializationMap.getMap().classNameMap,$,"layer",_e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function l2Normalize(_,$){return tidy(()=>{_.dtype!=="float32"&&(_=cast$3(_,"float32"));const _e=sum$2(square$2(_),$,!0),et=fill$2(_e.shape,epsilon$2()),tt=sqrt$4(maximum$3(_e,et));return div$1(_,tt)})}function meanSquaredError$1(_,$){return tidy(()=>mean$1(square$2(sub$2($,_)),-1))}function meanAbsoluteError$1(_,$){return tidy(()=>mean$1(abs$2(sub$2($,_)),-1))}function meanAbsolutePercentageError$1(_,$){return tidy(()=>{const _e=sub$2(_,$),et=clipByValue$2(abs$2(_),epsilon$2(),Number.MAX_VALUE),tt=abs$2(div$1(_e,et));return mul(100,mean$1(tt,-1))})}function meanSquaredLogarithmicError(_,$){return tidy(()=>{const _e=clipByValue$2($,epsilon$2(),Number.MAX_VALUE),et=log$3(add$3(1,_e)),tt=clipByValue$2(_,epsilon$2(),Number.MAX_VALUE),rt=log$3(add$3(1,tt));return mean$1(square$2(sub$2(et,rt)),-1)})}function squaredHinge(_,$){return tidy(()=>{const _e=maximum$3(0,sub$2(1,mul(_,$)));return mean$1(square$2(_e),-1)})}function hinge(_,$){return tidy(()=>{const _e=maximum$3(0,sub$2(1,mul(_,$)));return mean$1(_e,-1)})}function categoricalHinge(_,$){return tidy(()=>{const _e=sum$2(mul(_,$),-1),et=max$6(mul(sub$2(1,_),$),-1);return maximum$3(0,add$3(1,sub$2(et,_e)))})}function logcosh(_,$){return tidy(()=>{const _e=Math.log(2),et=sub$2($,_),tt=sub$2(add$3(et,softplus$2(mul(-2,et))),_e);return mean$1(tt,-1)})}function categoricalCrossentropy$2(_,$,_e=!1){return tidy(()=>{if(_e)$=softmax$3($);else{const et=sum$2($,$.shape.length-1,!0);$=div$1($,et)}return $=clipByValue$2($,epsilon$2(),1-epsilon$2()),neg$2(sum$2(mul(cast$3(_,"float32"),log$3($)),$.shape.length-1))})}function sparseCategoricalCrossentropy$1(_,$,_e=!1){return tidy(()=>{const et=cast$3(floor$2(flatten$1(_)),"int32");$=clipByValue$2($,epsilon$2(),1-epsilon$2());const tt=$.shape,rt=reshape$3(oneHot$2(et,tt[tt.length-1]),tt);return categoricalCrossentropy$2(rt,$,_e)})}function sigmoidCrossEntropyWithLogits(_,$){if(!arraysEqual(_.shape,$.shape))throw new ValueError(`logits and labels must have the same shape, but got shapes ${JSON.stringify(_.shape)} and ${JSON.stringify($.shape)}`);return tidy(()=>{const _e=relu$2($),et=neg$2(abs$2($));return add$3(sub$2(_e,mul($,_)),log1p$2(exp$3(et)))})}function binaryCrossentropy$2(_,$){return tidy(()=>{let _e;return _e=clipByValue$2($,epsilon$2(),1-epsilon$2()),_e=log$3(div$1(_e,sub$2(1,_e))),mean$1(sigmoidCrossEntropyWithLogits(_,_e),-1)})}function kullbackLeiblerDivergence(_,$){return tidy(()=>{const _e=clipByValue$2(_,epsilon$2(),1),et=clipByValue$2($,epsilon$2(),1);return sum$2(mul(_,log$3(div$1(_e,et))),-1)})}function poisson(_,$){return tidy(()=>{const _e=log$3(add$3(epsilon$2(),$));return mean$1(sub$2($,mul(_,_e)),-1)})}function cosineProximity$1(_,$){return tidy(()=>{const _e=l2Normalize(_,-1),et=l2Normalize($,-1),tt=mul(_e,et);return neg$2(sum$2(tt,-1))})}const lossesMap={meanSquaredError:meanSquaredError$1,meanAbsoluteError:meanAbsoluteError$1,meanAbsolutePercentageError:meanAbsolutePercentageError$1,meanSquaredLogarithmicError,squaredHinge,hinge,categoricalHinge,logcosh,categoricalCrossentropy:categoricalCrossentropy$2,sparseCategoricalCrossentropy:sparseCategoricalCrossentropy$1,binaryCrossentropy:binaryCrossentropy$2,kullbackLeiblerDivergence,poisson,cosineProximity:cosineProximity$1};function get$4(_){if(typeof _=="string"){if(_ in lossesMap)return lossesMap[_];let $=`Unknown loss ${_}`;throw _.toLowerCase().includes("softmaxcrossentropy")&&($=`Unknown loss ${_}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ValueError($)}else return _}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function binaryAccuracy$1(_,$){return tidy(()=>{const _e=mul(.5,onesLike$2($)),et=cast$2(greater$3($,_e),_.dtype);return mean$1(equal$2(_,et),-1)})}function categoricalAccuracy$1(_,$){return tidy(()=>cast$2(equal$2(argMax$2(_,-1),argMax$2($,-1)),"float32"))}function truePositives(_,$){return tidy(()=>cast$3(sum$2(logicalAnd$2(equal$2(_,1),equal$2($,1))),"float32"))}function falseNegatives(_,$){return tidy(()=>cast$3(sum$2(logicalAnd$2(equal$2(_,1),equal$2($,0))),"float32"))}function falsePositives(_,$){return tidy(()=>cast$3(sum$2(logicalAnd$2(equal$2(_,0),equal$2($,1))),"float32"))}function precision$1(_,$){return tidy(()=>{const _e=truePositives(_,$),et=falsePositives(_,$),tt=add$3(_e,et);return cast$3(where(greater$3(tt,0),div$1(_e,tt),0),"float32")})}function recall$1(_,$){return tidy(()=>{const _e=truePositives(_,$),et=falseNegatives(_,$),tt=add$3(_e,et);return cast$3(where(greater$3(tt,0),div$1(_e,tt),0),"float32")})}function binaryCrossentropy$1(_,$){return binaryCrossentropy$2(_,$)}function sparseCategoricalAccuracy$1(_,$){return _.rank===$.rank&&(_=squeeze(_,[_.rank-1])),$=argMax$2($,-1),$.dtype!==_.dtype&&($=cast$3($,_.dtype)),cast$3(equal$2(_,$),"float32")}function r2Score$1(_,$){return tidy(()=>{const _e=_.sub($).square().sum(),et=_.sub(_.mean()).square().sum();return scalar(1).sub(_e.div(et))})}const mse$1=meanSquaredError$1,MSE$1=meanSquaredError$1,mae=meanAbsoluteError$1,MAE=meanAbsoluteError$1,mape$1=meanAbsolutePercentageError$1,MAPE$1=meanAbsolutePercentageError$1,categoricalCrossentropy$1=categoricalCrossentropy$2,cosine=cosineProximity$1,sparseCategoricalCrossentropy=sparseCategoricalCrossentropy$1,metricsMap={binaryAccuracy:binaryAccuracy$1,categoricalAccuracy:categoricalAccuracy$1,precision:precision$1,categoricalCrossentropy:categoricalCrossentropy$1,sparseCategoricalCrossentropy,mse:mse$1,MSE:MSE$1,mae,MAE,mape:mape$1,MAPE:MAPE$1,cosine};function get$3(_){if(typeof _=="string"&&_ in metricsMap)return metricsMap[_];if(typeof _!="string"&&_!=null)return _;throw new ValueError(`Unknown metric ${_}`)}function getLossOrMetricName(_){if(assert(_!==null,`Unknown LossOrMetricFn ${_}`),typeof _=="string")return _;{let $;for(const _e of Object.keys(lossesMap))if(lossesMap[_e]===_){$=_e;break}if($!==void 0)return $;for(const _e of Object.keys(metricsMap))if(metricsMap[_e]===_){$=_e;break}return $!==void 0?$:_.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function getOptimizer(_){const $={Adagrad:()=>train.adagrad(.01),Adadelta:()=>train.adadelta(1,.95,epsilon$2()),Adam:()=>train.adam(.001,.9,.999,epsilon$2()),Adamax:()=>train.adamax(.002,.9,.999,epsilon$2(),0),RMSProp:()=>train.rmsprop(.001,.9,0,epsilon$2()),SGD:()=>train.sgd(.01)};if($.adagrad=$.Adagrad,$.adadelta=$.Adadelta,$.adam=$.Adam,$.adamax=$.Adamax,$.rmsprop=$.RMSProp,$.sgd=$.SGD,_ in $)return $[_]();throw new ValueError(`Unknown Optimizer ${_}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH=1*1024*1024;function checkUserDefinedMetadata(_,$,_e=!1){if(_==null||typeof _!="object"||Object.getPrototypeOf(_)!==Object.prototype||!plainObjectCheck(_))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(_e){const et=JSON.stringify(_);et.length>MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH&&console.warn(`User-defined metadata of model "${$}" is too large in size (length=${et.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH}.`)}}function plainObjectCheck(_){if(_===null)return!0;if(typeof _=="object")if(Object.getPrototypeOf(_)===Object.prototype){const $=Object.keys(_);for(const _e of $)if(typeof _e!="string"||!plainObjectCheck(_[_e]))return!1;return!0}else if(Array.isArray(_)){for(const $ of _)if(!plainObjectCheck($))return!1;return!0}else return!1;else{const $=typeof _;return $==="string"||$==="number"||$==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function printSummary(_,$,_e,et=console.log){const tt=isModelSequentialLike(_),rt=["Layer (type)","Input Shape","Output shape","Param #"];tt?($=$||90,_e=_e||[.32,.61,.89,1]):($=$||115,_e=_e||[.24,.48,.7,.8,1]),_e[_e.length-1]<=1&&(_e=_e.map(ot=>Math.floor($*ot)));let nt;if(!tt){rt.push("Receives inputs"),nt=[];for(const ot in _.nodesByDepth)nt.push(..._.nodesByDepth[ot])}et("_".repeat($)),printRow(rt,_e,et),et("=".repeat($));const it=_.layers;for(let ot=0;ot<it.length;++ot)tt?printLayerSummary(it[ot],_e,et):printLayerSummaryWithConnections(it[ot],_e,nt,et),et((ot===it.length-1?"=":"_").repeat($));_.checkTrainableWeightsConsistency();const st=countTrainableParams(_),at=countParamsInWeights(_.nonTrainableWeights);et(`Total params: ${st+at}`),et(`Trainable params: ${st}`),et(`Non-trainable params: ${at}`),et("_".repeat($))}function countTrainableParams(_){let $;return _.collectedTrainableWeights!=null?$=countParamsInWeights(_.collectedTrainableWeights):$=countParamsInWeights(_.trainableWeights),$}function isModelSequentialLike(_){let $=!0;const _e=[],et=[];for(const tt in _.nodesByDepth)_e.push(_.nodesByDepth[tt]);for(const tt of _e){if(tt.length>1||tt.length===1&&tt[0].inboundLayers.length>1){$=!1;break}et.push(...tt)}if($)for(const tt of _.layers){let rt=!1;for(const nt of tt.inboundNodes)if(et.indexOf(nt)!==-1)if(rt){$=!1;break}else rt=!0;if(!$)break}return $}function printRow(_,$,_e=console.log){let et="";for(let tt=0;tt<_.length;++tt)tt>0&&(et=et.slice(0,et.length-1)+" "),et+=_[tt],et=et.slice(0,$[tt]),et+=" ".repeat($[tt]-et.length);_e(et)}function printLayerSummary(_,$,_e){let et,tt;try{tt=_.inboundNodes.map(st=>JSON.stringify(st.inputShapes)).join(",")}catch{tt="multiple"}try{et=JSON.stringify(_.outputShape)}catch{et="multiple"}const rt=_.name,nt=_.getClassName(),it=[`${rt} (${nt})`,tt,et,_.countParams().toString()];printRow(it,$,_e)}function printLayerSummaryWithConnections(_,$,_e,et){let tt,rt;try{rt=_.inboundNodes.map(dt=>JSON.stringify(dt.inputShapes)).join(",")}catch{rt="multiple"}try{tt=JSON.stringify(_.outputShape)}catch{tt="multiple"}const nt=[];for(const dt of _.inboundNodes)if(!(_e!=null&&_e.length>0&&_e.indexOf(dt)===-1))for(let ht=0;ht<dt.inboundLayers.length;++ht){const yt=dt.inboundLayers[ht].name,vt=dt.nodeIndices[ht],xt=dt.tensorIndices[ht];nt.push(`${yt}[${vt}][${xt}]`)}const it=_.name,st=_.getClassName(),at=nt.length===0?"":nt[0],ot=[`${it} (${st})`,rt,tt,_.countParams().toString(),at];printRow(ot,$,et);for(let dt=1;dt<nt.length;++dt)printRow(["","","","",nt[dt]],$,et)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function isArrayItemInputOrOutputName(_,$,_e){return(_==="inboundNodes"||_==="outputLayers"||_==="inputLayers")&&$===0&&typeof _e=="string"}function convertPythonicToTs(_,$){if(_===null)return null;if(typeof _=="string")return toCamelCase(_);if(typeof _=="number"||typeof _=="boolean")return _;if(_ instanceof Array){const _e=[],et=_.length;for(let tt=0;tt<et;++tt){const rt=_[tt];isArrayItemInputOrOutputName($,tt,rt)?_e.push(rt):_e.push(convertPythonicToTs(rt,$))}return _e}else{const _e={};for(const et of Object.keys(_)){const tt=_[et];if(et==="name"&&typeof tt=="string")_e[et]=tt;else{const rt=toCamelCase(et);_e[rt]=convertPythonicToTs(tt,rt)}}return _e}}function convertTsToPythonic(_,$){if(_==null)return null;if(typeof _=="string")return toSnakeCase(_);if(typeof _=="number"||typeof _=="boolean")return _;if(_ instanceof Array){const _e=[],et=_.length;for(let tt=0;tt<et;++tt){const rt=_[tt];isArrayItemInputOrOutputName($,tt,rt)?_e.push(rt):_e.push(convertTsToPythonic(rt,$))}return _e}else{const _e={};for(const et of Object.keys(_)){const tt=_[et],rt=toSnakeCase(et);(et==="name"||et==="className")&&typeof tt=="string"?_e[rt]=tt:_e[rt]=convertTsToPythonic(tt,et)}return _e}}/** @license See the LICENSE file. */const version$6="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const isKerasSavedModelFormat=_=>{const $=Object.keys(_);if($.length===0)return!1;const _e=$[0].split("/");return!isNaN(parseInt(_e[_e.length-1],10))};class Container extends Layer$1{constructor($){if(super({}),this.containerNodes=new Set,this.name=$.name,this.name==null){const At=this.getClassName().toLowerCase();this.name=getUid(At)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray($.inputs)?this.inputs=$.inputs.slice():this.inputs=[$.inputs],Array.isArray($.outputs)?this.outputs=$.outputs.slice():this.outputs=[$.outputs],unique$2(this.inputs).length!==this.inputs.length)throw new ValueError(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(At=>At.name)}`);unique$2(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(At=>At.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const At of this.outputs){const jt=At.sourceLayer,kt=At.nodeIndex,Lt=At.tensorIndex;this.outputLayers.push(jt),this.outputLayersNodeIndices.push(kt),this.outputLayersTensorIndices.push(Lt)}for(const At of this.inputs){const jt=At.sourceLayer,kt=At.nodeIndex,Lt=At.tensorIndex;assert(kt===0,"input layer has >1 nodes"),assert(Lt===0,"input layer has >1 tensors"),this.inputLayers.push(jt),this.inputLayersNodeIndices.push(kt),this.inputLayersTensorIndices.push(Lt)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let At=0;At<this.inputLayers.length;At++){const jt=this.inputLayers[At];if(!(jt instanceof InputLayer))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${$.inputs}. Input ${At} (0-based) originates from layer type ${jt.getClassName()}.`);this.inputNames.push(jt.name),this.feedInputShapes.push(jt.batchInputShape),this.feedInputNames.push(jt.name)}for(const At of this.outputLayers)this.outputNames.push(At.name);this.internalInputShapes=this.inputs.map(At=>At.shape),this.internalOutputShapes=this.outputs.map(At=>At.shape);const _e={},et={},tt={},rt={},nt={},it=[],st=(At,jt,kt,Lt,Bt,Gt)=>{(Lt==null||Bt==null||Gt==null)&&(Lt=At.sourceLayer,Bt=At.nodeIndex,Gt=At.tensorIndex);const er=Lt.inboundNodes[Bt];if(kt.indexOf(er)!==-1)throw new RuntimeError(`The tensor ${At.name} at layer "${Lt.name}" is part of a cycle.`);if(jt.indexOf(er)!==-1)return;this.containerNodes.add(Container.nodeKey(Lt,Bt)),Lt.id in nt||(nt[Lt.id]=Object.keys(nt).length),kt.indexOf(er)===-1&&kt.push(er);const tr=er.inboundLayers.length;for(let ar=0;ar<tr;ar++){const Mt=er.inputTensors[ar],lt=er.inboundLayers[ar],mt=er.nodeIndices[ar],gt=er.tensorIndices[ar];st(Mt,jt,kt,lt,mt,gt)}for(jt.push(er);kt.indexOf(er)>=0;)kt.splice(kt.indexOf(er),1);it.push(er)},at=[],ot=[];for(const At of this.outputs)st(At,at,ot);const dt=it.slice().reverse();for(const At of dt){et[At.id]=At,At.id in _e||(_e[At.id]=0);let jt=_e[At.id];const kt=tt[At.outboundLayer.id]==null?0:tt[At.outboundLayer.id];jt=Math.max(jt,kt),tt[At.outboundLayer.id]=jt,rt[At.outboundLayer.id]=At.outboundLayer,_e[At.id]=jt;for(let Lt=0;Lt<At.inboundLayers.length;Lt++){const Bt=At.inboundLayers[Lt],Gt=At.nodeIndices[Lt],er=Bt.inboundNodes[Gt],tr=_e[er.id]==null?0:_e[er.id];_e[er.id]=Math.max(jt+1,tr),et[er.id]=er}}const ht={};for(const At in _e){const jt=_e[At];jt in ht||(ht[jt]=[]),ht[jt].push(et[At])}const yt={};for(const At in tt){const jt=tt[At];jt in yt||(yt[jt]=[]),yt[jt].push(rt[At])}let vt=Object.keys(yt).map(At=>parseInt(At,10)).sort(reverseNumberCompare);this.layers=[];for(const At of vt){const jt=yt[At];jt.sort((kt,Lt)=>{const Bt=nt[kt.id],Gt=nt[Lt.id];return Bt<Gt?-1:Bt>Gt?1:0});for(const kt of jt)kt instanceof Container&&this.internalContainerRefs.push(kt),this.layers.push(kt)}this.layersByDepth=yt,vt=Object.keys(ht).map(At=>parseInt(At,10)).sort(reverseNumberCompare);const xt=this.inputs.slice(),wt=[];for(const At of vt)for(const jt of ht[At]){const kt=jt.outboundLayer;if(kt!=null){for(const Lt of jt.inputTensors)if(xt.indexOf(Lt)===-1)throw new RuntimeError(`Graph disconnected: cannot obtain value for tensor ${Lt} at layer "${kt.name}". The following previous layers were accessed without issue: ${wt}`);for(const Lt of jt.outputTensors)xt.push(Lt);wt.push(kt.name)}}this.nodesByDepth=ht;const Et=this.layers.map(At=>At.name);for(const At of Et){const jt=Et.filter(kt=>kt===At).length;if(jt!==1)throw new RuntimeError(`The name "${At}" is used ${jt} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(Et))}this.outboundNodes=[],this.inboundNodes=[],new Node$1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(At=>null),outputMasks:this.outputs.map(At=>null),inputShapes:this.inputs.map(At=>At.shape),outputShapes:this.outputs.map(At=>At.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const $={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const _e of this.layers)$.numDisposedVariables+=_e.dispose().numDisposedVariables;for(const _e of this.internalContainerRefs)$.numDisposedVariables+=_e.dispose().numDisposedVariables}return $.refCountAfterDispose=this._refCount,$}get trainable(){return this.trainable_}set trainable($){this.layers.forEach(_e=>{_e._trainableWeights.forEach(et=>et.trainable=$)}),this.trainable_=$}get trainableWeights(){if(this._trainableWeights.length>0)throw new ValueError("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let $=[];for(const _e of this.layers)$=$.concat(_e.trainableWeights);return $}get nonTrainableWeights(){const $=[];for(const _e of this.layers)$.push(..._e.nonTrainableWeights);if(!this.trainable){const _e=[];for(const et of this.layers)_e.push(...et.trainableWeights);return _e.concat($)}return $}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights($,_e=!0){const et={};let tt=0;const rt=isKerasSavedModelFormat($);rt&&this.parseWeights($);for(const it of this.layers)for(const[st,at]of it.weights.entries()){const ot=rt?`${at.name.split("/").slice(0,-1).join("/")+"/"}${st}`:at.originalName;if(et[ot]!=null)throw new ValueError(`Duplicate weight name: ${ot}`);et[ot]=at,tt++}const nt=[];for(const it in $){let st=it;if(et[it]==null){const at=it.split("/");st=at.slice(0,-2).concat([at[at.length-1]]).join("/")}if(et[st]!=null)nt.push([et[st],$[it]]);else if(_e)throw new ValueError(`Provided weight data has no target variable: ${it}`);delete et[st]}if(_e){const it=[];for(const st in et)it.push(st);if(it.length>0)throw new ValueError(`${it.length} of ${tt} weights are not set: ${it}`)}batchSetValue(nt)}parseWeights($){for(const _e in Object.keys($)){const et=_e.split("/"),tt=["vars","layer_checkpoint_dependencies"],rt=et.map(nt=>nt.startsWith("_")?nt.slice(1):nt).filter(nt=>!tt.includes(nt)).join("/");rt!==_e&&($[rt]=$[_e],delete $[_e])}}updatedConfig(){const $=this.getConfig(),_e={};return _e.className=this.getClassName(),_e.config=$,_e.kerasVersion=`tfjs-layers ${version$6}`,_e.backend="TensorFlow.js",_e}toJSON($,_e=!0){const et=convertTsToPythonic(this.updatedConfig());return _e?JSON.stringify(et):et}call($,_e){return tidy(()=>{$=toList($);const et=new FeedDict;for(let tt=0;tt<this.inputs.length;++tt)et.add(this.inputs[tt],$[tt]);return execute(this.outputs,et,_e)})}computeMask($,_e){return tidy(()=>{$=toList($);let et;return _e==null?et=pyListRepeat(null,$.length):et=toList(_e),this.runInternalGraph($,et)[1]})}computeOutputShape($){const _e=normalizeShapeList($);if(_e.length!==this.inputLayers.length)throw new ValueError(`Invalid inputShape argument ${$}: model has ${this.inputLayers.length} tensor inputs.`);const et={};for(let it=0;it<_e.length;it++){const st=this.inputLayers[it],at=_e[it],ot=st.name+"_0_0";et[ot]=at}const tt=Object.keys(this.nodesByDepth).map(it=>parseInt(it,10)).sort(reverseNumberCompare);if(tt.length>1)for(const it of tt){const st=this.nodesByDepth[it];for(const at of st){const ot=at.outboundLayer;if(this.inputLayers.map(xt=>xt.id).indexOf(ot.id)!==-1)continue;const dt=[];for(let xt=0;xt<at.inboundLayers.length;xt++){const wt=at.inboundLayers[xt],Et=at.nodeIndices[xt],At=at.tensorIndices[xt],jt=`${wt.name}_${Et}_${At}`,kt=et[jt];dt.push(kt)}const ht=ot.computeOutputShape(singletonOrArray(dt)),yt=normalizeShapeList(ht),vt=ot.inboundNodes.indexOf(at);for(let xt=0;xt<yt.length;xt++){const wt=`${ot.name}_${vt}_${xt}`;et[wt]=yt[xt]}}}const rt=[],nt=[];for(let it=0;it<this.outputLayers.length;it++){const st=this.outputLayers[it],at=this.outputLayersNodeIndices[it],ot=this.outputLayersTensorIndices[it],dt=`${st.name}_${at}_${ot}`;nt.push(dt)}for(let it=0;it<nt.length;it++){const st=nt[it];assert(st in et),rt.push(et[st])}return singletonOrArray(rt)}runInternalGraph($,_e){_e==null&&(_e=pyListRepeat(null,$.length));const et={};for(let st=0;st<this.inputs.length;++st){const at=this.inputs[st],ot=$[st],dt=_e[st];et[at.id]=[ot,dt]}const tt=Object.keys(this.nodesByDepth).map(st=>parseInt(st,10)).sort(reverseNumberCompare);for(const st of tt){const at=this.nodesByDepth[st];for(const ot of at){const dt=ot.outboundLayer,ht=ot.inputTensors,yt=ot.outputTensors,vt=new Array;for(const xt of ht)xt.id in et&&vt.push(et[xt.id]);if(vt.length===ht.length){let xt={},wt,Et,At,jt;if(ot.callArgs!=null&&(xt=ot.callArgs),vt.length===1){const[kt,Lt]=vt[0];xt.mask==null&&(xt.mask=Lt),At=toList(dt.call(kt,xt)),jt=toList(dt.computeMask(kt,Lt)),wt=[kt],Et=[Lt]}else wt=vt.map(kt=>kt[0]),Et=vt.map(kt=>kt[1]),xt.mask==null&&(xt.mask=Et),At=toList(dt.call(wt,xt)),jt=toList(dt.computeMask(wt,Et));if(dt.activityRegularizer)throw new NotImplementedError("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let kt=0;kt<yt.length;++kt){const Lt=yt[kt],Bt=At[kt],Gt=jt[kt];et[Lt.id]=[Bt,Gt]}}}}const rt=[],nt=[],it=[];for(const st of this.outputs){assert(st.id in et,`Could not compute output ${st.name} : ${st.id}`);const[at,ot]=et[st.id];it.push(at.shape),rt.push(at),nt.push(ot)}return[rt,nt,it]}buildNodeConversionMap($){const _e={};let et;for(const tt of this.layers){et=tt instanceof Container?1:0;for(let rt=0;rt<tt.inboundNodes.length;rt++){const nt=Container.nodeKey(tt,rt);this.containerNodes.has(nt)&&(_e[nt]=et,et+=1)}}return _e}getLayer($,_e){if(_e!=null)return this.findLayer(_e);if($==null)throw new ValueError("Provide either a layer name or layer index");if(typeof $=="number")return this.findLayer($);for(const et of this.layers)if(et.name===$)return et;throw new ValueError(`No such layer: ${$}`)}findLayer($){if(this.layers.length<=$)throw new ValueError(`Was asked to retrieve layer at index ${$}, but model only has ${this.layers.length} layer(s).`);return this.layers[$]}calculateLosses(){return tidy(()=>{const $=[];for(const _e of this.layers)for(let et=0;et<_e.inboundNodes.length;++et){const tt=Container.nodeKey(_e,et);this.containerNodes.has(tt)&&$.push(..._e.calculateLosses())}return $})}getConfig(){const $={name:this.name},_e=this.buildNodeConversionMap(this.layers),et=[];for(const nt of this.layers){const it=nt.getClassName(),st=nt.getConfig(),at=[];for(let dt=0;dt<nt.inboundNodes.length;dt++){const ht=nt.inboundNodes[dt],yt=Container.nodeKey(nt,dt);let vt={};if(this.containerNodes.has(yt)){if(ht.callArgs)try{JSON.stringify(ht.callArgs),vt=ht.callArgs}catch{console.warn(`Layer ${nt.name} was passed non-serializable keyword arguments: ${ht.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),vt={}}if(ht.inboundLayers.length>0){const xt=[];for(let wt=0;wt<ht.inboundLayers.length;wt++){const Et=ht.inboundLayers[wt],At=ht.nodeIndices[wt],jt=ht.tensorIndices[wt],kt=Container.nodeKey(Et,At);let Lt=_e[kt];Lt==null&&(Lt=0),xt.push([Et.name,Lt,jt,vt])}at.push(xt)}}}const ot={};ot.name=nt.name,ot.className=it,ot.config=st,ot.inboundNodes=at,et.push(ot)}$.layers=et;const tt=[];for(let nt=0;nt<this.inputLayers.length;nt++){const it=this.inputLayers[nt],st=this.inputLayersNodeIndices[nt],at=Container.nodeKey(it,st);if(!this.containerNodes.has(at))continue;let ot=_e[at];ot==null&&(ot=0);const dt=this.inputLayersTensorIndices[nt];tt.push([it.name,ot,dt])}$.inputLayers=tt;const rt=[];for(let nt=0;nt<this.outputLayers.length;nt++){const it=this.outputLayers[nt],st=this.outputLayersNodeIndices[nt],at=Container.nodeKey(it,st);if(!this.containerNodes.has(at))continue;let ot=_e[at];ot==null&&(ot=0);const dt=this.outputLayersTensorIndices[nt];rt.push([it.name,ot,dt])}return $.outputLayers=rt,$}static fromConfig($,_e,et={},tt=!1){const rt={},nt={};function it(wt,Et){wt.name in nt?nt[wt.name].push(Et):nt[wt.name]=[Et]}function st(wt,Et){const At=[];let jt;for(const kt of Et){const Lt=kt[0],Bt=kt[1],Gt=kt[2];if(jt=kt[3]==null?{}:kt[3],!(Lt in rt)){it(wt,Et);return}const er=rt[Lt];if(er.inboundNodes.length<=Bt){it(wt,Et);return}const tr=er.inboundNodes[Bt];At.push(tr.outputTensors[Gt])}At.length>0&&wt.apply(singletonOrArray(At),jt)}function at(wt){const Et=wt.name,At=deserialize(wt,_e.customObjects!=null?_e.customObjects:{});At.setFastWeightInitDuringBuild(tt),rt[Et]=At,wt.inboundNodes.forEach(kt=>{if(!(kt instanceof Array))throw new ValueError(`Corrupted configuration, expected array for nodeData: ${kt}`);it(At,kt)})}const ot=_e.name,dt=_e.layers;for(const wt of dt)at(wt);for(;!isObjectEmpty(nt);)for(const wt of dt){const Et=rt[wt.name];if(Et.name in nt){const At=nt[Et.name];delete nt[Et.name];for(const jt of At)st(Et,jt)}}const ht=[],yt=[],vt=_e.inputLayers;for(const wt of vt){const Et=wt[0],At=wt[1],jt=wt[2];assert(Et in rt);const Lt=rt[Et].inboundNodes[At].outputTensors;ht.push(Lt[jt])}const xt=_e.outputLayers;for(const wt of xt){const Et=wt[0],At=wt[1],jt=wt[2];assert(Et in rt);const Lt=rt[Et].inboundNodes[At].outputTensors;yt.push(Lt[jt])}return new $({inputs:ht,outputs:yt,name:ot})}get stateful(){if(this._stateful)throw new ValueError("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const $ of this.layers)if($.stateful)return!0;return!1}resetStates(){tidy(()=>{this.layers.forEach($=>{$.stateful&&$.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function standardizeSampleOrClassWeights(_,$,_e){const et=$.length;if(_==null||Array.isArray(_)&&_.length===0)return $.map(tt=>null);if(et===1)return Array.isArray(_)&&_.length===1?_:typeof _=="object"&&$[0]in _?[_[$[0]]]:[_];if(Array.isArray(_)){if(_.length!==et)throw new Error(`Provided ${_e} is an array of ${_.length} element(s), but the model has ${et} outputs. Make sure a set of weights is provided for each model output.`);return _}else if(typeof _=="object"&&Object.keys(_).length>0&&typeof _[Object.keys(_)[0]]=="object"){const tt=[];return $.forEach(rt=>{rt in _?tt.push(_[rt]):tt.push(null)}),tt}else throw new Error(`The model has multiple (${et}) outputs, so ${_e} must be either an array with ${et} elements or an object with ${$} keys. Provided ${_e} not understood: ${JSON.stringify(_)}`)}function standardizeClassWeights(_,$){return standardizeSampleOrClassWeights(_,$,"classWeight")}async function standardizeWeights(_,$,_e,et){if(_e!=null){const tt=tidy(()=>{if(_.shape.length===1)return clone$1(_);if(_.shape.length===2){if(_.shape[1]>1)return argMax$2(_,1);if(_.shape[1]===1)return reshape$3(_,[_.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${_.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${_.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),rt=Array.from(await tt.data());dispose(tt);const nt=[];return rt.forEach(it=>{if(_e[it]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${it} exists in the data but not in classWeight`);nt.push(_e[it])}),tensor1d(nt,"float32")}else return null}function computeWeightedLoss(_,$){return mul(_,$)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const DEFAULT_VALIDATION_BATCH_SIZE=32;function standardizeDataIteratorOutput(_,$){let _e,et;const tt=$;_e=tt.xs,et=tt.ys,assert$1(_e!=null&&et!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${$}`);const rt=flattenTensorOrArrayOrMap("input",_.inputNames,_e),nt=flattenTensorOrArrayOrMap("output",_.outputNames,et),it=rt[0].shape[0];assert$1(rt.length===_.inputs.length,()=>`LayersModel has ${_.inputs.length} inputs, but the dataset provides ${rt.length} inputs.  (Expected input keys: ${JSON.stringify(_.inputNames)})`),assert$1(nt.length===_.outputs.length,()=>`LayersModel has ${_.outputs.length} outputs, but the dataset provides ${nt.length} outputs.  (Expected output keys: ${JSON.stringify(_.outputNames)})`);for(let st=0;st<rt.length;st++)assert$1(rt[st].shape[0]===it,()=>`Batch size mismatch: input ${_.inputNames[st]} has ${rt[st].shape[0]}; expected  ${it} based on input ${_.inputNames[0]}.`);for(let st=0;st<nt.length;st++)assert$1(nt[st].shape[0]===it,()=>`Batch size mismatch: output ${_.outputNames[st]} has ${nt[st].shape[0]}; expected  ${it} based on input ${_.inputNames[0]}.`);return{xs:rt,ys:nt}}function flattenTensorOrArrayOrMap(_,$,_e){if(_e instanceof Tensor)return[_e];if(Array.isArray(_e))return assert$1(_e.length===$.length,()=>`Received an array of ${_e.length} Tensors, but expected ${$.length} to match the ${_} keys ${$}.`),_e;{const et=[];for(const tt of $){if(_e[tt]==null)throw new ValueError(`The feature data generated by the dataset lacks the required ${_} key '${tt}'.`);et.push(_e[tt])}return et}}function standardizeTensorValidationData(_){if(_.length===3)throw new NotImplementedError("Validation with sample weights is not implemented yet.");return{xs:_[0],ys:_[1]}}async function fitDataset(_,$,_e){const et=_e.batchesPerEpoch!=null;if(assert$1(_.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),assert$1(_e!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),assert$1(_e.epochs!=null&&_e.epochs>0&&Number.isInteger(_e.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${_e.epochs}`),assert$1(!et||_e.batchesPerEpoch>0&&Number.isInteger(_e.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${_e.batchesPerEpoch}`),assert$1(_e.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),_.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");_.isTraining=!0;try{const tt=_e.validationData!=null;let rt,nt;if(tt)if(isDatasetObject(_e.validationData))assert$1(_e.validationBatches==null||_e.validationBatches>0&&Number.isInteger(_e.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${_e.validationBatches}`);else{const wt=standardizeTensorValidationData(_e.validationData);rt=wt.xs,nt=wt.ys}const it=_.makeTrainFunction(),st=_.getDedupedMetricsNames();let at;tt?at=st.slice().concat(st.map(wt=>"val_"+wt)):at=st.slice();const ot=standardizeCallbacks(_e.callbacks,_e.yieldEvery),dt=_e.verbose==null?1:_e.verbose,{callbackList:ht,history:yt}=configureCallbacks(ot,dt,_e.epochs,null,null,getStepsPerEpoch($,_e),null,tt,at);ht.setModel(_),_.history=yt,await ht.onTrainBegin(),_.stopTraining_=!1;let vt=_e.initialEpoch==null?0:_e.initialEpoch,xt=await $.iterator();for(;vt<_e.epochs;){const wt={};await ht.onEpochBegin(vt);let Et=0,At=0;for(et||(xt=await $.iterator());!et||Et<_e.batchesPerEpoch;){const jt=await xt.next();if(et&&jt.done){console.warn(`You provided \`batchesPerEpoch\` as ${_e.batchesPerEpoch}, but your dataset iterator ran out of data after ${Et} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${_e.batchesPerEpoch*_e.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(jt.value!=null){const{xs:kt,ys:Lt}=standardizeDataIteratorOutput(_,jt.value),Bt={};Bt.batch=At,Bt.size=kt[0].shape[0],await ht.onBatchBegin(At,Bt);const Gt=[];if(_e.classWeight!=null){const ar=standardizeClassWeights(_e.classWeight,_.outputNames);for(let Mt=0;Mt<ar.length;++Mt)Gt.push(await standardizeWeights(Lt[Mt],null,ar[Mt]))}const er=kt.concat(Lt).concat(Gt),tr=it(er);dispose(er);for(let ar=0;ar<st.length;++ar){const Mt=st[ar],lt=tr[ar];Bt[Mt]=lt,keep(lt)}await ht.onBatchEnd(At,Bt),disposeTensorsInLogs(Bt),At++,Et++}if(et?Et>=_e.batchesPerEpoch:jt.done){if(tt){let kt;isDatasetObject(_e.validationData)?kt=toList(await _.evaluateDataset(_e.validationData,{batches:_e.validationBatches})):kt=toList(_.evaluate(rt,nt,{batchSize:_e.validationBatchSize==null?DEFAULT_VALIDATION_BATCH_SIZE:_e.validationBatchSize,verbose:0}));for(let Lt=0;Lt<_.metricsNames.length;++Lt)wt[`val_${_.metricsNames[Lt]}`]=kt[Lt]}break}if(_.stopTraining_)break}if(await ht.onEpochEnd(vt,wt),vt++,_.stopTraining_)break}return await ht.onTrainEnd(),await _.history.syncData(),_.history}finally{_.isTraining=!1}}function getStepsPerEpoch(_,$){let _e=null;return $.batchesPerEpoch!=null?_e=$.batchesPerEpoch:Number.isFinite(_.size)&&(_e=_.size),_e}function isDatasetObject(_){return typeof _.iterator=="function"}function isLazyIteratorObject(_){return typeof _.next=="function"}async function evaluateDataset(_,$,_e){_e=_e||{};const et=_e.batches!=null,tt=_.testFunction;let rt=[];if(_e.verbose>0)throw new NotImplementedError("Verbose mode is not implemented yet.");assert$1(!et||_e.batches>0&&Number.isInteger(_e.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(_e.batches)}`);const nt=isLazyIteratorObject($)?$:await $.iterator();let it=0,st=0;for(;!et||st<_e.batches;){const at=await nt.next();if(rt=tidy(()=>{if(at.value){const{xs:ot,ys:dt}=standardizeDataIteratorOutput(_,at.value),ht=ot.concat(dt),yt=tidy(()=>tt(ht));if(dispose(ht),st===0)for(let xt=0;xt<yt.length;++xt)rt.push(scalar(0));const vt=ht[0].shape[0];for(let xt=0;xt<yt.length;++xt){const wt=yt[xt],Et=rt[xt];rt[xt]=tidy(()=>add$3(rt[xt],mul(vt,wt))),st>0&&dispose(Et)}dispose(yt),it+=vt,++st}return rt}),at.done){et&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${_e.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let at=0;at<rt.length;++at){const ot=rt[at];rt[at]=div$1(rt[at],it),dispose(ot)}return singletonOrArray(rt)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function checkBatchSize(_){assert$1(_>0&&Number.isInteger(_),()=>`batchSize is required to be a positive integer, but got ${_}`)}function sliceArrays(_,$,_e){return _==null?[null]:Array.isArray(_)?_.map(et=>sliceAlongFirstAxis(et,$,_e-$)):sliceAlongFirstAxis(_,$,_e-$)}function sliceArraysByIndices(_,$){return tidy(()=>_==null?null:Array.isArray(_)?_.map(_e=>sliceArraysByIndices(_e,$)):gather(_,$.dtype==="int32"?$:cast$3($,"int32")))}function makeBatches(_,$){const _e=[];let et=0,tt=null;for(;et<_;)tt=et+$,tt>=_&&(tt=_),_e.push([et,tt]),et=tt;return _e}function ensureTensorsRank2OrHigher(_){const $=[];_ instanceof Tensor&&(_=[_]);for(let _e=0;_e<_.length;++_e){const et=_[_e];if(et.rank===1)$.push(expandDims$2(et,1));else{if(et.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");$.push(et)}}return $}function disposeNewTensors(_,$){if(_==null)return;const _e=[];if($ instanceof Tensor)_e.push($.id);else if(Array.isArray($))$.forEach(tt=>_e.push(tt.id));else if($!=null)for(const tt in $){const rt=$[tt];_e.push(rt.id)}const et=[];if(_ instanceof Tensor)_e.indexOf(_.id)===-1&&et.push(_);else if(Array.isArray(_))_.forEach(tt=>{_e.indexOf(tt.id)===-1&&et.push(tt)});else if(_!=null)for(const tt in _){const rt=_[tt];_e.indexOf(rt.id)===-1&&et.push(rt)}et.forEach(tt=>{tt.isDisposed||tt.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function isDataTensor(_){return _ instanceof Tensor}function isDataArray(_){return Array.isArray(_)}function isDataDict(_){return!isDataTensor(_)&&!isDataArray(_)}function standardizeInputData(_,$,_e,et=!0,tt=""){if($==null||$.length===0){if(_!=null){let nt=!1;if(isDataArray(_)&&_.length>0)nt=!0;else if(isDataDict(_)){for(const it in _)if(_.hasOwnProperty(it)){nt=!0;break}}else nt=!0;if(nt)throw new ValueError(`Error when checking model ${tt} expected no data, but got ${_}`)}return[]}if(_==null)return $.map(nt=>null);let rt;if(isDataDict(_)){_=_,rt=[];for(const nt of $){if(_[nt]==null)throw new ValueError(`No data provided for "${nt}". Need data for each key in: ${$}`);rt.push(_[nt])}}else if(isDataArray(_)){if(_=_,_.length!==$.length)throw new ValueError(`Error when checking model ${tt}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${$.length} Tensor(s), but instead got the following list of Tensor(s): ${_}`);rt=_}else{if(_=_,$.length>1)throw new ValueError(`The model ${tt} expects ${$.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${_.shape}`);rt=[_]}if(rt=ensureTensorsRank2OrHigher(rt),_e!=null)for(let nt=0;nt<$.length;++nt){if(_e[nt]==null)continue;const it=rt[nt];if(it.shape.length!==_e[nt].length)throw new ValueError(`Error when checking ${tt}: expected ${$[nt]} to have ${_e[nt].length} dimension(s). but got array with shape ${it.shape}`);for(let st=0;st<_e[nt].length;++st){if(st===0&&!et)continue;const at=it.shape[st],ot=_e[nt][st];if(ot!=null&&ot>=0&&at!==ot)throw new ValueError(`${tt} expected a batch of elements where each example has shape [${_e[nt].slice(1,_e[nt].length)}] (i.e.,tensor shape [*,${_e[nt].slice(1,_e[nt].length)}]) but the ${tt} received an input with ${it.shape[0]} examples, each with shape [${it.shape.slice(1,it.shape.length)}] (tensor shape [${it.shape}])`)}}return rt}function checkArrayLengths(_,$,_e){const et=unique$2(_.map(rt=>rt.shape[0]));et.sort();const tt=unique$2($.map(rt=>rt.shape[0]));if(tt.sort(),et.length>1)throw new ValueError(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(_.map(rt=>rt.shape))}`);if(tt.length>1)throw new ValueError(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify($.map(rt=>rt.shape))}`);if(et.length>0&&tt.length>0&&!arraysEqual(et,tt))throw new ValueError(`Input Tensors should have the same number of samples as target Tensors. Found ${et[0]} input sample(s) and ${tt[0]} target sample(s).`)}function checkLossAndTargetCompatibility(_,$,_e){const et=[meanSquaredError$1,binaryCrossentropy$2,categoricalCrossentropy$2];for(let tt=0;tt<_.length;++tt){const rt=_[tt],nt=$[tt],it=_e[tt];if(nt!=null){if(nt===categoricalCrossentropy$2&&rt.shape[rt.shape.length-1]===1)throw new ValueError(`You are passing a target array of shape ${rt.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(et.indexOf(nt)!==-1){const st=rt.shape.slice(1),at=it.slice(1);for(let ot=0;ot<st.length;++ot){const dt=st[ot],ht=at[ot];if(ht!=null&&dt!==ht)throw new ValueError(`A target Tensor with shape ${rt.shape} was passed for an output of shape ${it}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function checkInputData(_,$,_e,et=!0,tt=""){let rt;if(Array.isArray(_)){if(_.length!==$.length)throw new ValueError(`Error when checking model ${tt}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${$.length} Tensor(s), but instead got ${_.length} Tensors(s).`);rt=_}else{if($.length>1)throw new ValueError(`The model expects ${$.length} ${tt} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(_.shape)}.`);rt=[_]}if(_e!=null)for(let nt=0;nt<$.length;++nt){if(_e[nt]==null)continue;const it=rt[nt];if(it.shape.length!==_e[nt].length)throw new ValueError(`Error when checking ${tt}: expected ${$[nt]} to have ${_e[nt].length} dimension(s), but got array with shape ${JSON.stringify(it.shape)}`);for(let st=0;st<_e[nt].length;++st){if(st===0&&!et)continue;const at=it.shape[st],ot=_e[nt][st];if(ot!=null&&ot!==at)throw new ValueError(`Error when checking ${tt}: expected ${$[nt]} to have shape ${JSON.stringify(_e[nt])} but got array with shape ${JSON.stringify(it.shape)}.`)}}}function collectMetrics(_,$){if(_==null||Array.isArray(_)&&_.length===0)return $.map(et=>[]);let _e;if(typeof _=="string"||typeof _=="function")_e=[_];else if(Array.isArray(_)||typeof _=="object")_e=_;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${_}`);if(Array.isArray(_e))return $.map(et=>_e);{const et=[];for(const tt of $){let rt=_e.hasOwnProperty(tt)?_e[tt]:[];Array.isArray(rt)||(rt=[rt]),et.push(rt)}return et}}const LAYERS_MODEL_FORMAT_NAME="layers-model";class LayersModel extends Container{constructor($){super($),this.isTraining=!1}summary($,_e,et=console.log){if(!this.built)throw new ValueError("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");printSummary(this,$,_e,et)}compile($){if($.loss==null&&($.loss=[]),this.loss=$.loss,typeof $.optimizer=="string")this.optimizer_=getOptimizer($.optimizer),this.isOptimizerOwned=!0;else{if(!($.optimizer instanceof Optimizer))throw new ValueError("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=$.optimizer,this.isOptimizerOwned=!1}let _e=[];if(!Array.isArray($.loss)&&typeof $.loss!="string"&&typeof $.loss!="function"){$.loss=$.loss;for(const nt in $.loss)if(this.outputNames.indexOf(nt)===-1)throw new ValueError(`Unknown entry in loss dictionary: "${nt}". Only expected the following keys: ${this.outputNames}`);for(const nt of this.outputNames)$.loss[nt]==null&&console.warn(`Output "${nt}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${nt} during training`),_e.push(get$4($.loss[nt]))}else if(Array.isArray($.loss)){if($.loss.length!==this.outputs.length)throw new ValueError(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${$.loss}.`);_e=$.loss.map(it=>get$4(it))}else{const nt=get$4($.loss);this.outputs.forEach(it=>{_e.push(nt)})}this.lossFunctions=_e,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let nt=0;nt<this.outputs.length;++nt){const it=this.internalOutputShapes[nt],st=this.outputNames[nt];this.feedOutputNames.push(st),this.feedOutputShapes.push(it),this.feedLossFns.push(this.lossFunctions[nt])}const et=[];this.metrics=$.metrics,this.metricsNames=["loss"],this.metricsTensors=[],nameScope("loss",()=>{for(let nt=0;nt<this.outputs.length;++nt){if(et.indexOf(nt)!==-1)continue;const it=this.lossFunctions[nt];this.outputs.length>1&&(this.metricsTensors.push([it,nt]),this.metricsNames.push(this.outputNames[nt]+"_loss"))}});const tt=collectMetrics($.metrics,this.outputNames),rt=(nt,it,st)=>{this.outputNames.length>1&&(it=this.outputNames[nt]+"_"+it),this.metricsNames.push(it),this.metricsTensors.push([st,nt])};nameScope("metric",()=>{for(let nt=0;nt<this.outputs.length;++nt){if(et.indexOf(nt)!==-1)continue;const it=tt[nt];(at=>{const ot="";let dt,ht,yt;for(const vt of at){if(typeof vt=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(vt)!==-1){const wt=this.internalOutputShapes[nt];wt[wt.length-1]===1||this.lossFunctions[nt]===binaryCrossentropy$2?["accuracy","acc"].indexOf(vt)!==-1?ht=binaryAccuracy$1:["crossentropy","ce"].indexOf(vt)!==-1&&(ht=binaryCrossentropy$1):this.lossFunctions[nt]===sparseCategoricalCrossentropy$1?["accuracy","acc"].indexOf(vt)!==-1?ht=sparseCategoricalAccuracy$1:["crossentropy","ce"].indexOf(vt)!==-1&&(ht=sparseCategoricalCrossentropy):["accuracy","acc"].indexOf(vt)!==-1?ht=categoricalAccuracy$1:["crossentropy","ce"].indexOf(vt)!==-1&&(ht=categoricalCrossentropy$1);let Et;["accuracy","acc"].indexOf(vt)!==-1?Et="acc":["crossentropy","ce"].indexOf(vt)!==-1&&(Et="ce"),yt=ht,dt=ot+Et}else yt=get$3(vt),dt=ot+getLossOrMetricName(vt);let xt;nameScope(dt,()=>{xt=yt}),rt(nt,dt,xt)}})(it)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate($,_e,et={}){const tt=et.batchSize==null?32:et.batchSize;checkBatchSize(tt);const nt=this.standardizeUserDataXY($,_e,!0,tt);try{const it=nt[0].concat(nt[1]);this.makeTestFunction();const st=this.testFunction,at=this.testLoop(st,it,tt,et.verbose,et.steps);return singletonOrArray(at)}finally{disposeNewTensors(nt[0],$),disposeNewTensors(nt[1],_e)}}async evaluateDataset($,_e){return this.makeTestFunction(),evaluateDataset(this,$,_e)}checkNumSamples($,_e,et,tt="steps"){let rt;if(et!=null){if(rt=null,_e!=null)throw new ValueError(`If ${tt} is set, batchSize must be null or undefined.Got batchSize = ${_e}`)}else if($!=null)Array.isArray($)?rt=$[0].shape[0]:rt=$.shape[0];else throw new ValueError(`Either the input data should have a defined shape, or ${tt} shoud be specified.`);return rt}execute($,_e){if(Array.isArray(_e)&&_e.length===0)throw new ValueError("`outputs` is an empty Array, which is not allowed.");const et=Array.isArray(_e),tt=et?_e:[_e],rt=this.retrieveSymbolicTensors(tt),nt=new FeedDict;if($ instanceof Tensor&&($=[$]),Array.isArray($)){if($.length!==this.inputs.length)throw new ValueError(`The number of inputs provided (${$.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let st=0;st<this.inputs.length;++st)nt.add(this.inputs[st],$[st])}else for(const st of this.inputs){const at=$[st.name];if(at==null)throw new ValueError(`No value is provided for the model's input ${st.name}`);nt.add(st,at)}const it=execute(rt,nt);return et?it:it[0]}retrieveSymbolicTensors($){const _e=pyListRepeat(null,$.length);let et=$.length;for(const tt of this.layers){const rt=Array.isArray(tt.output)?tt.output:[tt.output],nt=rt.map(it=>it.name);for(let it=0;it<$.length;++it){const st=nt.indexOf($[it]);if(st!==-1&&(_e[it]=rt[st],et--),et===0)break}if(et===0)break}if(et>0){const tt=[];throw _e.forEach((rt,nt)=>{rt==null&&tt.push($[nt])}),new ValueError(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(tt)}`)}return _e}predictLoop($,_e=32,et=!1){return tidy(()=>{const tt=this.checkNumSamples($);if(et)throw new NotImplementedError("Verbose predictLoop() is not implemented yet.");const rt=makeBatches(tt,_e),nt=this.outputs.map(it=>[]);for(let it=0;it<rt.length;++it)tidy(()=>{const at=rt[it][0],ot=rt[it][1],dt=sliceArrays($,at,ot),ht=[];if(Array.isArray(dt))for(let vt=0;vt<dt.length;++vt)ht.push({key:this.inputs[vt],value:dt[vt]});else ht.push({key:this.inputs[0],value:dt});const yt=new FeedDict(ht);return execute(this.outputs,yt)}).forEach((at,ot)=>nt[ot].push(at));return singletonOrArray(nt.map(it=>concat$2(it,0)))})}predict($,_e={}){const et=ensureTensorsRank2OrHigher($);checkInputData(et,this.inputNames,this.feedInputShapes,!1);try{const tt=_e.batchSize==null?32:_e.batchSize;return checkBatchSize(tt),this.predictLoop(et,tt)}finally{disposeNewTensors(et,$)}}predictOnBatch($){checkInputData($,this.inputNames,this.feedInputShapes,!0);const _e=(Array.isArray($)?$[0]:$).shape[0];return this.predictLoop($,_e)}standardizeUserDataXY($,_e,et=!0,tt){if(this.optimizer_==null)throw new RuntimeError("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const rt=[];for(let nt=0;nt<this.feedOutputShapes.length;++nt){const it=this.feedOutputShapes[nt];this.feedLossFns[nt]===sparseCategoricalCrossentropy$1?rt.push(it.slice(0,it.length-1).concat([1])):rt.push(it)}if($=standardizeInputData($,this.feedInputNames,this.feedInputShapes,!1,"input"),_e=standardizeInputData(_e,this.feedOutputNames,rt,!1,"target"),checkArrayLengths($,_e),checkLossAndTargetCompatibility(_e,this.feedLossFns,this.feedOutputShapes),this.stateful&&tt!=null&&tt>0&&$[0].shape[0]%tt!==0)throw new ValueError(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${tt}. Found: ${$[0].shape[0]} sample(s).`);return[$,_e]}async standardizeUserData($,_e,et,tt,rt=!0,nt){const[it,st]=this.standardizeUserDataXY($,_e,rt,nt);if(et!=null)throw new Error("sample weight is not supported yet.");let at=null;if(tt!=null){const ot=standardizeClassWeights(tt,this.outputNames);at=[];for(let dt=0;dt<ot.length;++dt)at.push(await standardizeWeights(st[dt],null,ot[dt]))}return[it,st,at]}testLoop($,_e,et,tt=0,rt){return tidy(()=>{const nt=this.checkNumSamples(_e,et,rt,"steps"),it=[];if(tt>0)throw new NotImplementedError("Verbose mode is not implemented yet.");if(rt!=null)throw new NotImplementedError("steps mode in testLoop() is not implemented yet");{const st=makeBatches(nt,et),at=tensor1d(range$6(0,nt));for(let ot=0;ot<st.length;++ot){const dt=st[ot][0],ht=st[ot][1],yt=sliceAlongFirstAxis(at,dt,ht-dt),vt=sliceArraysByIndices(_e,yt),xt=$(vt);if(ot===0)for(let wt=0;wt<xt.length;++wt)it.push(scalar(0));for(let wt=0;wt<xt.length;++wt){const Et=xt[wt];it[wt]=add$3(it[wt],mul(ht-dt,Et))}}for(let ot=0;ot<it.length;++ot)it[ot]=div$1(it[ot],nt)}return it})}getDedupedMetricsNames(){const $=this.metricsNames,_e=[];for(let et=0;et<$.length;++et){const tt=$[et];let rt=tt;if(count($,tt)>1){const nt=count($.slice(0,et),tt);rt+=`_${nt}`}_e.push(rt)}return _e}makeTrainFunction(){return $=>{const _e=[],et=$.slice(0,this.inputs.length),tt=$.slice(this.inputs.length,this.inputs.length+this.outputs.length),rt=$.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),nt=[],it=()=>{const dt=[];for(let xt=0;xt<this.inputs.length;++xt)dt.push({key:this.inputs[xt],value:et[xt]});const ht=new FeedDict(dt),yt=execute(this.outputs,ht,{training:!0});let vt;for(let xt=0;xt<this.lossFunctions.length;++xt){const wt=this.lossFunctions[xt];let Et=wt(tt[xt],yt[xt]);rt[xt]!=null&&(Et=computeWeightedLoss(Et,rt[xt]));const At=mean$1(Et);_e.push(At),xt===0?vt=Et:vt=add$3(vt,Et)}for(let xt=0;xt<this.metricsTensors.length;++xt){let wt;if(this.outputs.length>1&&xt<this.outputs.length)wt=_e[xt];else{const Et=this.metricsTensors[xt][0],At=this.metricsTensors[xt][1];wt=mean$1(Et(tt[At],yt[At]))}keep(wt),nt.push(wt)}return vt=mean$1(vt),this.calculateLosses().forEach(xt=>{vt=add$3(vt,xt)}),vt},st=this.collectedTrainableWeights.map(dt=>dt.read());return[this.optimizer_.minimize(it,!0,st)].concat(nt)}}makeTestFunction(){this.testFunction=$=>tidy(()=>{const _e=[];let et;const tt=$.slice(0,this.inputs.length),rt=$.slice(this.inputs.length,this.inputs.length+this.outputs.length),nt=[];for(let at=0;at<this.inputs.length;++at)nt.push({key:this.inputs[at],value:tt[at]});const it=new FeedDict(nt),st=execute(this.outputs,it);for(let at=0;at<this.lossFunctions.length;++at){const ot=this.lossFunctions[at],dt=mean$1(ot(rt[at],st[at]));at===0?et=dt:et=add$3(et,dt),_e.push(et)}for(let at=0;at<this.metricsTensors.length;++at){const ot=this.metricsTensors[at][0],dt=this.metricsTensors[at][1],ht=mean$1(ot(rt[dt],st[dt]));_e.push(ht)}return _e})}async fit($,_e,et={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let tt,rt,nt,it,st,at,ot,dt,ht;try{const yt=et.batchSize==null?32:et.batchSize;checkBatchSize(yt);const xt=await this.standardizeUserData($,_e,et.sampleWeight,et.classWeight,!1,yt);tt=xt[0],rt=xt[1],ht=xt[2];let wt=!1,Et;if(et.validationData!=null&&et.validationData.length>0){if(wt=!0,et.validationData.length===2)st=et.validationData[0],at=et.validationData[1];else throw et.validationData.length===3?new NotImplementedError("validationData including sample weights is not supported yet."):new ValueError(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${et.validationData} is invalid.`);const ar=await this.standardizeUserData(st,at,null,null,!0,yt);ot=ar[0],dt=ar[1],Et=ot.concat(dt)}else if(et.validationSplit!=null&&et.validationSplit>0&&et.validationSplit<1){wt=!0;const tr=Math.floor(tt[0].shape[0]*(1-et.validationSplit)),ar=tt[0].shape[0];ot=sliceArrays(tt,tr,ar),nt=tt,tt=sliceArrays(tt,0,tr),dt=sliceArrays(rt,tr,ar),it=rt,rt=sliceArrays(rt,0,tr),Et=ot.concat(dt)}else et.validationSteps!=null&&(wt=!0);const At=tt.concat(rt).concat(ht);this.checkTrainableWeightsConsistency();const jt=this.makeTrainFunction(),kt=this.getDedupedMetricsNames();let Lt,Bt;wt?(this.makeTestFunction(),Lt=this.testFunction,Bt=kt.slice().concat(kt.map(tr=>"val_"+tr))):(Lt=null,Et=[],Bt=kt.slice());const Gt=standardizeCallbacks(et.callbacks,et.yieldEvery);return await this.fitLoop(jt,At,kt,yt,et.epochs,et.verbose,Gt,Lt,Et,et.shuffle,Bt,et.initialEpoch,null,null)}finally{this.isTraining=!1,disposeNewTensors(tt,$),disposeNewTensors(rt,_e),disposeNewTensors(nt,$),disposeNewTensors(it,_e),disposeNewTensors(ot,st),disposeNewTensors(dt,at),ht!=null&&dispose(ht)}}async fitLoop($,_e,et,tt,rt,nt,it,st,at,ot,dt,ht,yt,vt){tt==null&&(tt=32),rt==null&&(rt=1),ot==null&&(ot=!0),ht==null&&(ht=0);let xt=!1;if(st!=null&&at!=null&&(xt=!0),vt!=null&&(xt=!0,yt==null))throw new ValueError("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const wt=this.checkNumSamples(_e,tt,yt,"steps_per_epoch");let Et;wt!=null&&(Et=range$6(0,wt)),nt==null&&(nt=1);const{callbackList:At,history:jt}=configureCallbacks(it,nt,rt,ht,wt,yt,tt,xt,dt);At.setModel(this),this.history=jt,await At.onTrainBegin(),this.stopTraining_=!1;for(let kt=ht;kt<rt;++kt){await At.onEpochBegin(kt);const Lt={};if(yt!=null)throw new NotImplementedError("stepsPerEpoch mode is not implemented yet.");{if(ot==="batch")throw new NotImplementedError("batch shuffling is not implemneted yet");ot&&shuffle(Et);const Bt=tensor1d(Et),Gt=makeBatches(wt,tt);for(let er=0;er<Gt.length;++er){const tr={};if(await At.onBatchBegin(er,tr),tidy(()=>{const ar=Gt[er][0],Mt=Gt[er][1],lt=sliceAlongFirstAxis(Bt,ar,Mt-ar);tr.batch=er,tr.size=Mt-ar;const mt=sliceArraysByIndices(_e,lt),gt=$(mt);for(let bt=0;bt<et.length;++bt){const St=et[bt],Nt=gt[bt];tr[St]=Nt,keep(Nt)}if(er===Gt.length-1&&xt){const bt=this.testLoop(st,at,tt);for(let St=0;St<et.length;++St){const Nt=et[St],Pt=bt[St];keep(Pt),Lt["val_"+Nt]=Pt}}}),await At.onBatchEnd(er,tr),disposeTensorsInLogs(tr),this.stopTraining_)break}Bt.dispose()}if(await At.onEpochEnd(kt,Lt),this.stopTraining_)break}return await At.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset($,_e){return fitDataset(this,$,_e)}async trainOnBatch($,_e){const et=await this.standardizeUserData($,_e),tt=et[0],rt=et[1],it=this.makeTrainFunction()(tt.concat(rt)),st=[];for(const at of it){const ot=await at.data();st.push(ot[0])}return dispose(it),disposeNewTensors(et[0],$),disposeNewTensors(et[1],_e),singletonOrArray(st)}getNamedWeights($){const _e=[],et=$!=null&&$.trainableOnly,tt=et?this.trainableWeights:this.weights,rt=this.getWeights(et);for(let nt=0;nt<tt.length;++nt)et&&!tt[nt].trainable||_e.push({name:tt[nt].originalName,tensor:rt[nt]});return _e}set stopTraining($){this.stopTraining_=$}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer($){this.optimizer_!==$&&(this.optimizer_=$,this.isOptimizerOwned=!1)}dispose(){const $=super.dispose();if($.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const _e=memory().numTensors;this.optimizer_.dispose(),$.numDisposedVariables+=_e-memory().numTensors}return $}getLossIdentifiers(){let $;if(typeof this.loss=="string")$=toSnakeCase(this.loss);else if(Array.isArray(this.loss)){for(const _e of this.loss)if(typeof _e!="string")throw new Error("Serialization of non-string loss is not supported.");$=this.loss.map(_e=>toSnakeCase(_e))}else{const _e=Object.keys(this.loss);$={};const et=this.loss;for(const tt of _e)if(typeof et[tt]=="string")$[tt]=toSnakeCase(et[tt]);else throw new Error("Serialization of non-string loss is not supported.")}return $}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[toSnakeCase(getLossOrMetricName(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map($=>toSnakeCase(getLossOrMetricName($)));{const $={};for(const _e in this.metrics)$[_e]=toSnakeCase(getLossOrMetricName(this.metrics[_e]));return $}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig($){if($.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if($.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if($.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const _e=convertPythonicToTs($.optimizer_config),et=deserialize(_e);let tt;if(typeof $.loss=="string")tt=toCamelCase($.loss);else if(Array.isArray($.loss))tt=$.loss.map(nt=>toCamelCase(nt));else if($.loss!=null){tt={};for(const nt in $.loss)tt[nt]=toCamelCase($.loss[nt])}let rt;if(Array.isArray($.metrics))rt=$.metrics.map(nt=>toCamelCase(nt));else if($.metrics!=null){rt={};for(const nt in $.metrics)rt[nt]=toCamelCase($.metrics[nt])}this.compile({loss:tt,metrics:rt,optimizer:et})}async save($,_e){if(typeof $=="string"){const at=getSaveHandlers($);if(at.length===0)throw new ValueError(`Cannot find any save handlers for URL '${$}'`);if(at.length>1)throw new ValueError(`Found more than one (${at.length}) save handlers for URL '${$}'`);$=at[0]}if($.save==null)throw new ValueError("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const et=await encodeWeights(this.getNamedWeights(_e)),it={modelTopology:this.toJSON(null,!1),format:LAYERS_MODEL_FORMAT_NAME,generatedBy:`TensorFlow.js tfjs-layers v${version$6}`,convertedBy:null};if((_e==null?!1:_e.includeOptimizer)&&this.optimizer!=null){it.trainingConfig=this.getTrainingConfig();const at="optimizer",{data:ot,specs:dt}=await encodeWeights(await this.optimizer.getWeights(),at);et.specs.push(...dt),et.data=concatenateArrayBuffers([et.data,ot])}return this.userDefinedMetadata!=null&&(checkUserDefinedMetadata(this.userDefinedMetadata,this.name,!0),it.userDefinedMetadata=this.userDefinedMetadata),it.weightData=et.data,it.weightSpecs=et.specs,$.save(it)}setUserDefinedMetadata($){checkUserDefinedMetadata($,this.name),this.userDefinedMetadata=$}getUserDefinedMetadata(){return this.userDefinedMetadata}}LayersModel.className="Model";registerClass(LayersModel);class Functional extends LayersModel{}Functional.className="Functional";registerClass(Functional);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function modelFromJSON(_,$){"modelTopology"in _||(_={modelTopology:_}),_=_;let _e=_.modelTopology;_e.model_config!=null&&(_e=_e.model_config);const et=convertPythonicToTs(_e),tt=deserialize(et,$);if(_.weightsManifest!=null){const rt=await loadWeights(_.weightsManifest,_.pathPrefix,tt.weights.map(it=>it.originalName)),nt={};for(const it of tt.weights)nt[it.originalName]=rt[it.originalName];tt.loadWeights(nt),dispose(rt)}return tt}async function loadLayersModel(_,$){if($==null&&($={}),typeof _=="string"){const _e=getLoadHandlers(_,$);if(_e.length===0)_e.push(browserHTTPRequest(_,$));else if(_e.length>1)throw new ValueError(`Found more than one (${_e.length}) load handlers for URL '${_}'`);_=_e[0]}return loadLayersModelFromIOHandler(_,void 0,$)}async function loadLayersModelFromIOHandler(_,$,_e){if(_e==null&&(_e={}),_.load==null)throw new ValueError("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const et=await _.load();let tt=et.modelTopology;tt.model_config!=null&&(tt=tt.model_config);const rt=_e.strict==null?!0:_e.strict,nt=et.weightData!=null&&et.weightSpecs!=null&&rt,it=deserialize(convertPythonicToTs(tt),$,nt),st=et.trainingConfig;if(st!=null&&it.loadTrainingConfig(st),et.userDefinedMetadata!=null&&it.setUserDefinedMetadata(et.userDefinedMetadata),et.weightData!=null){if(et.weightSpecs==null)throw new ValueError("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:at,optimizerWeights:ot}=decodeModelAndOptimizerWeights(et.weightData,et.weightSpecs);it.loadWeights(at,rt),it.optimizer!=null&&ot.length>0&&await it.optimizer.setWeights(ot),dispose(at),dispose(ot.map(dt=>dt.tensor))}return it}function decodeModelAndOptimizerWeights(_,$){const _e=decodeWeights(_,$),et={},tt=[];return $.forEach(rt=>{rt.group==="optimizer"?tt.push({name:rt.name,tensor:_e[rt.name]}):et[rt.name]=_e[rt.name]}),{modelWeights:et,optimizerWeights:tt}}class Sequential extends LayersModel{constructor($){if(super({inputs:[],outputs:[]}),$=$||{},this.trainable=!0,this.built=!1,this.name=$.name!=null?$.name:getUid("sequential_"),$.layers!=null)for(const _e of $.layers)this.add(_e)}checkShape($){if($.inboundNodes[0].outputTensors[0].shape.some(et=>et<0))throw new ValueError(`Negative dimension size caused by adding layer ${$.name} with input shape [${$.inboundNodes[0].inputTensors[0].shape}]`)}add($){const _e=$ instanceof Sequential||$ instanceof LayersModel;let et;if(_e){if(et=$,et.outputs.length!==1)throw new ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(et.inputs.length!==1)throw new ValueError("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if($.inboundNodes.length===0){if($.batchInputShape==null)throw new ValueError("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const tt=Input({batchShape:$.batchInputShape,dtype:$.dtype,name:$.name+"_input"});$.apply(tt)}if(_e)this.outputs=et.outputs,this.inputs=et.inputs;else{if($.inboundNodes.length!==1)throw new ValueError(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${$.name} which has ${$.inboundNodes.length} pre-existing inbound connections.`);if($.inboundNodes[0].outputTensors.length!==1)throw new ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape($),this.outputs=[$.inboundNodes[0].outputTensors[0]],this.inputs=getSourceInputs(this.outputs[0])}this.inboundNodes=[],new Node$1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:pyListRepeat(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(tt=>tt.shape),outputShapes:this.outputs[0].shape})}else{const tt=$.apply(this.outputs[0]);if(Array.isArray(tt))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape($),this.outputs=[tt],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push($),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const $=this.layers.length-1;this.layers[$].outboundNodes=[],this.outputs=[this.layers[$].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call($,_e){return this.model==null&&this.build(),this.model.call($,_e)}build($){if(getExactlyOneShape($),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new LayersModel({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary($,_e,et=console.log){this.built||this.build(),super.summary($,_e,et)}setWeights($){this.model==null&&this.build(),this.model.setWeights($)}evaluate($,_e,et={}){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return this.model.evaluate($,_e,et)}async evaluateDataset($,_e){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return this.model.evaluateDataset($,_e)}predict($,_e={}){return this.model==null&&this.build(),this.model.predict($,_e)}predictOnBatch($){return this.model==null&&this.build(),this.model.predictOnBatch($)}compile($){this.build(),this.model.compile($),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer($){this.model.optimizer=$}async fit($,_e,et={}){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return this.model.fit($,_e,et)}async fitDataset($,_e){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return this.model.fitDataset($,_e)}async trainOnBatch($,_e){return this.model.trainOnBatch($,_e)}static fromConfig($,_e,et={},tt=!1){let rt,nt={};if(_e instanceof Array){if(_e[0].className==null||_e[0].className==="Merge")throw new ValueError("Legacy serialization format not supported yet.");rt=_e}else assert$1(_e.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),rt=_e.layers,delete _e.layers,nt=_e;const it=new $(nt);if(!(it instanceof Sequential))throw new NotImplementedError(`Sequential.fromConfig called on non-Sequential input: ${it}`);for(const st of rt){const ot=deserialize(st,void 0,tt);tt&&ot.setFastWeightInitDuringBuild(!0),it.add(ot)}return it}set stopTraining($){if(this.model==null)throw new ValueError("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=$}get stopTraining(){if(this.model==null)throw new ValueError("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const $=[];for(const _e of this.layers){const et={};et.className=_e.getClassName(),et.config=_e.getConfig(),$.push(et)}return{name:this.name,layers:$}}}Sequential.className="Sequential";registerClass(Sequential);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function model(_){return new LayersModel(_)}function sequential$1(_){return new Sequential(_)}function input(_){return Input(_)}function registerCallbackConstructor(_,$){CallbackConstructorRegistry.registerCallbackConstructor(_,$)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Activation$1=class extends Serializable{getConfig(){return{}}};class Elu extends Activation$1{apply($,_e=1){return elu$3($,_e)}}Elu.className="elu";registerClass(Elu);class Selu extends Activation$1{apply($){return selu$2($)}}Selu.className="selu";registerClass(Selu);class Relu extends Activation$1{apply($){return relu$2($)}}Relu.className="relu";registerClass(Relu);class Relu6 extends Activation$1{apply($){return tidy(()=>minimum$3(6,relu$2($)))}}Relu6.className="relu6";registerClass(Relu6);let Linear$1=class extends Activation$1{apply($){return $}};Linear$1.className="linear";registerClass(Linear$1);class Sigmoid extends Activation$1{apply($){return sigmoid$2($)}}Sigmoid.className="sigmoid";registerClass(Sigmoid);class HardSigmoid extends Activation$1{apply($){return hardSigmoid($)}}HardSigmoid.className="hardSigmoid";registerClass(HardSigmoid);class Softplus extends Activation$1{apply($){return softplus$2($)}}Softplus.className="softplus";registerClass(Softplus);class Softsign extends Activation$1{apply($){return softsign($)}}Softsign.className="softsign";registerClass(Softsign);class Tanh extends Activation$1{apply($){return tanh$2($)}}Tanh.className="tanh";registerClass(Tanh);let Softmax$1=class extends Activation$1{apply($,_e=-1){return softmax$3($,_e)}};Softmax$1.className="softmax";registerClass(Softmax$1);class LogSoftmax extends Activation$1{apply($,_e=-1){return logSoftmax($,_e)}}LogSoftmax.className="logSoftmax";registerClass(LogSoftmax);class Gelu extends Activation$1{apply($){return tidy(()=>tidy(()=>{const _e=Math.sqrt(2),et=mul(.5,add$3(1,erf$2(div$1($,_e))));return mul($,et)}))}}Gelu.className="gelu";registerClass(Gelu);class GeluNew extends Activation$1{apply($){return tidy(()=>mul(.5,mul($,add$3(1,tanh$2(mul(sqrt$4(div$1(2,Math.PI)),add$3($,mul(.044715,pow$3($,3)))))))))}}GeluNew.className="gelu_new";registerClass(GeluNew);class Mish extends Activation$1{apply($){return tidy(()=>mul($,tanh$2(softplus$2($))))}}Mish.className="mish";registerClass(Mish);class Swish extends Activation$1{apply($,_e=1){return tidy(()=>mul(sigmoid$2(mul($,_e)),$))}}Swish.className="swish";registerClass(Swish);function serializeActivation(_){return _.getClassName()}function deserializeActivation(_,$={}){return deserializeKerasObject(_,SerializationMap.getMap().classNameMap,$,"activation")}function getActivation(_){if(_==null){const $={};return $.className="linear",$.config={},deserializeActivation($)}if(typeof _=="string"){const $={};return $.className=_,$.config={},deserializeActivation($)}else return _ instanceof Activation$1?_:deserializeActivation(_)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function assertObjectArgs(_){if(_!=null&&typeof _!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${_}`)}class Regularizer extends Serializable{}class L1L2 extends Regularizer{constructor($){super(),assertObjectArgs($),this.l1=$==null||$.l1==null?.01:$.l1,this.l2=$==null||$.l2==null?.01:$.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply($){return tidy(()=>{let _e=zeros$2([1]);return this.hasL1&&(_e=add$3(_e,sum$2(mul(this.l1,abs$2($))))),this.hasL2&&(_e=add$3(_e,sum$2(mul(this.l2,square$2($))))),reshape$3(_e,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig($,_e){return new $({l1:_e.l1,l2:_e.l2})}}L1L2.className="L1L2";registerClass(L1L2);function l1$1(_){return assertObjectArgs(_),new L1L2({l1:_!=null?_.l1:null,l2:0})}function l2$1(_){return assertObjectArgs(_),new L1L2({l2:_!=null?_.l2:null,l1:0})}const REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP={l1l2:"L1L2"};function serializeRegularizer(_){return serializeKerasObject(_)}function deserializeRegularizer(_,$={}){return deserializeKerasObject(_,SerializationMap.getMap().classNameMap,$,"regularizer")}function getRegularizer(_){if(_==null)return null;if(typeof _=="string"){const _e={className:_ in REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP?REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP[_]:_,config:{}};return deserializeRegularizer(_e)}else return _ instanceof Regularizer?_:deserializeRegularizer(_)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ReLU extends Layer$1{constructor($){super($??{}),this.supportsMasking=!0,$!=null&&(this.maxValue=$.maxValue)}call($,_e){$=getExactlyOneTensor($);let et=relu$2($);return this.maxValue!=null&&(et=clipByValue$2(et,0,this.maxValue)),et}computeOutputShape($){return $}getConfig(){const $={maxValue:this.maxValue},_e=super.getConfig();return Object.assign($,_e),$}}ReLU.className="ReLU";registerClass(ReLU);class LeakyReLU extends Layer$1{constructor($){super($??{}),this.DEFAULT_ALPHA=.3,$==null&&($={}),this.alpha=$.alpha==null?this.DEFAULT_ALPHA:$.alpha}call($,_e){const et=getExactlyOneTensor($);return leakyRelu$2(et,this.alpha)}computeOutputShape($){return $}getConfig(){const $={alpha:this.alpha},_e=super.getConfig();return Object.assign($,_e),$}}LeakyReLU.className="LeakyReLU";registerClass(LeakyReLU);class PReLU extends Layer$1{constructor($){if(super($??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",$==null&&($={}),this.supportsMasking=!0,this.alphaInitializer=getInitializer($.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=getRegularizer($.alphaRegularizer),this.alphaConstraint=getConstraint($.alphaConstraint),$.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray($.sharedAxes))this.sharedAxes=$.sharedAxes;else if(typeof $.sharedAxes=="number")this.sharedAxes=[$.sharedAxes];else throw new ValueError(`Expected sharedAxes to be a number or an array of numbers, but got ${$.sharedAxes}`)}build($){$=getExactlyOneShape($);const _e=$.slice(1);if(this.sharedAxes!=null)for(const tt of this.sharedAxes)_e[tt-1]=1;this.alpha=this.addWeight("alpha",_e,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const et={};if(this.sharedAxes!=null)for(let tt=1;tt<$.length;++tt)et[tt]=$[tt];this.inputSpec=[new InputSpec({ndim:$.length,axes:et})],this.built=!0}call($,_e){return $=getExactlyOneTensor($),prelu$3($,this.alpha.read())}getConfig(){const $={alphaInitializer:serializeInitializer(this.alphaInitializer),alphaRegularizer:serializeRegularizer(this.alphaRegularizer),alphaConstraint:serializeConstraint(this.alphaConstraint),sharedAxes:this.sharedAxes},_e=super.getConfig();return Object.assign($,_e),$}}PReLU.className="PReLU";registerClass(PReLU);let ELU$3=class extends Layer$1{constructor($){if(super($??{}),this.DEFAULT_ALPHA=1,$==null&&($={}),$.alpha!=null&&$.alpha!==this.DEFAULT_ALPHA)throw new NotImplementedError(`Non-default alpha value (${$.alpha}) is not supported by the ELU layer yet.`);this.alpha=$.alpha==null?this.DEFAULT_ALPHA:$.alpha}call($,_e){const et=getExactlyOneTensor($);return elu$4(et)}computeOutputShape($){return $}getConfig(){const $={alpha:this.alpha},_e=super.getConfig();return Object.assign($,_e),$}};ELU$3.className="ELU";registerClass(ELU$3);class ThresholdedReLU extends Layer$1{constructor($){super($??{}),this.DEFAULT_THETA=1,$==null&&($={}),this.theta=$.theta==null?this.DEFAULT_THETA:$.theta}call($,_e){const et=getExactlyOneTensor($);return mul(et,cast$3(greater$3(et,this.theta),"float32"))}computeOutputShape($){return $}getConfig(){const $={theta:this.theta},_e=super.getConfig();return Object.assign($,_e),$}}ThresholdedReLU.className="ThresholdedReLU";registerClass(ThresholdedReLU);class Softmax extends Layer$1{constructor($){super($??{}),this.DEFAULT_AXIS=1,$==null&&($={}),this.softmax=new Softmax$1().apply,this.axis=$.axis==null?this.DEFAULT_AXIS:$.axis}call($,_e){return tidy(()=>{let et=getExactlyOneTensor($);const tt=_e.mask;if(tt!=null){const rt=mul(sub$2(ones$1(et.shape),cast$3(tt,et.dtype)),scalar(-1e9));et=add$3(et,rt)}return this.axis instanceof Array?this.axis.length>1?exp$3(sub$2(et,logSumExp(et,this.axis,!0))):this.softmax(et,this.axis[0]):this.softmax(et,this.axis)})}computeOutputShape($){return $}getConfig(){const $={axis:this.axis},_e=super.getConfig();return Object.assign($,_e),$}}Softmax.className="Softmax";registerClass(Softmax);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function normalizeArray(_,$,_e){if(typeof _=="number")return pyListRepeat(_,$);if(_.length!==$)throw new ValueError(`The ${_e} argument must be an integer or tuple of ${$} integers. Received: ${_.length} elements.`);for(let et=0;et<$;++et){const tt=_[et];if(!isInteger(tt))throw new ValueError(`The ${_e} argument must be an integer or tuple of ${$} integers. Received: ${JSON.stringify(_)} including a non-integer number ${tt}`)}return _}function convOutputLength(_,$,_e,et,tt=1){if(_==null)return _;const rt=$+($-1)*(tt-1);let nt;return _e==="same"?nt=_:nt=_-rt+1,Math.floor((nt+et-1)/et)}function deconvLength(_,$,_e,et){if(_==null)return null;if(et==="valid")_=_*$+max$5([_e-$,0]);else if(et==="same")_=_*$;else throw new ValueError(`Unsupport padding mode: ${et}.`);return _}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function preprocessConv2DInput(_,$){return tidy(()=>(checkDataFormat($),$==="channelsFirst"?transpose$2(_,[0,2,3,1]):_))}function preprocessConv3DInput(_,$){return tidy(()=>(checkDataFormat($),$==="channelsFirst"?transpose$2(_,[0,2,3,4,1]):_))}function conv1dWithBias(_,$,_e,et=1,tt="valid",rt,nt=1){return tidy(()=>{if(rt==null&&(rt=imageDataFormat()),checkDataFormat(rt),_.shape.length!==3)throw new ValueError(`The input of a conv1dWithBias operation should be 3, but is ${_.shape.length} instead.`);if($.shape.length!==3)throw new ValueError(`The kernel for a conv1dWithBias operation should be 3, but is ${$.shape.length} instead`);if(_e!=null&&_e.shape.length!==1)throw new ValueError(`The bias for a conv1dWithBias operation should be 1, but is ${_e.shape.length} instead`);if(rt==="channelsFirst"&&(_=transpose$2(_,[0,2,1])),tt==="causal")throw new NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let it=conv1d$1(_,$,et,tt==="same"?"same":"valid","NWC",nt);return _e!=null&&(it=biasAdd(it,_e)),it})}function conv2dWithBiasActivation(_,$,_e,et=[1,1],tt="valid",rt,nt,it=null){return tidy(()=>{if(rt==null&&(rt=imageDataFormat()),checkDataFormat(rt),_.rank!==3&&_.rank!==4)throw new ValueError(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${_.rank}.`);if($.rank!==3&&$.rank!==4)throw new ValueError(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${_.rank}.`);let st=preprocessConv2DInput(_,rt);if(tt==="causal")throw new NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return st=conv2d$2({x:st,filter:$,strides:et,pad:tt==="same"?"same":"valid",dilations:nt,dataFormat:"NHWC",bias:_e,activation:it}),rt==="channelsFirst"&&(st=transpose$2(st,[0,3,1,2])),st})}function conv3dWithBias(_,$,_e,et=[1,1,1],tt="valid",rt,nt){return tidy(()=>{if(rt==null&&(rt=imageDataFormat()),checkDataFormat(rt),_.rank!==4&&_.rank!==5)throw new ValueError(`conv3dWithBias expects input to be of rank 4 or 5, but received ${_.rank}.`);if($.rank!==4&&$.rank!==5)throw new ValueError(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${_.rank}.`);let it=preprocessConv3DInput(_,rt);if(tt==="causal")throw new NotImplementedError("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return it=conv3d$1(it,$,et,tt==="same"?"same":"valid","NDHWC",nt),_e!=null&&(it=biasAdd(it,_e)),rt==="channelsFirst"&&(it=transpose$2(it,[0,4,1,2,3])),it})}class BaseConv extends Layer$1{constructor($,_e){if(super(_e),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",BaseConv.verifyArgs(_e),this.rank=$,assertPositiveInteger(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new NotImplementedError(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=normalizeArray(_e.kernelSize,$,"kernelSize"),this.strides=normalizeArray(_e.strides==null?1:_e.strides,$,"strides"),this.padding=_e.padding==null?"valid":_e.padding,checkPaddingMode(this.padding),this.dataFormat=_e.dataFormat==null?"channelsLast":_e.dataFormat,checkDataFormat(this.dataFormat),this.activation=getActivation(_e.activation),this.useBias=_e.useBias==null?!0:_e.useBias,this.biasInitializer=getInitializer(_e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=getConstraint(_e.biasConstraint),this.biasRegularizer=getRegularizer(_e.biasRegularizer),this.activityRegularizer=getRegularizer(_e.activityRegularizer),this.dilationRate=normalizeArray(_e.dilationRate==null?1:_e.dilationRate,$,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ValueError(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ValueError(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ValueError(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs($){if(assert("kernelSize"in $,"required key 'kernelSize' not in config"),typeof $.kernelSize!="number"&&!checkArrayTypeAndLength($.kernelSize,"number",1,3))throw new ValueError(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify($.kernelSize)}.`)}getConfig(){const $={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:serializeActivation(this.activation),useBias:this.useBias,biasInitializer:serializeInitializer(this.biasInitializer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),biasConstraint:serializeConstraint(this.biasConstraint)},_e=super.getConfig();return Object.assign($,_e),$}}class Conv extends BaseConv{constructor($,_e){super($,_e),this.kernel=null,Conv.verifyArgs(_e),this.filters=_e.filters,assertPositiveInteger(this.filters,"filters"),this.kernelInitializer=getInitializer(_e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=getConstraint(_e.kernelConstraint),this.kernelRegularizer=getRegularizer(_e.kernelRegularizer)}build($){$=getExactlyOneShape($);const _e=this.dataFormat==="channelsFirst"?1:$.length-1;if($[_e]==null)throw new ValueError(`The channel dimension of the input should be defined. Found ${$[_e]}`);const et=$[_e],tt=this.kernelSize.concat([et,this.filters]);this.kernel=this.addWeight("kernel",tt,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[_e]:et}}],this.built=!0}call($,_e){return tidy(()=>{$=getExactlyOneTensor($);let et;const tt=this.bias==null?null:this.bias.read(),rt=mapActivationToFusedKernel(this.activation.getClassName());if(rt!=null&&this.rank===2)et=conv2dWithBiasActivation($,this.kernel.read(),tt,this.strides,this.padding,this.dataFormat,this.dilationRate,rt);else{if(this.rank===1)et=conv1dWithBias($,this.kernel.read(),tt,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)et=conv2dWithBiasActivation($,this.kernel.read(),tt,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)et=conv3dWithBias($,this.kernel.read(),tt,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new NotImplementedError("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(et=this.activation.apply(et))}return et})}computeOutputShape($){$=getExactlyOneShape($);const _e=[],et=this.dataFormat==="channelsLast"?$.slice(1,$.length-1):$.slice(2);for(let rt=0;rt<et.length;++rt){const nt=convOutputLength(et[rt],this.kernelSize[rt],this.padding,this.strides[rt],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[rt]);_e.push(nt)}let tt=[$[0]];return this.dataFormat==="channelsLast"?(tt=tt.concat(_e),tt.push(this.filters)):(tt.push(this.filters),tt=tt.concat(_e)),tt}getConfig(){const $={filters:this.filters,kernelInitializer:serializeInitializer(this.kernelInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint)},_e=super.getConfig();return Object.assign($,_e),$}static verifyArgs($){if(!("filters"in $)||typeof $.filters!="number"||$.filters<1)throw new ValueError(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify($.filters)}`)}}class Conv2D extends Conv{constructor($){super(2,$),Conv2D.verifyArgs($)}getConfig(){const $=super.getConfig();return delete $.rank,$}static verifyArgs($){if(typeof $.kernelSize!="number"&&!checkArrayTypeAndLength($.kernelSize,"number",1,2))throw new ValueError(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify($.kernelSize)}.`)}}Conv2D.className="Conv2D";registerClass(Conv2D);class Conv3D extends Conv{constructor($){super(3,$),Conv3D.verifyArgs($)}getConfig(){const $=super.getConfig();return delete $.rank,$}static verifyArgs($){if(typeof $.kernelSize!="number"&&!(Array.isArray($.kernelSize)&&($.kernelSize.length===1||$.kernelSize.length===3)))throw new ValueError(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify($.kernelSize)}.`)}}Conv3D.className="Conv3D";registerClass(Conv3D);class Conv2DTranspose extends Conv2D{constructor($){if(super($),this.inputSpec=[new InputSpec({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ValueError(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build($){if($=getExactlyOneShape($),$.length!==4)throw new ValueError("Input should have rank 4; Received input shape: "+JSON.stringify($));const _e=this.dataFormat==="channelsFirst"?1:$.length-1;if($[_e]==null)throw new ValueError("The channel dimension of the inputs should be defined. Found `None`.");const et=$[_e],tt=this.kernelSize.concat([this.filters,et]);this.kernel=this.addWeight("kernel",tt,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new InputSpec({ndim:4,axes:{[_e]:et}})],this.built=!0}call($,_e){return tidy(()=>{let et=getExactlyOneTensor($);if(et.shape.length!==4)throw new ValueError(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${et.shape.length}`);const tt=et.shape,rt=tt[0];let nt,it;this.dataFormat==="channelsFirst"?(nt=2,it=3):(nt=1,it=2);const st=tt[nt],at=tt[it],ot=this.kernelSize[0],dt=this.kernelSize[1],ht=this.strides[0],yt=this.strides[1],vt=deconvLength(st,ht,ot,this.padding),xt=deconvLength(at,yt,dt,this.padding),wt=[rt,vt,xt,this.filters];this.dataFormat!=="channelsLast"&&(et=transpose$2(et,[0,2,3,1]));let Et=conv2dTranspose$1(et,this.kernel.read(),wt,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(Et=transpose$2(Et,[0,3,1,2])),this.bias!=null&&(Et=biasAdd(Et,this.bias.read(),this.dataFormat)),this.activation!=null&&(Et=this.activation.apply(Et)),Et})}computeOutputShape($){$=getExactlyOneShape($);const _e=$.slice();let et,tt,rt;this.dataFormat==="channelsFirst"?(et=1,tt=2,rt=3):(et=3,tt=1,rt=2);const nt=this.kernelSize[0],it=this.kernelSize[1],st=this.strides[0],at=this.strides[1];return _e[et]=this.filters,_e[tt]=deconvLength(_e[tt],st,nt,this.padding),_e[rt]=deconvLength(_e[rt],at,it,this.padding),_e}getConfig(){const $=super.getConfig();return delete $.dilationRate,$}}Conv2DTranspose.className="Conv2DTranspose";registerClass(Conv2DTranspose);class Conv3DTranspose extends Conv3D{constructor($){if(super($),this.inputSpec=[new InputSpec({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new ValueError(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build($){if($=getExactlyOneShape($),$.length!==5)throw new ValueError("Input should have rank 5; Received input shape: "+JSON.stringify($));const _e=this.dataFormat==="channelsFirst"?1:$.length-1;if($[_e]==null)throw new ValueError("The channel dimension of the inputs should be defined. Found `None`.");const et=$[_e],tt=this.kernelSize.concat([this.filters,et]);this.kernel=this.addWeight("kernel",tt,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new InputSpec({ndim:5,axes:{[_e]:et}})],this.built=!0}call($,_e){return tidy(()=>{let et=getExactlyOneTensor($);if(et.shape.length!==5)throw new ValueError(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${et.shape.length}`);const tt=et.shape,rt=tt[0];let nt,it,st;this.dataFormat==="channelsFirst"?(st=2,nt=3,it=4):(st=1,nt=2,it=3);const at=tt[st],ot=tt[nt],dt=tt[it],ht=this.kernelSize[0],yt=this.kernelSize[1],vt=this.kernelSize[2],xt=this.strides[0],wt=this.strides[1],Et=this.strides[2],At=deconvLength(at,xt,ht,this.padding),jt=deconvLength(ot,wt,yt,this.padding),kt=deconvLength(dt,Et,vt,this.padding),Lt=[rt,At,jt,kt,this.filters];this.dataFormat!=="channelsLast"&&(et=transpose$2(et,[0,2,3,4,1]));let Bt=conv3dTranspose$1(et,this.kernel.read(),Lt,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(Bt=transpose$2(Bt,[0,4,1,2,3])),this.bias!==null&&(Bt=biasAdd(Bt,this.bias.read(),this.dataFormat)),this.activation!==null&&(Bt=this.activation.apply(Bt)),Bt})}computeOutputShape($){$=getExactlyOneShape($);const _e=$.slice();let et,tt,rt,nt;this.dataFormat==="channelsFirst"?(et=1,tt=2,rt=3,nt=4):(et=4,tt=1,rt=2,nt=3);const it=this.kernelSize[0],st=this.kernelSize[1],at=this.kernelSize[2],ot=this.strides[0],dt=this.strides[1],ht=this.strides[2];return _e[et]=this.filters,_e[tt]=deconvLength(_e[tt],ot,it,this.padding),_e[rt]=deconvLength(_e[rt],dt,st,this.padding),_e[nt]=deconvLength(_e[nt],ht,at,this.padding),_e}getConfig(){const $=super.getConfig();return delete $.dilationRate,$}}Conv3DTranspose.className="Conv3DTranspose";registerClass(Conv3DTranspose);class SeparableConv extends Conv{constructor($,_e){if(super($,_e),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,_e.filters==null)throw new ValueError("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(_e.kernelInitializer!=null||_e.kernelRegularizer!=null||_e.kernelConstraint!=null)throw new ValueError("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(_e.padding!=null&&_e.padding!=="same"&&_e.padding!=="valid")throw new ValueError(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(_e.padding)}`);this.depthMultiplier=_e.depthMultiplier==null?1:_e.depthMultiplier,this.depthwiseInitializer=getInitializer(_e.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=getRegularizer(_e.depthwiseRegularizer),this.depthwiseConstraint=getConstraint(_e.depthwiseConstraint),this.pointwiseInitializer=getInitializer(_e.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=getRegularizer(_e.pointwiseRegularizer),this.pointwiseConstraint=getConstraint(_e.pointwiseConstraint)}build($){if($=getExactlyOneShape($),$.length<this.rank+2)throw new ValueError(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify($)}`);const _e=this.dataFormat==="channelsFirst"?1:$.length-1;if($[_e]==null||$[_e]<0)throw new ValueError(`The channel dimension of the inputs should be defined, but found ${JSON.stringify($[_e])}`);const et=$[_e],tt=this.kernelSize.concat([et,this.depthMultiplier]),rt=[];for(let it=0;it<this.rank;++it)rt.push(1);rt.push(et*this.depthMultiplier,this.filters);const nt=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",tt,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,nt,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",rt,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,nt,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,nt,this.biasConstraint):this.bias=null,this.inputSpec=[new InputSpec({ndim:this.rank+2,axes:{[_e]:et}})],this.built=!0}call($,_e){return tidy(()=>{$=getExactlyOneTensor($);let et;if(this.rank===1)throw new NotImplementedError("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&($=transpose$2($,[0,2,3,1])),et=separableConv2d$1($,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(et=biasAdd(et,this.bias.read(),this.dataFormat)),this.activation!=null&&(et=this.activation.apply(et)),this.dataFormat==="channelsFirst"&&(et=transpose$2(et,[0,3,1,2])),et})}getConfig(){const $=super.getConfig();return delete $.rank,delete $.kernelInitializer,delete $.kernelRegularizer,delete $.kernelConstraint,$.depthwiseInitializer=serializeInitializer(this.depthwiseInitializer),$.pointwiseInitializer=serializeInitializer(this.pointwiseInitializer),$.depthwiseRegularizer=serializeRegularizer(this.depthwiseRegularizer),$.pointwiseRegularizer=serializeRegularizer(this.pointwiseRegularizer),$.depthwiseConstraint=serializeConstraint(this.depthwiseConstraint),$.pointwiseConstraint=serializeConstraint(this.pointwiseConstraint),$}}SeparableConv.className="SeparableConv";class SeparableConv2D extends SeparableConv{constructor($){super(2,$)}}SeparableConv2D.className="SeparableConv2D";registerClass(SeparableConv2D);class Conv1D extends Conv{constructor($){super(1,$),Conv1D.verifyArgs($),this.inputSpec=[{ndim:3}]}getConfig(){const $=super.getConfig();return delete $.rank,delete $.dataFormat,$}static verifyArgs($){if(typeof $.kernelSize!="number"&&!checkArrayTypeAndLength($.kernelSize,"number",1,1))throw new ValueError(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify($.kernelSize)}.`)}}Conv1D.className="Conv1D";registerClass(Conv1D);class Cropping2D extends Layer$1{constructor($){super($),typeof $.cropping=="number"?this.cropping=[[$.cropping,$.cropping],[$.cropping,$.cropping]]:typeof $.cropping[0]=="number"?this.cropping=[[$.cropping[0],$.cropping[0]],[$.cropping[1],$.cropping[1]]]:this.cropping=$.cropping,this.dataFormat=$.dataFormat===void 0?"channelsLast":$.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape($){return this.dataFormat==="channelsFirst"?[$[0],$[1],$[2]-this.cropping[0][0]-this.cropping[0][1],$[3]-this.cropping[1][0]-this.cropping[1][1]]:[$[0],$[1]-this.cropping[0][0]-this.cropping[0][1],$[2]-this.cropping[1][0]-this.cropping[1][1],$[3]]}call($,_e){return tidy(()=>{if($=getExactlyOneTensor($),this.dataFormat==="channelsLast"){const et=sliceAlongAxis($,this.cropping[0][0],$.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return sliceAlongAxis(et,this.cropping[1][0],$.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const et=sliceAlongAxis($,this.cropping[0][0],$.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return sliceAlongAxis(et,this.cropping[1][0],$.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const $={cropping:this.cropping,dataFormat:this.dataFormat},_e=super.getConfig();return Object.assign($,_e),$}}Cropping2D.className="Cropping2D";registerClass(Cropping2D);class UpSampling2D extends Layer$1{constructor($){super($),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=$.size==null?this.DEFAULT_SIZE:$.size,this.dataFormat=$.dataFormat==null?"channelsLast":$.dataFormat,checkDataFormat(this.dataFormat),this.interpolation=$.interpolation==null?"nearest":$.interpolation,checkInterpolationFormat(this.interpolation)}computeOutputShape($){if(this.dataFormat==="channelsFirst"){const _e=$[2]==null?null:this.size[0]*$[2],et=$[3]==null?null:this.size[1]*$[3];return[$[0],$[1],_e,et]}else{const _e=$[1]==null?null:this.size[0]*$[1],et=$[2]==null?null:this.size[1]*$[2];return[$[0],_e,et,$[3]]}}call($,_e){return tidy(()=>{let et=getExactlyOneTensor($);const tt=et.shape;if(this.dataFormat==="channelsFirst"){et=transpose$2(et,[0,2,3,1]);const rt=this.size[0]*tt[2],nt=this.size[1]*tt[3],it=this.interpolation==="nearest"?image$1.resizeNearestNeighbor(et,[rt,nt]):image$1.resizeBilinear(et,[rt,nt]);return transpose$2(it,[0,3,1,2])}else{const rt=this.size[0]*tt[1],nt=this.size[1]*tt[2];return this.interpolation==="nearest"?image$1.resizeNearestNeighbor(et,[rt,nt]):image$1.resizeBilinear(et,[rt,nt])}})}getConfig(){const $={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},_e=super.getConfig();return Object.assign($,_e),$}}UpSampling2D.className="UpSampling2D";registerClass(UpSampling2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function depthwiseConv2d$1(_,$,_e=[1,1],et="valid",tt,rt){return tidy(()=>{tt==null&&(tt=imageDataFormat()),checkDataFormat(tt);let nt=preprocessConv2DInput(_,tt);if(_.rank!==4)throw new ValueError(`Input for depthwiseConv2d is required to be 4-D, but is instead ${_.rank}-D`);if($.rank!==4)throw new ValueError(`depthwiseKernel is required to be 4-D, but is instead ${$.rank}-D`);return nt=depthwiseConv2d$3(nt,$,_e,et==="same"?"same":"valid","NHWC",rt),tt==="channelsFirst"&&(nt=transpose$2(nt,[0,3,1,2])),nt})}class DepthwiseConv2D extends BaseConv{constructor($){super(2,$),this.depthwiseKernel=null,this.depthMultiplier=$.depthMultiplier==null?1:$.depthMultiplier,this.depthwiseInitializer=getInitializer($.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=getConstraint($.depthwiseConstraint),this.depthwiseRegularizer=getRegularizer($.depthwiseRegularizer)}build($){if($=getExactlyOneShape($),$.length<4)throw new ValueError(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify($)}.`);const _e=this.dataFormat==="channelsFirst"?1:3;if($[_e]==null||$[_e]<0)throw new ValueError(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${$[_e]}).`);const et=$[_e],tt=[this.kernelSize[0],this.kernelSize[1],et,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",tt,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[et*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call($,_e){return tidy(()=>{$=getExactlyOneTensor($);let et=depthwiseConv2d$1($,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(et=biasAdd(et,this.bias.read(),this.dataFormat)),this.activation!=null&&(et=this.activation.apply(et)),et})}computeOutputShape($){$=getExactlyOneShape($);const _e=this.dataFormat==="channelsFirst"?$[2]:$[1],et=this.dataFormat==="channelsFirst"?$[3]:$[2],tt=this.dataFormat==="channelsFirst"?$[1]*this.depthMultiplier:$[3]*this.depthMultiplier,rt=convOutputLength(_e,this.kernelSize[0],this.padding,this.strides[0]),nt=convOutputLength(et,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[$[0],tt,rt,nt]:[$[0],rt,nt,tt]}getConfig(){const $=super.getConfig();return $.depthMultiplier=this.depthMultiplier,$.depthwiseInitializer=serializeInitializer(this.depthwiseInitializer),$.depthwiseRegularizer=serializeRegularizer(this.depthwiseRegularizer),$.depthwiseConstraint=serializeConstraint(this.depthwiseRegularizer),$}}DepthwiseConv2D.className="DepthwiseConv2D";registerClass(DepthwiseConv2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function standardizeArgs(_,$,_e,et){if(Array.isArray(_)){if($!=null||_e!=null)throw new ValueError("When inputs is an array, neither initialState or constants should be provided");et!=null&&(_e=_.slice(_.length-et,_.length),_=_.slice(0,_.length-et)),_.length>1&&($=_.slice(1,_.length)),_=_[0]}function tt(rt){return rt==null||Array.isArray(rt)?rt:[rt]}return $=tt($),_e=tt(_e),{inputs:_,initialState:$,constants:_e}}function rnn$1(_,$,_e,et=!1,tt,rt,nt=!1,it=!1){return tidy(()=>{const st=$.shape.length;if(st<3)throw new ValueError(`Input should be at least 3D, but is ${st}D.`);const at=[1,0].concat(range$6(2,st));$=transpose$2($,at),nt&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),tt!=null&&(tt=cast$3(cast$3(tt,"bool"),"float32"),tt.rank===st-1&&(tt=expandDims$3(tt,-1)),tt=transpose$2(tt,at)),et&&($=reverse$3($,0),tt!=null&&(tt=reverse$3(tt,0)));const ot=[];let dt,ht=_e;const yt=$.shape[0],vt=unstack($);let xt;tt!=null&&(xt=unstack(tt));for(let Et=0;Et<yt;++Et){const At=vt[Et],jt=tidy(()=>_(At,ht));if(tt==null)dt=jt[0],ht=jt[1];else{const kt=tidy(()=>{const Lt=xt[Et],Bt=sub$2(onesLike$2(Lt),Lt),Gt=add$3(mul(jt[0],Lt),mul(ht[0],Bt)),er=ht.map((tr,ar)=>add$3(mul(jt[1][ar],Lt),mul(tr,Bt)));return{output:Gt,newStates:er}});dt=kt.output,ht=kt.newStates}it&&ot.push(dt)}let wt;return it&&(wt=stack(ot,1)),[dt,wt,ht]})}class RNN extends Layer$1{constructor($){super($);let _e;if($.cell==null)throw new ValueError("cell property is missing for the constructor of RNN.");if(Array.isArray($.cell)?_e=new StackedRNNCells({cells:$.cell}):_e=$.cell,_e.stateSize==null)throw new ValueError("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=_e,this.returnSequences=$.returnSequences==null?!1:$.returnSequences,this.returnState=$.returnState==null?!1:$.returnState,this.goBackwards=$.goBackwards==null?!1:$.goBackwards,this._stateful=$.stateful==null?!1:$.stateful,this.unroll=$.unroll==null?!1:$.unroll,this.supportsMasking=!0,this.inputSpec=[new InputSpec({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const $=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return range$6(0,$).map(_e=>null)}else return this.states_}setStates($){this.states_=$}computeOutputShape($){isArrayOfShapes($)&&($=$[0]),$=$;let _e=this.cell.stateSize;Array.isArray(_e)||(_e=[_e]);const et=_e[0];let tt;if(this.returnSequences?tt=[$[0],$[1],et]:tt=[$[0],et],this.returnState){const rt=[];for(const nt of _e)rt.push([$[0],nt]);return[tt].concat(rt)}else return tt}computeMask($,_e){return tidy(()=>{Array.isArray(_e)&&(_e=_e[0]);const et=this.returnSequences?_e:null;if(this.returnState){const tt=this.states.map(rt=>null);return[et].concat(tt)}else return et})}get states(){if(this.states_==null){const $=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,_e=[];for(let et=0;et<$;++et)_e.push(null);return _e}else return this.states_}set states($){this.states_=$}build($){if(this.numConstants!=null)throw new NotImplementedError("Constants support is not implemented in RNN yet.");isArrayOfShapes($)&&($=$[0]),$=$;const _e=this.stateful?$[0]:null,et=$.slice(2);this.inputSpec[0]=new InputSpec({shape:[_e,null,...et]});const tt=[$[0]].concat($.slice(2));this.cell.build(tt);let rt;if(Array.isArray(this.cell.stateSize)?rt=this.cell.stateSize:rt=[this.cell.stateSize],this.stateSpec!=null){if(!arraysEqual(this.stateSpec.map(nt=>nt.shape[nt.shape.length-1]),rt))throw new ValueError(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=rt.map(nt=>new InputSpec({shape:[null,nt]}));this.stateful&&this.resetStates()}resetStates($,_e=!1){tidy(()=>{if(!this.stateful)throw new AttributeError("Cannot call resetStates() on an RNN Layer that is not stateful.");const et=this.inputSpec[0].shape[0];if(et==null)throw new ValueError("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(tt=>zeros$2([et,tt])):this.states_=[zeros$2([et,this.cell.stateSize])];else if($==null)dispose(this.states_),this.keptStates!=null&&(dispose(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(tt=>zeros$2([et,tt])):this.states_[0]=zeros$2([et,this.cell.stateSize]);else{if(Array.isArray($)||($=[$]),$.length!==this.states_.length)throw new ValueError(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${$.length} state value(s). Input received: ${$}`);_e===!0?this.keptStates.push(this.states_.slice()):dispose(this.states_);for(let tt=0;tt<this.states_.length;++tt){const rt=$[tt],nt=Array.isArray(this.cell.stateSize)?this.cell.stateSize[tt]:this.cell.stateSize,it=[et,nt];if(!arraysEqual(rt.shape,it))throw new ValueError(`State ${tt} is incompatible with layer ${this.name}: expected shape=${it}, received shape=${rt.shape}`);this.states_[tt]=rt}}this.states_=this.states_.map(tt=>keep(tt.clone()))})}apply($,_e){let et=_e==null?null:_e.initialState,tt=_e==null?null:_e.constants;_e==null&&(_e={});const rt=standardizeArgs($,et,tt,this.numConstants);$=rt.inputs,et=rt.initialState,tt=rt.constants;let nt=[],it=[];if(et!=null){_e.initialState=et,nt=nt.concat(et),this.stateSpec=[];for(const at of et)this.stateSpec.push(new InputSpec({shape:at.shape}));it=it.concat(this.stateSpec)}if(tt!=null&&(_e.constants=tt,nt=nt.concat(tt),this.numConstants=tt.length),nt[0]instanceof SymbolicTensor){const at=[$].concat(nt),ot=this.inputSpec.concat(it),dt=this.inputSpec;this.inputSpec=ot;const ht=super.apply(at,_e);return this.inputSpec=dt,ht}else return super.apply($,_e)}call($,_e){return tidy(()=>{const et=_e==null?null:_e.mask,tt=_e==null?null:_e.training;let rt=_e==null?null:_e.initialState;$=getExactlyOneTensor($),rt==null&&(this.stateful?rt=this.states_:rt=this.getInitialState($));const nt=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(rt.length!==nt)throw new ValueError(`RNN Layer has ${nt} state(s) but was passed ${rt.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const it={training:tt},at=rnn$1((vt,xt)=>{const wt=this.cell.call([vt].concat(xt),it);return[wt[0],wt.slice(1)]},$,rt,this.goBackwards,et,null,this.unroll,this.returnSequences),ot=at[0],dt=at[1],ht=at[2];this.stateful&&this.resetStates(ht,tt);const yt=this.returnSequences?dt:ot;return this.returnState?[yt].concat(ht):yt})}getInitialState($){return tidy(()=>{let _e=zeros$2($.shape);return _e=sum$2(_e,[1,2]),_e=expandDims$2(_e),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(et=>et>1?tile$2(_e,[1,et]):_e):this.cell.stateSize>1?[tile$2(_e,[1,this.cell.stateSize])]:[_e]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild($){super.setFastWeightInitDuringBuild($),this.cell!=null&&this.cell.setFastWeightInitDuringBuild($)}getConfig(){const $=super.getConfig(),_e={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(_e.numConstants=this.numConstants);const et=this.cell.getConfig();return this.getClassName()===RNN.className&&(_e.cell={className:this.cell.getClassName(),config:et}),Object.assign(Object.assign(Object.assign({},et),$),_e)}static fromConfig($,_e,et={}){const tt=_e.cell,rt=deserialize(tt,et);return new $(Object.assign(_e,{cell:rt}))}}RNN.className="RNN";registerClass(RNN);class RNNCell extends Layer$1{}class SimpleRNNCell extends RNNCell{constructor($){super($),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=$.units,assertPositiveInteger(this.units,"units"),this.activation=getActivation($.activation==null?this.DEFAULT_ACTIVATION:$.activation),this.useBias=$.useBias==null?!0:$.useBias,this.kernelInitializer=getInitializer($.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=getInitializer($.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=getInitializer($.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=getRegularizer($.kernelRegularizer),this.recurrentRegularizer=getRegularizer($.recurrentRegularizer),this.biasRegularizer=getRegularizer($.biasRegularizer),this.kernelConstraint=getConstraint($.kernelConstraint),this.recurrentConstraint=getConstraint($.recurrentConstraint),this.biasConstraint=getConstraint($.biasConstraint),this.dropout=min$5([1,max$5([0,$.dropout==null?0:$.dropout])]),this.recurrentDropout=min$5([1,max$5([0,$.recurrentDropout==null?0:$.recurrentDropout])]),this.dropoutFunc=$.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build($){$=getExactlyOneShape($),this.kernel=this.addWeight("kernel",[$[$.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call($,_e){return tidy(()=>{if($=$,$.length!==2)throw new ValueError(`SimpleRNNCell expects 2 input Tensors, got ${$.length}.`);let et=$[1];$=$[0];const tt=_e.training==null?!1:_e.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=generateDropoutMask({ones:()=>onesLike$2($),rate:this.dropout,training:tt,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=generateDropoutMask({ones:()=>onesLike$2(et),rate:this.recurrentDropout,training:tt,dropoutFunc:this.dropoutFunc}));let rt;const nt=this.dropoutMask,it=this.recurrentDropoutMask;nt!=null?rt=dot$1(mul($,nt),this.kernel.read()):rt=dot$1($,this.kernel.read()),this.bias!=null&&(rt=biasAdd(rt,this.bias.read())),it!=null&&(et=mul(et,it));let st=add$3(rt,dot$1(et,this.recurrentKernel.read()));return this.activation!=null&&(st=this.activation.apply(st)),[st,st]})}getConfig(){const $=super.getConfig(),_e={units:this.units,activation:serializeActivation(this.activation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},$),_e)}}SimpleRNNCell.className="SimpleRNNCell";registerClass(SimpleRNNCell);class SimpleRNN extends RNN{constructor($){$.cell=new SimpleRNNCell($),super($)}call($,_e){return tidy(()=>{this.cell.dropoutMask!=null&&(dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const et=_e==null?null:_e.mask,tt=_e==null?null:_e.training,rt=_e==null?null:_e.initialState;return super.call($,{mask:et,training:tt,initialState:rt})})}static fromConfig($,_e){return new $(_e)}}SimpleRNN.className="SimpleRNN";registerClass(SimpleRNN);class GRUCell extends RNNCell{constructor($){if(super($),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",$.resetAfter)throw new ValueError("GRUCell does not support reset_after parameter set to true.");this.units=$.units,assertPositiveInteger(this.units,"units"),this.activation=getActivation($.activation===void 0?this.DEFAULT_ACTIVATION:$.activation),this.recurrentActivation=getActivation($.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:$.recurrentActivation),this.useBias=$.useBias==null?!0:$.useBias,this.kernelInitializer=getInitializer($.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=getInitializer($.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=getInitializer($.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=getRegularizer($.kernelRegularizer),this.recurrentRegularizer=getRegularizer($.recurrentRegularizer),this.biasRegularizer=getRegularizer($.biasRegularizer),this.kernelConstraint=getConstraint($.kernelConstraint),this.recurrentConstraint=getConstraint($.recurrentConstraint),this.biasConstraint=getConstraint($.biasConstraint),this.dropout=min$5([1,max$5([0,$.dropout==null?0:$.dropout])]),this.recurrentDropout=min$5([1,max$5([0,$.recurrentDropout==null?0:$.recurrentDropout])]),this.dropoutFunc=$.dropoutFunc,this.implementation=$.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build($){$=getExactlyOneShape($);const _e=$[$.length-1];this.kernel=this.addWeight("kernel",[_e,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call($,_e){return tidy(()=>{if($=$,$.length!==2)throw new ValueError(`GRUCell expects 2 input Tensors (inputs, h, c), got ${$.length}.`);const et=_e.training==null?!1:_e.training;let tt=$[1];$=$[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=generateDropoutMask({ones:()=>onesLike$2($),rate:this.dropout,training:et,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=generateDropoutMask({ones:()=>onesLike$2(tt),rate:this.recurrentDropout,training:et,count:3,dropoutFunc:this.dropoutFunc}));const rt=this.dropoutMask,nt=this.recurrentDropoutMask;let it,st,at;0<this.dropout&&this.dropout<1&&($=mul($,rt[0]));let ot=dot$1($,this.kernel.read());this.useBias&&(ot=biasAdd(ot,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(tt=mul(tt,nt[0]));const dt=this.recurrentKernel.read(),[ht,yt]=split$2(dt,[2*this.units,this.units],dt.rank-1),vt=dot$1(tt,ht),[xt,wt,Et]=split$2(ot,3,ot.rank-1),[At,jt]=split$2(vt,2,vt.rank-1);it=this.recurrentActivation.apply(add$3(xt,At)),st=this.recurrentActivation.apply(add$3(wt,jt));const kt=dot$1(mul(st,tt),yt);at=this.activation.apply(add$3(Et,kt));const Lt=add$3(mul(it,tt),mul(add$3(1,neg$2(it)),at));return[Lt,Lt]})}getConfig(){const $=super.getConfig(),_e={units:this.units,activation:serializeActivation(this.activation),recurrentActivation:serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},$),_e)}}GRUCell.className="GRUCell";registerClass(GRUCell);class GRU extends RNN{constructor($){$.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),$.cell=new GRUCell($),super($)}call($,_e){return tidy(()=>{this.cell.dropoutMask!=null&&(dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const et=_e==null?null:_e.mask,tt=_e==null?null:_e.training,rt=_e==null?null:_e.initialState;return super.call($,{mask:et,training:tt,initialState:rt})})}static fromConfig($,_e){return _e.implmentation===0&&(_e.implementation=1),new $(_e)}}GRU.className="GRU";registerClass(GRU);class LSTMCell extends RNNCell{constructor($){super($),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=$.units,assertPositiveInteger(this.units,"units"),this.activation=getActivation($.activation===void 0?this.DEFAULT_ACTIVATION:$.activation),this.recurrentActivation=getActivation($.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:$.recurrentActivation),this.useBias=$.useBias==null?!0:$.useBias,this.kernelInitializer=getInitializer($.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=getInitializer($.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=getInitializer($.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=$.unitForgetBias,this.kernelRegularizer=getRegularizer($.kernelRegularizer),this.recurrentRegularizer=getRegularizer($.recurrentRegularizer),this.biasRegularizer=getRegularizer($.biasRegularizer),this.kernelConstraint=getConstraint($.kernelConstraint),this.recurrentConstraint=getConstraint($.recurrentConstraint),this.biasConstraint=getConstraint($.biasConstraint),this.dropout=min$5([1,max$5([0,$.dropout==null?0:$.dropout])]),this.recurrentDropout=min$5([1,max$5([0,$.recurrentDropout==null?0:$.recurrentDropout])]),this.dropoutFunc=$.dropoutFunc,this.implementation=$.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build($){var _e;$=getExactlyOneShape($);const et=$[$.length-1];this.kernel=this.addWeight("kernel",[et,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let tt;if(this.useBias){if(this.unitForgetBias){const rt=this.biasInitializer,nt=this.units;tt=new(_e=class extends Initializer{apply(st,at){const ot=rt.apply([nt]),dt=new Ones().apply([nt]),ht=rt.apply([nt*2]);return concatAlongFirstAxis(concatAlongFirstAxis(ot,dt),ht)}},_e.className="CustomInit",_e)}else tt=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,tt,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call($,_e){return tidy(()=>{const et=_e.training==null?!1:_e.training;if($=$,$.length!==3)throw new ValueError(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${$.length}.`);let tt=$[1];const rt=$[2];$=$[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=generateDropoutMask({ones:()=>onesLike$2($),rate:this.dropout,training:et,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=generateDropoutMask({ones:()=>onesLike$2(tt),rate:this.recurrentDropout,training:et,count:4,dropoutFunc:this.dropoutFunc}));const nt=this.dropoutMask,it=this.recurrentDropoutMask;let st,at,ot,dt;0<this.dropout&&this.dropout<1&&($=mul($,nt[0]));let ht=dot$1($,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(tt=mul(tt,it[0])),ht=add$3(ht,dot$1(tt,this.recurrentKernel.read())),this.useBias&&(ht=biasAdd(ht,this.bias.read()));const[yt,vt,xt,wt]=split$2(ht,4,ht.rank-1);st=this.recurrentActivation.apply(yt),at=this.recurrentActivation.apply(vt),ot=add$3(mul(at,rt),mul(st,this.activation.apply(xt))),dt=this.recurrentActivation.apply(wt);const Et=mul(dt,this.activation.apply(ot));return[Et,Et,ot]})}getConfig(){const $=super.getConfig(),_e={units:this.units,activation:serializeActivation(this.activation),recurrentActivation:serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},$),_e)}}LSTMCell.className="LSTMCell";registerClass(LSTMCell);class LSTM extends RNN{constructor($){$.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),$.cell=new LSTMCell($),super($)}call($,_e){return tidy(()=>{this.cell.dropoutMask!=null&&(dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const et=_e==null?null:_e.mask,tt=_e==null?null:_e.training,rt=_e==null?null:_e.initialState;return super.call($,{mask:et,training:tt,initialState:rt})})}static fromConfig($,_e){return _e.implmentation===0&&(_e.implementation=1),new $(_e)}}LSTM.className="LSTM";registerClass(LSTM);class StackedRNNCells extends RNNCell{constructor($){super($),this.cells=$.cells}get stateSize(){const $=[];for(const _e of this.cells.slice().reverse())Array.isArray(_e.stateSize)?$.push(..._e.stateSize):$.push(_e.stateSize);return $}call($,_e){return tidy(()=>{$=$;let et=$.slice(1);const tt=[];for(const it of this.cells.slice().reverse())Array.isArray(it.stateSize)?tt.push(et.splice(0,it.stateSize.length)):tt.push(et.splice(0,1));tt.reverse();const rt=[];let nt;for(let it=0;it<this.cells.length;++it){const st=this.cells[it];et=tt[it],it===0?nt=[$[0]].concat(et):nt=[nt[0]].concat(et),nt=st.call(nt,_e),rt.push(nt.slice(1))}et=[];for(const it of rt.slice().reverse())et.push(...it);return[nt[0]].concat(et)})}build($){isArrayOfShapes($)&&($=$[0]),$=$;let _e;this.cells.forEach((et,tt)=>{nameScope(`RNNCell_${tt}`,()=>{et.build($),Array.isArray(et.stateSize)?_e=et.stateSize[0]:_e=et.stateSize,$=[$[0],_e]})}),this.built=!0}getConfig(){const $=super.getConfig(),_e=rt=>({className:rt.getClassName(),config:rt.getConfig()}),tt={cells:this.cells.map(_e)};return Object.assign(Object.assign({},$),tt)}static fromConfig($,_e,et={}){const tt=[];for(const rt of _e.cells)tt.push(deserialize(rt,et));return new $({cells:tt})}get trainableWeights(){if(!this.trainable)return[];const $=[];for(const _e of this.cells)$.push(..._e.trainableWeights);return $}get nonTrainableWeights(){const $=[];for(const _e of this.cells)$.push(..._e.nonTrainableWeights);if(!this.trainable){const _e=[];for(const et of this.cells)_e.push(...et.trainableWeights);return _e.concat($)}return $}getWeights(){const $=[];for(const _e of this.cells)$.push(..._e.weights);return batchGetValue($)}setWeights($){const _e=[];for(const et of this.cells){const tt=et.weights.length,rt=$.splice(tt);for(let nt=0;nt<et.weights.length;++nt)_e.push([et.weights[nt],rt[nt]])}batchSetValue(_e)}}StackedRNNCells.className="StackedRNNCells";registerClass(StackedRNNCells);function generateDropoutMask(_){const{ones:$,rate:_e,training:et=!1,count:tt=1,dropoutFunc:rt}=_,nt=()=>rt!=null?rt($(),_e):dropout$1($(),_e),it=()=>inTrainPhase(nt,$,et);return!tt||tt<=1?keep(it().clone()):Array(tt).fill(void 0).map(it).map(at=>keep(at.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var __rest=function(_,$){var _e={};for(var et in _)Object.prototype.hasOwnProperty.call(_,et)&&$.indexOf(et)<0&&(_e[et]=_[et]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var tt=0,et=Object.getOwnPropertySymbols(_);tt<et.length;tt++)$.indexOf(et[tt])<0&&Object.prototype.propertyIsEnumerable.call(_,et[tt])&&(_e[et[tt]]=_[et[tt]]);return _e};class ConvRNN2D extends RNN{constructor($){if($.unroll)throw new NotImplementedError("Unrolling is not possible with convolutional RNNs.");if(Array.isArray($.cell))throw new NotImplementedError("It is not possible at the moment to stack convolutional cells.");super($),this.inputSpec=[new InputSpec({ndim:5})]}call($,_e){return tidy(()=>{if(this.cell.dropoutMask!=null&&(dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),_e&&_e.constants)throw new ValueError("ConvRNN2D cell does not support constants");const et=_e==null?null:_e.mask,tt=_e==null?null:_e.training,rt=_e==null?null:_e.initialState;return super.call($,{mask:et,training:tt,initialState:rt})})}computeOutputShape($){let _e=this.computeSingleOutputShape($);return this.returnSequences||(_e=[_e[0],..._e.slice(2)]),this.returnState&&(_e=[_e,...Array(2).fill([$[0],..._e.slice(-3)])]),_e}getInitialState($){return tidy(()=>{const{stateSize:_e}=this.cell,et=$.shape,tt=this.computeSingleOutputShape(et),rt=[tt[0],...tt.slice(2)],nt=zeros$2(rt);return Array.isArray(_e)?Array(_e.length).fill(nt):[nt]})}resetStates($,_e=!1){tidy(()=>{if(!this.stateful)throw new AttributeError("Cannot call resetStates() on an RNN Layer that is not stateful.");const et=this.inputSpec[0].shape,tt=this.computeSingleOutputShape(et),rt=[tt[0],...tt.slice(2)];if(et[0]==null)throw new ValueError("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>zeros$2(rt)):this.states_=[zeros$2(rt)];else if($==null)dispose(this.states_),this.keptStates!=null&&(dispose(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>zeros$2(rt)):this.states_[0]=zeros$2(rt);else{if(Array.isArray($)||($=[$]),$.length!==this.states_.length)throw new ValueError(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${$.length} state value(s). Input received: ${$}`);_e?this.keptStates.push(this.states_.slice()):dispose(this.states_);for(let it=0;it<this.states_.length;++it){const st=$[it],at=rt;if(!arraysEqual(st.shape,at))throw new ValueError(`State ${it} is incompatible with layer ${this.name}: expected shape=${at}, received shape=${st.shape}`);this.states_[it]=st}}this.states_=this.states_.map(it=>keep(it.clone()))})}computeSingleOutputShape($){const{dataFormat:_e,filters:et,kernelSize:tt,padding:rt,strides:nt,dilationRate:it}=this.cell,st=_e==="channelsFirst",at=$[st?3:2],ot=$[st?4:3],dt=convOutputLength(at,tt[0],rt,nt[0],it[0]),ht=convOutputLength(ot,tt[1],rt,nt[1],it[1]);return[...$.slice(0,2),...st?[et,dt,ht]:[dt,ht,et]]}}ConvRNN2D.className="ConvRNN2D";class ConvLSTM2DCell extends LSTMCell{constructor($){const{filters:_e,kernelSize:et,strides:tt,padding:rt,dataFormat:nt,dilationRate:it}=$;super(Object.assign(Object.assign({},$),{units:_e})),this.filters=_e,assertPositiveInteger(this.filters,"filters"),this.kernelSize=normalizeArray(et,2,"kernelSize"),this.kernelSize.forEach(st=>assertPositiveInteger(st,"kernelSize")),this.strides=normalizeArray(tt||1,2,"strides"),this.strides.forEach(st=>assertPositiveInteger(st,"strides")),this.padding=rt||"valid",checkPaddingMode(this.padding),this.dataFormat=nt||"channelsLast",checkDataFormat(this.dataFormat),this.dilationRate=normalizeArray(it||1,2,"dilationRate"),this.dilationRate.forEach(st=>assertPositiveInteger(st,"dilationRate"))}build($){var _e;$=getExactlyOneShape($);const et=this.dataFormat==="channelsFirst"?1:$.length-1;if($[et]==null)throw new ValueError(`The channel dimension of the input should be defined. Found ${$[et]}`);const tt=$[et],rt=4,nt=this.kernelSize.concat([tt,this.filters*rt]);this.kernel=this.addWeight("kernel",nt,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const it=this.kernelSize.concat([this.filters,this.filters*rt]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",it,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let st;if(this.unitForgetBias){const at=this.biasInitializer,ot=this.filters;st=new(_e=class extends Initializer{apply(ht,yt){const vt=at.apply([ot]),xt=ones$1([ot]),wt=at.apply([ot*2]);return concatenate$1([vt,xt,wt])}},_e.className="CustomInit",_e)}else st=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*rt],null,st,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call($,_e){return tidy(()=>{if($.length!==3)throw new ValueError(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${$.length}.`);const et=_e.training||!1,tt=$[0],rt=$[1],nt=$[2],it=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=generateDropoutMask({ones:()=>onesLike$2(tt),rate:this.dropout,training:et,count:it,dropoutFunc:this.dropoutFunc}));const st=this.dropoutMask,at=(pt,Rt,zt)=>!Rt||!Rt[zt]?pt:mul(Rt[zt],pt);let ot=at(tt,st,0),dt=at(tt,st,1),ht=at(tt,st,2),yt=at(tt,st,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=generateDropoutMask({ones:()=>onesLike$2(rt),rate:this.recurrentDropout,training:et,count:it,dropoutFunc:this.dropoutFunc}));const vt=this.recurrentDropoutMask;let xt=at(rt,vt,0),wt=at(rt,vt,1),Et=at(rt,vt,2),At=at(rt,vt,3);const jt=3,[kt,Lt,Bt,Gt]=split$2(this.kernel.read(),it,jt),[er,tr,ar,Mt]=this.useBias?split$2(this.bias.read(),it):[null,null,null,null];ot=this.inputConv(ot,kt,er,this.padding),dt=this.inputConv(dt,Lt,tr,this.padding),ht=this.inputConv(ht,Bt,ar,this.padding),yt=this.inputConv(yt,Gt,Mt,this.padding);const[lt,mt,gt,bt]=split$2(this.recurrentKernel.read(),it,jt);xt=this.recurrentConv(xt,lt),wt=this.recurrentConv(wt,mt),Et=this.recurrentConv(Et,gt),At=this.recurrentConv(At,bt);const St=this.recurrentActivation.apply(add$3(ot,xt)),Nt=this.recurrentActivation.apply(add$3(dt,wt)),Pt=add$3(mul(Nt,nt),mul(St,this.activation.apply(add$3(ht,Et)))),Tt=mul(this.recurrentActivation.apply(add$3(yt,At)),this.activation.apply(Pt));return[Tt,Tt,Pt]})}getConfig(){const $=super.getConfig(),_e=__rest($,["units"]),et={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},_e),et)}inputConv($,_e,et,tt){const rt=conv2d$3($,_e,this.strides,tt||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return et?biasAdd(rt,et,this.dataFormat):rt}recurrentConv($,_e){return conv2d$3($,_e,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}ConvLSTM2DCell.className="ConvLSTM2DCell";registerClass(ConvLSTM2DCell);class ConvLSTM2D extends ConvRNN2D{constructor($){const _e=new ConvLSTM2DCell($);super(Object.assign(Object.assign({},$),{cell:_e}))}static fromConfig($,_e){return new $(_e)}}ConvLSTM2D.className="ConvLSTM2D";registerClass(ConvLSTM2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Dropout extends Layer$1{constructor($){super($),this.rate=Math.max(Math.min($.rate,1),0),this.noiseShape=$.noiseShape,this.seed=$.seed,this.supportsMasking=!0}getNoiseShape($){if(this.noiseShape==null)return this.noiseShape;const _e=$.shape,et=[];for(let tt=0;tt<this.noiseShape.length;++tt)et.push(this.noiseShape[tt]==null?_e[tt]:this.noiseShape[tt]);return et}call($,_e){return tidy(()=>{this.invokeCallHook($,_e);const et=getExactlyOneTensor($);if(0<this.rate&&this.rate<1){const tt=_e.training==null?!1:_e.training,rt=this.getNoiseShape(et);return inTrainPhase(()=>dropout$1(et,this.rate,rt,this.seed),()=>et,tt)}return $})}getConfig(){const $={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},_e=super.getConfig();return Object.assign($,_e),$}dispose(){return super.dispose()}}Dropout.className="Dropout";registerClass(Dropout);class SpatialDropout1D extends Dropout{constructor($){super($),this.inputSpec=[{ndim:3}]}getNoiseShape($){const _e=$.shape;return[_e[0],1,_e[2]]}}SpatialDropout1D.className="SpatialDropout1D";registerClass(SpatialDropout1D);class Dense extends Layer$1{constructor($){if(super($),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",$.batchInputShape==null&&$.inputShape==null&&$.inputDim!=null){let _e=null;$.batchSize!=null&&(_e=$.batchSize),this.batchInputShape=[_e,$.inputDim]}this.units=$.units,assertPositiveInteger(this.units,"units"),this.activation=getActivation($.activation),$.useBias!=null&&(this.useBias=$.useBias),this.kernelInitializer=getInitializer($.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=getInitializer($.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=getConstraint($.kernelConstraint),this.biasConstraint=getConstraint($.biasConstraint),this.kernelRegularizer=getRegularizer($.kernelRegularizer),this.biasRegularizer=getRegularizer($.biasRegularizer),this.activityRegularizer=getRegularizer($.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build($){$=getExactlyOneShape($);const _e=$[$.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[_e,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:_e}}],this.built=!0}computeOutputShape($){$=getExactlyOneShape($);const _e=$.slice();return _e[_e.length-1]=this.units,_e}call($,_e){return tidy(()=>{this.invokeCallHook($,_e);const et=getExactlyOneTensor($),tt=mapActivationToFusedKernel(this.activation.getClassName());let rt;return tt!=null?rt=dot$1(et,this.kernel.read(),tt,this.bias?this.bias.read():null):(rt=dot$1(et,this.kernel.read()),this.bias!=null&&(rt=biasAdd(rt,this.bias.read())),this.activation!=null&&(rt=this.activation.apply(rt))),rt})}getConfig(){const $={units:this.units,activation:serializeActivation(this.activation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),biasConstraint:serializeConstraint(this.biasConstraint)},_e=super.getConfig();return Object.assign($,_e),$}}Dense.className="Dense";registerClass(Dense);class Flatten extends Layer$1{constructor($){$=$||{},super($),this.inputSpec=[{minNDim:3}],this.dataFormat=$.dataFormat}computeOutputShape($){$=getExactlyOneShape($);for(const _e of $.slice(1))if(_e==null)throw new ValueError(`The shape of the input to "Flatten" is not fully defined (got ${$.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[$[0],arrayProd($,1)]}call($,_e){return tidy(()=>{this.invokeCallHook($,_e);let et=getExactlyOneTensor($);if(this.dataFormat==="channelsFirst"&&et.rank>1){const tt=[0];for(let rt=2;rt<et.rank;++rt)tt.push(rt);tt.push(1),et=transpose$2(et,tt)}return batchFlatten(et)})}getConfig(){const $={};this.dataFormat!=null&&($.dataFormat=this.dataFormat);const _e=super.getConfig();return Object.assign($,_e),$}}Flatten.className="Flatten";registerClass(Flatten);class Activation extends Layer$1{constructor($){super($),this.supportsMasking=!0,this.activation=getActivation($.activation)}call($,_e){return tidy(()=>{this.invokeCallHook($,_e);const et=getExactlyOneTensor($);return this.activation.apply(et)})}getConfig(){const $={activation:serializeActivation(this.activation)},_e=super.getConfig();return Object.assign($,_e),$}}Activation.className="Activation";registerClass(Activation);class RepeatVector extends Layer$1{constructor($){super($),this.n=$.n,this.inputSpec=[{ndim:2}]}computeOutputShape($){return[$[0],this.n,$[1]]}call($,_e){return tidy(()=>($=getExactlyOneTensor($),repeat($,this.n)))}getConfig(){const $={n:this.n},_e=super.getConfig();return Object.assign($,_e),$}}RepeatVector.className="RepeatVector";registerClass(RepeatVector);class Reshape extends Layer$1{constructor($){super($),this.targetShape=$.targetShape;for(let _e=0;_e<this.targetShape.length;++_e)this.isUnknown(this.targetShape[_e])&&(this.targetShape[_e]=null)}isUnknown($){return $<0||$==null}fixUnknownDimension($,_e){const et="Total size of new array must be unchanged.",tt=_e.slice();let rt=1,nt=null;for(let st=0;st<tt.length;++st){const at=tt[st];if(this.isUnknown(at))if(nt===null)nt=st;else throw new ValueError("Can only specifiy one unknown dimension.");else rt*=at}const it=arrayProd($);if(nt!==null){if(rt===0||it%rt!==0)throw new ValueError(et);tt[nt]=it/rt}else if(it!==rt)throw new ValueError(et);return tt}computeOutputShape($){let _e=!1;for(let et=0;et<$.length;++et)if(this.isUnknown($[et])){_e=!0;break}return _e?$.slice(0,1).concat(this.targetShape):$.slice(0,1).concat(this.fixUnknownDimension($.slice(1),this.targetShape))}call($,_e){return tidy(()=>{this.invokeCallHook($,_e);const et=getExactlyOneTensor($),tt=et.shape,rt=tt.slice(0,1).concat(this.fixUnknownDimension(tt.slice(1),this.targetShape));return reshape$3(et,rt)})}getConfig(){const $={targetShape:this.targetShape},_e=super.getConfig();return Object.assign($,_e),$}}Reshape.className="Reshape";registerClass(Reshape);class Permute extends Layer$1{constructor($){if(super($),$.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray($.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${$.dims} instead.`);const _e=range$6(1,$.dims.length+1);if(!arraysEqual($.dims.slice().sort(),_e))throw new Error("Invalid permutation `dims`: "+JSON.stringify($.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=$.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new InputSpec({ndim:this.dims.length+1})]}computeOutputShape($){$=getExactlyOneShape($);const _e=$.slice();return this.dims.forEach((et,tt)=>{_e[tt+1]=$[et]}),_e}call($,_e){return transpose$2(getExactlyOneTensor($),this.dimsIncludingBatch)}getConfig(){const $={dims:this.dims},_e=super.getConfig();return Object.assign($,_e),$}}Permute.className="Permute";registerClass(Permute);class Masking extends Layer$1{constructor($){super($??{}),this.supportsMasking=!0,$!=null?this.maskValue=$.maskValue==null?0:$.maskValue:this.maskValue=0}computeOutputShape($){return $}getConfig(){const $=super.getConfig(),_e={maskValue:this.maskValue};return Object.assign(_e,$),_e}computeMask($,_e){const et=getExactlyOneTensor($);return any$2(notEqual$2(et,this.maskValue),-1)}call($,_e){return tidy(()=>{this.invokeCallHook($,_e);const et=getExactlyOneTensor($),nt=any$2(notEqual$2(et,this.maskValue),-1,!0);return mul(et,cast$3(nt,et.dtype))})}}Masking.className="Masking";registerClass(Masking);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Embedding extends Layer$1{constructor($){if(super($),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",$.batchInputShape==null&&$.inputShape==null){let _e=null;$.batchSize!=null&&(_e=$.batchSize),$.inputLength==null?this.batchInputShape=[_e,null]:this.batchInputShape=[_e].concat(toList($.inputLength))}this.inputDim=$.inputDim,assertPositiveInteger(this.inputDim,"inputDim"),this.outputDim=$.outputDim,assertPositiveInteger(this.outputDim,"outputDim"),this.embeddingsInitializer=getInitializer($.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=getRegularizer($.embeddingsRegularizer),this.activityRegularizer=getRegularizer($.activityRegularizer),this.embeddingsConstraint=getConstraint($.embeddingsConstraint),this.maskZero=$.maskZero,this.supportsMasking=$.maskZero,this.inputLength=$.inputLength}build($){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape($){}computeMask($,_e){return tidy(()=>this.maskZero?($=getExactlyOneTensor($),notEqual$2($,zerosLike$2($))):null)}computeOutputShape($){if($=getExactlyOneShape($),this.inputLength==null)return[...$,this.outputDim];const _e=toList(this.inputLength);if(_e.length!==$.length-1)throw new ValueError(`"inputLength" is ${this.inputLength}, but received input shape has shape ${$}`);{let et=0;for(let tt=0;tt<_e.length;++tt){const rt=_e[tt],nt=$[tt+1];if(rt!=null&&nt!=null&&rt!==nt)throw new ValueError(`"inputLength" is ${this.inputLength}, but received input shape has shape ${$}`);rt==null&&(_e[et]=nt),et++}}return[$[0],..._e,this.outputDim]}call($,_e){return tidy(()=>{this.invokeCallHook($,_e);let et=getExactlyOneTensor($);et.dtype!=="int32"&&(et=cast$2(et,"int32"));const tt=gather(this.embeddings.read(),reshape$3(et,[et.size]));return reshape$3(tt,getExactlyOneShape(this.computeOutputShape(et.shape)))})}getConfig(){const $={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:serializeInitializer(this.embeddingsInitializer),embeddingsRegularizer:serializeRegularizer(this.embeddingsRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),embeddingsConstraint:serializeConstraint(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},_e=super.getConfig();return Object.assign($,_e),$}}Embedding.className="Embedding";registerClass(Embedding);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Merge extends Layer$1{constructor($){super($||{}),this.supportsMasking=!0}mergeFunction($){throw new NotImplementedError}computeElementwiseOpOutputShape($,_e){if($==null||_e==null)return null;if($.length<_e.length)return this.computeElementwiseOpOutputShape(_e,$);if(_e.length===0)return $;const et=$.slice(0,$.length-_e.length);for(let tt=0;tt<_e.length;++tt){const rt=$[$.length-_e.length+tt],nt=_e[tt];if(rt==null||nt==null||rt<0||nt<0)et.push(null);else if(rt===1)et.push(nt);else if(nt===1)et.push(rt);else{if(rt!==nt)throw new ValueError("Operands could not be broadcast together with shapes "+JSON.stringify($)+" "+JSON.stringify(_e));et.push(rt)}}return et}build($){if(Array.isArray($)&&!Array.isArray($[0])&&($=[getExactlyOneShape($)]),$=$,$.length<2)throw new ValueError(`A merge layer should be called on an Array of at least 2 inputs. Got ${$.length} input(s).`);let _e=[];for(const rt of $)rt!=null&&rt[0]!==null&&_e.push(rt[0]);if(_e=unique$2(_e),_e.length>1)throw new ValueError(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify($)}.`);let et=$[0]==null?null:$[0].slice(1);for(let rt=1;rt<$.length;++rt){const nt=$[rt]==null?null:$[rt].slice(1);et=this.computeElementwiseOpOutputShape(et,nt)}const tt=$.map(rt=>rt.length);$.indexOf(null)===-1&&unique$2(tt).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call($,_e){return tidy(()=>{if($=$,this.reshapeRequired){const et=[],tt=$.map(rt=>rt.rank);if(tt.indexOf(null)===-1){const rt=max$5(tt);for(let nt of $){const it=nt.rank;for(let st=0;st<rt-it;++st)nt=expandDims$2(nt,1);et.push(nt)}return this.mergeFunction(et)}else{let rt=!1;for(const st of $){const at=st.rank;if(at==null){const ot=st.shape,dt=ot[0],ht=ot.slice(1).concat([dt]);let yt=reshape$3(st,[dt].concat(arrayProd(ot.slice(1))));yt=transpose$2(yt,[1,0]),yt=reshape$3(yt,ht),et.push(yt),rt=!0}else if(at>1){const ot=range$6(1,at).concat([0]);et.push(transpose$2(st,ot)),rt=!0}else et.push(st)}let nt=this.mergeFunction(et);const it=nt.rank;if(rt){if(it==null){const st=nt.shape,at=st.length,ot=st[at-1],dt=[ot].concat(st.slice(0,st.length-1));nt=reshape$3(transpose$2(reshape$3(nt,[-1,ot]),[1,0]),dt)}else if(it>1){const st=[it-1].concat(range$6(0,it-1));nt=transpose$2(nt,st)}}return nt}}else return this.mergeFunction($)})}computeOutputShape($){$=$;let _e;$[0]==null?_e=null:_e=$[0].slice(1);for(let tt=1;tt<$.length;++tt){const rt=$[tt]==null?null:$[tt].slice(1);_e=this.computeElementwiseOpOutputShape(_e,rt)}let et=[];for(const tt of $)tt!=null&&tt[0]!==null&&et.push(tt[0]);return et=unique$2(et),et.length===1?_e=et.concat(_e):_e=[null].concat(_e),_e}computeMask($,_e){return tidy(()=>{if(_e==null)return null;if(!Array.isArray(_e))throw new ValueError("`mask` should be an Array");if(!Array.isArray($))throw new ValueError("`inputs` should be an Array");if(_e.length!==$.length)throw new ValueError(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${$.length} vs ${_e.length})`);if(_e.every(tt=>tt==null))return null;_e=_e.map(tt=>tt==null?tt:expandDims$3(tt,0));let et=_e[0];for(let tt=1;tt<_e.length-1;++tt)et=logicalAnd$2(et,_e[tt]);return et})}}class Add extends Merge{constructor($){super($)}mergeFunction($){return tidy(()=>{let _e=$[0].clone();for(let et=1;et<$.length;++et)_e=add$3(_e,$[et]);return _e})}}Add.className="Add";registerClass(Add);class Multiply extends Merge{constructor($){super($)}mergeFunction($){return tidy(()=>{let _e=$[0].clone();for(let et=1;et<$.length;++et)_e=mul(_e,$[et]);return _e})}}Multiply.className="Multiply";registerClass(Multiply);class Average extends Merge{constructor($){super($)}mergeFunction($){return tidy(()=>{let _e=$[0].clone();for(let et=1;et<$.length;++et)_e=add$3(_e,$[et]);return mul(1/$.length,_e)})}}Average.className="Average";registerClass(Average);class Maximum extends Merge{constructor($){super($)}mergeFunction($){return tidy(()=>{let _e=$[0];for(let et=1;et<$.length;++et)_e=maximum$3(_e,$[et]);return _e})}}Maximum.className="Maximum";registerClass(Maximum);class Minimum extends Merge{constructor($){super($)}mergeFunction($){return tidy(()=>{let _e=$[0];for(let et=1;et<$.length;++et)_e=minimum$3(_e,$[et]);return _e})}}Minimum.className="Minimum";registerClass(Minimum);class Concatenate extends Merge{constructor($){super($),this.DEFAULT_AXIS=-1,$==null&&($={}),this.axis=$.axis==null?this.DEFAULT_AXIS:$.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build($){if(!(Array.isArray($)&&Array.isArray($[0]))||$.length===1)throw new ValueError("A `Concatenate` layer should be called on a list of at least 2 inputs");$=$;let _e=!0;for(const tt of $)if(tt!=null){_e=!1;break}if(_e)return;const et=[];for(let tt=0;tt<$.length;++tt){const rt=$[tt].slice();rt.splice(this.axis,1);let nt=!1;for(const it of et)if(arraysEqual(it,rt)){nt=!0;break}nt||et.push(rt)}if(et.length>1)throw new ValueError("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify($))}mergeFunction($){return tidy(()=>concatenate$1($,this.axis))}computeOutputShape($){if(!(Array.isArray($)&&Array.isArray($[0])))throw new ValueError("A `Concatenate` layer should be called on a list of inputs.");const _e=$,et=_e[0].slice(),tt=this.axis<0?et.length+this.axis:this.axis;for(const rt of _e.slice(1)){if(et[tt]==null||rt[tt]==null){et[tt]=null;break}et[tt]+=rt[tt]}return et}computeMask($,_e){if(_e==null)return null;if(!Array.isArray(_e))throw new ValueError("`mask` should be an array for Concatenate");if(!Array.isArray($))throw new ValueError("`inputs` should be an array for Concatenate");if(_e.length!==$.length)throw new ValueError(`Mismatch in the length of mask (${_e.length}) and the legnth of inputs (${$.length})`);return tidy(()=>{let et=!0;if(_e.forEach(nt=>{if(nt!=null){et=!1;return}}),et)return null;const tt=[];for(let nt=0;nt<$.length;++nt)_e[nt]==null?tt.push(cast$3(onesLike$2($[nt]),"bool")):_e[nt].rank<$[nt].rank?tt.push(expandDims$3(_e[nt],-1)):tt.push(_e[nt]);const rt=concat$2(tt,this.axis);return all$2(rt,-1,!1)})}getConfig(){const $={axis:this.axis},_e=super.getConfig();return Object.assign($,_e),$}}Concatenate.className="Concatenate";registerClass(Concatenate);function interpretAxis(_,$){for(;_<0;)_+=$;return _}function batchDot(_,$,_e){if(_.shape.length>3||$.shape.length>3)throw new NotImplementedError("batchDot is not implemented for tensors of 4D or higher rank yet");if(assert$1(_.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${_.shape.length}`),assert$1(_.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${$.shape.length}`),typeof _e=="number"&&(_e=[_e,_e]),_.dtype==="complex64"||$.dtype==="complex64")throw new NotImplementedError("batchDot is not implemented for complex64-type Tensors yet.");const et=_.shape.length,tt=$.shape.length;_e==null&&(_e=[et-1,tt-2]);const rt=_e;return tidy(()=>{let nt;if(et>tt){nt=et-tt;const st=[];for(let at=0;at<nt;++at)st.push(1);$=reshape$3($,$.shape.concat(st))}else if(tt>et){nt=tt-et;const st=[];for(let at=0;at<nt;++at)st.push(1);_=reshape$3(_,_.shape.concat(st))}else nt=0;let it;if(_.shape.length===2&&$.shape.length===2)rt[0]===rt[1]?it=sum$2(mul(_,$),rt[0]):it=sum$2(mul(transpose$2(_,[1,0]),$),rt[1]);else{const st=rt[0]!==_.shape.length-1,at=rt[1]===$.shape.length-1;it=matMul$1(_,$,st,at)}if(nt>0){let st;et>tt?st=et+tt-3:st=et-1;const at=[];for(let ot=st;ot<st+nt;++ot)at.push(ot);it=squeeze(it,at)}return it.shape.length===1&&(it=expandDims$3(it,1)),it})}let Dot$1=class extends Merge{constructor($){super($),this.axes=$.axes,this.normalize=$.normalize==null?!1:$.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build($){assert$1(Array.isArray($)&&$.length===2&&Array.isArray($[0])&&Array.isArray($[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const _e=$[0],et=$[1];if(_e.length>3||et.length>3)throw new NotImplementedError("Dot layer does not support tensors of 4D or higher rank yet.");const tt=this.interpretAxes(_e,et);if(_e[tt[0]]!==et[tt[1]])throw new ValueError(`Dimension incompatibility: ${_e[tt[0]]} !== ${et[tt[1]]}`)}mergeFunction($){if($.length!==2)throw new ValueError(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${$.length} input(s).`);let _e=$[0],et=$[1],tt;return Array.isArray(this.axes)?tt=this.axes.map((rt,nt)=>interpretAxis(rt,$[nt].shape.length)):tt=[interpretAxis(this.axes,_e.shape.length),interpretAxis(this.axes,et.shape.length)],this.normalize&&(_e=l2Normalize(_e,tt[0]),et=l2Normalize(et,tt[1])),batchDot(_e,et,tt)}interpretAxes($,_e){let et;return Array.isArray(this.axes)?et=this.axes:et=[interpretAxis(this.axes,$.length),interpretAxis(this.axes,_e.length)],et}computeOutputShape($){assert$1(Array.isArray($)&&$.length===2&&Array.isArray($[0])&&Array.isArray($[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const _e=$[0].slice(),et=$[1].slice();if(_e.length>3||et.length>3)throw new NotImplementedError("Dot layer does not support tensors of 4D or higher rank yet.");const tt=this.interpretAxes(_e,et);_e.splice(tt[0],1),et.splice(tt[1],1),et.splice(0,1);const rt=_e.concat(et);return rt.length===1&&rt.push(1),rt}computeMask($,_e){return null}getConfig(){const $={axes:this.axes,normalize:this.normalize},_e=super.getConfig();return Object.assign($,_e),$}};Dot$1.className="Dot";registerClass(Dot$1);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class GaussianNoise extends Layer$1{constructor($){super($),this.supportsMasking=!0,this.stddev=$.stddev}computeOutputShape($){return $}getConfig(){const $=super.getConfig(),_e={stddev:this.stddev};return Object.assign(_e,$),_e}call($,_e){return tidy(()=>{this.invokeCallHook($,_e);const et=getExactlyOneTensor($);return inTrainPhase(()=>add$3(randomNormal$1(et.shape,0,this.stddev),et),()=>et,_e.training||!1)})}}GaussianNoise.className="GaussianNoise";registerClass(GaussianNoise);class GaussianDropout extends Layer$1{constructor($){super($),this.supportsMasking=!0,this.rate=$.rate}computeOutputShape($){return $}getConfig(){const $=super.getConfig(),_e={rate:this.rate};return Object.assign(_e,$),_e}call($,_e){return tidy(()=>{this.invokeCallHook($,_e);const et=getExactlyOneTensor($);return this.rate>0&&this.rate<1?inTrainPhase(()=>{const rt=Math.sqrt(this.rate/(1-this.rate));return mul(et,randomNormal$1(et.shape,1,rt))},()=>et,_e.training||!1):et})}}GaussianDropout.className="GaussianDropout";registerClass(GaussianDropout);class AlphaDropout extends Layer$1{constructor($){super($),this.supportsMasking=!0,this.rate=$.rate,this.noiseShape=$.noiseShape}_getNoiseShape($){return this.noiseShape||getExactlyOneTensor($).shape}computeOutputShape($){return $}getConfig(){const $=super.getConfig(),_e={rate:this.rate};return Object.assign(_e,$),_e}call($,_e){return tidy(()=>{if(this.rate<1&&this.rate>0){const et=this._getNoiseShape($);return inTrainPhase(()=>{const rt=getExactlyOneTensor($),st=-1.6732632423543772*1.0507009873554805;let at=greaterEqual$2(randomUniform$1(et),this.rate);at=cast$2(at,"float32");const ot=((1-this.rate)*(1+this.rate*st**2))**-.5,dt=-ot*st*this.rate,ht=add$3(mul(rt,at),mul(add$3(at,-1),st));return add$3(mul(ht,ot),dt)},()=>getExactlyOneTensor($),_e.training||!1)}return $})}}AlphaDropout.className="AlphaDropout";registerClass(AlphaDropout);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function batchNormalization$1(_,$,_e,et,tt,rt=.001){let nt;if(_.rank===2)nt=batchNorm2d(_,$,_e,et,tt,rt);else if(_.rank===3)nt=batchNorm3d(_,$,_e,et,tt,rt);else if(_.rank===4)nt=batchNorm4d(_,$,_e,et,tt,rt);else throw new NotImplementedError(`batchNormalization is not implemented for array of rank ${_.rank} yet`);return nt}function regularNormalizeBatchInTraining(_,$,_e,et,tt=.001){return tidy(()=>{const rt=moments(_,et),nt=rt.mean,it=rt.variance;return[batchNormalization$1(_,nt,it,_e,$,tt),nt,it]})}function broadcastNormalizeBatchInTraining(_,$,_e,et,tt=.001){return tidy(()=>{const rt=moments(_,et),nt=rt.mean,it=rt.variance,st=[];for(const vt of range$6(0,_.rank))et.indexOf(vt)!==-1?st.push(1):st.push(_.shape[vt]);const at=reshape$3(nt,st),ot=reshape$3(it,st),dt=$==null?null:reshape$3($,st),ht=_e==null?null:reshape$3(_e,st);return[batchNormalization$1(_,at,ot,ht,dt,tt),nt,it]})}function normalizeBatchInTraining(_,$,_e,et,tt=.001){return arraysEqual(et.slice().sort(),range$6(0,_.rank-1))?regularNormalizeBatchInTraining(_,$,_e,et,tt):broadcastNormalizeBatchInTraining(_,$,_e,et,tt)}class BatchNormalization extends Layer$1{constructor($){$==null&&($={}),super($),this.supportsMasking=!0,this.axis=$.axis==null?-1:$.axis,this.momentum=$.momentum==null?.99:$.momentum,this.epsilon=$.epsilon==null?.001:$.epsilon,this.center=$.center==null?!0:$.center,this.scale=$.scale==null?!0:$.scale,this.betaInitializer=getInitializer($.betaInitializer||"zeros"),this.gammaInitializer=getInitializer($.gammaInitializer||"ones"),this.movingMeanInitializer=getInitializer($.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=getInitializer($.movingVarianceInitializer||"ones"),this.betaConstraint=getConstraint($.betaConstraint),this.gammaConstraint=getConstraint($.gammaConstraint),this.betaRegularizer=getRegularizer($.betaRegularizer),this.gammaRegularizer=getRegularizer($.gammaRegularizer)}build($){$=getExactlyOneShape($);const _e=this.axis>=0?this.axis:this.axis+$.length,et=$[_e];if(et==null)throw new ValueError(`Axis ${_e} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify($)}.`);this.inputSpec=[new InputSpec({ndim:$.length,axes:{[_e]:et}})];const tt=[et];this.scale&&(this.gamma=this.addWeight("gamma",tt,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",tt,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",tt,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",tt,null,this.movingVarianceInitializer,null,!1),this.built=!0}call($,_e){return tidy(()=>{const et=_e.training==null?!1:_e.training,tt=getExactlyOneTensor($),rt=tt.shape,nt=rt.length,it=range$6(0,nt),st=this.axis>=0?this.axis:this.axis+nt;it.splice(st,1);const at=pyListRepeat(1,nt);at[st]=rt[st];const ot=it.slice();ot.sort();const dt=!arraysEqual(ot,range$6(0,nt).slice(0,nt-1)),ht=()=>{if(dt){const At=reshape$3(this.movingMean.read(),at),jt=reshape$3(this.movingVariance.read(),at),kt=this.center?reshape$3(this.beta.read(),at):null,Lt=this.scale?reshape$3(this.gamma.read(),at):null;return batchNormalization$1(tt,At,jt,kt,Lt,this.epsilon)}else return batchNormalization$1(tt,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!et)return ht();const[yt,vt,xt]=normalizeBatchInTraining(tt,this.gamma.read(),this.beta.read(),it,this.epsilon),wt=(At,jt,kt)=>{tidy(()=>{const Lt=1-kt,Bt=At.read(),Gt=mul(sub$2(Bt,jt),Lt);At.write(sub$2(Bt,Gt))})};return(()=>{wt(this.movingMean,vt,this.momentum),wt(this.movingVariance,xt,this.momentum)})(),yt})}getConfig(){const $={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:serializeInitializer(this.betaInitializer),gammaInitializer:serializeInitializer(this.gammaInitializer),movingMeanInitializer:serializeInitializer(this.movingMeanInitializer),movingVarianceInitializer:serializeInitializer(this.movingVarianceInitializer),betaRegularizer:serializeRegularizer(this.betaRegularizer),gammaRegularizer:serializeRegularizer(this.gammaRegularizer),betaConstraint:serializeConstraint(this.betaConstraint),gammaConstraint:serializeConstraint(this.gammaConstraint)},_e=super.getConfig();return Object.assign($,_e),$}}BatchNormalization.className="BatchNormalization";registerClass(BatchNormalization);class LayerNormalization extends Layer$1{constructor($){if($==null&&($={}),super($),this.axis=$.axis==null?-1:$.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const _e of this.axis)if(!Number.isInteger(_e))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=$.epsilon==null?.001:$.epsilon,this.center=$.center==null?!0:$.center,this.scale=$.scale==null?!0:$.scale,this.betaInitializer=getInitializer($.betaInitializer||"zeros"),this.gammaInitializer=getInitializer($.gammaInitializer||"ones"),this.betaRegularizer=getRegularizer($.betaRegularizer),this.gammaRegularizer=getRegularizer($.gammaRegularizer),this.supportsMasking=!0}build($){$=getExactlyOneShape($);const _e=$.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let rt=0;rt<this.axis.length;++rt)this.axis[rt]<0&&(this.axis[rt]+=_e);for(const rt of this.axis)if(rt<0||rt>=_e)throw new Error(`Invalid axis: ${rt}`);if(this.axis.length!==unique$2(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const et=this.axis.map(rt=>$[rt]),tt=!0;this.scale?this.gamma=this.addWeight("gamma",et,"float32",this.gammaInitializer,this.gammaRegularizer,tt):this.gamma=null,this.center?this.beta=this.addWeight("beta",et,"float32",this.betaInitializer,this.betaRegularizer,tt):this.beta=null,this.built=!0}call($,_e){const et=getExactlyOneTensor($),tt=et.shape,rt=tt.length;return tidy(()=>{let{mean:it,variance:st}=moments(et,this.axis,!0);const at=pyListRepeat(1,rt);for(const xt of this.axis)at[xt]=tt[xt];const ot=xt=>xt!=null&&xt.shape.length!==rt?reshape$3(xt,at):xt;let dt=this.scale?ot(this.gamma.read()):null,ht=this.center?ot(this.beta.read()):null;const yt=[],vt=[];for(let xt=0;xt<rt;++xt)this.axis.indexOf(xt)!==-1?(yt.push(tt[xt]),vt.push(1)):(yt.push(1),vt.push(tt[xt]));return it=tile$3(it,yt),st=tile$3(st,yt),dt!=null&&(dt=tile$3(dt,vt)),ht!=null&&(ht=tile$3(ht,vt)),batchNormalization$1(et,it,st,ht,dt,this.epsilon)})}getConfig(){const $={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:serializeInitializer(this.betaInitializer),gammaInitializer:serializeInitializer(this.gammaInitializer),betaRegularizer:serializeRegularizer(this.betaRegularizer),gammaRegularizer:serializeRegularizer(this.gammaRegularizer)},_e=super.getConfig();return Object.assign($,_e),$}}LayerNormalization.className="LayerNormalization";registerClass(LayerNormalization);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function spatial2dPadding(_,$,_e){return tidy(()=>{if(_.rank!==4)throw new ValueError(`temporalPadding expects input tensor to be 4-D, but received a ${_.rank}-D tensor.`);if($==null&&($=[[1,1],[1,1]]),$.length!==2||$[0].length!==2||$[1].length!==2)throw new ValueError("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(_e==null&&(_e=imageDataFormat()),_e!=="channelsLast"&&_e!=="channelsFirst")throw new ValueError(`Unknown data format: ${_e}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let et;return _e==="channelsFirst"?et=[[0,0],[0,0],$[0],$[1]]:et=[[0,0],$[0],$[1],[0,0]],pad$1(_,et)})}class ZeroPadding2D extends Layer$1{constructor($){if($==null&&($={}),super($),this.dataFormat=$.dataFormat==null?imageDataFormat():$.dataFormat,$.padding==null)this.padding=[[1,1],[1,1]];else if(typeof $.padding=="number")this.padding=[[$.padding,$.padding],[$.padding,$.padding]];else{if($.padding=$.padding,$.padding.length!==2)throw new ValueError(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${$.padding.length} array.`);let _e,et;if(typeof $.padding[0]=="number")_e=[$.padding[0],$.padding[0]],et=[$.padding[1],$.padding[1]];else{if($.padding=$.padding,$.padding[0].length!==2)throw new ValueError(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${$.padding[0].length} array.`);if(_e=$.padding[0],$.padding[1].length!==2)throw new ValueError(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${$.padding[1].length} array.`);et=$.padding[1]}this.padding=[_e,et]}this.inputSpec=[new InputSpec({ndim:4})]}computeOutputShape($){$=getExactlyOneShape($);let _e,et;return this.dataFormat==="channelsFirst"?($[2]!=null&&$[2]>=0?_e=$[2]+this.padding[0][0]+this.padding[0][1]:_e=null,$[3]!=null&&$[3]>=0?et=$[3]+this.padding[1][0]+this.padding[1][1]:et=null,[$[0],$[1],_e,et]):($[1]!=null&&$[1]>=0?_e=$[1]+this.padding[0][0]+this.padding[0][1]:_e=null,$[2]!=null&&$[2]>=0?et=$[2]+this.padding[1][0]+this.padding[1][1]:et=null,[$[0],_e,et,$[3]])}call($,_e){return tidy(()=>spatial2dPadding(getExactlyOneTensor($),this.padding,this.dataFormat))}getConfig(){const $={padding:this.padding,dataFormat:this.dataFormat},_e=super.getConfig();return Object.assign($,_e),$}}ZeroPadding2D.className="ZeroPadding2D";registerClass(ZeroPadding2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pool2d(_,$,_e,et,tt,rt){return tidy(()=>{checkDataFormat(tt),checkPoolMode(rt),checkPaddingMode(et),_e==null&&(_e=[1,1]),et==null&&(et="valid"),tt==null&&(tt=imageDataFormat()),rt==null&&(rt="max"),_=preprocessConv2DInput(_,tt);let nt;const it=et==="same"?"same":"valid";return rt==="max"?nt=maxPool$2(_,$,_e,it):nt=avgPool$2(_,$,_e,it),tt==="channelsFirst"&&(nt=transpose$2(nt,[0,3,1,2])),nt})}function pool3d$1(_,$,_e,et,tt,rt){return tidy(()=>{checkDataFormat(tt),checkPoolMode(rt),checkPaddingMode(et),_e==null&&(_e=[1,1,1]),et==null&&(et="valid"),tt==null&&(tt=imageDataFormat()),rt==null&&(rt="max"),_=preprocessConv3DInput(_,tt);let nt;const it=et==="same"?"same":"valid";return rt==="max"?nt=maxPool3d$1(_,$,_e,it):nt=avgPool3d$1(_,$,_e,it),tt==="channelsFirst"&&(nt=transpose$2(nt,[0,4,1,2,3])),nt})}class Pooling1D extends Layer$1{constructor($){if($.poolSize==null&&($.poolSize=2),super($),typeof $.poolSize=="number")this.poolSize=[$.poolSize];else if(Array.isArray($.poolSize)&&$.poolSize.length===1&&typeof $.poolSize[0]=="number")this.poolSize=$.poolSize;else throw new ValueError(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify($.poolSize)}`);if(assertPositiveInteger(this.poolSize,"poolSize"),$.strides==null)this.strides=this.poolSize;else if(typeof $.strides=="number")this.strides=[$.strides];else if(Array.isArray($.strides)&&$.strides.length===1&&typeof $.strides[0]=="number")this.strides=$.strides;else throw new ValueError(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify($.strides)}`);assertPositiveInteger(this.strides,"strides"),this.padding=$.padding==null?"valid":$.padding,checkPaddingMode(this.padding),this.inputSpec=[new InputSpec({ndim:3})]}computeOutputShape($){$=getExactlyOneShape($);const _e=convOutputLength($[1],this.poolSize[0],this.padding,this.strides[0]);return[$[0],_e,$[2]]}call($,_e){return tidy(()=>{this.invokeCallHook($,_e),$=expandDims$2(getExactlyOneTensor($),2);const et=this.poolingFunction(getExactlyOneTensor($),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return squeeze(et,[2])})}getConfig(){const $={poolSize:this.poolSize,padding:this.padding,strides:this.strides},_e=super.getConfig();return Object.assign($,_e),$}}class MaxPooling1D extends Pooling1D{constructor($){super($)}poolingFunction($,_e,et,tt,rt){return checkDataFormat(rt),checkPaddingMode(tt),pool2d($,_e,et,tt,rt,"max")}}MaxPooling1D.className="MaxPooling1D";registerClass(MaxPooling1D);class AveragePooling1D extends Pooling1D{constructor($){super($)}poolingFunction($,_e,et,tt,rt){return checkDataFormat(rt),checkPaddingMode(tt),pool2d($,_e,et,tt,rt,"avg")}}AveragePooling1D.className="AveragePooling1D";registerClass(AveragePooling1D);class Pooling2D extends Layer$1{constructor($){if($.poolSize==null&&($.poolSize=[2,2]),super($),this.poolSize=Array.isArray($.poolSize)?$.poolSize:[$.poolSize,$.poolSize],$.strides==null)this.strides=this.poolSize;else if(Array.isArray($.strides)){if($.strides.length!==2)throw new ValueError(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${$.strides.length}.`);this.strides=$.strides}else this.strides=[$.strides,$.strides];assertPositiveInteger(this.poolSize,"poolSize"),assertPositiveInteger(this.strides,"strides"),this.padding=$.padding==null?"valid":$.padding,this.dataFormat=$.dataFormat==null?"channelsLast":$.dataFormat,checkDataFormat(this.dataFormat),checkPaddingMode(this.padding),this.inputSpec=[new InputSpec({ndim:4})]}computeOutputShape($){$=getExactlyOneShape($);let _e=this.dataFormat==="channelsFirst"?$[2]:$[1],et=this.dataFormat==="channelsFirst"?$[3]:$[2];return _e=convOutputLength(_e,this.poolSize[0],this.padding,this.strides[0]),et=convOutputLength(et,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[$[0],$[1],_e,et]:[$[0],_e,et,$[3]]}call($,_e){return tidy(()=>(this.invokeCallHook($,_e),this.poolingFunction(getExactlyOneTensor($),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const $={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},_e=super.getConfig();return Object.assign($,_e),$}}class MaxPooling2D extends Pooling2D{constructor($){super($)}poolingFunction($,_e,et,tt,rt){return checkDataFormat(rt),checkPaddingMode(tt),pool2d($,_e,et,tt,rt,"max")}}MaxPooling2D.className="MaxPooling2D";registerClass(MaxPooling2D);class AveragePooling2D extends Pooling2D{constructor($){super($)}poolingFunction($,_e,et,tt,rt){return checkDataFormat(rt),checkPaddingMode(tt),pool2d($,_e,et,tt,rt,"avg")}}AveragePooling2D.className="AveragePooling2D";registerClass(AveragePooling2D);class Pooling3D extends Layer$1{constructor($){if($.poolSize==null&&($.poolSize=[2,2,2]),super($),this.poolSize=Array.isArray($.poolSize)?$.poolSize:[$.poolSize,$.poolSize,$.poolSize],$.strides==null)this.strides=this.poolSize;else if(Array.isArray($.strides)){if($.strides.length!==3)throw new ValueError(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${$.strides.length}.`);this.strides=$.strides}else this.strides=[$.strides,$.strides,$.strides];assertPositiveInteger(this.poolSize,"poolSize"),assertPositiveInteger(this.strides,"strides"),this.padding=$.padding==null?"valid":$.padding,this.dataFormat=$.dataFormat==null?"channelsLast":$.dataFormat,checkDataFormat(this.dataFormat),checkPaddingMode(this.padding),this.inputSpec=[new InputSpec({ndim:5})]}computeOutputShape($){$=getExactlyOneShape($);let _e=this.dataFormat==="channelsFirst"?$[2]:$[1],et=this.dataFormat==="channelsFirst"?$[3]:$[2],tt=this.dataFormat==="channelsFirst"?$[4]:$[3];return _e=convOutputLength(_e,this.poolSize[0],this.padding,this.strides[0]),et=convOutputLength(et,this.poolSize[1],this.padding,this.strides[1]),tt=convOutputLength(tt,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[$[0],$[1],_e,et,tt]:[$[0],_e,et,tt,$[4]]}call($,_e){return tidy(()=>(this.invokeCallHook($,_e),this.poolingFunction(getExactlyOneTensor($),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const $={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},_e=super.getConfig();return Object.assign($,_e),$}}class MaxPooling3D extends Pooling3D{constructor($){super($)}poolingFunction($,_e,et,tt,rt){return checkDataFormat(rt),checkPaddingMode(tt),pool3d$1($,_e,et,tt,rt,"max")}}MaxPooling3D.className="MaxPooling3D";registerClass(MaxPooling3D);class AveragePooling3D extends Pooling3D{constructor($){super($)}poolingFunction($,_e,et,tt,rt){return checkDataFormat(rt),checkPaddingMode(tt),pool3d$1($,_e,et,tt,rt,"avg")}}AveragePooling3D.className="AveragePooling3D";registerClass(AveragePooling3D);class GlobalPooling1D extends Layer$1{constructor($){super($),this.inputSpec=[new InputSpec({ndim:3})]}computeOutputShape($){return[$[0],$[2]]}call($,_e){throw new NotImplementedError}}class GlobalAveragePooling1D extends GlobalPooling1D{constructor($){super($||{})}call($,_e){return tidy(()=>{const et=getExactlyOneTensor($);return mean$1(et,1)})}}GlobalAveragePooling1D.className="GlobalAveragePooling1D";registerClass(GlobalAveragePooling1D);class GlobalMaxPooling1D extends GlobalPooling1D{constructor($){super($||{})}call($,_e){return tidy(()=>{const et=getExactlyOneTensor($);return max$6(et,1)})}}GlobalMaxPooling1D.className="GlobalMaxPooling1D";registerClass(GlobalMaxPooling1D);class GlobalPooling2D extends Layer$1{constructor($){super($),this.dataFormat=$.dataFormat==null?"channelsLast":$.dataFormat,checkDataFormat(this.dataFormat),this.inputSpec=[new InputSpec({ndim:4})]}computeOutputShape($){return $=$,this.dataFormat==="channelsLast"?[$[0],$[3]]:[$[0],$[1]]}call($,_e){throw new NotImplementedError}getConfig(){const $={dataFormat:this.dataFormat},_e=super.getConfig();return Object.assign($,_e),$}}class GlobalAveragePooling2D extends GlobalPooling2D{call($,_e){return tidy(()=>{const et=getExactlyOneTensor($);return this.dataFormat==="channelsLast"?mean$1(et,[1,2]):mean$1(et,[2,3])})}}GlobalAveragePooling2D.className="GlobalAveragePooling2D";registerClass(GlobalAveragePooling2D);class GlobalMaxPooling2D extends GlobalPooling2D{call($,_e){return tidy(()=>{const et=getExactlyOneTensor($);return this.dataFormat==="channelsLast"?max$6(et,[1,2]):max$6(et,[2,3])})}}GlobalMaxPooling2D.className="GlobalMaxPooling2D";registerClass(GlobalMaxPooling2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Wrapper extends Layer$1{constructor($){super($),this.layer=$.layer}build($){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable($){this.layer!=null&&(this.layer.trainable=$)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights($){this.layer.setWeights($)}getConfig(){const $={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},_e=super.getConfig();return Object.assign($,_e),$}setFastWeightInitDuringBuild($){super.setFastWeightInitDuringBuild($),this.layer!=null&&this.layer.setFastWeightInitDuringBuild($)}static fromConfig($,_e,et={}){const tt=_e.layer,rt=deserialize(tt,et);delete _e.layer;const nt={layer:rt};return Object.assign(nt,_e),new $(nt)}}class TimeDistributed extends Wrapper{constructor($){super($),this.supportsMasking=!0}build($){if($=getExactlyOneShape($),$.length<3)throw new ValueError(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify($)}`);this.inputSpec=[{shape:$}];const _e=[$[0]].concat($.slice(2));this.layer.built||(this.layer.build(_e),this.layer.built=!0),super.build($)}computeOutputShape($){$=getExactlyOneShape($);const _e=[$[0]].concat($.slice(2)),et=this.layer.computeOutputShape(_e),tt=$[1];return[et[0],tt].concat(et.slice(1))}call($,_e){return tidy(()=>($=getExactlyOneTensor($),rnn$1((nt,it)=>[getExactlyOneTensor(this.layer.call(nt,_e)),[]],$,[],!1,null,null,!1,!0)[1]))}}TimeDistributed.className="TimeDistributed";registerClass(TimeDistributed);function checkBidirectionalMergeMode(_){checkStringTypeUnionValue(VALID_BIDIRECTIONAL_MERGE_MODES,"BidirectionalMergeMode",_)}const DEFAULT_BIDIRECTIONAL_MERGE_MODE="concat";class Bidirectional extends Wrapper{constructor($){super($);const _e=$.layer.getConfig(),et={};et.className=$.layer.getClassName(),et.config=_e,this.forwardLayer=deserialize(et),_e.goBackwards=_e.goBackwards!==!0;const tt={};if(tt.className=$.layer.getClassName(),tt.config=_e,this.backwardLayer=deserialize(tt),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=$.mergeMode===void 0?DEFAULT_BIDIRECTIONAL_MERGE_MODE:$.mergeMode,checkBidirectionalMergeMode(this.mergeMode),$.weights)throw new NotImplementedError("weights support is not implemented for Bidirectional layer yet.");this._stateful=$.layer.stateful,this.returnSequences=$.layer.returnSequences,this.returnState=$.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=$.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable($){this._trainable=$,this.forwardLayer!=null&&(this.forwardLayer.trainable=$),this.backwardLayer!=null&&(this.backwardLayer.trainable=$)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights($){const _e=$.length,et=Math.floor(_e/2);this.forwardLayer.setWeights($.slice(0,et)),this.backwardLayer.setWeights($.slice(et))}computeOutputShape($){let _e=this.forwardLayer.computeOutputShape($);Array.isArray(_e)&&Array.isArray(_e[0])||(_e=[_e]),_e=_e;let et,tt,rt;return this.returnState&&(rt=_e.slice(1)),et=_e[0],et=et,this.mergeMode==="concat"?(et[et.length-1]*=2,tt=[et]):this.mergeMode==null?tt=[et,et.slice()]:tt=[et],this.returnState?this.mergeMode==null?tt.concat(rt).concat(rt.slice()):[et].concat(rt).concat(rt.slice()):singletonOrArray(tt)}apply($,_e){let et=_e==null?null:_e.initialState,tt=_e==null?null:_e.constants;_e==null&&(_e={});const rt=standardizeArgs($,et,tt,this.numConstants);if($=rt.inputs,et=rt.initialState,tt=rt.constants,Array.isArray($)&&(et=$.slice(1),$=$[0]),(et==null||et.length===0)&&tt==null)return super.apply($,_e);const nt=[],it=[];if(et!=null){const at=et.length;if(at%2>0)throw new ValueError("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");_e.initialState=et,nt.push(...et);const ot=et.map(dt=>new InputSpec({shape:dt.shape}));this.forwardLayer.stateSpec=ot.slice(0,at/2),this.backwardLayer.stateSpec=ot.slice(at/2),it.push(...ot)}if(tt!=null)throw new NotImplementedError("Support for constants in Bidirectional layers is not implemented yet.");const st=nt[0]instanceof SymbolicTensor;for(const at of nt)if(at instanceof SymbolicTensor!==st)throw new ValueError("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(st){const at=[$].concat(nt),ot=this.inputSpec.concat(it),dt=this.inputSpec;this.inputSpec=ot;const ht=super.apply(at,_e);return this.inputSpec=dt,ht}else return super.apply($,_e)}call($,_e){return tidy(()=>{const et=_e.initialState;let tt,rt;if(et==null)tt=this.forwardLayer.call($,_e),rt=this.backwardLayer.call($,_e);else{const st=et.slice(0,et.length/2),at=et.slice(et.length/2);tt=this.forwardLayer.call($,Object.assign(_e,{initialState:st})),rt=this.backwardLayer.call($,Object.assign(_e,{initialState:at}))}let nt;this.returnState&&(Array.isArray(tt)&&(nt=tt.slice(1).concat(rt.slice(1))),tt=tt[0],rt=rt[0]),this.returnSequences&&(rt=reverse$3(rt,1));let it;return this.mergeMode==="concat"?it=concatenate$1([tt,rt]):this.mergeMode==="sum"?it=add$3(tt,rt):this.mergeMode==="ave"?it=mul(.5,add$3(tt,rt)):this.mergeMode==="mul"?it=mul(tt,rt):this.mergeMode==null&&(it=[tt,rt]),this.returnState?this.mergeMode==null?it.concat(nt):[it].concat(nt):it})}resetStates($){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build($){nameScope(this.forwardLayer.name,()=>{this.forwardLayer.build($)}),nameScope(this.backwardLayer.name,()=>{this.backwardLayer.build($)}),this.built=!0}computeMask($,_e){Array.isArray(_e)&&(_e=_e[0]);let et;if(this.returnSequences?this.mergeMode==null?et=[_e,_e]:et=_e:this.mergeMode==null?et=[null,null]:et=null,this.returnState){const rt=this.forwardLayer.states.map(nt=>null);return Array.isArray(et)?et.concat(rt).concat(rt):[et].concat(rt).concat(rt)}else return et}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild($){super.setFastWeightInitDuringBuild($),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild($),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild($)}getConfig(){const $={mergeMode:this.mergeMode},_e=super.getConfig();return Object.assign($,_e),$}static fromConfig($,_e){const et=deserialize(_e.layer);if(delete _e.layer,_e.numConstants!=null)throw new NotImplementedError("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const tt=_e;return tt.layer=et,new $(tt)}}Bidirectional.className="Bidirectional";registerClass(Bidirectional);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Rescaling extends Layer$1{constructor($){super($),this.scale=$.scale,$.offset?this.offset=$.offset:this.offset=0}getConfig(){const $={scale:this.scale,offset:this.offset},_e=super.getConfig();return Object.assign($,_e),$}call($,_e){return tidy(()=>($=getExactlyOneTensor($),$.dtype!=="float32"&&($=cast$2($,"float32")),add$3(mul($,this.scale),this.offset)))}}Rescaling.className="Rescaling";registerClass(Rescaling);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:resizeBilinear$2,cropAndResize:cropAndResize$2}=image$1;class CenterCrop extends Layer$1{constructor($){super($),this.height=$.height,this.width=$.width}centerCrop($,_e,et,tt,rt,nt,it,st){return tidy(()=>{let at,ot=!1;const dt=_e/nt,ht=et/it,yt=(tt+_e)/nt,vt=(rt+et)/it,xt=[dt,ht,yt,vt],wt=[];$.rank===3?(ot=!0,at=stack([$])):at=$;for(let Lt=0;Lt<at.shape[0];Lt++)wt.push(xt);const Et=tensor(wt,[wt.length,4]),At=range$7(0,wt.length,1,"int32"),kt=cropAndResize$2(at,Et,At,[tt,rt],"nearest");return cast$2(ot?getExactlyOneTensor(unstack(kt)):kt,st)})}upsize($,_e,et,tt){return tidy(()=>{const rt=resizeBilinear$2($,[_e,et]);return cast$2(rt,tt)})}call($,_e){return tidy(()=>{const et=getExactlyOneTensor($),tt=et.dtype,rt=et.shape,nt=rt[rt.length-3],it=rt[rt.length-2];let st=0;nt!==this.height&&(st=Math.floor((nt-this.height)/2));let at=0;return it!==this.width&&(at=Math.floor((it-this.width)/2),at===0&&(at=1)),st>=0&&at>=0?this.centerCrop(et,st,at,this.height,this.width,nt,it,tt):this.upsize($,this.height,this.width,tt)})}getConfig(){const $={height:this.height,width:this.width},_e=super.getConfig();return Object.assign($,_e),$}computeOutputShape($){$=getExactlyOneShape($);const _e=$.length-3,et=$.length-2;return $[_e]=this.height,$[et]=this.width,$}}CenterCrop.className="CenterCrop";registerClass(CenterCrop);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function encodeCategoricalInputs(_,$,_e,et){let tt=getExactlyOneTensor(_);if(tt.dtype!=="int32"&&(tt=cast$2(tt,"int32")),$==="int")return tt;const rt=tt.shape;if(tt.rank===0&&(tt=expandDims$3(tt,-1)),$==="oneHot"&&tt.shape[tt.shape.length-1]!==1&&(tt=expandDims$3(tt,-1)),tt.rank>2)throw new ValueError(`When outputMode is not int, maximum output rank is 2 Received outputMode ${$} and input shape ${rt} which would result in output rank ${tt.rank}.`);const nt=["multiHot","oneHot"].includes($),it=tt;let st;if(typeof et<"u"&&$==="count"?st=denseBincount$2(it,et,_e,nt):st=denseBincount$2(it,[],_e,nt),$!=="tfIdf")return st;if(et)return mul(st,et);throw new ValueError("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class CategoryEncoding extends Layer$1{constructor($){super($),this.numTokens=$.numTokens,$.outputMode?this.outputMode=$.outputMode:this.outputMode="multiHot"}getConfig(){const $={numTokens:this.numTokens,outputMode:this.outputMode},_e=super.getConfig();return Object.assign($,_e),$}computeOutputShape($){return $=getExactlyOneShape($),$==null?[this.numTokens]:this.outputMode==="oneHot"&&$[$.length-1]!==1?($.push(this.numTokens),$):($[$.length-1]=this.numTokens,$)}call($,_e){return tidy(()=>{$=getExactlyOneTensor($),$.dtype!=="int32"&&($=cast$2($,"int32"));let et;if(typeof _e.countWeights<"u"){if(this.outputMode!=="count")throw new ValueError(`countWeights is not used when outputMode !== count.
              Received countWeights=${_e.countWeights}`);et=getExactlyOneTensor(_e.countWeights)}const tt=max$6($),rt=min$6($),nt=greater$3(this.numTokens,tt).bufferSync().get(0),it=greaterEqual$2(rt,0).bufferSync().get(0);if(!(nt&&it))throw new ValueError(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return encodeCategoricalInputs($,this.outputMode,this.numTokens,et)})}}CategoryEncoding.className="CategoryEncoding";registerClass(CategoryEncoding);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const INTERPOLATION_KEYS$1=["bilinear","nearest"],INTERPOLATION_METHODS$1=new Set(INTERPOLATION_KEYS$1);class Resizing extends Layer$1{constructor($){if(super($),this.height=$.height,this.width=$.width,$.interpolation)if(INTERPOLATION_METHODS$1.has($.interpolation))this.interpolation=$.interpolation;else throw new ValueError(`Invalid interpolation parameter: ${$.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!$.cropToAspectRatio}computeOutputShape($){$=getExactlyOneShape($);const _e=$[2];return[this.height,this.width,_e]}getConfig(){const $={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},_e=super.getConfig();return Object.assign($,_e),$}call($,_e){return tidy(()=>{const et=[this.height,this.width];if(this.interpolation==="bilinear")return image$1.resizeBilinear($,et,!this.cropToAspectRatio);if(this.interpolation==="nearest")return image$1.resizeNearestNeighbor($,et,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...INTERPOLATION_METHODS$1]} are supported`)})}}Resizing.className="Resizing";registerClass(Resizing);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class RandomSeed{constructor($){this.seed=$}next(){if(this.seed!==void 0)return this.seed++}}RandomSeed.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class BaseRandomLayer extends Layer$1{constructor($){super($),this.randomGenerator=new RandomSeed($.seed)}getConfig(){const $={seed:this.randomGenerator.seed},_e=super.getConfig();return Object.assign($,_e),$}}BaseRandomLayer.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const INTERPOLATION_KEYS=["bilinear","nearest"],INTERPOLATION_METHODS=new Set(INTERPOLATION_KEYS);class RandomWidth extends BaseRandomLayer{constructor($){super($);const{factor:_e,interpolation:et="bilinear"}=$;if(this.factor=_e,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new ValueError(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new ValueError(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new ValueError(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(et)if(INTERPOLATION_METHODS.has(et))this.interpolation=et;else throw new ValueError(`Invalid interpolation parameter: ${et} is not implemented`)}getConfig(){const $={factor:this.factor,interpolation:this.interpolation},_e=super.getConfig();return Object.assign($,_e),$}computeOutputShape($){$=getExactlyOneShape($);const _e=$[2];return[this.imgHeight,-1,_e]}call($,_e){return tidy(()=>{const et=getExactlyOneTensor($);this.imgHeight=et.shape[et.shape.length-3];const tt=et.shape[et.shape.length-2];this.widthFactor=randomUniform$1([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let rt=this.widthFactor.dataSync()[0]*tt;rt=Math.round(rt);const nt=[this.imgHeight,rt];switch(this.interpolation){case"bilinear":return image$1.resizeBilinear($,nt);case"nearest":return image$1.resizeNearestNeighbor($,nt);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...INTERPOLATION_METHODS]} are supported`)}})}}RandomWidth.className="RandomWidth";registerClass(RandomWidth);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function inputLayer(_){return new InputLayer(_)}function elu$2(_){return new ELU$3(_)}function reLU(_){return new ReLU(_)}function leakyReLU(_){return new LeakyReLU(_)}function prelu$2(_){return new PReLU(_)}function softmax$2(_){return new Softmax(_)}function thresholdedReLU(_){return new ThresholdedReLU(_)}function conv1d(_){return new Conv1D(_)}function conv2d$1(_){return new Conv2D(_)}function conv2dTranspose(_){return new Conv2DTranspose(_)}function conv3d(_){return new Conv3D(_)}function conv3dTranspose(_){return new Conv3DTranspose(_)}function separableConv2d(_){return new SeparableConv2D(_)}function cropping2D(_){return new Cropping2D(_)}function upSampling2d(_){return new UpSampling2D(_)}function depthwiseConv2d(_){return new DepthwiseConv2D(_)}function activation(_){return new Activation(_)}function dense(_){return new Dense(_)}function dropout(_){return new Dropout(_)}function spatialDropout1d(_){return new SpatialDropout1D(_)}function flatten(_){return new Flatten(_)}function repeatVector(_){return new RepeatVector(_)}function reshape$2(_){return new Reshape(_)}function permute(_){return new Permute(_)}function embedding(_){return new Embedding(_)}function add$2(_){return new Add(_)}function average(_){return new Average(_)}function concatenate(_){return new Concatenate(_)}function maximum$2(_){return new Maximum(_)}function minimum$2(_){return new Minimum(_)}function multiply$2(_){return new Multiply(_)}function dot(_){return new Dot$1(_)}function batchNormalization(_){return new BatchNormalization(_)}function layerNormalization(_){return new LayerNormalization(_)}function zeroPadding2d(_){return new ZeroPadding2D(_)}function averagePooling1d(_){return new AveragePooling1D(_)}function avgPool1d(_){return averagePooling1d(_)}function avgPooling1d(_){return averagePooling1d(_)}function averagePooling2d(_){return new AveragePooling2D(_)}function avgPool2d(_){return averagePooling2d(_)}function avgPooling2d(_){return averagePooling2d(_)}function averagePooling3d(_){return new AveragePooling3D(_)}function avgPool3d(_){return averagePooling3d(_)}function avgPooling3d(_){return averagePooling3d(_)}function globalAveragePooling1d(_){return new GlobalAveragePooling1D(_)}function globalAveragePooling2d(_){return new GlobalAveragePooling2D(_)}function globalMaxPooling1d(_){return new GlobalMaxPooling1D(_)}function globalMaxPooling2d(_){return new GlobalMaxPooling2D(_)}function maxPooling1d(_){return new MaxPooling1D(_)}function maxPooling2d(_){return new MaxPooling2D(_)}function maxPooling3d(_){return new MaxPooling3D(_)}function gru(_){return new GRU(_)}function gruCell(_){return new GRUCell(_)}function lstm(_){return new LSTM(_)}function lstmCell(_){return new LSTMCell(_)}function simpleRNN(_){return new SimpleRNN(_)}function simpleRNNCell(_){return new SimpleRNNCell(_)}function convLstm2d(_){return new ConvLSTM2D(_)}function convLstm2dCell(_){return new ConvLSTM2DCell(_)}function rnn(_){return new RNN(_)}function stackedRNNCells(_){return new StackedRNNCells(_)}function bidirectional(_){return new Bidirectional(_)}function timeDistributed(_){return new TimeDistributed(_)}const globalMaxPool1d=globalMaxPooling1d,globalMaxPool2d=globalMaxPooling2d,maxPool1d=maxPooling1d,maxPool2d=maxPooling2d;function gaussianNoise(_){return new GaussianNoise(_)}function gaussianDropout(_){return new GaussianDropout(_)}function alphaDropout(_){return new AlphaDropout(_)}function masking(_){return new Masking(_)}function rescaling(_){return new Rescaling(_)}function centerCrop(_){return new CenterCrop(_)}function resizing(_){return new Resizing(_)}function categoryEncoding(_){return new CategoryEncoding(_)}function randomWidth(_){return new RandomWidth(_)}const exports_layers=Object.freeze(Object.defineProperty({__proto__:null,Layer:Layer$1,RNN,RNNCell,activation,add:add$2,alphaDropout,average,averagePooling1d,averagePooling2d,averagePooling3d,avgPool1d,avgPool2d,avgPool3d,avgPooling1d,avgPooling2d,avgPooling3d,batchNormalization,bidirectional,categoryEncoding,centerCrop,concatenate,conv1d,conv2d:conv2d$1,conv2dTranspose,conv3d,conv3dTranspose,convLstm2d,convLstm2dCell,cropping2D,dense,depthwiseConv2d,dot,dropout,elu:elu$2,embedding,flatten,gaussianDropout,gaussianNoise,globalAveragePooling1d,globalAveragePooling2d,globalMaxPool1d,globalMaxPool2d,globalMaxPooling1d,globalMaxPooling2d,gru,gruCell,input,inputLayer,layerNormalization,leakyReLU,lstm,lstmCell,masking,maxPool1d,maxPool2d,maxPooling1d,maxPooling2d,maxPooling3d,maximum:maximum$2,minimum:minimum$2,multiply:multiply$2,permute,prelu:prelu$2,randomWidth,reLU,repeatVector,rescaling,reshape:reshape$2,resizing,rnn,separableConv2d,simpleRNN,simpleRNNCell,softmax:softmax$2,spatialDropout1d,stackedRNNCells,thresholdedReLU,timeDistributed,upSampling2d,zeroPadding2d},Symbol.toStringTag,{value:"Module"}));function binaryAccuracy(_,$){return binaryAccuracy$1(_,$)}function binaryCrossentropy(_,$){return binaryCrossentropy$1(_,$)}function sparseCategoricalAccuracy(_,$){return sparseCategoricalAccuracy$1(_,$)}function categoricalAccuracy(_,$){return categoricalAccuracy$1(_,$)}function categoricalCrossentropy(_,$){return categoricalCrossentropy$1(_,$)}function precision(_,$){return precision$1(_,$)}function recall(_,$){return recall$1(_,$)}function cosineProximity(_,$){return cosineProximity$1(_,$)}function meanAbsoluteError(_,$){return meanAbsoluteError$1(_,$)}function meanAbsolutePercentageError(_,$){return meanAbsolutePercentageError$1(_,$)}function MAPE(_,$){return meanAbsolutePercentageError$1(_,$)}function mape(_,$){return meanAbsolutePercentageError$1(_,$)}function meanSquaredError(_,$){return meanSquaredError$1(_,$)}function MSE(_,$){return meanSquaredError$1(_,$)}function mse(_,$){return meanSquaredError$1(_,$)}function r2Score(_,$){return r2Score$1(_,$)}const exports_metrics=Object.freeze(Object.defineProperty({__proto__:null,MAPE,MSE,binaryAccuracy,binaryCrossentropy,categoricalAccuracy,categoricalCrossentropy,cosineProximity,mape,meanAbsoluteError,meanAbsolutePercentageError,meanSquaredError,mse,precision,r2Score,recall,sparseCategoricalAccuracy},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const exports_models=Object.freeze(Object.defineProperty({__proto__:null,modelFromJSON},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function l1l2(_){return new L1L2(_)}function l1(_){return l1$1(_)}function l2(_){return l2$1(_)}const exports_regularizers=Object.freeze(Object.defineProperty({__proto__:null,l1,l1l2,l2},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Callback extends BaseCallback{constructor(){super(...arguments),this.model=null}setModel($){if(!($ instanceof LayersModel))throw new Error("model must be a LayersModel, not some other Container");this.model=$}}function less$2(_,$){return _<$}function greater$2(_,$){return _>$}class EarlyStopping extends Callback{constructor($){if(super(),$==null&&($={}),$.restoreBestWeights)throw new NotImplementedError("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=$.monitor||"val_loss",this.minDelta=Math.abs($.minDelta||0),this.patience=$.patience||0,this.verbose=$.verbose||0,this.mode=$.mode||"auto",this.baseline=$.baseline,["auto","min","max"].indexOf(this.mode)===-1&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),this.mode==="min"?this.monitorFunc=less$2:this.mode==="max"?this.monitorFunc=greater$2:this.monitor.indexOf("acc")!==-1?this.monitorFunc=greater$2:this.monitorFunc=less$2,this.monitorFunc===less$2&&(this.minDelta*=-1)}async onTrainBegin($){this.wait=0,this.stoppedEpoch=0,this.baseline!=null?this.best=this.baseline:this.best=this.monitorFunc===less$2?1/0:-1/0}async onEpochEnd($,_e){await resolveScalarsInLogs(_e);const et=this.getMonitorValue(_e);et!=null&&(this.monitorFunc(et-this.minDelta,this.best)?(this.best=et,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=$,this.model.stopTraining=!0)))}async onTrainEnd($){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue($){$==null&&($={});const _e=$[this.monitor];return _e==null&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: ${Object.keys($)}`),_e}}function earlyStopping(_){return new EarlyStopping(_)}const callbacks={earlyStopping};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ENV$1=env();ENV$1.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,_=>{_&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var DataType;(function(_){_[_.DT_INVALID=0]="DT_INVALID",_[_.DT_FLOAT=1]="DT_FLOAT",_[_.DT_DOUBLE=2]="DT_DOUBLE",_[_.DT_INT32=3]="DT_INT32",_[_.DT_UINT8=4]="DT_UINT8",_[_.DT_INT16=5]="DT_INT16",_[_.DT_INT8=6]="DT_INT8",_[_.DT_STRING=7]="DT_STRING",_[_.DT_COMPLEX64=8]="DT_COMPLEX64",_[_.DT_INT64=9]="DT_INT64",_[_.DT_BOOL=10]="DT_BOOL",_[_.DT_QINT8=11]="DT_QINT8",_[_.DT_QUINT8=12]="DT_QUINT8",_[_.DT_QINT32=13]="DT_QINT32",_[_.DT_BFLOAT16=14]="DT_BFLOAT16",_[_.DT_QINT16=15]="DT_QINT16",_[_.DT_QUINT16=16]="DT_QUINT16",_[_.DT_UINT16=17]="DT_UINT16",_[_.DT_COMPLEX128=18]="DT_COMPLEX128",_[_.DT_HALF=19]="DT_HALF",_[_.DT_RESOURCE=20]="DT_RESOURCE",_[_.DT_VARIANT=21]="DT_VARIANT",_[_.DT_UINT32=22]="DT_UINT32",_[_.DT_UINT64=23]="DT_UINT64",_[_.DT_FLOAT_REF=101]="DT_FLOAT_REF",_[_.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",_[_.DT_INT32_REF=103]="DT_INT32_REF",_[_.DT_UINT8_REF=104]="DT_UINT8_REF",_[_.DT_INT16_REF=105]="DT_INT16_REF",_[_.DT_INT8_REF=106]="DT_INT8_REF",_[_.DT_STRING_REF=107]="DT_STRING_REF",_[_.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",_[_.DT_INT64_REF=109]="DT_INT64_REF",_[_.DT_BOOL_REF=110]="DT_BOOL_REF",_[_.DT_QINT8_REF=111]="DT_QINT8_REF",_[_.DT_QUINT8_REF=112]="DT_QUINT8_REF",_[_.DT_QINT32_REF=113]="DT_QINT32_REF",_[_.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",_[_.DT_QINT16_REF=115]="DT_QINT16_REF",_[_.DT_QUINT16_REF=116]="DT_QUINT16_REF",_[_.DT_UINT16_REF=117]="DT_UINT16_REF",_[_.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",_[_.DT_HALF_REF=119]="DT_HALF_REF",_[_.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",_[_.DT_VARIANT_REF=121]="DT_VARIANT_REF",_[_.DT_UINT32_REF=122]="DT_UINT32_REF",_[_.DT_UINT64_REF=123]="DT_UINT64_REF"})(DataType||(DataType={}));var SaverDef;(function(_){(function($){$[$.LEGACY=0]="LEGACY",$[$.V1=1]="V1",$[$.V2=2]="V2"})(_.CheckpointFormatVersion||(_.CheckpointFormatVersion={}))})(SaverDef||(SaverDef={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CUSTOM_OPS={};function registerOp(_,$){const _e={tfOpName:_,category:"custom",inputs:[],attrs:[],customExecutor:$};CUSTOM_OPS[_]=_e}function getRegisteredOp(_){return CUSTOM_OPS[_]}function deregisterOp(_){delete CUSTOM_OPS[_]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getParamValue(_,$,_e,et,tt){const rt=$.inputParams[_];if(rt&&rt.inputIndexStart!==void 0){const it=rt.inputIndexStart,st=rt.inputIndexEnd===0?void 0:rt.inputIndexEnd===void 0?it+1:rt.inputIndexEnd,at=it<0?$.inputNames.length+it:it;if(rt.type==="tensor")return getTensor($.inputNames[at],_e,et,tt);if(rt.type==="tensors"){const ht=$.inputs.slice(it,st);return $.inputNames.slice(it,st).filter((vt,xt)=>{var wt;return((wt=ht[xt])===null||wt===void 0?void 0:wt.op)!=="NoOp"}).map(vt=>getTensor(vt,_e,et,tt))}const ot=getTensor($.inputNames[at],_e,et,tt),dt=ot.dataSync();return rt.type==="number"?dt[0]:toNestedArray(ot.shape,dt)}const nt=$.attrParams[_];return nt&&nt.value}function getTensor(_,$,_e,et){const[tt,rt]=parseNodeName(_,_e);if(et!=null){const it=et.getHashTableHandleByName(tt);if(it!=null)return it}const nt=_e.currentContextIds.find(it=>!!$[getNodeNameWithContextId(tt,it)]);return nt!==void 0?$[getNodeNameWithContextId(tt,nt)][rt]:void 0}function getTensorsForCurrentContext(_,$,_e){return $[getNodeNameWithContextId(_,_e.currentContextId)]}function getNodeNameAndIndex(_,$){const[_e,et,tt]=parseNodeName(_,$);return[getNodeNameWithContextId(_e,$&&$.currentContextId),et,tt]}function getNodeNameWithContextId(_,$){return $?`${_}-${$}`:_}function parseNodeName(_,$){if(_==="")return["",0,void 0];const _e=$!=null&&$.parseNodeNameCache!=null;if(_e){const rt=$.parseNodeNameCache.get(_);if(rt!=null)return rt}const et=_.split(":");let tt;if(et.length===1)tt=[_,0,void 0];else{const rt=et[0],nt=et.length===3?et[1]:void 0,it=Number(et[et.length-1]);tt=[rt,it,nt]}return _e&&$.parseNodeNameCache.set(_,tt),tt}function getPadding(_,$,_e){let et=getParamValue("pad",_,$,_e);if(et==="explicit"){et=getParamValue("explicitPaddings",_,$,_e);const tt=[[0,0],[0,0],[0,0],[0,0]];for(let rt=0;rt<4;rt++)tt[rt][0]=et[rt*2],tt[rt][1]=et[rt*2+1];return tt}return et}function cloneTensor(_){return _.kept?_:clone$1(_)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const json$i=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],arithmetic=Object.freeze(Object.defineProperty({__proto__:null,json:json$i},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const json$h=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],basicMath=Object.freeze(Object.defineProperty({__proto__:null,json:json$h},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const json$g=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],control=Object.freeze(Object.defineProperty({__proto__:null,json:json$g},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const json$f=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],convolution=Object.freeze(Object.defineProperty({__proto__:null,json:json$f},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const json$e=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],creation=Object.freeze(Object.defineProperty({__proto__:null,json:json$e},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const json$d=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],dynamic=Object.freeze(Object.defineProperty({__proto__:null,json:json$d},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const json$c=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],evaluation=Object.freeze(Object.defineProperty({__proto__:null,json:json$c},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const json$b=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],graph=Object.freeze(Object.defineProperty({__proto__:null,json:json$b},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const json$a=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],hashTable=Object.freeze(Object.defineProperty({__proto__:null,json:json$a},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const json$9=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],image=Object.freeze(Object.defineProperty({__proto__:null,json:json$9},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const json$8=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],logical=Object.freeze(Object.defineProperty({__proto__:null,json:json$8},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const json$7=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],matrices=Object.freeze(Object.defineProperty({__proto__:null,json:json$7},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const json$6=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],normalization=Object.freeze(Object.defineProperty({__proto__:null,json:json$6},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const json$5=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],reduction=Object.freeze(Object.defineProperty({__proto__:null,json:json$5},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const json$4=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],sliceJoin=Object.freeze(Object.defineProperty({__proto__:null,json:json$4},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const json$3=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],sparse=Object.freeze(Object.defineProperty({__proto__:null,json:json$3},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const json$2=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],spectral=Object.freeze(Object.defineProperty({__proto__:null,json:json$2},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const json$1=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],string$1=Object.freeze(Object.defineProperty({__proto__:null,json:json$1},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const json=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],transformation=Object.freeze(Object.defineProperty({__proto__:null,json},Symbol.toStringTag,{value:"Module"}));class OperationMapper{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const $=[arithmetic,basicMath,control,convolution,creation,dynamic,evaluation,graph,hashTable,image,logical,matrices,normalization,reduction,sliceJoin,sparse,spectral,string$1,transformation],_e=[].concat(...$.map(et=>et.json));this.opMappers=_e.reduce((et,tt)=>(et[tt.tfOpName]=tt,et),{})}transformGraph($,_e={}){const et=$.node,tt=[],rt=[],nt=[],it=et.reduce((xt,wt)=>(xt[wt.name]=this.mapNode(wt),wt.op.startsWith("Placeholder")?tt.push(xt[wt.name]):wt.op==="Const"?rt.push(xt[wt.name]):(wt.input==null||wt.input.length===0)&&nt.push(xt[wt.name]),xt),{});let st=[];const at=[];let ot={},dt={};_e!=null&&(ot=this.mapSignatureEntries(_e.inputs),dt=this.mapSignatureEntries(_e.outputs));const ht=Object.keys(it);ht.forEach(xt=>{const wt=it[xt];wt.inputNames.forEach((Et,At)=>{const[jt,,kt]=getNodeNameAndIndex(Et),Lt=it[jt];if(Lt.outputs!=null){const Bt=Lt.outputs.indexOf(kt);if(Bt!==-1){const Gt=`${jt}:${Bt}`;wt.inputNames[At]=Gt}}wt.inputs.push(Lt),Lt.children.push(wt)})}),Object.keys(dt).length===0?ht.forEach(xt=>{const wt=it[xt];wt.children.length===0&&at.push(wt)}):Object.keys(dt).forEach(xt=>{const[wt]=getNodeNameAndIndex(xt),Et=it[wt];Et!=null&&(Et.signatureKey=dt[xt],at.push(Et))}),Object.keys(ot).length>0?Object.keys(ot).forEach(xt=>{const[wt]=getNodeNameAndIndex(xt),Et=it[wt];Et&&(Et.signatureKey=ot[xt],st.push(Et))}):st=tt;let yt={};$.library!=null&&$.library.function!=null&&(yt=$.library.function.reduce((xt,wt)=>(xt[wt.signature.name]=this.mapFunction(wt),xt),{}));const vt={nodes:it,inputs:st,outputs:at,weights:rt,placeholders:tt,signature:_e,functions:yt};return nt.length>0&&(vt.initNodes=nt),vt}mapSignatureEntries($){return Object.keys($||{}).reduce((_e,et)=>(_e[$[et].name]=et,_e),{})}mapNode($){const _e=getRegisteredOp($.op)||this.opMappers[$.op]||{};$.attr==null&&($.attr={});const et={name:$.name,op:$.op,category:_e.category,inputNames:($.input||[]).map(tt=>tt.startsWith("^")?tt.slice(1):tt),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:$.attr,outputs:_e.outputs};return _e.inputs!=null&&(et.inputParams=_e.inputs.reduce((tt,rt)=>(tt[rt.name]={type:rt.type,inputIndexStart:rt.start,inputIndexEnd:rt.end},tt),{})),_e.attrs!=null&&(et.attrParams=_e.attrs.reduce((tt,rt)=>{const nt=rt.type;let it;switch(rt.type){case"string":it=getStringParam($.attr,rt.tfName,rt.defaultValue),it===void 0&&rt.tfDeprecatedName&&(it=getStringParam($.attr,rt.tfDeprecatedName,rt.defaultValue));break;case"string[]":it=getStringArrayParam($.attr,rt.tfName,rt.defaultValue),it===void 0&&rt.tfDeprecatedName&&(it=getStringArrayParam($.attr,rt.tfDeprecatedName,rt.defaultValue));break;case"number":it=getNumberParam($.attr,rt.tfName,rt.defaultValue||0),it===void 0&&rt.tfDeprecatedName&&(it=getNumberParam($.attr,rt.tfDeprecatedName,rt.defaultValue));break;case"number[]":it=getNumericArrayParam($.attr,rt.tfName,rt.defaultValue),it===void 0&&rt.tfDeprecatedName&&(it=getNumericArrayParam($.attr,rt.tfDeprecatedName,rt.defaultValue));break;case"bool":it=getBoolParam($.attr,rt.tfName,rt.defaultValue),it===void 0&&rt.tfDeprecatedName&&(it=getBoolParam($.attr,rt.tfDeprecatedName,rt.defaultValue));break;case"bool[]":it=getBoolArrayParam($.attr,rt.tfName,rt.defaultValue),it===void 0&&rt.tfDeprecatedName&&(it=getBoolArrayParam($.attr,rt.tfDeprecatedName,rt.defaultValue));break;case"shape":it=getTensorShapeParam($.attr,rt.tfName,rt.defaultValue),it===void 0&&rt.tfDeprecatedName&&(it=getTensorShapeParam($.attr,rt.tfDeprecatedName,rt.defaultValue));break;case"shape[]":it=getTensorShapeArrayParam($.attr,rt.tfName,rt.defaultValue),it===void 0&&rt.tfDeprecatedName&&(it=getTensorShapeArrayParam($.attr,rt.tfDeprecatedName,rt.defaultValue));break;case"dtype":it=getDtypeParam($.attr,rt.tfName,rt.defaultValue),it===void 0&&rt.tfDeprecatedName&&(it=getDtypeParam($.attr,rt.tfDeprecatedName,rt.defaultValue));break;case"dtype[]":it=getDtypeArrayParam($.attr,rt.tfName,rt.defaultValue),it===void 0&&rt.tfDeprecatedName&&(it=getDtypeArrayParam($.attr,rt.tfDeprecatedName,rt.defaultValue));break;case"func":it=getFuncParam($.attr,rt.tfName,rt.defaultValue),it===void 0&&rt.tfDeprecatedName&&(it=getFuncParam($.attr,rt.tfDeprecatedName,rt.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${rt.type} for op: ${$.op}`)}return tt[rt.name]={value:it,type:nt},tt},{})),et}mapFunction($){const _e=$.nodeDef,et=[],tt=[];let rt={};_e!=null&&(rt=_e.reduce((dt,ht)=>(dt[ht.name]=this.mapNode(ht),ht.op==="Const"&&tt.push(dt[ht.name]),dt),{}));const nt=[],it=[];$.signature.inputArg.forEach(dt=>{const[ht]=getNodeNameAndIndex(dt.name),yt={name:ht,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:parseDtypeParam(dt.type),type:"dtype"}},children:[]};yt.signatureKey=dt.name,nt.push(yt),rt[ht]=yt}),Object.keys(rt).forEach(dt=>{const ht=rt[dt];ht.inputNames.forEach((yt,vt)=>{const[xt,,wt]=getNodeNameAndIndex(yt),Et=rt[xt];if(Et.outputs!=null){const At=Et.outputs.indexOf(wt);if(At!==-1){const jt=`${xt}:${At}`;ht.inputNames[vt]=jt}}ht.inputs.push(Et),Et.children.push(ht)})});const at=$.ret;$.signature.outputArg.forEach(dt=>{const[ht,yt]=getNodeNameAndIndex(at[dt.name]),vt=rt[ht];vt!=null&&(vt.defaultOutput=yt,it.push(vt))});const ot=this.mapArgsToSignature($);return{nodes:rt,inputs:nt,outputs:it,weights:tt,placeholders:et,signature:ot}}mapArgsToSignature($){return{methodName:$.signature.name,inputs:$.signature.inputArg.reduce((_e,et)=>(_e[et.name]=this.mapArgToTensorInfo(et),_e),{}),outputs:$.signature.outputArg.reduce((_e,et)=>(_e[et.name]=this.mapArgToTensorInfo(et,$.ret),_e),{})}}mapArgToTensorInfo($,_e){let et=$.name;return _e!=null&&(et=_e[et]),{name:et,dtype:$.type}}}function decodeBase64(_){const $=env().global;if(typeof $.atob<"u")return $.atob(_);if(typeof Buffer<"u")return new Buffer(_,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function parseStringParam(_,$){const _e=Array.isArray(_)?String.fromCharCode.apply(null,_):decodeBase64(_);return $?_e:_e.toLowerCase()}function getStringParam(_,$,_e,et=!1){const tt=_[$];return tt!=null?parseStringParam(tt.s,et):_e}function getBoolParam(_,$,_e){const et=_[$];return et?et.b:_e}function getNumberParam(_,$,_e){const et=_[$]||{},tt=et.i!=null?et.i:et.f!=null?et.f:_e;return typeof tt=="number"?tt:parseInt(tt,10)}function parseDtypeParam(_){switch(typeof _=="string"&&(_=DataType[_]),_){case DataType.DT_FLOAT:case DataType.DT_HALF:return"float32";case DataType.DT_INT32:case DataType.DT_INT64:case DataType.DT_INT8:case DataType.DT_UINT8:return"int32";case DataType.DT_BOOL:return"bool";case DataType.DT_DOUBLE:return"float32";case DataType.DT_STRING:return"string";case DataType.DT_COMPLEX64:case DataType.DT_COMPLEX128:return"complex64";default:return null}}function getFuncParam(_,$,_e){const et=_[$];return et&&et.func?et.func.name:_e}function getDtypeParam(_,$,_e){const et=_[$];return et&&et.type?parseDtypeParam(et.type):_e}function getDtypeArrayParam(_,$,_e){const et=_[$];return et&&et.list&&et.list.type?et.list.type.map(tt=>parseDtypeParam(tt)):_e}function parseTensorShapeParam(_){if(!_.unknownRank)return _.dim!=null?_.dim.map($=>typeof $.size=="number"?$.size:parseInt($.size,10)):[]}function getTensorShapeParam(_,$,_e){const et=_[$];return et&&et.shape?parseTensorShapeParam(et.shape):_e}function getNumericArrayParam(_,$,_e){const et=_[$];return et?((et.list.f&&et.list.f.length?et.list.f:et.list.i)||[]).map(tt=>typeof tt=="number"?tt:parseInt(tt,10)):_e}function getStringArrayParam(_,$,_e,et=!1){const tt=_[$];return tt&&tt.list&&tt.list.s?tt.list.s.map(rt=>parseStringParam(rt,et)):_e}function getTensorShapeArrayParam(_,$,_e){const et=_[$];return et&&et.list&&et.list.shape?et.list.shape.map(tt=>parseTensorShapeParam(tt)):_e}function getBoolArrayParam(_,$,_e){const et=_[$];return et&&et.list&&et.list.b?et.list.b:_e}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NodeValueImpl{constructor($,_e,et){this.node=$,this.tensorMap=_e,this.context=et,this.inputs=[],this.attrs={},this.inputs=$.inputNames.map(tt=>this.getInput(tt)),$.rawAttrs!=null&&(this.attrs=Object.keys($.rawAttrs).reduce((tt,rt)=>(tt[rt]=this.getAttr(rt),tt),{}))}getInput($){return getTensor($,this.tensorMap,this.context)}getAttr($,_e){const et=this.node.rawAttrs[$];if(et.tensor!=null)return getTensor($,this.tensorMap,this.context);if(et.i!=null||et.f!=null)return getNumberParam(this.node.rawAttrs,$,_e);if(et.s!=null)return getStringParam(this.node.rawAttrs,$,_e);if(et.b!=null)return getBoolParam(this.node.rawAttrs,$,_e);if(et.shape!=null)return getTensorShapeParam(this.node.rawAttrs,$,_e);if(et.type!=null)return getDtypeParam(this.node.rawAttrs,$,_e);if(et.list!=null){if(et.list.i!=null||et.list.f!=null)return getNumericArrayParam(this.node.rawAttrs,$,_e);if(et.list.s!=null)return getStringArrayParam(this.node.rawAttrs,$,_e);if(et.list.shape!=null)return getTensorShapeArrayParam(this.node.rawAttrs,$,_e);if(et.list.b!=null)return getBoolArrayParam(this.node.rawAttrs,$,_e);if(et.list.type!=null)return getDtypeArrayParam(this.node.rawAttrs,$,_e)}return _e}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tfOps=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX,abs:abs$2,acos:acos$2,acosh:acosh$2,add:add$3,addN:addN$2,all:all$2,any:any$2,argMax:argMax$2,argMin:argMin$2,asin:asin$2,asinh:asinh$2,atan:atan$2,atan2:atan2$2,atanh:atanh$2,avgPool:avgPool$2,avgPool3d:avgPool3d$1,basicLSTMCell,batchNorm:batchNorm$2,batchNorm2d,batchNorm3d,batchNorm4d,batchToSpaceND:batchToSpaceND$2,bincount:bincount$2,bitwiseAnd:bitwiseAnd$2,booleanMaskAsync,broadcastArgs:broadcastArgs$2,broadcastTo,buffer:buffer$1,cast:cast$3,ceil:ceil$2,clipByValue:clipByValue$2,clone:clone$1,complex:complex$2,concat:concat$2,concat1d,concat2d,concat3d,concat4d,conv1d:conv1d$1,conv2d:conv2d$3,conv2dTranspose:conv2dTranspose$1,conv3d:conv3d$1,conv3dTranspose:conv3dTranspose$1,cos:cos$3,cosh:cosh$2,cosineWindow,cumprod:cumprod$2,cumsum:cumsum$2,denseBincount:denseBincount$2,depthToSpace:depthToSpace$2,depthwiseConv2d:depthwiseConv2d$3,diag:diag$2,dilation2d,div:div$1,divNoNan,dot:dot$2,dropout:dropout$2,einsum:einsum$2,elu:elu$4,enclosingPowerOfTwo,ensureShape,equal:equal$2,erf:erf$2,euclideanNorm,exp:exp$3,expandDims:expandDims$3,expm1:expm1$2,eye,fft:fft$2,fill:fill$2,floor:floor$2,floorDiv:floorDiv$2,fused:fused_ops,gather:gather$1,gatherND,greater:greater$3,greaterEqual:greaterEqual$2,ifft:ifft$2,imag:imag$2,image:image$1,inTopKAsync,irfft,isFinite:isFinite$3,isInf:isInf$2,isNaN:isNaN$4,leakyRelu:leakyRelu$2,less:less$3,lessEqual:lessEqual$2,linalg,linspace,localResponseNormalization,log:log$3,log1p:log1p$2,logSigmoid,logSoftmax,logSumExp,logicalAnd:logicalAnd$2,logicalNot:logicalNot$2,logicalOr:logicalOr$2,logicalXor,losses,lowerBound:lowerBound$1,matMul:matMul$1,max:max$6,maxPool:maxPool$2,maxPool3d:maxPool3d$1,maxPoolWithArgmax,maximum:maximum$3,mean:mean$1,meshgrid,min:min$6,minimum:minimum$3,mirrorPad:mirrorPad$1,mod:mod$2,moments,movingAverage,mul,multiRNNCell,multinomial:multinomial$2,neg:neg$2,norm,notEqual:notEqual$2,oneHot:oneHot$2,ones:ones$1,onesLike:onesLike$2,op,outerProduct,pad:pad$1,pad1d,pad2d,pad3d,pad4d,pool:pool$1,pow:pow$3,prelu:prelu$3,print,prod:prod$2,raggedGather:raggedGather$2,raggedRange:raggedRange$2,raggedTensorToTensor:raggedTensorToTensor$2,rand,randomGamma,randomNormal:randomNormal$2,randomStandardNormal,randomUniform:randomUniform$1,randomUniformInt,range:range$7,real:real$2,reciprocal:reciprocal$2,relu:relu$2,relu6:relu6$2,reshape:reshape$3,reverse:reverse$3,reverse1d,reverse2d,reverse3d,reverse4d,rfft,round:round$3,rsqrt:rsqrt$2,scalar,scatterND,searchSorted:searchSorted$2,selu:selu$2,separableConv2d:separableConv2d$1,setdiff1dAsync,sigmoid:sigmoid$2,sign:sign$3,signal,sin:sin$3,sinh:sinh$2,slice:slice$2,slice1d,slice2d,slice3d,slice4d,softmax:softmax$3,softplus:softplus$2,spaceToBatchND:spaceToBatchND$2,sparse:sparse$1,sparseToDense:sparseToDense$2,spectral:spectral$1,split:split$2,sqrt:sqrt$4,square:square$3,squaredDifference:squaredDifference$2,squeeze,stack,step:step$2,stridedSlice:stridedSlice$2,string:string$2,sub:sub$2,sum:sum$2,tan:tan$2,tanh:tanh$2,tensor,tensor1d,tensor2d,tensor3d,tensor4d,tensor5d,tensor6d,tensorScatterUpdate:tensorScatterUpdate$2,tile:tile$3,topk,transpose:transpose$2,truncatedNormal:truncatedNormal$1,unique:unique$3,unsortedSegmentSum:unsortedSegmentSum$2,unstack,upperBound:upperBound$1,variable,where,whereAsync,zeros:zeros$2,zerosLike:zerosLike$2},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const executeOp$k=(_,$,_e,et=tfOps)=>{switch(_.op){case"BiasAdd":case"AddV2":case"Add":return[et.add(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];case"AddN":return[et.addN(getParamValue("tensors",_,$,_e))];case"FloorMod":case"Mod":return[et.mod(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];case"Mul":return[et.mul(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];case"RealDiv":case"Div":return[et.div(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];case"DivNoNan":return[et.divNoNan(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];case"FloorDiv":return[et.floorDiv(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];case"Sub":return[et.sub(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];case"Minimum":return[et.minimum(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];case"Maximum":return[et.maximum(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];case"Pow":return[et.pow(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];case"SquaredDifference":return[et.squaredDifference(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const executeOp$j=(_,$,_e,et=tfOps)=>{switch(_.op){case"Abs":case"ComplexAbs":return[et.abs(getParamValue("x",_,$,_e))];case"Acos":return[et.acos(getParamValue("x",_,$,_e))];case"Acosh":return[et.acosh(getParamValue("x",_,$,_e))];case"Asin":return[et.asin(getParamValue("x",_,$,_e))];case"Asinh":return[et.asinh(getParamValue("x",_,$,_e))];case"Atan":return[et.atan(getParamValue("x",_,$,_e))];case"Atan2":return[et.atan2(getParamValue("x",_,$,_e),getParamValue("y",_,$,_e))];case"Atanh":return[et.atanh(getParamValue("x",_,$,_e))];case"Ceil":return[et.ceil(getParamValue("x",_,$,_e))];case"Complex":return[et.complex(getParamValue("real",_,$,_e),getParamValue("imag",_,$,_e))];case"Cos":return[et.cos(getParamValue("x",_,$,_e))];case"Cosh":return[et.cosh(getParamValue("x",_,$,_e))];case"Elu":return[et.elu(getParamValue("x",_,$,_e))];case"Erf":return[et.erf(getParamValue("x",_,$,_e))];case"Exp":return[et.exp(getParamValue("x",_,$,_e))];case"Expm1":return[et.expm1(getParamValue("x",_,$,_e))];case"Floor":return[et.floor(getParamValue("x",_,$,_e))];case"Log":return[et.log(getParamValue("x",_,$,_e))];case"Log1p":return[et.log1p(getParamValue("x",_,$,_e))];case"Imag":return[et.imag(getParamValue("x",_,$,_e))];case"Neg":return[et.neg(getParamValue("x",_,$,_e))];case"Reciprocal":return[et.reciprocal(getParamValue("x",_,$,_e))];case"Real":return[et.real(getParamValue("x",_,$,_e))];case"Relu":return[et.relu(getParamValue("x",_,$,_e))];case"Round":return[et.round(getParamValue("x",_,$,_e))];case"Selu":return[et.selu(getParamValue("x",_,$,_e))];case"Sigmoid":return[et.sigmoid(getParamValue("x",_,$,_e))];case"Sin":return[et.sin(getParamValue("x",_,$,_e))];case"Sign":return[et.sign(getParamValue("x",_,$,_e))];case"Sinh":return[et.sinh(getParamValue("x",_,$,_e))];case"Softplus":return[et.softplus(getParamValue("x",_,$,_e))];case"Sqrt":return[et.sqrt(getParamValue("x",_,$,_e))];case"Square":return[et.square(getParamValue("x",_,$,_e))];case"Tanh":return[et.tanh(getParamValue("x",_,$,_e))];case"Tan":return[et.tan(getParamValue("x",_,$,_e))];case"ClipByValue":return[et.clipByValue(getParamValue("x",_,$,_e),getParamValue("clipValueMin",_,$,_e),getParamValue("clipValueMax",_,$,_e))];case"Relu6":return[et.relu6(getParamValue("x",_,$,_e))];case"Rsqrt":return[et.rsqrt(getTensor(_.inputNames[0],$,_e))];case"LeakyRelu":return[et.leakyRelu(getParamValue("x",_,$,_e),getParamValue("alpha",_,$,_e))];case"Prelu":return[et.prelu(getParamValue("x",_,$,_e),getParamValue("alpha",_,$,_e))];case"IsNan":return[et.isNaN(getTensor(_.inputNames[0],$,_e))];case"IsInf":return[et.isInf(getTensor(_.inputNames[0],$,_e))];case"IsFinite":return[et.isFinite(getTensor(_.inputNames[0],$,_e))];default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function assertShapesMatchAllowUndefinedSize(_,$,_e=""){if(!(typeof _=="number"||typeof $=="number")){assert$1(_.length===$.length,()=>_e+` Shapes ${_} and ${$} must match`);for(let et=0;et<_.length;et++){const tt=_[et],rt=$[et];assert$1(tt<0||rt<0||tt===rt,()=>_e+` Shapes ${_} and ${$} must match`)}}}function fullDefinedShape(_){return!(typeof _=="number"||_.some($=>$<0))}function inferElementShape(_,$,_e){let et=mergeElementShape(_,_e);const tt=!fullDefinedShape(et);if(tt&&$.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${et}`);if(tt&&$.forEach(rt=>{et=mergeElementShape(rt.shape,et)}),!fullDefinedShape(et))throw new Error(`Non-fully-defined elementShape: ${et}`);return et}function mergeElementShape(_,$){if(typeof _=="number")return $;if(typeof $=="number")return _;if(_.length!==$.length)throw new Error(`Incompatible ranks during merge: ${_} vs. ${$}`);const _e=[];for(let et=0;et<_.length;++et){const tt=_[et],rt=$[et];if(tt>=0&&rt>=0&&tt!==rt)throw new Error(`Incompatible shape during merge: ${_} vs. ${$}`);_e[et]=tt>=0?tt:rt}return _e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TensorArray{constructor($,_e,et,tt,rt,nt,it){this.name=$,this.dtype=_e,this.maxSize=et,this.elementShape=tt,this.identicalElementShapes=rt,this.dynamicSize=nt,this.clearAfterRead=it,this.tensors=[],this.closed_=!1,this.idTensor=scalar(0),keep(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose($){this.tensors.forEach(_e=>{($==null||!$.has(_e.tensor.id))&&_e.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read($){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if($<0||$>=this.size())throw new Error(`Tried to read from index ${$}, but array size is: ${this.size()}`);const _e=this.tensors[$];if(_e.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${$} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(_e.cleared=!0),_e.read=!0,_e.tensor}readMany($){return $.map(_e=>this.read(_e))}write($,_e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if($<0||!this.dynamicSize&&$>=this.maxSize)throw new Error(`Tried to write to index ${$}, but array is not resizeable and size is: ${this.maxSize}`);const et=this.tensors[$]||{};if(_e.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${$},
          because the value dtype is ${_e.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=_e.shape),assertShapesMatchAllowUndefinedSize(this.elementShape,_e.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${$}.`),et.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${$}, because it has already been read.`);if(et.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${$}, because it has already been written.`);et.tensor=_e,keep(_e),et.written=!0,this.tensors[$]=et}writeMany($,_e){if($.length!==_e.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${$.length} is not the same as tensors size: ${_e.length}.`);$.forEach((et,tt)=>this.write(et,_e[tt]))}gather($,_e){if(_e&&_e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${_e}`);if($)$=$.slice(0,this.size());else{$=[];for(let tt=0;tt<this.size();tt++)$.push(tt)}if($.length===0)return tensor([],[0].concat(this.elementShape));const et=this.readMany($);return assertShapesMatchAllowUndefinedSize(this.elementShape,et[0].shape,"TensorArray shape mismatch: "),stack(et,0)}concat($){if($&&$!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${$}`);if(this.size()===0)return tensor([],[0].concat(this.elementShape));const _e=[];for(let tt=0;tt<this.size();tt++)_e.push(tt);const et=this.readMany(_e);return assertShapesMatchAllowUndefinedSize(this.elementShape,et[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${et[0].shape})`),concat$2(et,0)}scatter($,_e){if(_e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${_e.dtype}`);if($.length!==_e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${$.length} vs. ${_e.shape[0]}`);const et=Math.max(...$);if(!this.dynamicSize&&et>=this.maxSize)throw new Error(`Max index must be < array size (${et}  vs. ${this.maxSize})`);this.writeMany($,unstack(_e,0))}split($,_e){if(_e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${_e.dtype}`);let et=0;const tt=$.map(st=>(et+=st,et));if(et!==_e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${et}, and tensor's shape is: ${_e.shape}`);if(!this.dynamicSize&&$.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${$.length}), and the TensorArray is not marked as dynamically resizeable`);const rt=et===0?0:_e.size/et,nt=[];tidy(()=>{_e=reshape$3(_e,[1,et,rt]);for(let st=0;st<$.length;++st){const ot=[0,st===0?0:tt[st-1],0],dt=[1,$[st],rt];nt[st]=reshape$3(slice$2(_e,ot,dt),this.elementShape)}return nt});const it=[];for(let st=0;st<$.length;st++)it[st]=st;this.writeMany(it,nt)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TensorList{get id(){return this.idTensor.id}constructor($,_e,et,tt=-1){this.tensors=$,this.elementShape=_e,this.elementDtype=et,$!=null&&$.forEach(rt=>{if(et!==rt.dtype)throw new Error(`Invalid data types; op elements ${et}, but list elements ${rt.dtype}`);assertShapesMatchAllowUndefinedSize(_e,rt.shape,"TensorList shape mismatch: "),keep(rt)}),this.idTensor=scalar(0),this.maxNumElements=tt,keep(this.idTensor)}copy(){return new TensorList([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose($){this.tensors.forEach(_e=>{($==null||!$.has(_e.id))&&_e.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack($,_e,et=-1){if(_e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${_e}, but list elements ${this.elementDtype}`);if(et!==-1&&this.tensors.length!==et)throw new Error(`Operation expected a list with ${et} elements but got a list with ${this.tensors.length} elements.`);assertShapesMatchAllowUndefinedSize($,this.elementShape,"TensorList shape mismatch: ");const tt=inferElementShape(this.elementShape,this.tensors,$);return tidy(()=>{const rt=this.tensors.map(nt=>reshape$3(nt,tt));return stack(rt,0)})}popBack($,_e){if(_e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${_e}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const et=inferElementShape(this.elementShape,this.tensors,$),tt=this.tensors.pop();return tt.kept=!1,assertShapesMatchAllowUndefinedSize(tt.shape,$,"TensorList shape mismatch: "),reshape$3(tt,et)}pushBack($){if($.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${$.dtype}, but list elements ${this.elementDtype}`);if(assertShapesMatchAllowUndefinedSize($.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");keep($),this.tensors.push($)}resize($){if($<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${$}`);if(this.maxNumElements!==-1&&$>this.maxNumElements)throw new Error(`TensorListResize input size ${$} is greater maxNumElement ${this.maxNumElements}.`);const _e=new TensorList([],this.elementShape,this.elementDtype,this.maxNumElements);_e.tensors.length=$;for(let et=0;et<Math.min(this.tensors.length,$);++et)_e.tensors[et]=this.tensors[et];return _e}getItem($,_e,et){if(et!==this.elementDtype)throw new Error(`Invalid data types; op elements ${et}, but list elements ${this.elementDtype}`);if($<0||$>this.tensors.length)throw new Error(`Trying to access element ${$} in a list with ${this.tensors.length} elements.`);if(this.tensors[$]==null)throw new Error(`element at index ${$} is null.`);assertShapesMatchAllowUndefinedSize(this.tensors[$].shape,_e,"TensorList shape mismatch: ");const tt=inferElementShape(this.elementShape,this.tensors,_e);return reshape$3(this.tensors[$],tt)}setItem($,_e){if(_e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${_e.dtype}, but list elements ${this.elementDtype}`);if($<0||this.maxNumElements!==-1&&$>=this.maxNumElements)throw new Error(`Trying to set element ${$} in a list with max ${this.maxNumElements} elements.`);assertShapesMatchAllowUndefinedSize(this.elementShape,_e.shape,"TensorList shape mismatch: "),keep(_e),this.tensors[$]!=null&&(this.tensors[$].kept=!1),this.tensors[$]=_e}gather($,_e,et){if(_e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${_e}, but list elements ${this.elementDtype}`);assertShapesMatchAllowUndefinedSize(this.elementShape,et,"TensorList shape mismatch: "),$=$.slice(0,this.size());const tt=inferElementShape(this.elementShape,this.tensors,et);return $.length===0?tensor([],[0].concat(tt)):tidy(()=>{const rt=$.map(nt=>reshape$3(this.tensors[nt],tt));return stack(rt,0)})}concat($,_e){if($&&$!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${$}`);assertShapesMatchAllowUndefinedSize(this.elementShape,_e,"TensorList shape mismatch: ");const et=inferElementShape(this.elementShape,this.tensors,_e);return this.size()===0?tensor([],[0].concat(et)):tidy(()=>{const tt=this.tensors.map(rt=>reshape$3(rt,et));return concat$2(tt,0)})}}function fromTensor(_,$,_e){const et=_.dtype;if(_.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${_.shape}`);if(_.dtype!==_e)throw new Error(`Invalid data types; op elements ${_.dtype}, but list elements ${_e}`);const tt=_.shape.slice(1);assertShapesMatchAllowUndefinedSize(tt,$,"TensorList shape mismatch: ");const rt=unstack(_);return new TensorList(rt,$,et)}function reserve(_,$,_e,et){return new TensorList([],_,$,et)}function scatter(_,$,_e,et){if($.length!==_.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${$.length} vs. ${_.shape[0]}`);const tt=Math.max(...$);if(et!=null&&et!==-1&&tt>=et)throw new Error(`Max index must be < array size (${tt}  vs. ${et})`);const rt=new TensorList([],_e,_.dtype,et),nt=unstack(_,0);return $.forEach((it,st)=>{rt.setItem(it,nt[st])}),rt}function split$1(_,$,_e){let et=0;const tt=$.map(ot=>(et+=ot,et));if(et!==_.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${et}, and tensor's shape is: ${_.shape}`);const rt=_.shape.slice(1),nt=mergeElementShape(rt,_e),it=et===0?0:_.size/et,st=tidy(()=>{const ot=[];_=reshape$3(_,[1,et,it]);for(let dt=0;dt<$.length;++dt){const yt=[0,dt===0?0:tt[dt-1],0],vt=[1,$[dt],it];ot[dt]=reshape$3(slice$2(_,yt,vt),nt)}return _.dispose(),ot}),at=new TensorList([],_e,_.dtype,$.length);for(let ot=0;ot<st.length;ot++)at.setItem(ot,st[ot]);return at}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const executeOp$i=async(_,$,_e)=>{switch(_.op){case"If":case"StatelessIf":{const et=getParamValue("thenBranch",_,$,_e),tt=getParamValue("elseBranch",_,$,_e),rt=getParamValue("cond",_,$,_e),nt=getParamValue("args",_,$,_e);return(await rt.data())[0]?_e.functionMap[et].executeFunctionAsync(nt,_e.tensorArrayMap,_e.tensorListMap):_e.functionMap[tt].executeFunctionAsync(nt,_e.tensorArrayMap,_e.tensorListMap)}case"While":case"StatelessWhile":{const et=getParamValue("body",_,$,_e),tt=getParamValue("cond",_,$,_e),rt=getParamValue("args",_,$,_e),nt=await _e.functionMap[tt].executeFunctionAsync(rt,_e.tensorArrayMap,_e.tensorListMap),it=rt.map(ot=>ot.id);let st=await nt[0].data();nt.forEach(ot=>{!ot.kept&&it.indexOf(ot.id)===-1&&ot.dispose()});let at=rt;for(;st[0];){const ot=at;at=await _e.functionMap[et].executeFunctionAsync(at,_e.tensorArrayMap,_e.tensorListMap);const dt=at.map(yt=>yt.id);ot.forEach(yt=>{!yt.kept&&it.indexOf(yt.id)===-1&&dt.indexOf(yt.id)===-1&&yt.dispose()});const ht=await _e.functionMap[tt].executeFunctionAsync(at,_e.tensorArrayMap,_e.tensorListMap);st=await ht[0].data(),ht.forEach(yt=>{!yt.kept&&it.indexOf(yt.id)===-1&&dt.indexOf(yt.id)===-1&&yt.dispose()})}return at}case"LoopCond":{const et=getParamValue("pred",_,$,_e);return[cloneTensor(et)]}case"Switch":{const et=getParamValue("pred",_,$,_e);let tt=getParamValue("data",_,$,_e);return tt.kept||(tt=cloneTensor(tt)),(await et.data())[0]?[void 0,tt]:[tt,void 0]}case"Merge":{const et=_.inputNames.find(tt=>getTensor(tt,$,_e)!==void 0);if(et){const tt=getTensor(et,$,_e);return[cloneTensor(tt)]}return}case"Enter":{const et=getParamValue("frameName",_,$,_e),tt=getParamValue("tensor",_,$,_e);return _e.enterFrame(et),[cloneTensor(tt)]}case"Exit":{const et=getParamValue("tensor",_,$,_e);return _e.exitFrame(),[cloneTensor(et)]}case"NextIteration":{const et=getParamValue("tensor",_,$,_e);return _e.nextIteration(),[cloneTensor(et)]}case"TensorArrayV3":{const et=getParamValue("size",_,$,_e),tt=getParamValue("dtype",_,$,_e),rt=getParamValue("elementShape",_,$,_e),nt=getParamValue("dynamicSize",_,$,_e),it=getParamValue("clearAfterRead",_,$,_e),st=getParamValue("identicalElementShapes",_,$,_e),at=getParamValue("name",_,$,_e),ot=new TensorArray(at,tt,et,rt,st,nt,it);return _e.addTensorArray(ot),[ot.idTensor,scalar(1)]}case"TensorArrayWriteV3":{const et=getParamValue("tensorArrayId",_,$,_e),tt=getParamValue("index",_,$,_e),rt=getParamValue("tensor",_,$,_e),nt=_e.getTensorArray(et.id);return nt.write(tt,rt),[nt.idTensor]}case"TensorArrayReadV3":{const et=getParamValue("tensorArrayId",_,$,_e),tt=getParamValue("index",_,$,_e);return[_e.getTensorArray(et.id).read(tt)]}case"TensorArrayGatherV3":{const et=getParamValue("tensorArrayId",_,$,_e),tt=getParamValue("indices",_,$,_e),rt=getParamValue("dtype",_,$,_e);return[_e.getTensorArray(et.id).gather(tt,rt)]}case"TensorArrayScatterV3":{const et=getParamValue("tensorArrayId",_,$,_e),tt=getParamValue("indices",_,$,_e),rt=getParamValue("tensor",_,$,_e),nt=_e.getTensorArray(et.id);return nt.scatter(tt,rt),[nt.idTensor]}case"TensorArrayConcatV3":{const et=getParamValue("tensorArrayId",_,$,_e),tt=_e.getTensorArray(et.id),rt=getParamValue("dtype",_,$,_e);return[tt.concat(rt)]}case"TensorArraySplitV3":{const et=getParamValue("tensorArrayId",_,$,_e),tt=getParamValue("tensor",_,$,_e),rt=getParamValue("lengths",_,$,_e),nt=_e.getTensorArray(et.id);return nt.split(rt,tt),[nt.idTensor]}case"TensorArraySizeV3":{const et=getParamValue("tensorArrayId",_,$,_e),tt=_e.getTensorArray(et.id);return[scalar(tt.size(),"int32")]}case"TensorArrayCloseV3":{const et=getParamValue("tensorArrayId",_,$,_e),tt=_e.getTensorArray(et.id);return tt.clearAndClose(),[tt.idTensor]}case"TensorListSetItem":{const et=getParamValue("tensorListId",_,$,_e),tt=getParamValue("index",_,$,_e),rt=getParamValue("tensor",_,$,_e),nt=_e.getTensorList(et.id);return nt.setItem(tt,rt),[nt.idTensor]}case"TensorListGetItem":{const et=getParamValue("tensorListId",_,$,_e),tt=getParamValue("index",_,$,_e),rt=getParamValue("elementShape",_,$,_e),nt=getParamValue("elementDType",_,$,_e);return[_e.getTensorList(et.id).getItem(tt,rt,nt)]}case"TensorListScatterV2":case"TensorListScatter":{const et=getParamValue("indices",_,$,_e),tt=getParamValue("tensor",_,$,_e),rt=getParamValue("elementShape",_,$,_e),nt=getParamValue("numElements",_,$,_e),it=scatter(tt,et,rt,nt);return _e.addTensorList(it),[it.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const et=getParamValue("elementShape",_,$,_e),tt=getParamValue("elementDType",_,$,_e);let rt;_.op==="TensorListReserve"?rt="numElements":rt="maxNumElements";const nt=getParamValue(rt,_,$,_e),it=_.op==="TensorListReserve"?-1:nt,st=reserve(et,tt,nt,it);return _e.addTensorList(st),[st.idTensor]}case"TensorListGather":{const et=getParamValue("tensorListId",_,$,_e),tt=getParamValue("indices",_,$,_e),rt=getParamValue("elementShape",_,$,_e),nt=getParamValue("elementDType",_,$,_e);return[_e.getTensorList(et.id).gather(tt,nt,rt)]}case"TensorListStack":{const et=getParamValue("tensorListId",_,$,_e),tt=getParamValue("elementShape",_,$,_e),rt=getParamValue("elementDType",_,$,_e),nt=getParamValue("numElements",_,$,_e);return[_e.getTensorList(et.id).stack(tt,rt,nt)]}case"TensorListFromTensor":{const et=getParamValue("tensor",_,$,_e),tt=getParamValue("elementShape",_,$,_e),rt=getParamValue("elementDType",_,$,_e),nt=fromTensor(et,tt,rt);return _e.addTensorList(nt),[nt.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const et=getParamValue("tensorListId",_,$,_e),tt=_e.getTensorList(et.id),rt=getParamValue("dtype",_,$,_e),nt=getParamValue("elementShape",_,$,_e);return[tt.concat(rt,nt)]}case"TensorListPushBack":{const et=getParamValue("tensorListId",_,$,_e),tt=getParamValue("tensor",_,$,_e),rt=_e.getTensorList(et.id);return rt.pushBack(tt),[rt.idTensor]}case"TensorListPopBack":{const et=getParamValue("tensorListId",_,$,_e),tt=getParamValue("elementShape",_,$,_e),rt=getParamValue("elementDType",_,$,_e);return[_e.getTensorList(et.id).popBack(tt,rt)]}case"TensorListSplit":{const et=getParamValue("tensor",_,$,_e),tt=getParamValue("elementShape",_,$,_e),rt=getParamValue("lengths",_,$,_e),nt=split$1(et,rt,tt);return _e.addTensorList(nt),[nt.idTensor]}case"TensorListLength":{const et=getParamValue("tensorListId",_,$,_e),tt=_e.getTensorList(et.id);return[scalar(tt.size(),"int32")]}case"TensorListResize":{const et=getParamValue("tensorListId",_,$,_e),tt=getParamValue("size",_,$,_e),nt=_e.getTensorList(et.id).resize(tt);return _e.addTensorList(nt),[nt.idTensor]}default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedConvAndDepthWiseParams(_,$,_e){const[et,tt]=getParamValue("fusedOps",_,$,_e),rt=et==="biasadd",nt=!rt,it=tt==="prelu",st=et==="fusedbatchnorm",at=getParamValue("numArgs",_,$,_e);if(rt){if(it&&at!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!it&&rt&&at!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(st)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const ot=getParamValue("strides",_,$,_e),dt=getPadding(_,$,_e),ht=getParamValue("dataFormat",_,$,_e).toUpperCase(),yt=getParamValue("dilations",_,$,_e);let[vt,xt]=getParamValue("args",_,$,_e);nt&&(xt=vt,vt=void 0);const wt=getParamValue("leakyreluAlpha",_,$,_e);return{stride:ot,pad:dt,dataFormat:ht,dilations:yt,biasArg:vt,preluArg:xt,activationFunc:tt,leakyreluAlpha:wt}}const executeOp$h=(_,$,_e,et=tfOps)=>{switch(_.op){case"Conv1D":{const tt=getParamValue("stride",_,$,_e),rt=getParamValue("pad",_,$,_e),nt=getParamValue("dataFormat",_,$,_e).toUpperCase(),it=getParamValue("dilation",_,$,_e);return[et.conv1d(getParamValue("x",_,$,_e),getParamValue("filter",_,$,_e),tt,rt,nt,it)]}case"Conv2D":{const tt=getParamValue("strides",_,$,_e),rt=getPadding(_,$,_e),nt=getParamValue("dataFormat",_,$,_e).toUpperCase(),it=getParamValue("dilations",_,$,_e);return[et.conv2d(getParamValue("x",_,$,_e),getParamValue("filter",_,$,_e),[tt[1],tt[2]],rt,nt,[it[1],it[2]])]}case"_FusedConv2D":{const{stride:tt,pad:rt,dataFormat:nt,dilations:it,biasArg:st,preluArg:at,activationFunc:ot,leakyreluAlpha:dt}=fusedConvAndDepthWiseParams(_,$,_e);return[et.fused.conv2d({x:getParamValue("x",_,$,_e),filter:getParamValue("filter",_,$,_e),strides:[tt[1],tt[2]],pad:rt,dataFormat:nt,dilations:[it[1],it[2]],bias:st,activation:ot,preluActivationWeights:at,leakyreluAlpha:dt})]}case"FusedDepthwiseConv2dNative":{const{stride:tt,pad:rt,dataFormat:nt,dilations:it,biasArg:st,preluArg:at,activationFunc:ot,leakyreluAlpha:dt}=fusedConvAndDepthWiseParams(_,$,_e);return[et.fused.depthwiseConv2d({x:getParamValue("x",_,$,_e),filter:getParamValue("filter",_,$,_e),strides:[tt[1],tt[2]],pad:rt,dataFormat:nt,dilations:[it[1],it[2]],bias:st,activation:ot,preluActivationWeights:at,leakyreluAlpha:dt})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const tt=getParamValue("outputShape",_,$,_e),rt=getParamValue("strides",_,$,_e),nt=getPadding(_,$,_e);return[et.conv2dTranspose(getParamValue("x",_,$,_e),getParamValue("filter",_,$,_e),tt,[rt[1],rt[2]],nt)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const tt=getParamValue("strides",_,$,_e),rt=getPadding(_,$,_e),nt=getParamValue("dilations",_,$,_e),it=getParamValue("dataFormat",_,$,_e).toUpperCase();return[et.depthwiseConv2d(getParamValue("input",_,$,_e),getParamValue("filter",_,$,_e),[tt[1],tt[2]],rt,it,[nt[1],nt[2]])]}case"Conv3D":{const tt=getParamValue("strides",_,$,_e),rt=getParamValue("pad",_,$,_e),nt=getParamValue("dataFormat",_,$,_e).toUpperCase(),it=getParamValue("dilations",_,$,_e);return[et.conv3d(getParamValue("x",_,$,_e),getParamValue("filter",_,$,_e),[tt[1],tt[2],tt[3]],rt,nt,[it[1],it[2],it[3]])]}case"AvgPool":{const tt=getParamValue("strides",_,$,_e),rt=getParamValue("pad",_,$,_e),nt=getParamValue("kernelSize",_,$,_e);return[et.avgPool(getParamValue("x",_,$,_e),[nt[1],nt[2]],[tt[1],tt[2]],rt)]}case"MaxPool":{const tt=getParamValue("strides",_,$,_e),rt=getParamValue("pad",_,$,_e),nt=getParamValue("kernelSize",_,$,_e);return[et.maxPool(getParamValue("x",_,$,_e),[nt[1],nt[2]],[tt[1],tt[2]],rt)]}case"MaxPoolWithArgmax":{const tt=getParamValue("strides",_,$,_e),rt=getParamValue("pad",_,$,_e),nt=getParamValue("kernelSize",_,$,_e),it=getParamValue("includeBatchInIndex",_,$,_e),{result:st,indexes:at}=et.maxPoolWithArgmax(getParamValue("x",_,$,_e),[nt[1],nt[2]],[tt[1],tt[2]],rt,it);return[st,at]}case"AvgPool3D":{const tt=getParamValue("strides",_,$,_e),rt=getParamValue("pad",_,$,_e),nt=getParamValue("kernelSize",_,$,_e);return[et.avgPool3d(getParamValue("x",_,$,_e),[nt[1],nt[2],nt[3]],[tt[1],tt[2],tt[3]],rt)]}case"MaxPool3D":{const tt=getParamValue("strides",_,$,_e),rt=getParamValue("pad",_,$,_e),nt=getParamValue("kernelSize",_,$,_e);return[et.maxPool3d(getParamValue("x",_,$,_e),[nt[1],nt[2],nt[3]],[tt[1],tt[2],tt[3]],rt)]}case"Dilation2D":{const tt=getParamValue("strides",_,$,_e),rt=getParamValue("pad",_,$,_e),nt=getParamValue("dilations",_,$,_e),it=tt[1],st=tt[2],at=nt[1],ot=nt[2];return[et.dilation2d(getParamValue("x",_,$,_e),getParamValue("filter",_,$,_e),[it,st],rt,[at,ot],"NHWC")]}default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const executeOp$g=(_,$,_e,et=tfOps)=>{switch(_.op){case"Fill":{const tt=getParamValue("shape",_,$,_e),rt=getParamValue("dtype",_,$,_e),nt=getParamValue("value",_,$,_e);return[et.fill(tt,nt,rt)]}case"LinSpace":{const tt=getParamValue("start",_,$,_e),rt=getParamValue("stop",_,$,_e),nt=getParamValue("num",_,$,_e);return[et.linspace(tt,rt,nt)]}case"Multinomial":{const tt=getParamValue("logits",_,$,_e),rt=getParamValue("numSamples",_,$,_e),nt=getParamValue("seed",_,$,_e);return[et.multinomial(tt,rt,nt)]}case"OneHot":{const tt=getParamValue("indices",_,$,_e),rt=getParamValue("depth",_,$,_e),nt=getParamValue("onValue",_,$,_e),it=getParamValue("offValue",_,$,_e),st=getParamValue("dtype",_,$,_e);return[et.oneHot(tt,rt,nt,it,st)]}case"Ones":return[et.ones(getParamValue("shape",_,$,_e),getParamValue("dtype",_,$,_e))];case"OnesLike":return[et.onesLike(getParamValue("x",_,$,_e))];case"RandomStandardNormal":return[et.randomStandardNormal(getParamValue("shape",_,$,_e),getParamValue("dtype",_,$,_e),getParamValue("seed",_,$,_e))];case"RandomUniform":return[et.randomUniform(getParamValue("shape",_,$,_e),getParamValue("minval",_,$,_e),getParamValue("maxval",_,$,_e),getParamValue("dtype",_,$,_e))];case"RandomUniformInt":return[et.randomUniformInt(getParamValue("shape",_,$,_e),getParamValue("minval",_,$,_e),getParamValue("maxval",_,$,_e),getParamValue("seed",_,$,_e))];case"Range":{const tt=getParamValue("start",_,$,_e),rt=getParamValue("stop",_,$,_e),nt=getParamValue("step",_,$,_e);return[et.range(tt,rt,nt,getParamValue("dtype",_,$,_e))]}case"TruncatedNormal":{const tt=getParamValue("shape",_,$,_e),rt=getParamValue("mean",_,$,_e),nt=getParamValue("stdDev",_,$,_e),it=getParamValue("seed",_,$,_e);return[et.truncatedNormal(tt,rt,nt,getParamValue("dtype",_,$,_e),it)]}case"Zeros":return[et.zeros(getParamValue("shape",_,$,_e),getParamValue("dtype",_,$,_e))];case"ZerosLike":return[et.zerosLike(getParamValue("x",_,$,_e))];default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nmsParams(_,$,_e){const et=getParamValue("boxes",_,$,_e),tt=getParamValue("scores",_,$,_e),rt=getParamValue("maxOutputSize",_,$,_e),nt=getParamValue("iouThreshold",_,$,_e),it=getParamValue("scoreThreshold",_,$,_e),st=getParamValue("softNmsSigma",_,$,_e);return{boxes:et,scores:tt,maxOutputSize:rt,iouThreshold:nt,scoreThreshold:it,softNmsSigma:st}}const executeOp$f=async(_,$,_e,et,tt=tfOps)=>{switch(_.op){case"NonMaxSuppressionV5":{const{boxes:rt,scores:nt,maxOutputSize:it,iouThreshold:st,scoreThreshold:at,softNmsSigma:ot}=nmsParams(_,$,_e),dt=await tt.image.nonMaxSuppressionWithScoreAsync(rt,nt,it,st,at,ot);return[dt.selectedIndices,dt.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:rt,scores:nt,maxOutputSize:it,iouThreshold:st,scoreThreshold:at}=nmsParams(_,$,_e),ot=getParamValue("padToMaxOutputSize",_,$,_e),dt=await tt.image.nonMaxSuppressionPaddedAsync(rt,nt,it,st,at,ot);return[dt.selectedIndices,dt.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:rt,scores:nt,maxOutputSize:it,iouThreshold:st,scoreThreshold:at}=nmsParams(_,$,_e);return[await tt.image.nonMaxSuppressionAsync(rt,nt,it,st,at)]}case"Where":{const rt=tt.cast(getParamValue("condition",_,$,_e),"bool"),nt=[await tt.whereAsync(rt)];return rt.dispose(),nt}case"ListDiff":return tt.setdiff1dAsync(getParamValue("x",_,$,_e),getParamValue("y",_,$,_e));default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const executeOp$e=(_,$,_e,et=tfOps)=>{switch(_.op){case"LowerBound":{const tt=getParamValue("sortedSequence",_,$,_e),rt=getParamValue("values",_,$,_e);return[et.lowerBound(tt,rt)]}case"TopKV2":{const tt=getParamValue("x",_,$,_e),rt=getParamValue("k",_,$,_e),nt=getParamValue("sorted",_,$,_e),it=et.topk(tt,rt,nt);return[it.values,it.indices]}case"UpperBound":{const tt=getParamValue("sortedSequence",_,$,_e),rt=getParamValue("values",_,$,_e);return[et.upperBound(tt,rt)]}case"Unique":{const tt=getParamValue("x",_,$,_e),rt=et.unique(tt);return[rt.values,rt.indices]}case"UniqueV2":{const tt=getParamValue("x",_,$,_e),rt=getParamValue("axis",_,$,_e),nt=et.unique(tt,rt);return[nt.values,nt.indices]}default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const executeOp$d=(_,$,_e,et=tfOps)=>{switch(_.op){case"Const":return $[_.name];case"PlaceholderWithDefault":const tt=getParamValue("default",_,$,_e);return[getTensor(_.name,$,_e)||tt];case"Placeholder":return[getTensor(_.name,$,_e)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const ot=getParamValue("x",_,$,_e);return[cloneTensor(ot)]}case"IdentityN":return getParamValue("x",_,$,_e).map(ot=>cloneTensor(ot));case"Snapshot":const rt=getParamValue("x",_,$,_e);return[cloneTensor(rt)];case"Shape":return[et.tensor1d(getParamValue("x",_,$,_e).shape,"int32")];case"ShapeN":return getParamValue("x",_,$,_e).map(ot=>et.tensor1d(ot.shape));case"Size":return[et.scalar(getParamValue("x",_,$,_e).size,"int32")];case"Rank":return[et.scalar(getParamValue("x",_,$,_e).rank,"int32")];case"NoOp":return[et.scalar(1)];case"Print":const nt=getParamValue("x",_,$,_e),it=getParamValue("data",_,$,_e),st=getParamValue("message",_,$,_e),at=getParamValue("summarize",_,$,_e);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(st);for(let ot=0;ot<it.length;ot++)console.log(Array.prototype.slice.call(it[ot].dataSync()).slice(0,at));return[nt];default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HashTable{get id(){return this.handle.id}constructor($,_e){this.keyDType=$,this.valueDType=_e,this.handle=scalar(0),this.tensorMap=new Map,keep(this.handle)}clearAndClose(){this.tensorMap.forEach($=>$.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return scalar(this.size(),"int32")}async import($,_e){this.checkKeyAndValueTensor($,_e);const et=await $.data();return this.tensorMap.forEach(tt=>tt.dispose()),this.tensorMap.clear(),tidy(()=>{const tt=unstack(_e),rt=et.length,nt=tt.length;assert$1(rt===nt,()=>`The number of elements doesn't match, keys has ${rt} elements, the values has ${nt} elements.`);for(let it=0;it<rt;it++){const st=et[it],at=tt[it];keep(at),this.tensorMap.set(st,at)}return this.handle})}async find($,_e){this.checkKeyAndValueTensor($,_e);const et=await $.data();return tidy(()=>{const tt=[];for(let rt=0;rt<et.length;rt++){const nt=et[rt],it=this.findWithDefault(nt,_e);tt.push(it)}return stack(tt)})}findWithDefault($,_e){const et=this.tensorMap.get($);return et??_e}checkKeyAndValueTensor($,_e){if($.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${$.dtype}`);if(_e.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${_e.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const executeOp$c=async(_,$,_e,et)=>{switch(_.op){case"HashTable":case"HashTableV2":{const tt=et.getHashTableHandleByName(_.name);if(tt!=null)return[tt];{const rt=getParamValue("keyDType",_,$,_e),nt=getParamValue("valueDType",_,$,_e),it=new HashTable(rt,nt);return et.addHashTable(_.name,it),[it.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const tt=getParamValue("tableHandle",_,$,_e,et),rt=getParamValue("keys",_,$,_e),nt=getParamValue("values",_,$,_e);return[await et.getHashTableById(tt.id).import(rt,nt)]}case"LookupTableFind":case"LookupTableFindV2":{const tt=getParamValue("tableHandle",_,$,_e,et),rt=getParamValue("keys",_,$,_e),nt=getParamValue("defaultValue",_,$,_e);return[await et.getHashTableById(tt.id).find(rt,nt)]}case"LookupTableSize":case"LookupTableSizeV2":{const tt=getParamValue("tableHandle",_,$,_e,et);return[et.getHashTableById(tt.id).tensorSize()]}default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const executeOp$b=(_,$,_e,et=tfOps)=>{switch(_.op){case"ResizeBilinear":{const tt=getParamValue("images",_,$,_e),rt=getParamValue("size",_,$,_e),nt=getParamValue("alignCorners",_,$,_e),it=getParamValue("halfPixelCenters",_,$,_e);return[et.image.resizeBilinear(tt,[rt[0],rt[1]],nt,it)]}case"ResizeNearestNeighbor":{const tt=getParamValue("images",_,$,_e),rt=getParamValue("size",_,$,_e),nt=getParamValue("alignCorners",_,$,_e),it=getParamValue("halfPixelCenters",_,$,_e);return[et.image.resizeNearestNeighbor(tt,[rt[0],rt[1]],nt,it)]}case"CropAndResize":{const tt=getParamValue("image",_,$,_e),rt=getParamValue("boxes",_,$,_e),nt=getParamValue("boxInd",_,$,_e),it=getParamValue("cropSize",_,$,_e),st=getParamValue("method",_,$,_e),at=getParamValue("extrapolationValue",_,$,_e);return[et.image.cropAndResize(tt,rt,nt,it,st,at)]}case"ImageProjectiveTransformV3":{const tt=getParamValue("images",_,$,_e),rt=getParamValue("transforms",_,$,_e),nt=getParamValue("outputShape",_,$,_e),it=getParamValue("fillValue",_,$,_e),st=getParamValue("interpolation",_,$,_e),at=getParamValue("fillMode",_,$,_e);return[et.image.transform(tt,rt,st.toLowerCase(),at.toLowerCase(),it,nt)]}default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const executeOp$a=(_,$,_e,et=tfOps)=>{switch(_.op){case"Equal":return[et.equal(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];case"NotEqual":return[et.notEqual(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];case"Greater":return[et.greater(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];case"GreaterEqual":return[et.greaterEqual(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];case"Less":return[et.less(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];case"LessEqual":return[et.lessEqual(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];case"LogicalAnd":return[et.logicalAnd(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];case"LogicalNot":return[et.logicalNot(getParamValue("a",_,$,_e))];case"LogicalOr":return[et.logicalOr(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];case"Select":case"SelectV2":return[et.where(getParamValue("condition",_,$,_e),getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];case"BitwiseAnd":return[et.bitwiseAnd(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e))];default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const executeOp$9=(_,$,_e,et=tfOps)=>{switch(_.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[et.matMul(getParamValue("a",_,$,_e),getParamValue("b",_,$,_e),getParamValue("transposeA",_,$,_e),getParamValue("transposeB",_,$,_e))];case"Einsum":return[et.einsum(getParamValue("equation",_,$,_e),...getParamValue("tensors",_,$,_e))];case"Transpose":return[et.transpose(getParamValue("x",_,$,_e),getParamValue("perm",_,$,_e))];case"_FusedMatMul":const[tt,rt]=getParamValue("fusedOps",_,$,_e),nt=tt==="biasadd",it=rt==="prelu",st=getParamValue("numArgs",_,$,_e),at=getParamValue("leakyreluAlpha",_,$,_e);if(nt){if(it&&st!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!it&&st!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[ot,dt]=getParamValue("args",_,$,_e);return[et.fused.matMul({a:getParamValue("a",_,$,_e),b:getParamValue("b",_,$,_e),transposeA:getParamValue("transposeA",_,$,_e),transposeB:getParamValue("transposeB",_,$,_e),bias:ot,activation:rt,preluActivationWeights:dt,leakyreluAlpha:at})];case"MatrixBandPart":return[et.linalg.bandPart(getParamValue("a",_,$,_e),getParamValue("numLower",_,$,_e),getParamValue("numUpper",_,$,_e))];default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const executeOp$8=(_,$,_e,et=tfOps)=>{switch(_.op){case"EuclideanNorm":return[et.euclideanNorm(getParamValue("x",_,$,_e),getParamValue("axis",_,$,_e),getParamValue("keepDims",_,$,_e))];case"FusedBatchNorm":case"FusedBatchNormV2":return[et.batchNorm(getParamValue("x",_,$,_e),getParamValue("mean",_,$,_e),getParamValue("variance",_,$,_e),getParamValue("offset",_,$,_e),getParamValue("scale",_,$,_e),getParamValue("epsilon",_,$,_e))];case"FusedBatchNormV3":return[et.batchNorm(getParamValue("x",_,$,_e),getParamValue("mean",_,$,_e),getParamValue("variance",_,$,_e),getParamValue("offset",_,$,_e),getParamValue("scale",_,$,_e),getParamValue("epsilon",_,$,_e))];case"LRN":return[et.localResponseNormalization(getParamValue("x",_,$,_e),getParamValue("radius",_,$,_e),getParamValue("bias",_,$,_e),getParamValue("alpha",_,$,_e),getParamValue("beta",_,$,_e))];case"Softmax":return[et.softmax(getParamValue("x",_,$,_e))];case"LogSoftmax":return[et.logSoftmax(getParamValue("x",_,$,_e))];default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const executeOp$7=(_,$,_e,et=tfOps)=>{switch(_.op){case"RaggedGather":{const{outputNestedSplits:tt,outputDenseValues:rt}=et.raggedGather(getParamValue("paramsNestedSplits",_,$,_e),getParamValue("paramsDenseValues",_,$,_e),getParamValue("indices",_,$,_e),getParamValue("outputRaggedRank",_,$,_e));return tt.concat(rt)}case"RaggedRange":{const{rtNestedSplits:tt,rtDenseValues:rt}=et.raggedRange(getParamValue("starts",_,$,_e),getParamValue("limits",_,$,_e),getParamValue("splits",_,$,_e));return[tt,rt]}case"RaggedTensorToTensor":return[et.raggedTensorToTensor(getParamValue("shape",_,$,_e),getParamValue("values",_,$,_e),getParamValue("defaultValue",_,$,_e),getParamValue("rowPartitionTensors",_,$,_e),getParamValue("rowPartitionTypes",_,$,_e))];default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const executeOp$6=(_,$,_e,et=tfOps)=>{switch(_.op){case"Max":{const it=getParamValue("axis",_,$,_e),st=getParamValue("keepDims",_,$,_e);return[et.max(getParamValue("x",_,$,_e),it,st)]}case"Mean":{const it=getParamValue("axis",_,$,_e),st=getParamValue("keepDims",_,$,_e);return[et.mean(getParamValue("x",_,$,_e),it,st)]}case"Min":{const it=getParamValue("axis",_,$,_e),st=getParamValue("keepDims",_,$,_e);return[et.min(getParamValue("x",_,$,_e),it,st)]}case"Sum":{const it=getParamValue("axis",_,$,_e),st=getParamValue("keepDims",_,$,_e);return[et.sum(getParamValue("x",_,$,_e),it,st)]}case"All":{const it=getParamValue("axis",_,$,_e),st=getParamValue("keepDims",_,$,_e);return[et.all(getParamValue("x",_,$,_e),it,st)]}case"Any":{const it=getParamValue("axis",_,$,_e),st=getParamValue("keepDims",_,$,_e);return[et.any(getParamValue("x",_,$,_e),it,st)]}case"ArgMax":{const it=getParamValue("axis",_,$,_e);return[et.argMax(getParamValue("x",_,$,_e),it)]}case"ArgMin":{const it=getParamValue("axis",_,$,_e);return[et.argMin(getParamValue("x",_,$,_e),it)]}case"Prod":{const it=getParamValue("axis",_,$,_e),st=getParamValue("keepDims",_,$,_e);return[et.prod(getParamValue("x",_,$,_e),it,st)]}case"Cumprod":{const it=getParamValue("axis",_,$,_e),st=getParamValue("exclusive",_,$,_e),at=getParamValue("reverse",_,$,_e);return[et.cumprod(getParamValue("x",_,$,_e),it,st,at)]}case"Cumsum":{const it=getParamValue("axis",_,$,_e),st=getParamValue("exclusive",_,$,_e),at=getParamValue("reverse",_,$,_e);return[et.cumsum(getParamValue("x",_,$,_e),it,st,at)]}case"Bincount":const tt=getParamValue("x",_,$,_e),rt=getParamValue("weights",_,$,_e),nt=getParamValue("size",_,$,_e);return[et.bincount(tt,rt,nt)];case"DenseBincount":{const it=getParamValue("x",_,$,_e),st=getParamValue("weights",_,$,_e),at=getParamValue("size",_,$,_e),ot=getParamValue("binaryOutput",_,$,_e);return[et.denseBincount(it,st,at,ot)]}default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const executeOp$5=(_,$,_e,et=tfOps)=>{switch(_.op){case"ConcatV2":case"Concat":{const tt=getParamValue("n",_,$,_e),rt=getParamValue("axis",_,$,_e);let nt=getParamValue("tensors",_,$,_e);return nt=nt.slice(0,tt),[et.concat(nt,rt)]}case"Gather":{const tt=getParamValue("x",_,$,_e),rt=getParamValue("indices",_,$,_e);return[et.gather(tt,et.cast(rt,"int32"),0)]}case"GatherV2":{const tt=getParamValue("axis",_,$,_e),rt=getParamValue("batchDims",_,$,_e),nt=getParamValue("x",_,$,_e),it=getParamValue("indices",_,$,_e);return[et.gather(nt,et.cast(it,"int32"),tt,rt)]}case"Reverse":{const tt=getParamValue("dims",_,$,_e),rt=[];for(let it=0;it<tt.length;it++)tt[it]&&rt.push(it);const nt=getParamValue("x",_,$,_e);return[et.reverse(nt,rt)]}case"ReverseV2":{const tt=getParamValue("axis",_,$,_e),rt=getParamValue("x",_,$,_e);return[et.reverse(rt,tt)]}case"Slice":{const tt=getParamValue("begin",_,$,_e),rt=getParamValue("size",_,$,_e);return[et.slice(getParamValue("x",_,$,_e),tt,rt)]}case"StridedSlice":{const tt=getParamValue("begin",_,$,_e),rt=getParamValue("end",_,$,_e),nt=getParamValue("strides",_,$,_e),it=getParamValue("beginMask",_,$,_e),st=getParamValue("endMask",_,$,_e),at=getParamValue("ellipsisMask",_,$,_e),ot=getParamValue("newAxisMask",_,$,_e),dt=getParamValue("shrinkAxisMask",_,$,_e),ht=getParamValue("x",_,$,_e);return[et.stridedSlice(ht,tt,rt,nt,it,st,at,ot,dt)]}case"Pack":return tidy(()=>{const tt=getParamValue("axis",_,$,_e),rt=getParamValue("tensors",_,$,_e),nt=rt[0].shape,it=et.squeeze(rt[0]).shape,st=rt.map(at=>{const ot=arraysEqual(at.shape,nt);if(!ot&&!arraysEqual(et.squeeze(at).shape,it))throw new Error("the input tensors shape does not match");return ot?at:et.reshape(at,nt)});return[et.stack(st,tt)]});case"Unpack":{const tt=getParamValue("axis",_,$,_e),rt=getParamValue("tensor",_,$,_e);return et.unstack(rt,tt)}case"Tile":{const tt=getParamValue("reps",_,$,_e);return[et.tile(getParamValue("x",_,$,_e),tt)]}case"Split":case"SplitV":{const tt=getParamValue("axis",_,$,_e),rt=getParamValue("numOrSizeSplits",_,$,_e),nt=getParamValue("x",_,$,_e);return et.split(nt,rt,tt)}case"ScatterNd":{const tt=getParamValue("indices",_,$,_e),rt=getParamValue("values",_,$,_e),nt=getParamValue("shape",_,$,_e);return[et.scatterND(tt,rt,nt)]}case"GatherNd":{const tt=getParamValue("x",_,$,_e),rt=getParamValue("indices",_,$,_e);return[et.gatherND(tt,rt)]}case"SparseToDense":{const tt=getParamValue("sparseIndices",_,$,_e),rt=getParamValue("outputShape",_,$,_e),nt=getParamValue("sparseValues",_,$,_e),it=getParamValue("defaultValue",_,$,_e);return[et.sparseToDense(tt,nt,rt,nt.dtype===it.dtype?it:et.cast(it,nt.dtype))]}case"TensorScatterUpdate":{const tt=getParamValue("indices",_,$,_e),rt=getParamValue("values",_,$,_e),nt=getParamValue("tensor",_,$,_e);return[et.tensorScatterUpdate(nt,tt,rt)]}default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const executeOp$4=(_,$,_e,et=tfOps)=>{switch(_.op){case"SparseFillEmptyRows":{const{outputIndices:tt,outputValues:rt,emptyRowIndicator:nt,reverseIndexMap:it}=et.sparse.sparseFillEmptyRows(getParamValue("indices",_,$,_e),getParamValue("values",_,$,_e),getParamValue("denseShape",_,$,_e),getParamValue("defaultValue",_,$,_e));return[tt,rt,nt,it]}case"SparseReshape":{const{outputIndices:tt,outputShape:rt}=et.sparse.sparseReshape(getParamValue("inputIndices",_,$,_e),getParamValue("inputShape",_,$,_e),getParamValue("newShape",_,$,_e));return[tt,rt]}case"SparseSegmentMean":return[et.sparse.sparseSegmentMean(getParamValue("data",_,$,_e),getParamValue("indices",_,$,_e),getParamValue("segmentIds",_,$,_e))];case"SparseSegmentSum":return[et.sparse.sparseSegmentSum(getParamValue("data",_,$,_e),getParamValue("indices",_,$,_e),getParamValue("segmentIds",_,$,_e))];default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const executeOp$3=(_,$,_e,et=tfOps)=>{switch(_.op){case"FFT":return[et.fft(getParamValue("x",_,$,_e))];case"IFFT":return[et.ifft(getParamValue("x",_,$,_e))];case"RFFT":return[et.rfft(getParamValue("x",_,$,_e))];case"IRFFT":return[et.irfft(getParamValue("x",_,$,_e))];default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const executeOp$2=(_,$,_e,et=tfOps)=>{switch(_.op){case"StaticRegexReplace":return[et.string.staticRegexReplace(getParamValue("input",_,$,_e),getParamValue("pattern",_,$,_e),getParamValue("rewrite",_,$,_e),getParamValue("replaceGlobal",_,$,_e))];case"StringNGrams":{const{nGrams:tt,nGramsSplits:rt}=et.string.stringNGrams(getParamValue("data",_,$,_e),getParamValue("dataSplits",_,$,_e),getParamValue("separator",_,$,_e),getParamValue("nGramWidths",_,$,_e),getParamValue("leftPad",_,$,_e),getParamValue("rightPad",_,$,_e),getParamValue("padWidth",_,$,_e),getParamValue("preserveShortSequences",_,$,_e));return[tt,rt]}case"StringSplit":{const{indices:tt,values:rt,shape:nt}=et.string.stringSplit(getParamValue("input",_,$,_e),getParamValue("delimiter",_,$,_e),getParamValue("skipEmpty",_,$,_e));return[tt,rt,nt]}case"StringToHashBucketFast":return[et.string.stringToHashBucketFast(getParamValue("input",_,$,_e),getParamValue("numBuckets",_,$,_e))];default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const executeOp$1=(_,$,_e,et=tfOps)=>{switch(_.op){case"Cast":return[et.cast(getParamValue("x",_,$,_e),getParamValue("dtype",_,$,_e))];case"ExpandDims":{const tt=getParamValue("axis",_,$,_e);return[et.expandDims(getParamValue("x",_,$,_e),tt)]}case"Squeeze":{const tt=getParamValue("axis",_,$,_e);return[et.squeeze(getParamValue("x",_,$,_e),tt)]}case"Reshape":return[et.reshape(getParamValue("x",_,$,_e),getParamValue("shape",_,$,_e))];case"EnsureShape":return[et.ensureShape(getParamValue("x",_,$,_e),getParamValue("shape",_,$,_e))];case"MirrorPad":return[et.mirrorPad(getParamValue("x",_,$,_e),getParamValue("padding",_,$,_e),getParamValue("mode",_,$,_e))];case"PadV2":case"Pad":return[et.pad(getParamValue("x",_,$,_e),getParamValue("padding",_,$,_e),getParamValue("constantValue",_,$,_e))];case"SpaceToBatchND":{const tt=getParamValue("blockShape",_,$,_e),rt=getParamValue("paddings",_,$,_e);return[et.spaceToBatchND(getParamValue("x",_,$,_e),tt,rt)]}case"BatchToSpaceND":{const tt=getParamValue("blockShape",_,$,_e),rt=getParamValue("crops",_,$,_e);return[et.batchToSpaceND(getParamValue("x",_,$,_e),tt,rt)]}case"DepthToSpace":{const tt=getParamValue("blockSize",_,$,_e),rt=getParamValue("dataFormat",_,$,_e).toUpperCase();return[et.depthToSpace(getParamValue("x",_,$,_e),tt,rt)]}case"BroadcastTo":return[et.broadcastTo(getParamValue("x",_,$,_e),getParamValue("shape",_,$,_e))];case"BroadcastArgs":return[et.broadcastArgs(getParamValue("s0",_,$,_e),getParamValue("s1",_,$,_e))];default:throw TypeError(`Node type ${_.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function executeOp(_,$,_e,et,tt=tidy){const rt=((nt,it,st)=>{switch(nt.category){case"arithmetic":return tt(()=>executeOp$k(nt,it,st));case"basic_math":return tt(()=>executeOp$j(nt,it,st));case"control":return executeOp$i(nt,it,st);case"convolution":return tt(()=>executeOp$h(nt,it,st));case"creation":return tt(()=>executeOp$g(nt,it,st));case"dynamic":return executeOp$f(nt,it,st);case"evaluation":return tt(()=>executeOp$e(nt,it,st));case"image":return tt(()=>executeOp$b(nt,it,st));case"graph":return tt(()=>executeOp$d(nt,it,st));case"logical":return tt(()=>executeOp$a(nt,it,st));case"matrices":return tt(()=>executeOp$9(nt,it,st));case"normalization":return tt(()=>executeOp$8(nt,it,st));case"ragged":return tt(()=>executeOp$7(nt,it,st));case"reduction":return tt(()=>executeOp$6(nt,it,st));case"slice_join":return tt(()=>executeOp$5(nt,it,st));case"sparse":return tt(()=>executeOp$4(nt,it,st));case"spectral":return tt(()=>executeOp$3(nt,it,st));case"string":return tt(()=>executeOp$2(nt,it,st));case"transformation":return tt(()=>executeOp$1(nt,it,st));case"hash_table":return executeOp$c(nt,it,st,et);case"custom":const at=getRegisteredOp(nt.op);if(at&&at.customExecutor)return at.customExecutor(new NodeValueImpl(nt,it,st));throw TypeError(`Custom op ${nt.op} is not registered.`);default:throw TypeError(`Unknown op '${nt.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(_,$,_e);return isPromise(rt)?rt.then(nt=>[].concat(nt)):[].concat(rt)}class ExecutionContext{constructor($={},_e={},et={},tt={},rt){this.weightMap=$,this.tensorArrayMap=_e,this.tensorListMap=et,this.functionMap=tt,this.parseNodeNameCache=rt,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame($,_e){return{id:$,frameName:_e,iterationId:0}}set currentContext($){this.contexts!==$&&(this.contexts=$,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const $=[];for(let _e=0;_e<this.contexts.length-1;_e++){const et=this.contexts.slice(0,this.contexts.length-_e);$.push(this.contextIdforContexts(et))}$.push(""),this._currentContextIds=$}contextIdforContexts($){return $?$.map(_e=>_e.id===0&&_e.iterationId===0?"":`${_e.frameName}-${_e.iterationId}`).join("/"):""}enterFrame($){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,$)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const $=Object.assign({},this.contexts[this.contexts.length-1]);$.iterationId+=1,$.id=this.lastId,this.contexts.splice(-1,1,$),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight($){return this.weightMap[$]}addTensorArray($){this.tensorArrayMap[$.id]=$}getTensorArray($){return this.tensorArrayMap[$]}addTensorList($){this.tensorListMap[$.id]=$}getTensorList($){return this.tensorListMap[$]}dispose($){for(const _e in this.tensorArrayMap)this.tensorArrayMap[_e].clearAndClose($);for(const _e in this.tensorListMap)this.tensorListMap[_e].clearAndClose($)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getExecutionSubgraph(_,$,_e,et){const tt=new Set,rt=[];let nt=null,it=null;const st=new Set,at=new Set(Object.keys(_).map(ht=>parseNodeName(ht)[0]));et=et||[];const ot=new Set(et.map(ht=>parseNodeName(ht.name)[0])),dt=[...$];for(;dt.length>0;){const ht=dt.pop();if((isControlFlow(ht)||isDynamicShape(ht)||isHashTable(ht))&&nt==null&&(nt=ht,it=nt.children.map(yt=>yt.name).filter(yt=>tt.has(yt))),tt.add(ht.name),_e[ht.name]==null&&!at.has(ht.name)&&!ot.has(ht.name)){if(ht.inputs.length===0){rt.push(ht.name);continue}ht.inputs.forEach(yt=>{st.has(yt.name)||(st.add(yt.name),dt.push(yt))})}}return{inputs:_,outputs:$,usedNodes:tt,missingInputs:rt,dynamicNode:nt,syncInputs:it}}function getNodesInTopologicalOrder(_,$){const{usedNodes:_e,inputs:et}=$,tt=Object.keys(et).map(wt=>parseNodeName(wt)[0]).map(wt=>_.nodes[wt]),rt=_.initNodes||[],nt=wt=>_e.has(typeof wt=="string"?wt:wt.name);function it(wt){return[...new Map(wt.map(Et=>[Et.name,Et])).values()]}const st=it([...tt,..._.weights,...rt]).filter(nt),at=it([...st,...Object.values(_.nodes)]).filter(nt),ot=new Map(at.map(wt=>[wt.name,wt])),dt={};for(const wt of at){dt[wt.name]=dt[wt.name]||0;for(const Et of wt.children)nt(Et)||(dt[Et.name]=Number.POSITIVE_INFINITY),dt[Et.name]=(dt[Et.name]||0)+1}const ht=Object.entries(dt).filter(([,wt])=>wt===0).map(([wt])=>wt),yt=[...ht];for(;ht.length>0;){const wt=ht.pop(),Et=ot.get(wt);for(const At of Et.children.filter(nt))--dt[At.name]===0&&(yt.push(At.name),ht.push(At.name))}const vt=yt.map(wt=>ot.get(wt)),xt=filterPredefinedReachableNodes(vt,st);return validateNodesExecutionOrder(xt,st),xt}function filterPredefinedReachableNodes(_,$){const _e=new Map(_.map(nt=>[nt.name,nt])),et=$.map(nt=>nt.name),tt=new Set(et);for(;et.length>0;){const nt=et.pop(),it=_e.get(nt);for(const st of it.children)!_e.has(st.name)||tt.has(st.name)||(tt.add(st.name),et.push(st.name))}return _.filter(nt=>tt.has(nt.name))}class NodesExecutionOrderError extends Error{constructor($){super(`NodesExecutionOrderError: ${$}`)}}function validateNodesExecutionOrder(_,$){const _e=new Map(_.map((it,st)=>[it.name,st])),et=new Set($.map(it=>it.name)),tt=it=>et.has(typeof it=="string"?it:it.name),rt=new Set(_.map(it=>it.name)),nt=it=>rt.has(typeof it=="string"?it:it.name);for(const it of _){for(const st of it.children.filter(nt)){if(!_e.has(st.name))throw new NodesExecutionOrderError(`Child ${st.name} of node ${it.name} is unreachable.`);if(_e.get(it.name)>_e.get(st.name))throw new NodesExecutionOrderError(`Node ${it.name} is scheduled to run after its child ${st.name}.`)}if(!tt(it))for(const st of it.inputs){if(!_e.has(st.name))throw new NodesExecutionOrderError(`Input ${st.name} of node ${it.name} is unreachable.`);if(_e.get(st.name)>_e.get(it.name))throw new NodesExecutionOrderError(`Node ${it.name} is scheduled to run before its input ${st.name}.`)}}}function getNodeLiveUntilMap(_){const $=new Map(_.map((it,st)=>[it.name,st])),_e=Number.MAX_SAFE_INTEGER,et=_.map((it,st)=>isControlFlow(it)?_e:st),tt=it=>{const st=et[$.get(it.name)];return st??-1},rt=_.map((it,st)=>it.children.map(tt).reduce((at,ot)=>Math.max(at,ot),et[st])),nt=new Map;for(let it=0;it<_.length;++it){const st=rt[it];if(st===_e)continue;const at=_[it],ot=_[st];nt.has(ot.name)||nt.set(ot.name,[]),nt.get(ot.name).push(at)}return nt}const CONTROL_FLOW_OPS=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),DYNAMIC_SHAPE_OPS=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),HASH_TABLE_OPS=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function isControlFlow(_){return CONTROL_FLOW_OPS.has(_.op)}function isDynamicShape(_){return DYNAMIC_SHAPE_OPS.has(_.op)}function isHashTable(_){return HASH_TABLE_OPS.has(_.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GraphExecutor{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap($){const _e=Object.keys($).map(et=>$[et].map(tt=>tt.id));this._weightIds=[].concat(..._e),this._weightMap=$}set resourceManager($){this._resourceManager=$}get inputs(){return this._inputs.map($=>({name:$.name,shape:$.attrParams.shape?$.attrParams.shape.value:void 0,dtype:$.attrParams.dtype?$.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map($=>({name:$.name,shape:$.attrParams.shape?$.attrParams.shape.value:void 0,dtype:$.attrParams.dtype?$.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map($=>$.signatureKey||$.name)}get outputNodes(){return this._outputs.map($=>{const _e=$.signatureKey||$.name;return $.defaultOutput?`${_e}:${$.defaultOutput}`:_e})}get functions(){return Object.keys(this._functions).reduce(($,_e)=>($[_e]=this._functions[_e].signature,$),{})}constructor($,_e){this.graph=$,this.parent=_e,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=$.outputs,this._inputs=$.inputs,this._initNodes=$.initNodes,this._signature=$.signature,this._functions=$.functions,$.functions!=null&&Object.keys($.functions).forEach(et=>{this._functionExecutorMap[et]=new GraphExecutor($.functions[et],this)})}getCompilationKey($,_e){const et=$.map(rt=>rt.name).sort(),tt=_e.map(rt=>rt.name).sort();return et.join(this.SEPARATOR)+"--"+tt.join(this.SEPARATOR)}compile($,_e){const et=getExecutionSubgraph($,_e,this.weightMap,this._initNodes),{missingInputs:tt,dynamicNode:rt,syncInputs:nt}=et;if(rt!=null)throw new Error(`This execution contains the node '${rt.name}', which has the dynamic op '${rt.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${nt}]`);if(tt.length>0){const at=_e.map(dt=>dt.name),ot=Object.keys($);throw new Error(`Cannot compute the outputs [${at}] from the provided inputs [${ot}]. Missing the following inputs: [${tt}]`)}const it=getNodesInTopologicalOrder(this.graph,et),st=getNodeLiveUntilMap(it);return{orderedNodes:it,nodeLiveUntilMap:st}}cloneAndKeepTensor($){if($==null)return null;const _e=$.clone();return keep(_e),_e}cloneTensorList($){return $?$.map(et=>this.cloneAndKeepTensor(et)):null}cloneTensorMap($){return Object.fromEntries(Object.entries($).map(([_e,et])=>[_e,this.cloneTensorList(et)]))}execute($,_e){this.disposeIntermediateTensors(),$=this.mapInputs($);const et=Object.keys($).sort();this.checkInputs($),this.checkInputShapeAndType($),_e=this.mapOutputs(_e),this.checkOutputs(_e);const tt=et.map(ht=>this.graph.nodes[parseNodeName(ht)[0]]),rt=_e.map(ht=>parseNodeName(ht)[0]),nt=new Set(rt);let it=rt.map(ht=>this.graph.nodes[ht]);it.length===0&&(it=this._outputs);const st=this.getCompilationKey(tt,it);let at=this.compiledMap.get(st);at==null&&(at=this.compile($,it),this.compiledMap.set(st,at));try{this.keepIntermediateTensors=env().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(ht){this.keepIntermediateTensors=!1,console.warn(ht.message)}const ot={},dt={};return tidy(()=>{const ht=new ExecutionContext(this.weightMap,ot,dt,this.functionExecutorMap,this.parseNodeNameCache),yt=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys($).forEach(Et=>{const[At,jt]=parseNodeName(Et,ht),kt=[];kt[jt]=$[Et],yt[At]=kt,this.keepIntermediateTensors&&(this.clonedTensorsMap[At]=this.cloneTensorList(kt))});const vt=this.getFrozenTensorIds(yt),{orderedNodes:xt,nodeLiveUntilMap:wt}=at;for(const Et of xt){if(yt[Et.name])continue;const At=executeOp(Et,yt,ht,this._resourceManager);if(isPromise(At))throw new Error(`The execution of the op '${Et.op}' returned a promise. Please use model.executeAsync() instead.`);yt[Et.name]=At,this.keepIntermediateTensors&&(this.clonedTensorsMap[Et.name]=this.cloneTensorList(At)),this.checkTensorForDisposalWithNodeLiveUntilInfo(Et,yt,ht,vt,nt,wt.get(Et.name))}return this.parent==null&&ht.dispose(vt),_e.map(Et=>getTensor(Et,yt,ht))})}getFrozenTensorIds($){const _e=[].concat.apply([],Object.keys($).map(et=>$[et]).map(et=>et.map(tt=>tt.id)));return new Set(_e)}checkTensorForDisposal($,_e,et,tt,rt,nt,it){if(!(isControlFlow(_e)||nt.has($))){for(const st of et[$])st!=null&&(it[st.id]=(it[st.id]||0)+_e.children.length);for(const st of _e.inputs){if(isControlFlow(st))continue;const at=getTensorsForCurrentContext(st.name,et,tt);if(at!=null)for(const ot of at){if(!ot||ot.kept||rt.has(ot.id))continue;const dt=it[ot.id];dt===1?(ot.dispose(),delete it[ot.id]):dt!=null&&it[ot.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo($,_e,et,tt,rt,nt){function it(st){return isControlFlow(st)||rt.has(st.name)}if(!(isControlFlow($)||nt==null))for(const st of nt){if(it(st))continue;const at=getTensorsForCurrentContext(st.name,_e,et);for(const ot of at)!ot||ot.kept||tt.has(ot.id)||ot.dispose()}}async executeAsync($,_e){return this._executeAsync($,_e)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach($=>{for(const _e of $)_e&&!_e.isDisposed&&_e.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync($,_e,et=!1,tt={},rt={}){this.disposeIntermediateTensors(),et||($=this.mapInputs($),this.checkInputs($),this.checkInputShapeAndType($),_e=this.mapOutputs(_e),this.checkOutputs(_e));try{this.keepIntermediateTensors=env().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(ht){this.keepIntermediateTensors=!1,console.warn(ht.message)}const nt=new ExecutionContext(this.weightMap,tt,rt,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const it=await this.executeWithControlFlow($,nt,_e,et),st=_e.map(ht=>getTensor(ht,it,nt)),at=st.map(ht=>ht.id),ot=Object.keys($).map(ht=>$[ht].id),dt=new Set([...at,...ot,...this.weightIds]);return Object.values(it).forEach(ht=>{ht.forEach(yt=>{yt&&!yt.isDisposed&&!dt.has(yt.id)&&yt.dispose()})}),this.parent==null&&nt.dispose(dt),st}async executeFunctionAsync($,_e,et){const tt=$.reduce((rt,nt,it)=>(rt[this.inputs[it].name]=nt,rt),{});return this._executeAsync(tt,this.outputNodes,!0,_e,et)}async executeWithControlFlow($,_e,et,tt){const rt=Object.keys($),nt=rt.map(kt=>this.graph.nodes[parseNodeName(kt)[0]]),it=et.map(kt=>parseNodeName(kt)[0]),st=new Set(it);let at=it.map(kt=>this.graph.nodes[kt]);at.length===0&&(at=this._outputs);const{usedNodes:ot,missingInputs:dt,dynamicNode:ht,syncInputs:yt}=getExecutionSubgraph($,at,this.weightMap,this._initNodes),vt=[...nt,...this.graph.weights,...this._initNodes||[]].map(kt=>({node:kt,contexts:_e.currentContext})),xt=Object.assign({},this.weightMap);Object.keys($).forEach(kt=>{const[Lt,Bt]=parseNodeName(kt),Gt=[];Gt[Bt]=$[kt],xt[Lt]=Gt});const wt={},Et=this.getFrozenTensorIds(xt),At={};for(;vt.length>0;){const kt=this.processStack(nt,vt,_e,xt,At,Et,st,wt,ot);await Promise.all(kt)}ht==null&&!tt&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const jt=at.filter(kt=>!isControlFlow(kt)&&!getTensor(kt.name,xt,_e)).map(kt=>kt.name);if(jt.length>0){let kt="";throw ht!=null&&(kt=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${yt}]`),new Error(`Cannot compute the outputs [${jt}] from the provided inputs [${rt}]. Consider providing the following inputs: [${dt}]. ${kt}`)}return xt}processStack($,_e,et,tt,rt,nt,it,st,at){const ot=[];for(;_e.length>0;){const dt=_e.pop();et.currentContext=dt.contexts;let ht="";if(dt.node.op==="Enter"&&getParamValue("isConstant",dt.node,tt,et)&&([ht]=getNodeNameAndIndex(dt.node.name,et)),tt[dt.node.name]==null){const yt=executeOp(dt.node,tt,et,this._resourceManager);ht||([ht]=getNodeNameAndIndex(dt.node.name,et));const vt=et.currentContext;isPromise(yt)?ot.push(yt.then(xt=>(tt[ht]=xt,this.keepIntermediateTensors&&(this.clonedTensorsMap[ht]=this.cloneTensorList(xt)),et.currentContext=vt,this.checkTensorForDisposal(ht,dt.node,tt,et,nt,it,st),this.processChildNodes(dt.node,_e,et,tt,rt,at),xt))):(tt[ht]=yt,this.keepIntermediateTensors&&(this.clonedTensorsMap[ht]=this.cloneTensorList(yt)),this.checkTensorForDisposal(ht,dt.node,tt,et,nt,it,st),this.processChildNodes(dt.node,_e,et,tt,rt,at))}else this.processChildNodes(dt.node,_e,et,tt,rt,at)}return ot}processChildNodes($,_e,et,tt,rt,nt){$.children.forEach(it=>{const[st]=getNodeNameAndIndex(it.name,et);rt[st]||!nt.has(it.name)||(it.op==="Merge"?it.inputNames.some(at=>!!getTensor(at,tt,et))&&(rt[st]=!0,_e.push({contexts:et.currentContext,node:it})):it.inputNames.every(at=>!!getTensor(at,tt,et))&&(rt[st]=!0,_e.push({contexts:et.currentContext,node:it})))})}dispose(){Object.keys(this.weightMap).forEach($=>this.weightMap[$].forEach(_e=>_e.dispose()))}checkInputShapeAndType($){Object.keys($).forEach(_e=>{const et=$[_e],[tt]=parseNodeName(_e),rt=this.graph.nodes[tt];if(rt.attrParams.shape&&rt.attrParams.shape.value){const nt=rt.attrParams.shape.value,it=nt.length===et.shape.length&&et.shape.every((st,at)=>nt[at]===-1||nt[at]===st);assert$1(it,()=>`The shape of dict['${rt.name}'] provided in model.execute(dict) must be [${nt}], but was [${et.shape}]`)}rt.attrParams.dtype&&rt.attrParams.dtype.value&&assert$1(et.dtype===rt.attrParams.dtype.value,()=>`The dtype of dict['${rt.name}'] provided in model.execute(dict) must be ${rt.attrParams.dtype.value}, but was ${et.dtype}`)})}mapInputs($){var _e,et;const tt={};for(const rt in $){const nt=(et=(_e=this._signature)===null||_e===void 0?void 0:_e.inputs)===null||et===void 0?void 0:et[rt];nt!=null?tt[nt.name]=$[rt]:tt[rt]=$[rt]}return tt}checkInputs($){const _e=Object.keys($).filter(et=>{const[tt]=parseNodeName(et);return this.graph.nodes[tt]==null});if(_e.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${_e}] that are not part of graph`)}mapOutputs($){return $.map(_e=>{var et,tt;const rt=(tt=(et=this._signature)===null||et===void 0?void 0:et.outputs)===null||tt===void 0?void 0:tt[_e];return rt!=null?rt.name:_e},{})}checkOutputs($){$.forEach(_e=>{const[et]=parseNodeName(_e);if(!this.graph.nodes[et])throw new Error(`The output '${_e}' is not found in the graph`)})}}class ResourceManager{constructor($={},_e={}){this.hashTableNameToHandle=$,this.hashTableMap=_e}addHashTable($,_e){this.hashTableNameToHandle[$]=_e.handle,this.hashTableMap[_e.id]=_e}getHashTableHandleByName($){return this.hashTableNameToHandle[$]}getHashTableById($){return this.hashTableMap[$]}dispose(){for(const $ in this.hashTableMap)this.hashTableMap[$].clearAndClose(),delete this.hashTableMap[$];for(const $ in this.hashTableNameToHandle)this.hashTableNameToHandle[$].dispose(),delete this.hashTableNameToHandle[$]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TFHUB_SEARCH_PARAM="?tfjs-format=file",DEFAULT_MODEL_NAME="model.json";class GraphModel{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor($,_e={},et=io){this.modelUrl=$,this.loadOptions=_e,this.version="n/a",this.io=et,_e==null&&(this.loadOptions={}),this.resourceManager=new ResourceManager}findIOHandler(){const $=this.modelUrl;if($.load!=null)this.handler=$;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest($,this.loadOptions);else{const _e=this.io.getLoadHandlers($,this.loadOptions);if(_e.length===0)_e.push(this.io.browserHTTPRequest($,this.loadOptions));else if(_e.length>1)throw new Error(`Found more than one (${_e.length}) load handlers for URL '${[$]}'`);this.handler=_e[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const $=this.handler.load();return isPromise($)?$.then(_e=>_e.getWeightStream==null?this.loadSync(_e):this.loadStreaming(_e)):this.loadSync($)}loadSync($){const _e=this.io.decodeWeights($.weightData,$.weightSpecs);return this.loadWithWeightMap($,_e)}async loadStreaming($){if($.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const _e=await decodeWeightsStream($.getWeightStream(),$.weightSpecs);return this.loadWithWeightMap($,_e)}loadWithWeightMap($,_e){this.artifacts=$;const et=this.artifacts.modelTopology;let tt=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const rt=this.artifacts.userDefinedMetadata;rt.signature!=null&&(tt=rt.signature),rt.structuredOutputKeys!=null&&(this.structuredOutputKeys=rt.structuredOutputKeys)}if(this.signature=tt,this.version=`${et.versions.producer}.${et.versions.minConsumer}`,this.executor=new GraphExecutor(OperationMapper.Instance.transformGraph(et,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(_e),this.executor.resourceManager=this.resourceManager,$.modelInitializer!=null&&$.modelInitializer.node!=null){const rt=OperationMapper.Instance.transformGraph($.modelInitializer);this.initializer=new GraphExecutor(rt),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=$.initializerSignature}return!0}async save($,_e){if(typeof $=="string"){const et=this.io.getSaveHandlers($);if(et.length===0)throw new Error(`Cannot find any save handlers for URL '${$}'`);if(et.length>1)throw new Error(`Found more than one (${et.length}) save handlers for URL '${$}'`);$=et[0]}if($.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return $.save(this.artifacts)}addStructuredOutputNames($){if(this.structuredOutputKeys){const _e=$ instanceof Tensor?[$]:$,et={};return _e.forEach((tt,rt)=>et[this.structuredOutputKeys[rt]]=tt),et}return $}predict($,_e){const et=this.execute($,this.outputNodes);return this.addStructuredOutputNames(et)}async predictAsync($,_e){const et=await this.executeAsync($,this.outputNodes);return this.addStructuredOutputNames(et)}normalizeInputs($){var _e;if(!($ instanceof Tensor)&&!Array.isArray($)){const rt=(_e=this.signature)===null||_e===void 0?void 0:_e.inputs;if(rt!=null)for(const nt in rt){const it=rt[nt];it.resourceId!=null&&($[nt]=this.resourceIdToCapturedInput[it.resourceId])}return $}$=Array.isArray($)?$:[$];const et=Object.keys(this.resourceIdToCapturedInput).length;if($.length+et!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-et} non-resource placeholders, while there are ${$.length} input tensors provided.`);let tt=0;return this.inputNodes.reduce((rt,nt)=>{var it,st,at;const ot=(at=(st=(it=this.signature)===null||it===void 0?void 0:it.inputs)===null||st===void 0?void 0:st[nt])===null||at===void 0?void 0:at.resourceId;return ot!=null?rt[nt]=this.resourceIdToCapturedInput[ot]:rt[nt]=$[tt++],rt},{})}normalizeOutputs($){return $=$||this.outputNodes,Array.isArray($)?$:[$]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput($){if(this.resourceIdToCapturedInput={},this.initializerSignature){const _e=this.initializerSignature.outputs,et=Object.keys(_e);for(let tt=0;tt<et.length;tt++){const rt=et[tt],nt=_e[rt];this.resourceIdToCapturedInput[nt.resourceId]=$[tt]}}}execute($,_e){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),$=this.normalizeInputs($),_e=this.normalizeOutputs(_e);const et=this.executor.execute($,_e);return et.length>1?et:et[0]}async executeAsync($,_e){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),$=this.normalizeInputs($),_e=this.normalizeOutputs(_e);const et=await this.executor.executeAsync($,_e);return et.length>1?et:et[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap($){return Object.keys($).reduce((_e,et)=>(_e[et]=[$[et]],_e),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&dispose(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function loadGraphModel(_,$={},_e=io){if(_==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");$==null&&($={}),$.fromTFHub&&typeof _=="string"&&(_=getTFHubUrl(_));const et=new GraphModel(_,$,_e);return await et.load(),et}function loadGraphModelSync(_){if(_==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let $;if(_ instanceof Array){const[et,tt]=_;if(!et)throw new Error("modelJSON must be the first element of the array");if(!tt||!(tt instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in et))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in et))throw new Error("Model JSON is missing 'weightsManifest'");const rt=getWeightSpecs(et.weightsManifest),nt=getModelArtifactsForJSONSync(et,rt,tt);$=fromMemorySync(nt)}else if("load"in _)$=_;else if("modelTopology"in _&&"weightSpecs"in _&&"weightData"in _)$=fromMemorySync(_);else throw new Error("Unknown model format");const _e=new GraphModel($);return _e.load(),_e}function getTFHubUrl(_){return _.endsWith("/")||(_=_+"/"),`${_}${DEFAULT_MODEL_NAME}${TFHUB_SEARCH_PARAM}`}/** @license See the LICENSE file. */const version$5="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function deepMap(_,$){return deepMapInternal(_,$)}function deepMapInternal(_,$,_e=new Map,et=new Set){if(_==null)return null;if(typeof Blob=="function"&&_ instanceof Blob)return _.slice();if(et.has(_))throw new Error("Circular references are not supported.");if(_e.has(_))return _e.get(_);const tt=$(_);if(tt.recurse&&tt.value!==null)throw new Error("A deep map function may not return both a value and recurse=true.");if(tt.recurse)if(isIterable(_)){const rt=Array.isArray(_)?[]:{};et.add(_);for(const nt in _){const it=_[nt],st=deepMapInternal(it,$,_e,et);rt[nt]=st}return et.delete(_),_.__proto__&&(rt.__proto__=_.__proto__),rt}else throw new Error(`Can't recurse into non-iterable type: ${_}`);else return _e.set(_,tt.value),tt.value}function deepZip(_,$=zipToList){return deepZipInternal(_,$)}function deepZipInternal(_,$,_e=new Set){const et=_[0];if(_e.has(et))throw new Error("Circular references are not supported.");const tt=$(_);if(tt.recurse&&tt.value!==null)throw new Error("A deep zip function may not return both a value and recurse=true.");if(tt.recurse)if(isIterable(et)){const rt=Array.isArray(et)?[]:{};_e.add(et);for(const nt in et){const it=_.map(at=>at[nt]),st=deepZipInternal(it,$,_e);rt[nt]=st}return _e.delete(et),rt}else throw new Error(`Can't recurse into non-iterable type: ${et}`);else return tt.value}function zipToList(_){return _===null?null:isIterable(_[0])?{value:null,recurse:!0}:{value:_,recurse:!1}}async function deepMapAndAwaitAll(_,$){const _e=new Map;deepMapInternal(_,$,_e);for(const tt of Array.from(_e.keys())){const rt=_e.get(tt);if(isPromise(rt)){const nt=await rt;_e.set(tt,nt)}}return deepMapInternal(_,$,_e)}function isIterable(_){let $=!1;if(env().get("IS_BROWSER"))$=_ instanceof TextDecoder;else{const{StringDecoder:_e}=requireString_decoder();$=_ instanceof _e}return _!=null&&!ArrayBuffer.isView(_)&&(Array.isArray(_)||typeof _=="object"&&!(_ instanceof Tensor)&&!(_ instanceof Promise)&&!$)}function canTensorify(_){return _==null||isPrimitive(_)||Array.isArray(_)||typeof _=="object"&&_ instanceof Tensor||isTypedArray$5(_)}function isPrimitive(_){return _===null||typeof _!="object"&&typeof _!="function"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function deepClone(_){return deepMap(_,cloneIfTensor)}function cloneIfTensor(_){return _ instanceof Tensor?{value:_.clone(),recurse:!1}:isIterable(_)?{value:null,recurse:!0}:{value:_,recurse:!1}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class RingBuffer{constructor($){if(this.capacity=$,this.begin=0,this.end=0,$==null)throw new RangeError("Can't create a ring buffer of unknown capacity.");if($<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array($),this.doubledCapacity=2*$}wrap($){for(;$<0;)$+=this.doubledCapacity;return $%this.doubledCapacity}get($){if($<0)throw new RangeError("Can't get item at a negative index.");return this.data[$%this.capacity]}set($,_e){if($<0)throw new RangeError("Can't set item at a negative index.");this.data[$%this.capacity]=_e}length(){let $=this.end-this.begin;return $<0&&($=this.doubledCapacity+$),$}isFull(){return this.length()===this.capacity}isEmpty(){return this.length()===0}push($){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,$),this.end=this.wrap(this.end+1)}pushAll($){for(const _e of $)this.push(_e)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const $=this.get(this.end);return this.set(this.end,void 0),$}unshift($){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,$)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const $=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),$}shuffleExcise($){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const _e=this.wrap(this.begin+$),et=this.get(_e);return this.set(_e,this.pop()),et}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class GrowingRingBuffer extends RingBuffer{constructor(){super(GrowingRingBuffer.INITIAL_CAPACITY)}isFull(){return!1}push($){super.isFull()&&this.expand(),super.push($)}unshift($){super.isFull()&&this.expand(),super.unshift($)}expand(){const $=this.capacity*2,_e=new Array($),et=this.length();for(let tt=0;tt<et;tt++)_e[tt]=this.get(this.wrap(this.begin+tt));this.data=_e,this.capacity=$,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=et}}GrowingRingBuffer.INITIAL_CAPACITY=32;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function iteratorFromItems(_){return new ArrayIterator(_)}function iteratorFromFunction(_){return new FunctionCallIterator(_)}function iteratorFromConcatenated(_,$){return new ChainedIterator(_,$)}function iteratorFromZipped(_,$=ZipMismatchMode.FAIL){return new ZipIterator(_,$)}class LazyIterator{async toArray(){const $=[];let _e=await this.next();for(;!_e.done;)$.push(_e.value),_e=await this.next();return $}async toArrayForTest(){const $=this.prefetch(100),_e=[];let et=await $.next();for(;!et.done;)_e.push(et.value),et=await $.next();return _e}async resolveFully(){let $=await this.next();for(;!$.done;)$=await this.next()}async resolveWhile($){let _e=await this.next(),et=$(_e.value);for(;!_e.done&&et;)_e=await this.next(),et=$(_e.value)}handleErrors($){return new ErrorHandlingLazyIterator(this,$)}filter($){return new FilterIterator(this,$)}map($){return new MapIterator(this,$)}mapAsync($){return new AsyncMapIterator(this,$)}serialMapAsync($){return new AsyncMapIterator(this,$).serial()}flatmap($){return new FlatmapIterator(this,$)}async forEachAsync($){return this.map($).resolveFully()}async serialForEach($){return this.serialMapAsync($).resolveWhile(_e=>_e===!0)}rowMajorBatch($,_e=!0){return new RowMajorBatchIterator(this,$,_e)}columnMajorBatch($,_e=!0,et=zipToList){return this.rowMajorBatch($,_e).map(rt=>deepZip(rt,et))}concatenate($,_e){return new ChainedIterator(iteratorFromItems([this,$]),_e)}take($){return $<0||$==null?this:new TakeIterator(this,$)}skip($){return $<0||$==null?this:new SkipIterator(this,$)}prefetch($){return new PrefetchIterator(this,$)}shuffle($,_e){return new ShuffleIterator(this,$,_e)}serial(){return new SerialIterator(this)}}class ArrayIterator extends LazyIterator{constructor($){super(),this.items=$,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const $=this.items[this.trav];return this.trav++,{value:deepClone($),done:!1}}}class FunctionCallIterator extends LazyIterator{constructor($){super(),this.nextFn=$}summary(){return"Function call"}async next(){try{return this.nextFn()}catch($){throw $.message=`Error thrown while iterating through a dataset: ${$.message}`,$}}}class SerialIterator extends LazyIterator{constructor($){super(),this.upstream=$,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}}class SkipIterator extends LazyIterator{constructor($,_e){super(),this.upstream=$,this.maxCount=_e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const $=await this.upstream.next();if($.done)return $;dispose($.value)}return this.upstream.next()}}class TakeIterator extends LazyIterator{constructor($,_e){super(),this.upstream=$,this.maxCount=_e,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class RowMajorBatchIterator extends LazyIterator{constructor($,_e,et=!0){super(),this.upstream=$,this.batchSize=_e,this.enableSmallLastBatch=et,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){const $=[];for(;$.length<this.batchSize;){const _e=await this.upstream.next();if(_e.done)return this.enableSmallLastBatch&&$.length>0?{value:$,done:!1}:{value:null,done:!0};$.push(_e.value)}return{value:$,done:!1}}}class FilterIterator extends LazyIterator{constructor($,_e){super(),this.upstream=$,this.predicate=_e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){const $=await this.upstream.next();if($.done||this.predicate($.value))return $;dispose($.value)}}}class MapIterator extends LazyIterator{constructor($,_e){super(),this.upstream=$,this.transform=_e}summary(){return`${this.upstream.summary()} -> Map`}async next(){const $=await this.upstream.next();if($.done)return{value:null,done:!0};const _e=getTensorsInContainer($.value),et=this.transform($.value),tt=getTensorsInContainer(et);for(const rt of _e)isTensorInList(rt,tt)||rt.dispose();return{value:et,done:!1}}}class ErrorHandlingLazyIterator extends LazyIterator{constructor($,_e){super(),this.upstream=$,this.handler=_e,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch($){if(!this.handler($))return{value:null,done:!0}}}}class AsyncMapIterator extends LazyIterator{constructor($,_e){super(),this.upstream=$,this.transform=_e}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){const $=await this.upstream.next();if($.done)return{value:null,done:!0};const _e=getTensorsInContainer($.value),et=await this.transform($.value),tt=getTensorsInContainer(et);for(const rt of _e)isTensorInList(rt,tt)||rt.dispose();return{value:et,done:!1}}}class OneToManyIterator extends LazyIterator{constructor(){super(),this.outputQueue=new GrowingRingBuffer,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.outputQueue.length()===0;)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class FlatmapIterator extends OneToManyIterator{constructor($,_e){super(),this.upstream=$,this.transform=_e}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){const $=await this.upstream.next();if($.done)return!1;const _e=getTensorsInContainer($.value),et=this.transform($.value),tt=getTensorsInContainer(et);this.outputQueue.pushAll(et);for(const rt of _e)isTensorInList(rt,tt)||rt.dispose();return!0}}class ChainedIterator extends LazyIterator{constructor($,_e){super(),this.baseErrorHandler=_e,this.lastRead=null,this.iterator=null,this.moreIterators=$}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain($){if(await $,this.iterator==null){const et=await this.moreIterators.next();if(et.done)return{value:null,done:!0};this.iterator=et.value,this.baseErrorHandler!=null&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const _e=await this.iterator.next();return _e.done?(this.iterator=null,this.readFromChain($)):_e}}var ZipMismatchMode;(function(_){_[_.FAIL=0]="FAIL",_[_.SHORTEST=1]="SHORTEST",_[_.LONGEST=2]="LONGEST"})(ZipMismatchMode||(ZipMismatchMode={}));class ZipIterator extends LazyIterator{constructor($,_e=ZipMismatchMode.FAIL){super(),this.iterators=$,this.mismatchMode=_e,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState($){await $;let _e=0,et=0;function tt(nt){return nt instanceof LazyIterator?{value:nt.next().then(st=>(_e++,st.done&&et++,st.value)),recurse:!1}:{value:null,recurse:!0}}const rt=await deepMapAndAwaitAll(this.iterators,tt);if(_e===et)return{value:null,done:!0};if(et>0)switch(this.mismatchMode){case ZipMismatchMode.FAIL:throw new Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case ZipMismatchMode.SHORTEST:return{value:null,done:!0};case ZipMismatchMode.LONGEST:}return this.count++,{value:rt,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}}class PrefetchIterator extends LazyIterator{constructor($,_e){super(),this.upstream=$,this.bufferSize=_e,this.buffer=new RingBuffer(_e)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){const $=this.upstream.next();this.buffer.push($)}}next(){return this.refill(),this.buffer.shift()}}class ShuffleIterator extends PrefetchIterator{constructor($,_e,et){super($,_e),this.upstream=$,this.windowSize=_e,this.upstreamExhausted=!1,this.random=seedrandom.alea(et||now$2().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt($){return Math.floor(this.random()*$)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const $=this.chooseIndex(),_e=await this.buffer.shuffleExcise($);if(_e.done)this.upstreamExhausted=!0;else return this.refill(),_e}return{value:null,done:!0}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class Dataset{constructor(){this.size=null}batch($,_e=!0){const et=this;assert$1($>0,()=>`batchSize needs to be positive, but it is
      ${$}`);let tt;return this.size===1/0||this.size==null?tt=this.size:_e?tt=Math.ceil(this.size/$):tt=Math.floor(this.size/$),datasetFromIteratorFn(async()=>(await et.iterator()).columnMajorBatch($,_e,deepBatchConcat),tt)}concatenate($){const _e=this;let et;return this.size===1/0||$.size===1/0?et=1/0:this.size!=null&&$.size!=null?et=this.size+$.size:et=null,datasetFromIteratorFn(async()=>(await _e.iterator()).concatenate(await $.iterator()),et)}filter($){const _e=this;let et;return this.size===1/0?et=1/0:et=null,datasetFromIteratorFn(async()=>(await _e.iterator()).filter(tt=>tidy(()=>$(tt))),et)}async forEachAsync($){return(await this.iterator()).forEachAsync($)}map($){const _e=this;return datasetFromIteratorFn(async()=>(await _e.iterator()).map(et=>tidy(()=>$(et))),this.size)}mapAsync($){const _e=this;return datasetFromIteratorFn(async()=>(await _e.iterator()).mapAsync($),this.size)}prefetch($){if($==null)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const _e=this;return datasetFromIteratorFn(async()=>(await _e.iterator()).prefetch($),this.size)}repeat($){const _e=this;let et;return this.size!=null&&$>0?et=this.size*$:$===0?et=0:this.size!=null&&($===void 0||$<0)?et=1/0:et=null,datasetFromIteratorFn(async()=>{const tt=iteratorFromFunction(async()=>({value:await _e.iterator(),done:!1}));return iteratorFromConcatenated(tt.take($))},et)}skip($){const _e=this;let et;return this.size!=null&&$>=0&&this.size>=$?et=this.size-$:this.size!=null&&(this.size<$||$===void 0||$<0)?et=0:et=null,datasetFromIteratorFn(async()=>(await _e.iterator()).skip($),et)}shuffle($,_e,et=!0){if($==null||$<0)throw this.size==null?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);const tt=this,rt=seedrandom.alea(_e||now$2().toString());return datasetFromIteratorFn(async()=>{let nt=rt.int32();return et&&(nt+=rt.int32()),(await tt.iterator()).shuffle($,nt.toString())},this.size)}take($){const _e=this;let et;return this.size!=null&&this.size>$?et=$:this.size!=null&&this.size<=$?et=this.size:et=null,datasetFromIteratorFn(async()=>(await _e.iterator()).take($),et)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}Dataset.MAX_BUFFER_SIZE=1e4;function datasetFromIteratorFn(_,$=null){return new class extends Dataset{constructor(){super(...arguments),this.size=$}async iterator(){return _()}}}function array$1(_){return datasetFromIteratorFn(async()=>iteratorFromItems(_),_.length)}function zip(_){if(!isIterable(_))throw new Error("The argument to zip() must be an object or array.");let $;if(Array.isArray(_))for(let _e=0;_e<_.length;_e++)$=$==null?_[_e].size:Math.min($,_[_e].size);else if(_ instanceof Object)for(const _e in _)$=$==null?_[_e].size:Math.min($,_[_e].size);return datasetFromIteratorFn(async()=>{const _e=await deepMapAndAwaitAll(_,et=>{if(et instanceof Dataset)return{value:et.iterator(),recurse:!1};if(isIterable(et))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")});return iteratorFromZipped(_e,ZipMismatchMode.SHORTEST)},$)}function deepBatchConcat(_){if(_===null)return null;const $=_[0];return canTensorify($)?{value:batchConcat(_),recurse:!1}:{value:null,recurse:!0}}function batchConcat(_){if(_.length===0)throw new Error("Can't make a batch of zero elements.");return _[0]instanceof Tensor?stack(_):tensor(_)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class TextLineDataset extends Dataset{constructor($){super(),this.input=$}async iterator(){return(await this.input.iterator()).decodeUTF8().split(`
`).map(tt=>(tt.endsWith("\r")&&(tt=tt.slice(0,-1)),tt))}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */const CODE_QUOTE='"',STATE_OUT=Symbol("out"),STATE_FIELD=Symbol("field"),STATE_QUOTE=Symbol("quote"),STATE_QUOTE_AFTER_QUOTE=Symbol("quoteafterquote"),STATE_WITHIN_QUOTE_IN_QUOTE=Symbol("quoteinquote");class CSVDataset extends Dataset{async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){const $=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!$)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&$&&assert$1($.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+$.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=$);const _e=this.fullColumnNames.reduce((tt,rt)=>(tt[rt]=tt[rt]+1||1,tt),{}),et=Object.keys(_e).filter(tt=>_e[tt]>1);if(assert$1(et.length===0,()=>"Duplicate column names found: "+et.toString()),this.columnConfigs){for(const tt of Object.keys(this.columnConfigs))if(this.fullColumnNames.indexOf(tt)===-1)throw new Error('The key "'+tt+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").")}this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){const _e=await(await this.base.iterator()).next();if(_e.done)throw new Error("No data was found for CSV parsing.");const et=_e.value;return this.parseRow(et,!1)}else return null}constructor($,_e){super(),this.input=$,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new TextLineDataset($),_e||(_e={}),this.hasHeader=_e.hasHeader!==!1,this.fullColumnNames=_e.columnNames,this.columnConfigs=_e.columnConfigs,this.configuredColumnsOnly=_e.configuredColumnsOnly,_e.delimWhitespace?(assert$1(_e.delimiter==null,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=_e.delimiter?_e.delimiter:","}async iterator(){this.columnNamesValidated||await this.setColumnNames();let $=await this.base.iterator();return this.hasHeader&&($=$.skip(1)),$.map(_e=>this.makeDataElement(_e))}makeDataElement($){const _e=this.parseRow($),et={},tt={};for(let rt=0;rt<this.fullColumnNames.length;rt++){const nt=this.fullColumnNames[rt],it=this.columnConfigs?this.columnConfigs[nt]:null;if(!(this.configuredColumnsOnly&&!it)){const st=_e[rt];let at=null;if(st==="")if(it&&it.default!==void 0)at=it.default;else{if(it&&(it.required||it.isLabel))throw new Error(`Required column ${nt} is empty in this line: ${$}`);at=void 0}else{const ot=Number(st);if(isNaN(ot))it&&it.dtype==="bool"?at=this.getBoolean(st):at=st;else if(!it||!it.dtype)at=ot;else switch(it.dtype){case"float32":at=ot;break;case"int32":at=Math.floor(ot);break;case"bool":at=this.getBoolean(st);break;default:at=ot}}it&&it.isLabel?tt[nt]=at:et[nt]=at}}return Object.keys(tt).length===0?et:{xs:et,ys:tt}}getBoolean($){return $==="1"||$.toLowerCase()==="true"?1:0}parseRow($,_e=!0){const et=[];let tt=0;const rt=$.length;let nt=STATE_OUT;for(let it=0;it<rt;it++)switch(nt){case STATE_OUT:switch($.charAt(it)){case CODE_QUOTE:tt=it+1,nt=STATE_QUOTE;break;case this.delimiter:if(tt=it+1,this.delimiter===" "&&this.delimWhitespace)break;et.push(""),nt=STATE_OUT;break;default:nt=STATE_FIELD,tt=it;break}break;case STATE_FIELD:switch($.charAt(it)){case this.delimiter:et.push($.substring(tt,it)),nt=STATE_OUT,tt=it+1;break}break;case STATE_QUOTE:switch($.charAt(it)){case CODE_QUOTE:nt=STATE_QUOTE_AFTER_QUOTE;break}break;case STATE_QUOTE_AFTER_QUOTE:switch($.charAt(it)){case this.delimiter:et.push($.substring(tt,it-1)),nt=STATE_OUT,tt=it+1;break;case CODE_QUOTE:nt=STATE_QUOTE;break;default:nt=STATE_WITHIN_QUOTE_IN_QUOTE;break}break;case STATE_WITHIN_QUOTE_IN_QUOTE:switch($.charAt(it)){case CODE_QUOTE:nt=STATE_QUOTE;break}break}if(nt===STATE_QUOTE_AFTER_QUOTE?et.push($.substring(tt,rt-1)):et.push($.substring(tt)),_e&&et.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${et}`);return et}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class MicrophoneIterator extends LazyIterator{constructor($){super(),this.microphoneConfig=$,this.isClosed=!1,this.fftSize=$.fftSize||1024;const _e=Math.log2(this.fftSize);if(this.fftSize<0||_e<4||_e>14||!Number.isInteger(_e))throw new Error(`Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ${this.fftSize}`);if(this.numFrames=$.numFramesPerSpectrogram||43,this.sampleRateHz=$.sampleRateHz,this.columnTruncateLength=$.columnTruncateLength||this.fftSize,this.audioTrackConstraints=$.audioTrackConstraints,this.smoothingTimeConstant=$.smoothingTimeConstant||0,this.includeSpectrogram=$.includeSpectrogram!==!1,this.includeWaveform=$.includeWaveform===!0,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create($={}){if(!env().get("IS_BROWSER"))throw new Error("microphone API is only supported in browser environment.");const _e=new MicrophoneIterator($);return await _e.start(),_e}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:this.audioTrackConstraints==null?!0:this.audioTrackConstraints,video:!1})}catch(et){throw new Error(`Error thrown while initializing video stream: ${et.message}`)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");const $=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new $,!this.sampleRateHz)this.sampleRateHz=this.audioContext.sampleRate;else if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: ${this.audioContext.sampleRate}`);const _e=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.fftSize*2,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,_e.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let $,_e;const et=await this.getAudioData();if(this.includeSpectrogram){const tt=this.flattenQueue(et.freqDataQueue);$=this.getTensorFromAudioDataArray(tt,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){const tt=this.flattenQueue(et.timeDataQueue);_e=this.getTensorFromAudioDataArray(tt,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:$,waveform:_e},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){const $=[],_e=[];let et=0;return new Promise(tt=>{const rt=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&tt({freqDataQueue:$,timeDataQueue:_e}),$.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),_e.push(this.timeData.slice())),++et===this.numFrames&&(clearInterval(rt),tt({freqDataQueue:$,timeDataQueue:_e}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),this.stream!=null&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue($){const _e=$[0].length,et=new Float32Array($.length*_e);return $.forEach((tt,rt)=>et.set(tt,rt*_e)),et}getTensorFromAudioDataArray($,_e){const et=new Float32Array(sizeFromShape(_e));return et.set($,et.length-$.length),tensor(et,_e)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class WebcamIterator extends LazyIterator{constructor($,_e){if(super(),this.webcamVideoElement=$,this.webcamConfig=_e,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=tensor1d([0],"int32"),this.webcamConfig.centerCrop){const et=this.webcamConfig.resizeWidth*1/this.webcamVideoElement.width,tt=this.webcamConfig.resizeHeight*1/this.webcamVideoElement.height,rt=(1-et)/2,nt=(1-tt)/2,it=rt+et,st=tt+nt;this.cropBox=tensor2d([nt,rt,st,it],[1,4])}else this.cropBox=tensor2d([0,0,1,1],[1,4])}summary(){return"webcam"}static async create($,_e={}){if(!env().get("IS_BROWSER"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!$){if($=document.createElement("video"),!_e.resizeWidth||!_e.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");$.width=_e.resizeWidth,$.height=_e.resizeHeight}const et=new WebcamIterator($,_e);return await et.start(),et}async start(){this.webcamConfig.facingMode&&assert$1(this.webcamConfig.facingMode==="user"||this.webcamConfig.facingMode==="environment",()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch($){throw $.message=`Error thrown while initializing video stream: ${$.message}`,$}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch($){console.log($),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise($=>{this.webcamVideoElement.onloadedmetadata=()=>{$()}})}async next(){if(this.isClosed)return{value:null,done:!0};let $;try{$=fromPixels$1(this.webcamVideoElement)}catch(_e){throw new Error(`Error thrown converting video to pixels: ${JSON.stringify(_e)}`)}if(this.resize)try{return{value:this.cropAndResizeFrame($),done:!1}}catch(_e){throw new Error(`Error thrown cropping the video: ${_e.message}`)}finally{$.dispose()}else return{value:$,done:!1}}needToResize(){return!!(this.webcamConfig.resizeWidth&&this.webcamConfig.resizeHeight&&(this.webcamVideoElement.width!==this.webcamConfig.resizeWidth||this.webcamVideoElement.height!==this.webcamConfig.resizeHeight))}cropAndResizeFrame($){return tidy(()=>{const _e=expandDims$3(cast$3($,"float32"),0);let et;et=image$1.cropAndResize(_e,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");const tt=et.shape;return reshape$3(et,tt.slice(1))})}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach(_e=>_e.stop());try{this.webcamVideoElement.srcObject=null}catch(_e){console.log(_e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class DataSource{}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class StringIterator extends LazyIterator{split($){return new SplitIterator(this,$)}}class SplitIterator extends StringIterator{constructor($,_e){super(),this.upstream=$,this.impl=new SplitIteratorImpl($,_e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class SplitIteratorImpl extends OneToManyIterator{constructor($,_e){super(),this.upstream=$,this.separator=_e,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){const $=await this.upstream.next();if($.done)return this.carryover===""?!1:(this.outputQueue.push(this.carryover),this.carryover="",!0);const _e=$.value.split(this.separator);_e[0]=this.carryover+_e[0];for(const et of _e.slice(0,-1))this.outputQueue.push(et);return this.carryover=_e[_e.length-1],!0}}class ByteChunkIterator extends LazyIterator{decodeUTF8(){return new Utf8Iterator(this)}}class Utf8Iterator extends StringIterator{constructor($){super(),this.upstream=$,this.impl=new Utf8IteratorImpl($)}summary(){return this.impl.summary()}async next(){return this.impl.next()}}class Utf8IteratorImpl extends OneToManyIterator{constructor($){if(super(),this.upstream=$,env().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{const{StringDecoder:_e}=requireString_decoder();this.decoder=new _e("utf8")}}summary(){return`${this.upstream.summary()} -> Utf8`}async pump(){const $=await this.upstream.next();let _e;if($.done)return!1;_e=$.value;let et;return env().get("IS_BROWSER")?et=this.decoder.decode(_e,{stream:!0}):et=this.decoder.write(Buffer.from(_e.buffer)),this.outputQueue.push(et),!0}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class FileChunkIterator extends ByteChunkIterator{constructor($,_e={}){super(),this.file=$,this.options=_e,assert$1($ instanceof Uint8Array||(env().get("IS_BROWSER")?$ instanceof File||$ instanceof Blob:!1),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=_e.offset||0,this.chunkSize=_e.chunkSize||1024*1024}summary(){return`FileChunks ${this.file}`}async next(){return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?{value:null,done:!0}:{value:await new Promise((_e,et)=>{const tt=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)_e(new Uint8Array(this.file.slice(this.offset,tt)));else{const rt=new FileReader;rt.onload=it=>{let st=rt.result;if(st instanceof ArrayBuffer&&(st=new Uint8Array(st)),!(st instanceof Uint8Array))return et(new TypeError("FileReader returned unknown type."));_e(st)},rt.onabort=it=>et(new Error("Aborted")),rt.onerror=it=>et(new Error(it.type));const nt=this.file.slice(this.offset,tt);rt.readAsArrayBuffer(nt)}this.offset=tt}),done:!1}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */async function urlChunkIterator(_,$={},_e){let et,tt;typeof _=="string"?et=_:(et=_.url,tt=getRequestInitFromRequest(_));const rt=await fetch$1(et,tt);if(rt.ok){const nt=new Uint8Array(await rt.arrayBuffer());return new FileChunkIterator(nt,$)}else throw new Error(rt.statusText)}const getRequestInitFromRequest=_=>({method:_.method,headers:_.headers,body:_.body,mode:_.mode,credentials:_.credentials,cache:_.cache,redirect:_.redirect,referrer:_.referrer,integrity:_.integrity});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function isLocalPath(_){return typeof _=="string"&&_.slice(0,7)==="file://"}var empty=null;const empty$1=Object.freeze(Object.defineProperty({__proto__:null,default:empty},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(empty$1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class FileDataSource extends DataSource{constructor($,_e={}){super(),this.input=$,this.options=_e}async iterator(){if(isLocalPath(this.input)&&env().get("IS_NODE")){const $=require$$0;this.input=$.readFileSync(this.input.slice(7))}return new FileChunkIterator(this.input,this.options)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */class URLDataSource extends DataSource{constructor($,_e={}){super(),this.url=$,this.fileOptions=_e}async iterator(){return isLocalPath(this.url)?new FileDataSource(this.url,this.fileOptions).iterator():urlChunkIterator(this.url,this.fileOptions)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */function csv(_,$={}){return new CSVDataset(new URLDataSource(_),$)}function func(_){const $=iteratorFromFunction(_);return datasetFromIteratorFn(async()=>$)}function generator(_){return datasetFromIteratorFn(async()=>{const $=await _();return iteratorFromFunction(()=>$.next())})}async function webcam(_,$){return WebcamIterator.create(_,$)}async function microphone(_){return MicrophoneIterator.create(_)}/** @license See the LICENSE file. */const version$4="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const index=Object.freeze(Object.defineProperty({__proto__:null,CSVDataset,Dataset,FileDataSource,TextLineDataset,URLDataSource,array:array$1,csv,func,generator,microphone,version_data:version$4,webcam,zip},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function assertNotComplex$1(_,$){Array.isArray(_)||(_=[_]),_.forEach(_e=>{_e!=null&&assert$1(_e.dtype!=="complex64",()=>`${$} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const whereImpl$1=whereImpl$2;class MathBackendCPU extends KernelBackend{nextDataId(){return MathBackendCPU.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new DataStorage(this,engine())}write($,_e,et){this.firstUse&&(this.firstUse=!1,env().get("IS_NODE")&&warn$1(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const tt={id:this.nextDataId()};return this.data.set(tt,{values:$,dtype:et,refCount:1}),tt}makeTensorInfo($,_e,et){let tt;if(_e==="string"&&et!=null&&et.length>0&&isString$2(et[0])){const rt=et.map(nt=>encodeString(nt));tt=this.write(rt,$,_e)}else tt=this.write(et,$,_e);return{dataId:tt,shape:$,dtype:_e}}refCount($){return this.data.has($)?this.data.get($).refCount:0}incRef($){const _e=this.data.get($);_e.refCount++}decRef($){if(this.data.has($)){const _e=this.data.get($);_e.refCount--}}move($,_e,et,tt,rt){this.data.set($,{values:_e,dtype:tt,refCount:rt})}numDataIds(){return this.data.numDataIds()}async read($){return this.readSync($)}readSync($){const{dtype:_e,complexTensorInfos:et}=this.data.get($);if(_e==="complex64"){const tt=this.readSync(et.real.dataId),rt=this.readSync(et.imag.dataId);return mergeRealAndImagArrays(tt,rt)}return convertBackendValuesAndArrayBuffer(this.data.get($).values,_e)}bufferSync($){const _e=this.readSync($.dataId);if($.dtype==="string")try{const et=_e.map(tt=>decodeString(tt));return buffer$1($.shape,$.dtype,et)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return buffer$1($.shape,$.dtype,_e)}makeOutput($,_e,et){return engine().makeTensorFromTensorInfo(this.makeTensorInfo(_e,et,$),this)}disposeData($,_e=!1){if(this.data.has($)){if(this.data.get($).refCount--,!_e&&this.data.get($).refCount>0)return!1;const{complexTensorInfos:et}=this.data.get($);et!=null&&(this.disposeData(et.real.dataId,!0),this.disposeData(et.imag.dataId,!0)),this.data.delete($)}return!0}disposeIntermediateTensorInfo($){this.disposeData($.dataId)}async time($){const _e=now$2();return $(),{kernelMs:now$2()-_e}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where($){assertNotComplex$1([$],"where");const _e=this.readSync($.dataId);return whereImpl$1($.shape,_e)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}MathBackendCPU.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function simpleAbsImpl(_){const $=new Float32Array(_.length);for(let _e=0;_e<_.length;++_e)$[_e]=Math.abs(_[_e]);return $}const abs$1=_=>{const{x:$}=_.inputs,_e=_.backend;assertNotComplex$1($,"abs");let et=new Float32Array(sizeFromShape($.shape));const tt=_e.data.get($.dataId).values;return et=simpleAbsImpl(tt),_e.makeOutput(et,$.shape,$.dtype)},absConfig$1={kernelName:Abs,backendName:"cpu",kernelFunc:abs$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function createSimpleBinaryKernelImpl(_){return($,_e,et,tt,rt)=>{const nt=assertAndGetBroadcastShape($,_e),it=nt.length,st=computeStrides(nt),at=sizeFromShape(nt),ot=getTypedArrayFromDType(rt,at),dt=$.length,ht=_e.length,yt=computeStrides($),vt=computeStrides(_e),xt=getBroadcastDims$1($,nt),wt=getBroadcastDims$1(_e,nt);if(xt.length+wt.length===0)for(let Et=0;Et<ot.length;++Et)ot[Et]=_(et[Et%et.length],tt[Et%tt.length]);else for(let Et=0;Et<ot.length;++Et){const At=indexToLoc(Et,it,st),jt=At.slice(-dt);xt.forEach(Gt=>jt[Gt]=0);const kt=locToIndex(jt,dt,yt),Lt=At.slice(-ht);wt.forEach(Gt=>Lt[Gt]=0);const Bt=locToIndex(Lt,ht,vt);ot[Et]=_(et[kt],tt[Bt])}return[ot,nt]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function complex$1(_){const{inputs:$,backend:_e}=_,{real:et,imag:tt}=$,rt=_e.data.get(et.dataId).values,nt=_e.data.get(tt.dataId).values,it=_e.makeTensorInfo(et.shape,"complex64"),st=_e.data.get(it.dataId);return st.complexTensorInfos={real:_e.makeTensorInfo(et.shape,"float32",rt),imag:_e.makeTensorInfo(tt.shape,"float32",nt)},it}const complexConfig$1={kernelName:Complex,backendName:"cpu",kernelFunc:complex$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zeros(_,$,_e="float32"){if(_e==="complex64"){const tt=zeros(_,$,"float32"),rt=zeros(_,$,"float32");return complex$1({inputs:{real:tt,imag:rt},backend:_})}const et=makeZerosTypedArray(sizeFromShape($),_e);return _.makeTensorInfo($,_e,et)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function identity$d(_){const{inputs:$,backend:_e}=_,{x:et}=$;return _e.incRef(et.dataId),{dataId:et.dataId,shape:et.shape,dtype:et.dtype}}const identityConfig$1={kernelName:Identity$1,backendName:"cpu",kernelFunc:identity$d};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function real$1(_){const{inputs:$,backend:_e}=_,{input:et}=$,tt=_e.data.get(et.dataId).complexTensorInfos.real,rt=_e.data.get(tt.dataId).values;return _e.makeTensorInfo(tt.shape,tt.dtype,rt)}const realConfig$1={kernelName:Real,backendName:"cpu",kernelFunc:real$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function castImpl(_,$,_e,et){if(et==="int32"){const tt=Int32Array.from(_);return[$,"int32",tt]}if(et==="bool"){const tt=toTypedArray([0],_e),[rt,nt]=createSimpleBinaryKernelImpl((it,st)=>it!==st?1:0)($,[],_,tt,"bool");return[nt,"bool",rt]}throw new Error(`Error in Cast: failed to cast ${_e} to ${et}`)}function cast$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{dtype:rt}=et;if(rt==="complex64"){if(tt.dtype==="complex64")return identity$d({inputs:{x:tt},backend:_e});const ot=zeros(_e,tt.shape,tt.dtype),dt=cast$1({inputs:{x:tt},backend:_e,attrs:{dtype:"float32"}}),ht=complex$1({inputs:{real:dt,imag:ot},backend:_e});return _e.disposeIntermediateTensorInfo(ot),_e.disposeIntermediateTensorInfo(dt),ht}if(tt.dtype==="complex64"){const ot=real$1({inputs:{input:tt},backend:_e}),dt=cast$1({inputs:{x:ot},backend:_e,attrs:{dtype:rt}});return _e.disposeIntermediateTensorInfo(ot),dt}if(!hasEncodingLoss(tt.dtype,rt)){const ot=identity$d({inputs:{x:tt},backend:_e});return{dataId:ot.dataId,shape:ot.shape,dtype:rt}}const nt=_e.data.get(tt.dataId).values,[it,st,at]=castImpl(nt,tt.shape,tt.dtype,rt);return _e.makeTensorInfo(it,st,at)}const castConfig$1={kernelName:Cast,backendName:"cpu",kernelFunc:cast$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function binaryKernelFunc$1(_,$,_e,et){return _e==null?({inputs:tt,backend:rt})=>{const{a:nt,b:it}=tt,st=rt;assertNotComplex$1([nt,it],_);const at=st.data.get(nt.dataId).values,ot=st.data.get(it.dataId).values,dt=nt.dtype==="string"?fromUint8ToStringArray(at):at,ht=nt.dtype==="string"?fromUint8ToStringArray(ot):ot,yt=et||nt.dtype,[vt,xt]=$(nt.shape,it.shape,dt,ht,yt);return st.makeTensorInfo(xt,yt,vt)}:({inputs:tt,backend:rt})=>{const{a:nt,b:it}=tt,st=rt;if(nt.dtype==="complex64"||it.dtype==="complex64"){const at=cast$1({inputs:{x:nt},backend:st,attrs:{dtype:"complex64"}}),ot=st.data.get(at.dataId),dt=ot.complexTensorInfos.real,ht=ot.complexTensorInfos.imag,yt=st.data.get(dt.dataId).values,vt=st.data.get(ht.dataId).values,xt=cast$1({inputs:{x:it},backend:st,attrs:{dtype:"complex64"}}),wt=st.data.get(xt.dataId),Et=wt.complexTensorInfos.real,At=wt.complexTensorInfos.imag,jt=st.data.get(Et.dataId).values,kt=st.data.get(At.dataId).values,[Lt,Bt,Gt]=_e(nt.shape,it.shape,yt,vt,jt,kt),er=st.makeTensorInfo(Gt,"float32",Lt),tr=st.makeTensorInfo(Gt,"float32",Bt),ar=complex$1({inputs:{real:er,imag:tr},backend:st});return st.disposeIntermediateTensorInfo(at),st.disposeIntermediateTensorInfo(xt),st.disposeIntermediateTensorInfo(er),st.disposeIntermediateTensorInfo(tr),ar}else{const at=st.data.get(nt.dataId).values,ot=st.data.get(it.dataId).values,dt=et||nt.dtype,[ht,yt]=$(nt.shape,it.shape,at,ot,dt);return st.makeTensorInfo(yt,dt,ht)}}}function createComplexBinaryKernelImpl(_){return($,_e,et,tt,rt,nt)=>{const it=assertAndGetBroadcastShape($,_e),st=sizeFromShape(it),at=it.length,ot=computeStrides(it),dt=getTypedArrayFromDType("float32",st),ht=getTypedArrayFromDType("float32",st),yt=getBroadcastDims$1($,it),vt=getBroadcastDims$1(_e,it),xt=mergeRealAndImagArrays(et,tt),wt=mergeRealAndImagArrays(rt,nt),Et=$.length,At=computeStrides($),jt=_e.length,kt=computeStrides(_e);if(yt.length+vt.length===0)for(let Lt=0;Lt<dt.length;Lt++){const Bt=Lt%xt.length,Gt=Lt%wt.length,er=_(xt[Bt*2],xt[Bt*2+1],wt[Gt*2],wt[Gt*2+1]);dt[Lt]=er.real,ht[Lt]=er.imag}else for(let Lt=0;Lt<dt.length;Lt++){const Bt=indexToLoc(Lt,at,ot),Gt=Bt.slice(-Et);yt.forEach(lt=>Gt[lt]=0);const er=locToIndex(Gt,Et,At),tr=Bt.slice(-jt);vt.forEach(lt=>tr[lt]=0);const ar=locToIndex(tr,jt,kt),Mt=_(xt[er*2],xt[er*2+1],wt[ar*2],wt[ar*2+1]);dt[Lt]=Mt.real,ht[Lt]=Mt.imag}return[dt,ht,it]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const addImpl=createSimpleBinaryKernelImpl((_,$)=>_+$),addComplexImpl=createComplexBinaryKernelImpl((_,$,_e,et)=>({real:_+_e,imag:$+et})),add$1=binaryKernelFunc$1(Add$1,addImpl,addComplexImpl),addConfig$1={kernelName:Add$1,backendName:"cpu",kernelFunc:add$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bincountImpl(_,$,_e,et,tt){const rt=sizeFromShape(et),nt=makeZerosTypedArray(tt,_e);for(let it=0;it<_.length;it++){const st=_[it];if(st<0)throw new Error("Input x must be non-negative!");st>=tt||(rt>0?nt[st]+=$[it]:nt[st]+=1)}return nt}function bincountReduceImpl(_,$,_e,et=!1){const tt=_.shape[0],rt=_.shape[1],nt=buffer$1([tt,_e],$.dtype);for(let it=0;it<tt;it++)for(let st=0;st<rt;st++){const at=_.get(it,st);if(at<0)throw new Error("Input x must be non-negative!");at>=_e||(et?nt.set(1,it,at):$.size>0?nt.set(nt.get(it,at)+$.get(it,st),it,at):nt.set(nt.get(it,at)+1,it,at))}return nt}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bitwiseAndImpl=createSimpleBinaryKernelImpl((_,$)=>_&$),bitwiseAnd$1=binaryKernelFunc$1(BitwiseAnd,bitwiseAndImpl),bitwiseAndConfig$1={kernelName:BitwiseAnd,backendName:"cpu",kernelFunc:bitwiseAnd$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function createSimpleUnaryImpl(_){return($,_e,et)=>{const tt=getArrayFromDType(_e,$.length);for(let rt=0;rt<$.length;++rt)tt[rt]=_($[rt],et);return tt}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unaryKernelFunc$1(_,$,_e){const et=createSimpleUnaryImpl($);return unaryKernelFuncFromImpl(_,et,_e)}function unaryKernelFuncFromImpl(_,$,_e){return({inputs:et,attrs:tt,backend:rt})=>{const{x:nt}=et;assertNotComplex$1(nt,_);const it=rt,st=it.data.get(nt.dataId).values;let at;if(nt.dtype==="string"){if(!Array.isArray(st))throw new Error("String tensor's value was not an instance of Array");at=fromUint8ToStringArray(st)}else at=st;const ot=_e||nt.dtype,dt=$(at,ot,tt);return it.makeTensorInfo(nt.shape,ot,dt)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ceilImpl=createSimpleUnaryImpl(_=>Math.ceil(_)),ceil$1=unaryKernelFuncFromImpl(Ceil,ceilImpl),ceilConfig$1={kernelName:Ceil,backendName:"cpu",kernelFunc:ceil$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concatImpl$1(_,$,_e,et){const tt=getArrayFromDType(_e,sizeFromShape($));if(et&&_e!=="string"){let rt=0;_.forEach(nt=>{const it=sizeFromShape(nt.shape);tt.set(nt.vals,rt),rt+=it})}else{let rt=0;_.forEach(nt=>{const it=_e==="string"?fromUint8ToStringArray(nt.vals):nt.vals;let st=0;for(let at=0;at<nt.shape[0];++at){const ot=at*$[1]+rt;for(let dt=0;dt<nt.shape[1];++dt)tt[ot+dt]=it[st++]}rt+=nt.shape[1]})}return tt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const equalImpl=createSimpleBinaryKernelImpl((_,$)=>_===$?1:0),equal$1=binaryKernelFunc$1(Equal,equalImpl,null,"bool"),equalConfig$1={kernelName:Equal,backendName:"cpu",kernelFunc:equal$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expImpl=createSimpleUnaryImpl(_=>Math.exp(_)),exp$2=unaryKernelFuncFromImpl(Exp,expImpl,"float32"),expConfig$1={kernelName:Exp,backendName:"cpu",kernelFunc:exp$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expm1Impl=createSimpleUnaryImpl(_=>Math.expm1(_)),expm1$1=unaryKernelFuncFromImpl(Expm1,expm1Impl),expm1Config$1={kernelName:Expm1,backendName:"cpu",kernelFunc:expm1$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const floorImpl=createSimpleUnaryImpl(_=>Math.floor(_)),floor$1=unaryKernelFuncFromImpl(Floor,floorImpl),floorConfig$1={kernelName:Floor,backendName:"cpu",kernelFunc:floor$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const floorDivImpl=createSimpleBinaryKernelImpl((_,$)=>Math.floor(_/$)),floorDiv$1=binaryKernelFunc$1(FloorDiv,floorDivImpl,null,"int32"),floorDivConfig$1={kernelName:FloorDiv,backendName:"cpu",kernelFunc:floorDiv$1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherNdImpl(_,$,_e,et,tt,rt,nt,it,st){const at=buffer$1([et,rt],_e);for(let ot=0;ot<et;ot++){const dt=[];let ht=0;for(let yt=0;yt<tt;yt++){const vt=_[ot*tt+yt];ht+=vt*nt[yt],dt.push(vt)}if(ht<0||ht>=st/rt)throw new Error(`Invalid indices: ${dt} does not index into ${it}`);for(let yt=0;yt<rt;yt++)at.values[ot*rt+yt]=$.get(...$.indexToLoc(ht*rt+yt))}return at}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherV2Impl(_,$,_e){const et=buffer$1(_e,_.dtype);for(let tt=0;tt<et.size;++tt){const nt=et.indexToLoc(tt).slice(),it=nt[0],st=nt[2],at=$.locToIndex([it,st]);nt[2]=$.values[at];const ot=_.locToIndex(nt);0<=ot&&ot<_.values.length&&(et.values[tt]=_.values[ot])}return et}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const greaterImpl=createSimpleBinaryKernelImpl((_,$)=>_>$?1:0),greater$1=binaryKernelFunc$1(Greater,greaterImpl,null,"bool"),greaterConfig$1={kernelName:Greater,backendName:"cpu",kernelFunc:greater$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const greaterEqualImpl=createSimpleBinaryKernelImpl((_,$)=>_>=$?1:0),greaterEqual$1=binaryKernelFunc$1(GreaterEqual,greaterEqualImpl,null,"bool"),greaterEqualConfig$1={kernelName:GreaterEqual,backendName:"cpu",kernelFunc:greaterEqual$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lessImpl=createSimpleBinaryKernelImpl((_,$)=>_<$?1:0),less$1=binaryKernelFunc$1(Less,lessImpl,null,"bool"),lessConfig$1={kernelName:Less,backendName:"cpu",kernelFunc:less$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lessEqualImpl=createSimpleBinaryKernelImpl((_,$)=>_<=$?1:0),lessEqual$1=binaryKernelFunc$1(LessEqual,lessEqualImpl,null,"bool"),lessEqualConfig$1={kernelName:LessEqual,backendName:"cpu",kernelFunc:lessEqual$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function linSpaceImpl(_,$,_e){const et=($-_)/(_e-1),tt=makeZerosTypedArray(_e,"float32");tt[0]=_;for(let rt=1;rt<tt.length;rt++)tt[rt]=tt[rt-1]+et;return tt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logImpl=createSimpleUnaryImpl(_=>Math.log(_)),log$2=unaryKernelFuncFromImpl(Log,logImpl),logConfig$1={kernelName:Log,backendName:"cpu",kernelFunc:log$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxImpl$1(_,$,_e,et){const tt=getTypedArrayFromDType(et,sizeFromShape(_e));for(let rt=0;rt<tt.length;++rt){const nt=rt*$;let it=_[nt];for(let st=0;st<$;++st){const at=_[nt+st];(Number.isNaN(at)||at>it)&&(it=at)}tt[rt]=it}return tt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maximumImpl=createSimpleBinaryKernelImpl((_,$)=>Math.max(_,$)),maximum$1=binaryKernelFunc$1(Maximum$1,maximumImpl),maximumConfig$1={kernelName:Maximum$1,backendName:"cpu",kernelFunc:maximum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const minimumImpl=createSimpleBinaryKernelImpl((_,$)=>Math.min(_,$)),minimum$1=binaryKernelFunc$1(Minimum$1,minimumImpl),minimumConfig$1={kernelName:Minimum$1,backendName:"cpu",kernelFunc:minimum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const multiplyImpl=createSimpleBinaryKernelImpl((_,$)=>_*$),multiplyComplexImpl=createComplexBinaryKernelImpl((_,$,_e,et)=>({real:_*_e-$*et,imag:_*et+$*_e})),multiply$1=binaryKernelFunc$1(Multiply$1,multiplyImpl,multiplyComplexImpl),multiplyConfig$1={kernelName:Multiply$1,backendName:"cpu",kernelFunc:multiply$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function negImpl(_,$,_e){const et=createScalarValue(-1,_e);return multiplyImpl([],$,et,_,_e)}function neg$1(_){const{inputs:$,backend:_e}=_,{x:et}=$;assertNotComplex$1(et,"neg");const tt=_e.data.get(et.dataId).values,[rt,nt]=negImpl(tt,et.shape,et.dtype);return _e.makeTensorInfo(nt,et.dtype,rt)}const negConfig$1={kernelName:Neg,backendName:"cpu",kernelFunc:neg$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const notEqualImpl=createSimpleBinaryKernelImpl((_,$)=>_!==$?1:0),notEqual$1=binaryKernelFunc$1(NotEqual,notEqualImpl,null,"bool"),notEqualConfig$1={kernelName:NotEqual,backendName:"cpu",kernelFunc:notEqual$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transposeImpl$1(_,$,_e,et,tt){const rt=$.length,nt=sizeFromShape($),it=computeStrides($),st=computeStrides(tt),at=getTypedArrayFromDType(_e,sizeFromShape(tt));for(let ot=0;ot<nt;++ot){const dt=indexToLoc(ot,rt,it),ht=new Array(dt.length);for(let vt=0;vt<ht.length;vt++)ht[vt]=dt[et[vt]];const yt=locToIndex(ht,rt,st);at[yt]=_[ot]}return at}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transpose$1(_){const{inputs:$,attrs:_e,backend:et}=_,{x:tt}=$,{perm:rt}=_e;assertNotComplex$1(tt,"transpose");const nt=tt.shape.length,it=new Array(nt);for(let dt=0;dt<it.length;dt++)it[dt]=tt.shape[rt[dt]];const st=et.data.get(tt.dataId).values,at=transposeImpl$1(st,tt.shape,tt.dtype,rt,it);return{dataId:et.write(at,it,tt.dtype),shape:it,dtype:tt.dtype}}const transposeConfig$1={kernelName:Transpose,backendName:"cpu",kernelFunc:transpose$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function prodImpl(_,$,_e,et){const[tt,rt]=computeOutAndReduceShapes(_,et),nt=upcastType($,"int32"),it=makeZerosTypedArray(sizeFromShape(tt),nt),st=sizeFromShape(rt);for(let at=0;at<it.length;++at){const ot=at*st;let dt=1;for(let ht=0;ht<st;++ht)dt*=_e[ot+ht];it[at]=dt}return{outVals:it,outShape:tt,outDtype:nt}}function prod$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{axis:rt,keepDims:nt}=et;assertNotComplex$1(tt,"prod");const it=tt.shape.length,st=parseAxisParam(rt,tt.shape),at=getAxesPermutation(st,it);let ot=st,dt=tt;const ht=[];at!=null&&(dt=transpose$1({inputs:{x:tt},backend:_e,attrs:{perm:at}}),ht.push(dt),ot=getInnerMostAxes(ot.length,it));const yt=_e.data.get(dt.dataId).values,{outVals:vt,outShape:xt,outDtype:wt}=prodImpl(dt.shape,dt.dtype,yt,ot);let Et=xt;return nt&&(Et=expandShapeToKeepDim(xt,st)),ht.forEach(At=>_e.disposeIntermediateTensorInfo(At)),_e.makeTensorInfo(Et,wt,vt)}const prodConfig$1={kernelName:Prod,backendName:"cpu",kernelFunc:prod$1};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function validateIndices(_,$,_e){_.forEach((et,tt)=>{if(et<0||et>=_e){const rt=indexToLoc(tt,$.length,computeStrides($)).join(",");throw new Error(`indices[${rt}] = ${et} is not in [0, ${_e})`)}})}function validateSplits(_,$){for(let _e=0;_e<_.length;++_e){const et=_[_e],tt=_e===_.length-1?$:_[_e+1].length;if(et.length===0)throw new Error("Ragged splits may not be empty");if(et[0]<0)throw new Error("Ragged splits must be non-negative");if(et[et.length-1]>tt)throw new Error("Ragged splits must not point past values");for(let rt=1;rt<et.length;++rt)if(et[rt-1]>et[rt])throw new Error("Ragged splits must be sorted in ascending order")}}function makeSplits(_,$,_e,et){const tt=[];let rt=0;const nt=$.length-1+_e.length,it=new Array(nt).fill(null).map(()=>[0]);validateSplits(_e,et);let st=1;for(let at=0;at<$.length-1;++at){st*=$[at];const ot=$[at+1];for(let dt=1;dt<st+1;++dt)it[at].push(dt*ot)}for(let at=0;at<_.length;++at){let ot=_[at],dt=_[at]+1;for(let ht=0;ht<_e.length;++ht){const yt=_e[ht],vt=ht+$.length-1;if(vt>=0){const xt=it[vt],wt=xt[xt.length-1]-yt[ot];for(let Et=ot;Et<dt;++Et)it[vt].push(yt[Et+1]+wt)}ot=yt[ot],dt=yt[dt]}dt!==ot&&(tt.push([ot,dt]),rt+=dt-ot)}return{outSplits:it,valueSlices:tt,numValues:rt}}function getSplits(_){const $=[];for(let _e=0;_e<_.length;++_e){const et=_[_e].length,tt=getArrayFromDType("int32",et);$.push(tt),_[_e].forEach((rt,nt)=>tt[nt]=rt)}return $}function computeFlatOuterDims(_,$){const _e=_.slice(0,$);for(;_e.length<$;)_e.push(1);for(let et=$;et<_.length;et++)_e[$-1]*=_[et];return _e}function writeValueSlices(_,$,_e,et,tt,rt){const nt=computeFlatOuterDims($,2)[1],it=computeFlatOuterDims(rt,2)[1];let st=0;for(const at of _e)for(let ot=at[0];ot<at[1];++ot){for(let dt=0;dt<et;++dt)tt[st*it+dt]=_[ot*nt+dt];++st}}function getValues(_,$,_e,et,tt){const rt=$.slice();rt[0]=tt;const nt=getArrayFromDType(_e,sizeFromShape(rt)),it=_.length,st=it===0?0:it/$[0];return writeValueSlices(_,$,et,st,nt,rt),[nt,rt]}function raggedGatherImpl(_,$,_e,et,tt,rt,nt,it){if(_.length===0)throw new Error("paramsNestedSplits must be non empty");if($[0].length===0)throw new Error("Split tensors must not be scalars");const st=$[0][0]-1;if(validateIndices(rt,nt,st),et.length===0)throw new Error("params.rank must be nonzero");const at=et[0],{outSplits:ot,valueSlices:dt,numValues:ht}=makeSplits(rt,nt,_,at),yt=getSplits(ot),vt=getValues(_e,et,tt,dt,ht);return[yt,vt[0],vt[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const INT32_MAX=2147483647;function raggedRangeImpl(_,$,_e,et,tt,rt,nt){if($.length>1)throw new Error("starts must be a scalar or vector");if(tt.length>1)throw new Error("limits must be a scalar or vector");if(nt.length>1)throw new Error("deltas must be a scalar or vector");const it=$.length===0,st=tt.length===0,at=nt.length===0,ot=[];it||ot.push($[0]),st||ot.push(tt[0]),at||ot.push(nt[0]);for(let wt=1;wt<ot.length;++wt)if(ot[wt]!==ot[wt-1])throw new Error("starts, limits, and deltas must have the same shape");const dt=ot.length===0?1:ot[0],ht=getArrayFromDType("int32",dt+1);ht[0]=0;for(let wt=0;wt<dt;++wt){const Et=it?_[0]:_[wt],At=st?et[0]:et[wt],jt=at?rt[0]:rt[wt];if(jt===0)throw new Error("Requires delta != 0");let kt;if(jt>0&&At<Et||jt<0&&At>Et)kt=0;else if(kt=Math.ceil(Math.abs((At-Et)/jt)),kt>INT32_MAX)throw new Error(`Requires ((limit - start) / delta) <= ${INT32_MAX}`);ht[wt+1]=ht[wt]+kt}const yt=ht[dt],vt=getArrayFromDType(_e,yt);let xt=0;for(let wt=0;wt<dt;++wt){const Et=ht[wt+1]-ht[wt];let At=it?_[0]:_[wt];const jt=at?rt[0]:rt[wt];for(let kt=0;kt<Et;++kt)vt[xt++]=At,At+=jt}return[ht,vt]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var RowPartitionType=RowPartitionType$1;class RaggedTensorToTensorOp{constructor($,_e,et,tt,rt,nt,it,st,at,ot){this.shape=$,this.shapeShape=_e,this.values=et,this.valuesShape=tt,this.valuesDType=rt,this.defaultValue=nt,this.defaultValueShape=it,this.rowPartitionValues=st,this.rowPartitionValuesShapes=at,this.rowPartitionTypes=getRowPartitionTypesHelper(ot),this.raggedRank=getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension($){return this.rowPartitionTypes[0]===RowPartitionType.FIRST_DIM_SIZE?this.rowPartitionTypes[$+1]:this.rowPartitionTypes[$]}getRowPartitionTensor($){return this.rowPartitionTypes[0]===RowPartitionType.FIRST_DIM_SIZE?this.rowPartitionValues[$+1]:this.rowPartitionValues[$]}getMaxWidth($){const _e=this.getRowPartitionTensor($-1);switch(this.getRowPartitionTypeByDimension($-1)){case RowPartitionType.VALUE_ROWIDS:return RaggedTensorToTensorOp.getMaxWidthValueRowID(_e);case RowPartitionType.ROW_SPLITS:return RaggedTensorToTensorOp.getMaxWidthRowSplit(_e);default:throw new Error(`Cannot handle partition type ${RowPartitionType[this.getRowPartitionTypeByDimension($-1)]}`)}}static getMaxWidthRowSplit($){const _e=$.length;if(_e===0||_e===1)return 0;let et=0;for(let tt=0;tt<_e-1;++tt){const rt=$[tt+1]-$[tt];rt>et&&(et=rt)}return et}static getMaxWidthValueRowID($){const _e=$.length;if(_e===0)return 0;let et=0,tt=$[0],rt=0;for(let nt=1;nt<_e;++nt){const it=$[nt];it!==tt&&(tt=it,rt=Math.max(nt-et,rt),et=nt)}return Math.max(_e-et,rt)}tensorShapeFromTensor($,_e,et=!0){if(_e.length===0){if($[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return makeShape($,et)}calculateOutputSize($){const _e=this.valuesShape,et=this.defaultValueShape;validateDefaultValueShape(et,_e);const tt=this.tensorShapeFromTensor(this.shape,this.shapeShape),nt=combineRaggedTensorToTensorShapes(this.raggedRank,tt,_e);nt[0]<0&&(nt[0]=$);for(let it=1;it<=this.raggedRank;++it)nt[it]<0&&(nt[it]=this.getMaxWidth(it));return nt}calculateFirstParentOutputIndex($,_e,et){const tt=Math.min($,et),rt=[];let nt=0;for(let it=0;it<tt;++it,nt+=_e)rt.push(nt);for(let it=tt;it<$;++it)rt.push(-1);return assert$1(rt.length===$,()=>"Final length of result must be equal to firstDimension."),rt}calculateOutputIndexRowSplit($,_e,et,tt){const rt=$.length,nt=[];for(let it=0;it<rt-1;++it){const st=$[it+1]-$[it];let at=Math.min(tt,st),ot=_e[it];ot===-1&&(at=0);for(let dt=0;dt<at;++dt)nt.push(ot),ot+=et;for(let dt=0;dt<st-at;++dt)nt.push(-1)}if(rt>0&&nt.length!==$[rt-1])throw new Error("Invalid row split size.");return nt}calculateOutputIndexValueRowID($,_e,et,tt){const rt=$.length,nt=[];if(rt===0)return[];let it=0,st=$[0];if(st>=_e.length)throw new Error(`Got currentValueRowId=${st}, which is not less than ${_e.length}`);let at=_e[st];nt.push(at);for(let ot=1;ot<rt;++ot){const dt=$[ot];if(dt===st)at>=0&&(++it,it<tt?at+=et:at=-1);else{if(it=0,st=dt,dt>=_e.length)throw new Error(`Got nextValueRowId=${dt} which is not less than ${_e.length}`);at=_e[dt]}nt.push(at)}if(nt.length!==$.length)throw new Error("Invalid row ids.");return nt}calculateOutputIndex($,_e,et,tt){const rt=this.getRowPartitionTensor($),nt=this.getRowPartitionTypeByDimension($);switch(nt){case RowPartitionType.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(rt,_e,et,tt);case RowPartitionType.ROW_SPLITS:if(rt.length-1>_e.length)throw new Error(`Row partition size is greater than output size: ${rt.length-1} > ${_e.length}`);return this.calculateOutputIndexRowSplit(rt,_e,et,tt);default:throw new Error(`Unsupported partition type: ${RowPartitionType[nt]}`)}}getFirstDimensionSize(){const $=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const _e=this.rowPartitionTypes[0];switch(_e){case RowPartitionType.FIRST_DIM_SIZE:return $[0];case RowPartitionType.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case RowPartitionType.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${RowPartitionType[_e]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const _e=this.getFirstDimensionSize(),et=this.calculateOutputSize(_e),tt=new Array(this.raggedRank+1);tt[tt.length-1]=1;for(let st=tt.length-2;st>=0;--st)tt[st]=tt[st+1]*et[st+1];const rt=makeShape(et,!1),nt=getArrayFromDType(this.valuesDType,sizeFromShape(rt));if(tt[0]*et[0]>0){let st=this.calculateFirstParentOutputIndex(_e,tt[0],et[0]);for(let at=1;at<=this.raggedRank;++at)st=this.calculateOutputIndex(at-1,st,tt[at],et[at]);this.setOutput(this.raggedRank,st,nt,rt)}return[rt,nt]}setOutput($,_e,et,tt){if(et.length===0)return;const rt=this.values,nt=et;let it=tt.slice();it=it.slice($+1);const st=sizeFromShape(it),at=_e.length;let ot=this.defaultValue;if(ot.length!==st&&ot.length!==1){const vt=this.defaultValueShape;tidy(()=>{const xt=reshape$3(ot,vt);ot=broadcastTo(xt,it).dataSync()})}let dt=0,ht=0,yt=0;for(let vt=0;vt<=at;++vt){let xt=vt<at?_e[vt]:-1;if(xt===yt){++yt;continue}if(ht<yt){const wt=rt.subarray(dt*st),Et=nt.subarray(ht*st),At=(yt-ht)*st;copyArray(Et,wt,At)}if(vt>=at){const wt=et.length;xt=Math.floor(wt/st)}if(xt>yt)if(this.defaultValue.length===1)nt.subarray(yt*st,xt*st).fill(this.defaultValue[0]),yt=xt;else for(;xt>yt;){const wt=nt.slice(yt*st);copyArray(wt,ot,st),++yt}xt<0?(dt=vt+1,ht=yt):(dt=vt,ht=yt,yt=ht+1)}}}function copyArray(_,$,_e){for(let et=0;et<_e;et++)_[et]=$[et]}function makeShape(_,$){const _e=[];for(let et of _){if(et<0){if(!$)throw new Error(`Dimension ${et} must be >= 0`);if(et<-1)throw new Error(`Dimension ${et} must be >= -1`);et=-1}_e.push(et)}return _e}function raggedTensorToTensorImpl(_,$,_e,et,tt,rt,nt,it,st,at){return new RaggedTensorToTensorOp(_,$,_e,et,tt,rt,nt,it,st,at).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rangeImpl(_,$,_e,et){const tt=_===$,rt=_<$&&_e<0,nt=$<_&&_e>1;if(tt||rt||nt)return makeZerosTypedArray(0,et);const it=Math.abs(Math.ceil(($-_)/_e)),st=makeZerosTypedArray(it,et);$<_&&_e===1&&(_e=-1),st[0]=_;for(let at=1;at<st.length;at++)st[at]=st[at-1]+_e;return st}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rsqrtImpl=createSimpleUnaryImpl(_=>1/Math.sqrt(_)),rsqrt$1=unaryKernelFuncFromImpl(Rsqrt,rsqrtImpl),rsqrtConfig$1={kernelName:Rsqrt,backendName:"cpu",kernelFunc:rsqrt$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function scatterImpl(_,$,_e,et,tt,rt,nt,it,st,at){const ot=[et/tt,tt],dt=_.values,ht=$.values;if(et===0)return buffer$1(_e,$.dtype);const yt=st instanceof TensorBuffer?st:buffer$1(ot,$.dtype);typeof st=="string"||typeof st=="number"?yt.values.fill(st):typeof st=="boolean"&&yt.values.fill(+st);for(let vt=0;vt<rt;vt++){const xt=[];let wt=0;for(let Et=0;Et<nt;Et++){const At=dt[vt*nt+Et];xt.push(At),wt+=At*it[Et]}if(wt<0||wt>=et/tt)throw new Error(`Invalid indices: ${xt} does not index into ${_e}`);for(let Et=0;Et<tt;Et++)at?yt.values[wt*tt+Et]+=ht[vt*tt+Et]:yt.values[wt*tt+Et]=$.rank===0?ht[0]:ht[vt*tt+Et]}return yt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sigmoidImpl=createSimpleUnaryImpl(_=>1/(1+Math.exp(-_))),sigmoid$1=unaryKernelFunc$1(Sigmoid$1,_=>1/(1+Math.exp(-_))),sigmoidConfig$1={kernelName:Sigmoid$1,backendName:"cpu",kernelFunc:sigmoid$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sliceImpl(_,$,_e,et,tt){const rt=isSliceContinous(et,$,_e),nt=sizeFromShape(_e),it=computeStrides(et);if(rt){const dt=computeFlatOffset($,it);return tt==="string"?_.slice(dt,dt+nt):_.subarray(dt,dt+nt)}const st=tt==="string"?fromUint8ToStringArray(_):_,at=buffer$1(et,tt,st),ot=buffer$1(_e,tt);for(let dt=0;dt<ot.size;++dt){const ht=ot.indexToLoc(dt),yt=ht.map((vt,xt)=>vt+$[xt]);ot.set(at.get(...yt),...ht)}return tt==="string"?fromStringArrayToUint8(ot.values):ot.values}function slice$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{begin:rt,size:nt}=et;assertNotComplex$1(tt,"slice");const[it,st]=parseSliceParams(tt,rt,nt);assertParamsValid(tt,it,st);const at=_e.data.get(tt.dataId).values,ot=sliceImpl(at,it,st,tt.shape,tt.dtype);return _e.makeTensorInfo(st,tt.dtype,ot)}const sliceConfig$1={kernelName:Slice,backendName:"cpu",kernelFunc:slice$1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseFillEmptyRowsImpl(_,$,_e,et,tt,rt,nt){const it=$[0],st=rt[0],at=new Array(st),ot=new Array(it),dt=$[1];if(st===0){if(it!==0)throw new Error(getSparseFillEmptyRowsIndicesDenseShapeMismatch(it));const wt=getArrayFromDType(_e,0),Et=getArrayFromDType(tt,0);return[wt,[0,dt],Et,at,ot]}let ht=!0,yt=0;const vt=new Array(st).fill(0);for(let wt=0;wt<it;++wt){const Et=_[wt*dt];if(Et<0)throw new Error(getSparseFillEmptyRowsNegativeIndexErrorMessage(wt,Et));if(Et>=st)throw new Error(getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(wt,Et,st));++vt[Et],ht=ht&&Et>=yt,yt=Et}let xt=!0;for(let wt=0;wt<st;++wt){const Et=vt[wt]===0;at[wt]=Et,xt=xt&&!Et,vt[wt]=Math.max(vt[wt],1),wt>0&&(vt[wt]+=vt[wt-1])}if(xt&&ht){const wt=_,Et=et;for(let At=0;At<it;++At)ot[At]=At;return[wt,[it,dt],Et,at,ot]}else{const wt=vt[st-1],Et=getArrayFromDType(_e,wt*dt),At=getArrayFromDType(tt,wt),jt=new Array(st).fill(0);for(let kt=0;kt<it;++kt){const Lt=_[kt*dt],Bt=jt[Lt],Gt=(Lt===0?0:vt[Lt-1])+Bt;jt[Lt]++;for(let er=0;er<dt;++er)Et[Gt*dt+er]=_[kt*dt+er];At[Gt]=et[kt],ot[kt]=Gt}for(let kt=0;kt<st;++kt)if(jt[kt]===0){const Bt=kt===0?0:vt[kt-1];Et[Bt*dt+0]=kt;for(let Gt=1;Gt<dt;++Gt)Et[Bt*dt+Gt]=0;At[Bt]=nt}return[Et,[wt,dt],At,at,ot]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseReshapeImpl(_,$,_e,et,tt){const rt=sizeFromShape(et),nt=$[0],it=tt.length,st=[];let at=1,ot=-1;for(let wt=0;wt<it;++wt){const Et=tt[wt];if(Et===-1){if(ot!==-1)throw new Error(getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(ot,wt));ot=wt,st.push(1)}else{if(Et<0)throw new Error(getSparseReshapeNegativeOutputDimErrorMessage(wt,Et));at*=Et,st.push(Et)}}if(ot!==-1){if(at<=0)throw new Error(getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());const wt=Math.trunc(rt/at);if(at*wt!==rt)throw new Error(getSparseReshapeInputOutputMultipleErrorMessage(et,st));st[ot]=wt}if(sizeFromShape(st)!==rt)throw new Error(getSparseReshapeInputOutputMismatchErrorMessage(et,st));const ht=et.length,yt=[];if(ht>0){yt[ht-1]=1;for(let wt=ht-2;wt>=0;--wt)yt[wt]=yt[wt+1]*et[wt+1]}const vt=[];if(it>0){vt[it-1]=1;for(let wt=it-2;wt>=0;--wt)vt[wt]=vt[wt+1]*st[wt+1]}const xt=getArrayFromDType(_e,nt*it);for(let wt=0;wt<nt;++wt){let Et=0;for(let At=0;At<ht;++At)Et+=_[wt*ht+At]*yt[At];for(let At=0;At<it;++At)xt[wt*it+At]=Math.trunc(Et/vt[At]),Et%=vt[At]}return[xt,[nt,it],st]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseSegmentReductionImpl(_,$,_e,et,tt,rt=!1,nt=0){const it=et.length,st=[$[0],_.length/$[0]],at=st[1],dt=it>0?tt[it-1]+1:0;if(dt<0)throw new Error(getSparseSegmentReductionNegativeSegmentIdsErrorMessage());const ht=$.slice();ht[0]=dt;const yt=ht.reduce((jt,kt)=>jt*kt,1),vt=getArrayFromDType(_e,yt);if(it===0)return dt>0&&vt.fill(nt),[vt,ht];if(dt<=0)throw new Error(getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let xt=0,wt=1,Et=0,At=tt[xt];for(;;){let jt=0;if(wt<it){if(jt=tt[wt],At===jt){++wt;continue}if(At>=jt)throw new Error(getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(At<0||At>=dt)throw new Error(getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(At,dt));At>Et&&vt.fill(nt,Et*at,At*at);for(let kt=xt;kt<wt;++kt){const Lt=et[kt];if(Lt<0||Lt>=st[0])throw new Error(getSparseSegmentReductionIndicesOutOfRangeErrorMessage(kt,et[kt],st[0]));for(let Bt=0;Bt<at;Bt++)vt[At*at+Bt]+=_[Lt*at+Bt]}if(rt)for(let kt=0;kt<at;kt++)vt[At*at+kt]/=wt-xt;if(xt=wt,++wt,Et=At+1,At=jt,wt>it)break}return Et<dt&&vt.fill(nt,Et*at,dt*at),[vt,ht]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sqrtImpl=createSimpleUnaryImpl(_=>Math.sqrt(_)),sqrt$3=unaryKernelFunc$1(Sqrt,_=>Math.sqrt(_)),sqrtConfig$1={kernelName:Sqrt,backendName:"cpu",kernelFunc:sqrt$3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const squaredDifferenceImpl=createSimpleBinaryKernelImpl((_,$)=>{const _e=_-$;return _e*_e}),squaredDifference$1=binaryKernelFunc$1(SquaredDifference,squaredDifferenceImpl),squaredDifferenceConfig$1={kernelName:SquaredDifference,backendName:"cpu",kernelFunc:squaredDifference$1};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const staticRegexReplaceImpl=createSimpleUnaryImpl((_,$)=>{const{pattern:_e,replaceGlobal:et,rewrite:tt}=$;return _.replace(new RegExp(_e,et?"g":""),tt)}),staticRegexReplace$1=unaryKernelFuncFromImpl(StaticRegexReplace,staticRegexReplaceImpl),staticRegexReplaceConfig$1={kernelName:StaticRegexReplace,backendName:"cpu",kernelFunc:staticRegexReplace$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stridedSliceImpl(_,$,_e,et){const tt=buffer$1(_,$.dtype);for(let rt=0;rt<tt.size;rt++){const nt=tt.indexToLoc(rt),it=new Array(nt.length);for(let st=0;st<it.length;st++)it[st]=nt[st]*_e[st]+et[st];tt.set($.get(...it),...nt)}return tt}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class StringNGramsOp{constructor($,_e,et,tt,rt,nt){this.separator=encodeString($),this.nGramWidths=_e,this.leftPad=encodeString(et),this.rightPad=encodeString(tt),this.padWidth=rt,this.preserveShort=nt}getPadWidth($){return Math.min(this.padWidth<0?$-1:this.padWidth,$-1)}getNumNGrams($,_e){const et=this.getPadWidth(_e);return Math.max(0,$+2*et-_e+1)}createNGrams($,_e,et,tt,rt,nt){for(let it=0;it<rt;++it){const st=this.getPadWidth(nt),at=Math.max(0,st-it),ot=Math.max(0,st-(rt-(it+1))),dt=nt-(at+ot),ht=_e+(at>0?0:it-st);let yt=0;yt+=at*this.leftPad.length;for(let At=0;At<dt;++At)yt+=$[ht+At].length;yt+=ot*this.rightPad.length;const vt=at+ot+dt-1;yt+=vt*this.separator.length,et[tt+it]=new Uint8Array(yt);const xt=et[tt+it];let wt=0;const Et=At=>At.forEach(jt=>xt[wt++]=jt);for(let At=0;At<at;++At)Et(this.leftPad),Et(this.separator);for(let At=0;At<dt-1;++At)Et($[ht+At]),Et(this.separator);if(dt>0){Et($[ht+dt-1]);for(let At=0;At<ot;++At)Et(this.separator),Et(this.rightPad)}else{for(let At=0;At<ot-1;++At)Et(this.rightPad),Et(this.separator);Et(this.rightPad)}}}compute($,_e){const et=$.length,tt=_e.length;if(tt>0){let st=_e[0];if(st!==0)throw new Error(`First split value must be 0, got ${st}`);for(let at=1;at<tt;++at){let ot=_e[at]>=st;if(ot=ot&&_e[at]<=et,!ot)throw new Error(`Invalid split value ${_e[at]}, must be in [${st}, ${et}]`);st=_e[at]}if(st!==et)throw new Error(`Last split value must be data size. Expected ${et}, got ${st}`)}const rt=tt-1,nt=getArrayFromDType("int32",tt);if(et===0||tt===0){const st=new Array(et);for(let at=0;at<=rt;++at)nt[at]=0;return[st,nt]}nt[0]=0;for(let st=1;st<=rt;++st){const at=_e[st]-_e[st-1];let ot=0;this.nGramWidths.forEach(dt=>{ot+=this.getNumNGrams(at,dt)}),this.preserveShort&&at>0&&ot===0&&(ot=1),nt[st]=nt[st-1]+ot}const it=new Array(nt[rt]);for(let st=0;st<rt;++st){const at=_e[st];let ot=nt[st];if(this.nGramWidths.forEach(dt=>{const ht=_e[st+1]-_e[st],yt=this.getNumNGrams(ht,dt);this.createNGrams($,at,it,ot,yt,dt),ot+=yt}),this.preserveShort&&ot===nt[st]){const dt=_e[st+1]-_e[st];if(dt===0)continue;const ht=dt+2*this.padWidth;this.createNGrams($,at,it,ot,1,ht)}}return[it,nt]}}function stringNGramsImpl(_,$,_e,et,tt,rt,nt,it){return new StringNGramsOp(_e,et,tt,rt,nt,it).compute(_,$)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function split(_,$,_e,et){if(!_.length)return;if($.length===0){for(let rt=0;rt<_.length;++rt)et.push(_.subarray(rt,rt+1));return}if($.length===1){const rt=$[0];let nt=_.indexOf(rt);for(;nt!==-1;){const it=_.subarray(0,nt);(!_e||it.length!==0)&&et.push(it),_=_.subarray(nt+1),nt=_.indexOf(rt)}(!_e||_.length!==0)&&et.push(_);return}let tt=0;for(let rt=0;rt<_.length+1;rt++)if(rt===_.length||$.indexOf(_[rt])!==-1){const nt=_.subarray(tt,rt);(!_e||nt.length!==0)&&et.push(nt),tt=rt+1}}function stringSplitImpl(_,$,_e){const et=_.length,tt=[];let rt=0,nt=0;const it=new Array(et);for(let ht=0;ht<et;++ht){const yt=tt.length;split(_[ht],$,_e,tt);const vt=tt.length-yt;it[ht]=vt,rt+=vt,nt=Math.max(nt,vt)}const st=getArrayFromDType("int32",rt*2),at=new Array(rt),ot=[et,nt];let dt=0;for(let ht=0;ht<et;++ht)for(let yt=0;yt<it[ht];++yt)st[dt*2]=ht,st[dt*2+1]=yt,at[dt]=tt[dt],++dt;return[st,at,ot]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stringToHashBucketFastImpl(_,$){const _e=getArrayFromDType("int32",_.length);for(let et=0;et<_.length;++et)_e[et]=fingerPrint64(_[et]).modulo($).getLowBitsUnsigned();return _e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const subImpl=createSimpleBinaryKernelImpl((_,$)=>_-$),subComplexImpl=createComplexBinaryKernelImpl((_,$,_e,et)=>({real:_-_e,imag:$-et})),sub$1=binaryKernelFunc$1(Sub,subImpl,subComplexImpl),subConfig$1={kernelName:Sub,backendName:"cpu",kernelFunc:sub$1};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tileImpl(_,$){const _e=new Array(_.rank);for(let tt=0;tt<_e.length;tt++)_e[tt]=_.shape[tt]*$[tt];const et=buffer$1(_e,_.dtype);for(let tt=0;tt<et.values.length;++tt){const rt=et.indexToLoc(tt),nt=new Array(_.rank);for(let st=0;st<nt.length;st++)nt[st]=rt[st]%_.shape[st];const it=_.locToIndex(nt);et.values[tt]=_.values[it]}return et}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const comparePair=(_,$)=>{const _e=$.value-_.value;return _e===0?_.index-$.index:_e};function select$2(_,$,_e=0,et=_.length-1){for(;et>_e;){if(et-_e>600){const it=et-_e+1,st=$-_e+1,at=Math.log(it),ot=.5*Math.exp(2*at/3),dt=.5*Math.sqrt(at*ot*(it-ot)/it)*Math.sign(st-it/2),ht=Math.max(_e,Math.floor($-st*ot/it+dt)),yt=Math.min(et,Math.floor($+(it-st)*ot/it+dt));select$2(_,$,ht,yt)}const tt=_[$];let rt=_e,nt=et;for(swap$1(_,_e,$),comparePair(_[et],tt)>0&&swap$1(_,_e,et);rt<nt;){for(swap$1(_,rt,nt),rt++,nt--;comparePair(_[rt],tt)<0;)rt=rt+1;for(;comparePair(_[nt],tt)>0;)nt=nt-1}comparePair(_[_e],tt)===0?swap$1(_,_e,nt):(nt=nt+1,swap$1(_,nt,et)),nt<=$&&(_e=nt+1),$<=nt&&(et=nt-1)}}function topKImpl(_,$,_e,et,tt){const rt=$[$.length-1],[nt,it]=[_.length/rt,rt],st=getTypedArrayFromDType(_e,nt*et),at=getTypedArrayFromDType("int32",nt*et);for(let dt=0;dt<nt;dt++){const ht=dt*it,yt=_.subarray(ht,ht+it);let vt=new Array(yt.length);yt.forEach((At,jt)=>vt[jt]={value:At,index:jt}),et<vt.length&&(select$2(vt,et),vt=vt.slice(0,et)),tt&&vt.sort(comparePair);const xt=dt*et,wt=st.subarray(xt,xt+et),Et=at.subarray(xt,xt+et);for(let At=0;At<et;At++)wt[At]=vt[At].value,Et[At]=vt[At].index}const ot=$.slice();return ot[ot.length-1]=et,[buffer$1(ot,_e,st),buffer$1(ot,"int32",at)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uniqueImpl(_,$,_e,et){const tt=parseAxisParam($,_e)[0],rt=[1,_e[0],1];for(let vt=0;vt<tt;vt++)rt[0]*=_e[vt];rt[1]=_e[tt];for(let vt=tt+1;vt<_e.length;vt++)rt[2]*=_e[vt];const nt=new Map,it=new Int32Array(_e[tt]),st=new TensorBuffer(rt,et,_),at=[],ot=rt[0]===1&&rt[2]===1;for(let vt=0;vt<_e[tt];vt++){let xt;if(ot)xt=_[vt].toString();else{const Et=[];for(let At=0;At<rt[0];At++)for(let jt=0;jt<rt[2];jt++)Et.push(st.get(At,vt,jt));xt=Et.join(",")}const wt=nt.get(xt);if(wt!=null)it[vt]=wt;else{const Et=nt.size;nt.set(xt,Et),it[vt]=Et,at.push(vt)}}const dt=rt.slice();dt[1]=nt.size;const ht=new TensorBuffer(dt,et);at.forEach((vt,xt)=>{for(let wt=0;wt<rt[0];wt++)for(let Et=0;Et<rt[2];Et++)ht.set(st.get(wt,vt,Et),wt,xt,Et)});const yt=_e.slice();return yt[tt]=dt[1],{outputValues:ht.values,outputShape:yt,indices:it}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const shared=Object.freeze(Object.defineProperty({__proto__:null,addImpl,bincountImpl,bincountReduceImpl,bitwiseAndImpl,castImpl,ceilImpl,concatImpl:concatImpl$1,equalImpl,expImpl,expm1Impl,floorDivImpl,floorImpl,gatherNdImpl,gatherV2Impl,greaterEqualImpl,greaterImpl,lessEqualImpl,lessImpl,linSpaceImpl,logImpl,maxImpl:maxImpl$1,maximumImpl,minimumImpl,multiplyImpl,negImpl,notEqualImpl,prodImpl,raggedGatherImpl,raggedRangeImpl,raggedTensorToTensorImpl,rangeImpl,rsqrtImpl,scatterImpl,sigmoidImpl,simpleAbsImpl,sliceImpl,sparseFillEmptyRowsImpl,sparseReshapeImpl,sparseSegmentReductionImpl,sqrtImpl,squaredDifferenceImpl,staticRegexReplaceImpl,stridedSliceImpl,stringNGramsImpl,stringSplitImpl,stringToHashBucketFastImpl,subImpl,tileImpl,topKImpl,transposeImpl:transposeImpl$1,uniqueImpl},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const version$3="4.22.0";/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */registerBackend("cpu",()=>new MathBackendCPU,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const elu$1=unaryKernelFunc$1(Elu$1,_=>_>=0?_:Math.exp(_)-1),eluConfig$1={kernelName:Elu$1,backendName:"cpu",kernelFunc:elu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function leakyRelu$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{alpha:rt}=et;assertNotComplex$1([tt],"leakyRelu");const nt=sizeFromShape(tt.shape),it=_e.data.get(tt.dataId).values,st=getTypedArrayFromDType("float32",nt);for(let at=0;at<it.length;at++)st[at]=it[at]<0?rt*it[at]:it[at];return _e.makeTensorInfo(tt.shape,"float32",st)}const leakyReluConfig$1={kernelName:LeakyRelu,backendName:"cpu",kernelFunc:leakyRelu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const preluImpl=createSimpleBinaryKernelImpl((_,$)=>_<0?$*_:_);function prelu$1(_){const{inputs:$,backend:_e}=_,{x:et,alpha:tt}=$;assertNotComplex$1([et,tt],"prelu");const rt=_e.data.get(et.dataId).values,nt=_e.data.get(tt.dataId).values,[it,st]=preluImpl(et.shape,tt.shape,rt,nt,"float32");return _e.makeTensorInfo(st,"float32",it)}const preluConfig$1={kernelName:Prelu,backendName:"cpu",kernelFunc:prelu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const relu$1=unaryKernelFunc$1(Relu$1,_=>Math.max(0,_)),reluConfig$1={kernelName:Relu$1,backendName:"cpu",kernelFunc:relu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const relu6$1=unaryKernelFunc$1(Relu6$1,_=>Math.min(Math.max(0,_),6)),relu6Config$1={kernelName:Relu6$1,backendName:"cpu",kernelFunc:relu6$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function applyActivation(_,$,_e,et,tt){if(_e==="linear")return identity$d({inputs:{x:$},backend:_});if(_e==="relu")return relu$1({inputs:{x:$},backend:_});if(_e==="elu")return elu$1({inputs:{x:$},backend:_});if(_e==="relu6")return relu6$1({inputs:{x:$},backend:_});if(_e==="prelu")return prelu$1({inputs:{x:$,alpha:et},backend:_});if(_e==="leakyrelu")return leakyRelu$1({inputs:{x:$},backend:_,attrs:{alpha:tt}});if(_e==="sigmoid")return sigmoid$1({inputs:{x:$},backend:_});throw new Error(`Activation ${_e} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reshape$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{shape:rt}=et,nt=sizeFromShape(tt.shape),it=inferFromImplicitShape(rt,nt),st=sizeFromShape(it);assert$1(nt===st,()=>`The new shape (${it}) has ${st} elements and the old shape (${tt.shape}) has ${nt} elements. The new shape and old shape must have the same number of elements.`),_e.incRef(tt.dataId);const at=_e.data.get(tt.dataId);if(at.complexTensorInfos!=null){const ot=at.complexTensorInfos.real,dt=at.complexTensorInfos.imag;ot.shape=it,dt.shape=it}return{dataId:tt.dataId,shape:it,dtype:tt.dtype}}const reshapeConfig$1={kernelName:Reshape$1,backendName:"cpu",kernelFunc:reshape$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchMatMul$1(_){const{inputs:$,backend:_e,attrs:et}=_,{a:tt,b:rt}=$,{transposeA:nt,transposeB:it}=et;assertNotComplex$1([tt,rt],"matMul");const st=tt.shape.length,at=rt.shape.length,ot=nt?tt.shape[st-2]:tt.shape[st-1],dt=it?rt.shape[at-1]:rt.shape[at-2],ht=nt?tt.shape[st-1]:tt.shape[st-2],yt=it?rt.shape[at-2]:rt.shape[at-1],vt=tt.shape.slice(0,-2),xt=rt.shape.slice(0,-2),wt=sizeFromShape(vt),Et=sizeFromShape(xt),jt=assertAndGetBroadcastShape(tt.shape.slice(0,-2),rt.shape.slice(0,-2)).concat([ht,yt]);assert$1(ot===dt,()=>`Error in matMul: inner shapes (${ot}) and (${dt}) of Tensors with shapes ${tt.shape} and ${rt.shape} and transposeA=${nt} and transposeB=${it} must match.`);const kt=nt?[wt,ot,ht]:[wt,ht,ot],Lt=it?[Et,yt,dt]:[Et,dt,yt],Bt=reshape$1({inputs:{x:tt},backend:_e,attrs:{shape:kt}}),Gt=reshape$1({inputs:{x:rt},backend:_e,attrs:{shape:Lt}}),er=nt?Bt.shape[1]:Bt.shape[2],tr=nt?Bt.shape[2]:Bt.shape[1],ar=it?Gt.shape[1]:Gt.shape[2],Mt=Math.max(wt,Et),lt=_e.data.get(Bt.dataId).values,mt=_e.data.get(Gt.dataId).values,gt=computeStrides(Bt.shape),bt=computeStrides(Gt.shape),[St,Nt,Pt]=nt?[gt[0],1,gt[1]]:[gt[0],gt[1],1],[Tt,pt,Rt]=it?[1,bt[1],bt[0]]:[bt[1],1,bt[0]],zt=tr*ar,Yt=buffer$1([Mt,tr,ar],Bt.dtype),ir=Yt.values,ur=_e.blockSize;for(let cr=0;cr<Mt;cr++){const rr=cr%wt,fr=cr%Et;for(let dr=0;dr<tr;dr+=ur){const gr=Math.min(dr+ur,tr);for(let hr=0;hr<ar;hr+=ur){const or=Math.min(hr+ur,ar);for(let br=0;br<er;br+=ur){const Rr=Math.min(br+ur,er);for(let _r=dr;_r<gr;_r++)for(let Er=hr;Er<or;Er++){let Hr=0;for(let xr=br;xr<Rr;xr++){const yr=lt[rr*St+_r*Nt+xr*Pt],Ar=mt[xr*Tt+Er*pt+fr*Rt];Hr+=yr*Ar}ir[cr*zt+(_r*ar+Er)]+=Hr}}}}}return _e.disposeIntermediateTensorInfo(Bt),_e.disposeIntermediateTensorInfo(Gt),_e.makeTensorInfo(jt,Yt.dtype,Yt.values)}const batchMatMulConfig$1={kernelName:BatchMatMul,backendName:"cpu",kernelFunc:batchMatMul$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _fusedMatMul$1(_){const{inputs:$,backend:_e,attrs:et}=_,{a:tt,b:rt,bias:nt,preluActivationWeights:it}=$,{transposeA:st,transposeB:at,activation:ot,leakyreluAlpha:dt}=et;let ht,yt,vt;const xt=[];ht=batchMatMul$1({inputs:{a:tt,b:rt},attrs:{transposeA:st,transposeB:at},backend:_e}),nt&&(yt=add$1({inputs:{a:ht,b:nt},backend:_e}),xt.push(ht),ht=yt),ot&&(vt=applyActivation(_e,ht,ot,it,dt),xt.push(ht),ht=vt);for(const Et of xt)_e.disposeIntermediateTensorInfo(Et);return ht}const _fusedMatMulConfig$1={kernelName:_FusedMatMul,backendName:"cpu",kernelFunc:_fusedMatMul$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const acos$1=unaryKernelFunc$1(Acos,_=>Math.acos(_)),acosConfig$1={kernelName:Acos,backendName:"cpu",kernelFunc:acos$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const acosh$1=unaryKernelFunc$1(Acosh,_=>Math.acosh(_)),acoshConfig$1={kernelName:Acosh,backendName:"cpu",kernelFunc:acosh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function addN$1(_){const{inputs:$,backend:_e}=_,et=$;assertNotComplex$1($,"addN");const tt=et.map(it=>_e.data.get(it.dataId).values),rt=buffer$1(et[0].shape,et[0].dtype),nt=rt.values;for(let it=0;it<et.length;it++){const st=tt[it];for(let at=0;at<nt.length;at++)nt[at]+=st[at]}return _e.makeTensorInfo(rt.shape,rt.dtype,rt.values)}const addNConfig$1={kernelName:AddN,backendName:"cpu",kernelFunc:addN$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function all$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{axis:rt,keepDims:nt}=et;assertNotComplex$1(tt,"all");const it=parseAxisParam(rt,tt.shape);let st=it;const at=getAxesPermutation(st,tt.shape.length);let ot=tt;at!=null&&(ot=transpose$1({inputs:{x:tt},backend:_e,attrs:{perm:at}}),st=getInnerMostAxes(st.length,tt.shape.length)),assertAxesAreInnerMostDims("all",st,ot.shape.length);const[dt,ht]=computeOutAndReduceShapes(ot.shape,st),yt=sizeFromShape(ht),vt=makeZerosTypedArray(sizeFromShape(dt),ot.dtype),xt=_e.data.get(ot.dataId).values;for(let Et=0;Et<vt.length;++Et){const At=Et*yt;let jt=xt[At];for(let kt=0;kt<yt;++kt){const Lt=xt[At+kt];jt=jt&&Lt}vt[Et]=jt}at!=null&&_e.disposeIntermediateTensorInfo(ot);const wt=_e.makeTensorInfo(dt,ot.dtype,vt);if(nt){const Et=expandShapeToKeepDim(dt,it),At=reshape$1({inputs:{x:wt},backend:_e,attrs:{shape:Et}});return _e.disposeIntermediateTensorInfo(wt),At}return wt}const allConfig$1={kernelName:All,backendName:"cpu",kernelFunc:all$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function any$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{axis:rt,keepDims:nt}=et;assertNotComplex$1(tt,"any");const it=parseAxisParam(rt,tt.shape);let st=it;const at=getAxesPermutation(st,tt.shape.length);let ot=tt;at!=null&&(ot=transpose$1({inputs:{x:tt},backend:_e,attrs:{perm:at}}),st=getInnerMostAxes(st.length,tt.shape.length)),assertAxesAreInnerMostDims("any",st,ot.shape.length);const[dt,ht]=computeOutAndReduceShapes(ot.shape,st),yt=sizeFromShape(ht),vt=makeZerosTypedArray(sizeFromShape(dt),ot.dtype),xt=_e.data.get(ot.dataId).values;for(let Et=0;Et<vt.length;++Et){const At=Et*yt;let jt=xt[At];for(let kt=0;kt<yt;++kt){const Lt=xt[At+kt];jt=jt||Lt}vt[Et]=jt}at!=null&&_e.disposeIntermediateTensorInfo(ot);const wt=_e.makeTensorInfo(dt,ot.dtype,vt);if(nt){const Et=expandShapeToKeepDim(dt,it),At=reshape$1({inputs:{x:wt},backend:_e,attrs:{shape:Et}});return _e.disposeIntermediateTensorInfo(wt),At}return wt}const anyConfig$1={kernelName:Any,backendName:"cpu",kernelFunc:any$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMax$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{axis:rt}=et;assertNotComplex$1(tt,"argMax");let nt=parseAxisParam(rt,tt.shape);const it=getAxesPermutation(nt,tt.shape.length);let st=tt;const at=[];it!=null&&(st=transpose$1({inputs:{x:tt},backend:_e,attrs:{perm:it}}),at.push(st),nt=getInnerMostAxes(nt.length,st.shape.length)),nt=[nt[0]],assertAxesAreInnerMostDims("argMax",nt,st.shape.length);const[ot,dt]=computeOutAndReduceShapes(st.shape,nt),ht=sizeFromShape(ot),yt=makeZerosTypedArray(ht,"int32"),vt=sizeFromShape(dt),xt=_e.data.get(st.dataId).values;for(let wt=0;wt<yt.length;++wt){const Et=wt*vt;let At=xt[Et],jt=0;for(let kt=0;kt<vt;++kt){const Lt=xt[Et+kt];Lt>At&&(At=Lt,jt=kt)}yt[wt]=jt}return at.forEach(wt=>_e.disposeIntermediateTensorInfo(wt)),_e.makeTensorInfo(ot,"int32",yt)}const argMaxConfig$1={kernelName:ArgMax,backendName:"cpu",kernelFunc:argMax$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMin$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{axis:rt}=et;assertNotComplex$1(tt,"argMin");let nt=parseAxisParam(rt,tt.shape);const it=getAxesPermutation(nt,tt.shape.length);let st=tt;const at=[];it!=null&&(st=transpose$1({inputs:{x:tt},backend:_e,attrs:{perm:it}}),at.push(st),nt=getInnerMostAxes(nt.length,st.shape.length)),nt=[nt[0]],assertAxesAreInnerMostDims("argMin",nt,st.shape.length);const[ot,dt]=computeOutAndReduceShapes(st.shape,nt),ht=sizeFromShape(ot),yt=makeZerosTypedArray(ht,"int32"),vt=sizeFromShape(dt),xt=_e.data.get(st.dataId).values;for(let wt=0;wt<yt.length;++wt){const Et=wt*vt;let At=xt[Et],jt=0;for(let kt=0;kt<vt;++kt){const Lt=xt[Et+kt];Lt<At&&(At=Lt,jt=kt)}yt[wt]=jt}return at.forEach(wt=>_e.disposeIntermediateTensorInfo(wt)),_e.makeTensorInfo(ot,"int32",yt)}const argMinConfig$1={kernelName:ArgMin,backendName:"cpu",kernelFunc:argMin$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const asin$1=unaryKernelFunc$1(Asin,_=>Math.asin(_)),asinConfig$1={kernelName:Asin,backendName:"cpu",kernelFunc:asin$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const asinh$1=unaryKernelFunc$1(Asinh,_=>Math.asinh(_)),asinhConfig$1={kernelName:Asinh,backendName:"cpu",kernelFunc:asinh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atan$1=unaryKernelFunc$1(Atan,_=>Math.atan(_)),atanConfig$1={kernelName:Atan,backendName:"cpu",kernelFunc:atan$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atan2Impl=createSimpleBinaryKernelImpl((_,$)=>Math.atan2(_,$)),atan2$1=binaryKernelFunc$1(Atan2,atan2Impl),atan2Config$1={kernelName:Atan2,backendName:"cpu",kernelFunc:atan2$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atanh$1=unaryKernelFunc$1(Atanh,_=>Math.atanh(_)),atanhConfig$1={kernelName:Atanh,backendName:"cpu",kernelFunc:atanh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pool(_,$,_e,et,tt,rt){const nt=tt.strideHeight,it=tt.strideWidth,st=tt.dilationHeight,at=tt.dilationWidth,ot=tt.effectiveFilterHeight,dt=tt.effectiveFilterWidth,ht=tt.padInfo.top,yt=tt.padInfo.left,vt=rt==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,xt=buffer$1(tt.outShape,_e),wt=xt.values,Et=tt.outShape[1]*tt.outShape[2]*tt.outShape[3],At=tt.outShape[2]*tt.outShape[3],jt=tt.outShape[3];for(let kt=0;kt<tt.batchSize;++kt){const Lt=kt*Et,Bt=kt*et[0];for(let Gt=0;Gt<tt.inChannels;++Gt)for(let er=0;er<tt.outHeight;++er){const tr=er*nt-ht,ar=Math.max(0,tr),Mt=Math.min(tt.inHeight,ot+tr),lt=Lt+er*At;for(let mt=0;mt<tt.outWidth;++mt){const gt=mt*it-yt,bt=Math.max(0,gt),St=Math.min(tt.inWidth,dt+gt);let Nt=vt,Pt=0,Tt=0;for(let Rt=ar;Rt<Mt;Rt+=st){const zt=Bt+Rt*et[1];for(let Yt=bt;Yt<St;Yt+=at){const ir=zt+Yt*et[2],ur=_[ir+Gt];rt==="max"&&ur>Nt?Nt=ur:rt==="avg"&&(Pt+=ur,Tt++)}if(isNaN(Nt))break}const pt=lt+mt*jt+Gt;wt[pt]=rt==="avg"?Pt/Tt:Nt}}}return xt}function maxPoolPositions(_,$,_e,et,tt=!1,rt=!1){const nt=buffer$1(et.outShape,"int32"),it=et.strideHeight,st=et.strideWidth,at=et.dilationHeight,ot=et.dilationWidth,dt=et.effectiveFilterHeight,ht=et.effectiveFilterWidth,yt=et.padInfo.top,vt=et.padInfo.left,xt=buffer$1($,_e,_);for(let wt=0;wt<et.batchSize;++wt)for(let Et=0;Et<et.inChannels;++Et)for(let At=0;At<et.outHeight;++At){const jt=At*it-yt;let kt=jt;for(;kt<0;)kt+=at;const Lt=Math.min(et.inHeight,dt+jt);for(let Bt=0;Bt<et.outWidth;++Bt){const Gt=Bt*st-vt;let er=Gt;for(;er<0;)er+=ot;const tr=Math.min(et.inWidth,ht+Gt);let ar=Number.NEGATIVE_INFINITY,Mt=-1;for(let lt=kt;lt<Lt;lt+=at){const mt=lt-jt;for(let gt=er;gt<tr;gt+=ot){const bt=gt-Gt,St=xt.get(wt,lt,gt,Et);St>ar&&(ar=St,tt?Mt=rt?((wt*et.inHeight+lt)*et.inWidth+gt)*et.inChannels+Et:(lt*et.inWidth+gt)*et.inChannels+Et:Mt=mt*ht+bt)}}nt.set(Mt,wt,At,Bt,Et)}}return nt}function pool3d(_,$,_e,et,tt,rt){const nt=tt.strideDepth,it=tt.strideHeight,st=tt.strideWidth,at=tt.dilationDepth,ot=tt.dilationHeight,dt=tt.dilationWidth,ht=tt.effectiveFilterDepth,yt=tt.effectiveFilterHeight,vt=tt.effectiveFilterWidth,xt=tt.padInfo.front,wt=tt.padInfo.top,Et=tt.padInfo.left,At=rt==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,jt=buffer$1(tt.outShape,_e),kt=jt.values,Lt=tt.outShape[1]*tt.outShape[2]*tt.outShape[3]*tt.outShape[4],Bt=tt.outShape[2]*tt.outShape[3]*tt.outShape[4],Gt=tt.outShape[3]*tt.outShape[4],er=tt.outShape[4];for(let tr=0;tr<tt.batchSize;++tr){const ar=tr*Lt,Mt=tr*et[0];for(let lt=0;lt<tt.inChannels;++lt)for(let mt=0;mt<tt.outDepth;++mt){const gt=mt*nt-xt;let bt=gt;for(;bt<0;)bt+=at;const St=Math.min(tt.inDepth,ht+gt),Nt=ar+mt*Bt;for(let Pt=0;Pt<tt.outHeight;++Pt){const Tt=Pt*it-wt;let pt=Tt;for(;pt<0;)pt+=ot;const Rt=Math.min(tt.inHeight,yt+Tt),zt=Nt+Pt*Gt;for(let Yt=0;Yt<tt.outWidth;++Yt){const ir=Yt*st-Et;let ur=ir;for(;ur<0;)ur+=dt;const cr=Math.min(tt.inWidth,vt+ir),rr=zt+Yt*er;let fr=At,dr=0,gr=0;for(let or=bt;or<St;or+=at){const br=Mt+or*et[1];for(let Rr=pt;Rr<Rt;Rr+=ot){const _r=br+Rr*et[2];for(let Er=ur;Er<cr;Er+=dt){const Hr=_r+Er*et[3],xr=_[Hr+lt];if(rt==="max"&&xr>fr?fr=xr:rt==="avg"&&(dr+=xr,gr++),isNaN(fr))break}if(isNaN(fr))break}if(isNaN(fr))break}const hr=rr+lt;kt[hr]=rt==="avg"?dr/Math.max(gr,1):fr}}}}return jt}function maxPool3dPositions(_,$){const _e=buffer$1($.outShape,"int32"),et=$.strideDepth,tt=$.strideHeight,rt=$.strideWidth,nt=$.dilationDepth,it=$.dilationHeight,st=$.dilationWidth,at=$.effectiveFilterDepth,ot=$.effectiveFilterHeight,dt=$.effectiveFilterWidth,ht=$.padInfo.front,yt=$.padInfo.top,vt=$.padInfo.left;for(let xt=0;xt<$.batchSize;++xt)for(let wt=0;wt<$.inChannels;++wt)for(let Et=0;Et<$.outDepth;++Et){const At=Et*et-ht;let jt=At;for(;jt<0;)jt+=nt;const kt=Math.min($.inDepth,at+At);for(let Lt=0;Lt<$.outHeight;++Lt){const Bt=Lt*tt-yt;let Gt=Bt;for(;Gt<0;)Gt+=it;const er=Math.min($.inHeight,ot+Bt);for(let tr=0;tr<$.outWidth;++tr){const ar=tr*rt-vt;let Mt=ar;for(;Mt<0;)Mt+=st;const lt=Math.min($.inWidth,dt+ar);let mt=Number.NEGATIVE_INFINITY,gt=-1;for(let bt=jt;bt<kt;bt+=nt){const St=bt-At;for(let Nt=Gt;Nt<er;Nt+=it){const Pt=Nt-Bt;for(let Tt=Mt;Tt<lt;Tt+=st){const pt=Tt-ar,Rt=_.get(xt,bt,Nt,Tt,wt);Rt>=mt&&(mt=Rt,gt=St*ot*dt+Pt*ot+pt)}}}_e.set(gt,xt,Et,Lt,tr,wt)}}}return _e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$;assertNotComplex$1(tt,"avgPool");const{filterSize:rt,strides:nt,pad:it,dimRoundingMode:st}=et,at=1;assert$1(eitherStridesOrDilationsAreOne(nt,at),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${nt} and dilations '${at}'`);const ot=computePool2DInfo(tt.shape,rt,nt,at,it,st);let dt;if(ot.filterWidth===1&&ot.filterHeight===1&&arraysEqual(ot.inShape,ot.outShape))dt=identity$d({inputs:{x:tt},backend:_e});else{const ht=_e.data.get(tt.dataId).values,yt=computeStrides(tt.shape),vt=pool(ht,tt.shape,tt.dtype,yt,ot,"avg");dt=_e.makeTensorInfo(ot.outShape,tt.dtype,vt.values)}return dt}const avgPoolConfig$1={kernelName:AvgPool,backendName:"cpu",kernelFunc:avgPool$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3D$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{filterSize:rt,strides:nt,pad:it,dimRoundingMode:st,dataFormat:at}=et;assertNotComplex$1(tt,"avgPool3d");const ot=computePool3DInfo(tt.shape,rt,nt,1,it,st,at),dt=_e.data.get(tt.dataId).values,ht=pool3d(dt,tt.shape,tt.dtype,computeStrides(tt.shape),ot,"avg");return _e.makeTensorInfo(ht.shape,"float32",ht.values)}const avgPool3DConfig$1={kernelName:AvgPool3D,backendName:"cpu",kernelFunc:avgPool3D$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3DGrad$1(_){const{inputs:$,backend:_e,attrs:et}=_,{dy:tt,input:rt}=$,{filterSize:nt,strides:it,pad:st,dimRoundingMode:at}=et;assertNotComplex$1([tt,rt],"avgPool3DGrad");const ot=computePool3DInfo(rt.shape,nt,it,1,st,at),dt=ot.strideDepth,ht=ot.strideHeight,yt=ot.strideWidth,vt=ot.filterDepth,xt=ot.filterHeight,wt=ot.filterWidth,Et=ot.dilationDepth,At=ot.dilationHeight,jt=ot.dilationWidth,kt=ot.effectiveFilterDepth,Lt=ot.effectiveFilterHeight,Bt=ot.effectiveFilterWidth,Gt=kt-1-ot.padInfo.front,er=Bt-1-ot.padInfo.left,tr=Lt-1-ot.padInfo.top,ar=buffer$1(rt.shape,"float32"),Mt=1/(vt*xt*wt),lt=_e.bufferSync(tt);for(let mt=0;mt<ot.batchSize;++mt)for(let gt=0;gt<ot.inChannels;++gt)for(let bt=0;bt<ot.inDepth;++bt)for(let St=0;St<ot.inHeight;++St)for(let Nt=0;Nt<ot.inWidth;++Nt){const Pt=bt-Gt,Tt=St-tr,pt=Nt-er;let Rt=0;for(let zt=0;zt<kt;zt+=Et){const Yt=(Pt+zt)/dt;if(!(Yt<0||Yt>=ot.outDepth||Math.floor(Yt)!==Yt))for(let ir=0;ir<Lt;ir+=At){const ur=(Tt+ir)/ht;if(!(ur<0||ur>=ot.outHeight||Math.floor(ur)!==ur))for(let cr=0;cr<Bt;cr+=jt){const rr=(pt+cr)/yt;if(rr<0||rr>=ot.outWidth||Math.floor(rr)!==rr)continue;const fr=lt.get(mt,Yt,ur,rr,gt);Rt+=fr}}}ar.set(Rt*Mt,mt,bt,St,Nt,gt)}return _e.makeTensorInfo(ar.shape,ar.dtype,ar.values)}const avgPool3DGradConfig$1={kernelName:AvgPool3DGrad,backendName:"cpu",kernelFunc:avgPool3DGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPoolGrad$1(_){const{inputs:$,backend:_e,attrs:et}=_,{dy:tt,input:rt}=$,nt=rt;assertNotComplex$1([tt,rt],"avgPoolGrad");const{filterSize:it,strides:st,pad:at}=et,ot=computePool2DInfo(nt.shape,it,st,1,at),dt=ot.strideHeight,ht=ot.strideWidth,yt=ot.filterHeight,vt=ot.filterWidth,xt=ot.dilationHeight,wt=ot.dilationWidth,Et=ot.effectiveFilterHeight,At=ot.effectiveFilterWidth,jt=At-1-ot.padInfo.left,kt=Et-1-ot.padInfo.top,Lt=buffer$1(nt.shape,"float32"),Bt=1/(yt*vt),Gt=_e.data.get(tt.dataId).values,er=buffer$1(tt.shape,"float32",Gt);for(let tr=0;tr<ot.batchSize;++tr)for(let ar=0;ar<ot.inChannels;++ar)for(let Mt=0;Mt<ot.inHeight;++Mt)for(let lt=0;lt<ot.inWidth;++lt){const mt=Mt-kt,gt=lt-jt;let bt=0;for(let St=0;St<Et;St+=xt){const Nt=(mt+St)/dt;if(!(Nt<0||Nt>=ot.outHeight||Math.floor(Nt)!==Nt))for(let Pt=0;Pt<At;Pt+=wt){const Tt=(gt+Pt)/ht;if(Tt<0||Tt>=ot.outWidth||Math.floor(Tt)!==Tt)continue;const pt=er.get(tr,Nt,Tt,ar);bt+=pt}}Lt.set(bt*Bt,tr,Mt,lt,ar)}return _e.makeTensorInfo(Lt.shape,Lt.dtype,Lt.values)}const avgPoolGradConfig$1={kernelName:AvgPoolGrad,backendName:"cpu",kernelFunc:avgPoolGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchNorm$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,scale:rt,offset:nt,mean:it,variance:st}=$;assert$1(it.shape.length===st.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),assert$1(nt==null||it.shape.length===nt.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),assert$1(rt==null||it.shape.length===rt.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),assertNotComplex$1([tt,it,st,rt,nt],"batchNorm");let{varianceEpsilon:at}=et;at==null&&(at=.001);const ot=_e.data.get(tt.dataId).values,dt=_e.data.get(it.dataId).values,ht=_e.data.get(st.dataId).values,yt=rt?_e.data.get(rt.dataId).values:new Float32Array([1]),vt=nt?_e.data.get(nt.dataId).values:new Float32Array([0]),xt=new Float32Array(ot.length),wt=vt.length,Et=yt.length,At=ht.length,jt=dt.length;let kt=0,Lt=0,Bt=0,Gt=0;for(let er=0;er<ot.length;++er)xt[er]=vt[kt++]+(ot[er]-dt[Lt++])*yt[Bt++]/Math.sqrt(ht[Gt++]+at),kt>=wt&&(kt=0),Lt>=jt&&(Lt=0),Bt>=Et&&(Bt=0),Gt>=At&&(Gt=0);return _e.makeTensorInfo(tt.shape,tt.dtype,xt)}const batchNormConfig$1={kernelName:FusedBatchNorm,backendName:"cpu",kernelFunc:batchNorm$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchToSpaceND$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{blockShape:rt,crops:nt}=et;assertNotComplex$1([tt],"batchToSpaceND");const it=rt.reduce((Et,At)=>Et*At),st=getReshaped(tt.shape,rt,it),at=getPermuted(st.length,rt.length),ot=getReshapedPermuted(tt.shape,rt,it),dt=getSliceBeginCoords(nt,rt.length),ht=getSliceSize(ot,nt,rt.length),yt=reshape$1({inputs:{x:tt},backend:_e,attrs:{shape:st}}),vt=transpose$1({inputs:{x:yt},backend:_e,attrs:{perm:at}}),xt=reshape$1({inputs:{x:vt},backend:_e,attrs:{shape:ot}}),wt=slice$1({inputs:{x:xt},backend:_e,attrs:{begin:dt,size:ht}});return _e.disposeIntermediateTensorInfo(yt),_e.disposeIntermediateTensorInfo(vt),_e.disposeIntermediateTensorInfo(xt),wt}const batchToSpaceNDConfig$1={kernelName:BatchToSpaceND,backendName:"cpu",kernelFunc:batchToSpaceND$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bincount$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,weights:rt}=$,{size:nt}=et,it=_e.data.get(tt.dataId).values,st=_e.data.get(rt.dataId).values,at=bincountImpl(it,st,rt.dtype,rt.shape,nt);return _e.makeTensorInfo([nt],rt.dtype,at)}const bincountConfig$1={kernelName:Bincount,backendName:"cpu",kernelFunc:bincount$1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function broadcastArgs$1(_){const{inputs:$,backend:_e}=_,{s0:et,s1:tt}=$,rt=_e.data.get(et.dataId).values,nt=_e.data.get(tt.dataId).values,it=assertAndGetBroadcastShape(Array.from(rt),Array.from(nt));return _e.makeTensorInfo([it.length],"int32",Int32Array.from(it))}const broadcastArgsConfig$1={kernelName:BroadcastArgs,backendName:"cpu",kernelFunc:broadcastArgs$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const clipByValue$1=unaryKernelFunc$1(ClipByValue,(_,$)=>{const _e=$;return _>_e.clipValueMax?_e.clipValueMax:_<_e.clipValueMin?_e.clipValueMin:_}),clipByValueConfig$1={kernelName:ClipByValue,backendName:"cpu",kernelFunc:clipByValue$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const complexAbs$1=_=>{const{x:$}=_.inputs,_e=_.backend,et=new Float32Array(sizeFromShape($.shape)),tt=_e.data.get($.dataId),rt=tt.complexTensorInfos.real,nt=tt.complexTensorInfos.imag,it=_e.data.get(rt.dataId).values,st=_e.data.get(nt.dataId).values;for(let at=0;at<it.length;at++){const ot=it[at],dt=st[at];et[at]=Math.hypot(ot,dt)}return _e.makeOutput(et,$.shape,"float32")},complexAbsConfig$1={kernelName:ComplexAbs,backendName:"cpu",kernelFunc:complexAbs$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function imag$1(_){const{inputs:$,backend:_e}=_,{input:et}=$,tt=_e.data.get(et.dataId).complexTensorInfos.imag,rt=_e.data.get(tt.dataId).values;return _e.makeTensorInfo(tt.shape,tt.dtype,rt)}const imagConfig$1={kernelName:Imag,backendName:"cpu",kernelFunc:imag$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concat$1(_){const{inputs:$,backend:_e,attrs:et}=_,{axis:tt}=et,rt=parseAxisParam(tt,$[0].shape)[0],nt=$.map(xt=>xt.shape);assertParamsConsistent(nt,rt);let it=computeOutShape$1($.map(xt=>xt.shape),rt);if(sizeFromShape(it)===0)return _e.makeTensorInfo(it,$[0].dtype,[]);const st=$.filter(xt=>sizeFromShape(xt.shape)>0);if(st.length===1)return identity$d({inputs:{x:st[0]},backend:_e});if(st[0].dtype==="complex64"){const xt=st.map(kt=>real$1({inputs:{input:kt},backend:_e})),wt=st.map(kt=>imag$1({inputs:{input:kt},backend:_e})),Et=concat$1({inputs:xt,backend:_e,attrs:{axis:rt}}),At=concat$1({inputs:wt,backend:_e,attrs:{axis:rt}}),jt=complex$1({inputs:{real:Et,imag:At},backend:_e});return xt.forEach(kt=>_e.disposeIntermediateTensorInfo(kt)),wt.forEach(kt=>_e.disposeIntermediateTensorInfo(kt)),_e.disposeIntermediateTensorInfo(Et),_e.disposeIntermediateTensorInfo(At),jt}const at=st.map(xt=>{const Et=[-1,sizeFromShape(xt.shape.slice(rt))];return reshape$1({inputs:{x:xt},backend:_e,attrs:{shape:Et}})}),ot=at.map(xt=>({vals:_e.data.get(xt.dataId).values,shape:xt.shape}));it=computeOutShape$1(at.map(xt=>xt.shape),1);const dt=at[0].shape[0]===1,ht=concatImpl$1(ot,it,$[0].dtype,dt),yt=computeOutShape$1(st.map(xt=>xt.shape),rt),vt=_e.makeTensorInfo(yt,$[0].dtype,ht);return at.forEach(xt=>_e.disposeIntermediateTensorInfo(xt)),vt}const concatConfig$1={kernelName:Concat,backendName:"cpu",kernelFunc:concat$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2D(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,filter:rt}=$,{strides:nt,pad:it,dataFormat:st,dilations:at,dimRoundingMode:ot}=et;assertNotComplex$1([tt,rt],"conv2d");const dt=convertConv2DDataFormat(st),ht=computeConv2DInfo(tt.shape,rt.shape,nt,at,it,ot,!1,dt),yt=ht.filterHeight,vt=ht.filterWidth,xt=ht.dilationHeight,wt=ht.dilationWidth,Et=ht.padInfo.left,At=ht.padInfo.top,jt=ht.dataFormat==="channelsLast",kt=new TensorBuffer(ht.outShape,tt.dtype),Lt=computeStrides(tt.shape),Bt=computeStrides(rt.shape),Gt=Lt[0],er=jt?Lt[1]:Lt[2],tr=jt?Lt[2]:1,ar=jt?1:Lt[1],Mt=kt.strides[0],lt=jt?kt.strides[1]:kt.strides[2],mt=jt?kt.strides[2]:1,gt=jt?1:kt.strides[1],bt=_e.data.get(tt.dataId).values,St=_e.data.get(rt.dataId).values,Nt=kt.values;for(let Pt=0;Pt<ht.batchSize;++Pt){const Tt=Pt*Gt,pt=Pt*Mt;for(let Rt=0;Rt<ht.outHeight;++Rt){const zt=pt+Rt*lt,Yt=Rt*ht.strideHeight-At;for(let ir=0;ir<yt;++ir){const ur=Yt+ir*xt;if(ur<0||ur>=ht.inHeight)continue;const cr=ir*Bt[0],rr=Tt+ur*er;for(let fr=0;fr<ht.outWidth;++fr){const dr=zt+fr*mt,gr=fr*ht.strideWidth-Et;for(let hr=0;hr<vt;++hr){const or=gr+hr*wt;if(or<0||or>=ht.inWidth)continue;const br=cr+hr*Bt[1],Rr=rr+or*tr;let _r=br;for(let Er=0;Er<ht.inChannels;++Er){const Hr=bt[Rr+Er*ar];for(let xr=0;xr<ht.outChannels;++xr)Nt[dr+xr*gt]+=Hr*St[_r+xr];_r+=ht.outChannels}}}}}}return _e.makeTensorInfo(kt.shape,kt.dtype,Nt)}const conv2DConfig$1={kernelName:Conv2D$1,backendName:"cpu",kernelFunc:conv2D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropFilter$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,dy:rt}=$,{strides:nt,pad:it,dataFormat:st,dimRoundingMode:at,filterShape:ot}=et;assertNotComplex$1([tt,rt],"conv2dBackpropFilter");const dt=convertConv2DDataFormat(st),ht=computeConv2DInfo(tt.shape,ot,nt,1,it,at,!1,dt),{strideHeight:yt,strideWidth:vt,filterHeight:xt,filterWidth:wt}=ht,Et=ht.dataFormat==="channelsLast",At=new TensorBuffer(ht.filterShape,"float32"),jt=ht.padInfo.left,kt=ht.padInfo.top,Lt=_e.data.get(tt.dataId).values,Bt=_e.data.get(rt.dataId).values,Gt=new TensorBuffer(tt.shape,tt.dtype,Lt),er=new TensorBuffer(rt.shape,rt.dtype,Bt);for(let tr=0;tr<xt;++tr){const ar=Math.max(0,Math.ceil((kt-tr)/yt)),Mt=Math.min(ht.outHeight,(ht.inHeight+kt-tr)/yt);for(let lt=0;lt<wt;++lt){const mt=Math.max(0,Math.ceil((jt-lt)/vt)),gt=Math.min(ht.outWidth,(ht.inWidth+jt-lt)/vt);for(let bt=0;bt<ht.inChannels;++bt)for(let St=0;St<ht.outChannels;++St){let Nt=0;for(let Pt=0;Pt<ht.batchSize;++Pt)for(let Tt=ar;Tt<Mt;++Tt){const pt=tr+Tt*yt-kt;for(let Rt=mt;Rt<gt;++Rt){const zt=lt+Rt*vt-jt;Et?Nt+=Gt.get(Pt,pt,zt,bt)*er.get(Pt,Tt,Rt,St):Nt+=Gt.get(Pt,bt,pt,zt)*er.get(Pt,St,Tt,Rt)}}At.set(Nt,tr,lt,bt,St)}}}return _e.makeTensorInfo(At.shape,At.dtype,At.values)}const conv2DBackpropFilterConfig$1={kernelName:Conv2DBackpropFilter,backendName:"cpu",kernelFunc:conv2DBackpropFilter$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropInput$1(_){const{inputs:$,backend:_e,attrs:et}=_,{dy:tt,filter:rt}=$,{inputShape:nt,strides:it,pad:st,dataFormat:at,dimRoundingMode:ot}=et;assertNotComplex$1([tt,rt],"conv2dBackpropInput");const dt=computeStrides(rt.shape),ht=computeStrides(tt.shape);let yt=convertConv2DDataFormat(at);const vt=computeConv2DInfo(nt,rt.shape,it,1,st,ot,!1,yt),xt=new TensorBuffer(vt.inShape,"float32"),wt=xt.values,Et=_e.data.get(tt.dataId).values,At=_e.data.get(rt.dataId).values,[jt,kt,Lt]=dt,{batchSize:Bt,filterHeight:Gt,filterWidth:er,inChannels:tr,inHeight:ar,inWidth:Mt,outChannels:lt,outHeight:mt,outWidth:gt,strideHeight:bt,strideWidth:St}=vt;yt=vt.dataFormat;const Nt=Gt-1-vt.padInfo.top,Pt=er-1-vt.padInfo.left,Tt=yt==="channelsLast",pt=xt.strides[0],Rt=Tt?xt.strides[1]:xt.strides[2],zt=Tt?xt.strides[2]:1,Yt=Tt?1:xt.strides[1],ir=ht[0],ur=Tt?ht[1]:ht[2],cr=Tt?ht[2]:1,rr=Tt?1:ht[1];for(let fr=0;fr<Bt;++fr)for(let dr=0;dr<tr;++dr)for(let gr=0;gr<ar;++gr){const hr=gr-Nt,or=Math.max(0,Math.ceil(hr/bt)),br=Math.min(mt,(Gt+hr)/bt);for(let Rr=0;Rr<Mt;++Rr){const _r=Rr-Pt,Er=Math.max(0,Math.ceil(_r/St)),Hr=Math.min(gt,(er+_r)/St);let xr=0;for(let Ar=or;Ar<br;++Ar){const $r=Ar*bt-hr;for(let Tr=Er;Tr<Hr;++Tr){const jr=Tr*St-_r,Cr=ir*fr+ur*Ar+cr*Tr,Nr=jt*(Gt-1-$r)+kt*(er-1-jr)+Lt*dr;for(let nn=0;nn<lt;++nn){const Mr=Et[Cr+rr*nn],Lr=At[Nr+nn];xr+=Mr*Lr}}}const yr=pt*fr+Rt*gr+zt*Rr+Yt*dr;wt[yr]=xr}}return _e.makeTensorInfo(xt.shape,xt.dtype,xt.values)}const conv2DBackpropInputConfig$1={kernelName:Conv2DBackpropInput,backendName:"cpu",kernelFunc:conv2DBackpropInput$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3D$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,filter:rt}=$,{strides:nt,pad:it,dilations:st}=et;assertNotComplex$1([tt,rt],"conv3d");const at=computeConv3DInfo(tt.shape,rt.shape,nt,st,it),{filterDepth:ot,filterHeight:dt,filterWidth:ht,dilationDepth:yt,dilationHeight:vt,dilationWidth:xt,padInfo:wt}=at,Et=wt.front,At=wt.left,jt=wt.top,kt=new TensorBuffer(at.outShape,tt.dtype),Lt=_e.data.get(tt.dataId).values,Bt=_e.data.get(rt.dataId).values,Gt=kt.values,er=computeStrides(tt.shape),tr=computeStrides(rt.shape);for(let ar=0;ar<at.batchSize;++ar){const Mt=ar*er[0],lt=ar*kt.strides[0];for(let mt=0;mt<at.outDepth;++mt){const gt=lt+mt*kt.strides[1],bt=mt*at.strideDepth-Et;for(let St=0;St<ot;++St){const Nt=bt+St*yt;if(Nt<0||Nt>=at.inDepth)continue;const Pt=St*tr[0],Tt=Mt+Nt*er[1];for(let pt=0;pt<at.outHeight;++pt){const Rt=gt+pt*kt.strides[2],zt=pt*at.strideHeight-jt;for(let Yt=0;Yt<dt;++Yt){const ir=zt+Yt*vt;if(ir<0||ir>=at.inHeight)continue;const ur=Pt+Yt*tr[1],cr=Tt+ir*er[2];for(let rr=0;rr<at.outWidth;++rr){const fr=Rt+rr*at.outChannels,dr=rr*at.strideWidth-At;for(let gr=0;gr<ht;++gr){const hr=dr+gr*xt;if(hr<0||hr>=at.inWidth)continue;const or=ur+gr*tr[2],br=cr+hr*at.inChannels;let Rr=or;for(let _r=0;_r<at.inChannels;++_r){const Er=Lt[br+_r];for(let Hr=0;Hr<at.outChannels;++Hr)Gt[fr+Hr]+=Er*Bt[Rr+Hr];Rr+=at.outChannels}}}}}}}}return _e.makeTensorInfo(kt.shape,kt.dtype,kt.values)}const conv3DConfig$1={kernelName:Conv3D$1,backendName:"cpu",kernelFunc:conv3D$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropFilterV2$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,dy:rt}=$,{strides:nt,pad:it,filterShape:st}=et;assertNotComplex$1([tt,rt],"conv3dBackpropFilterV2");const at=computeStrides(tt.shape),ot=computeStrides(rt.shape),dt=computeConv3DInfo(tt.shape,st,nt,1,it),ht=dt.strideDepth,yt=dt.strideHeight,vt=dt.strideWidth,xt=dt.filterDepth,wt=dt.filterHeight,Et=dt.filterWidth,At=new TensorBuffer(dt.filterShape,"float32"),jt=At.values,[kt,Lt,Bt,Gt]=At.strides,er=_e.data.get(rt.dataId).values,[tr,ar,Mt,lt]=ot,mt=_e.data.get(tt.dataId).values,[gt,bt,St,Nt]=at,Pt=dt.padInfo.front,Tt=dt.padInfo.left,pt=dt.padInfo.top;for(let Rt=0;Rt<xt;++Rt){const zt=Math.max(0,Math.ceil((Pt-Rt)/ht)),Yt=Math.min(dt.outDepth,(dt.inDepth+Pt-Rt)/ht),ir=Rt*kt;for(let ur=0;ur<wt;++ur){const cr=Math.max(0,Math.ceil((pt-ur)/yt)),rr=Math.min(dt.outHeight,(dt.inHeight+pt-ur)/yt),fr=ur*Lt+ir;for(let dr=0;dr<Et;++dr){const gr=Math.max(0,Math.ceil((Tt-dr)/vt)),hr=Math.min(dt.outWidth,(dt.inWidth+Tt-dr)/vt),or=dr*Bt+fr;for(let br=0;br<dt.inChannels;++br){const Rr=br*Gt+or;for(let _r=0;_r<dt.outChannels;++_r){let Er=0;for(let Hr=0;Hr<dt.batchSize;++Hr){const xr=Hr*gt,yr=Hr*tr;for(let Ar=zt;Ar<Yt;++Ar){const Tr=(Rt+Ar*ht-Pt)*bt+xr,jr=Ar*ar+yr;for(let Cr=cr;Cr<rr;++Cr){const nn=(ur+Cr*yt-pt)*St+Tr,Mr=Cr*Mt+jr;for(let Lr=gr;Lr<hr;++Lr){const pr=(dr+Lr*vt-Tt)*Nt+nn,nr=Lr*lt+Mr;Er+=mt[pr+br]*er[nr+_r]}}}}jt[Rr+_r]=Er}}}}}return _e.makeTensorInfo(At.shape,At.dtype,At.values)}const conv3DBackpropFilterV2Config$1={kernelName:Conv3DBackpropFilterV2,backendName:"cpu",kernelFunc:conv3DBackpropFilterV2$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropInputV2(_){const{inputs:$,backend:_e,attrs:et}=_,{dy:tt,filter:rt}=$,{pad:nt,strides:it,inputShape:st}=et;assertNotComplex$1([tt],"conv3dBackpropInputV2");const at=computeStrides(tt.shape),ot=computeStrides(rt.shape),dt=computeConv3DInfo(st,rt.shape,it,1,nt),ht=new TensorBuffer(dt.inShape,"float32"),yt=ht.values,[vt,xt,wt,Et]=ht.strides,At=_e.data.get(tt.dataId).values,[jt,kt,Lt,Bt]=at,Gt=_e.data.get(rt.dataId).values,[er,tr,ar,Mt]=ot,{batchSize:lt,filterDepth:mt,filterHeight:gt,filterWidth:bt,inChannels:St,inDepth:Nt,inHeight:Pt,inWidth:Tt,outChannels:pt,outDepth:Rt,outHeight:zt,outWidth:Yt,strideDepth:ir,strideHeight:ur,strideWidth:cr}=dt,rr=mt-1-dt.padInfo.front,fr=gt-1-dt.padInfo.top,dr=bt-1-dt.padInfo.left;for(let gr=0;gr<lt;++gr)for(let hr=0;hr<St;++hr)for(let or=0;or<Nt;++or){const br=or-rr,Rr=Math.max(0,Math.ceil(br/ir)),_r=Math.min(Rt,(mt+br)/ir);for(let Er=0;Er<Pt;++Er){const Hr=Er-fr,xr=Math.max(0,Math.ceil(Hr/ur)),yr=Math.min(zt,(gt+Hr)/ur);for(let Ar=0;Ar<Tt;++Ar){const $r=Ar-dr,Tr=Math.max(0,Math.ceil($r/cr)),jr=Math.min(Yt,(bt+$r)/cr);let Cr=0;for(let Nr=Rr;Nr<_r;++Nr){const nn=Nr*ir-br;for(let Mr=xr;Mr<yr;++Mr){const Lr=Mr*ur-Hr;for(let an=Tr;an<jr;++an){const pr=an*cr-$r,nr=jt*gr+kt*Nr+Lt*Mr+Bt*an,lr=er*(mt-1-nn)+tr*(gt-1-Lr)+ar*(bt-1-pr)+Mt*hr;for(let vr=0;vr<pt;++vr){const wr=At[nr+vr],Pr=Gt[lr+vr];Cr+=wr*Pr}}}}yt[vt*gr+xt*or+wt*Er+Et*Ar+hr]=Cr}}}return _e.makeTensorInfo(ht.shape,ht.dtype,ht.values)}const conv3DBackpropInputV2Config={kernelName:Conv3DBackpropInputV2,backendName:"cpu",kernelFunc:conv3DBackpropInputV2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cos$2=unaryKernelFunc$1(Cos,_=>Math.cos(_)),cosConfig$1={kernelName:Cos,backendName:"cpu",kernelFunc:cos$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cosh$1=unaryKernelFunc$1(Cosh,_=>Math.cosh(_)),coshConfig$1={kernelName:Cosh,backendName:"cpu",kernelFunc:cosh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cropAndResize$1(_){const{inputs:$,backend:_e,attrs:et}=_,{image:tt,boxes:rt,boxInd:nt}=$,{cropSize:it,method:st,extrapolationValue:at}=et,[ot,dt,ht,yt]=tt.shape,vt=rt.shape[0],[xt,wt]=it,Et=buffer$1([vt,xt,wt,yt],"float32"),At=_e.data.get(rt.dataId).values,jt=_e.data.get(nt.dataId).values,kt=_e.data.get(tt.dataId).values,Lt=computeStrides(tt.shape),Bt=computeStrides(Et.shape);for(let Gt=0;Gt<vt;Gt++){const er=Gt*4,tr=At[er],ar=At[er+1],Mt=At[er+2],lt=At[er+3],mt=jt[Gt];if(mt>=ot)continue;const gt=xt>1?(Mt-tr)*(dt-1)/(xt-1):0,bt=wt>1?(lt-ar)*(ht-1)/(wt-1):0;for(let St=0;St<xt;St++){const Nt=xt>1?tr*(dt-1)+St*gt:.5*(tr+Mt)*(dt-1);if(Nt<0||Nt>dt-1){for(let Pt=0;Pt<wt;Pt++)for(let Tt=0;Tt<yt;Tt++){const pt=Tt+Pt*Bt[2]+St*Bt[1]+Gt*Bt[0];Et.values[pt]=at}continue}if(st==="bilinear"){const Pt=Math.floor(Nt),Tt=Math.ceil(Nt),pt=Nt-Pt;for(let Rt=0;Rt<wt;Rt++){const zt=wt>1?ar*(ht-1)+Rt*bt:.5*(ar+lt)*(ht-1);if(zt<0||zt>ht-1){for(let cr=0;cr<yt;cr++){const rr=cr+Rt*Bt[2]+St*Bt[1]+Gt*Bt[0];Et.values[rr]=at}continue}const Yt=Math.floor(zt),ir=Math.ceil(zt),ur=zt-Yt;for(let cr=0;cr<yt;cr++){let rr=cr+Yt*Lt[2]+Pt*Lt[1]+mt*Lt[0];const fr=kt[rr];rr=cr+ir*Lt[2]+Pt*Lt[1]+mt*Lt[0];const dr=kt[rr];rr=cr+Yt*Lt[2]+Tt*Lt[1]+mt*Lt[0];const gr=kt[rr];rr=cr+ir*Lt[2]+Tt*Lt[1]+mt*Lt[0];const hr=kt[rr],or=fr+(dr-fr)*ur,br=gr+(hr-gr)*ur;rr=cr+Rt*Bt[2]+St*Bt[1]+Gt*Bt[0],Et.values[rr]=or+(br-or)*pt}}}else for(let Pt=0;Pt<wt;++Pt){const Tt=wt>1?ar*(ht-1)+Pt*bt:.5*(ar+lt)*(ht-1);if(Tt<0||Tt>ht-1){for(let zt=0;zt<yt;zt++){const Yt=zt+Pt*Bt[2]+St*Bt[1]+Gt*Bt[0];Et.values[Yt]=at}continue}const pt=Math.round(Tt),Rt=Math.round(Nt);for(let zt=0;zt<yt;zt++){const Yt=zt+pt*Lt[2]+Rt*Lt[1]+mt*Lt[0],ir=zt+Pt*Bt[2]+St*Bt[1]+Gt*Bt[0];Et.values[ir]=kt[Yt]}}}}return _e.makeTensorInfo(Et.shape,Et.dtype,Et.values)}const cropAndResizeConfig$1={kernelName:CropAndResize,backendName:"cpu",kernelFunc:cropAndResize$1};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cumprod$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{axis:rt,exclusive:nt,reverse:it}=et;assertNotComplex$1(tt,"cumprod");const st=getAxesPermutation([rt],tt.shape.length);let at=tt;st!=null&&(at=transpose$1({inputs:{x:tt},backend:_e,attrs:{perm:st}}));const ot=getInnerMostAxes(1,tt.shape.length)[0];if(ot!==at.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${at.shape.length-1} but got axis=${ot}`);const dt=upcastType(at.dtype,"int32"),ht=makeOnesTypedArray(sizeFromShape(at.shape),dt),yt=_e.data.get(at.dataId).values,vt=at.shape[at.shape.length-1],xt=it?(Et,At)=>Et+vt-At-1:(Et,At)=>Et+At;for(let Et=0;Et<yt.length;Et+=vt)for(let At=0;At<vt;At++){const jt=xt(Et,At);if(At===0)ht[jt]=nt?1:yt[jt];else{const kt=xt(Et,At-1);ht[jt]=nt?yt[kt]*ht[kt]:yt[jt]*ht[kt]}}const wt=_e.makeTensorInfo(at.shape,dt,ht);if(st!=null){const Et=getUndoAxesPermutation(st),At=transpose$1({inputs:{x:wt},backend:_e,attrs:{perm:Et}});return _e.disposeIntermediateTensorInfo(wt),_e.disposeIntermediateTensorInfo(at),At}return wt}const cumprodConfig$1={kernelName:Cumprod,backendName:"cpu",kernelFunc:cumprod$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cumsum$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{axis:rt,exclusive:nt,reverse:it}=et;assertNotComplex$1(tt,"cumsum");const st=getAxesPermutation([rt],tt.shape.length);let at=tt;st!=null&&(at=transpose$1({inputs:{x:tt},backend:_e,attrs:{perm:st}}));const ot=getInnerMostAxes(1,tt.shape.length)[0];if(ot!==at.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${at.shape.length-1} but got axis=${ot}`);const dt=upcastType(at.dtype,"int32"),ht=makeZerosTypedArray(sizeFromShape(at.shape),dt),yt=_e.data.get(at.dataId).values,vt=at.shape[at.shape.length-1],xt=it?(Et,At)=>Et+vt-At-1:(Et,At)=>Et+At;for(let Et=0;Et<yt.length;Et+=vt)for(let At=0;At<vt;At++){const jt=xt(Et,At);if(At===0)ht[jt]=nt?0:yt[jt];else{const kt=xt(Et,At-1);ht[jt]=nt?yt[kt]+ht[kt]:yt[jt]+ht[kt]}}const wt=_e.makeTensorInfo(at.shape,dt,ht);if(st!=null){const Et=getUndoAxesPermutation(st),At=transpose$1({inputs:{x:wt},backend:_e,attrs:{perm:Et}});return _e.disposeIntermediateTensorInfo(wt),_e.disposeIntermediateTensorInfo(at),At}return wt}const cumsumConfig$1={kernelName:Cumsum,backendName:"cpu",kernelFunc:cumsum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function denseBincount$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,weights:rt}=$,{size:nt,binaryOutput:it}=et;if(tt.shape.length===1){const st=_e.data.get(tt.dataId).values,at=_e.data.get(rt.dataId).values,ot=bincountImpl(st,at,rt.dtype,rt.shape,nt);return _e.makeTensorInfo([nt],rt.dtype,ot)}else if(tt.shape.length===2){const st=_e.bufferSync(tt),at=_e.bufferSync(rt),ot=bincountReduceImpl(st,at,nt,it);return _e.makeTensorInfo(ot.shape,rt.dtype,ot.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${tt.shape.length}.`)}const denseBincountConfig$1={kernelName:DenseBincount,backendName:"cpu",kernelFunc:denseBincount$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthToSpace$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{blockSize:rt,dataFormat:nt}=et;assert$1(nt==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${nt}`);const it=tt.shape[0],st=tt.shape[1],at=tt.shape[2],ot=tt.shape[3],dt=st*rt,ht=at*rt,yt=ot/(rt*rt),vt=_e.data.get(tt.dataId).values,xt=new Float32Array(it*dt*ht*yt);let wt=0;for(let Et=0;Et<it;++Et)for(let At=0;At<dt;++At){const jt=Math.floor(At/rt),kt=At%rt;for(let Lt=0;Lt<ht;++Lt){const Bt=Math.floor(Lt/rt),Gt=Lt%rt,er=(kt*rt+Gt)*yt;for(let tr=0;tr<yt;++tr){const Mt=tr+er+ot*(Bt+at*(jt+st*Et));xt[wt++]=vt[Mt]}}}return _e.makeTensorInfo([it,dt,ht,yt],tt.dtype,xt)}const depthToSpaceConfig$1={kernelName:DepthToSpace,backendName:"cpu",kernelFunc:depthToSpace$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNative$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,filter:rt}=$,{strides:nt,pad:it,dilations:st,dimRoundingMode:at}=et;assertNotComplex$1([tt,rt],"depthwiseConv2DNative");const ot=computeStrides(tt.shape),dt=computeStrides(rt.shape);let ht=st;ht==null&&(ht=[1,1]),assert$1(eitherStridesOrDilationsAreOne(nt,ht),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${nt} and dilations '${ht}'`);const yt=computeConv2DInfo(tt.shape,rt.shape,nt,ht,it,at,!0),{filterHeight:vt,filterWidth:xt,dilationHeight:wt,dilationWidth:Et,padInfo:At}=yt,jt=At.left,kt=At.top,Lt=yt.outChannels/yt.inChannels,Bt=new TensorBuffer(yt.outShape,tt.dtype),Gt=_e.data.get(tt.dataId).values,er=_e.data.get(rt.dataId).values,tr=Bt.values;for(let ar=0;ar<yt.batchSize;++ar){const Mt=ar*ot[0],lt=ar*Bt.strides[0];for(let mt=0;mt<yt.outHeight;++mt){const gt=lt+mt*Bt.strides[1],bt=mt*yt.strideHeight-kt;for(let St=0;St<vt;++St){const Nt=bt+St*wt;if(Nt<0||Nt>=yt.inHeight)continue;const Pt=St*dt[0],Tt=Mt+Nt*ot[1];for(let pt=0;pt<yt.outWidth;++pt){const Rt=gt+pt*Bt.strides[2],zt=pt*yt.strideWidth-jt;for(let Yt=0;Yt<xt;++Yt){const ir=zt+Yt*Et;if(ir<0||ir>=yt.inWidth)continue;const ur=Pt+Yt*dt[1],cr=Tt+ir*yt.inChannels;let rr=Rt,fr=ur;for(let dr=0;dr<yt.inChannels;++dr){const gr=Gt[cr+dr];for(let hr=0;hr<Lt;++hr)tr[rr+hr]+=gr*er[fr+hr];rr+=Lt,fr+=Lt}}}}}}return _e.makeTensorInfo(Bt.shape,Bt.dtype,Bt.values)}const depthwiseConv2dNativeConfig$1={kernelName:DepthwiseConv2dNative,backendName:"cpu",kernelFunc:depthwiseConv2dNative$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropFilter$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,dy:rt}=$,{strides:nt,dilations:it,pad:st,dimRoundingMode:at,filterShape:ot}=et;assertNotComplex$1([tt,rt],"depthwiseConv2dNativeBackpropFilter");const dt=computeConv2DInfo(tt.shape,ot,nt,it,st,at,!0),{strideHeight:ht,strideWidth:yt,filterHeight:vt,filterWidth:xt}=dt,wt=new TensorBuffer(dt.filterShape,"float32"),Et=dt.padInfo.left,At=dt.padInfo.top,jt=dt.outChannels/dt.inChannels,kt=_e.data.get(tt.dataId).values,Lt=new TensorBuffer(tt.shape,tt.dtype,kt),Bt=_e.data.get(rt.dataId).values,Gt=new TensorBuffer(rt.shape,rt.dtype,Bt);for(let er=0;er<vt;++er){const tr=Math.max(0,Math.ceil((At-er)/ht)),ar=Math.min(dt.outHeight,(dt.inHeight+At-er)/ht);for(let Mt=0;Mt<xt;++Mt){const lt=Math.max(0,Math.ceil((Et-Mt)/yt)),mt=Math.min(dt.outWidth,(dt.inWidth+Et-Mt)/yt);for(let gt=0;gt<dt.outChannels;++gt){const bt=Math.trunc(gt/jt),St=gt%jt;let Nt=0;for(let Pt=0;Pt<dt.batchSize;++Pt)for(let Tt=tr;Tt<ar;++Tt){const pt=er+Tt*ht-At;for(let Rt=lt;Rt<mt;++Rt){const zt=Mt+Rt*yt-Et;Nt+=Lt.get(Pt,pt,zt,bt)*Gt.get(Pt,Tt,Rt,gt)}}wt.set(Nt,er,Mt,bt,St)}}}return _e.makeTensorInfo(wt.shape,wt.dtype,wt.values)}const depthwiseConv2dNativeBackpropFilterConfig$1={kernelName:DepthwiseConv2dNativeBackpropFilter,backendName:"cpu",kernelFunc:depthwiseConv2dNativeBackpropFilter$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropInput$1(_){const{inputs:$,backend:_e,attrs:et}=_,{dy:tt,filter:rt}=$,{strides:nt,dilations:it,pad:st,dimRoundingMode:at,inputShape:ot}=et;assertNotComplex$1([tt,rt],"depthwiseConv2DNativeBackpropInput");const dt=computeStrides(tt.shape),ht=computeStrides(rt.shape),yt=computeConv2DInfo(ot,rt.shape,nt,it,st,at,!0),vt=new TensorBuffer(yt.inShape,"float32"),xt=vt.values,[wt,Et,At]=vt.strides,jt=_e.data.get(tt.dataId).values,[kt,Lt,Bt]=dt,Gt=_e.data.get(rt.dataId).values,[er,tr,ar]=ht,{batchSize:Mt,filterHeight:lt,filterWidth:mt,inChannels:gt,inHeight:bt,inWidth:St,outChannels:Nt,outHeight:Pt,outWidth:Tt,strideHeight:pt,strideWidth:Rt}=yt,zt=lt-1-yt.padInfo.top,Yt=mt-1-yt.padInfo.left,ir=Nt/gt;for(let ur=0;ur<Mt;++ur)for(let cr=0;cr<gt;++cr)for(let rr=0;rr<bt;++rr){const fr=rr-zt,dr=Math.max(0,Math.ceil(fr/pt)),gr=Math.min(Pt,(lt+fr)/pt);for(let hr=0;hr<St;++hr){const or=hr-Yt,br=Math.max(0,Math.ceil(or/Rt)),Rr=Math.min(Tt,(mt+or)/Rt);let _r=0;for(let Er=dr;Er<gr;++Er){const Hr=Er*pt-fr;for(let xr=br;xr<Rr;++xr){const yr=xr*Rt-or,Ar=kt*ur+Lt*Er+Bt*xr,$r=er*(lt-1-Hr)+tr*(mt-1-yr)+ar*cr;for(let Tr=0;Tr<ir;++Tr){const jr=cr*ir+Tr,Cr=jt[Ar+jr],Nr=Gt[$r+Tr];_r+=Cr*Nr}}}xt[wt*ur+Et*rr+At*hr+cr]=_r}}return _e.makeTensorInfo(vt.shape,vt.dtype,vt.values)}const depthwiseConv2dNativeBackpropInputConfig$1={kernelName:DepthwiseConv2dNativeBackpropInput,backendName:"cpu",kernelFunc:depthwiseConv2dNativeBackpropInput$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function diag$1(_){const{inputs:$,backend:_e}=_,{x:et}=$,tt=sizeFromShape(et.shape),rt=_e.data.get(et.dataId).values,nt=buffer$1([tt,tt],et.dtype),it=nt.values;for(let at=0;at<rt.length;at++)it[at*tt+at]=rt[at];const st=[...et.shape,...et.shape];return _e.makeTensorInfo(st,nt.dtype,nt.values)}const diagConfig$1={kernelName:Diag,backendName:"cpu",kernelFunc:diag$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dilation2DConfig$1={kernelName:Dilation2D,backendName:"cpu",kernelFunc:({inputs:_,backend:$,attrs:_e})=>{const{x:et,filter:tt}=_,{strides:rt,pad:nt,dilations:it}=_e,st=$,at=st.data.get(et.dataId).values,ot=et.shape.length,dt=st.data.get(tt.dataId).values,ht=tt.shape.length,{batchSize:yt,inHeight:vt,inWidth:xt,inChannels:wt,outHeight:Et,outWidth:At,padInfo:jt,strideHeight:kt,strideWidth:Lt,filterHeight:Bt,filterWidth:Gt,dilationHeight:er,dilationWidth:tr,outShape:ar}=computeDilation2DInfo(et.shape,tt.shape,rt,nt,"NHWC",it),Mt=sizeFromShape(ar),lt=ar.length,mt=getArrayFromDType(et.dtype,Mt);for(let bt=0;bt<yt;++bt)for(let St=0;St<Et;++St){const Nt=St*kt-jt.top;for(let Pt=0;Pt<At;++Pt){const Tt=Pt*Lt-jt.left;for(let pt=0;pt<wt;++pt){let Rt=Number.MIN_SAFE_INTEGER;for(let Yt=0;Yt<Bt;++Yt){const ir=Nt+Yt*er;if(ir>=0&&ir<vt)for(let ur=0;ur<Gt;++ur){const cr=Tt+ur*tr;if(cr>=0&&cr<xt){const rr=locToIndex([bt,ir,cr,pt],ot,computeStrides(et.shape)),fr=locToIndex([Yt,ur,pt],ht,computeStrides(tt.shape)),dr=at[rr]+dt[fr];dr>Rt&&(Rt=dr)}}}const zt=locToIndex([bt,St,Pt,pt],lt,computeStrides(ar));mt[zt]=Rt}}}return{dataId:st.write(toTypedArray(mt,et.dtype),ar,et.dtype),shape:ar,dtype:et.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dilation2DBackpropFilterConfig={kernelName:Dilation2DBackpropFilter,backendName:"cpu",kernelFunc:({inputs:_,backend:$,attrs:_e})=>{const{x:et,filter:tt,dy:rt}=_,{strides:nt,pad:it,dilations:st}=_e,at=$,ot=toNestedArray(et.shape,at.data.get(et.dataId).values),dt=toNestedArray(tt.shape,at.data.get(tt.dataId).values),{batchSize:ht,inHeight:yt,inWidth:vt,inChannels:xt,outHeight:wt,outWidth:Et,padInfo:At,strideHeight:jt,strideWidth:kt,filterHeight:Lt,filterWidth:Bt,dilationHeight:Gt,dilationWidth:er,outShape:tr}=computeDilation2DInfo(et.shape,tt.shape,nt,it,"NHWC",st);assert$1(rt.rank===tr.length,()=>`Error in ${Dilation2DBackpropFilter}, dy must have the same rank as output ${tr.length}, but got ${rt.rank}`);const ar=toNestedArray(tr,at.data.get(rt.dataId).values),Mt=makeZerosNestedTypedArray(tt.shape,tt.dtype);for(let mt=0;mt<ht;++mt)for(let gt=0;gt<wt;++gt){const bt=gt*jt-At.top;for(let St=0;St<Et;++St){const Nt=St*kt-At.left;for(let Pt=0;Pt<xt;++Pt){let Tt=Number.MIN_SAFE_INTEGER,pt=0,Rt=0;for(let zt=0;zt<Lt;++zt){const Yt=bt+zt*Gt;if(Yt>=0&&Yt<yt)for(let ir=0;ir<Bt;++ir){const ur=Nt+ir*er;if(ur>=0&&ur<vt){const cr=ot[mt][Yt][ur][Pt]+dt[zt][ir][Pt];cr>Tt&&(Tt=cr,pt=zt,Rt=ir)}}}Mt[pt][Rt][Pt]+=ar[mt][gt][St][Pt]}}}return{dataId:at.write(toTypedArray(Mt,et.dtype),tt.shape,tt.dtype),shape:tt.shape,dtype:tt.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dilation2DBackpropInputConfig={kernelName:Dilation2DBackpropInput,backendName:"cpu",kernelFunc:({inputs:_,backend:$,attrs:_e})=>{const{x:et,filter:tt,dy:rt}=_,{strides:nt,pad:it,dilations:st}=_e,at=$,ot=toNestedArray(et.shape,at.data.get(et.dataId).values),dt=toNestedArray(tt.shape,at.data.get(tt.dataId).values),{batchSize:ht,inHeight:yt,inWidth:vt,inChannels:xt,outHeight:wt,outWidth:Et,padInfo:At,strideHeight:jt,strideWidth:kt,filterHeight:Lt,filterWidth:Bt,dilationHeight:Gt,dilationWidth:er,outShape:tr}=computeDilation2DInfo(et.shape,tt.shape,nt,it,"NHWC",st);assert$1(rt.rank===tr.length,()=>`Error in ${Dilation2DBackpropInput}, dy must have the same rank as output ${tr.length}, but got ${rt.rank}`);const ar=toNestedArray(tr,at.data.get(rt.dataId).values),Mt=makeZerosNestedTypedArray(et.shape,et.dtype);for(let mt=0;mt<ht;++mt)for(let gt=0;gt<wt;++gt){const bt=gt*jt-At.top;for(let St=0;St<Et;++St){const Nt=St*kt-At.left;for(let Pt=0;Pt<xt;++Pt){let Tt=Number.MIN_SAFE_INTEGER,pt=bt<0?0:bt,Rt=Nt<0?0:Nt;for(let zt=0;zt<Lt;++zt){const Yt=bt+zt*Gt;if(Yt>=0&&Yt<yt)for(let ir=0;ir<Bt;++ir){const ur=Nt+ir*er;if(ur>=0&&ur<vt){const cr=ot[mt][Yt][ur][Pt]+dt[zt][ir][Pt];cr>Tt&&(Tt=cr,pt=Yt,Rt=ur)}}}Mt[mt][pt][Rt][Pt]+=ar[mt][gt][St][Pt]}}}return{dataId:at.write(toTypedArray(Mt,et.dtype),et.shape,et.dtype),shape:et.shape,dtype:et.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function draw(_){const{inputs:$,backend:_e,attrs:et}=_,{image:tt}=$,{canvas:rt,options:nt}=et,{contextOptions:it,imageOptions:st}=nt||{},at=(st==null?void 0:st.alpha)||1,ot=(it==null?void 0:it.contextType)||"2d";if(ot!=="2d")throw new Error(`Context type ${it.contextType} is not supported by the CPU backend.`);const dt=rt.getContext(ot,(it==null?void 0:it.contextAttributes)||{});if(dt==null)throw new Error(`Could not get the context with ${ot} type.`);const[ht,yt]=tt.shape.slice(0,2),vt=tt.shape.length===2?1:tt.shape[2],xt=_e.data.get(tt.dataId).values,wt=tt.dtype==="float32"?255:1,Et=new Uint8ClampedArray(yt*ht*4);for(let jt=0;jt<ht*yt;++jt){const kt=[0,0,0,255*at];for(let Bt=0;Bt<vt;Bt++){const Gt=xt[jt*vt+Bt];if(tt.dtype==="float32"){if(Gt<0||Gt>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${Gt}.`)}else if(tt.dtype==="int32"&&(Gt<0||Gt>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${Gt}.`);vt===1?(kt[0]=Gt*wt,kt[1]=Gt*wt,kt[2]=Gt*wt):kt[Bt]=Gt*wt}const Lt=jt*4;Et[Lt+0]=Math.round(kt[0]),Et[Lt+1]=Math.round(kt[1]),Et[Lt+2]=Math.round(kt[2]),Et[Lt+3]=Math.round(kt[3])}rt.width=yt,rt.height=ht;const At=new ImageData(Et,yt,ht);return dt.putImageData(At,0,0),tt}const drawConfig={kernelName:Draw,backendName:"cpu",kernelFunc:draw};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sum$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{axis:rt,keepDims:nt}=et;assertNotComplex$1(tt,"sum");let it;tt.dtype==="bool"?it=cast$1({inputs:{x:tt},backend:_e,attrs:{dtype:"int32"}}):it=identity$d({inputs:{x:tt},backend:_e});const st=it.shape.length,at=parseAxisParam(rt,it.shape),ot=getAxesPermutation(at,st);let dt=at,ht=it;ot!=null&&(ht=transpose$1({inputs:{x:it},backend:_e,attrs:{perm:ot}}),dt=getInnerMostAxes(dt.length,st)),assertAxesAreInnerMostDims("sum",dt,ht.shape.length);const[yt,vt]=computeOutAndReduceShapes(ht.shape,dt),xt=upcastType(ht.dtype,"int32");let wt=zeros(_e,yt,xt);const Et=sizeFromShape(vt),At=_e.data.get(wt.dataId).values,jt=_e.data.get(ht.dataId).values;for(let kt=0;kt<At.length;++kt){const Lt=kt*Et;let Bt=0;for(let Gt=0;Gt<Et;++Gt)Bt+=jt[Lt+Gt];At[kt]=Bt}if(nt){const kt=expandShapeToKeepDim(wt.shape,at),Lt=wt;wt=reshape$1({inputs:{x:wt},backend:_e,attrs:{shape:kt}}),_e.disposeIntermediateTensorInfo(Lt)}return _e.disposeIntermediateTensorInfo(it),ot!=null&&_e.disposeIntermediateTensorInfo(ht),wt}const sumConfig$1={kernelName:Sum,backendName:"cpu",kernelFunc:sum$1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function einsum$1(_){const{inputs:$,backend:_e,attrs:et}=_,{equation:tt}=et,rt=$,{allDims:nt,summedDims:it,idDims:st}=decodeEinsumEquation(tt,rt.length);checkEinsumDimSizes(nt.length,st,rt);const{path:at,steps:ot}=getEinsumComputePath(it,st),dt=ot.length;let ht=null,yt=nt.length;const vt=[];for(let xt=0;xt<dt;++xt){for(const wt of ot[xt]){const{permutationIndices:Et,expandDims:At}=getEinsumPermutation(yt,st[wt]);let jt;isIdentityPermutation(Et)?jt=rt[wt]:(jt=transpose$1({inputs:{x:rt[wt]},backend:_e,attrs:{perm:Et}}),vt.push(jt));const kt=jt.shape.slice();for(let Lt=0;Lt<At.length;++Lt)kt.splice(At[Lt],0,1);arraysEqual(jt.shape,kt)||(jt=reshape$1({inputs:{x:jt},backend:_e,attrs:{shape:kt}}),vt.push(jt)),ht===null?ht=jt:(ht=multiply$1({inputs:{a:jt,b:ht},backend:_e}),vt.push(ht))}xt<dt-1&&(at[xt]>=0&&(ht=sum$1({inputs:{x:ht},backend:_e,attrs:{axis:at[xt]-(nt.length-yt),keepDims:!1}}),vt.push(ht)),yt--)}for(const xt of vt)xt!==ht&&_e.disposeIntermediateTensorInfo(xt);return ht}const einsumConfig$1={kernelName:Einsum,backendName:"cpu",kernelFunc:einsum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eluGrad$1(_){const{inputs:$,backend:_e}=_,{dy:et,y:tt}=$;assertNotComplex$1([et,tt],"eluGrad");const rt=new Float32Array(sizeFromShape(tt.shape)),nt=_e.data.get(tt.dataId).values,it=_e.data.get(et.dataId).values;for(let st=0;st<nt.length;++st){const at=nt[st];at>=0?rt[st]=it[st]:rt[st]=it[st]*(at+1)}return _e.makeTensorInfo(tt.shape,"float32",rt)}const eluGradConfig$1={kernelName:EluGrad,backendName:"cpu",kernelFunc:eluGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p$1=ERF_P,a1=ERF_A1,a2=ERF_A2,a3=ERF_A3,a4=ERF_A4,a5=ERF_A5,erf$1=unaryKernelFunc$1(Erf,_=>{const $=Math.sign(_),_e=Math.abs(_),et=1/(1+p$1*_e);return $*(1-((((a5*et+a4)*et+a3)*et+a2)*et+a1)*et*Math.exp(-_e*_e))}),erfConfig$1={kernelName:Erf,backendName:"cpu",kernelFunc:erf$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function expandDims$1(_){const{inputs:$,backend:_e,attrs:et}=_,{input:tt}=$,{dim:rt}=et,nt=tt.shape.length,it=tt.shape.slice();let st=rt;return rt<0&&(assert$1(-(nt+1)<=rt,()=>`Axis must be in the interval [${-(nt+1)}, ${nt}]`),st=nt+rt+1),it.splice(st,0,1),reshape$1({inputs:{x:tt},backend:_e,attrs:{shape:it}})}const expandDimsConfig$1={kernelName:ExpandDims,backendName:"cpu",kernelFunc:expandDims$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const realDivImpl=createSimpleBinaryKernelImpl((_,$)=>_/$),div=binaryKernelFunc$1(RealDiv,realDivImpl),realDivConfig$1={kernelName:RealDiv,backendName:"cpu",kernelFunc:div};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fftBatch(_,$,_e){const et=_.shape,tt=et[0],rt=et[1],nt=_e.data.get(_.dataId),it=nt.complexTensorInfos.real,st=nt.complexTensorInfos.imag,at=[tt,rt],ot=sizeFromShape(at),dt=getTypedArrayFromDType("float32",ot),ht=getTypedArrayFromDType("float32",ot);for(let wt=0;wt<tt;wt++){const Et=slice$1({inputs:{x:it},backend:_e,attrs:{begin:[wt,0],size:[1,rt]}}),At=slice$1({inputs:{x:st},backend:_e,attrs:{begin:[wt,0],size:[1,rt]}}),jt=complex$1({inputs:{real:Et,imag:At},backend:_e}),{real:kt,imag:Lt}=fftImpl$1(jt,$,_e),Bt=mergeRealAndImagArrays(kt,Lt);for(let Gt=0;Gt<rt;Gt++){const er=getComplexWithIndex(Bt,Gt);dt[wt*rt+Gt]=er.real,ht[wt*rt+Gt]=er.imag}_e.disposeIntermediateTensorInfo(Et),_e.disposeIntermediateTensorInfo(At),_e.disposeIntermediateTensorInfo(jt)}const yt=_e.makeTensorInfo(at,"float32",dt),vt=_e.makeTensorInfo(at,"float32",ht),xt=complex$1({inputs:{real:yt,imag:vt},backend:_e});return _e.disposeIntermediateTensorInfo(yt),_e.disposeIntermediateTensorInfo(vt),xt}function fftImpl$1(_,$,_e){const et=sizeFromShape(_.shape),tt=_e.data.get(_.dataId),rt=_e.data.get(tt.complexTensorInfos.real.dataId).values,nt=_e.data.get(tt.complexTensorInfos.imag.dataId).values;if(isExponentOf2(et)){const it=fftRadix2(rt,nt,et,$,_e),st=[_.shape[0],_.shape[1]];if($){const at=_e.makeTensorInfo(st,"float32",it.real),ot=_e.makeTensorInfo(st,"float32",it.imag),dt=_e.makeTensorInfo([],"float32",createScalarValue(et,"float32")),ht=identity$d({inputs:{x:dt},backend:_e}),yt=realDivConfig$1.kernelFunc({inputs:{a:at,b:dt},backend:_e}),vt=realDivConfig$1.kernelFunc({inputs:{a:ot,b:ht},backend:_e}),xt=_e.data.get(yt.dataId).values,wt=_e.data.get(vt.dataId).values;return _e.disposeIntermediateTensorInfo(at),_e.disposeIntermediateTensorInfo(ot),_e.disposeIntermediateTensorInfo(dt),_e.disposeIntermediateTensorInfo(ht),_e.disposeIntermediateTensorInfo(yt),_e.disposeIntermediateTensorInfo(vt),{real:xt,imag:wt}}return it}else{const it=mergeRealAndImagArrays(rt,nt),st=fourierTransformByMatmul(it,et,$);return splitRealAndImagArrays(st)}}function isExponentOf2(_){return(_&_-1)===0}function fftRadix2(_,$,_e,et,tt){if(_e===1)return{real:_,imag:$};const rt=mergeRealAndImagArrays(_,$),nt=_e/2,it=complexWithEvenIndex(rt),st=it.real,at=it.imag,ot=[st.length],dt=tt.makeTensorInfo(ot,"float32",st),ht=tt.makeTensorInfo(ot,"float32",at),yt=complex$1({inputs:{real:dt,imag:ht},backend:tt}),vt=complexWithOddIndex(rt),xt=vt.real,wt=vt.imag,Et=[xt.length],At=tt.makeTensorInfo(Et,"float32",xt),jt=tt.makeTensorInfo(Et,"float32",wt),kt=complex$1({inputs:{real:At,imag:jt},backend:tt}),Lt=fftRadix2(st,at,nt,et,tt),Bt=Lt.real,Gt=Lt.imag,er=[Bt.length],tr=tt.makeTensorInfo(er,"float32",Bt),ar=tt.makeTensorInfo(er,"float32",Gt),Mt=complex$1({inputs:{real:tr,imag:ar},backend:tt}),lt=fftRadix2(xt,wt,nt,et,tt),mt=lt.real,gt=lt.imag,bt=[mt.length],St=tt.makeTensorInfo(bt,"float32",mt),Nt=tt.makeTensorInfo(bt,"float32",gt),Pt=complex$1({inputs:{real:St,imag:Nt},backend:tt}),Tt=exponents(_e,et),pt=[Tt.real.length],Rt=tt.makeTensorInfo(pt,"float32",Tt.real),zt=tt.makeTensorInfo(pt,"float32",Tt.imag),Yt=complex$1({inputs:{real:Rt,imag:zt},backend:tt}),ir=multiply$1({inputs:{a:Yt,b:Pt},backend:tt}),ur=add$1({inputs:{a:Mt,b:ir},backend:tt}),cr=sub$1({inputs:{a:Mt,b:ir},backend:tt}),rr=real$1({inputs:{input:ur},backend:tt}),fr=real$1({inputs:{input:cr},backend:tt}),dr=imag$1({inputs:{input:ur},backend:tt}),gr=imag$1({inputs:{input:cr},backend:tt}),hr=concat$1({inputs:[rr,fr],backend:tt,attrs:{axis:0}}),or=concat$1({inputs:[dr,gr],backend:tt,attrs:{axis:0}}),br=tt.data.get(hr.dataId).values,Rr=tt.data.get(or.dataId).values;return tt.disposeIntermediateTensorInfo(dt),tt.disposeIntermediateTensorInfo(ht),tt.disposeIntermediateTensorInfo(yt),tt.disposeIntermediateTensorInfo(At),tt.disposeIntermediateTensorInfo(jt),tt.disposeIntermediateTensorInfo(kt),tt.disposeIntermediateTensorInfo(tr),tt.disposeIntermediateTensorInfo(ar),tt.disposeIntermediateTensorInfo(Mt),tt.disposeIntermediateTensorInfo(St),tt.disposeIntermediateTensorInfo(Nt),tt.disposeIntermediateTensorInfo(Pt),tt.disposeIntermediateTensorInfo(Rt),tt.disposeIntermediateTensorInfo(zt),tt.disposeIntermediateTensorInfo(Yt),tt.disposeIntermediateTensorInfo(ir),tt.disposeIntermediateTensorInfo(ur),tt.disposeIntermediateTensorInfo(cr),tt.disposeIntermediateTensorInfo(rr),tt.disposeIntermediateTensorInfo(dr),tt.disposeIntermediateTensorInfo(fr),tt.disposeIntermediateTensorInfo(gr),tt.disposeIntermediateTensorInfo(hr),tt.disposeIntermediateTensorInfo(or),{real:br,imag:Rr}}function fourierTransformByMatmul(_,$,_e){const et=new Float32Array($*2);for(let tt=0;tt<$;tt++){let rt=0,nt=0;for(let it=0;it<$;it++){const st=exponent$1(tt*it,$,_e),at=getComplexWithIndex(_,it);rt+=at.real*st.real-at.imag*st.imag,nt+=at.real*st.imag+at.imag*st.real}_e&&(rt/=$,nt/=$),assignToTypedArray(et,rt,nt,tt)}return et}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fft$1(_){const{inputs:$,backend:_e}=_,{input:et}=$,tt=sizeFromShape(et.shape),rt=et.shape[et.shape.length-1],nt=tt/rt,it=reshape$1({inputs:{x:et},backend:_e,attrs:{shape:[nt,rt]}}),st=fftBatch(it,!1,_e),at=reshape$1({inputs:{x:st},backend:_e,attrs:{shape:et.shape}});return _e.disposeIntermediateTensorInfo(it),_e.disposeIntermediateTensorInfo(st),at}const fftConfig$1={kernelName:FFT,backendName:"cpu",kernelFunc:fft$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fill$1(_){const{backend:$,attrs:_e}=_,{shape:et,value:tt,dtype:rt}=_e,nt=rt||inferDtype(tt),it=getArrayFromDType(nt,sizeFromShape(et));return fillValues(it,tt,nt),$.makeTensorInfo(et,nt,it)}const fillConfig$1={kernelName:Fill,backendName:"cpu",kernelFunc:fill$1};function fillValues(_,$,_e){_.fill($)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const flipLeftRightConfig$1={kernelName:FlipLeftRight,backendName:"cpu",kernelFunc:({inputs:_,attrs:$,backend:_e})=>{const{image:et}=_,tt=_e,rt=getTypedArrayFromDType(et.dtype,sizeFromShape(et.shape)),[nt,it,st,at]=et.shape,ot=tt.data.get(et.dataId).values;for(let ht=0;ht<nt;ht++){const yt=ht*st*it*at;for(let vt=0;vt<it;vt++){const xt=vt*(st*at);for(let wt=0;wt<st;wt++){const Et=wt*at;for(let At=0;At<at;At++){const jt=Math.round(st-wt-1),kt=yt+xt+Et+At;let Lt=ot[kt];if(jt>=0&&jt<st){const Bt=jt*at,Gt=yt+xt+Bt+At;Lt=ot[Gt]}rt[kt]=Lt}}}}return{dataId:tt.write(rt,et.shape,et.dtype),shape:et.shape,dtype:et.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedConv2D(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,filter:rt,bias:nt,preluActivationWeights:it}=$,{strides:st,pad:at,dataFormat:ot,dilations:dt,dimRoundingMode:ht,activation:yt,leakyreluAlpha:vt}=et;let xt=conv2D({inputs:{x:tt,filter:rt},backend:_e,attrs:{strides:st,pad:at,dataFormat:ot,dilations:dt,dimRoundingMode:ht}});if(nt){const wt=xt;if(ot==="NCHW"&&nt.shape.length===1&&nt.shape[0]!==1){const Et=reshape$1({inputs:{x:nt},backend:_e,attrs:{shape:[nt.shape[0],1,1]}});xt=add$1({inputs:{a:xt,b:Et},backend:_e}),_e.disposeIntermediateTensorInfo(Et)}else xt=add$1({inputs:{a:xt,b:nt},backend:_e});_e.disposeIntermediateTensorInfo(wt)}if(yt){const wt=xt;if(ot==="NCHW"&&yt==="prelu"&&it.shape.length===1&&it.shape[0]!==1){const Et=reshape$1({inputs:{x:it},backend:_e,attrs:{shape:[it.shape[0],1,1]}});xt=applyActivation(_e,xt,yt,Et,vt),_e.disposeIntermediateTensorInfo(Et)}else xt=applyActivation(_e,xt,yt,it,vt);_e.disposeIntermediateTensorInfo(wt)}return xt}const fusedConv2DConfig$1={kernelName:FusedConv2D,backendName:"cpu",kernelFunc:fusedConv2D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedDepthwiseConv2D$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,filter:rt,bias:nt,preluActivationWeights:it}=$,{strides:st,pad:at,dataFormat:ot,dilations:dt,dimRoundingMode:ht,activation:yt,leakyreluAlpha:vt}=et;let xt=depthwiseConv2dNative$1({inputs:{x:tt,filter:rt},backend:_e,attrs:{strides:st,pad:at,dataFormat:ot,dilations:dt,dimRoundingMode:ht}});if(nt){const wt=xt;xt=add$1({inputs:{a:xt,b:nt},backend:_e}),_e.disposeIntermediateTensorInfo(wt)}if(yt){const wt=xt;xt=applyActivation(_e,xt,yt,it,vt),_e.disposeIntermediateTensorInfo(wt)}return xt}const fusedDepthwiseConv2DConfig$1={kernelName:FusedDepthwiseConv2D,backendName:"cpu",kernelFunc:fusedDepthwiseConv2D$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherNd$1(_){const{inputs:$,backend:_e}=_,{params:et,indices:tt}=$,rt=sizeFromShape(et.shape),nt=tt.shape,it=nt[nt.length-1],[st,at,ot,dt]=prepareAndValidate(et,tt);if(at===0)return _e.makeTensorInfo(st,et.dtype,[]);const ht=_e.data.get(tt.dataId).values,yt=_e.bufferSync(et),vt=gatherNdImpl(ht,yt,et.dtype,at,it,ot,dt,et.shape,rt);return _e.makeTensorInfo(st,et.dtype,vt.values)}const gatherNdConfig$1={kernelName:GatherNd,backendName:"cpu",kernelFunc:gatherNd$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherV2$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,indices:rt}=$,{axis:nt,batchDims:it}=et;assertNotComplex$1([tt,rt],"gatherV2");const st=parseAxisParam(nt,tt.shape)[0],at=_e.data.get(rt.dataId).values,ot=tt.shape[st];for(let kt=0;kt<at.length;++kt){const Lt=at[kt];assert$1(Lt<=ot-1&&Lt>=0,()=>`GatherV2: the index value ${Lt} is not in [0, ${ot-1}]`)}let dt=it;it==null&&(dt=0);const ht=sizeFromShape(rt.shape),yt=collectGatherOpShapeInfo(tt,rt,st,dt),vt=reshape$1({inputs:{x:tt},backend:_e,attrs:{shape:[yt.batchSize,yt.outerSize,yt.dimSize,yt.sliceSize]}}),xt=reshape$1({inputs:{x:rt},backend:_e,attrs:{shape:[yt.batchSize,ht/yt.batchSize]}}),wt=[yt.batchSize,yt.outerSize,ht/yt.batchSize,yt.sliceSize],Et=_e.bufferSync(xt),At=_e.bufferSync(vt),jt=gatherV2Impl(At,Et,wt);return _e.disposeIntermediateTensorInfo(vt),_e.disposeIntermediateTensorInfo(xt),_e.makeTensorInfo(yt.outputShape,jt.dtype,jt.values)}const gatherV2Config$1={kernelName:GatherV2,backendName:"cpu",kernelFunc:gatherV2$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ifft$1(_){const{inputs:$,backend:_e}=_,{input:et}=$,tt=sizeFromShape(et.shape),rt=et.shape[et.shape.length-1],nt=tt/rt,it=reshape$1({inputs:{x:et},backend:_e,attrs:{shape:[nt,rt]}}),st=fftBatch(it,!0,_e),at=reshape$1({inputs:{x:st},backend:_e,attrs:{shape:et.shape}});return _e.disposeIntermediateTensorInfo(it),_e.disposeIntermediateTensorInfo(st),at}const ifftConfig$1={kernelName:IFFT,backendName:"cpu",kernelFunc:ifft$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isFinite$2=unaryKernelFunc$1(IsFinite,_=>Number.isFinite(_)?1:0,"bool"),isFiniteConfig$1={kernelName:IsFinite,backendName:"cpu",kernelFunc:isFinite$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isInf$1=unaryKernelFunc$1(IsInf,_=>Math.abs(_)===1/0?1:0,"bool"),isInfConfig$1={kernelName:IsInf,backendName:"cpu",kernelFunc:isInf$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isNaN$3=unaryKernelFunc$1(IsNan,_=>Number.isNaN(_)?1:0,"bool"),isNaNConfig$1={kernelName:IsNan,backendName:"cpu",kernelFunc:isNaN$3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function linSpace$1(_){const{backend:$,attrs:_e}=_,{start:et,stop:tt,num:rt}=_e,nt=linSpaceImpl(et,tt,rt);return $.makeTensorInfo([nt.length],"float32",nt)}const linSpaceConfig$1={kernelName:LinSpace,backendName:"cpu",kernelFunc:linSpace$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const log1p$1=unaryKernelFunc$1(Log1p,_=>Math.log1p(_)),log1pConfig$1={kernelName:Log1p,backendName:"cpu",kernelFunc:log1p$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logicalAndImpl=createSimpleBinaryKernelImpl((_,$)=>_&&$),logicalAnd$1=binaryKernelFunc$1(LogicalAnd,logicalAndImpl,null,"bool"),logicalAndConfig$1={kernelName:LogicalAnd,backendName:"cpu",kernelFunc:logicalAnd$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logicalNot$1=unaryKernelFunc$1(LogicalNot,_=>_?0:1,"bool"),logicalNotConfig$1={kernelName:LogicalNot,backendName:"cpu",kernelFunc:logicalNot$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logicalOrImpl=createSimpleBinaryKernelImpl((_,$)=>_||$),logicalOr$1=binaryKernelFunc$1(LogicalOr,logicalOrImpl,null,"bool"),logicalOrConfig$1={kernelName:LogicalOr,backendName:"cpu",kernelFunc:logicalOr$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lRN(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{depthRadius:rt,bias:nt,alpha:it,beta:st}=et;assertNotComplex$1(tt,"LRN");const at=tt.shape[3],ot=at-1,dt=_e.data.get(tt.dataId).values,ht=sizeFromShape(tt.shape),yt=new Float32Array(ht);function vt(xt){const wt=xt%at;let Et=xt-wt+Math.max(0,wt-rt);const At=xt-wt+Math.min(wt+rt,ot);let jt=0;for(;Et<=At;Et++){const kt=dt[Et];jt+=kt*kt}return jt}for(let xt=0;xt<ht;xt++){const wt=vt(xt),Et=dt[xt]*Math.pow(nt+it*wt,-st);yt[xt]=Et}return _e.makeTensorInfo(tt.shape,tt.dtype,yt)}const LRNConfig$1={kernelName:LRN,backendName:"cpu",kernelFunc:lRN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lRNGrad(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,y:rt,dy:nt}=$,{depthRadius:it,bias:st,alpha:at,beta:ot}=et;assertNotComplex$1(nt,"LRNGrad");const dt=sizeFromShape(nt.shape),ht=nt.shape[3],yt=_e.data.get(nt.dataId).values,vt=_e.data.get(tt.dataId).values,xt=_e.data.get(rt.dataId).values,wt=new Float32Array(dt),Et=dt;for(let At=0;At<Et;At++){const jt=At%ht,kt=At-jt+Math.max(0,jt-it),Lt=At-jt+Math.min(ht,jt+it+1);let Bt=0;for(let Gt=kt;Gt<Lt;Gt++)Bt+=Math.pow(vt[Gt],2);Bt=at*Bt+st;for(let Gt=kt;Gt<Lt;Gt++){let er=-2*at*ot*vt[Gt]*xt[At]/Bt;At===Gt&&(er+=Math.pow(Bt,-ot)),er*=yt[At],wt[Gt]+=er}}return _e.makeTensorInfo(nt.shape,tt.dtype,wt)}const LRNGradConfig$1={kernelName:LRNGrad,backendName:"cpu",kernelFunc:lRNGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function max$4(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{reductionIndices:rt,keepDims:nt}=et,it=_e;let st=tt.shape;const at=st.length,ot=parseAxisParam(rt,st);let dt=ot;const ht=getAxesPermutation(dt,at);let yt=it.data.get(tt.dataId).values;if(ht!=null){const kt=new Array(at);for(let Lt=0;Lt<kt.length;Lt++)kt[Lt]=st[ht[Lt]];yt=transposeImpl$1(yt,st,tt.dtype,ht,kt),dt=getInnerMostAxes(dt.length,at),st=kt}assertNotComplex$1(tt,"max"),assertAxesAreInnerMostDims("max",dt,at);const[vt,xt]=computeOutAndReduceShapes(st,dt),wt=sizeFromShape(xt),Et=maxImpl$1(yt,wt,vt,tt.dtype),At=it.write(Et,vt,tt.dtype);let jt=vt;return nt&&(jt=expandShapeToKeepDim(vt,ot)),{dataId:At,shape:jt,dtype:tt.dtype}}const maxConfig$1={kernelName:Max,backendName:"cpu",kernelFunc:max$4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$;assertNotComplex$1(tt,"maxPool");const{filterSize:rt,strides:nt,pad:it,dimRoundingMode:st}=et,at=1;assert$1(eitherStridesOrDilationsAreOne(nt,at),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${nt} and dilations '${at}'`);const ot=computePool2DInfo(tt.shape,rt,nt,at,it,st);let dt;if(ot.filterWidth===1&&ot.filterHeight===1&&arraysEqual(ot.inShape,ot.outShape))dt=identity$d({inputs:{x:tt},backend:_e});else{const ht=_e.data.get(tt.dataId).values,yt=computeStrides(tt.shape),vt=pool(ht,tt.shape,tt.dtype,yt,ot,"max");dt=_e.makeTensorInfo(ot.outShape,tt.dtype,vt.values)}return dt}const maxPoolConfig$1={kernelName:MaxPool,backendName:"cpu",kernelFunc:maxPool$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3D(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{filterSize:rt,strides:nt,pad:it,dimRoundingMode:st,dataFormat:at}=et;assertNotComplex$1(tt,"maxPool3d");const ot=computePool3DInfo(tt.shape,rt,nt,1,it,st,at),dt=_e.data.get(tt.dataId).values,ht=pool3d(dt,tt.shape,tt.dtype,computeStrides(tt.shape),ot,"max");return _e.makeTensorInfo(ht.shape,"float32",ht.values)}const maxPool3DConfig$1={kernelName:MaxPool3D,backendName:"cpu",kernelFunc:maxPool3D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3DGrad$1(_){const{inputs:$,backend:_e,attrs:et}=_,{dy:tt,input:rt}=$,{filterSize:nt,strides:it,pad:st,dimRoundingMode:at}=et;assertNotComplex$1([tt,rt],"maxPool3DGrad");const ot=computePool3DInfo(rt.shape,nt,it,1,st,at),dt=_e.bufferSync(rt),ht=maxPool3dPositions(dt,ot),yt=ot.strideDepth,vt=ot.strideHeight,xt=ot.strideWidth,wt=ot.dilationDepth,Et=ot.dilationHeight,At=ot.dilationWidth,jt=ot.effectiveFilterDepth,kt=ot.effectiveFilterHeight,Lt=ot.effectiveFilterWidth,Bt=jt-1-ot.padInfo.front,Gt=Lt-1-ot.padInfo.left,er=kt-1-ot.padInfo.top,tr=buffer$1(rt.shape,"float32"),ar=_e.bufferSync(tt);for(let Mt=0;Mt<ot.batchSize;++Mt)for(let lt=0;lt<ot.inChannels;++lt)for(let mt=0;mt<ot.inDepth;++mt)for(let gt=0;gt<ot.inHeight;++gt)for(let bt=0;bt<ot.inWidth;++bt){const St=mt-Bt,Nt=gt-er,Pt=bt-Gt;let Tt=0;for(let pt=0;pt<jt;pt+=wt){const Rt=(St+pt)/yt;if(!(Rt<0||Rt>=ot.outDepth||Math.floor(Rt)!==Rt))for(let zt=0;zt<kt;zt+=Et){const Yt=(Nt+zt)/vt;if(!(Yt<0||Yt>=ot.outHeight||Math.floor(Yt)!==Yt))for(let ir=0;ir<Lt;ir+=At){const ur=(Pt+ir)/xt;if(ur<0||ur>=ot.outWidth||Math.floor(ur)!==ur)continue;const cr=jt*kt*Lt-1-ht.get(Mt,Rt,Yt,ur,lt),rr=pt*kt*Lt+zt*Lt+ir,fr=cr===rr?1:0;if(fr===0)continue;const dr=ar.get(Mt,Rt,Yt,ur,lt);Tt+=dr*fr}}}tr.set(Tt,Mt,mt,gt,bt,lt)}return _e.makeTensorInfo(tr.shape,tr.dtype,tr.values)}const maxPool3DGradConfig$1={kernelName:MaxPool3DGrad,backendName:"cpu",kernelFunc:maxPool3DGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolGrad$1(_){const{inputs:$,backend:_e,attrs:et}=_,{dy:tt,input:rt,output:nt}=$,it=rt;assertNotComplex$1([rt,nt],"maxPoolGrad");const{filterSize:st,strides:at,pad:ot,dimRoundingMode:dt}=et,ht=computePool2DInfo(it.shape,st,at,1,ot,dt),yt=_e.data.get(it.dataId).values,vt=buffer$1(ht.outShape,it.dtype,maxPoolPositions(yt,it.shape,it.dtype,ht).values),xt=ht.strideHeight,wt=ht.strideWidth,Et=ht.dilationHeight,At=ht.dilationWidth,jt=ht.effectiveFilterHeight,kt=ht.effectiveFilterWidth,Lt=kt-1-ht.padInfo.left,Bt=jt-1-ht.padInfo.top,Gt=buffer$1(it.shape,"float32"),er=_e.data.get(tt.dataId).values,tr=buffer$1(tt.shape,"float32",er);for(let ar=0;ar<ht.batchSize;++ar)for(let Mt=0;Mt<ht.inChannels;++Mt)for(let lt=0;lt<ht.inHeight;++lt)for(let mt=0;mt<ht.inWidth;++mt){const gt=lt-Bt,bt=mt-Lt;let St=0;for(let Nt=0;Nt<jt;Nt+=Et){const Pt=(gt+Nt)/xt;if(!(Pt<0||Pt>=ht.outHeight||Math.floor(Pt)!==Pt))for(let Tt=0;Tt<kt;Tt+=At){const pt=(bt+Tt)/wt;if(pt<0||pt>=ht.outWidth||Math.floor(pt)!==pt)continue;const Rt=jt*kt-1-vt.get(ar,Pt,pt,Mt),zt=Nt*kt+Tt,Yt=Rt===zt?1:0;if(Yt===0)continue;const ir=tr.get(ar,Pt,pt,Mt);St+=ir*Yt}}Gt.set(St,ar,lt,mt,Mt)}return _e.makeTensorInfo(Gt.shape,Gt.dtype,Gt.values)}const maxPoolGradConfig$1={kernelName:MaxPoolGrad,backendName:"cpu",kernelFunc:maxPoolGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolWithArgmaxImpl$1(_,$,_e,et,tt){const rt=computeStrides($),nt=pool(_,$,_e,rt,tt,"max"),it=maxPoolPositions(_,$,_e,tt,!0,et);return[nt.values,it.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxPoolWithArgmaxConfig$1={kernelName:MaxPoolWithArgmax,backendName:"cpu",kernelFunc:({inputs:_,attrs:$,backend:_e})=>{const{x:et}=_,{filterSize:tt,strides:rt,pad:nt,includeBatchInIndex:it}=$,st=_e;assertNotComplex$1(et,"MaxPoolWithArgmax");const at=st.data.get(et.dataId).values,ot=computePool2DInfo(et.shape,tt,rt,[1,1],nt),[dt,ht]=maxPoolWithArgmaxImpl$1(at,et.shape,et.dtype,it,ot),yt=st.write(dt,ot.outShape,et.dtype),vt=st.write(ht,ot.outShape,et.dtype);return[{dataId:yt,shape:ot.outShape,dtype:et.dtype},{dataId:vt,shape:ot.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mean(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{axis:rt,keepDims:nt}=et,it=parseAxisParam(rt,tt.shape),at=computeOutAndReduceShapes(tt.shape,it)[1],ot=sizeFromShape(at),dt=[],ht=_e.makeTensorInfo([],"float32",new Float32Array([ot]));dt.push(ht);const yt=cast$1({inputs:{x:tt},backend:_e,attrs:{dtype:"float32"}});dt.push(yt);const vt=div({inputs:{a:yt,b:ht},backend:_e});dt.push(vt);const xt=sum$1({inputs:{x:vt},backend:_e,attrs:{axis:rt,keepDims:nt}});return dt.forEach(wt=>_e.disposeIntermediateTensorInfo(wt)),xt}const meanConfig$1={kernelName:Mean,backendName:"cpu",kernelFunc:mean};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function min$4(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{axis:rt,keepDims:nt}=et;assertNotComplex$1(tt,"min");const it=parseAxisParam(rt,tt.shape);let st=it;const at=getAxesPermutation(st,tt.shape.length);let ot=tt;at!=null&&(ot=transpose$1({inputs:{x:tt},backend:_e,attrs:{perm:at}}),st=getInnerMostAxes(st.length,tt.shape.length)),assertAxesAreInnerMostDims("min",st,ot.shape.length);const[dt,ht]=computeOutAndReduceShapes(ot.shape,st),yt=sizeFromShape(ht),vt=makeZerosTypedArray(sizeFromShape(dt),ot.dtype),xt=_e.data.get(ot.dataId).values;for(let Et=0;Et<vt.length;++Et){const At=Et*yt;let jt=xt[At];for(let kt=0;kt<yt;++kt){const Lt=xt[At+kt];(Number.isNaN(Lt)||Lt<jt)&&(jt=Lt)}vt[Et]=jt}at!=null&&_e.disposeIntermediateTensorInfo(ot);const wt=_e.makeTensorInfo(dt,ot.dtype,vt);if(nt){const Et=expandShapeToKeepDim(dt,it),At=reshape$1({inputs:{x:wt},backend:_e,attrs:{shape:Et}});return _e.disposeIntermediateTensorInfo(wt),At}return wt}const minConfig$1={kernelName:Min,backendName:"cpu",kernelFunc:min$4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mirrorPad(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{paddings:rt,mode:nt}=et;assertNotComplex$1(tt,"mirrorPad");const it=rt.map((jt,kt)=>jt[0]+tt.shape[kt]+jt[1]),st=rt.map(jt=>jt[0]),at=rt.map((jt,kt)=>jt[0]+tt.shape[kt]),ot=nt==="reflect"?0:1,dt=_e.data.get(tt.dataId).values,ht=tt.shape.length,yt=computeStrides(tt.shape),vt=sizeFromShape(it),xt=it.length,wt=computeStrides(it),Et=getTypedArrayFromDType(tt.dtype,vt);for(let jt=0;jt<vt;jt++){let kt=indexToLoc(jt,xt,wt);for(let Bt=0;Bt<xt;Bt++)kt[Bt]<st[Bt]?kt[Bt]=st[Bt]*2-kt[Bt]-ot:kt[Bt]>=at[Bt]&&(kt[Bt]=(at[Bt]-1)*2-kt[Bt]+ot);kt=kt.map((Bt,Gt)=>Bt-st[Gt]);const Lt=locToIndex(kt,ht,yt);Et[jt]=dt[Lt]}return{dataId:_e.write(Et,it,tt.dtype),shape:it,dtype:tt.dtype}}const mirrorPadConfig$1={kernelName:MirrorPad,backendName:"cpu",kernelFunc:mirrorPad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const modImpl=createSimpleBinaryKernelImpl((_,$)=>{const _e=_%$;return _<0&&$<0||_>=0&&$>=0?_e:(_e+$)%$}),mod$1=binaryKernelFunc$1(Mod,modImpl),modConfig$1={kernelName:Mod,backendName:"cpu",kernelFunc:mod$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function softmax$1(_){const{inputs:$,backend:_e,attrs:et}=_,{logits:tt}=$,{dim:rt}=et,nt=tt.shape.length;let it=rt;if(it===-1&&(it=nt-1),it!==nt-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${nt} and dim was ${it}`);const st=parseAxisParam([it],tt.shape),at=max$4({inputs:{x:tt},backend:_e,attrs:{reductionIndices:st,keepDims:!1}}),ot=expandShapeToKeepDim(at.shape,st),dt=reshape$1({inputs:{x:at},backend:_e,attrs:{shape:ot}}),ht=sub$1({inputs:{a:tt,b:dt},backend:_e}),yt=exp$2({inputs:{x:ht},backend:_e}),vt=sum$1({inputs:{x:yt},backend:_e,attrs:{axis:st,keepDims:!1}}),xt=reshape$1({inputs:{x:vt},backend:_e,attrs:{shape:ot}}),wt=div({inputs:{a:yt,b:xt},backend:_e});return _e.disposeIntermediateTensorInfo(at),_e.disposeIntermediateTensorInfo(dt),_e.disposeIntermediateTensorInfo(ht),_e.disposeIntermediateTensorInfo(yt),_e.disposeIntermediateTensorInfo(vt),_e.disposeIntermediateTensorInfo(xt),wt}const softmaxConfig$1={kernelName:Softmax$2,backendName:"cpu",kernelFunc:softmax$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function multinomial$1(_){const{inputs:$,backend:_e,attrs:et}=_,{logits:tt}=$,{numSamples:rt,seed:nt,normalized:it}=et;assertNotComplex$1(tt,"multinomial");const st=it?tt:softmax$1({inputs:{logits:tt},backend:_e,attrs:{dim:-1}}),at=st.shape[0],ot=st.shape[1],dt=_e.data.get(st.dataId).values,ht=[at,rt],yt=makeZerosTypedArray(sizeFromShape(ht),"int32");for(let vt=0;vt<at;++vt){const xt=vt*ot,wt=new Float32Array(ot-1);wt[0]=dt[xt];for(let jt=1;jt<wt.length;++jt)wt[jt]=wt[jt-1]+dt[xt+jt];const Et=seedrandom.alea(nt.toString()),At=vt*rt;for(let jt=0;jt<rt;++jt){const kt=Et();yt[At+jt]=wt.length;for(let Lt=0;Lt<wt.length;Lt++)if(kt<wt[Lt]){yt[At+jt]=Lt;break}}}return it||_e.disposeIntermediateTensorInfo(st),_e.makeTensorInfo(ht,"int32",yt)}const multinomialConfig$1={kernelName:Multinomial,backendName:"cpu",kernelFunc:multinomial$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV3Impl$1=nonMaxSuppressionV3Impl$2;function nonMaxSuppressionV3$1(_){const{inputs:$,backend:_e,attrs:et}=_,{boxes:tt,scores:rt}=$,{maxOutputSize:nt,iouThreshold:it,scoreThreshold:st}=et;assertNotComplex$1(tt,"NonMaxSuppression");const at=_e.data.get(tt.dataId).values,ot=_e.data.get(rt.dataId).values,{selectedIndices:dt}=nonMaxSuppressionV3Impl$1(at,ot,nt,it,st);return _e.makeTensorInfo([dt.length],"int32",new Int32Array(dt))}const nonMaxSuppressionV3Config$1={kernelName:NonMaxSuppressionV3,backendName:"cpu",kernelFunc:nonMaxSuppressionV3$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV4Impl$1=nonMaxSuppressionV4Impl$2;function nonMaxSuppressionV4$1(_){const{inputs:$,backend:_e,attrs:et}=_,{boxes:tt,scores:rt}=$,{maxOutputSize:nt,iouThreshold:it,scoreThreshold:st,padToMaxOutputSize:at}=et;assertNotComplex$1(tt,"NonMaxSuppressionPadded");const ot=_e.data.get(tt.dataId).values,dt=_e.data.get(rt.dataId).values,{selectedIndices:ht,validOutputs:yt}=nonMaxSuppressionV4Impl$1(ot,dt,nt,it,st,at);return[_e.makeTensorInfo([ht.length],"int32",new Int32Array(ht)),_e.makeTensorInfo([],"int32",new Int32Array([yt]))]}const nonMaxSuppressionV4Config$1={kernelName:NonMaxSuppressionV4,backendName:"cpu",kernelFunc:nonMaxSuppressionV4$1};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV5Impl$1=nonMaxSuppressionV5Impl$2;function nonMaxSuppressionV5$1(_){const{inputs:$,backend:_e,attrs:et}=_,{boxes:tt,scores:rt}=$,{maxOutputSize:nt,iouThreshold:it,scoreThreshold:st,softNmsSigma:at}=et;assertNotComplex$1(tt,"NonMaxSuppressionWithScore");const ot=_e.data.get(tt.dataId).values,dt=_e.data.get(rt.dataId).values,ht=nt,yt=it,vt=st,xt=at,{selectedIndices:wt,selectedScores:Et}=nonMaxSuppressionV5Impl$1(ot,dt,ht,yt,vt,xt);return[_e.makeTensorInfo([wt.length],"int32",new Int32Array(wt)),_e.makeTensorInfo([Et.length],"float32",new Float32Array(Et))]}const nonMaxSuppressionV5Config$1={kernelName:NonMaxSuppressionV5,backendName:"cpu",kernelFunc:nonMaxSuppressionV5$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oneHot$1(_){const{inputs:$,backend:_e,attrs:et}=_,{indices:tt}=$,{dtype:rt,depth:nt,onValue:it,offValue:st}=et;assertNotComplex$1(tt,"oneHot");const at=sizeFromShape(tt.shape),ot=new Float32Array(at*nt);ot.fill(st);const dt=_e.data.get(tt.dataId).values;for(let ht=0;ht<at;++ht)dt[ht]>=0&&dt[ht]<nt&&(ot[ht*nt+dt[ht]]=it);return _e.makeTensorInfo([...tt.shape,nt],rt,ot)}const oneHotConfig$1={kernelName:OneHot,backendName:"cpu",kernelFunc:oneHot$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zerosLike$1(_){const{inputs:$,backend:_e}=_,{x:et}=$;if(et.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(et.dtype==="complex64"){const tt=real$1({inputs:{input:et},backend:_e}),rt=zerosLike$1({inputs:{x:tt},backend:_e}),nt=imag$1({inputs:{input:et},backend:_e}),it=zerosLike$1({inputs:{x:nt},backend:_e}),st=complex$1({inputs:{real:rt,imag:it},backend:_e});return _e.disposeIntermediateTensorInfo(tt),_e.disposeIntermediateTensorInfo(rt),_e.disposeIntermediateTensorInfo(nt),_e.disposeIntermediateTensorInfo(it),st}else return fill$1({backend:_e,attrs:{shape:et.shape,value:0,dtype:et.dtype}})}const zerosLikeConfig$1={kernelName:ZerosLike,backendName:"cpu",kernelFunc:zerosLike$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function onesLike$1(_){const{inputs:$,backend:_e}=_,{x:et}=$;if(et.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(et.dtype==="complex64"){const tt=real$1({inputs:{input:et},backend:_e}),rt=onesLike$1({inputs:{x:tt},backend:_e}),nt=imag$1({inputs:{input:et},backend:_e}),it=zerosLike$1({inputs:{x:nt},backend:_e}),st=complex$1({inputs:{real:rt,imag:it},backend:_e});return _e.disposeIntermediateTensorInfo(tt),_e.disposeIntermediateTensorInfo(rt),_e.disposeIntermediateTensorInfo(nt),_e.disposeIntermediateTensorInfo(it),st}else return fill$1({backend:_e,attrs:{shape:et.shape,value:1,dtype:et.dtype}})}const onesLikeConfig$1={kernelName:OnesLike,backendName:"cpu",kernelFunc:onesLike$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pack$1(_){const{inputs:$,backend:_e,attrs:et}=_,{axis:tt}=et;if($.length===1)return expandDims$1({inputs:{input:$[0]},backend:_e,attrs:{dim:tt}});const rt=$[0].shape,nt=$[0].dtype;$.forEach(ot=>{assertShapesMatch(rt,ot.shape,"All tensors passed to stack must have matching shapes"),assert$1(nt===ot.dtype,()=>"All tensors passed to stack must have matching dtypes")});const it=[],st=$.map(ot=>{const dt=expandDims$1({inputs:{input:ot},backend:_e,attrs:{dim:tt}});return it.push(dt),dt}),at=concat$1({inputs:st,backend:_e,attrs:{axis:tt}});return it.forEach(ot=>_e.disposeIntermediateTensorInfo(ot)),at}const packConfig$1={kernelName:Pack,backendName:"cpu",kernelFunc:pack$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function padV2$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{paddings:rt,constantValue:nt}=et;assertNotComplex$1(tt,"pad");const it=rt.map((At,jt)=>At[0]+tt.shape[jt]+At[1]),st=rt.map(At=>At[0]),at=_e.data.get(tt.dataId).values,ot=sizeFromShape(tt.shape),dt=tt.shape.length,ht=computeStrides(tt.shape),yt=sizeFromShape(it),vt=it.length,xt=computeStrides(it),wt=getTypedArrayFromDType(tt.dtype,yt);nt!==0&&wt.fill(nt);for(let At=0;At<ot;At++){const kt=indexToLoc(At,dt,ht).map((Bt,Gt)=>Bt+st[Gt]),Lt=locToIndex(kt,vt,xt);wt[Lt]=at[At]}return{dataId:_e.write(wt,it,tt.dtype),shape:it,dtype:tt.dtype}}const padV2Config$1={kernelName:PadV2,backendName:"cpu",kernelFunc:padV2$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const powImpl=createSimpleBinaryKernelImpl((_,$)=>Math.pow(_,$)),pow$2=binaryKernelFunc$1(Pow,powImpl),powConfig$1={kernelName:Pow,backendName:"cpu",kernelFunc:pow$2};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function raggedGather$1(_){const{inputs:$,backend:_e,attrs:et}=_,{paramsNestedSplits:tt,paramsDenseValues:rt,indices:nt}=$,it=tt.map(wt=>_e.data.get(wt.dataId).values),st=tt.map(wt=>wt.shape),at=_e.data.get(rt.dataId).values,ot=_e.data.get(nt.dataId).values,[dt,ht,yt]=raggedGatherImpl(it,st,at,rt.shape,rt.dtype,ot,nt.shape),vt=dt.map(wt=>_e.makeTensorInfo([wt.length],"int32",wt)),xt=_e.makeTensorInfo(yt,rt.dtype,ht);return vt.concat([xt])}const raggedGatherConfig$1={kernelName:RaggedGather,backendName:"cpu",kernelFunc:raggedGather$1};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function raggedRange$1(_){const{inputs:$,backend:_e}=_,{starts:et,limits:tt,deltas:rt}=$,nt=_e.data.get(et.dataId).values,it=_e.data.get(tt.dataId).values,st=_e.data.get(rt.dataId).values,[at,ot]=raggedRangeImpl(nt,et.shape,et.dtype,it,tt.shape,st,rt.shape),dt=_e.makeTensorInfo([at.length],"int32",at),ht=_e.makeTensorInfo([ot.length],et.dtype,ot);return[dt,ht]}const raggedRangeConfig$1={kernelName:RaggedRange,backendName:"cpu",kernelFunc:raggedRange$1};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function raggedTensorToTensor$1(_){const{inputs:$,backend:_e,attrs:et}=_,{shape:tt,values:rt,defaultValue:nt,rowPartitionTensors:it}=$,{rowPartitionTypes:st}=et,at=_e.data.get(tt.dataId).values,ot=_e.data.get(rt.dataId).values,dt=_e.data.get(nt.dataId).values,ht=it.map(wt=>_e.data.get(wt.dataId).values),yt=it.map(wt=>wt.shape),[vt,xt]=raggedTensorToTensorImpl(at,tt.shape,ot,rt.shape,rt.dtype,dt,nt.shape,ht,yt,st);return _e.makeTensorInfo(vt,rt.dtype,xt)}const raggedTensorToTensorConfig$1={kernelName:RaggedTensorToTensor,backendName:"cpu",kernelFunc:raggedTensorToTensor$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function range$5(_){const{backend:$,attrs:_e}=_,{start:et,stop:tt,dtype:rt,step:nt}=_e,it=rangeImpl(et,tt,nt,rt);return $.makeTensorInfo([it.length],rt,it)}const rangeConfig$1={kernelName:Range$1,backendName:"cpu",kernelFunc:range$5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reciprocal$1=unaryKernelFunc$1(Reciprocal,_=>1/_),reciprocalConfig$1={kernelName:Reciprocal,backendName:"cpu",kernelFunc:reciprocal$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinear$1(_){const{inputs:$,backend:_e,attrs:et}=_,{images:tt}=$,{alignCorners:rt,halfPixelCenters:nt,size:it}=et;assertNotComplex$1(tt,"resizeBilinear");const st=computeStrides(tt.shape),[at,ot]=it,[dt,ht,yt,vt]=tt.shape,xt=_e.data.get(tt.dataId).values,wt=new Float32Array(sizeFromShape([dt,at,ot,vt])),Et=[rt&&at>1?ht-1:ht,rt&&ot>1?yt-1:yt],At=[rt&&at>1?at-1:at,rt&&ot>1?ot-1:ot];let jt=0;const kt=Et[0]/At[0],Lt=Et[1]/At[1];for(let Bt=0;Bt<dt;Bt++)for(let Gt=0;Gt<at;Gt++){let er;nt?er=kt*(Gt+.5)-.5:er=kt*Gt;const tr=Math.max(0,Math.floor(er)),ar=er-tr,Mt=Math.min(ht-1,Math.ceil(er)),lt=Bt*st[0]+tr*st[1],mt=Bt*st[0]+Mt*st[1];for(let gt=0;gt<ot;gt++){let bt;nt?bt=Lt*(gt+.5)-.5:bt=Lt*gt;const St=Math.max(0,Math.floor(bt)),Nt=bt-St,Pt=Math.min(yt-1,Math.ceil(bt)),Tt=lt+St*st[2],pt=mt+St*st[2],Rt=lt+Pt*st[2],zt=mt+Pt*st[2];for(let Yt=0;Yt<vt;Yt++){const ir=xt[Tt+Yt],ur=xt[pt+Yt],cr=xt[Rt+Yt],rr=xt[zt+Yt],fr=ir+(cr-ir)*Nt,dr=ur+(rr-ur)*Nt,gr=fr+(dr-fr)*ar;wt[jt++]=gr}}}return _e.makeTensorInfo([dt,at,ot,vt],"float32",wt)}const resizeBilinearConfig$1={kernelName:ResizeBilinear,backendName:"cpu",kernelFunc:resizeBilinear$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinearGrad$1(_){const{inputs:$,backend:_e,attrs:et}=_,{images:tt,dy:rt}=$,{alignCorners:nt}=et;assertNotComplex$1([rt,tt],"resizeBilinearGrad");const it=computeStrides(tt.shape),[st,at,ot,dt]=tt.shape,[,ht,yt]=rt.shape,vt=new Float32Array(st*at*ot*dt),xt=[nt&&ht>1?at-1:at,nt&&yt>1?ot-1:ot],wt=[nt&&ht>1?ht-1:ht,nt&&yt>1?yt-1:yt],Et=xt[0]/wt[0],At=xt[1]/wt[1],jt=_e.data.get(rt.dataId).values;let kt=0;for(let Lt=0;Lt<st;Lt++){const Bt=Lt*it[0];for(let Gt=0;Gt<ht;Gt++){const er=Gt*Et,tr=Math.floor(er),ar=Math.min(Math.ceil(er),at-1),Mt=Bt+tr*it[1],lt=Bt+ar*it[1],mt=er-tr,gt=1-mt;for(let bt=0;bt<yt;bt++){const St=bt*At,Nt=Math.floor(St),Pt=Math.min(Math.ceil(St),ot-1),Tt=St-Nt,pt=1-Tt,Rt=Mt+Nt*it[2],zt=Mt+Pt*it[2],Yt=lt+Nt*it[2],ir=lt+Pt*it[2],ur=gt*pt,cr=gt*Tt,rr=mt*pt,fr=mt*Tt;for(let dr=0;dr<dt;dr++){const gr=jt[kt++];vt[Rt+dr]+=gr*ur,vt[zt+dr]+=gr*cr,vt[Yt+dr]+=gr*rr,vt[ir+dr]+=gr*fr}}}}return _e.makeTensorInfo([st,ot,at,dt],"float32",vt)}const resizeBilinearGradConfig$1={kernelName:ResizeBilinearGrad,backendName:"cpu",kernelFunc:resizeBilinearGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighbor$1(_){const{inputs:$,backend:_e,attrs:et}=_,{images:tt}=$,{alignCorners:rt,halfPixelCenters:nt,size:it}=et;assertNotComplex$1(tt,"resizeNearestNeighbor");const st=computeStrides(tt.shape),[at,ot]=it,[dt,ht,yt,vt]=tt.shape,xt=_e.data.get(tt.dataId).values,wt=new Float32Array(dt*at*ot*vt),Et=[rt&&at>1?ht-1:ht,rt&&ot>1?yt-1:yt],At=[rt&&at>1?at-1:at,rt&&ot>1?ot-1:ot],jt=Et[0]/At[0],kt=Et[1]/At[1];let Lt=0;for(let Bt=0;Bt<dt;Bt++){const Gt=Bt*st[0];for(let er=0;er<at;er++){const tr=nt?jt*(er+.5):jt*er;let ar=Math.min(ht-1,rt?Math.round(tr):Math.floor(tr));nt&&(ar=Math.max(0,ar));const Mt=Gt+ar*st[1];for(let lt=0;lt<ot;lt++){const mt=nt?kt*(lt+.5):kt*lt;let gt=Math.min(yt-1,rt?Math.round(mt):Math.floor(mt));nt&&(gt=Math.max(0,gt));const bt=Mt+gt*st[2];for(let St=0;St<vt;St++){const Nt=xt[bt+St];wt[Lt++]=Nt}}}}return _e.makeTensorInfo([dt,at,ot,vt],tt.dtype,wt)}const resizeNearestNeighborConfig$1={kernelName:ResizeNearestNeighbor,backendName:"cpu",kernelFunc:resizeNearestNeighbor$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighborGrad$1(_){const{inputs:$,backend:_e,attrs:et}=_,{images:tt,dy:rt}=$,{alignCorners:nt}=et;assertNotComplex$1([rt,tt],"resizeNearestNeighborGrad");const it=computeStrides(tt.shape),st=computeStrides(rt.shape),[at,ot,dt,ht]=tt.shape,[,yt,vt]=rt.shape,xt=new Float32Array(at*ot*dt*ht),wt=_e.data.get(rt.dataId).values,Et=[nt&&yt>1?ot-1:ot,nt&&vt>1?dt-1:dt],At=[nt&&yt>1?yt-1:yt,nt&&vt>1?vt-1:vt],jt=Et[0]/At[0],kt=Et[1]/At[1],Lt=1/jt,Bt=1/kt,Gt=Math.ceil(Lt)*2+2,er=Math.ceil(Bt)*2+2;for(let tr=0;tr<at;tr++){const ar=tr*it[0];for(let Mt=0;Mt<ot;Mt++){const lt=ar+Mt*it[1],mt=Math.floor(Mt*Lt),gt=Math.floor(mt-Gt/2);for(let bt=0;bt<dt;bt++){const St=lt+bt*it[2],Nt=Math.floor(bt*Bt),Pt=Math.floor(Nt-er/2);for(let Tt=0;Tt<ht;Tt++){let pt=0;for(let Rt=0;Rt<Gt;Rt++){const zt=Rt+gt;if(zt<0||zt>=yt)continue;const Yt=ar+zt*st[1],ir=zt*jt,ur=Math.min(ot-1,nt?Math.round(ir):Math.floor(ir));if(Mt===ur)for(let cr=0;cr<er;cr++){const rr=cr+Pt;if(rr<0||rr>=vt)continue;const fr=Yt+rr*st[2],dr=rr*kt,gr=Math.min(dt-1,nt?Math.round(dr):Math.floor(dr));bt===gr&&(pt+=wt[fr+Tt])}}xt[St+Tt]=pt}}}}return _e.makeTensorInfo(tt.shape,tt.dtype,xt)}const resizeNearestNeighborGradConfig$1={kernelName:ResizeNearestNeighborGrad,backendName:"cpu",kernelFunc:resizeNearestNeighborGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reverse$2(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{dims:rt}=et;assertNotComplex$1(tt,"reverse");const nt=tt.shape.length,it=parseAxisParam(rt,tt.shape);if(nt===0)return identity$d({inputs:{x:tt},backend:_e});const st=new TensorBuffer(tt.shape,tt.dtype),at=_e.bufferSync(tt);for(let ot=0;ot<st.size;ot++){const dt=st.indexToLoc(ot),ht=dt.slice();it.forEach(yt=>ht[yt]=tt.shape[yt]-1-ht[yt]),st.set(at.get(...ht),...dt)}return _e.makeTensorInfo(st.shape,st.dtype,st.values)}const reverseConfig$1={kernelName:Reverse,backendName:"cpu",kernelFunc:reverse$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rotateWithOffsetConfig$1={kernelName:RotateWithOffset,backendName:"cpu",kernelFunc:({inputs:_,attrs:$,backend:_e})=>{const{image:et}=_,{radians:tt,fillValue:rt,center:nt}=$,it=_e,st=getTypedArrayFromDType(et.dtype,sizeFromShape(et.shape)),[at,ot,dt,ht]=et.shape,[yt,vt]=getImageCenter(nt,ot,dt),xt=255,wt=Math.sin(tt),Et=Math.cos(tt),At=it.data.get(et.dataId).values;for(let kt=0;kt<at;kt++){const Lt=kt*dt*ot*ht;for(let Bt=0;Bt<ot;Bt++){const Gt=Bt*(dt*ht);for(let er=0;er<dt;er++){const tr=er*ht;for(let ar=0;ar<ht;ar++){const Mt=[at,Bt,er,ar],lt=Mt[2],mt=Mt[1];let gt=(lt-yt)*Et-(mt-vt)*wt,bt=(lt-yt)*wt+(mt-vt)*Et;gt=Math.round(gt+yt),bt=Math.round(bt+vt);let St=rt;if(typeof rt!="number"&&(ar===3?St=xt:St=rt[ar]),gt>=0&&gt<dt&&bt>=0&&bt<ot){const Pt=bt*(dt*ht),Tt=gt*ht,pt=Lt+Pt+Tt+ar;St=At[pt]}const Nt=Lt+Gt+tr+ar;st[Nt]=St}}}}return{dataId:it.write(st,et.shape,et.dtype),shape:et.shape,dtype:et.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const round$2=unaryKernelFunc$1(Round,_=>{const $=Math.floor(_);return _-$<.5?Math.floor(_):_-$>.5?Math.ceil(_):$%2===0?$:$+1}),roundConfig$1={kernelName:Round,backendName:"cpu",kernelFunc:round$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function scatterNd$1(_){const{inputs:$,backend:_e,attrs:et}=_,{indices:tt,updates:rt}=$,{shape:nt}=et,{sliceRank:it,numUpdates:st,sliceSize:at,strides:ot,outputSize:dt}=calculateShapes(rt,tt,nt),ht=!0,yt=_e.bufferSync(tt),vt=_e.bufferSync(rt),xt=scatterImpl(yt,vt,nt,dt,at,st,it,ot,0,ht);return _e.makeTensorInfo(nt,xt.dtype,xt.values)}const scatterNdConfig$1={kernelName:ScatterNd,backendName:"cpu",kernelFunc:scatterNd$1};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lowerBound(_,$){let _e=0,et=_.length,tt=0;for(;_e<et;)tt=Math.floor((_e+et)/2),_[tt]<$?_e=tt+1:et=tt;return et}function upperBound(_,$){let _e=0,et=_.length,tt=0;for(;_e<et;)tt=Math.floor((_e+et)/2),_[tt]<=$?_e=tt+1:et=tt;return et}function searchSortedImpl(_,$,_e,et,tt,rt){const nt=getArrayFromDType("int32",_e*tt);for(let it=0;it<_e;++it){const st=_.slice(it*et,(it+1)*et),at=it*tt;for(let ot=0;ot<tt;++ot)nt[at+ot]=rt==="left"?lowerBound(st,$[ot+at]):upperBound(st,$[ot+at])}return nt}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function searchSorted$1(_){const{inputs:$,backend:_e,attrs:et}=_,{sortedSequence:tt,values:rt}=$,{side:nt}=et,it=_e.data.get(tt.dataId).values,st=_e.data.get(rt.dataId).values,at=searchSortedImpl(it,st,tt.shape[0],tt.shape[1],rt.shape[1],nt);return _e.makeTensorInfo(rt.shape,"int32",at)}const searchSortedConfig$1={kernelName:SearchSorted,backendName:"cpu",kernelFunc:searchSorted$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function select$1(_){const{inputs:$,backend:_e}=_,{condition:et,t:tt,e:rt}=$;assertNotComplex$1([et,tt,rt],"select");const nt=et.shape.length,it=_e.data.get(et.dataId).values,st=_e.data.get(tt.dataId).values,at=_e.data.get(rt.dataId).values,ot=upcastType(tt.dtype,rt.dtype),dt=makeZerosTypedArray(sizeFromShape(tt.shape),ot);let ht=0;const yt=nt===0||nt>1||tt.shape.length===1?1:sizeFromShape(tt.shape.slice(1));for(let vt=0;vt<it.length;vt++)for(let xt=0;xt<yt;xt++)it[vt]===1?dt[ht++]=st[vt]:dt[ht++]=at[vt];return _e.makeTensorInfo(tt.shape,ot,dt)}const selectConfig$1={kernelName:Select,backendName:"cpu",kernelFunc:select$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const scaleAlpha=SELU_SCALEALPHA,scale=SELU_SCALE,selu$1=unaryKernelFunc$1(Selu$1,_=>_>=0?scale*_:scaleAlpha*(Math.exp(_)-1)),seluConfig$1={kernelName:Selu$1,backendName:"cpu",kernelFunc:selu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sign$2=unaryKernelFunc$1(Sign,_=>_<0?-1:_>0?1:0),signConfig$1={kernelName:Sign,backendName:"cpu",kernelFunc:sign$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sin$2=unaryKernelFunc$1(Sin,_=>Math.sin(_)),sinConfig$1={kernelName:Sin,backendName:"cpu",kernelFunc:sin$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sinh$1=unaryKernelFunc$1(Sinh,_=>Math.sinh(_)),sinhConfig$1={kernelName:Sinh,backendName:"cpu",kernelFunc:sinh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const epsilon$1=11920928955078125e-23,threshold$1=Math.log(epsilon$1)+2,softplus$1=unaryKernelFunc$1(Softplus$1,_=>{const $=_>-threshold$1,_e=_<threshold$1,et=Math.exp(_);let tt;return _e?tt=et:$?tt=_:tt=Math.log(1+et),tt}),softplusConfig$1={kernelName:Softplus$1,backendName:"cpu",kernelFunc:softplus$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function spaceToBatchND$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{blockShape:rt,paddings:nt}=et;assertNotComplex$1([tt],"spaceToBatchND");const it=sizeFromShape(rt),st=[[0,0]];st.push(...nt);for(let Bt=1+rt.length;Bt<tt.shape.length;++Bt)st.push([0,0]);const at=padV2Config$1.kernelFunc({inputs:{x:tt},backend:_e,attrs:{paddings:st,constantValue:0}}),ot=getReshaped(at.shape,rt,it,!1),dt=getPermuted(ot.length,rt.length,!1),ht=getReshapedPermuted(at.shape,rt,it,!1),xt=reshape$1({inputs:{x:at},backend:_e,attrs:{shape:ot}}),At=transpose$1({inputs:{x:xt},backend:_e,attrs:{perm:dt}}),Lt=reshape$1({inputs:{x:At},backend:_e,attrs:{shape:ht}});return _e.disposeIntermediateTensorInfo(at),_e.disposeIntermediateTensorInfo(xt),_e.disposeIntermediateTensorInfo(At),Lt}const spaceToBatchNDConfig$1={kernelName:SpaceToBatchND,backendName:"cpu",kernelFunc:spaceToBatchND$1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseFillEmptyRows$1(_){const{inputs:$,backend:_e}=_,{indices:et,values:tt,denseShape:rt,defaultValue:nt}=$;if(rt.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${rt.shape}`);if(et.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${et.shape}`);if(tt.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${tt.shape}`);if(nt.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${nt.shape}`);const it=_e.data.get(et.dataId).values,st=_e.data.get(tt.dataId).values,at=_e.data.get(rt.dataId).values,ot=_e.data.get(nt.dataId).values[0],[dt,ht,yt,vt,xt]=sparseFillEmptyRowsImpl(it,et.shape,et.dtype,st,tt.dtype,at,ot);return[_e.makeTensorInfo(ht,et.dtype,dt),_e.makeTensorInfo([ht[0]],tt.dtype,yt),_e.makeTensorInfo([vt.length],"bool",new Uint8Array(vt.map(wt=>Number(wt)))),_e.makeTensorInfo([xt.length],et.dtype,new Int32Array(xt))]}const sparseFillEmptyRowsConfig$1={kernelName:SparseFillEmptyRows,backendName:"cpu",kernelFunc:sparseFillEmptyRows$1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseReshape$1(_){const{inputs:$,backend:_e}=_,{inputIndices:et,inputShape:tt,newShape:rt}=$;if(et.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${et.shape}`);if(tt.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${tt.shape}`);if(rt.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${rt.shape}`);const nt=Array.from(_e.data.get(tt.dataId).values),it=_e.data.get(et.dataId).values,st=Array.from(_e.data.get(rt.dataId).values),[at,ot,dt]=sparseReshapeImpl(it,et.shape,et.dtype,nt,st);return[_e.makeTensorInfo(ot,et.dtype,at),_e.makeTensorInfo([dt.length],rt.dtype,new Int32Array(dt))]}const sparseReshapeConfig$1={kernelName:SparseReshape,backendName:"cpu",kernelFunc:sparseReshape$1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseSegmentMean$1(_){const{inputs:$,backend:_e}=_,{data:et,indices:tt,segmentIds:rt}=$;if(et.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(tt.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${tt.shape}`);if(rt.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${rt.shape}`);if(tt.shape[0]!==rt.shape[0])throw new Error("segmentIds and indices should have same size.");const nt=_e.data.get(et.dataId).values,it=_e.data.get(tt.dataId).values,st=_e.data.get(rt.dataId).values,[at,ot]=sparseSegmentReductionImpl(nt,et.shape,et.dtype,it,st,!0);return _e.makeTensorInfo(ot,et.dtype,at)}const sparseSegmentMeanConfig$1={kernelName:SparseSegmentMean,backendName:"cpu",kernelFunc:sparseSegmentMean$1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseSegmentSum$1(_){const{inputs:$,backend:_e}=_,{data:et,indices:tt,segmentIds:rt}=$;if(et.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(tt.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${tt.shape}`);if(rt.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${rt.shape}`);if(tt.shape[0]!==rt.shape[0])throw new Error("segmentIds and indices should have same size.");const nt=_e.data.get(et.dataId).values,it=_e.data.get(tt.dataId).values,st=_e.data.get(rt.dataId).values,[at,ot]=sparseSegmentReductionImpl(nt,et.shape,et.dtype,it,st);return _e.makeTensorInfo(ot,et.dtype,at)}const sparseSegmentSumConfig$1={kernelName:SparseSegmentSum,backendName:"cpu",kernelFunc:sparseSegmentSum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseToDense$1(_){const{inputs:$,backend:_e,attrs:et}=_,{sparseIndices:tt,sparseValues:rt,defaultValue:nt}=$,{outputShape:it}=et,{sliceRank:st,numUpdates:at,sliceSize:ot,strides:dt,outputSize:ht}=calculateShapes(rt,tt,it),yt=!1,vt=_e.bufferSync(tt);let xt;switch(rt.dtype){case"bool":{const wt=_e.bufferSync(rt),Et=!!_e.data.get(nt.dataId).values[0];xt=scatterImpl(vt,wt,it,ht,ot,at,st,dt,Et,yt);break}case"float32":{const wt=_e.bufferSync(rt),Et=_e.data.get(nt.dataId).values[0];xt=scatterImpl(vt,wt,it,ht,ot,at,st,dt,Et,yt);break}case"int32":{const wt=_e.bufferSync(rt),Et=_e.data.get(nt.dataId).values[0];xt=scatterImpl(vt,wt,it,ht,ot,at,st,dt,Et,yt);break}case"string":{const wt=_e.bufferSync(rt),Et=decodeString(_e.data.get(nt.dataId).values[0]);xt=scatterImpl(vt,wt,it,ht,ot,at,st,dt,Et,yt);break}default:throw new Error(`Unsupported type ${rt.dtype}`)}return _e.makeTensorInfo(it,xt.dtype,xt.values)}const sparseToDenseConfig$1={kernelName:SparseToDense,backendName:"cpu",kernelFunc:sparseToDense$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function splitV$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{numOrSizeSplits:rt,axis:nt}=et,it=parseAxisParam(nt,tt.shape)[0],st=prepareSplitSize(tt,rt,it),at=new Array(tt.shape.length).fill(0),ot=tt.shape.slice();return st.map(dt=>{const ht=[...ot];ht[it]=dt;const yt=slice$1({inputs:{x:tt},backend:_e,attrs:{begin:at,size:ht}});return at[it]+=dt,yt})}const splitVConfig$1={kernelName:SplitV,backendName:"cpu",kernelFunc:splitV$1};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const squareConfig$1={kernelName:Square,backendName:"cpu",kernelFunc:({inputs:_,backend:$})=>{const{x:_e}=_,et=$;assertNotComplex$1(_e,"square");const tt=et.data.get(_e.dataId).values,rt=new Float32Array(tt.length);for(let it=0;it<tt.length;++it){const st=tt[it];rt[it]=st*st}return{dataId:et.write(rt,_e.shape,_e.dtype),shape:_e.shape,dtype:_e.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const step$1=unaryKernelFunc$1(Step$1,(_,$)=>{const _e=$;return isNaN(_)?NaN:_>0?1:_e.alpha}),stepConfig$1={kernelName:Step$1,backendName:"cpu",kernelFunc:step$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stridedSlice$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{begin:rt,end:nt,strides:it,beginMask:st,endMask:at,ellipsisMask:ot,newAxisMask:dt,shrinkAxisMask:ht}=et;assertNotComplex$1(tt,"stridedSlice");const{finalShapeSparse:yt,finalShape:vt,isIdentity:xt,sliceDim0:wt,isSimpleSlice:Et,begin:At,end:jt,strides:kt}=sliceInfo(tt.shape,rt,nt,it,st,at,ot,dt,ht);let Lt;if(xt)Lt=reshape$1({inputs:{x:tt},backend:_e,attrs:{shape:vt}});else if(wt||Et){assert$1(tt.shape.length>=1,()=>`Input must have rank at least 1, got: ${tt.shape.length}`);const Bt=computeOutShape$2(At,jt,kt),Gt=slice$1({inputs:{x:tt},backend:_e,attrs:{begin:At,size:Bt}});Lt=reshape$1({inputs:{x:Gt},backend:_e,attrs:{shape:vt}}),_e.disposeIntermediateTensorInfo(Gt)}else{const Bt=_e.bufferSync(tt),Gt=stridedSliceImpl(yt,Bt,kt,At);Lt=_e.makeTensorInfo(vt,Gt.dtype,Gt.values)}return Lt}const stridedSliceConfig$1={kernelName:StridedSlice,backendName:"cpu",kernelFunc:stridedSlice$1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stringNGrams$1(_){const{inputs:$,backend:_e,attrs:et}=_,{separator:tt,nGramWidths:rt,leftPad:nt,rightPad:it,padWidth:st,preserveShortSequences:at}=et,{data:ot,dataSplits:dt}=$,ht=_e.data.get(ot.dataId).values,yt=_e.data.get(dt.dataId).values,[vt,xt]=stringNGramsImpl(ht,yt,tt,rt,nt,it,st,at);return[_e.makeTensorInfo([vt.length],"string",vt),_e.makeTensorInfo(dt.shape,"int32",xt)]}const stringNGramsConfig$1={kernelName:StringNGrams,backendName:"cpu",kernelFunc:stringNGrams$1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stringSplit$1(_){const{inputs:$,backend:_e,attrs:et}=_,{skipEmpty:tt}=et,{input:rt,delimiter:nt}=$;if(rt.dtype!=="string")throw new Error("Input must be of datatype string");if(rt.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${rt.shape}`);if(nt.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${nt.shape}`);const it=_e.data.get(rt.dataId).values,st=_e.data.get(nt.dataId).values[0],[at,ot,dt]=stringSplitImpl(it,st,tt),ht=ot.length;return[_e.makeTensorInfo([ht,2],"int32",at),_e.makeTensorInfo([ht],"string",ot),_e.makeTensorInfo([2],"int32",new Int32Array(dt))]}const stringSplitConfig$1={kernelName:StringSplit,backendName:"cpu",kernelFunc:stringSplit$1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stringToHashBucketFast$1(_){const{inputs:$,backend:_e,attrs:et}=_,{numBuckets:tt}=et,{input:rt}=$;if(rt.dtype!=="string")throw new Error("Input must be of datatype string");if(tt<=0)throw new Error("Number of buckets must be at least 1");const nt=_e.data.get(rt.dataId).values,it=stringToHashBucketFastImpl(nt,tt);return _e.makeTensorInfo(rt.shape,"int32",it)}const stringToHashBucketFastConfig$1={kernelName:StringToHashBucketFast,backendName:"cpu",kernelFunc:stringToHashBucketFast$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tan$1=unaryKernelFunc$1(Tan,_=>Math.tan(_)),tanConfig$1={kernelName:Tan,backendName:"cpu",kernelFunc:tan$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tanh$1=unaryKernelFunc$1(Tanh$1,_=>Math.tanh(_)),tanhConfig$1={kernelName:Tanh$1,backendName:"cpu",kernelFunc:tanh$1};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tensorScatterUpdate$1(_){const{inputs:$,backend:_e}=_,{tensor:et,indices:tt,updates:rt}=$,{sliceRank:nt,numUpdates:it,sliceSize:st,strides:at,outputSize:ot}=calculateShapes(rt,tt,et.shape),dt=!1,ht=_e.bufferSync(tt),yt=_e.bufferSync(rt),vt=_e.bufferSync(et),xt=scatterImpl(ht,yt,et.shape,ot,st,it,nt,at,vt,dt);return _e.makeTensorInfo(et.shape,xt.dtype,xt.values)}const tensorScatterUpdateConfig$1={kernelName:TensorScatterUpdate,backendName:"cpu",kernelFunc:tensorScatterUpdate$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tile$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{reps:rt}=et;assertNotComplex$1(tt,"tile");const nt=tileImpl(_e.bufferSync(tt),rt);return _e.makeTensorInfo(nt.shape,nt.dtype,nt.values)}const tileConfig$1={kernelName:Tile,backendName:"cpu",kernelFunc:tile$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function topK$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{k:rt,sorted:nt}=et;assertNotComplex$1(tt,"topk");const it=_e.data.get(tt.dataId).values,[st,at]=topKImpl(it,tt.shape,tt.dtype,rt,nt);return[_e.makeTensorInfo(st.shape,st.dtype,st.values),_e.makeTensorInfo(at.shape,at.dtype,at.values)]}const topKConfig$1={kernelName:TopK,backendName:"cpu",kernelFunc:topK$1};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transform$1(_){const{inputs:$,attrs:_e,backend:et}=_,{image:tt,transforms:rt}=$,{interpolation:nt,fillMode:it,fillValue:st,outputShape:at}=_e,[ot,dt,ht,yt]=tt.shape,[vt,xt]=at??[dt,ht],wt=[ot,vt,xt,yt],Et=computeStrides(tt.shape),At=Et[0],jt=Et[1],kt=Et[2],Lt=computeStrides(wt),Bt=Lt[0],Gt=Lt[1],er=Lt[2],tr=getTypedArrayFromDType(tt.dtype,sizeFromShape(wt));tr.fill(st);const ar=et.data.get(tt.dataId).values,Mt=et.data.get(rt.dataId).values;for(let mt=0;mt<ot;++mt){const gt=rt.shape[0]===1?Mt:Mt.subarray(mt*8,mt*8+8);for(let bt=0;bt<vt;++bt)for(let St=0;St<xt;++St)for(let Nt=0;Nt<yt;++Nt){let Pt;const Tt=gt[6]*St+gt[7]*bt+1;if(Tt===0)continue;const pt=(gt[0]*St+gt[1]*bt+gt[2])/Tt,Rt=(gt[3]*St+gt[4]*bt+gt[5])/Tt,zt=mapCoord(pt,ht,it),Yt=mapCoord(Rt,dt,it);switch(nt){case"nearest":Pt=nearestInterpolation(ar,dt,ht,At,jt,kt,mt,Yt,zt,Nt,st);break;case"bilinear":Pt=bilinearInterpolation(ar,dt,ht,At,jt,kt,mt,Yt,zt,Nt,st);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${nt}`)}const ir=mt*Bt+bt*Gt+St*er+Nt;tr[ir]=Pt}return et.makeTensorInfo(wt,tt.dtype,tr)}return{dataId:et.write(tr,wt,tt.dtype),shape:tt.shape,dtype:tt.dtype}}const transformConfig$1={kernelName:Transform,backendName:"cpu",kernelFunc:transform$1};function mapCoord(_,$,_e){switch(_e){case"reflect":return mapCoordReflect(_,$);case"wrap":return mapCoordWrap(_,$);case"nearest":return mapCoordNearest(_,$);case"constant":default:return mapCoordConstant(_)}}function mapCoordReflect(_,$){let _e=_;if(_e<0)if($<=1)_e=0;else{const et=2*$;_e<et&&(_e=et*Math.trunc(-_e/et)+_e),_e=_e<-$?_e+et:-_e-1}else if(_e>$-1)if($<=1)_e=0;else{const et=2*$;_e-=et*Math.trunc(_e/et),_e>=$&&(_e=et-_e-1)}return clamp(0,_e,$-1)}function mapCoordWrap(_,$){let _e=_;if(_e<0)if($<=1)_e=0;else{const et=$-1;_e+=$*(Math.trunc(-_e/et)+1)}else if(_e>$-1)if($<=1)_e=0;else{const et=$-1;_e-=$*Math.trunc(_e/et)}return clamp(0,_e,$-1)}function mapCoordConstant(_,$){return _}function mapCoordNearest(_,$){return clamp(0,_,$-1)}function readWithFillValue(_,$,_e,et,tt,rt,nt,it,st,at,ot){const dt=nt*et+it*tt+st*rt+at;return 0<=it&&it<$&&0<=st&&st<_e?_[dt]:ot}function nearestInterpolation(_,$,_e,et,tt,rt,nt,it,st,at,ot){const dt=Math.round(it),ht=Math.round(st);return readWithFillValue(_,$,_e,et,tt,rt,nt,dt,ht,at,ot)}function bilinearInterpolation(_,$,_e,et,tt,rt,nt,it,st,at,ot){const dt=Math.floor(it),ht=Math.floor(st),yt=dt+1,vt=ht+1,xt=(vt-st)*readWithFillValue(_,$,_e,et,tt,rt,nt,dt,ht,at,ot)+(st-ht)*readWithFillValue(_,$,_e,et,tt,rt,nt,dt,vt,at,ot),wt=(vt-st)*readWithFillValue(_,$,_e,et,tt,rt,nt,yt,ht,at,ot)+(st-ht)*readWithFillValue(_,$,_e,et,tt,rt,nt,yt,vt,at,ot);return(yt-it)*xt+(it-dt)*wt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unique$1(_){const{inputs:$,attrs:_e,backend:et}=_,{axis:tt}=_e,{x:rt}=$;assertNotComplex$1(rt,"unique");const nt=et.data.get(rt.dataId).values,{outputValues:it,outputShape:st,indices:at}=uniqueImpl(nt,tt,rt.shape,rt.dtype);return[et.makeTensorInfo(st,rt.dtype,it),et.makeTensorInfo([at.length],"int32",at)]}const uniqueConfig$1={kernelName:Unique,backendName:"cpu",kernelFunc:unique$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unpack$1(_){const{inputs:$,backend:_e,attrs:et}=_,{value:tt}=$;let{axis:rt}=et;rt<0&&(rt+=tt.shape.length);const nt=tt.shape.length,it=tt.shape[rt],st=new Array(nt-1);let at=0;for(let yt=0;yt<nt;yt++)yt!==rt&&(st[at++]=tt.shape[yt]);const ot=new Array(nt).fill(0),dt=tt.shape.slice();dt[rt]=1;const ht=new Array(it);for(let yt=0;yt<ht.length;yt++){ot[rt]=yt;const vt=slice$1({inputs:{x:tt},backend:_e,attrs:{begin:ot,size:dt}});ht[yt]=reshape$1({inputs:{x:vt},backend:_e,attrs:{shape:st}}),_e.disposeIntermediateTensorInfo(vt)}return ht}const unpackConfig$1={kernelName:Unpack,backendName:"cpu",kernelFunc:unpack$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unsortedSegmentSum$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,segmentIds:rt}=$,{numSegments:nt}=et;assertNotComplex$1(tt,"unsortedSegmentSum");const it=tt.shape.length,st=rt.shape.length,at=[],ot=[],dt=it-st;let ht=rt;for(let vt=0;vt<dt;++vt){const xt=expandDims$1({inputs:{input:ht},backend:_e,attrs:{dim:vt+1}});ht=xt,ot.push(xt)}for(let vt=0;vt<nt;++vt){const xt=createScalarValue(vt,"int32"),wt=_e.makeTensorInfo([],"int32",xt),Et=equal$1({inputs:{a:wt,b:ht},backend:_e}),At=cast$1({inputs:{x:Et},backend:_e,attrs:{dtype:"float32"}}),jt=multiply$1({inputs:{a:At,b:tt},backend:_e}),kt=sum$1({inputs:{x:jt},backend:_e,attrs:{axis:0,keepDims:!1}});at.push(kt),ot.push(wt),ot.push(Et),ot.push(At),ot.push(jt),ot.push(kt)}const yt=pack$1({inputs:at,backend:_e,attrs:{axis:0}});return ot.forEach(vt=>_e.disposeIntermediateTensorInfo(vt)),yt}const unsortedSegmentSumConfig$1={kernelName:UnsortedSegmentSum,backendName:"cpu",kernelFunc:unsortedSegmentSum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kernelConfigs$1=[_fusedMatMulConfig$1,absConfig$1,acosConfig$1,acoshConfig$1,addConfig$1,addNConfig$1,allConfig$1,anyConfig$1,argMaxConfig$1,argMinConfig$1,asinConfig$1,asinhConfig$1,atanConfig$1,atan2Config$1,atanhConfig$1,avgPoolConfig$1,avgPool3DConfig$1,avgPool3DGradConfig$1,avgPoolGradConfig$1,batchMatMulConfig$1,batchNormConfig$1,batchToSpaceNDConfig$1,bincountConfig$1,bitwiseAndConfig$1,broadcastArgsConfig$1,castConfig$1,ceilConfig$1,clipByValueConfig$1,complexConfig$1,complexAbsConfig$1,concatConfig$1,conv2DConfig$1,conv2DBackpropFilterConfig$1,conv2DBackpropInputConfig$1,conv3DConfig$1,conv3DBackpropFilterV2Config$1,conv3DBackpropInputV2Config,cosConfig$1,coshConfig$1,cropAndResizeConfig$1,cumprodConfig$1,cumsumConfig$1,denseBincountConfig$1,depthToSpaceConfig$1,depthwiseConv2dNativeConfig$1,depthwiseConv2dNativeBackpropFilterConfig$1,depthwiseConv2dNativeBackpropInputConfig$1,diagConfig$1,dilation2DConfig$1,dilation2DBackpropFilterConfig,dilation2DBackpropInputConfig,drawConfig,einsumConfig$1,eluConfig$1,eluGradConfig$1,equalConfig$1,erfConfig$1,expConfig$1,expandDimsConfig$1,expm1Config$1,fftConfig$1,fillConfig$1,flipLeftRightConfig$1,floorConfig$1,floorDivConfig$1,fusedConv2DConfig$1,fusedDepthwiseConv2DConfig$1,gatherNdConfig$1,gatherV2Config$1,greaterConfig$1,greaterEqualConfig$1,identityConfig$1,ifftConfig$1,imagConfig$1,isFiniteConfig$1,isInfConfig$1,isNaNConfig$1,leakyReluConfig$1,lessConfig$1,lessEqualConfig$1,linSpaceConfig$1,logConfig$1,log1pConfig$1,logicalAndConfig$1,logicalNotConfig$1,logicalOrConfig$1,LRNConfig$1,LRNGradConfig$1,maxConfig$1,maximumConfig$1,maxPoolConfig$1,maxPool3DConfig$1,maxPool3DGradConfig$1,maxPoolGradConfig$1,maxPoolWithArgmaxConfig$1,meanConfig$1,minConfig$1,minimumConfig$1,mirrorPadConfig$1,modConfig$1,multinomialConfig$1,multiplyConfig$1,negConfig$1,nonMaxSuppressionV3Config$1,nonMaxSuppressionV4Config$1,nonMaxSuppressionV5Config$1,notEqualConfig$1,oneHotConfig$1,onesLikeConfig$1,packConfig$1,padV2Config$1,powConfig$1,preluConfig$1,prodConfig$1,raggedGatherConfig$1,raggedRangeConfig$1,raggedTensorToTensorConfig$1,rangeConfig$1,realConfig$1,realDivConfig$1,reciprocalConfig$1,reluConfig$1,relu6Config$1,reshapeConfig$1,resizeBilinearConfig$1,resizeBilinearGradConfig$1,resizeNearestNeighborConfig$1,resizeNearestNeighborGradConfig$1,reverseConfig$1,rotateWithOffsetConfig$1,roundConfig$1,rsqrtConfig$1,scatterNdConfig$1,searchSortedConfig$1,selectConfig$1,seluConfig$1,sigmoidConfig$1,signConfig$1,sinConfig$1,sinhConfig$1,sliceConfig$1,softmaxConfig$1,softplusConfig$1,spaceToBatchNDConfig$1,sparseFillEmptyRowsConfig$1,sparseReshapeConfig$1,sparseSegmentMeanConfig$1,sparseSegmentSumConfig$1,sparseToDenseConfig$1,splitVConfig$1,sqrtConfig$1,squareConfig$1,squaredDifferenceConfig$1,staticRegexReplaceConfig$1,stepConfig$1,stridedSliceConfig$1,stringNGramsConfig$1,stringSplitConfig$1,stringToHashBucketFastConfig$1,subConfig$1,sumConfig$1,tanConfig$1,tanhConfig$1,tensorScatterUpdateConfig$1,tileConfig$1,topKConfig$1,transformConfig$1,transposeConfig$1,uniqueConfig$1,unpackConfig$1,unsortedSegmentSumConfig$1,zerosLikeConfig$1];for(const _ of kernelConfigs$1)registerKernel(_);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const contexts={},WEBGL_ATTRIBUTES={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function setWebGLContext(_,$){contexts[_]=$}function getWebGLContext(_,$){if(!(_ in contexts)||$!=null){const et=getWebGLRenderingContext(_,$);if(et!==null)contexts[_]=et;else return console.log("Could not get context for WebGL version",_),null}const _e=contexts[_];return _e==null||_e.isContextLost()?(delete contexts[_],getWebGLContext(_)):(_e.disable(_e.DEPTH_TEST),_e.disable(_e.STENCIL_TEST),_e.disable(_e.BLEND),_e.disable(_e.DITHER),_e.disable(_e.POLYGON_OFFSET_FILL),_e.disable(_e.SAMPLE_COVERAGE),_e.enable(_e.SCISSOR_TEST),_e.enable(_e.CULL_FACE),_e.cullFace(_e.BACK),contexts[_])}function createCanvas(_){if(!env().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&_===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function getWebGLRenderingContext(_,$){if(_!==1&&_!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const _e=$??createCanvas(_);return _e.addEventListener("webglcontextlost",et=>{et.preventDefault(),delete contexts[_]},!1),env().getBool("SOFTWARE_WEBGL_ENABLED")&&(WEBGL_ATTRIBUTES.failIfMajorPerformanceCaveat=!1),_===1?_e.getContext("webgl",WEBGL_ATTRIBUTES)||_e.getContext("experimental-webgl",WEBGL_ATTRIBUTES):_e.getContext("webgl2",WEBGL_ATTRIBUTES)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var PackingScheme;(function(_){_[_.DENSE=0]="DENSE",_[_.SHARED_BATCH=1]="SHARED_BATCH"})(PackingScheme||(PackingScheme={}));var TextureUsage;(function(_){_[_.RENDER=0]="RENDER",_[_.UPLOAD=1]="UPLOAD",_[_.PIXELS=2]="PIXELS",_[_.DOWNLOAD=3]="DOWNLOAD"})(TextureUsage||(TextureUsage={}));var PhysicalTextureType;(function(_){_[_.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",_[_.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",_[_.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",_[_.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",_[_.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(PhysicalTextureType||(PhysicalTextureType={}));function getUnpackedMatrixTextureShapeWidthHeight(_,$){return[$,_]}function getUnpackedArraySizeFromMatrixSize(_,$){return _*$}function getDenseTexShape(_){const $=sizeFromShape(_),_e=Math.ceil($/4);return sizeToSquarishShape(_e)}function getPackedMatrixTextureShapeWidthHeight(_,$){return[Math.max(1,Math.ceil($/2)),Math.max(1,Math.ceil(_/2))]}function getPackedRGBAArraySizeFromMatrixShape(_,$){const[_e,et]=getPackedMatrixTextureShapeWidthHeight(_,$);return _e*et*4}function getTextureConfig(_,$){const _e=_;let et,tt,rt,nt,it,st,at,ot,dt,ht;return env().getNumber("WEBGL_VERSION")===2?(et=_e.R32F,tt=_e.R16F,rt=_e.RGBA16F,nt=_e.RGBA32F,it=_e.RED,at=4,ot=1,dt=_e.HALF_FLOAT,ht=_e.FLOAT,st=_e.RGBA8):(et=_.RGBA,tt=_.RGBA,rt=_.RGBA,nt=_e.RGBA,it=_.RGBA,at=4,ot=4,dt=$!=null?$.HALF_FLOAT_OES:null,ht=_.FLOAT,st=_.RGBA),{internalFormatFloat:et,internalFormatHalfFloat:tt,internalFormatPackedHalfFloat:rt,internalFormatPackedFloat:nt,textureFormatFloat:it,downloadTextureFormat:st,downloadUnpackNumChannels:at,defaultNumChannels:ot,textureTypeHalfFloat:dt,textureTypeFloat:ht}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function callAndCheck(_,$){const _e=$();return env().getBool("DEBUG")&&checkWebGLError(_),_e}function checkWebGLError(_){const $=_.getError();if($!==_.NO_ERROR)throw new Error("WebGL Error: "+getWebGLErrorMessage(_,$))}const MIN_FLOAT16=596e-10,MAX_FLOAT16=65504;function canBeRepresented(_){return!!(env().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||_===0||MIN_FLOAT16<Math.abs(_)&&Math.abs(_)<MAX_FLOAT16)}function getWebGLErrorMessage(_,$){switch($){case _.NO_ERROR:return"NO_ERROR";case _.INVALID_ENUM:return"INVALID_ENUM";case _.INVALID_VALUE:return"INVALID_VALUE";case _.INVALID_OPERATION:return"INVALID_OPERATION";case _.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case _.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case _.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${$}`}}function getExtensionOrThrow(_,$){return throwIfNull(_,()=>_.getExtension($),'Extension "'+$+'" not supported on this browser.')}function createVertexShader$1(_,$){const _e=throwIfNull(_,()=>_.createShader(_.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(callAndCheck(_,()=>_.shaderSource(_e,$)),callAndCheck(_,()=>_.compileShader(_e)),_.getShaderParameter(_e,_.COMPILE_STATUS)===!1)throw console.log(_.getShaderInfoLog(_e)),new Error("Failed to compile vertex shader.");return _e}function createFragmentShader(_,$){const _e=throwIfNull(_,()=>_.createShader(_.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(callAndCheck(_,()=>_.shaderSource(_e,$)),callAndCheck(_,()=>_.compileShader(_e)),env().get("ENGINE_COMPILE_ONLY"))return _e;if(_.getShaderParameter(_e,_.COMPILE_STATUS)===!1)throw logShaderSourceAndInfoLog($,_.getShaderInfoLog(_e)),new Error("Failed to compile fragment shader.");return _e}const lineNumberRegex=/ERROR: [0-9]+:([0-9]+):/g;function logShaderSourceAndInfoLog(_,$){const _e=lineNumberRegex.exec($);if(_e==null){console.log(`Couldn't parse line number in error: ${$}`),console.log(_);return}const et=+_e[1],tt=_.split(`
`),rt=tt.length.toString().length+2,nt=tt.map((dt,ht)=>rightPad((ht+1).toString(),rt)+dt);let it=0;for(let dt=0;dt<nt.length;dt++)it=Math.max(nt[dt].length,it);const st=nt.slice(0,et-1),at=nt.slice(et-1,et),ot=nt.slice(et);console.log(st.join(`
`)),console.log($.split(`
`)[0]),console.log(`%c ${rightPad(at[0],it)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(ot.join(`
`))}function createProgram(_){return throwIfNull(_,()=>_.createProgram(),"Unable to create WebGLProgram.")}function linkProgram(_,$){if(callAndCheck(_,()=>_.linkProgram($)),!env().get("ENGINE_COMPILE_ONLY")&&_.getProgramParameter($,_.LINK_STATUS)===!1)throw console.log(_.getProgramInfoLog($)),new Error("Failed to link vertex and fragment shaders.")}function validateProgram(_,$){if(callAndCheck(_,()=>_.validateProgram($)),_.getProgramParameter($,_.VALIDATE_STATUS)===!1)throw console.log(_.getProgramInfoLog($)),new Error("Shader program validation failed.")}function createStaticVertexBuffer(_,$){const _e=throwIfNull(_,()=>_.createBuffer(),"Unable to create WebGLBuffer");return callAndCheck(_,()=>_.bindBuffer(_.ARRAY_BUFFER,_e)),callAndCheck(_,()=>_.bufferData(_.ARRAY_BUFFER,$,_.STATIC_DRAW)),_e}function createStaticIndexBuffer(_,$){const _e=throwIfNull(_,()=>_.createBuffer(),"Unable to create WebGLBuffer");return callAndCheck(_,()=>_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,_e)),callAndCheck(_,()=>_.bufferData(_.ELEMENT_ARRAY_BUFFER,$,_.STATIC_DRAW)),_e}function getNumChannels(){return env().getNumber("WEBGL_VERSION")===2?1:4}function createTexture(_){return throwIfNull(_,()=>_.createTexture(),"Unable to create WebGLTexture.")}function validateTextureSize(_,$){const _e=env().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(_<=0||$<=0){const et=`[${_}x${$}]`;throw new Error("Requested texture size "+et+" is invalid.")}if(_>_e||$>_e){const et=`[${_}x${$}]`,tt=`[${_e}x${_e}]`;throw new Error("Requested texture size "+et+" greater than WebGL maximum on this browser / GPU "+tt+".")}}function createFramebuffer(_){return throwIfNull(_,()=>_.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function bindVertexBufferToProgramAttribute(_,$,_e,et,tt,rt,nt){const it=_.getAttribLocation($,_e);return it===-1?!1:(callAndCheck(_,()=>_.bindBuffer(_.ARRAY_BUFFER,et)),callAndCheck(_,()=>_.vertexAttribPointer(it,tt,_.FLOAT,!1,rt,nt)),callAndCheck(_,()=>_.enableVertexAttribArray(it)),!0)}function bindTextureUnit(_,$,_e){validateTextureUnit(_,_e),callAndCheck(_,()=>_.activeTexture(_.TEXTURE0+_e)),callAndCheck(_,()=>_.bindTexture(_.TEXTURE_2D,$))}function unbindTextureUnit(_,$){validateTextureUnit(_,$),callAndCheck(_,()=>_.activeTexture(_.TEXTURE0+$)),callAndCheck(_,()=>_.bindTexture(_.TEXTURE_2D,null))}function getProgramUniformLocationOrThrow(_,$,_e){return throwIfNull(_,()=>_.getUniformLocation($,_e),'uniform "'+_e+'" not present in program.')}function getProgramUniformLocation(_,$,_e){return _.getUniformLocation($,_e)}function bindTextureToProgramUniformSampler(_,$,_e,et){callAndCheck(_,()=>bindTextureUnit(_,$,et)),callAndCheck(_,()=>_.uniform1i(_e,et))}function bindCanvasToFramebuffer(_){callAndCheck(_,()=>_.bindFramebuffer(_.FRAMEBUFFER,null)),callAndCheck(_,()=>_.viewport(0,0,_.canvas.width,_.canvas.height)),callAndCheck(_,()=>_.scissor(0,0,_.canvas.width,_.canvas.height))}function bindColorTextureToFramebuffer(_,$,_e){callAndCheck(_,()=>_.bindFramebuffer(_.FRAMEBUFFER,_e)),callAndCheck(_,()=>_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,$,0))}function unbindColorTextureFromFramebuffer(_,$){callAndCheck(_,()=>_.bindFramebuffer(_.FRAMEBUFFER,$)),callAndCheck(_,()=>_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,null,0))}function validateFramebuffer(_){const $=_.checkFramebufferStatus(_.FRAMEBUFFER);if($!==_.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+getFramebufferErrorMessage(_,$))}function getFramebufferErrorMessage(_,$){switch($){case _.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case _.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case _.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case _.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${$}`}}function throwIfNull(_,$,_e){const et=callAndCheck(_,()=>$());if(et==null)throw new Error(_e);return et}function validateTextureUnit(_,$){const _e=_.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,et=$+_.TEXTURE0;if(et<_.TEXTURE0||et>_e){const tt=`[gl.TEXTURE0, gl.TEXTURE${_e}]`;throw new Error(`textureUnit must be in ${tt}.`)}}function getBatchDim(_,$=2){return sizeFromShape(_.slice(0,_.length-$))}function getRowsCols(_){if(_.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[_.length>1?_[_.length-2]:1,_[_.length-1]]}function getShapeAs3D(_){let $=[1,1,1];return _.length===0||_.length===1&&_[0]===1||($=[getBatchDim(_),...getRowsCols(_)]),$}function getTextureShapeFromLogicalShape(_,$=!1){let _e=env().getNumber("WEBGL_MAX_TEXTURE_SIZE"),et=env().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");et===1/0&&env().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(et=_e/2),$&&(_e=_e*2,et=et*2,_=_.map((it,st)=>st>=_.length-2?nearestLargerEven(_[st]):_[st]),_.length===1&&(_=[2,_[0]])),_.length!==2&&(_=squeezeShape(_).newShape);let tt=sizeFromShape(_),rt=null;_.length<=1&&tt<=_e?rt=[1,tt]:_.length===2&&_[0]<=_e&&_[1]<=_e?rt=_:_.length===3&&_[0]*_[1]<=_e&&_[2]<=_e?rt=[_[0]*_[1],_[2]]:_.length===3&&_[0]<=_e&&_[1]*_[2]<=_e?rt=[_[0],_[1]*_[2]]:_.length===4&&_[0]*_[1]*_[2]<=_e&&_[3]<=_e?rt=[_[0]*_[1]*_[2],_[3]]:_.length===4&&_[0]<=_e&&_[1]*_[2]*_[3]<=_e&&(rt=[_[0],_[1]*_[2]*_[3]]);const nt=rt!=null&&Math.max(...rt)>et&&Math.min(...rt)<=($?2:1)&&Math.min(...rt)>0;if(rt==null||nt)if($){const it=getBatchDim(_);let st=2,at=2;_.length&&([st,at]=getRowsCols(_)),tt=it*(st/2)*(at/2),rt=sizeToSquarishShape(tt).map(ot=>ot*2)}else rt=sizeToSquarishShape(tt);return rt}function isEven(_){return _%2===0}function isReshapeFree(_,$){if(_=_.slice(-2),$=$.slice(-2),arraysEqual(_,$)||!_.length||!$.length||_[0]===0||_[1]===0||$[0]===0||$[1]===0)return!0;if(_.length!==$.length){const _e=_[_.length-1],et=$[$.length-1];if(_e===et||isEven(_e)&&isEven(et)&&(_[0]===1||$[0]===1))return!0}return _[1]===$[1]&&isEven(_[0])&&isEven($[0])}let MAX_TEXTURE_SIZE,MAX_TEXTURES_IN_SHADER;function getWebGLMaxTextureSize(_){if(MAX_TEXTURE_SIZE==null){const $=getWebGLContext(_);MAX_TEXTURE_SIZE=$.getParameter($.MAX_TEXTURE_SIZE)}return MAX_TEXTURE_SIZE}function resetMaxTextureSize(){MAX_TEXTURE_SIZE=null}function resetMaxTexturesInShader(){MAX_TEXTURES_IN_SHADER=null}function getMaxTexturesInShader(_){if(MAX_TEXTURES_IN_SHADER==null){const $=getWebGLContext(_);MAX_TEXTURES_IN_SHADER=$.getParameter($.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,MAX_TEXTURES_IN_SHADER)}function getWebGLDisjointQueryTimerVersion(_){if(_===0)return 0;let $;const _e=getWebGLContext(_);return hasExtension(_e,"EXT_disjoint_timer_query_webgl2")&&_===2?$=2:hasExtension(_e,"EXT_disjoint_timer_query")?$=1:$=0,$}function hasExtension(_,$){return _.getExtension($)!=null}function isWebGLVersionEnabled(_){try{if(getWebGLContext(_)!=null)return!0}catch($){return console.log("Error when getting WebGL context: ",$),!1}return!1}function isCapableOfRenderingToFloatTexture(_){if(_===0)return!1;const $=getWebGLContext(_);if(_===1){if(!hasExtension($,"OES_texture_float"))return!1}else if(!hasExtension($,"EXT_color_buffer_float"))return!1;return createFloatTextureAndBindToFramebuffer($)}function isDownloadFloatTextureEnabled(_){if(_===0)return!1;const $=getWebGLContext(_);if(_===1){if(!hasExtension($,"OES_texture_float")||!hasExtension($,"WEBGL_color_buffer_float"))return!1}else{if(hasExtension($,"EXT_color_buffer_float"))return createFloatTextureAndBindToFramebuffer($);const et="EXT_color_buffer_half_float";if(hasExtension($,et)){const tt=$.getExtension(et);return createHalfFloatTextureAndBindToFramebuffer($,tt)}return!1}return createFloatTextureAndBindToFramebuffer($)}function createFloatTextureAndBindToFramebuffer(_){const $=getTextureConfig(_),_e=_.createTexture();_.bindTexture(_.TEXTURE_2D,_e),_.texImage2D(_.TEXTURE_2D,0,$.internalFormatFloat,1,1,0,$.textureFormatFloat,$.textureTypeFloat,null);const rt=_.createFramebuffer();_.bindFramebuffer(_.FRAMEBUFFER,rt),_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,_e,0);const nt=_.checkFramebufferStatus(_.FRAMEBUFFER)===_.FRAMEBUFFER_COMPLETE;return _.bindTexture(_.TEXTURE_2D,null),_.bindFramebuffer(_.FRAMEBUFFER,null),_.deleteTexture(_e),_.deleteFramebuffer(rt),nt}function createHalfFloatTextureAndBindToFramebuffer(_,$){const _e=getTextureConfig(_,$),et=_.createTexture();_.bindTexture(_.TEXTURE_2D,et),_.texImage2D(_.TEXTURE_2D,0,_e.internalFormatHalfFloat,1,1,0,_e.textureFormatFloat,_e.textureTypeHalfFloat,null);const nt=_.createFramebuffer();_.bindFramebuffer(_.FRAMEBUFFER,nt),_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,et,0);const it=_.checkFramebufferStatus(_.FRAMEBUFFER)===_.FRAMEBUFFER_COMPLETE;return _.bindTexture(_.TEXTURE_2D,null),_.bindFramebuffer(_.FRAMEBUFFER,null),_.deleteTexture(et),_.deleteFramebuffer(nt),it}function isWebGLFenceEnabled(_){return _!==2?!1:getWebGLContext(_).fenceSync!=null}function assertNotComplex(_,$){Array.isArray(_)||(_=[_]),_.forEach(_e=>{_e!=null&&assert$1(_e.dtype!=="complex64",()=>`${$} does not support complex64 tensors in the WebGL backend.`)})}const webgl_util=Object.freeze(Object.defineProperty({__proto__:null,assertNotComplex,bindCanvasToFramebuffer,bindColorTextureToFramebuffer,bindTextureToProgramUniformSampler,bindTextureUnit,bindVertexBufferToProgramAttribute,callAndCheck,canBeRepresented,createFragmentShader,createFramebuffer,createProgram,createStaticIndexBuffer,createStaticVertexBuffer,createTexture,createVertexShader:createVertexShader$1,getBatchDim,getExtensionOrThrow,getFramebufferErrorMessage,getMaxTexturesInShader,getNumChannels,getProgramUniformLocation,getProgramUniformLocationOrThrow,getRowsCols,getShapeAs3D,getTextureShapeFromLogicalShape,getWebGLDisjointQueryTimerVersion,getWebGLErrorMessage,getWebGLMaxTextureSize,hasExtension,isCapableOfRenderingToFloatTexture,isDownloadFloatTextureEnabled,isReshapeFree,isWebGLFenceEnabled,isWebGLVersionEnabled,linkProgram,logShaderSourceAndInfoLog,resetMaxTextureSize,resetMaxTexturesInShader,unbindColorTextureFromFramebuffer,unbindTextureUnit,validateFramebuffer,validateProgram,validateTextureSize},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ENV=env();ENV.registerFlag("HAS_WEBGL",()=>ENV.getNumber("WEBGL_VERSION")>0);ENV.registerFlag("WEBGL_VERSION",()=>isWebGLVersionEnabled(2)?2:isWebGLVersionEnabled(1)?1:0);ENV.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);ENV.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>ENV.get("WEBGL_VERSION")===2);ENV.registerFlag("WEBGL_CPU_FORWARD",()=>!0);ENV.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);ENV.registerFlag("WEBGL_PACK",()=>ENV.getBool("HAS_WEBGL"));ENV.registerFlag("WEBGL_PACK_NORMALIZATION",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_CLIP",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_REDUCE",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_LAZILY_UNPACK",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_CONV_IM2COL",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>getWebGLMaxTextureSize(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>getMaxTexturesInShader(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const _=ENV.getNumber("WEBGL_VERSION");return _===0?0:getWebGLDisjointQueryTimerVersion(_)});ENV.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>ENV.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!isMobile());ENV.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>isCapableOfRenderingToFloatTexture(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>ENV.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:ENV.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));ENV.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>isDownloadFloatTextureEnabled(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_FENCE_API_ENABLED",()=>isWebGLFenceEnabled(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>ENV.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);ENV.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,_=>{if(typeof _!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${_}.`);if(_<0&&_!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${_}.`)});ENV.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>isMobile()?1:-1,_=>{if(typeof _!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${_}.`);if(_<0&&_!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${_}.`)});ENV.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);ENV.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);ENV.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);ENV.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);ENV.registerFlag("WEBGL_EXP_CONV",()=>!1);ENV.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>ENV.getBool("IS_TEST"));ENV.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);ENV.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);ENV.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);ENV.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getGlslDifferences(){let _,$,_e,et,tt,rt,nt,it,st,at;return env().getNumber("WEBGL_VERSION")===2?(_="#version 300 es",$="in",_e="out",et="in",tt="texture",rt="outputColor",nt="out vec4 outputColor;",it=env().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",st="",at=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(_="",$="attribute",_e="varying",et="varying",tt="texture2D",rt="gl_FragColor",nt="",it=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,st=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,at=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:_,attribute:$,varyingVs:_e,varyingFs:et,texture2D:tt,output:rt,defineOutput:nt,defineSpecialNaN:it,defineSpecialInf:st,defineRound:at}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getLogicalCoordinatesFromFlatIndex(_,$,_e="index"){const et=computeStrides($);return et.map((tt,rt)=>{const nt=`int ${_[rt]} = ${_e} / ${tt}`,it=rt===et.length-1?`int ${_[rt+1]} = ${_e} - ${_[rt]} * ${tt}`:`index -= ${_[rt]} * ${tt}`;return`${nt}; ${it};`}).join("")}function getOutputLogicalCoordinatesFromFlatIndexByUniform(_,$,_e="index"){const et=computeStrides($);return et.map((tt,rt)=>{const nt=`int ${_[rt]} = ${_e} / outShapeStrides[${rt}]`,it=rt===et.length-1?`int ${_[rt+1]} = ${_e} - ${_[rt]} * outShapeStrides[${rt}]`:`index -= ${_[rt]} * outShapeStrides[${rt}]`;return`${nt}; ${it};`}).join("")}function symbolicallyComputeStrides(_,$){const _e=_.length,et=_.map(rt=>`${$}[${rt}]`),tt=new Array(_e-1);tt[_e-2]=et[_e-1];for(let rt=_e-3;rt>=0;--rt)tt[rt]=`(${tt[rt+1]} * ${et[rt+1]})`;return tt}function getLogicalCoordinatesFromFlatIndexByUniform(_,$,_e="index"){const et=_.map((rt,nt)=>nt),tt=symbolicallyComputeStrides(et,$);return tt.map((rt,nt)=>{const it=`int ${_[nt]} = ${_e} / ${tt[nt]}`,st=nt===tt.length-1?`int ${_[nt+1]} = ${_e} - ${_[nt]} * ${tt[nt]}`:`index -= ${_[nt]} * ${tt[nt]}`;return`${it}; ${st};`}).join("")}function getFlatIndexFrom3D(_){const $=computeStrides(_).map(_e=>_e.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${$[0]} + coords.y * ${$[1]} + coords.z;
  }
`}function getFlatIndexFrom3DOutput(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const ENCODE_FLOAT_SNIPPET=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims}=backend_util;function makeShader(_,$,_e){const et=[];if(_.forEach(yt=>{const vt=sizeFromShape(yt.shapeInfo.logicalShape);if(yt.shapeInfo.isUniform?et.push(`uniform float ${yt.name}${vt>1?`[${vt}]`:""};`):(et.push(`uniform sampler2D ${yt.name};`),et.push(`uniform int offset${yt.name};`)),_e.enableShapeUniforms){const{uniformShape:xt}=getUniformInfoFromShape(_e.packedInputs,yt.shapeInfo.logicalShape,yt.shapeInfo.texShape);switch(xt.length){case 1:et.push(`uniform int ${yt.name}Shape;`);break;case 2:et.push(`uniform ivec2 ${yt.name}Shape;`);break;case 3:et.push(`uniform ivec3 ${yt.name}Shape;`);break;case 4:et.push(`uniform ivec4 ${yt.name}Shape;`);break}et.push(`uniform ivec2 ${yt.name}TexShape;`)}}),_e.enableShapeUniforms){switch($.logicalShape.length){case 1:et.push("uniform int outShape;");break;case 2:et.push("uniform ivec2 outShape;"),et.push("uniform int outShapeStrides;");break;case 3:et.push("uniform ivec3 outShape;"),et.push("uniform ivec2 outShapeStrides;");break;case 4:et.push("uniform ivec4 outShape;"),et.push("uniform ivec3 outShapeStrides;");break}et.push("uniform ivec2 outTexShape;")}_e.customUniforms&&_e.customUniforms.forEach(yt=>{et.push(`uniform ${yt.type} ${yt.name}${yt.arrayIndex?`[${yt.arrayIndex}]`:""};`)});const tt=et.join(`
`),rt=_.map(yt=>getInputSamplingSnippet(yt,$,_e.packedInputs,_e.enableShapeUniforms)).join(`
`),nt=$.texShape,it=getGlslDifferences(),st=getFloatTextureSampleSnippet(it);let at,ot,dt=getShaderPrefix(it);return $.isPacked?(at=getPackedOutputSamplingSnippet($.logicalShape,nt,_e.enableShapeUniforms),ot=getFloatTextureSetRGBASnippet(it)):(at=getOutputSamplingSnippet($.logicalShape,nt,_e.enableShapeUniforms),ot=getFloatTextureSetRSnippet(it)),_e.packedInputs&&(dt+=SHADER_PACKED_PREFIX),[dt,st,ot,tt,at,rt,_e.userCode].join(`
`)}function getSamplerFromInInfo(_,$=!1){const _e=_.shapeInfo.logicalShape;switch(_e.length){case 0:return getSamplerScalar(_,$);case 1:return getSampler1D(_,$);case 2:return getSampler2D(_,$);case 3:return getSampler3D(_,$);case 4:return getSampler4D(_,$);case 5:return getSampler5D(_);case 6:return getSampler6D(_);default:throw new Error(`${_e.length}-D input sampling is not yet supported`)}}function getPackedSamplerFromInInfo(_,$){switch(_.shapeInfo.logicalShape.length){case 0:return getPackedSamplerScalar(_);case 1:return getPackedSampler1D(_,$);case 2:return getPackedSampler2D(_,$);case 3:return getPackedSampler3D(_,$);default:return getPackedSamplerND(_,$)}}function getInputSamplingSnippet(_,$,_e=!1,et){let tt="";_e?tt+=getPackedSamplerFromInInfo(_,et):tt+=getSamplerFromInInfo(_,et);const rt=_.shapeInfo.logicalShape,nt=$.logicalShape;return rt.length<=nt.length&&(_e?tt+=getPackedSamplerAtOutputCoords(_,$):tt+=getSamplerAtOutputCoords(_,$)),tt}function getPackedOutputSamplingSnippet(_,$,_e){switch(_.length){case 0:return getOutputScalarCoords();case 1:return getOutputPacked1DCoords(_,$,_e);case 2:return getOutputPacked2DCoords(_,$,_e);case 3:return getOutputPacked3DCoords(_,$,_e);default:return getOutputPackedNDCoords(_,$,_e)}}function getOutputSamplingSnippet(_,$,_e){switch(_.length){case 0:return getOutputScalarCoords();case 1:return getOutput1DCoords(_,$,_e);case 2:return getOutput2DCoords(_,$,_e);case 3:return getOutput3DCoords(_,$,_e);case 4:return getOutput4DCoords(_,$,_e);case 5:return getOutput5DCoords(_,$);case 6:return getOutput6DCoords(_,$);default:throw new Error(`${_.length}-D output sampling is not yet supported`)}}function getFloatTextureSampleSnippet(_){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${_.texture2D}(textureSampler, uv).r;
    }
  `}function getFloatTextureSetRSnippet(_){return`
    void setOutput(float val) {
      ${_.output} = vec4(val, 0, 0, 0);
    }
  `}function getFloatTextureSetRGBASnippet(_){return`
    void setOutput(vec4 val) {
      ${_.output} = val;
    }
  `}function getShaderPrefix(_){return`${_.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${_.varyingFs} vec2 resultUV;
    ${_.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${_.defineSpecialNaN}
    ${_.defineSpecialInf}
    ${_.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${SAMPLE_1D_SNIPPET}
    ${SAMPLE_2D_SNIPPET}
    ${SAMPLE_3D_SNIPPET}
  `}const SAMPLE_1D_SNIPPET=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,SAMPLE_2D_SNIPPET=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,SAMPLE_3D_SNIPPET=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,SHADER_PACKED_PREFIX=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function getOutputScalarCoords(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function getOutputPacked1DCoords(_,$,_e){const et=[Math.ceil($[0]/2),Math.ceil($[1]/2)];return et[0]===1?_e?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${et[1]}.0);
      }
    `:et[1]===1?_e?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${et[0]}.0);
      }
    `:_e?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${et[0]}, ${et[1]}));
      return 2 * (resTexRC.x * ${et[1]} + resTexRC.y);
    }
  `}function getOutput1DCoords(_,$,_e){return $[0]===1?_e?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${$[1]}.0);
      }
    `:$[1]===1?_e?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${$[0]}.0);
      }
    `:_e?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${$[0]}, ${$[1]}));
      return resTexRC.x * ${$[1]} + resTexRC.y;
    }
  `}function getOutputPacked3DCoords(_,$,_e){if(_e)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const et=[Math.ceil($[0]/2),Math.ceil($[1]/2)],tt=Math.ceil(_[2]/2),rt=tt*Math.ceil(_[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${et[0]}, ${et[1]}));
      int index = resTexRC.x * ${et[1]} + resTexRC.y;

      int b = index / ${rt};
      index -= b * ${rt};

      int r = 2 * (index / ${tt});
      int c = imod(index, ${tt}) * 2;

      return ivec3(b, r, c);
    }
  `}function getOutput3DCoords(_,$,_e){if(_e)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${getOutputLogicalCoordinatesFromFlatIndexByUniform(["r","c","d"],_)}
    return ivec3(r, c, d);
  }
`;const et=getLogicalCoordinatesFromFlatIndex(["r","c","d"],_);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${$[0]}, ${$[1]}));
      int index = resTexRC.x * ${$[1]} + resTexRC.y;
      ${et}
      return ivec3(r, c, d);
    }
  `}function getOutputPackedNDCoords(_,$,_e){if(_e)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const et=[Math.ceil($[0]/2),Math.ceil($[1]/2)],tt=Math.ceil(_[_.length-1]/2),rt=tt*Math.ceil(_[_.length-2]/2);let nt=rt,it="",st="b, r, c";for(let at=2;at<_.length-1;at++)nt*=_[_.length-at-1],it=`
      int b${at} = index / ${nt};
      index -= b${at} * ${nt};
    `+it,st=`b${at}, `+st;return`
    ivec${_.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${et[0]}, ${et[1]}));
      int index = resTexRC.x * ${et[1]} + resTexRC.y;

      ${it}

      int b = index / ${rt};
      index -= b * ${rt};

      int r = 2 * (index / ${tt});
      int c = imod(index, ${tt}) * 2;

      return ivec${_.length}(${st});
    }
  `}function getOutput4DCoords(_,$,_e){if(_e)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${getOutputLogicalCoordinatesFromFlatIndexByUniform(["r","c","d","d2"],_)}
      return ivec4(r, c, d, d2);
    }
  `;const et=getLogicalCoordinatesFromFlatIndex(["r","c","d","d2"],_);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${$[0]}, ${$[1]}));
      int index = resTexRC.x * ${$[1]} + resTexRC.y;
      ${et}
      return ivec4(r, c, d, d2);
    }
  `}function getOutput5DCoords(_,$){const _e=getLogicalCoordinatesFromFlatIndex(["r","c","d","d2","d3"],_);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${$[0]},
                             ${$[1]}));

      int index = resTexRC.x * ${$[1]} + resTexRC.y;

      ${_e}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function getOutput6DCoords(_,$){const _e=getLogicalCoordinatesFromFlatIndex(["r","c","d","d2","d3","d4"],_);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${$[0]}, ${$[1]}));
      int index = resTexRC.x * ${$[1]} + resTexRC.y;

      ${_e}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function getOutputPacked2DCoords(_,$,_e){const et=[Math.ceil($[0]/2),Math.ceil($[1]/2)];if(arraysEqual(_,$))return _e?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${et[0]}, ${et[1]}));
      }
    `;const tt=Math.ceil(_[1]/2);return _e?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${et[0]}, ${et[1]}));

      int index = resTexRC.x * ${et[1]} + resTexRC.y;
      int r = 2 * (index / ${tt});
      int c = imod(index, ${tt}) * 2;

      return ivec2(r, c);
    }
  `}function getOutput2DCoords(_,$,_e){return arraysEqual(_,$)?_e?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${$[0]}, ${$[1]}));
      }
    `:_[1]===1?_e?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${$[0]}, ${$[1]}));
        int index = resTexRC.x * ${$[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:_[0]===1?_e?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${$[0]}, ${$[1]}));
        int index = resTexRC.x * ${$[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:_e?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${$[0]}, ${$[1]}));
      int index = resTexRC.x * ${$[1]} + resTexRC.y;
      int r = index / ${_[1]};
      int c = index - r * ${_[1]};
      return ivec2(r, c);
    }
  `}function getFlatOffsetUniformName(_){return`offset${_}`}function getPackedSamplerScalar(_){const $=_.name,_e="get"+$.charAt(0).toUpperCase()+$.slice(1),et=getGlslDifferences();return`
    vec4 ${_e}() {
      return ${et.texture2D}(${$}, halfCR);
    }
  `}function getSamplerScalar(_,$){const _e=_.name,et="get"+_e.charAt(0).toUpperCase()+_e.slice(1);if(_.shapeInfo.isUniform)return`float ${et}() {return ${_e};}`;const[tt,rt]=_.shapeInfo.texShape;if(tt===1&&rt===1)return`
      float ${et}() {
        return sampleTexture(${_e}, halfCR);
      }
    `;const nt=getFlatOffsetUniformName(_e);if($)return`
    float ${et}() {
      vec2 uv = uvFromFlat(${_e}TexShape[0], ${_e}TexShape[1], ${nt});
      return sampleTexture(${_e}, uv);
    }
  `;const[it,st]=_.shapeInfo.texShape;return`
    float ${et}() {
      vec2 uv = uvFromFlat(${it}, ${st}, ${nt});
      return sampleTexture(${_e}, uv);
    }
  `}function getPackedSampler1D(_,$){const _e=_.name,et="get"+_e.charAt(0).toUpperCase()+_e.slice(1),tt=_.shapeInfo.texShape,rt=getGlslDifferences();if($)return`
    vec4 ${et}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${_e}TexShape[0]) / 2.0), ceil(float(${_e}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${rt.texture2D}(${_e}, uv);
    }
  `;const nt=[Math.ceil(tt[0]/2),Math.ceil(tt[1]/2)];return`
    vec4 ${et}(int index) {
      vec2 uv = packedUVfrom1D(
        ${nt[0]}, ${nt[1]}, index);
      return ${rt.texture2D}(${_e}, uv);
    }
  `}function getSampler1D(_,$){const _e=_.name,et="get"+_e.charAt(0).toUpperCase()+_e.slice(1);if(_.shapeInfo.isUniform)return`
      float ${et}(int index) {
        ${getUniformSampler(_)}
      }
    `;const tt=_.shapeInfo.texShape,rt=tt[0],nt=tt[1];if(nt===1&&rt===1)return`
      float ${et}(int index) {
        return sampleTexture(${_e}, halfCR);
      }
    `;const it=getFlatOffsetUniformName(_e);return nt===1?$?`
      float ${et}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${it}) + 0.5) / float(${_e}TexShape[0]));
        return sampleTexture(${_e}, uv);
      }
    `:`
      float ${et}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${it}) + 0.5) / ${rt}.0);
        return sampleTexture(${_e}, uv);
      }
    `:rt===1?$?`
      float ${et}(int index) {
        vec2 uv = vec2((float(index + ${it}) + 0.5) / float(${_e}TexShape[1]), 0.5);
        return sampleTexture(${_e}, uv);
      }
    `:`
      float ${et}(int index) {
        vec2 uv = vec2((float(index + ${it}) + 0.5) / ${nt}.0, 0.5);
        return sampleTexture(${_e}, uv);
      }
    `:$?`
    float ${et}(int index) {
      vec2 uv = uvFromFlat(${_e}TexShape[0], ${_e}TexShape[1], index + ${it});
      return sampleTexture(${_e}, uv);
    }
  `:`
    float ${et}(int index) {
      vec2 uv = uvFromFlat(${rt}, ${nt}, index + ${it});
      return sampleTexture(${_e}, uv);
    }
  `}function getPackedSampler2D(_,$){const _e=_.shapeInfo.logicalShape,et=_.name,tt="get"+et.charAt(0).toUpperCase()+et.slice(1),rt=_.shapeInfo.texShape,nt=rt[0],it=rt[1],st=getGlslDifferences();if(rt!=null&&arraysEqual(_e,rt))return $?`
      vec4 ${tt}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${et}TexShape[1], ${et}TexShape[0]);

        return ${st.texture2D}(${et}, uv);
      }
    `:`
      vec4 ${tt}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${it}.0, ${nt}.0);

        return ${st.texture2D}(${et}, uv);
      }
    `;if($)return`
    vec4 ${tt}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${et}TexShape[0]) / 2.0), ceil(float(${et}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${et}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${st.texture2D}(${et}, uv);
    }
  `;const at=[Math.ceil(rt[0]/2),Math.ceil(rt[1]/2)],ot=Math.ceil(_e[1]/2);return`
    vec4 ${tt}(int row, int col) {
      vec2 uv = packedUVfrom2D(${ot}, ${at[0]}, ${at[1]}, row, col);
      return ${st.texture2D}(${et}, uv);
    }
  `}function getSampler2D(_,$){const _e=_.shapeInfo.logicalShape,et=_.name,tt="get"+et.charAt(0).toUpperCase()+et.slice(1),rt=_.shapeInfo.texShape;if(rt!=null&&arraysEqual(_e,rt)){if($)return`
      float ${tt}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${et}TexShape[1], ${et}TexShape[0]);
        return sampleTexture(${et}, uv);
      }
    `;const ht=rt[0],yt=rt[1];return`
    float ${tt}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${yt}.0, ${ht}.0);
      return sampleTexture(${et}, uv);
    }
  `}const{newShape:nt,keptDims:it}=squeezeShape(_e),st=nt;if(st.length<_e.length){const ht=squeezeInputInfo(_,st),yt=["row","col"];return`
      ${getSamplerFromInInfo(ht,$)}
      float ${tt}(int row, int col) {
        return ${tt}(${getSqueezedParams(yt,it)});
      }
    `}if(_.shapeInfo.isUniform)return`
      float ${tt}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${_e[1]}, 1)));
        ${getUniformSampler(_)}
      }
    `;const at=rt[0],ot=rt[1],dt=getFlatOffsetUniformName(et);return ot===1?$?`
      float ${tt}(int row, int col) {
        float index = dot(vec3(row, col, ${dt}), vec3(${et}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${et}TexShape[0]));
        return sampleTexture(${et}, uv);
      }
    `:`
    float ${tt}(int row, int col) {
      float index = dot(vec3(row, col, ${dt}), vec3(${_e[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${at}.0);
      return sampleTexture(${et}, uv);
    }
  `:at===1?$?`
      float ${tt}(int row, int col) {
        float index = dot(vec3(row, col, ${dt}), vec3(${et}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${et}TexShape[1]), 0.5);
        return sampleTexture(${et}, uv);
      }
    `:`
    float ${tt}(int row, int col) {
      float index = dot(vec3(row, col, ${dt}), vec3(${_e[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${ot}.0, 0.5);
      return sampleTexture(${et}, uv);
    }
  `:$?`
      float ${tt}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${et}Shape[1] + col + ${dt};
        vec2 uv = uvFromFlat(${et}TexShape[0], ${et}TexShape[1], index);
        return sampleTexture(${et}, uv);
      }
    `:`
  float ${tt}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${_e[1]} + col + ${dt};
    vec2 uv = uvFromFlat(${at}, ${ot}, index);
    return sampleTexture(${et}, uv);
  }
`}function getPackedSampler3D(_,$){const _e=_.shapeInfo.logicalShape,et=_.name,tt="get"+et.charAt(0).toUpperCase()+et.slice(1),rt=_.shapeInfo.texShape,nt=[Math.ceil(rt[0]/2),Math.ceil(rt[1]/2)];if(_e[0]===1){const ht=_e.slice(1),yt=[1,2],vt=squeezeInputInfo(_,ht),xt=["b","row","col"];return`
        ${getPackedSamplerFromInInfo(vt,$)}
        vec4 ${tt}(int b, int row, int col) {
          return ${tt}(${getSqueezedParams(xt,yt)});
        }
      `}const it=getGlslDifferences();if($)return`
    vec4 ${tt}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${et}TexShape[0]) / 2.0), ceil(float(${et}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${et}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${et}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${it.texture2D}(${et}, uv);
    }
  `;const st=nt[0],at=nt[1],ot=Math.ceil(_e[2]/2),dt=ot*Math.ceil(_e[1]/2);return`
    vec4 ${tt}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${st}, ${at}, ${dt}, ${ot}, b, row, col);
      return ${it.texture2D}(${et}, uv);
    }
  `}function getSampler3D(_,$){const _e=_.shapeInfo.logicalShape,et=_.name,tt="get"+et.charAt(0).toUpperCase()+et.slice(1),rt=_e[1]*_e[2],nt=_e[2],{newShape:it,keptDims:st}=squeezeShape(_e),at=it;if(at.length<_e.length){const xt=squeezeInputInfo(_,at),wt=["row","col","depth"];return`
        ${getSamplerFromInInfo(xt,$)}
        float ${tt}(int row, int col, int depth) {
          return ${tt}(${getSqueezedParams(wt,st)});
        }
      `}if(_.shapeInfo.isUniform)return`
      float ${tt}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${rt}, ${nt}, 1)));
        ${getUniformSampler(_)}
      }
    `;const ot=_.shapeInfo.texShape,dt=ot[0],ht=ot[1],yt=_.shapeInfo.flatOffset;if(ht===rt&&yt==null)return $?`
      float ${tt}(int row, int col, int depth) {
        int stride1 = ${et}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${et}TexShape[1], ${et}TexShape[0]);
        return sampleTexture(${et}, uv);
      }
    `:`
        float ${tt}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${nt}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${ht}.0, ${dt}.0);
          return sampleTexture(${et}, uv);
        }
      `;if(ht===nt&&yt==null)return $?`
      float ${tt}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${et}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${et}TexShape[1], ${et}TexShape[0]);
        return sampleTexture(${et}, uv);
      }
    `:`
    float ${tt}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${_e[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${ht}.0, ${dt}.0);
      return sampleTexture(${et}, uv);
    }
  `;const vt=getFlatOffsetUniformName(et);return $?`
    float ${tt}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${et}Shape[1] * ${et}Shape[2];
      int stride1 = ${et}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${vt};
      vec2 uv = uvFromFlat(${et}TexShape[0], ${et}TexShape[1], index);
      return sampleTexture(${et}, uv);
    }
    `:`
      float ${tt}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${rt} + col * ${nt} + depth + ${vt};
        vec2 uv = uvFromFlat(${dt}, ${ht}, index);
        return sampleTexture(${et}, uv);
      }
  `}function getPackedSamplerND(_,$){const _e=_.name,et="get"+_e.charAt(0).toUpperCase()+_e.slice(1),tt=getGlslDifferences();if($)return`
    vec4 ${et}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${_e}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${_e}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${_e}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${_e}TexShape[0]) / 2.0), ceil(float(${_e}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${tt.texture2D}(${_e}, uv);
    }
  `;const rt=_.shapeInfo.logicalShape,nt=rt.length,it=_.shapeInfo.texShape,st=[Math.ceil(it[0]/2),Math.ceil(it[1]/2)],at=st[0],ot=st[1],dt=Math.ceil(rt[nt-1]/2);let ht=dt*Math.ceil(rt[nt-2]/2),yt="int b, int row, int col",vt=`b * ${ht} + (row / 2) * ${dt} + (col / 2)`;for(let xt=2;xt<nt-1;xt++)yt=`int b${xt}, `+yt,ht*=rt[nt-xt-1],vt=`b${xt} * ${ht} + `+vt;return`
    vec4 ${et}(${yt}) {
      int index = ${vt};
      int texR = index / ${ot};
      int texC = index - texR * ${ot};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${ot}, ${at});
      return ${tt.texture2D}(${_e}, uv);
    }
  `}function getSampler4D(_,$){const _e=_.shapeInfo.logicalShape,et=_.name,tt="get"+et.charAt(0).toUpperCase()+et.slice(1),rt=_e[3],nt=_e[2]*rt,it=_e[1]*nt,{newShape:st,keptDims:at}=squeezeShape(_e);if(st.length<_e.length){const At=squeezeInputInfo(_,st),jt=["row","col","depth","depth2"];return`
      ${getSamplerFromInInfo(At,$)}
      float ${tt}(int row, int col, int depth, int depth2) {
        return ${tt}(${getSqueezedParams(jt,at)});
      }
    `}if(_.shapeInfo.isUniform)return`
      float ${tt}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${it}, ${nt}, ${rt}, 1)));
        ${getUniformSampler(_)}
      }
    `;const ot=_.shapeInfo.flatOffset,dt=_.shapeInfo.texShape,ht=dt[0],yt=dt[1],vt=`int stride2 = ${et}Shape[3];`,xt=`int stride1 = ${et}Shape[2] * stride2;`,wt=`int stride0 = ${et}Shape[1] * stride1;`;if(yt===it&&ot==null)return $?`
      float ${tt}(int row, int col, int depth, int depth2) {
        ${vt}
        ${xt}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${et}TexShape[1], ${et}TexShape[0]);
        return sampleTexture(${et}, uv);
      }
    `:`
      float ${tt}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${nt}, ${rt}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${yt}.0, ${ht}.0);
        return sampleTexture(${et}, uv);
      }
    `;if(yt===rt&&ot==null)return $?`
      float ${tt}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${et}Shape[1] * ${et}Shape[2], ${et}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${et}TexShape[1], ${et}TexShape[0]);
        return sampleTexture(${et}, uv);
      }
    `:`
      float ${tt}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${_e[1]*_e[2]}, ${_e[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${yt}.0, ${ht}.0);
        return sampleTexture(${et}, uv);
      }
    `;const Et=getFlatOffsetUniformName(et);return $?`
    float ${tt}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${vt}
      ${xt}
      ${wt}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${et}TexShape[0], ${et}TexShape[1], index + ${Et});
      return sampleTexture(${et}, uv);
    }
  `:`
    float ${tt}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${it} + col * ${nt} +
          depth * ${rt} + depth2;
      vec2 uv = uvFromFlat(${ht}, ${yt}, index + ${Et});
      return sampleTexture(${et}, uv);
    }
  `}function getSampler5D(_){const $=_.shapeInfo.logicalShape,_e=_.name,et="get"+_e.charAt(0).toUpperCase()+_e.slice(1),tt=$[4],rt=$[3]*tt,nt=$[2]*rt,it=$[1]*nt,{newShape:st,keptDims:at}=squeezeShape($);if(st.length<$.length){const xt=squeezeInputInfo(_,st),wt=["row","col","depth","depth2","depth3"];return`
      ${getSamplerFromInInfo(xt)}
      float ${et}(int row, int col, int depth, int depth2, int depth3) {
        return ${et}(${getSqueezedParams(wt,at)});
      }
    `}if(_.shapeInfo.isUniform)return`
      float ${et}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${it}, ${nt}, ${rt}, ${tt})) +
          depth3;
        ${getUniformSampler(_)}
      }
    `;const ot=_.shapeInfo.flatOffset,dt=_.shapeInfo.texShape,ht=dt[0],yt=dt[1];if(yt===it&&ot==null)return`
      float ${et}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${nt}, ${rt}, ${tt}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${yt}.0, ${ht}.0);
        return sampleTexture(${_e}, uv);
      }
    `;if(yt===tt&&ot==null)return`
      float ${et}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${$[1]*$[2]*$[3]},
               ${$[2]*$[3]}, ${$[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${yt}.0, ${ht}.0);
        return sampleTexture(${_e}, uv);
      }
    `;const vt=getFlatOffsetUniformName(_e);return`
    float ${et}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${it} + col * ${nt} + depth * ${rt} +
          depth2 * ${tt} + depth3 + ${vt};
      vec2 uv = uvFromFlat(${ht}, ${yt}, index);
      return sampleTexture(${_e}, uv);
    }
  `}function getSampler6D(_){const $=_.shapeInfo.logicalShape,_e=_.name,et="get"+_e.charAt(0).toUpperCase()+_e.slice(1),{newShape:tt,keptDims:rt}=squeezeShape($);if(tt.length<$.length){const wt=squeezeInputInfo(_,tt),Et=["row","col","depth","depth2","depth3","depth4"];return`
      ${getSamplerFromInInfo(wt)}
      float ${et}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${et}(${getSqueezedParams(Et,rt)});
      }
    `}const nt=$[5],it=$[4]*nt,st=$[3]*it,at=$[2]*st,ot=$[1]*at;if(_.shapeInfo.isUniform)return`
      float ${et}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${ot}, ${at}, ${st}, ${it})) +
          dot(
            vec2(depth3, depth4),
            vec2(${nt}, 1)));
        ${getUniformSampler(_)}
      }
    `;const dt=_.shapeInfo.flatOffset,ht=_.shapeInfo.texShape,yt=ht[0],vt=ht[1];if(vt===ot&&dt==null)return`
      float ${et}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${at}, ${st}, ${it}, ${nt})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${vt}.0, ${yt}.0);
        return sampleTexture(${_e}, uv);
      }
    `;if(vt===nt&&dt==null)return`
      float ${et}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${$[1]*$[2]*$[3]*$[4]},
               ${$[2]*$[3]*$[4]},
               ${$[3]*$[4]},
               ${$[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${vt}.0, ${yt}.0);
        return sampleTexture(${_e}, uv);
      }
    `;const xt=getFlatOffsetUniformName(_e);return`
    float ${et}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${ot} + col * ${at} + depth * ${st} +
          depth2 * ${it} + depth3 * ${nt} + depth4 + ${xt};
      vec2 uv = uvFromFlat(${yt}, ${vt}, index);
      return sampleTexture(${_e}, uv);
    }
  `}function getUniformSampler(_){const $=_.name,_e=sizeFromShape(_.shapeInfo.logicalShape);return _e<2?`return ${$};`:`
    for (int i = 0; i < ${_e}; i++) {
      if (i == index) {
        return ${$}[i];
      }
    }
  `}function getPackedSamplerAtOutputCoords(_,$){const _e=_.name,et=_e.charAt(0).toUpperCase()+_e.slice(1),tt="get"+et+"AtOutCoords",rt=_.shapeInfo.logicalShape.length,nt=$.logicalShape.length,it=getBroadcastDims(_.shapeInfo.logicalShape,$.logicalShape),st=getCoordsDataType(nt),at=nt-rt;let ot;const dt=["x","y","z","w","u","v"];rt===0?ot="":nt<2&&it.length>=1?ot="coords = 0;":ot=it.map(At=>`coords.${dt[At+at]} = 0;`).join(`
`);let ht="";nt<2&&rt>0?ht="coords":ht=_.shapeInfo.logicalShape.map((At,jt)=>`coords.${dt[jt+at]}`).join(", ");let yt="return outputValue;";const xt=sizeFromShape(_.shapeInfo.logicalShape)===1,Et=sizeFromShape($.logicalShape)===1;if(rt===1&&!xt&&!Et)yt=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(xt&&!Et)nt===1?yt=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:yt=`
        return vec4(outputValue.x);
      `;else if(it.length){const At=rt-2,jt=rt-1;it.indexOf(At)>-1&&it.indexOf(jt)>-1?yt="return vec4(outputValue.x);":it.indexOf(At)>-1?yt="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":it.indexOf(jt)>-1&&(yt="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${tt}() {
      ${st} coords = getOutputCoords();
      ${ot}
      vec4 outputValue = get${et}(${ht});
      ${yt}
    }
  `}function getSamplerAtOutputCoords(_,$){const _e=_.name,et=_e.charAt(0).toUpperCase()+_e.slice(1),tt="get"+et+"AtOutCoords",rt=$.texShape,nt=_.shapeInfo.texShape,it=_.shapeInfo.logicalShape.length,st=$.logicalShape.length;if(!_.shapeInfo.isUniform&&it===st&&_.shapeInfo.flatOffset==null&&arraysEqual(nt,rt))return`
      float ${tt}() {
        return sampleTexture(${_e}, resultUV);
      }
    `;const at=getCoordsDataType(st),ot=getBroadcastDims(_.shapeInfo.logicalShape,$.logicalShape),dt=st-it;let ht;const yt=["x","y","z","w","u","v"];it===0?ht="":st<2&&ot.length>=1?ht="coords = 0;":ht=ot.map(xt=>`coords.${yt[xt+dt]} = 0;`).join(`
`);let vt="";return st<2&&it>0?vt="coords":vt=_.shapeInfo.logicalShape.map((xt,wt)=>`coords.${yt[wt+dt]}`).join(", "),`
    float ${tt}() {
      ${at} coords = getOutputCoords();
      ${ht}
      return get${et}(${vt});
    }
  `}function getCoordsDataType(_){if(_<=1)return"int";if(_===2)return"ivec2";if(_===3)return"ivec3";if(_===4)return"ivec4";if(_===5)return"ivec5";if(_===6)return"ivec6";throw Error(`GPU for rank ${_} is not yet supported`)}function getUniformInfoFromShape(_,$,_e){const{newShape:et,keptDims:tt}=squeezeShape($),rt=$.length,nt=_&&rt===3&&$[0]===1,it=nt?$.slice(1):et,st=!_&&rt>1&&!arraysEqual($,_e)&&et.length<rt||nt;return{useSqueezeShape:st,uniformShape:st?it:$,keptDims:tt}}function squeezeInputInfo(_,$){const _e=JSON.parse(JSON.stringify(_));return _e.shapeInfo.logicalShape=$,_e}function getSqueezedParams(_,$){return $.map(_e=>_[_e]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function compileProgram(_,$,_e,et){const tt=_e.map((ot,dt)=>{const ht={logicalShape:ot.shape,texShape:ot.isUniform?null:ot.texData.texShape,isUniform:ot.isUniform,isPacked:ot.isUniform?!1:ot.texData.isPacked,flatOffset:null};return ot.texData!=null&&ot.texData.slice!=null&&ot.texData.slice.flatOffset>0&&(ht.flatOffset=ot.texData.slice.flatOffset),{name:$.variableNames[dt],shapeInfo:ht}}),rt=tt.map(ot=>ot.shapeInfo),nt={logicalShape:et.shape,texShape:et.texData.texShape,isUniform:!1,isPacked:et.texData.isPacked,flatOffset:null},it=makeShader(tt,nt,$),st=createFragmentShader(_.gl,it),at=_.createProgram(st);return env().get("ENGINE_COMPILE_ONLY")?{program:$,fragmentShader:st,source:it,webGLProgram:at,inShapeInfos:rt,outShapeInfo:nt,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(_.buildVao(at),Object.assign({program:$,fragmentShader:st,source:it,webGLProgram:at,inShapeInfos:rt,outShapeInfo:nt},getUniformLocations(_,$,at)))}function getUniformLocations(_,$,_e){const et=[],tt=[];let rt,nt,it,st=null,at=null;at=_.getUniformLocation(_e,"NAN",!1),env().getNumber("WEBGL_VERSION")===1&&(st=_.getUniformLocation(_e,"INFINITY",!1));const ot=!1;for(const dt of $.variableNames){const ht={name:dt,uniform:_.getUniformLocation(_e,dt,ot),offset:_.getUniformLocation(_e,`offset${dt}`,ot)};$.enableShapeUniforms&&(ht.shape=_.getUniformLocation(_e,`${dt}Shape`,ot),ht.texShape=_.getUniformLocation(_e,`${dt}TexShape`,ot)),et.push(ht)}if($.enableShapeUniforms&&(rt=_.getUniformLocation(_e,"outShape",ot),it=_.getUniformLocation(_e,"outShapeStrides",ot),nt=_.getUniformLocation(_e,"outTexShape",ot)),$.customUniforms)for(const dt of $.customUniforms)tt.push(_.getUniformLocation(_e,dt.name,ot));return{variablesLocations:et,customUniformLocations:tt,infLoc:st,nanLoc:at,outShapeLocation:rt,outShapeStridesLocation:it,outTexShapeLocation:nt}}function validateBinaryAndProgram(_,$){if(_.length!==$.length)throw Error(`Binary was compiled with ${_.length} inputs, but was executed with ${$.length} inputs`);_.forEach((_e,et)=>{const tt=_e.logicalShape,rt=$[et],nt=rt.shape;if(!arraysEqual(tt,nt))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${tt} and ${nt} must match`);if(_e.isUniform&&rt.isUniform)return;const it=_e.texShape,st=rt.isUniform?null:rt.texData.texShape;if(!arraysEqual(it,st))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${it} and ${st} must match`)})}function runProgram(_,$,_e,et,tt){$.program.enableShapeUniforms||(validateBinaryAndProgram($.inShapeInfos,_e),validateBinaryAndProgram([$.outShapeInfo],[et]));const rt=et.texData.texture,nt=et.texData.texShape;et.texData.isPacked?_.setOutputPackedMatrixTexture(rt.texture,nt[0],nt[1]):_.setOutputMatrixTexture(rt.texture,nt[0],nt[1]),_.setProgram($.webGLProgram),_.bindVertexArray($.webGLProgram.vao),env().getNumber("WEBGL_VERSION")===1&&$.infLoc!==null&&_.gl.uniform1f($.infLoc,1/0),$.nanLoc!==null&&_.gl.uniform1f($.nanLoc,NaN);for(let st=0;st<_e.length;++st){const at=_e[st],{uniform:ot,offset:dt,shape:ht,texShape:yt}=$.variablesLocations[st];if(ht){const{uniformShape:vt}=getUniformInfoFromShape($.program.packedInputs,at.shape,at.texData.texShape);switch(vt.length){case 1:_.gl.uniform1iv(ht,new Int32Array(vt));break;case 2:_.gl.uniform2iv(ht,new Int32Array(vt));break;case 3:_.gl.uniform3iv(ht,new Int32Array(vt));break;case 4:_.gl.uniform4iv(ht,new Int32Array(vt));break}}if(yt&&_.gl.uniform2i(yt,at.texData.texShape[0],at.texData.texShape[1]),ot!=null){if(at.isUniform){if(sizeFromShape(at.shape)<2)_.gl.uniform1f(ot,at.uniformValues[0]);else{let vt=at.uniformValues;vt instanceof Float32Array||(vt=new Float32Array(vt)),_.gl.uniform1fv(ot,vt)}continue}at.texData.slice!=null&&dt!=null&&_.gl.uniform1i(dt,at.texData.slice.flatOffset),_.setInputMatrixTexture(at.texData.texture.texture,ot,st)}}const it=$.outShapeLocation;if(it)switch(et.shape.length){case 1:_.gl.uniform1iv(it,new Int32Array(et.shape));break;case 2:_.gl.uniform2iv(it,new Int32Array(et.shape));break;case 3:_.gl.uniform3iv(it,new Int32Array(et.shape));break;case 4:_.gl.uniform4iv(it,new Int32Array(et.shape));break}if($.outShapeStridesLocation){const st=computeStrides(et.shape);switch(et.shape.length){case 2:_.gl.uniform1iv($.outShapeStridesLocation,new Int32Array(st));break;case 3:_.gl.uniform2iv($.outShapeStridesLocation,new Int32Array(st));break;case 4:_.gl.uniform3iv($.outShapeStridesLocation,new Int32Array(st));break}}if($.outTexShapeLocation&&_.gl.uniform2i($.outTexShapeLocation,et.texData.texShape[0],et.texData.texShape[1]),$.program.customUniforms&&tt)for(let st=0;st<$.program.customUniforms.length;++st){const at=$.program.customUniforms[st],ot=$.customUniformLocations[st],dt=tt[st];if(at.type==="float")_.gl.uniform1fv(ot,dt);else if(at.type==="vec2")_.gl.uniform2fv(ot,dt);else if(at.type==="vec3")_.gl.uniform3fv(ot,dt);else if(at.type==="vec4")_.gl.uniform4fv(ot,dt);else if(at.type==="int")_.gl.uniform1iv(ot,dt);else if(at.type==="ivec2")_.gl.uniform2iv(ot,dt);else if(at.type==="ivec3")_.gl.uniform3iv(ot,dt);else if(at.type==="ivec4")_.gl.uniform4iv(ot,dt);else throw Error(`uniform type ${at.type} is not supported yet.`)}_.executeProgram()}function makeShaderKey(_,$,_e){let et="";$.concat(_e).forEach(nt=>{const it=nt.texData!=null&&nt.texData.slice!=null&&nt.texData.slice.flatOffset>0;if(_.enableShapeUniforms&&!nt.isUniform){const st=nt.texData.texShape,{useSqueezeShape:at,uniformShape:ot,keptDims:dt}=getUniformInfoFromShape(_.packedInputs,nt.shape,st);let ht="",yt="",vt="";if(ot.length===1&&_.packedInputs){const Lt=[Math.ceil(st[0]/2),Math.ceil(st[1]/2)];ht=`${Lt[0]>1}_${Lt[1]>1}`}else if(ot.length===2&&!_.packedInputs)yt=`${ot[0]>1}_${ot[1]>1}`;else if(ot.length>2&&!_.packedInputs){const Lt=computeStrides(ot);vt=`${Lt[0]===st[1]}_${Lt[Lt.length-1]===st[1]}`}const xt=nt.shape.length,wt=ot.length===2&&arraysEqual(nt.shape,st),Et=sizeFromShape(nt.shape)===1,At=getBroadcastDims$1(nt.shape,_e.shape),jt=!_.packedInputs&&xt===_e.shape.length&&arraysEqual(st,_e.texData.texShape),kt=_.packedInputs||ot.length>2?"":`${st[0]>1}_${st[1]>1}`;et+=`${xt}_${jt}_${at?dt:""}_${ot.length}_${Et}_${At}_${wt}_${ht}_${yt}_${vt}_${kt}_${it}`}else{const st=nt.isUniform?"uniform":nt.texData.texShape;et+=`${nt.shape}_${st}_${it}`}});const tt=_.userCode;let rt=_.constructor.name;return rt+="_"+et+"_"+tt+`${env().getNumber("WEBGL_VERSION")}`,rt}function useShapeUniforms(_){return env().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&_<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DecodeMatrixProgram{constructor($){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=PackingScheme.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const _e=getGlslDifferences();this.outputShape=$,this.enableShapeUniforms=useShapeUniforms(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?getOutputLogicalCoordinatesFromFlatIndexByUniform(["r","c","d"],$):getLogicalCoordinatesFromFlatIndex(["r","c","d"],$)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${_e.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DecodeMatrixPackedProgram{constructor($){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=PackingScheme.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const _e=getGlslDifferences();this.outputShape=$,this.enableShapeUniforms=useShapeUniforms(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?getOutputLogicalCoordinatesFromFlatIndexByUniform(["r","c","d"],$):getLogicalCoordinatesFromFlatIndex(["r","c","d"],$)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${_e.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EncodeFloatProgram{constructor($){this.variableNames=["A"],this.outTexUsage=TextureUsage.DOWNLOAD;const _e=getGlslDifferences();this.outputShape=$,this.userCode=`
      ${ENCODE_FLOAT_SNIPPET}

      void main() {
        float x = getAAtOutCoords();
        ${_e.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EncodeFloatPackedProgram{constructor($){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=TextureUsage.DOWNLOAD;const _e=getGlslDifferences();this.outputShape=$,this.userCode=`
      ${ENCODE_FLOAT_SNIPPET}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${_e.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CHANNEL_CHAR_TO_INDEX_MAP={R:0,G:1,B:2,A:3};class EncodeMatrixProgram{constructor($,_e=!1,et="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const tt=getGlslDifferences();this.outputShape=$,this.enableShapeUniforms=useShapeUniforms(this.outputShape.length);let rt="result";_e&&(rt="floor(result * 255. + 0.5)");let nt="";for(let it=0;it<et.length;it++){const st=et[it];nt+=`
          if(offset == ${it}) {
            result = values[${CHANNEL_CHAR_TO_INDEX_MAP[st]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?getFlatIndexFrom3DOutput():getFlatIndexFrom3D($)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${et.length});

        flatIndex = idiv(flatIndex, ${et.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${tt.texture2D}(A, uv);
          ${nt}
        }
        ${tt.output} = vec4(${rt}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EncodeMatrixPackedProgram{constructor($,_e=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const et=getGlslDifferences();this.outputShape=$,this.enableShapeUniforms=useShapeUniforms(this.outputShape.length);let tt="",rt="result";_e&&(rt="floor(result * 255. + 0.5)");for(let nt=0;nt<=1;nt++)for(let it=0;it<=1;it++){const st=nt*2+it;tt+=`
          localCoords = coords;
          if(localCoords[2] + ${it} < ${this.enableShapeUniforms?"outShape[2]":`${$[2]}`}) {
          localCoords[2] += ${it};
          if (localCoords[1] + ${nt} < ${this.enableShapeUniforms?"outShape[1]":`${$[1]}`}) {
            localCoords[1] += ${nt};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${et.texture2D}(A, uv);

            if (offset == 0) {
              result[${st}] = values[0];
            } else if (offset == 1) {
              result[${st}] = values[1];
            } else if (offset == 2) {
              result[${st}] = values[2];
            } else {
              result[${st}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?getFlatIndexFrom3DOutput():getFlatIndexFrom3D($)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${tt}

          ${et.output} = ${rt};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function createVertexShader(_){const $=getGlslDifferences(),_e=`${$.version}
    precision highp float;
    ${$.attribute} vec3 clipSpacePos;
    ${$.attribute} vec2 uv;
    ${$.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return createVertexShader$1(_,_e)}function createVertexBuffer(_){const $=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return createStaticVertexBuffer(_,$)}function createIndexBuffer(_){const $=new Uint16Array([0,1,2,2,1,3]);return createStaticIndexBuffer(_,$)}function createAndConfigureTexture(_,$,_e,et,tt,rt){validateTextureSize($,_e);const nt=createTexture(_),it=_.TEXTURE_2D;return callAndCheck(_,()=>_.bindTexture(it,nt)),callAndCheck(_,()=>_.texParameteri(it,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE)),callAndCheck(_,()=>_.texParameteri(it,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE)),callAndCheck(_,()=>_.texParameteri(it,_.TEXTURE_MIN_FILTER,_.NEAREST)),callAndCheck(_,()=>_.texParameteri(it,_.TEXTURE_MAG_FILTER,_.NEAREST)),env().getNumber("WEBGL_VERSION")===1?callAndCheck(_,()=>_.texImage2D(it,0,et,$,_e,0,tt,rt,null)):callAndCheck(_,()=>_.texStorage2D(it,1,et,$,_e)),callAndCheck(_,()=>_.bindTexture(_.TEXTURE_2D,null)),{texture:nt,texShape:[_e,$]}}function getInternalFormatForFloat32MatrixTexture(_){return _.internalFormatFloat}function createFloat32MatrixTexture(_,$,_e,et){const[tt,rt]=getUnpackedMatrixTextureShapeWidthHeight($,_e);return createAndConfigureTexture(_,tt,rt,getInternalFormatForFloat32MatrixTexture(et),et.textureFormatFloat,_.FLOAT)}function getInternalFormatForFloat16MatrixTexture(_){return _.internalFormatHalfFloat}function createFloat16MatrixTexture(_,$,_e,et){const[tt,rt]=getUnpackedMatrixTextureShapeWidthHeight($,_e);return createAndConfigureTexture(_,tt,rt,getInternalFormatForFloat16MatrixTexture(et),et.textureFormatFloat,et.textureTypeHalfFloat)}function getInternalFormatForUnsignedBytesMatrixTexture(_){return _.downloadTextureFormat}function createUnsignedBytesMatrixTexture(_,$,_e,et){const[tt,rt]=getUnpackedMatrixTextureShapeWidthHeight($,_e);return createAndConfigureTexture(_,tt,rt,getInternalFormatForUnsignedBytesMatrixTexture(et),_.RGBA,_.UNSIGNED_BYTE)}function getInternalFormatForPackedMatrixTexture(_){return _.internalFormatPackedFloat}function createPackedMatrixTexture(_,$,_e,et){const[tt,rt]=getPackedMatrixTextureShapeWidthHeight($,_e);return createAndConfigureTexture(_,tt,rt,getInternalFormatForPackedMatrixTexture(et),_.RGBA,_.FLOAT)}function getInternalFormatForFloat16PackedMatrixTexture(_){return _.internalFormatPackedHalfFloat}function createFloat16PackedMatrixTexture(_,$,_e,et){const[tt,rt]=getPackedMatrixTextureShapeWidthHeight($,_e);return createAndConfigureTexture(_,tt,rt,getInternalFormatForFloat16PackedMatrixTexture(et),_.RGBA,et.textureTypeHalfFloat)}function bindVertexProgramAttributeStreams(_,$,_e){return callAndCheck(_,()=>_.bindBuffer(_.ARRAY_BUFFER,_e)),bindVertexBufferToProgramAttribute(_,$,"clipSpacePos",_e,3,20,0)&&bindVertexBufferToProgramAttribute(_,$,"uv",_e,2,20,12)}function uploadDenseMatrixToTexture(_,$,_e,et,tt,rt){callAndCheck(_,()=>_.bindTexture(_.TEXTURE_2D,$));let nt,it,st;tt instanceof Uint8Array?(nt=new Uint8Array(_e*et*4),it=_.UNSIGNED_BYTE,st=_.RGBA):(nt=new Float32Array(_e*et*4),it=_.FLOAT,st=rt.internalFormatPackedFloat),nt.set(tt),env().getNumber("WEBGL_VERSION")===2?callAndCheck(_,()=>_.texSubImage2D(_.TEXTURE_2D,0,0,0,_e,et,_.RGBA,it,nt)):callAndCheck(_,()=>_.texImage2D(_.TEXTURE_2D,0,st,_e,et,0,_.RGBA,it,nt)),callAndCheck(_,()=>_.bindTexture(_.TEXTURE_2D,null))}function uploadPixelDataToTexture(_,$,_e){callAndCheck(_,()=>_.bindTexture(_.TEXTURE_2D,$)),_e.data instanceof Uint8Array?env().getNumber("WEBGL_VERSION")===2?callAndCheck(_,()=>_.texSubImage2D(_.TEXTURE_2D,0,0,0,_e.width,_e.height,_.RGBA,_.UNSIGNED_BYTE,_e.data)):callAndCheck(_,()=>_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_e.width,_e.height,0,_.RGBA,_.UNSIGNED_BYTE,_e.data)):env().getNumber("WEBGL_VERSION")===2?callAndCheck(_,()=>_.texSubImage2D(_.TEXTURE_2D,0,0,0,_.RGBA,_.UNSIGNED_BYTE,_e)):callAndCheck(_,()=>_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,_e)),callAndCheck(_,()=>_.bindTexture(_.TEXTURE_2D,null))}function createBufferFromOutputTexture(_,$,_e,et){const tt=_.createBuffer();callAndCheck(_,()=>_.bindBuffer(_.PIXEL_PACK_BUFFER,tt));const it=4*4*$*_e;return callAndCheck(_,()=>_.bufferData(_.PIXEL_PACK_BUFFER,it,_.STREAM_READ)),callAndCheck(_,()=>_.readPixels(0,0,_e,$,_.RGBA,_.FLOAT,0)),callAndCheck(_,()=>_.bindBuffer(_.PIXEL_PACK_BUFFER,null)),tt}function downloadFloat32MatrixFromBuffer(_,$,_e){const et=_,tt=new Float32Array(_e);return et.bindBuffer(et.PIXEL_PACK_BUFFER,$),et.getBufferSubData(et.PIXEL_PACK_BUFFER,0,tt),et.bindBuffer(et.PIXEL_PACK_BUFFER,null),tt}function downloadByteEncodedFloatMatrixFromOutputTexture(_,$,_e,et){const[tt,rt]=getUnpackedMatrixTextureShapeWidthHeight($,_e),nt=4,it=new Uint8Array(getUnpackedArraySizeFromMatrixSize($*_e,nt));return callAndCheck(_,()=>_.readPixels(0,0,tt,rt,et.downloadTextureFormat,_.UNSIGNED_BYTE,it)),new Float32Array(it.buffer)}function downloadPackedMatrixFromBuffer(_,$,_e,et,tt,rt,nt,it){const st=_,at=new Float32Array(getPackedRGBAArraySizeFromMatrixShape(rt,nt));return st.bindBuffer(st.PIXEL_PACK_BUFFER,$),st.getBufferSubData(st.PIXEL_PACK_BUFFER,0,at),st.bindBuffer(st.PIXEL_PACK_BUFFER,null),at}function downloadMatrixFromPackedOutputTexture(_,$,_e){const et=new Float32Array($*_e*4);return callAndCheck(_,()=>_.readPixels(0,0,_e,$,_.RGBA,_.FLOAT,et)),et}const gpgpu_util=Object.freeze(Object.defineProperty({__proto__:null,bindVertexProgramAttributeStreams,createBufferFromOutputTexture,createFloat16MatrixTexture,createFloat16PackedMatrixTexture,createFloat32MatrixTexture,createIndexBuffer,createPackedMatrixTexture,createUnsignedBytesMatrixTexture,createVertexBuffer,createVertexShader,downloadByteEncodedFloatMatrixFromOutputTexture,downloadFloat32MatrixFromBuffer,downloadMatrixFromPackedOutputTexture,downloadPackedMatrixFromBuffer,getInternalFormatForFloat16MatrixTexture,getInternalFormatForFloat16PackedMatrixTexture,getInternalFormatForFloat32MatrixTexture,getInternalFormatForPackedMatrixTexture,getInternalFormatForUnsignedBytesMatrixTexture,uploadDenseMatrixToTexture,uploadPixelDataToTexture},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GPGPUContext{constructor($){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const _e=env().getNumber("WEBGL_VERSION");if($!=null?(this.gl=$,setWebGLContext(_e,$)):this.gl=getWebGLContext(_e),$=this.gl,env().getNumber("WEBGL_VERSION")===2){const rt=$;this.createVertexArray=()=>callAndCheck(rt,()=>rt.createVertexArray()),this.bindVertexArray=nt=>callAndCheck(rt,()=>rt.bindVertexArray(nt)),this.deleteVertexArray=nt=>callAndCheck(rt,()=>rt.deleteVertexArray(nt)),this.getVertexArray=()=>callAndCheck(rt,()=>rt.getParameter(rt.VERTEX_ARRAY_BINDING))}else if($!=null){const rt=$.getExtension("OES_vertex_array_object");if(rt==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>callAndCheck($,()=>rt.createVertexArrayOES()),this.bindVertexArray=nt=>callAndCheck($,()=>rt.bindVertexArrayOES(nt)),this.deleteVertexArray=nt=>callAndCheck($,()=>rt.deleteVertexArrayOES(nt)),this.getVertexArray=()=>callAndCheck($,()=>$.getParameter(rt.VERTEX_ARRAY_BINDING_OES))}let et="WEBGL_color_buffer_float";const tt="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),env().getNumber("WEBGL_VERSION")===1){const rt="OES_texture_float",nt="OES_texture_half_float";if(this.textureFloatExtension=getExtensionOrThrow(this.gl,rt),hasExtension(this.gl,nt))this.textureHalfFloatExtension=getExtensionOrThrow(this.gl,nt);else if(env().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(et),hasExtension(this.gl,tt))this.colorBufferHalfFloatExtension=getExtensionOrThrow(this.gl,tt);else if(env().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(et="EXT_color_buffer_float",hasExtension(this.gl,et))this.colorBufferFloatExtension=this.gl.getExtension(et);else if(hasExtension(this.gl,tt))this.colorBufferHalfFloatExtension=this.gl.getExtension(tt);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=createVertexBuffer(this.gl),this.indexBuffer=createIndexBuffer(this.gl),this.framebuffer=createFramebuffer(this.gl),this.textureConfig=getTextureConfig(this.gl,this.textureHalfFloatExtension)}get debug(){return env().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const $=this.gl;callAndCheck($,()=>$.finish()),callAndCheck($,()=>$.bindFramebuffer($.FRAMEBUFFER,null)),callAndCheck($,()=>$.deleteFramebuffer(this.framebuffer)),callAndCheck($,()=>$.bindBuffer($.ARRAY_BUFFER,null)),callAndCheck($,()=>$.bindBuffer($.ELEMENT_ARRAY_BUFFER,null)),callAndCheck($,()=>$.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture($,_e){return this.throwIfDisposed(),createFloat32MatrixTexture(this.gl,$,_e,this.textureConfig)}createFloat16MatrixTexture($,_e){return this.throwIfDisposed(),createFloat16MatrixTexture(this.gl,$,_e,this.textureConfig)}createUnsignedBytesMatrixTexture($,_e){return this.throwIfDisposed(),createUnsignedBytesMatrixTexture(this.gl,$,_e,this.textureConfig)}uploadPixelDataToTexture($,_e){this.throwIfDisposed(),uploadPixelDataToTexture(this.gl,$,_e)}uploadDenseMatrixToTexture($,_e,et,tt){this.throwIfDisposed(),uploadDenseMatrixToTexture(this.gl,$,_e,et,tt,this.textureConfig)}createFloat16PackedMatrixTexture($,_e){return this.throwIfDisposed(),createFloat16PackedMatrixTexture(this.gl,$,_e,this.textureConfig)}createPackedMatrixTexture($,_e){return this.throwIfDisposed(),createPackedMatrixTexture(this.gl,$,_e,this.textureConfig)}deleteMatrixTexture($){this.throwIfDisposed(),this.outputTexture===$&&(unbindColorTextureFromFramebuffer(this.gl,this.framebuffer),this.outputTexture=null),callAndCheck(this.gl,()=>this.gl.deleteTexture($))}downloadByteEncodedFloatMatrixFromOutputTexture($,_e,et){return this.downloadMatrixDriver($,()=>downloadByteEncodedFloatMatrixFromOutputTexture(this.gl,_e,et,this.textureConfig))}downloadPackedMatrixFromBuffer($,_e,et,tt,rt,nt){return downloadPackedMatrixFromBuffer(this.gl,$,_e,et,tt,rt,nt,this.textureConfig)}downloadFloat32MatrixFromBuffer($,_e){return downloadFloat32MatrixFromBuffer(this.gl,$,_e)}createBufferFromTexture($,_e,et){this.bindTextureToFrameBuffer($);const tt=createBufferFromOutputTexture(this.gl,_e,et,this.textureConfig);return this.unbindTextureToFrameBuffer(),tt}createAndWaitForFence(){const $=this.createFence(this.gl);return this.pollFence($)}createFence($){let _e,et;if(env().getBool("WEBGL_FENCE_API_ENABLED")){const tt=$,rt=tt.fenceSync(tt.SYNC_GPU_COMMANDS_COMPLETE,0);$.flush(),et=()=>{const nt=tt.clientWaitSync(rt,0,0);return nt===tt.ALREADY_SIGNALED||nt===tt.CONDITION_SATISFIED},_e=rt}else env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(_e=this.beginQuery(),this.endQuery(),et=()=>this.isQueryAvailable(_e,env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):et=()=>!0;return{query:_e,isFencePassed:et}}downloadMatrixFromPackedTexture($,_e,et){return this.downloadMatrixDriver($,()=>downloadMatrixFromPackedOutputTexture(this.gl,_e,et))}createProgram($){this.throwIfDisposed();const _e=this.gl;this.vertexShader==null&&(this.vertexShader=createVertexShader(_e));const et=createProgram(_e);callAndCheck(_e,()=>_e.attachShader(et,this.vertexShader)),callAndCheck(_e,()=>_e.attachShader(et,$)),linkProgram(_e,et);const tt=Object.assign(et,{vao:this.createVertexArray()});return this.debug&&validateProgram(_e,tt),tt}buildVao($){this.setProgram($),this.bindVertexArray($.vao);const _e=this.gl;callAndCheck(_e,()=>_e.bindBuffer(_e.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),bindVertexProgramAttributeStreams(_e,$,this.vertexBuffer)}deleteProgram($){this.throwIfDisposed(),$===this.program&&(this.program=null),$!=null&&(callAndCheck(this.gl,()=>this.gl.deleteProgram($)),this.deleteVertexArray($.vao))}setProgram($){this.throwIfDisposed(),this.program=$,this.program!=null&&this.debug&&validateProgram(this.gl,this.program),callAndCheck(this.gl,()=>this.gl.useProgram($))}getUniformLocation($,_e,et=!0){return this.throwIfDisposed(),et?getProgramUniformLocationOrThrow(this.gl,$,_e):getProgramUniformLocation(this.gl,$,_e)}getAttributeLocation($,_e){return this.throwIfDisposed(),callAndCheck(this.gl,()=>this.gl.getAttribLocation($,_e))}getUniformLocationNoThrow($,_e){return this.throwIfDisposed(),this.gl.getUniformLocation($,_e)}setInputMatrixTexture($,_e,et){this.throwIfDisposed(),this.throwIfNoProgram(),bindTextureToProgramUniformSampler(this.gl,$,_e,et)}setOutputMatrixTexture($,_e,et){this.setOutputMatrixTextureDriver($,et,_e)}setOutputPackedMatrixTexture($,_e,et){this.throwIfDisposed();const[tt,rt]=getPackedMatrixTextureShapeWidthHeight(_e,et);this.setOutputMatrixTextureDriver($,tt,rt)}setOutputMatrixWriteRegion($,_e,et,tt){this.setOutputMatrixWriteRegionDriver(et,$,tt,_e)}setOutputPackedMatrixWriteRegion($,_e,et,tt){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&validateProgram(this.gl,this.program),validateFramebuffer(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const $=this.gl;if(this.debug){const _e=this.getVertexArray();console.assert(_e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}callAndCheck($,()=>$.drawElements($.TRIANGLES,6,$.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),callAndCheck(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=getExtensionOrThrow(this.gl,env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const et=this.gl,tt=this.getQueryTimerExtensionWebGL2(),rt=et.createQuery();return et.beginQuery(tt.TIME_ELAPSED_EXT,rt),rt}const $=this.getQueryTimerExtensionWebGL1(),_e=$.createQueryEXT();return $.beginQueryEXT($.TIME_ELAPSED_EXT,_e),_e}endQuery(){if(env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const _e=this.gl,et=this.getQueryTimerExtensionWebGL2();_e.endQuery(et.TIME_ELAPSED_EXT);return}const $=this.getQueryTimerExtensionWebGL1();$.endQueryEXT($.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime($){return await repeatedTry(()=>this.disposed||this.isQueryAvailable($,env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime($,env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime($,_e){if(_e===0)return null;if(_e===2){const et=this.gl;return et.getQueryParameter($,et.QUERY_RESULT)/1e6}else{const et=this.getQueryTimerExtensionWebGL1();return et.getQueryObjectEXT($,et.QUERY_RESULT_EXT)/1e6}}isQueryAvailable($,_e){if(_e===0)return!0;if(_e===2){const et=this.gl,tt=this.getQueryTimerExtensionWebGL2(),rt=et.getQueryParameter($,et.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(tt.GPU_DISJOINT_EXT)),rt&&!this.disjoint}else{const et=this.getQueryTimerExtensionWebGL1(),tt=et.getQueryObjectEXT($,et.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(et.GPU_DISJOINT_EXT)),tt&&!this.disjoint}}pollFence($){return new Promise(_e=>{this.addItemToPoll(()=>$.isFencePassed(),()=>_e())})}pollItems(){const $=linearSearchLastTrue(this.itemsToPoll.map(_e=>_e.isDoneFn));for(let _e=0;_e<=$;++_e){const{resolveFn:et}=this.itemsToPoll[_e];et()}this.itemsToPoll=this.itemsToPoll.slice($+1)}addItemToPoll($,_e){if(this.itemsToPoll.push({isDoneFn:$,resolveFn:_e}),this.itemsToPoll.length>1)return;let et;"setTimeoutCustom"in env().platform&&(et=env().platform.setTimeoutCustom.bind(env().platform)),repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,et)}bindTextureToFrameBuffer($){this.throwIfDisposed(),bindColorTextureToFramebuffer(this.gl,$,this.framebuffer),this.debug&&validateFramebuffer(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(bindColorTextureToFramebuffer(this.gl,this.outputTexture,this.framebuffer),this.debug&&validateFramebuffer(this.gl)):unbindColorTextureFromFramebuffer(this.gl,this.framebuffer)}downloadMatrixDriver($,_e){this.bindTextureToFrameBuffer($);const et=_e();return this.unbindTextureToFrameBuffer(),et}setOutputMatrixTextureDriver($,_e,et){this.throwIfDisposed();const tt=this.gl;bindColorTextureToFramebuffer(tt,$,this.framebuffer),this.debug&&validateFramebuffer(tt),this.outputTexture=$,callAndCheck(tt,()=>tt.viewport(0,0,_e,et)),callAndCheck(tt,()=>tt.scissor(0,0,_e,et))}setOutputMatrixWriteRegionDriver($,_e,et,tt){this.throwIfDisposed(),callAndCheck(this.gl,()=>this.gl.scissor($,_e,et,tt))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function linearSearchLastTrue(_){let $=0;for(;$<_.length&&_[$]();++$);return $-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:addImplCPU,bincountImpl:bincountImplCPU,bincountReduceImpl:bincountReduceImplCPU,bitwiseAndImpl:bitwiseAndImplCPU,castImpl:castImplCPU,ceilImpl:ceilImplCPU,concatImpl:concatImplCPU,equalImpl:equalImplCPU,expImpl:expImplCPU,expm1Impl:expm1ImplCPU,floorImpl:floorImplCPU,gatherNdImpl:gatherNdImplCPU,gatherV2Impl:gatherV2ImplCPU,greaterImpl:greaterImplCPU,greaterEqualImpl:greaterEqualImplCPU,lessImpl:lessImplCPU,lessEqualImpl:lessEqualImplCPU,linSpaceImpl:linSpaceImplCPU,logImpl:logImplCPU,maxImpl:maxImplCPU,maximumImpl:maximumImplCPU,minimumImpl:minimumImplCPU,multiplyImpl:multiplyImplCPU,negImpl:negImplCPU,notEqualImpl:notEqualImplCPU,prodImpl:prodImplCPU,raggedGatherImpl:raggedGatherImplCPU,raggedRangeImpl:raggedRangeImplCPU,raggedTensorToTensorImpl:raggedTensorToTensorImplCPU,rangeImpl:rangeImplCPU,rsqrtImpl:rsqrtImplCPU,scatterImpl:scatterImplCPU,sigmoidImpl:sigmoidImplCPU,simpleAbsImpl:simpleAbsImplCPU,sliceImpl:sliceImplCPU,sparseFillEmptyRowsImpl:sparseFillEmptyRowsImplCPU,sparseReshapeImpl:sparseReshapeImplCPU,sparseSegmentReductionImpl:sparseSegmentReductionImplCPU,sqrtImpl:sqrtImplCPU,staticRegexReplaceImpl:staticRegexReplaceImplCPU,stridedSliceImpl:stridedSliceImplCPU,stringNGramsImpl:stringNGramsImplCPU,stringSplitImpl:stringSplitImplCPU,stringToHashBucketFastImpl:stringToHashBucketFastImplCPU,subImpl:subImplCPU,tileImpl:tileImplCPU,topKImpl:topKImplCPU,transposeImpl:transposeImplCPU,uniqueImpl:uniqueImplCPU}=shared;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getVecChannels(_,$){return["x","y","z","w","u","v"].slice(0,$).map(_e=>`${_}.${_e}`)}function getChannels(_,$){return $===1?[_]:getVecChannels(_,$)}function getSourceCoords$2(_,$){if(_===1)return"rc";let _e="";for(let et=0;et<_;et++)_e+=$[et],et<_-1&&(_e+=",");return _e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PackProgram{constructor($){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=$,this.rank=$.length,this.enableShapeUniforms=useShapeUniforms(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const _e=getChannels("rc",this.rank),et=getCoordsDataType(this.rank),tt=this.getOutOfBoundsCondition(_e),rt=this.getSetup(_e),nt=this.getOutput(_e);this.userCode=`
        void main() {
          ${et} rc = getOutputCoords();

          if(${tt}) {
            setOutput(vec4(0));
          } else {
            ${rt}

            setOutput(vec4(${nt}));
          }
        }
      `}}getSourceCoordsArr($){const _e=[];for(let et=0;et<=1;et++)for(let tt=0;tt<=1;tt++){let rt=`${et===0?"r":"rp1"}, ${tt===0?"c":"cp1"}`;for(let nt=2;nt<this.rank;nt++)rt=`${$[$.length-1-nt]},`+rt;_e.push(rt)}return _e}getOutOfBoundsCondition($){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let _e="";for(let et=this.rank-2;et<this.rank;et++)_e+=`${$[et]} >= ${this.enableShapeUniforms?`outShape[${et}]`:this.outputShape[et]}`,et<this.rank-1&&(_e+="||");return _e}getSetup($){if(this.rank===1)return"";const _e=$.slice(-2),et=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],tt=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${_e[0]};
      int c = ${_e[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${et};
      bool rEdge = rp1 >= ${tt};
    `}getOutput($){const _e=this.getSourceCoordsArr($);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${_e[0]}),
            cEdge ? 0. : getA(${_e[1]}),
            rEdge ? 0. : getA(${_e[2]}),
            rEdge || cEdge ? 0. : getA(${_e[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ReshapePackedProgram{constructor($,_e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=$,this.enableShapeUniforms=useShapeUniforms(this.outputShape.length);let et="";for(let tt=0;tt<4;tt++){let rt="thisRC = rc;";tt%2===1&&(rt+="thisRC.z += 1;"),tt>1&&(rt+="thisRC.y += 1;"),et+=`
        ${rt}
        ${tt>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${tt}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${tt>0?"}":""}
      `}this.userCode=`
      ${getReshapedInputCoords(_e,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?getFlatIndexFrom3DOutput():getFlatIndexFrom3D($)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":$[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":$[2]};

        ${et}

        setOutput(result);
      }
    `}}function getReshapedInputCoords(_,$){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${$?getLogicalCoordinatesFromFlatIndexByUniform(["r","c","d"],"inputShape"):getLogicalCoordinatesFromFlatIndex(["r","c","d"],_)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TextureManager{constructor($){this.gpgpu=$,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture($,_e,et){const tt=getPhysicalFromLogicalTextureType(_e,et),rt=getKeyFromTextureShape($,tt,et);rt in this.freeTextures||(this.freeTextures[rt]=[]),rt in this.usedTextures||(this.usedTextures[rt]=[]);const nt=computeBytes($,tt,this.gpgpu.gl,this.gpgpu.textureConfig,et);if(this.freeTextures[rt].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=nt,this.log();const st=this.freeTextures[rt].pop();return this.usedTextures[rt].push(st),st}let it;return tt===PhysicalTextureType.PACKED_2X2_FLOAT32?it=this.gpgpu.createPackedMatrixTexture($[0],$[1]):tt===PhysicalTextureType.PACKED_2X2_FLOAT16?it=this.gpgpu.createFloat16PackedMatrixTexture($[0],$[1]):tt===PhysicalTextureType.UNPACKED_FLOAT32?it=this.gpgpu.createFloat32MatrixTexture($[0],$[1]):tt===PhysicalTextureType.UNPACKED_FLOAT16?it=this.gpgpu.createFloat16MatrixTexture($[0],$[1]):tt===PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE&&(it=this.gpgpu.createUnsignedBytesMatrixTexture($[0],$[1])),this.usedTextures[rt].push(it),this.numUsedTextures++,this._numBytesAllocated+=nt,this.log(),it}releaseTexture($,_e,et,tt){if(this.freeTextures==null)return;const rt=getPhysicalFromLogicalTextureType(et,tt),nt=getKeyFromTextureShape(_e,rt,tt);nt in this.freeTextures||(this.freeTextures[nt]=[]);const it=computeBytes(_e,rt,this.gpgpu.gl,this.gpgpu.textureConfig,tt),st=env().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");st!==-1&&this._numBytesAllocated>st?(this.gpgpu.deleteMatrixTexture($.texture),this._numBytesAllocated-=it):(this.freeTextures[nt].push($),this.numFreeTextures++,this._numBytesFree+=it),this.numUsedTextures--;const at=this.usedTextures[nt],ot=at&&at.indexOf($);if(ot==null||ot<0)throw new Error("Cannot release a texture that was never provided by this texture manager");at[ot]=at[at.length-1],at.pop(),this.log()}log(){if(!this.logEnabled)return;const $=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${$})`);const _e=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*_e)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const $ in this.freeTextures)this.freeTextures[$].forEach(_e=>{this.gpgpu.deleteMatrixTexture(_e.texture)});for(const $ in this.usedTextures)this.usedTextures[$].forEach(_e=>{this.gpgpu.deleteMatrixTexture(_e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function numBytesForInternalFormat(_,$){const _e=_;if($===_e.R32F)return 4;if($===_e.R16F)return 2;if($===_e.RGBA32F)return 16;if($===_.RGBA)return 16;if($===_e.RGBA16F)return 8;if($===_e.RGBA8)return 4;throw new Error(`Unknown internal format ${$}`)}function computeBytes(_,$,_e,et,tt){const rt=internalFormatForPhysicalTexType($,et);let nt;if(tt){const[st,at]=getPackedMatrixTextureShapeWidthHeight(_[0],_[1]);nt=st*at}else{const[st,at]=getUnpackedMatrixTextureShapeWidthHeight(_[0],_[1]);nt=st*at}const it=numBytesForInternalFormat(_e,rt);return nt*it}function internalFormatForPhysicalTexType(_,$){switch(_){case PhysicalTextureType.PACKED_2X2_FLOAT32:return getInternalFormatForPackedMatrixTexture($);case PhysicalTextureType.PACKED_2X2_FLOAT16:return getInternalFormatForFloat16PackedMatrixTexture($);case PhysicalTextureType.UNPACKED_FLOAT32:return getInternalFormatForFloat32MatrixTexture($);case PhysicalTextureType.UNPACKED_FLOAT16:return getInternalFormatForFloat16MatrixTexture($);case PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE:return getInternalFormatForUnsignedBytesMatrixTexture($);default:throw new Error(`Unknown physical texture type ${_}`)}}function getPhysicalTextureForRendering(_){return env().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?_?PhysicalTextureType.PACKED_2X2_FLOAT32:PhysicalTextureType.UNPACKED_FLOAT32:_?PhysicalTextureType.PACKED_2X2_FLOAT16:PhysicalTextureType.UNPACKED_FLOAT16}function getPhysicalFromLogicalTextureType(_,$){if(_===TextureUsage.UPLOAD)return PhysicalTextureType.PACKED_2X2_FLOAT32;if(_===TextureUsage.RENDER||_==null)return getPhysicalTextureForRendering($);if(_===TextureUsage.DOWNLOAD||_===TextureUsage.PIXELS)return PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${_}`)}function getKeyFromTextureShape(_,$,_e){return`${_[0]}_${_[1]}_${$}_${_e}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UnaryOpProgram{constructor($,_e){this.variableNames=["A"],this.outputShape=$,this.enableShapeUniforms=useShapeUniforms(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${_e}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const CHECK_NAN_SNIPPET$1="if (isnan(x)) return x;",LINEAR$1="return x;",ABS$1="return abs(x);",ELU$2="return (x >= 0.0) ? x : (exp(x) - 1.0);",RELU$2=CHECK_NAN_SNIPPET$1+`
  return (x < 0.0) ? 0.0 : x;
`,RELU6$2=CHECK_NAN_SNIPPET$1+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,CLONE="return x;",SIGMOID$2="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LINEAR="return x;",ELU$1=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,RELU$1=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,RELU6$1=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,SIGMOID$1="return 1.0 / (1.0 + exp(-1.0 * x));";class UnaryOpPackedProgram{constructor($,_e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=$,this.enableShapeUniforms=useShapeUniforms(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${_e}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UnpackProgram{constructor($){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=$,this.enableShapeUniforms=useShapeUniforms(this.outputShape.length);const _e=$.length,et=getChannels("rc",_e),tt=getCoordsDataType(_e),rt=getSourceCoords$2(_e,et),nt=et.slice(-2),it=_e<=1?"rc":`vec2(${nt.join(",")})`;this.userCode=`
      void main() {
        ${tt} rc = getOutputCoords();
        vec4 packedInput = getA(${rt});

        setOutput(getChannel(packedInput, ${it}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const whereImpl=whereImpl$2,EPSILON_FLOAT32=1e-7,EPSILON_FLOAT16=1e-4,binaryCaches={};function getBinaryCache(_){return _ in binaryCaches||(binaryCaches[_]={}),binaryCaches[_]}const CPU_HANDOFF_SIZE_THRESHOLD=env().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),BEFORE_PAGING_CONSTANT=600;function numMBBeforeWarning(){return env().global.screen==null?1024:env().global.screen.height*env().global.screen.width*window.devicePixelRatio*BEFORE_PAGING_CONSTANT/1024/1024}class MathBackendWebGL extends KernelBackend{nextDataId(){return MathBackendWebGL.nextDataId++}constructor($){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!env().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let _e;if($!=null){if($ instanceof GPGPUContext)_e=$;else{const et=getWebGLContext(env().getNumber("WEBGL_VERSION"),$);_e=new GPGPUContext(et)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const et=getWebGLContext(env().getNumber("WEBGL_VERSION"));_e=new GPGPUContext(et),this.binaryCache=getBinaryCache(env().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=_e,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new TextureManager(this.gpgpu),this.numMBBeforeWarning=numMBBeforeWarning(),this.texData=new DataStorage(this,engine())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture($,_e,et,tt,rt,nt){const it=this.makeTensorInfo(_e,et),st=this.texData.get(it.dataId);st.isPacked=!1,st.texture={texture:$,texShape:[tt,rt]},st.texShape=[tt,rt];const at=getShapeAs3D(_e),ot=new EncodeMatrixProgram(at,!1,nt),dt=this.runWebGLProgram(ot,[it],et,[[tt,rt]]);return dt.shape=_e,st.texture=null,this.disposeIntermediateTensorInfo(it),dt.dataId}write($,_e,et){if((env().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||env().getBool("DEBUG"))&&this.checkNumericalProblems($),et==="complex64"&&$!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const tt={id:this.nextDataId()};return this.texData.set(tt,{shape:_e,dtype:et,values:$,usage:TextureUsage.UPLOAD,refCount:1}),tt}refCount($){return this.texData.has($)?this.texData.get($).refCount:0}incRef($){const _e=this.texData.get($);_e.refCount++}decRef($){if(this.texData.has($)){const _e=this.texData.get($);_e.refCount--}}move($,_e,et,tt,rt){if(env().getBool("DEBUG")&&this.checkNumericalProblems(_e),tt==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set($,{shape:et,dtype:tt,values:_e,usage:TextureUsage.UPLOAD,refCount:rt})}disposeIntermediateTensorInfo($){this.disposeData($.dataId)}readSync($){const _e=this.texData.get($),{values:et,dtype:tt,complexTensorInfos:rt,slice:nt,shape:it,isPacked:st}=_e;if(nt!=null){let ht;st?ht=new UnaryOpPackedProgram(it,CLONE):ht=new UnaryOpProgram(it,CLONE);const yt=this.runWebGLProgram(ht,[{dataId:$,shape:it,dtype:tt}],tt),vt=this.readSync(yt.dataId);return this.disposeIntermediateTensorInfo(yt),vt}if(et!=null)return this.convertAndCacheOnCPU($);if(tt==="string")return et;const at=this.activeTimers!=null;let ot;at&&(ot=now$2());let dt;if(tt==="complex64"){const ht=this.readSync(rt.real.dataId),yt=this.readSync(rt.imag.dataId);dt=mergeRealAndImagArrays(ht,yt)}else dt=this.getValuesFromTexture($);return at&&(this.downloadWaitMs+=now$2()-ot),this.convertAndCacheOnCPU($,dt)}async read($){if(this.pendingRead.has($)){const vt=this.pendingRead.get($);return new Promise(xt=>vt.push(xt))}const _e=this.texData.get($),{values:et,shape:tt,slice:rt,dtype:nt,complexTensorInfos:it,isPacked:st}=_e;if(rt!=null){let vt;st?vt=new UnaryOpPackedProgram(tt,CLONE):vt=new UnaryOpProgram(tt,CLONE);const xt=this.runWebGLProgram(vt,[{dataId:$,shape:tt,dtype:nt}],nt),wt=this.read(xt.dataId);return this.disposeIntermediateTensorInfo(xt),wt}if(et!=null)return this.convertAndCacheOnCPU($);if(env().getBool("DEBUG")&&!env().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&env().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let at=null,ot;if(nt!=="complex64"&&env().get("WEBGL_BUFFER_SUPPORTED")){ot=this.decode($);const vt=this.texData.get(ot.dataId);at=this.gpgpu.createBufferFromTexture(vt.texture.texture,...getDenseTexShape(tt))}this.pendingRead.set($,[]),nt!=="complex64"&&await this.gpgpu.createAndWaitForFence();let dt;if(nt==="complex64"){const vt=await Promise.all([this.read(it.real.dataId),this.read(it.imag.dataId)]),xt=vt[0],wt=vt[1];dt=mergeRealAndImagArrays(xt,wt)}else if(at==null)dt=this.getValuesFromTexture($);else{const vt=sizeFromShape(tt);dt=this.gpgpu.downloadFloat32MatrixFromBuffer(at,vt)}if(ot!=null&&this.disposeIntermediateTensorInfo(ot),at!=null){const vt=this.gpgpu.gl;callAndCheck(vt,()=>vt.deleteBuffer(at))}const ht=this.convertAndCacheOnCPU($,dt),yt=this.pendingRead.get($);return this.pendingRead.delete($),yt.forEach(vt=>vt(ht)),this.pendingDisposal.has($)&&(this.pendingDisposal.delete($),this.disposeData($)&&engine().removeDataId($,this),this.pendingDeletes--),ht}readToGPU($,_e={}){const et=this.texData.get($),{values:tt,shape:rt,slice:nt,dtype:it,isPacked:st,texture:at}=et;if(it==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(nt!=null){let yt;st?yt=new UnaryOpPackedProgram(rt,CLONE):yt=new UnaryOpProgram(rt,CLONE);const vt=this.runWebGLProgram(yt,[{dataId:$,shape:rt,dtype:it}],it),xt=this.readToGPU(vt,_e);return this.disposeIntermediateTensorInfo(vt),xt}if(at==null)throw tt!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const ot=this.decode($,_e.customTexShape),dt=engine().makeTensorFromTensorInfo(ot),ht=this.texData.get(ot.dataId);return Object.assign({tensorRef:dt},ht.texture)}bufferSync($){const _e=this.readSync($.dataId);if($.dtype==="string")try{const et=_e.map(tt=>decodeString(tt));return buffer$1($.shape,$.dtype,et)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return buffer$1($.shape,$.dtype,_e)}checkNumericalProblems($){if($!=null)for(let _e=0;_e<$.length;_e++){const et=$[_e];if(!canBeRepresented(et))throw env().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${et} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${et} cannot be represented on this device.`)}}getValuesFromTexture($){const{shape:_e,dtype:et,isPacked:tt}=this.texData.get($),rt=sizeFromShape(_e);if(env().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const ht=this.decode($),yt=this.texData.get(ht.dataId),vt=this.gpgpu.downloadMatrixFromPackedTexture(yt.texture.texture,...getDenseTexShape(_e)).subarray(0,rt);return this.disposeIntermediateTensorInfo(ht),vt}const nt=env().getBool("WEBGL_PACK")&&tt===!0,it=nt?getShapeAs3D(_e):_e,st=nt?new EncodeFloatPackedProgram(it):new EncodeFloatProgram(it),at=this.runWebGLProgram(st,[{shape:it,dtype:et,dataId:$}],"float32"),ot=this.texData.get(at.dataId),dt=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(ot.texture.texture,ot.texShape[0],ot.texShape[1]).subarray(0,rt);return this.disposeIntermediateTensorInfo(at),dt}timerAvailable(){return env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time($){const _e=this.activeTimers,et=[];let tt=!1;this.programTimersStack==null?(this.programTimersStack=et,tt=!0):this.activeTimers.push(et),this.activeTimers=et,$();const rt=flatten$2(this.activeTimers.map(st=>st.query)).filter(st=>st!=null),nt=flatten$2(this.activeTimers.map(st=>st.name)).filter(st=>st!=null);this.activeTimers=_e,tt&&(this.programTimersStack=null);const it={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const st=await Promise.all(rt);it.kernelMs=sum$3(st),it.getExtraProfileInfo=()=>st.map((at,ot)=>({name:nt[ot],ms:at})).map(at=>`${at.name}: ${at.ms}`).join(", ")}else it.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,it})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:now$2(),endMs:null}}endTimer($){return env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),$):($.endMs=now$2(),$)}async getQueryTime($){if(env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime($);const _e=$;return _e.endMs-_e.startMs}disposeData($,_e=!1){if(this.pendingDisposal.has($))return!1;if(!this.texData.has($))return!0;if(_e?this.texData.get($).refCount=0:this.texData.get($).refCount--,!_e&&this.texData.get($).refCount>0)return!1;if(this.pendingRead.has($))return this.pendingDisposal.add($),this.pendingDeletes++,!1;this.releaseGPUData($);const{complexTensorInfos:et}=this.texData.get($);return et!=null&&(this.disposeData(et.real.dataId,_e),this.disposeData(et.imag.dataId,_e)),this.texData.delete($),!0}releaseGPUData($){const{texture:_e,dtype:et,texShape:tt,usage:rt,isPacked:nt,slice:it}=this.texData.get($),st=it&&it.origDataId||$,at=this.dataRefCount.get(st);at>1?this.dataRefCount.set(st,at-1):(this.dataRefCount.delete(st),_e!=null&&(this.numBytesInGPU-=this.computeBytes(tt,et),this.textureManager.releaseTexture(_e,tt,rt,nt)));const ot=this.texData.get($);ot.texture=null,ot.texShape=null,ot.isPacked=!1,ot.slice=null}getTexture($){return this.uploadToGPU($),this.texData.get($).texture.texture}getDataInfo($){return this.texData.get($)}shouldExecuteOnCPU($,_e=CPU_HANDOFF_SIZE_THRESHOLD){return env().getBool("WEBGL_CPU_FORWARD")&&$.every(et=>this.texData.get(et.dataId).texture==null&&sizeFromShape(et.shape)<_e)}getGPGPUContext(){return this.gpgpu}where($){warn$1("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const _e=$.dataSync();return whereImpl($.shape,_e)}packedUnaryOp($,_e,et){const tt=new UnaryOpPackedProgram($.shape,_e),rt=this.compileAndRun(tt,[$],et);return engine().makeTensorFromTensorInfo(rt)}abs($){if(this.shouldExecuteOnCPU([$])&&$.dtype!=="complex64"){const tt=simpleAbsImplCPU(this.texData.get($.dataId).values);return this.makeOutput($.shape,$.dtype,tt)}if(env().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp($,ABS$1,$.dtype);const _e=new UnaryOpProgram($.shape,ABS$1),et=this.compileAndRun(_e,[$]);return engine().makeTensorFromTensorInfo(et)}makeTensorInfo($,_e,et){let tt;if(_e==="string"&&et!=null&&et.length>0&&isString$2(et[0])){const rt=et.map(nt=>encodeString(nt));tt=this.write(rt,$,_e)}else tt=this.write(et,$,_e);return this.texData.get(tt).usage=null,{dataId:tt,shape:$,dtype:_e}}makeOutput($,_e,et){return engine().makeTensorFromTensorInfo(this.makeTensorInfo($,_e,et),this)}unpackTensor($){const _e=new UnpackProgram($.shape);return this.runWebGLProgram(_e,[$],$.dtype)}packTensor($){const _e=new PackProgram($.shape);return this.runWebGLProgram(_e,[$],$.dtype,null,!0)}packedReshape($,_e){const et=[getBatchDim($.shape),...getRowsCols($.shape)],tt={dtype:$.dtype,shape:et,dataId:$.dataId},rt=[getBatchDim(_e),...getRowsCols(_e)],nt=new ReshapePackedProgram(rt,et),it=!0,st=[et],at=this.runWebGLProgram(nt,[tt],$.dtype,st,it);return{dataId:at.dataId,shape:_e,dtype:at.dtype}}decode($,_e){const et=this.texData.get($),{isPacked:tt,shape:rt,dtype:nt}=et;if(_e!=null){const ht=sizeFromShape(rt),yt=_e[0]*_e[1]*4;assert$1(ht<=yt,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const it=getShapeAs3D(rt);let st;tt?st=new DecodeMatrixPackedProgram(it):st=new DecodeMatrixProgram(it);const at=!0,ot=[_e??getDenseTexShape(it)],dt=this.runWebGLProgram(st,[{shape:it,dtype:nt,dataId:$}],nt,ot,at,_e);return{dtype:nt,shape:rt,dataId:dt.dataId}}runWebGLProgram($,_e,et,tt,rt=!1,nt){const it=this.makeTensorInfo($.outputShape,et),st=this.texData.get(it.dataId);if($.packedOutput&&(st.isPacked=!0),$.outPackingScheme===PackingScheme.DENSE){const Et=nt??getDenseTexShape($.outputShape);st.texShape=Et.map(At=>At*2)}if($.outTexUsage!=null&&(st.usage=$.outTexUsage),sizeFromShape(it.shape)===0)return st.values=getTypedArrayFromDType(it.dtype,0),it;const at=[],ot=_e.map(Et=>{if(Et.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let At=this.texData.get(Et.dataId);if(At.texture==null){if(!$.packedInputs&&sizeFromShape(Et.shape)<=env().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:Et.shape,texData:null,isUniform:!0,uniformValues:At.values};$.packedInputs&&(At.isPacked=!0,At.shape=Et.shape)}if(this.uploadToGPU(Et.dataId),!!At.isPacked!=!!$.packedInputs)Et=At.isPacked?this.unpackTensor(Et):this.packTensor(Et),at.push(Et),At=this.texData.get(Et.dataId);else if(At.isPacked&&!isReshapeFree(At.shape,Et.shape)){const jt=Et,kt=Et.shape;Et.shape=At.shape,Et=this.packedReshape(Et,kt),at.push(Et),At=this.texData.get(Et.dataId),jt.shape=kt}return{shape:Et.shape,texData:At,isUniform:!1}});this.uploadToGPU(it.dataId);const dt={shape:it.shape,texData:st,isUniform:!1},ht=makeShaderKey($,ot,dt),yt=this.getAndSaveBinary(ht,()=>compileProgram(this.gpgpu,$,ot,dt)),vt=this.activeTimers!=null;let xt;vt&&(xt=this.startTimer()),env().get("ENGINE_COMPILE_ONLY")||runProgram(this.gpgpu,yt,ot,dt,tt),at.forEach(Et=>this.disposeIntermediateTensorInfo(Et)),vt&&(xt=this.endTimer(xt),this.activeTimers.push({name:$.constructor.name,query:this.getQueryTime(xt)}));const wt=env().getNumber("WEBGL_FLUSH_THRESHOLD");if(wt>0){const Et=now$2();Et-this.lastGlFlushTime>wt&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=Et)}if(!env().getBool("WEBGL_LAZILY_UNPACK")&&st.isPacked&&rt===!1){const Et=this.unpackTensor(it);return this.disposeIntermediateTensorInfo(it),Et}return it}compileAndRun($,_e,et,tt,rt=!1){return et=et||_e[0].dtype,this.runWebGLProgram($,_e,et,tt,rt)}getAndSaveBinary($,_e){return $ in this.binaryCache||(this.binaryCache[$]=_e()),this.binaryCache[$]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(env().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(_e=>{this.gpgpu.deleteProgram(this.binaryCache[_e].webGLProgram),delete this.binaryCache[_e]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=tidy(()=>{if(!env().get("WEBGL_RENDER_FLOAT32_ENABLED")){const $=env().getBool("DEBUG");env().set("DEBUG",!1);const _e=this.abs(scalar(1e-8)).dataSync()[0];if(env().set("DEBUG",$),_e>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?EPSILON_FLOAT32:EPSILON_FLOAT16}uploadToGPU($){const _e=this.texData.get($),{shape:et,dtype:tt,values:rt,texture:nt,usage:it,isPacked:st}=_e;if(nt!=null)return;const at=this.activeTimers!=null;let ot;at&&(ot=now$2());let dt=_e.texShape;if(dt==null&&(dt=getTextureShapeFromLogicalShape(et,st),_e.texShape=dt),rt!=null){const ht=getShapeAs3D(et);let yt,vt=dt[1],xt=dt[0];const wt=rt instanceof Uint8Array||rt instanceof Uint8ClampedArray;(st||!wt)&&([vt,xt]=getPackedMatrixTextureShapeWidthHeight(dt[0],dt[1])),st?yt=new EncodeMatrixPackedProgram(ht,wt):yt=new EncodeMatrixProgram(ht,wt);const Et=wt?[xt,vt]:dt,At=this.makeTensorInfo(Et,tt),jt=this.texData.get(At.dataId);wt?jt.usage=TextureUsage.PIXELS:jt.usage=TextureUsage.UPLOAD,jt.texShape=Et,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(At.dataId),vt,xt,rt);const kt=[[xt,vt]],Bt=this.runWebGLProgram(yt,[At],tt,kt,!0),Gt=this.texData.get(Bt.dataId);_e.texShape=Gt.texShape,_e.isPacked=Gt.isPacked,_e.usage=Gt.usage,env().get("ENGINE_COMPILE_ONLY")?this.disposeData(Bt.dataId):(_e.texture=Gt.texture,_e.values=null,this.texData.delete(Bt.dataId)),this.disposeIntermediateTensorInfo(At),at&&(this.uploadWaitMs+=now$2()-ot)}else{const ht=this.acquireTexture(dt,it,tt,st);_e.texture=ht}}convertAndCacheOnCPU($,_e){const et=this.texData.get($),{dtype:tt}=et;return _e!=null&&(et.values=float32ToTypedArray(_e,tt)),et.values}acquireTexture($,_e,et,tt){if(this.numBytesInGPU+=this.computeBytes($,et),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const rt=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${rt} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture($,_e,tt)}computeBytes($,_e){return $[0]*$[1]*bytesPerElement(_e)}checkCompileCompletion(){for(const[,$]of Object.entries(this.binaryCache))this.checkCompletion_($)}async checkCompileCompletionAsync(){const $=[];if(this.gpgpu.parallelCompilationExtension){for(const[,_e]of Object.entries(this.binaryCache))$.push(this.checkCompletionAsync_(_e));return Promise.all($)}else{for(const[,_e]of Object.entries(this.binaryCache)){const et=new Promise(tt=>{try{this.checkCompletion_(_e),tt(!0)}catch(rt){throw rt}});$.push(et)}return Promise.all($)}}async checkCompletionAsync_($){return this.gpgpu.gl.getProgramParameter($.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_($):(await nextFrame(),this.checkCompletionAsync_($))}checkCompletion_($){if(this.gpgpu.gl.getProgramParameter($.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog($.webGLProgram)),this.gpgpu.gl.getShaderParameter($.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(logShaderSourceAndInfoLog($.source,this.gpgpu.gl.getShaderInfoLog($.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const $ of Object.values(this.binaryCache)){this.gpgpu.buildVao($.webGLProgram);const{variablesLocations:_e,customUniformLocations:et,infLoc:tt,nanLoc:rt,outShapeLocation:nt,outShapeStridesLocation:it,outTexShapeLocation:st}=getUniformLocations(this.gpgpu,$.program,$.webGLProgram);$.variablesLocations=_e,$.customUniformLocations=et,$.infLoc=tt,$.nanLoc=rt,$.outShapeLocation=nt,$.outShapeStridesLocation=it,$.outTexShapeLocation=st}}createTensorFromGPUData($,_e,et){$.channels=$.channels||"RGBA";const{texture:tt,height:rt,width:nt,channels:it}=$,st=engine().backend;if(!st.gpgpu.gl.isTexture(tt))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const at=st.writeTexture(tt,_e,et,rt,nt,it);return engine().makeTensorFromDataId(at,_e,et,st)}}MathBackendWebGL.nextDataId=0;function float32ToTypedArray(_,$){if($==="float32"||$==="complex64")return _;if($==="int32"||$==="bool"){const _e=$==="int32"?new Int32Array(_.length):new Uint8Array(_.length);for(let et=0;et<_e.length;++et)_e[et]=Math.round(_[et]);return _e}else throw new Error(`Unknown dtype ${$}`)}/** @license See the LICENSE file. */const version$2="4.22.0";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function forceHalfFloat(){env().set("WEBGL_FORCE_F16_TEXTURES",!0)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */isBrowser()&&registerBackend("webgl",()=>new MathBackendWebGL,2);const webgl={forceHalfFloat};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CHECK_NAN_SNIPPET=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class BinaryOpProgram{constructor($,_e,et){this.variableNames=["A","B"],this.outputShape=assertAndGetBroadcastShape(_e,et),this.enableShapeUniforms=useShapeUniforms(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${$}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CHECK_NAN_SNIPPET_PACKED=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class BinaryOpPackedProgram{constructor($,_e,et,tt=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=assertAndGetBroadcastShape(_e,et);const rt=this.outputShape.length;this.enableShapeUniforms=useShapeUniforms(rt);let nt="";if(tt)if(rt===0||sizeFromShape(this.outputShape)===1)nt=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(nt=`
          ${getCoordsDataType(rt)} coords = getOutputCoords();
        `,rt===1)this.enableShapeUniforms?nt+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:nt+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const st=getChannels("coords",rt);this.enableShapeUniforms?nt+=`
            bool nextRowOutOfBounds =
              (${st[rt-2]} + 1) >= outShape[${rt} - 2];
            bool nextColOutOfBounds =
              (${st[rt-1]} + 1) >= outShape[${rt} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:nt+=`
            bool nextRowOutOfBounds =
              (${st[rt-2]} + 1) >= ${this.outputShape[rt-2]};
            bool nextColOutOfBounds =
              (${st[rt-1]} + 1) >= ${this.outputShape[rt-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${$}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${nt}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function identity$c(_){const{inputs:$,backend:_e}=_,{x:et}=$;return _e.incRef(et.dataId),{dataId:et.dataId,shape:et.shape,dtype:et.dtype}}const identityConfig={kernelName:Identity$1,backendName:"webgl",kernelFunc:identity$c};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function complex(_){const{inputs:$,backend:_e}=_,{real:et,imag:tt}=$,rt=_e.makeTensorInfo(et.shape,"complex64"),nt=_e.texData.get(rt.dataId),it=identity$c({inputs:{x:et},backend:_e}),st=identity$c({inputs:{x:tt},backend:_e});return nt.complexTensorInfos={real:it,imag:st},rt}const complexConfig={kernelName:Complex,backendName:"webgl",kernelFunc:complex};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LEAKYRELU="return (a < 0.) ? b * a : a;",LEAKYRELU_PACKED=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function leakyRelu(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{alpha:rt}=et,nt=_e.makeTensorInfo([],"float32",createScalarValue(rt,"float32")),it=env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new BinaryOpPackedProgram(LEAKYRELU_PACKED,tt.shape,nt.shape):new BinaryOpProgram(LEAKYRELU,tt.shape,nt.shape),st=_e.runWebGLProgram(it,[tt,nt],"float32");return _e.disposeIntermediateTensorInfo(nt),st}const leakyReluConfig={kernelName:LeakyRelu,backendName:"webgl",kernelFunc:leakyRelu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PRELU="return (a < 0.) ? b * a : a;",PRELU_PACKED=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function prelu(_){const{inputs:$,backend:_e}=_,{x:et,alpha:tt}=$,rt=env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new BinaryOpPackedProgram(PRELU_PACKED,et.shape,tt.shape):new BinaryOpProgram(PRELU,et.shape,tt.shape);return _e.runWebGLProgram(rt,[et,tt],"float32")}const preluConfig={kernelName:Prelu,backendName:"webgl",kernelFunc:prelu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CHECK_NAN_SNIPPET_UNARY="if (isnan(x)) return x;";function unaryKernelFunc({opSnippet:_,packedOpSnippet:$,cpuKernelImpl:_e,dtype:et}){return({inputs:tt,backend:rt})=>{const{x:nt}=tt,it=rt,st=et||nt.dtype;if(it.shouldExecuteOnCPU([nt])&&_e!=null){const dt=it.texData.get(nt.dataId),ht=_e(dt.values,st);return it.makeTensorInfo(nt.shape,st,ht)}const at=env().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&$!=null;let ot;return at?ot=new UnaryOpPackedProgram(nt.shape,$):ot=new UnaryOpProgram(nt.shape,_),it.runWebGLProgram(ot,[nt],st)}}function binaryKernelFunc({opSnippet:_,packedOpSnippet:$,checkOutOfBounds:_e=!1,supportsComplex:et=!1,cpuKernelImpl:tt,dtype:rt}){return({inputs:nt,backend:it})=>{const{a:st,b:at}=nt,ot=it;if(et&&st.dtype==="complex64"){const vt=ot.texData.get(st.dataId),xt=ot.texData.get(at.dataId),[wt,Et]=[[vt.complexTensorInfos.real,xt.complexTensorInfos.real],[vt.complexTensorInfos.imag,xt.complexTensorInfos.imag]].map(jt=>{const[kt,Lt]=jt,Bt={dataId:kt.dataId,dtype:kt.dtype,shape:st.shape},Gt={dataId:Lt.dataId,dtype:Lt.dtype,shape:at.shape},er=new BinaryOpProgram(_,st.shape,at.shape);return ot.runWebGLProgram(er,[Bt,Gt],upcastType(kt.dtype,Lt.dtype))}),At=complex({inputs:{real:wt,imag:Et},backend:ot});return ot.disposeIntermediateTensorInfo(wt),ot.disposeIntermediateTensorInfo(Et),At}const dt=rt||upcastType(st.dtype,at.dtype);if((st.dtype==="string"||at.dtype==="string"||ot.shouldExecuteOnCPU([st,at]))&&tt!=null){const vt=ot.texData.get(st.dataId).values,xt=ot.texData.get(at.dataId).values,wt=st.dtype==="string"?fromUint8ToStringArray(vt):vt,Et=st.dtype==="string"?fromUint8ToStringArray(xt):xt,[At,jt]=tt(st.shape,at.shape,wt,Et,dt),kt=ot.makeTensorInfo(jt,dt),Lt=ot.texData.get(kt.dataId);return Lt.values=At,kt}const ht=env().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&$!=null;let yt;return ht?yt=new BinaryOpPackedProgram($,st.shape,at.shape,_e):yt=new BinaryOpProgram(_,st.shape,at.shape),ot.runWebGLProgram(yt,[st,at],dt)}}function mapActivationToShaderProgram(_,$=!1){if(_==="linear")return $?LINEAR:LINEAR$1;if(_==="relu")return $?RELU$1:RELU$2;if(_==="elu")return $?ELU$1:ELU$2;if(_==="relu6")return $?RELU6$1:RELU6$2;if(_==="prelu")return $?PRELU_PACKED:PRELU;if(_==="leakyrelu")return $?LEAKYRELU_PACKED:LEAKYRELU;if(_==="sigmoid")return $?SIGMOID$1:SIGMOID$2;throw new Error(`Activation ${_} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MatMulPackedProgram{constructor($,_e,et,tt=!1,rt=!1,nt=!1,it=null,st=!1,at=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=et,this.enableShapeUniforms=useShapeUniforms(this.outputShape.length);const ot=tt?$[1]:$[2],dt=Math.ceil(ot/2),ht=tt?"i * 2, rc.y":"rc.y, i * 2",yt=rt?"rc.z, i * 2":"i * 2, rc.z",vt=tt?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],xt=rt?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let wt="",Et="";it&&(st?wt=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${it}
        }`:at?wt=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${it}
        }`:wt=`vec4 activation(vec4 x) {
          ${it}
        }`,Et="result = activation(result);");const At=nt?"result += getBiasAtOutCoords();":"";nt&&this.variableNames.push("bias"),st&&this.variableNames.push("preluActivationWeights"),at&&this.variableNames.push("leakyreluAlpha");let jt="rc.x",kt="rc.x";$[0]<_e[0]?jt=`imod(rc.x, ${$[0]})`:_e[0]<$[0]&&(kt=`imod(rc.x, ${_e[0]})`),this.userCode=`
      ${wt}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${dt}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${jt};
        int batchB = ${kt};
        for (int i = 0; i < ${dt}; i++) {
          vec4 a = getMatrixA(batchA, ${ht});
          vec4 b = getMatrixB(batchB, ${yt});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${vt[0]} * ${xt[0]});
          result += (${vt[1]} * ${xt[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${At}

        ${Et}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COMPLEX_MULTIPLY={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class BinaryOpComplexProgram{constructor($,_e,et){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=assertAndGetBroadcastShape(_e,et),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${$}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MUL="return a * b;";function multiply(_){const{inputs:$,backend:_e}=_,{a:et,b:tt}=$,rt=upcastType(et.dtype,tt.dtype);if(et.dtype==="complex64"){const it=_e.texData.get(et.dataId),st=_e.texData.get(tt.dataId),at=new BinaryOpComplexProgram(COMPLEX_MULTIPLY.REAL,et.shape,tt.shape),ot=new BinaryOpComplexProgram(COMPLEX_MULTIPLY.IMAG,et.shape,tt.shape),dt=[{dataId:it.complexTensorInfos.real.dataId,dtype:it.complexTensorInfos.real.dtype,shape:et.shape},{dataId:it.complexTensorInfos.imag.dataId,dtype:it.complexTensorInfos.imag.dtype,shape:et.shape},{dataId:st.complexTensorInfos.real.dataId,dtype:st.complexTensorInfos.real.dtype,shape:tt.shape},{dataId:st.complexTensorInfos.imag.dataId,dtype:st.complexTensorInfos.imag.dtype,shape:tt.shape}],ht=_e.runWebGLProgram(at,dt,"float32"),yt=_e.runWebGLProgram(ot,dt,"float32"),vt=complex({inputs:{real:ht,imag:yt},backend:_e});return _e.disposeIntermediateTensorInfo(ht),_e.disposeIntermediateTensorInfo(yt),vt}if(_e.shouldExecuteOnCPU([et,tt])){const it=_e.texData.get(et.dataId),st=_e.texData.get(tt.dataId),[at,ot]=multiplyImplCPU(et.shape,tt.shape,it.values,st.values,rt),dt=_e.makeTensorInfo(ot,rt),ht=_e.texData.get(dt.dataId);return ht.values=at,dt}let nt;return env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?nt=new BinaryOpPackedProgram(MUL,et.shape,tt.shape):nt=new BinaryOpProgram(MUL,et.shape,tt.shape),_e.runWebGLProgram(nt,[et,tt],rt)}const multiplyConfig={kernelName:Multiply$1,backendName:"webgl",kernelFunc:multiply};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function packedReshape(_,$,_e){const et=[getBatchDim(_.shape),...getRowsCols(_.shape)],tt={dtype:_.dtype,shape:et,dataId:_.dataId},rt=[getBatchDim($),...getRowsCols($)],nt=new ReshapePackedProgram(rt,et),it=!0,st=[et],at=_e.runWebGLProgram(nt,[tt],_.dtype,st,it);return{dataId:at.dataId,shape:$,dtype:at.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reshape(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{shape:rt}=et,nt=_e,it=sizeFromShape(tt.shape),st=inferFromImplicitShape(rt,it),at=sizeFromShape(st);assert$1(it===at,()=>`The new shape (${st}) has ${at} elements and the old shape (${tt.shape}) has ${it} elements. The new shape and old shape must have the same number of elements.`);const ot=nt.texData.get(tt.dataId);return ot.isPacked&&!isReshapeFree(tt.shape,st)&&!(ot.texture!==null&&isReshapeFree(ot.shape,st))?packedReshape(tt,st,nt):(nt.incRef(tt.dataId),{dataId:tt.dataId,shape:st,dtype:tt.dtype})}const reshapeConfig={kernelName:Reshape$1,backendName:"webgl",kernelFunc:reshape};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MeanProgram{constructor($,_e){this.variableNames=["x"];const{windowSize:et,batchSize:tt,inSize:rt,outSize:nt}=$;this.outputShape=[tt,nt];const it=Math.floor(et/4)*4,st=et%4;let at="sumValue += dot(values, ones);";if(_e!=null){const dt=1/_e;at=`sumValue += dot(values * ${isInt(dt)?dt.toPrecision(2):dt}, ones);`}let ot="";rt%et>0&&(ot=`
        if (inIdx < 0 || inIdx >= ${rt}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${ot}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${et};

        float sumValue = 0.0;

        for (int i = 0; i < ${it}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${at}
        }

        int inIdx = inOffset + ${it};
        if (${st===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${at}
        } else if (${st===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${at}
        } else if (${st===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${at}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ReduceProgram{constructor($,_e){this.variableNames=["x"];const{windowSize:et,batchSize:tt,inSize:rt,outSize:nt}=$;this.outputShape=[tt,nt];let it="0.0",st="";_e==="prod"?it="1.0":_e==="min"?(it="1.0 / 1e-20",st="min"):_e==="max"&&(it="-1.0 / 1e-20",st="max");let at=`${_e}(${_e}(${_e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;_e==="sum"?at="sumValue":_e==="prod"?at="prodValue":_e==="all"?at="allValue":_e==="any"&&(at="anyValue");const ot=Math.floor(et/4)*4,dt=et%4;let ht=`
      if (${_e==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${_e==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${st}(values, minMaxValue);
        if (${_e==="min"} || ${_e==="max"}) {
          minMaxValue = ${st}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,yt="vec4";_e==="all"?(it="1.0",ht=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,yt="bvec4"):_e==="any"&&(it="0.0",ht=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,yt="bvec4");let vt="";rt%et>0&&(vt=`
        if (inIdx < 0 || inIdx >= ${rt}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${it};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${vt}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${et};

        vec4 minMaxValue = vec4(${it});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${ot}; i += 4) {
          int inIdx = inOffset + i;
          ${yt} values = ${yt}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${ht}
        }

        int inIdx = inOffset + ${ot};
        if (${dt===1}) {
          ${yt} values = ${yt}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${ht}
        } else if (${dt===2}) {
          ${yt} values = ${yt}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${ht}
        } else if (${dt===3}) {
          ${yt} values = ${yt}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${ht}
        }
        setOutput(${at});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getReductionStages(_){const $=[];for(;$.length===0||$[$.length-1].outSize!==1;){const _e=$.length?$[$.length-1].outSize:_[1],et=computeOptimalWindowSize(_e);$.push({inSize:_e,windowSize:et,outSize:Math.ceil(_e/et)})}return $}function reduce(_,$,_e,et){const tt=getReductionStages(_.shape);let rt=_;for(let nt=0;nt<tt.length;nt++){const{inSize:it,windowSize:st,outSize:at}=tt[nt];let ot,dt;_e==="mean"?ot=nt===0?new MeanProgram({windowSize:st,inSize:it,batchSize:_.shape[0],outSize:at},it):new MeanProgram({windowSize:st,inSize:it,batchSize:_.shape[0],outSize:at}):ot=new ReduceProgram({windowSize:st,inSize:it,batchSize:_.shape[0],outSize:at},_e),dt=rt,rt=et.runWebGLProgram(ot,[rt],$),dt.dataId!==_.dataId&&et.disposeIntermediateTensorInfo(dt)}return rt}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TransposeProgram{constructor($,_e){this.variableNames=["A"];const et=new Array($.length);for(let nt=0;nt<et.length;nt++)et[nt]=$[_e[nt]];this.outputShape=et,this.rank=et.length;const tt=getCoordsDataType(this.rank),rt=getSwitchedCoords(_e);this.userCode=`
    void main() {
      ${tt} resRC = getOutputCoords();
      setOutput(getA(${rt}));
    }
    `}}function getSwitchedCoords(_){const $=_.length;if($>6)throw Error(`Transpose for rank ${$} is not yet supported`);const _e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],et=new Array($);for(let tt=0;tt<_.length;tt++)et[_[tt]]=_e[tt];return et.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TransposePackedProgram{constructor($,_e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const et=new Array($.length);for(let ot=0;ot<et.length;ot++)et[ot]=$[_e[ot]];if(this.outputShape=et,this.rank=et.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const tt=getCoordsDataType(this.rank),rt=getVecChannels("rc",this.rank),nt=new Array(this.rank);for(let ot=0;ot<_e.length;ot++)nt[_e[ot]]=rt[ot];const it=`vec2(${nt.slice(-2).join()})`,st=`++${rt[this.rank-1]} < ${et[this.rank-1]}`,at=`getChannel(getA(${nt.join()}), ${it})`;this.userCode=`
    void main() {
      ${tt} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${at};
      if(${st}) {
        result[1] = ${at};
      }
      --${rt[this.rank-1]};
      if(++${rt[this.rank-2]} < ${et[this.rank-2]}) {
        result[2] = ${at};
        if(${st}) {
          result[3] = ${at};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transposeImpl(_,$,_e){const et=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new TransposePackedProgram(_.shape,$):new TransposeProgram(_.shape,$);return _e.runWebGLProgram(et,[_],_.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sumImpl(_,$,_e,et){const tt=$,rt=_.shape.length,nt=parseAxisParam(tt,_.shape);let it=nt;const st=getAxesPermutation(it,rt),at=st!=null;let ot=_;at&&(ot=transposeImpl(_,st,et),it=getInnerMostAxes(it.length,rt)),assertAxesAreInnerMostDims("sum",it,rt);const[dt,ht]=computeOutAndReduceShapes(ot.shape,it);let yt=dt;_e&&(yt=expandShapeToKeepDim(dt,nt));const vt=sizeFromShape(ht),wt=sizeFromShape(_.shape)/vt,Et=reshape({inputs:{x:ot},attrs:{shape:[wt,vt]},backend:et}),At=sumOutType(_.dtype),jt=reduce(Et,At,"sum",et),kt=reshape({inputs:{x:jt},attrs:{shape:yt},backend:et});return et.disposeIntermediateTensorInfo(Et),et.disposeIntermediateTensorInfo(jt),at&&et.disposeIntermediateTensorInfo(ot),kt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sum(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{axis:rt,keepDims:nt}=et;return sumImpl(tt,rt,nt,_e)}const sumConfig={kernelName:Sum,backendName:"webgl",kernelFunc:sum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transpose(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{perm:rt}=et,nt=_e,it=tt.shape.length,st=new Array(it);for(let ot=0;ot<st.length;ot++)st[ot]=tt.shape[rt[ot]];let at;if(nt.shouldExecuteOnCPU([tt])){const dt=nt.texData.get(tt.dataId).values,ht=transposeImplCPU(dt,tt.shape,tt.dtype,rt,st);at=nt.makeTensorInfo(st,tt.dtype);const yt=nt.texData.get(at.dataId);yt.values=ht}else at=transposeImpl(tt,rt,nt);return at}const transposeConfig={kernelName:Transpose,backendName:"webgl",kernelFunc:transpose};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MATMUL_SHARED_DIM_THRESHOLD=1e3;function batchMatMulImpl({a:_,b:$,transposeA:_e,transposeB:et,backend:tt,bias:rt=null,preluActivationWeights:nt=null,leakyreluAlpha:it=0,activation:st=null}){const at=_.shape.length,ot=$.shape.length,dt=_e?_.shape[at-2]:_.shape[at-1],ht=et?$.shape[ot-1]:$.shape[ot-2],yt=_e?_.shape[at-1]:_.shape[at-2],vt=et?$.shape[ot-2]:$.shape[ot-1],xt=_.shape.slice(0,-2),wt=$.shape.slice(0,-2),Et=sizeFromShape(xt),At=sizeFromShape(wt),kt=assertAndGetBroadcastShape(_.shape.slice(0,-2),$.shape.slice(0,-2)).concat([yt,vt]);assert$1(dt===ht,()=>`Error in matMul: inner shapes (${dt}) and (${ht}) of Tensors with shapes ${_.shape} and ${$.shape} and transposeA=${_e} and transposeB=${et} must match.`);const Lt=_e?[Et,dt,yt]:[Et,yt,dt],Bt=et?[At,vt,ht]:[At,ht,vt],Gt=reshape({inputs:{x:_},backend:tt,attrs:{shape:Lt}}),er=reshape({inputs:{x:$},backend:tt,attrs:{shape:Bt}}),tr=[Gt,er],ar=Math.max(Et,At),Mt=_e?Gt.shape[1]:Gt.shape[2],lt=rt!=null,mt=nt!=null,gt=st==="leakyrelu",bt=st!=null?mapActivationToShaderProgram(st,!0):null,St=lt||mt||gt||bt!=null;let Nt;if((yt===1||vt===1)&&Mt>MATMUL_SHARED_DIM_THRESHOLD&&St===!1){let Tt=Gt,pt=er;_e&&(Tt=transpose({inputs:{x:Gt},backend:tt,attrs:{perm:[0,2,1]}}),tr.push(Tt)),et&&(pt=transpose({inputs:{x:er},backend:tt,attrs:{perm:[0,2,1]}}),tr.push(pt));const Rt=vt!==1,zt=vt===1;let Yt=Tt;Rt&&(Yt=reshape({inputs:{x:Tt},backend:tt,attrs:{shape:[ar,Mt,1]}}),tr.push(Yt));const ir=vt===1?2:1;let ur=pt;zt&&(ur=reshape({inputs:{x:pt},backend:tt,attrs:{shape:[ar,1,Mt]}}),tr.push(ur));const cr=multiply({inputs:{a:Yt,b:ur},backend:tt});Nt=sum({inputs:{x:cr},backend:tt,attrs:{axis:ir,keepDims:!0}}),tr.push(cr)}else{const Tt=upcastType(_.dtype,$.dtype),pt=new MatMulPackedProgram(Lt,Bt,[ar,yt,vt],_e,et,lt,bt,mt,gt),Rt=[Gt,er];if(rt!=null&&Rt.push(rt),mt&&Rt.push(nt),gt){const zt=tt.makeTensorInfo([],"float32",createScalarValue(it,"float32"));Rt.push(zt),tr.push(zt)}Nt=tt.runWebGLProgram(pt,Rt,Tt)}const Pt=reshape({inputs:{x:Nt},backend:tt,attrs:{shape:kt}});tr.push(Nt);for(const Tt of tr)tt.disposeIntermediateTensorInfo(Tt);return Pt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _fusedMatMul(_){const{inputs:$,backend:_e,attrs:et}=_,{a:tt,b:rt,bias:nt,preluActivationWeights:it}=$,{transposeA:st,transposeB:at,activation:ot,leakyreluAlpha:dt}=et;return batchMatMulImpl({a:tt,b:rt,transposeA:st,transposeB:at,backend:_e,bias:nt,preluActivationWeights:it,leakyreluAlpha:dt,activation:ot})}const _fusedMatMulConfig={kernelName:_FusedMatMul,backendName:"webgl",kernelFunc:_fusedMatMul};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ABS="return abs(x);";function abs(_){const{inputs:$,backend:_e}=_,{x:et}=$;if(_e.shouldExecuteOnCPU([et])&&et.dtype!=="complex64"){const rt=_e.texData.get(et.dataId),nt=simpleAbsImplCPU(rt.values);return _e.makeTensorInfo(et.shape,et.dtype,nt)}let tt;return env().getBool("WEBGL_PACK_UNARY_OPERATIONS")?tt=new UnaryOpPackedProgram(et.shape,ABS):tt=new UnaryOpProgram(et.shape,ABS),_e.runWebGLProgram(tt,[et],et.dtype)}const absConfig={kernelName:Abs,backendName:"webgl",kernelFunc:abs};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ACOS=CHECK_NAN_SNIPPET$1+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,acos=unaryKernelFunc({opSnippet:ACOS}),acosConfig={kernelName:Acos,backendName:"webgl",kernelFunc:acos};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ACOSH=CHECK_NAN_SNIPPET$1+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,acosh=unaryKernelFunc({opSnippet:ACOSH}),acoshConfig={kernelName:Acosh,backendName:"webgl",kernelFunc:acosh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ADD="return a + b;",addKernelFunc=binaryKernelFunc({opSnippet:ADD,packedOpSnippet:ADD,supportsComplex:!0,cpuKernelImpl:addImplCPU}),addConfig={kernelName:Add$1,backendName:"webgl",kernelFunc:addKernelFunc};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AddNProgram{constructor($,_e){this.outputShape=[],this.outputShape=$,this.variableNames=_e.map((rt,nt)=>`T${nt}`);const et=[];this.variableNames.forEach(rt=>{et.push(`float v${rt} = get${rt}AtOutCoords();`)});const tt=this.variableNames.map(rt=>`v${rt}`).join(" + ");this.userCode=`
      void main() {
        ${et.join(`
        `)}

        float result = ${tt};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AddNPackedProgram{constructor($,_e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=$,this.variableNames=_e.map((rt,nt)=>`T${nt}`);const et=[];this.variableNames.forEach(rt=>{et.push(`vec4 v${rt} = get${rt}AtOutCoords();`)});const tt=this.variableNames.map(rt=>`v${rt}`).join(" + ");this.userCode=`
      void main() {
        ${et.join(`
        `)}

        vec4 result = ${tt};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function addN(_){const{inputs:$,backend:_e}=_,et=$;if(et.length===1)return identity$c({inputs:{x:et[0]},backend:_e});if(et.length>env().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const st=Math.floor(et.length/2),at=addN({inputs:et.slice(0,st),backend:_e}),ot=addN({inputs:et.slice(st),backend:_e});return addN({inputs:[at,ot],backend:_e})}const tt=et.map(st=>st.dtype).reduce((st,at)=>upcastType(st,at)),rt=et.map(st=>st.shape),it=env().getBool("WEBGL_PACK")?new AddNPackedProgram(et[0].shape,rt):new AddNProgram(et[0].shape,rt);return _e.runWebGLProgram(it,et,tt)}const addNConfig={kernelName:AddN,backendName:"webgl",kernelFunc:addN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function all(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{axis:rt,keepDims:nt}=et,it=tt.shape.length,st=parseAxisParam(rt,tt.shape);let at=st;const ot=getAxesPermutation(at,it);let dt=tt;ot!=null&&(dt=transpose({inputs:{x:tt},backend:_e,attrs:{perm:ot}}),at=getInnerMostAxes(at.length,it)),assertAxesAreInnerMostDims("all",at,it);const[ht,yt]=computeOutAndReduceShapes(dt.shape,at),vt=sizeFromShape(yt),xt=reshape({inputs:{x:dt},backend:_e,attrs:{shape:[-1,vt]}}),wt=reduce(xt,xt.dtype,"all",_e);let Et;if(nt){const At=expandShapeToKeepDim(ht,st);Et=reshape({inputs:{x:wt},backend:_e,attrs:{shape:At}})}else Et=reshape({inputs:{x:wt},backend:_e,attrs:{shape:ht}});return _e.disposeIntermediateTensorInfo(xt),_e.disposeIntermediateTensorInfo(wt),ot!=null&&_e.disposeIntermediateTensorInfo(dt),Et}const allConfig={kernelName:All,backendName:"webgl",kernelFunc:all};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function any(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{axis:rt,keepDims:nt}=et,it=tt.shape.length,st=parseAxisParam(rt,tt.shape);let at=st;const ot=getAxesPermutation(at,it);let dt=tt;ot!=null&&(dt=transpose({inputs:{x:tt},backend:_e,attrs:{perm:ot}}),at=getInnerMostAxes(at.length,it)),assertAxesAreInnerMostDims("any",at,it);const[ht,yt]=computeOutAndReduceShapes(dt.shape,at),vt=sizeFromShape(yt),xt=reshape({inputs:{x:dt},backend:_e,attrs:{shape:[-1,vt]}}),wt=reduce(xt,xt.dtype,"any",_e);let Et;if(nt){const At=expandShapeToKeepDim(ht,st);Et=reshape({inputs:{x:wt},backend:_e,attrs:{shape:At}})}else Et=reshape({inputs:{x:wt},backend:_e,attrs:{shape:ht}});return _e.disposeIntermediateTensorInfo(xt),_e.disposeIntermediateTensorInfo(wt),ot!=null&&_e.disposeIntermediateTensorInfo(dt),Et}const anyConfig={kernelName:Any,backendName:"webgl",kernelFunc:any};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ArgMinMaxProgram{constructor($,_e,et){this.variableNames=["A"];const{windowSize:tt,batchSize:rt,outSize:nt}=$;et||this.variableNames.push("bestIndicesA"),this.outputShape=[rt,nt];const it=_e==="max"?">":"<",st=et?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${tt};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${tt}; i++) {
          int inIdx = ${st};
          float candidate = getA(batch, inIdx);
          if (candidate ${it} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ArgMinMaxPackedProgram{constructor($,_e,et,tt){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,assert$1($.length>2,()=>`Packed arg${et.charAt(0).toUpperCase()+et.slice(1)} supports only inputs with rank above 2.`);const rt=$[$.length-1],nt=Math.ceil(rt/_e);this.outputShape=$.slice(0,-1),nt>1&&this.outputShape.push(nt),tt||this.variableNames.push("bestIndicesA");const it=this.outputShape,st=it.length,at=getCoordsDataType(st),ot=getChannels("coords",st);let dt,ht;if(nt===1){ht=st+1;const er=getCoordsDataType(ht);dt=`
        ${er} sourceLocR = ${er}(${ot.join()}, 0);
        ++${ot[st-1]};
        ${er} sourceLocG = ${er}(${ot.join()}, 0);
        ++${ot[st-2]};
        ${er} sourceLocA = ${er}(${ot.join()}, 0);
        --${ot[st-1]};
        ${er} sourceLocB = ${er}(${ot.join()}, 0);
        --${ot[st-2]};`}else ht=st,dt=`
        ${at} sourceLocR = coords;
        ++${ot[st-1]};
        ${at} sourceLocG = coords;
        ++${ot[st-2]};
        ${at} sourceLocA = coords;
        --${ot[st-1]};
        ${at} sourceLocB = coords;
        --${ot[st-2]};`;const yt=["x","y","z","w","u","v"].slice(0,ht),vt="."+yt[ht-1],xt=yt.map(er=>"int "+er),wt=getChannels("sourceLocR",ht-1).concat("inIdx.r"),Et=getChannels("sourceLocG",ht-1).concat("inIdx.g"),At=getChannels("sourceLocB",ht-1).concat("inIdx.b"),jt=getChannels("sourceLocA",ht-1).concat("inIdx.a"),kt=et==="max"?"greaterThan":"lessThan",Lt=tt?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${wt.join()}),
                             getBestIndicesAChannel(${Et.join()}),
                             getBestIndicesAChannel(${At.join()}),
                             getBestIndicesAChannel(${jt.join()})));`,Bt=`vec4(
            getAChannel(${wt.join()}),
            hasNextCol ? getAChannel(${Et.join()}) : 0.,
            hasNextRow ? getAChannel(${At.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${jt.join()}) : 0.)`,Gt=tt?"":`
      float getBestIndicesAChannel(${xt.join()}) {
        return getChannel(getBestIndicesA(${yt.join()}),
                                          vec2(${yt.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${xt.join()}) {
        return getChannel(getA(${yt.join()}),
                               vec2(${yt.slice(-2).join()}));
      }
      ${Gt}
      void main() {
        ${at} coords = getOutputCoords();
        bool hasNextCol = ${ot[st-1]} < ${it[st-1]-1};
        bool hasNextRow = ${ot[st-2]} < ${it[st-2]-1};
        ${dt}
        ivec4 srcIdx = ivec4(sourceLocR${vt}, sourceLocG${vt},
          sourceLocB${vt}, sourceLocA${vt}) * ${_e};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${Bt};

        for (int i = 0; i < ${_e}; i++) {
          inIdx = srcIdx;
          ${Lt}
          vec4 candidate = ${Bt};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${kt}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argReduce(_,$,_e,et=null){let tt=$.shape[0],rt=$.shape[1];et!=null&&(tt=et.shape[0],rt=et.shape[1]);const nt=computeOptimalWindowSize(rt),it={windowSize:nt,inSize:rt,batchSize:tt,outSize:Math.ceil(rt/nt)},st=new ArgMinMaxProgram(it,_e,et==null),at=[$];et!=null&&at.push(et);const ot=_.runWebGLProgram(st,at,"int32");if(ot.shape[1]===1)return ot;const dt=argReduce(_,$,_e,ot);return _.disposeIntermediateTensorInfo(ot),dt}function argReducePacked(_,$,_e,et=null){const tt=et!=null?et.shape:$.shape,rt=tt[tt.length-1],nt=computeOptimalWindowSize(rt),it=new ArgMinMaxPackedProgram(tt,nt,_e,et==null),st=et==null?[$]:[$,et],at=_.runWebGLProgram(it,st,"int32");if(at.shape.length===$.shape.length){const ot=argReducePacked(_,$,_e,at);return _.disposeIntermediateTensorInfo(at),ot}return at}function argMinMaxReduce(_,$,_e,et){const tt=[_e];if(assertAxesAreInnerMostDims("arg"+et.charAt(0).toUpperCase()+et.slice(1),tt,$.shape.length),!env().getBool("WEBGL_PACK_REDUCE")||$.shape.length<=2){const rt=[],nt=_.texData.get($.dataId),it=nt!==null&&nt.isPacked;let st=$;it&&(st=_.unpackTensor($),rt.push(st));const[at,ot]=computeOutAndReduceShapes(st.shape,tt),dt=sizeFromShape(ot),ht=reshape({inputs:{x:st},backend:_,attrs:{shape:[-1,dt]}});rt.push(ht);const yt=argReduce(_,ht,et);rt.push(yt);const vt=reshape({inputs:{x:yt},backend:_,attrs:{shape:at}});return rt.forEach(xt=>_.disposeIntermediateTensorInfo(xt)),vt}return argReducePacked(_,$,et)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMax(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{axis:rt}=et;let nt=parseAxisParam(rt,tt.shape);const it=getAxesPermutation(nt,tt.shape.length);let st=tt;const at=[];it!=null&&(st=transpose({inputs:{x:tt},backend:_e,attrs:{perm:it}}),at.push(st),nt=getInnerMostAxes(nt.length,st.shape.length)),assertAxesAreInnerMostDims("argMax",[nt[0]],st.shape.length);const ot=argMinMaxReduce(_e,st,nt[0],"max");return at.forEach(dt=>_e.disposeIntermediateTensorInfo(dt)),ot}const argMaxConfig={kernelName:ArgMax,backendName:"webgl",kernelFunc:argMax};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMin(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{axis:rt}=et;let nt=parseAxisParam(rt,tt.shape);const it=getAxesPermutation(nt,tt.shape.length);let st=tt;const at=[];it!=null&&(st=transpose({inputs:{x:tt},backend:_e,attrs:{perm:it}}),at.push(st),nt=getInnerMostAxes(nt.length,st.shape.length)),assertAxesAreInnerMostDims("argMin",[nt[0]],st.shape.length);const ot=argMinMaxReduce(_e,st,nt[0],"min");return at.forEach(dt=>_e.disposeIntermediateTensorInfo(dt)),ot}const argMinConfig={kernelName:ArgMin,backendName:"webgl",kernelFunc:argMin};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ASIN=CHECK_NAN_SNIPPET$1+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,asin=unaryKernelFunc({opSnippet:ASIN}),asinConfig={kernelName:Asin,backendName:"webgl",kernelFunc:asin};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ASINH=CHECK_NAN_SNIPPET$1+"return log(x + sqrt(x * x + 1.0));",asinh=unaryKernelFunc({opSnippet:ASINH}),asinhConfig={kernelName:Asinh,backendName:"webgl",kernelFunc:asinh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ATAN=CHECK_NAN_SNIPPET$1+`
  return atan(x);
`,atan=unaryKernelFunc({opSnippet:ATAN}),atanConfig={kernelName:Atan,backendName:"webgl",kernelFunc:atan};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ATAN2=CHECK_NAN_SNIPPET+`
  return atan(a, b);
`,ATAN2_PACKED=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+CHECK_NAN_SNIPPET_PACKED+`
  return result;
`,atan2=binaryKernelFunc({opSnippet:ATAN2,packedOpSnippet:ATAN2_PACKED}),atan2Config={kernelName:Atan2,backendName:"webgl",kernelFunc:atan2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ATANH=CHECK_NAN_SNIPPET$1+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,atanh=unaryKernelFunc({opSnippet:ATANH}),atanhConfig={kernelName:Atanh,backendName:"webgl",kernelFunc:atanh};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pool2DProgram{constructor($,_e,et,tt=!1,rt=!1){if(this.variableNames=["x"],_e==="avg"&&et)throw new Error("Cannot compute positions for average pool.");const nt=$.filterWidth,it=$.strideHeight,st=$.strideWidth,at=$.dilationHeight,ot=$.dilationWidth,dt=$.effectiveFilterHeight,ht=$.effectiveFilterWidth,yt=$.padInfo.top,vt=$.padInfo.left;this.outputShape=$.outShape;const xt=_e==="avg",wt=`((batch  * ${$.inHeight} + xR) * ${$.inWidth} + xC) * ${$.inChannels} + d`,Et=`(xR * ${$.inWidth} + xC) * ${$.inChannels} + d`;let At="0.0";if(xt||(At="-1.0 / 1e-20"),et){const er=">=";this.userCode=`
        const ivec2 strides = ivec2(${it}, ${st});
        const ivec2 pads = ivec2(${yt}, ${vt});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${dt};
              wR += ${at}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${$.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${ht};
                wC += ${ot}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${$.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${er} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${tt?rt?wt:Et:`wR * ${ht} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const jt="max";let kt=`${_e}(${_e}(${_e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;_e==="avg"&&(kt="avgValue / max(count, 1.0)");const Lt=Math.floor(nt/4)*4,Bt=nt%4,Gt=`
      if (${xt}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${jt}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${it}, ${st});
      const ivec2 pads = ivec2(${yt}, ${vt});
      const float initializationValue = ${At};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${$.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${At});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${dt};
            wR += ${at}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${$.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${Lt}; wC += 4) {
            int xC = xCCorner + wC * ${ot};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${ot}, d),
              getValue(batch, xR, xC + 2 * ${ot}, d),
              getValue(batch, xR, xC + 3 * ${ot}, d)
            );

            ${Gt}
          }

          int xC = xCCorner + ${Lt};
          if (${Bt===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${Gt}
          } else if (${Bt===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${ot}, d),
              initializationValue,
              initializationValue
            );

            ${Gt}
          } else if (${Bt===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${ot}, d),
              getValue(batch, xR, xC + 2 * ${ot}, d),
              initializationValue
            );

            ${Gt}
          }
        }
        setOutput(${kt});
      }
    `}}class Pool3DProgram{constructor($,_e,et,tt=!1,rt=!1){if(this.variableNames=["x"],_e==="avg"&&et)throw new Error("Cannot compute positions for average pool.");const nt=$.filterWidth,it=$.strideDepth,st=$.strideHeight,at=$.strideWidth,ot=$.dilationDepth,dt=$.dilationHeight,ht=$.dilationWidth,yt=$.effectiveFilterDepth,vt=$.effectiveFilterHeight,xt=$.effectiveFilterWidth,wt=$.padInfo.front,Et=$.padInfo.top,At=$.padInfo.left;this.outputShape=$.outShape;const jt=_e==="avg";let kt="0.0";if(jt||(kt="-1.0 / 1e-20"),et){const ar=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${it}, ${st}, ${at});
        const ivec3 pads = ivec3(${wt}, ${Et}, ${At});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${yt};
              wD += ${ot}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${$.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${vt};
                wR += ${dt}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${$.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${xt};
                  wC += ${ht}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${$.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${ar} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${tt?rt?`(((batch * ${$.inDepth} + xD) * ${$.inHeight} + xR) * ${$.inWidth} + xC) * ${$.inChannels} + ch`:`((xD * ${$.inHeight} + xR) * ${$.inWidth} + xC) * ${$.inChannels} + ch`:`wD * ${vt} * ${xt} +
                      wR * ${xt} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const Lt="max";let Bt=`${_e}(${_e}(${_e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;_e==="avg"&&(Bt="avgValue / max(count, 1.0)");const Gt=Math.floor(nt/4)*4,er=nt%4,tr=`
      if (${jt}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${Lt}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${it}, ${st}, ${at});
      const ivec3 pads = ivec3(${wt}, ${Et}, ${At});
      const float initializationValue = ${kt};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${$.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${kt});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${yt};
            wD += ${ot}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${$.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${vt};
            wR += ${dt}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${$.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${Gt}; wC += 4) {
              int xC = xCCorner + wC * ${ht};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${ht}, ch),
                getValue(batch, xD, xR, xC + 2 * ${ht}, ch),
                getValue(batch, xD, xR, xC + 3 * ${ht}, ch)
              );

              ${tr}
            }

            int xC = xCCorner + ${Gt};
            if (${er===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${tr}
            } else if (${er===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${ht}, ch),
                initializationValue,
                initializationValue
              );

              ${tr}
            } else if (${er===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${ht}, ch),
                getValue(batch, xD, xR, xC + 2 * ${ht}, ch),
                initializationValue
              );

              ${tr}
            }
          }
        }
        setOutput(${Bt});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$;assertNotComplex(tt,"avgPool");const{filterSize:rt,strides:nt,pad:it,dimRoundingMode:st}=et,at=1;assert$1(eitherStridesOrDilationsAreOne(nt,at),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${nt} and dilations '${at}'`);const ot=computePool2DInfo(tt.shape,rt,nt,at,it,st);if(ot.filterWidth===1&&ot.filterHeight===1&&arraysEqual(ot.inShape,ot.outShape))return identity$c({inputs:{x:tt},backend:_e});const dt=new Pool2DProgram(ot,"avg",!1);return _e.runWebGLProgram(dt,[tt],"float32")}const avgPoolConfig={kernelName:AvgPool,backendName:"webgl",kernelFunc:avgPool};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3D(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{filterSize:rt,strides:nt,pad:it,dimRoundingMode:st,dataFormat:at}=et,ot=[1,1,1],dt=computePool3DInfo(tt.shape,rt,nt,ot,it,st,at),ht=new Pool3DProgram(dt,"avg",!1);return _e.runWebGLProgram(ht,[tt],"float32")}const avgPool3DConfig={kernelName:AvgPool3D,backendName:"webgl",kernelFunc:avgPool3D};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AvgPool2DBackpropProgram{constructor($){this.variableNames=["dy"],this.outputShape=$.inShape;const _e=$.filterHeight,et=$.filterWidth,tt=$.strideHeight,rt=$.strideWidth,nt=$.dilationHeight,it=$.dilationWidth,st=$.effectiveFilterHeight,at=$.effectiveFilterWidth,ot=st-1-$.padInfo.top,dt=at-1-$.padInfo.left,ht=1/(_e*et);this.userCode=`
      const ivec2 pads = ivec2(${ot}, ${dt});
      const float avgMultiplier = float(${ht});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${st};
            wR += ${nt}) {
          float dyR = float(dyRCorner + wR) / ${tt}.0;

          if (dyR < 0.0 || dyR >= ${$.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${at};
            wC+= ${it}) {
            float dyC = float(dyCCorner + wC) / ${rt}.0;

            if (dyC < 0.0 || dyC >= ${$.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class AvgPool3DBackpropProgram{constructor($){this.variableNames=["dy"],this.outputShape=$.inShape;const _e=$.filterDepth,et=$.filterHeight,tt=$.filterWidth,rt=$.strideDepth,nt=$.strideHeight,it=$.strideWidth,st=$.dilationDepth,at=$.dilationHeight,ot=$.dilationWidth,dt=$.effectiveFilterDepth,ht=$.effectiveFilterHeight,yt=$.effectiveFilterWidth,vt=dt-1-$.padInfo.front,xt=ht-1-$.padInfo.top,wt=yt-1-$.padInfo.left,Et=1/(_e*et*tt);this.userCode=`
      const ivec3 pads = ivec3(${vt}, ${xt}, ${wt});
      const float avgMultiplier = float(${Et});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${dt};
            wD += ${st}) {
          float dyD = float(dyDCorner + wD) / ${rt}.0;

          if (dyD < 0.0 || dyD >= ${$.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${ht};
              wR += ${at}) {
            float dyR = float(dyRCorner + wR) / ${nt}.0;

            if (dyR < 0.0 || dyR >= ${$.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${yt};
                wC += ${ot}) {
              float dyC = float(dyCCorner + wC) / ${it}.0;

              if (dyC < 0.0 || dyC >= ${$.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3DGrad(_){const{inputs:$,backend:_e,attrs:et}=_,{dy:tt,input:rt}=$,nt=rt,{filterSize:it,strides:st,pad:at,dimRoundingMode:ot}=et,dt=[1,1,1],ht=computePool3DInfo(nt.shape,it,st,dt,at,ot),yt=new AvgPool3DBackpropProgram(ht);return _e.runWebGLProgram(yt,[tt],nt.dtype)}const avgPool3DGradConfig={kernelName:AvgPool3DGrad,backendName:"webgl",kernelFunc:avgPool3DGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPoolGrad(_){const{inputs:$,backend:_e,attrs:et}=_,{dy:tt,input:rt}=$,nt=rt;assertNotComplex([tt,rt],"avgPoolGrad");const{filterSize:it,strides:st,pad:at}=et,ot=computePool2DInfo(nt.shape,it,st,1,at),dt=new AvgPool2DBackpropProgram(ot);return _e.runWebGLProgram(dt,[tt],nt.dtype)}const avgPoolGradConfig={kernelName:AvgPoolGrad,backendName:"webgl",kernelFunc:avgPoolGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchMatMul(_){const{inputs:$,backend:_e,attrs:et}=_,{a:tt,b:rt}=$,{transposeA:nt,transposeB:it}=et;return batchMatMulImpl({a:tt,b:rt,transposeA:nt,transposeB:it,backend:_e})}const batchMatMulConfig={kernelName:BatchMatMul,backendName:"webgl",kernelFunc:batchMatMul};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BatchNormProgram{constructor($,_e,et,tt,rt,nt){this.outputShape=[],this.variableNames=["x","mean","variance"],assertAndGetBroadcastShape($,_e),assertAndGetBroadcastShape($,et);let it="0.0";tt!=null&&(assertAndGetBroadcastShape($,tt),this.variableNames.push("offset"),it="getOffsetAtOutCoords()");let st="1.0";rt!=null&&(assertAndGetBroadcastShape($,rt),this.variableNames.push("scale"),st="getScaleAtOutCoords()"),this.outputShape=$,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${it};
        float scale = ${st};
        float inv = scale * inversesqrt(variance + float(${nt}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BatchNormPackedProgram{constructor($,_e,et,tt,rt,nt){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],assertAndGetBroadcastShape($,_e),assertAndGetBroadcastShape($,et);let it="vec4(0.0)";tt!=null&&(assertAndGetBroadcastShape($,tt),this.variableNames.push("offset"),it="getOffsetAtOutCoords()");let st="vec4(1.0)";rt!=null&&(assertAndGetBroadcastShape($,rt),this.variableNames.push("scale"),st="getScaleAtOutCoords()"),this.outputShape=$,this.userCode=`
      void main() {
        vec4 offset = ${it};
        vec4 scale = ${st};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${nt}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const batchNorm=({inputs:_,backend:$,attrs:_e})=>{const{x:et,mean:tt,variance:rt,offset:nt,scale:it}=_;assert$1(tt.shape.length===rt.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),assert$1(nt==null||tt.shape.length===nt.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),assert$1(it==null||tt.shape.length===it.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:st}=_e;st==null&&(st=.001);const at=[et,tt,rt];let ot=null;nt!=null&&(ot=nt.shape,at.push(nt));let dt=null;it!=null&&(dt=it.shape,at.push(it));const ht=env().getBool("WEBGL_PACK_NORMALIZATION")?new BatchNormPackedProgram(et.shape,tt.shape,rt.shape,ot,dt,st):new BatchNormProgram(et.shape,tt.shape,rt.shape,ot,dt,st);return $.runWebGLProgram(ht,at,at[0].dtype)},batchNormConfig={kernelName:FusedBatchNorm,backendName:"webgl",kernelFunc:batchNorm};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SliceProgram{constructor($){this.variableNames=["source"],this.outputShape=$,this.rank=$.length;const _e=getCoordsDataType(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const et=getCoords$1(this.rank);let tt;const rt=$.map((nt,it)=>`sourceLoc.${coords[it]} = start[${it}] + coords.${coords[it]};`);tt=`
        ${_e} sourceLoc;
        ${_e} coords = getOutputCoords();
        ${rt.join(`
`)}
      `,this.userCode=`
      void main() {
        ${tt}
        setOutput(getSource(${et}));
      }
    `}}const coords=["x","y","z","w","u","v"];function getCoords$1(_){if(_===1)return"sourceLoc";if(_<=6)return coords.slice(0,_).map($=>"sourceLoc."+$).join(",");throw Error(`Slicing for rank ${_} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SlicePackedProgram{constructor($){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=$,this.rank=$.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const _e=getCoordsDataType(this.rank),et=getChannels("coords",this.rank),tt=getChannels("sourceLoc",this.rank),rt=this.rank===1?"sourceLoc":`vec2(${tt.slice(-2).join()})`,nt=`getChannel(getSource(${tt.join()}), ${rt})`,it=`
      result.x = ${nt};
      if (++${et[this.rank-1]} < ${$[this.rank-1]}) {
        ++${tt[this.rank-1]};
        result.y = ${nt};
        --${tt[this.rank-1]};
      }
    `,st=this.rank===1?"":`
      --${et[this.rank-1]};
      if (++${et[this.rank-2]} < ${$[this.rank-2]}) {
        ++${tt[this.rank-2]};
        result.z = ${nt};
        if (++${et[this.rank-1]} < ${$[this.rank-1]}) {
          ++${tt[this.rank-1]};
          result.w = ${nt};
        }
      }
    `,at=this.rank<=4?`sourceLoc = coords +
            ${_e}(${$.map((ot,dt)=>`start[${dt}]`).join()});`:$.map((ot,dt)=>`${tt[dt]} = ${et[dt]} + start[${dt}];`).join(`
`);this.userCode=`
      void main() {
        ${_e} coords = getOutputCoords();
        ${_e} sourceLoc;
        ${at}
        vec4 result = vec4(0.);
        ${it}
        ${st}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function shallowSlice(_,$,_e,et){const tt=et.texData.get(_.dataId),rt=et.makeTensorInfo(_e,_.dtype),nt=et.texData.get(rt.dataId);Object.assign(nt,tt),nt.refCount=1,nt.shape=_e,nt.dtype=_.dtype;let it=computeFlatOffset($,computeStrides(_.shape));tt.slice&&(it+=tt.slice.flatOffset),nt.slice={flatOffset:it,origDataId:tt.slice&&tt.slice.origDataId||_.dataId};const st=et.dataRefCount.get(nt.slice.origDataId)||1;return et.dataRefCount.set(nt.slice.origDataId,st+1),rt}function slice(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{begin:rt,size:nt}=et,[it,st]=parseSliceParams(tt,rt,nt);if(assertParamsValid(tt,it,st),sizeFromShape(st)===0)return _e.makeTensorInfo(st,tt.dtype,[]);if(_e.shouldExecuteOnCPU([tt])||tt.dtype==="string"){const dt=_e.texData.get(tt.dataId),ht=sliceImplCPU(dt.values,it,st,tt.shape,tt.dtype);return _e.makeTensorInfo(st,tt.dtype,ht)}const{isPacked:at}=_e.texData.get(tt.dataId),ot=isSliceContinous(tt.shape,it,st);if(at||!ot){const dt=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new SlicePackedProgram(st):new SliceProgram(st),ht=[it];return _e.runWebGLProgram(dt,[tt],tt.dtype,ht)}return _e.uploadToGPU(tt.dataId),shallowSlice(tt,it,st,_e)}const sliceConfig={kernelName:Slice,backendName:"webgl",kernelFunc:slice};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const batchToSpaceND=_=>{const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{blockShape:rt,crops:nt}=et;assert$1(tt.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const it=rt.reduce((At,jt)=>At*jt),st=getReshaped(tt.shape,rt,it),at=getPermuted(st.length,rt.length),ot=getReshapedPermuted(tt.shape,rt,it),dt=getSliceBeginCoords(nt,rt.length),ht=getSliceSize(ot,nt,rt.length),yt=[],vt=reshape({inputs:{x:tt},backend:_e,attrs:{shape:st}}),xt=transpose({inputs:{x:vt},backend:_e,attrs:{perm:at}}),wt=reshape({inputs:{x:xt},backend:_e,attrs:{shape:ot}}),Et=slice({inputs:{x:wt},backend:_e,attrs:{begin:dt,size:ht}});return yt.push(vt),yt.push(xt),yt.push(wt),yt.forEach(At=>_e.disposeIntermediateTensorInfo(At)),Et},batchToSpaceNDConfig={kernelName:BatchToSpaceND,backendName:"webgl",kernelFunc:batchToSpaceND};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bincount(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,weights:rt}=$,{size:nt}=et,it=_e.readSync(tt.dataId),st=_e.readSync(rt.dataId),at=bincountImplCPU(it,st,rt.dtype,rt.shape,nt);return _e.makeTensorInfo([nt],rt.dtype,at)}const bincountConfig={kernelName:Bincount,backendName:"webgl",kernelFunc:bincount};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BITWISEAND=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,BITWISEAND_UNPACKED=`
  return float(int(a.r) & int(b.r));
`;function bitwiseAnd(_){const{inputs:$,backend:_e}=_,{a:et,b:tt}=$,rt=env().getBool("WEBGL_PACK_BINARY_OPERATIONS"),nt=env().getNumber("WEBGL_VERSION");if(_e.shouldExecuteOnCPU([et,tt])||nt===1){const st=_e.texData.get(et.dataId).values,at=_e.texData.get(tt.dataId).values,[ot,dt]=bitwiseAndImplCPU(et.shape,tt.shape,st,at,et.dtype),ht=_e.makeTensorInfo(dt,et.dtype),yt=_e.texData.get(ht.dataId);return yt.values=ot,ht}let it;return rt?it=new BinaryOpPackedProgram(BITWISEAND,et.shape,tt.shape,!1):it=new BinaryOpProgram(BITWISEAND_UNPACKED,et.shape,tt.shape),_e.runWebGLProgram(it,[et,tt],et.dtype)}const bitwiseAndConfig={kernelName:BitwiseAnd,backendName:"webgl",kernelFunc:bitwiseAnd};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function broadcastArgs(_){const{inputs:$,backend:_e}=_,{s0:et,s1:tt}=$,rt=_e.readSync(et.dataId),nt=_e.readSync(tt.dataId),it=assertAndGetBroadcastShape(Array.from(rt),Array.from(nt));return _e.makeTensorInfo([it.length],"int32",Int32Array.from(it))}const broadcastArgsConfig={kernelName:BroadcastArgs,backendName:"webgl",kernelFunc:broadcastArgs};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NOT_EQUAL="return float(a != b);",notEqual=binaryKernelFunc({opSnippet:NOT_EQUAL,cpuKernelImpl:notEqualImplCPU,dtype:"bool"}),notEqualConfig={kernelName:NotEqual,backendName:"webgl",kernelFunc:notEqual};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function real(_){const{inputs:$,backend:_e}=_,{input:et}=$,tt=_e.texData.get(et.dataId);return identity$c({inputs:{x:tt.complexTensorInfos.real},backend:_e})}const realConfig={kernelName:Real,backendName:"webgl",kernelFunc:real};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TO_INT="return float(int(x));";function int(_,$){const _e=new UnaryOpProgram(_.shape,TO_INT),et=$.runWebGLProgram(_e,[_],"int32");return{dataId:et.dataId,shape:et.shape,dtype:et.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cast(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{dtype:rt}=et;if(rt==="complex64"){if(tt.dtype==="complex64")return identity$c({inputs:{x:tt},backend:_e});const nt=zeros$2(tt.shape),it=cast({inputs:{x:tt},backend:_e,attrs:{dtype:"float32"}}),st=complex({inputs:{real:it,imag:nt},backend:_e});return nt.dispose(),_e.disposeIntermediateTensorInfo(it),st}if(tt.dtype==="complex64"){const nt=real({inputs:{input:tt},backend:_e}),it=cast({inputs:{x:nt},backend:_e,attrs:{dtype:rt}});return _e.disposeIntermediateTensorInfo(nt),it}if(!hasEncodingLoss(tt.dtype,rt)){const nt=identity$c({inputs:{x:tt},backend:_e});return{dataId:nt.dataId,shape:nt.shape,dtype:rt}}if(_e.shouldExecuteOnCPU([tt])){const nt=_e.texData.get(tt.dataId).values,[it,st,at]=castImplCPU(nt,tt.shape,tt.dtype,rt);return _e.makeTensorInfo(it,st,at)}if(rt==="int32")return int(tt,_e);if(rt==="bool"){const nt=_e.makeTensorInfo([],"bool",getTypedArrayFromDType("bool",1)),st=notEqual({inputs:{a:tt,b:nt},backend:_e});return _e.disposeIntermediateTensorInfo(nt),st}throw new Error(`Error in Cast: failed to cast ${tt.dtype} to ${rt}`)}const castConfig={kernelName:Cast,backendName:"webgl",kernelFunc:cast};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CEIL="return ceil(x);",ceil=unaryKernelFunc({opSnippet:CEIL,packedOpSnippet:CEIL,cpuKernelImpl:ceilImplCPU}),ceilConfig={kernelName:Ceil,backendName:"webgl",kernelFunc:ceil};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ClipProgram{constructor($){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=$,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ClipPackedProgram{constructor($){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=$,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function clipByValue(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{clipValueMin:rt,clipValueMax:nt}=et;let it;env().getBool("WEBGL_PACK_CLIP")?it=new ClipPackedProgram(tt.shape):it=new ClipProgram(tt.shape);const st=[[rt],[nt]];return _e.runWebGLProgram(it,[tt],tt.dtype,st)}const clipByValueConfig={kernelName:ClipByValue,backendName:"webgl",kernelFunc:clipByValue};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ComplexAbsProgram{constructor($){this.variableNames=["real","imag"],this.outputShape=$,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function makeComplexComponentTensorInfo(_,$){return{dataId:$.dataId,dtype:$.dtype,shape:_.shape}}function complexAbs(_){const{inputs:$,backend:_e}=_,{x:et}=$,tt=_e.texData.get(et.dataId),rt=new ComplexAbsProgram(et.shape),nt=[makeComplexComponentTensorInfo(et,tt.complexTensorInfos.real),makeComplexComponentTensorInfo(et,tt.complexTensorInfos.imag)];return _e.runWebGLProgram(rt,nt,nt[0].dtype)}const complexAbsConfig={kernelName:ComplexAbs,backendName:"webgl",kernelFunc:complexAbs};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ConcatProgram{constructor($){this.outputShape=[],this.outputShape=computeOutShape$1($,1),this.variableNames=$.map((nt,it)=>`T${it}`);const _e=new Array($.length-1);_e[0]=$[0][1];for(let nt=1;nt<_e.length;nt++)_e[nt]=_e[nt-1]+$[nt][1];const et=[`if (yC < ${_e[0]}) setOutput(getT0(yR, yC));`];for(let nt=1;nt<_e.length;nt++){const it=_e[nt-1];et.push(`else if (yC < ${_e[nt]}) setOutput(getT${nt}(yR, yC-${it}));`)}const tt=_e.length,rt=_e[_e.length-1];et.push(`else setOutput(getT${tt}(yR, yC-${rt}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${et.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ConcatPackedProgram{constructor($,_e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=computeOutShape$1($,_e);const et=this.outputShape,tt=et.length,rt=getCoordsDataType(tt),nt=getChannels("coords",tt),it=["x","y","z","w","u","v"].slice(0,tt);this.variableNames=$.map((xt,wt)=>`T${wt}`);const st=new Array($.length-1);st[0]=$[0][_e];for(let xt=1;xt<st.length;xt++)st[xt]=st[xt-1]+$[xt][_e];const at=it[_e],ot=it.slice(-2),dt=it.join();let ht=`if (${at} < ${st[0]}) {
        return getChannel(
            getT0(${dt}), vec2(${ot.join()}));
        }`;for(let xt=1;xt<st.length;xt++){const wt=st[xt-1];ht+=`
        if (${at} < ${st[xt]}  && ${at} >= ${st[xt-1]}) {
          return getChannel(
            getT${xt}(${shiftedChannels(it,at,wt)}),
            vec2(${shiftedChannels(ot,at,wt)}));
        }`}const yt=st.length,vt=st[st.length-1];ht+=`
        return getChannel(
          getT${yt}(${shiftedChannels(it,at,vt)}),
          vec2(${shiftedChannels(ot,at,vt)}));`,this.userCode=`
      float getValue(${it.map(xt=>"int "+xt)}) {
        ${ht}
      }

      void main() {
        ${rt} coords = getOutputCoords();
        vec4 result = vec4(getValue(${nt}), 0., 0., 0.);

        ${nt[tt-1]} = ${nt[tt-1]} + 1;
        if (${nt[tt-1]} < ${et[tt-1]}) {
          result.g = getValue(${nt});
        }

        ${nt[tt-2]} = ${nt[tt-2]} + 1;
        if (${nt[tt-2]} < ${et[tt-2]}) {
          result.a = getValue(${nt});
        }

        ${nt[tt-1]} = ${nt[tt-1]} - 1;
        if (${nt[tt-2]} < ${et[tt-2]} &&
            ${nt[tt-1]} < ${et[tt-1]}) {
          result.b = getValue(${nt});
        }
        setOutput(result);
      }
    `}}function shiftedChannels(_,$,_e){const et=_.indexOf($);return _.map((rt,nt)=>nt===et?`${rt} - ${_e}`:rt).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function imag(_){const{inputs:$,backend:_e}=_,{input:et}=$,tt=_e.texData.get(et.dataId);return identity$c({inputs:{x:tt.complexTensorInfos.imag},backend:_e})}const imagConfig={kernelName:Imag,backendName:"webgl",kernelFunc:imag};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concatImpl(_,$,_e){const et=_[0].dtype;if(et==="complex64"){const yt=_.map(At=>real({inputs:{input:At},backend:_e})),vt=_.map(At=>imag({inputs:{input:At},backend:_e})),xt=concatImpl(yt,$,_e),wt=concatImpl(vt,$,_e),Et=complex({inputs:{real:xt,imag:wt},backend:_e});return yt.forEach(At=>_e.disposeIntermediateTensorInfo(At)),vt.forEach(At=>_e.disposeIntermediateTensorInfo(At)),_e.disposeIntermediateTensorInfo(xt),_e.disposeIntermediateTensorInfo(wt),Et}let tt=_e.shouldExecuteOnCPU(_);if(et==="string"&&(tt=!0),tt){const yt=_.map(kt=>{const Bt=[-1,sizeFromShape(kt.shape.slice($))];return reshape({inputs:{x:kt},backend:_e,attrs:{shape:Bt}})}),vt=yt.map(kt=>({vals:_e.readSync(kt.dataId),shape:kt.shape})),xt=computeOutShape$1(yt.map(kt=>kt.shape),1),wt=yt[0].shape[0]===1,Et=concatImplCPU(vt,xt,et,wt),At=computeOutShape$1(_.map(kt=>kt.shape),$),jt=_e.makeTensorInfo(At,et,Et);return yt.forEach(kt=>_e.disposeIntermediateTensorInfo(kt)),jt}const rt=_.filter(yt=>sizeFromShape(yt.shape)>0),nt=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&rt[0].shape.length>1;if(rt.length===1){const yt=nt?new UnaryOpProgram(_[0].shape,CLONE):new UnaryOpPackedProgram(_[0].shape,CLONE);return _e.runWebGLProgram(yt,_,et)}const it=env().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(rt.length>it){const yt=[];for(let xt=0;xt<rt.length;xt+=it){const wt=rt.slice(xt,xt+it);yt.push(concatImpl(wt,$,_e))}const vt=concatImpl(yt,$,_e);for(const xt of yt)_e.disposeIntermediateTensorInfo(xt);return vt}if(nt){const yt=new ConcatPackedProgram(rt.map(vt=>vt.shape),$);return _e.runWebGLProgram(yt,rt,et)}const{tensors2D:st,outShape:at}=computeTensors2D(rt,$,_e),ot=new ConcatProgram(st.map(yt=>yt.shape)),dt=_e.runWebGLProgram(ot,st,et);st.forEach(yt=>_e.disposeIntermediateTensorInfo(yt));const ht=reshape({inputs:{x:dt},attrs:{shape:at},backend:_e});return _e.disposeIntermediateTensorInfo(dt),ht}function computeTensors2D(_,$,_e){const et=computeOutShape$1(_.map(rt=>rt.shape),$);return{tensors2D:_.map(rt=>reshape({inputs:{x:rt},attrs:{shape:[-1,sizeFromShape(rt.shape.slice($))]},backend:_e})),outShape:et}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concat(_){const{inputs:$,backend:_e,attrs:et}=_,{axis:tt}=et,rt=parseAxisParam(tt,$[0].shape)[0],nt=$.map(at=>at.shape);assertParamsConsistent(nt,rt);const it=computeOutShape$1($.map(at=>at.shape),rt);if(sizeFromShape(it)===0)return _e.makeTensorInfo(it,$[0].dtype,[]);const st=$.filter(at=>sizeFromShape(at.shape)>0);return st.length===1?identity$c({inputs:{x:st[0]},backend:_e}):concatImpl(st,rt,_e)}const concatConfig={kernelName:Concat,backendName:"webgl",kernelFunc:concat};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Conv2DProgram{constructor($,_e=!1,et=null,tt=!1,rt=!1){this.variableNames=["x","W"],this.outputShape=$.outShape;const nt=$.padInfo.top,it=$.padInfo.left,st=$.strideHeight,at=$.strideWidth,ot=$.dilationHeight,dt=$.dilationWidth,ht=$.filterHeight,yt=$.filterWidth,vt=Math.floor($.inChannels/4)*4,xt=$.inChannels%4,wt=$.dataFormat==="channelsLast",Et=wt?1:2,At=wt?2:3,jt=wt?3:1;let kt="",Lt="";et&&(tt?kt=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${et}
        }`:rt?kt=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${et}
        }`:kt=`
          float activation(float x) {
            ${et}
          }
        `,Lt="result = activation(result);");const Bt=_e?"result += getBiasAtOutCoords();":"";_e&&this.variableNames.push("bias"),tt&&this.variableNames.push("preluActivationWeights"),rt&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${kt}

      const ivec2 strides = ivec2(${st}, ${at});
      const ivec2 pads = ivec2(${nt}, ${it});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${jt}];

        ivec2 xRCCorner =
            ivec2(coords[${Et}], coords[${At}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${ht}; wR++) {
          int xR = xRCorner + wR * ${ot};

          if (xR < 0 || xR >= ${$.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${yt}; wC++) {
            int xC = xCCorner + wC * ${dt};

            if (xC < 0 || xC >= ${$.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${vt}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${wt}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${xt===1}) {

              if (${wt}) {
                dotProd +=
                    getX(batch, xR, xC, ${vt}) *
                    getW(wR, wC, ${vt}, d2);
              } else {
                dotProd +=
                    getX(batch, ${vt}, xR, xC) *
                    getW(wR, wC, ${vt}, d2);
              }

            } else if (${xt===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${vt}, d2),
                getW(wR, wC, ${vt} + 1, d2)
              );

              if (${wt}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${vt}),
                  getX(batch, xR, xC, ${vt} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${vt}, xR, xC),
                  getX(batch, ${vt} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${xt===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${vt}, d2),
                getW(wR, wC, ${vt} + 1, d2),
                getW(wR, wC, ${vt} + 2, d2)
              );

              if (${wt}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${vt}),
                  getX(batch, xR, xC, ${vt} + 1),
                  getX(batch, xR, xC, ${vt} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${vt}, xR, xC),
                  getX(batch, ${vt} + 1, xR, xC),
                  getX(batch, ${vt} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${Bt}
        ${Lt}
        setOutput(result);
      }
    `}}class Conv3DProgram{constructor($){this.variableNames=["x","W"],this.outputShape=$.outShape;const _e=$.padInfo.front,et=$.padInfo.top,tt=$.padInfo.left,rt=$.strideDepth,nt=$.strideHeight,it=$.strideWidth,st=$.dilationDepth,at=$.dilationHeight,ot=$.dilationWidth,dt=$.filterDepth,ht=$.filterHeight,yt=$.filterWidth,vt=Math.floor($.inChannels/4)*4,xt=$.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${rt}, ${nt}, ${it});
      const ivec3 pads = ivec3(${_e}, ${et}, ${tt});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${dt}; wF++) {
          int xF = xFCorner + wF * ${st};

          if (xF < 0 || xF >= ${$.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${ht}; wR++) {
            int xR = xRCorner + wR * ${at};

            if (xR < 0 || xR >= ${$.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${yt}; wC++) {
              int xC = xCCorner + wC * ${ot};

              if (xC < 0 || xC >= ${$.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${vt}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${xt===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${vt}) *
                  getW(wF, wR, wC, ${vt}, d2);
              } else if (${xt===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${vt}),
                  getX(batch, xF, xR, xC, ${vt} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${vt}, d2),
                  getW(wF, wR, wC, ${vt} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${xt===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${vt}),
                  getX(batch, xF, xR, xC, ${vt} + 1),
                  getX(batch, xF, xR, xC, ${vt} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${vt}, d2),
                  getW(wF, wR, wC, ${vt} + 1, d2),
                  getW(wF, wR, wC, ${vt} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Conv2DPackedProgram{constructor($,_e=!1,et=null,tt=!1,rt=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=$.outShape,this.enableShapeUniforms=useShapeUniforms(this.outputShape.length);const nt=$.padInfo.left,it=$.strideWidth,st=$.dilationWidth,at=$.filterHeight,ot=$.filterWidth,dt=ot;let ht=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let wt=0;wt<ot;wt++)ht+=`
           vec4 xTexelC${wt*2};
           int xTexelC${wt*2}Ready;
           vec4 xTexelC${wt*2+1};
           int xTexelC${wt*2+1}Ready;
           vec4 xC${wt};`;ht+=`
     for (int r = 0; r < ${at}; r++) {
      for (int d1 = 0; d1 < ${$.inChannels}; d1 += 2) {
       `;for(let wt=0;wt<ot;wt++)ht+=`
           xTexelC${wt*2} = vec4(0.0);
           xTexelC${wt*2}Ready = 0;
           xTexelC${wt*2+1} = vec4(0.0);
           xTexelC${wt*2+1}Ready = 0;
           xC${wt} = vec4(0.0);`;ht+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let wt=0;wt<(dt+1)/2;wt++){const Et=wt*2;if(ht+=`
           xC = xCCorner + ${Et*st};
           `,it===1){if(Et<ot&&(nt%2===1?(ht+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${Et}Ready == 0) {
                   xTexelC${Et} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${Et}.zw = vec2(0.0);
                   }
                   xTexelC${Et}Ready = 1;
                 }
               `,st===1&&Et>0?ht+=`
                 xC${Et} = vec4(xTexelC${Et-2}.zw, xTexelC${Et}.xy);
                 `:ht+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${Et} = vec4(previous.zw, xTexelC${Et}.xy);
                   } else {
                     xC${Et} = vec4(0.0, 0.0, xTexelC${Et}.xy);
                   }
                   `):ht+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${Et}Ready == 0) {
                   xTexelC${Et} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${Et}.zw = vec2(0.0);
                   }
                   xTexelC${Et}Ready = 1;
                 }

                 xC${Et} = xTexelC${Et};
                 `,Et+1<ot)){const At=nt%2===0?nearestLargerEven(st):st;st%2===0&&nt%2===1||st%2!==0&&nt%2!==1?(ht+=`
                   xCOffset = xC + imod(pads[1], 2) + ${At};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${Et+1}Ready == 0) {
                     xTexelC${Et+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${Et+1}.zw = vec2(0.0);
                     }
                     xTexelC${Et+1}Ready = 1;
                   }
                   `,st>1?ht+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${Et+1} = vec4(previous.zw, xTexelC${Et+1}.xy);
                     } else {
                      xC${Et+1} = vec4(0.0, 0.0, xTexelC${Et+1}.xy);
                     }
                     `:ht+=`
                     xC${Et+1} = vec4(xTexelC${Et}.zw, xTexelC${Et+1}.xy);
                     `):At===1?ht+=`
                     xC${Et+1} = xTexelC${Et};
                     `:ht+=`
                     xCOffset = xC + ${At};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${Et+1}Ready == 0) {
                       xTexelC${Et+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${Et+1}.zw = vec2(0.0);
                       }
                       xTexelC${Et+1}Ready = 1;
                     }

                     xC${Et+1} = xTexelC${Et+1};
                     `}}else Et<ot&&(nt%2===1?(ht+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${Et}Ready == 0) {
                   xTexelC${Et} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${Et}.zw = vec2(0.0);
                   }
                   xTexelC${Et}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${Et+1}Ready == 0) {
                   xTexelC${Et+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${Et+1}.zw = vec2(0.0);
                   }
                   xTexelC${Et+1}Ready = 1;
                 }

                 xC${Et} = vec4(xTexelC${Et}.zw, xTexelC${Et+1}.zw);
               `,Et+1<ot&&(ht+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${Et+1} = vec4(xTexelC${Et+1}.xy, final.xy);
                 `)):(ht+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${Et}Ready == 0) {
                   xTexelC${Et} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${Et}.zw = vec2(0.0);
                   }
                   xTexelC${Et}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${Et+1}Ready == 0) {
                   xTexelC${Et+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${Et+1}.zw = vec2(0.);
                   }
                   xTexelC${Et+1}Ready = 1;
                 }

                 xC${Et} = vec4(
                   xTexelC${Et}.xy, xTexelC${Et+1}.xy);
               `,Et+1<ot&&(ht+=`
                   xC${Et+1} = vec4(xTexelC${Et}.zw, xTexelC${Et+1}.zw);
                 `)));Et<ot&&(ht+=`
             wTexel = getW(r, ${Et}, d1, d2);
             dotProd += xC${Et}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${$.inChannels}) {
               dotProd += xC${Et}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,Et+1<ot&&(ht+=`
               wTexel = getW(r, ${Et+1}, d1, d2);
               dotProd += xC${Et+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${$.inChannels}) {
                 dotProd += xC${Et+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}ht+=`
     }
   `,ht+=`
     }
   `,ht+=`
     }
   `;let yt="",vt="";et&&(tt?yt=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${et}
         }`:rt?yt=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${et}
         }`:yt=`vec4 activation(vec4 x) {
           ${et}
         }`,vt="result = activation(result);");const xt=_e?"result += getBiasAtOutCoords();":"";_e&&this.variableNames.push("bias"),tt&&this.variableNames.push("preluActivationWeights"),rt&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${yt}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${ht}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${xt}
         ${vt}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Im2ColPackedProgram{constructor($,_e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=$,this.enableShapeUniforms=useShapeUniforms(this.outputShape.length);const{dataFormat:et}=_e,tt=getGlslDifferences(),rt=et==="channelsLast",nt=rt?1:2,it=rt?2:3,st=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${$[2]} && pos < ${$[1]}) {`;let at="";for(let ot=0;ot<=1;ot++)for(let dt=0;dt<=1;dt++)at+=`
          blockIndex = rc.z + ${dt};
          pos = rc.y + ${ot};

          ${st}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${nt}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${it}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${rt}) {
                  innerDims = vec2(d1, ch);
                  result[${ot*2+dt}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${ot*2+dt}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${at}

        ${tt.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getShapeForBatchMatMul(_,$){const _e=_.length;return _e>=3?$?[..._.slice(0,-3),_[_e-3]*_[_e-2],_[_e-1]]:[..._.slice(0,-3),_[_e-3],_[_e-2]*_[_e-1]]:!$&&_e===1&&_[0]>1?[_[0],1]:null}function conv2dByMatMul({x:_,filter:$,convInfo:_e,backend:et,bias:tt=null,preluActivationWeights:rt=null,leakyreluAlpha:nt=0,activation:it=null}){const st=_.shape,at=et.texData.get(_.dataId),ot=_e.inChannels,dt=st[0]*st[1]*st[2],ht=_e.outChannels,yt=_e.dataFormat==="channelsLast",vt=!1,xt=!1;let wt;const Et=[];if(rt!=null){const kt=getShapeForBatchMatMul(rt.shape,yt);kt!=null&&(rt=reshape({inputs:{x:rt},backend:et,attrs:{shape:kt}}),Et.push(rt))}if(tt!=null){const kt=getShapeForBatchMatMul(tt.shape,yt);kt!=null&&(tt=reshape({inputs:{x:tt},backend:et,attrs:{shape:kt}}),Et.push(tt))}if(!((dt===1||ht===1)&&ot>MATMUL_SHARED_DIM_THRESHOLD)&&at.isPacked&&yt&&at.texture!=null&&st[2]%2!==0&&arraysEqual(at.shape.slice(-3),st.slice(-3))){const kt=st[0]*st[1]*(st[2]+1),Lt={dataId:_.dataId,shape:[1,kt,_e.inChannels],dtype:_.dtype},Bt=at.shape;at.shape=at.shape.slice(),at.shape[at.shape.length-2]++,assert$1(isReshapeFree(at.shape,Lt.shape),()=>`packed reshape ${at.shape} to ${Lt.shape} isn't free`);const Gt=reshape({inputs:{x:$},backend:et,attrs:{shape:[1,_e.inChannels,_e.outChannels]}});Et.push(Gt);const er=batchMatMulImpl({a:Lt,b:Gt,backend:et,transposeA:vt,transposeB:xt,bias:tt,activation:it,preluActivationWeights:rt,leakyreluAlpha:nt}),tr=et.texData.get(er.dataId);assert$1(tr.isPacked,()=>"batchMatMul result is expected to be packed"),at.shape=Bt,tr.shape=_e.outShape,wt=identity$c({inputs:{x:er},backend:et}),wt.shape=_e.outShape,Et.push(er)}else{const kt=_e.outHeight*_e.outWidth,Lt=reshape({inputs:{x:_},backend:et,attrs:{shape:yt?[_e.batchSize,kt,_e.inChannels]:[_e.batchSize,_e.inChannels,kt]}}),Bt=reshape({inputs:{x:$},backend:et,attrs:{shape:[1,_e.inChannels,_e.outChannels]}}),Gt=batchMatMulImpl({a:yt?Lt:Bt,b:yt?Bt:Lt,transposeA:!yt,transposeB:xt,backend:et,bias:tt,activation:it,preluActivationWeights:rt,leakyreluAlpha:nt});wt=reshape({inputs:{x:Gt},backend:et,attrs:{shape:_e.outShape}}),Et.push(Lt),Et.push(Bt),Et.push(Gt)}for(const kt of Et)et.disposeIntermediateTensorInfo(kt);return wt}function conv2dWithIm2Row({x:_,filter:$,convInfo:_e,backend:et,bias:tt=null,preluActivationWeights:rt=null,leakyreluAlpha:nt=0,activation:it=null}){const{filterWidth:st,filterHeight:at,inChannels:ot,outWidth:dt,outHeight:ht,dataFormat:yt}=_e,vt=yt==="channelsLast",xt=st*at*ot,wt=ht*dt,Et=[_e.batchSize,xt,wt],At=!0,jt=!1,kt=[];if(rt!=null){const Pt=getShapeForBatchMatMul(rt.shape,vt);Pt!=null&&(rt=reshape({inputs:{x:rt},backend:et,attrs:{shape:Pt}}),kt.push(rt))}if(tt!=null){const Pt=getShapeForBatchMatMul(tt.shape,vt);Pt!=null&&(tt=reshape({inputs:{x:tt},backend:et,attrs:{shape:Pt}}),kt.push(tt))}const Lt=reshape({inputs:{x:$},backend:et,attrs:{shape:[1,xt,sizeFromShape($.shape)/xt]}});kt.push(Lt);const Bt=new Im2ColPackedProgram(Et,_e),Gt=[_.shape,[_e.padInfo.top,_e.padInfo.left],[_e.strideHeight,_e.strideWidth],[_e.dilationHeight,_e.dilationWidth],[_e.inChannels],[_e.filterWidth*_e.inChannels],[_e.outWidth]],er=et.runWebGLProgram(Bt,[_],"float32",Gt),tr=reshape({inputs:{x:er},backend:et,attrs:{shape:Et}});kt.push(er),kt.push(tr);const ar=tt!=null,Mt=rt!=null,lt=it==="leakyrelu",mt=it?mapActivationToShaderProgram(it,!0):null,gt=new MatMulPackedProgram(vt?tr.shape:Lt.shape,vt?Lt.shape:tr.shape,vt?[_e.batchSize,wt,_e.outChannels]:[_e.batchSize,_e.outChannels,wt],At,jt,ar,mt,Mt,lt),bt=vt?[tr,Lt]:[Lt,tr];if(tt&&bt.push(tt),Mt&&bt.push(rt),lt){const Pt=et.makeTensorInfo([],"float32",createScalarValue(nt,"float32"));bt.push(Pt),kt.push(Pt)}const St=et.runWebGLProgram(gt,bt,"float32"),Nt=reshape({inputs:{x:St},backend:et,attrs:{shape:_e.outShape}});kt.push(St);for(const Pt of kt)et.disposeIntermediateTensorInfo(Pt);return Nt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2d(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,filter:rt}=$,{strides:nt,pad:it,dataFormat:st,dilations:at,dimRoundingMode:ot}=et,dt=convertConv2DDataFormat(st),ht=computeConv2DInfo(tt.shape,rt.shape,nt,at,it,ot,!1,dt);let yt;if(ht.filterHeight===1&&ht.filterWidth===1&&ht.dilationHeight===1&&ht.dilationWidth===1&&ht.strideHeight===1&&ht.strideWidth===1&&(ht.padInfo.type==="SAME"||ht.padInfo.type==="VALID"))yt=conv2dByMatMul({x:tt,filter:rt,convInfo:ht,backend:_e});else if(ht.strideWidth<=2&&dt==="channelsLast"&&env().getBool("WEBGL_EXP_CONV")){const xt=new Conv2DPackedProgram(ht),wt=[[ht.padInfo.top,ht.padInfo.left],[ht.strideHeight,ht.strideWidth],[ht.dilationHeight,ht.dilationWidth],[ht.inHeight,ht.inWidth]];yt=_e.runWebGLProgram(xt,[tt,rt],"float32",wt)}else if(env().getBool("WEBGL_CONV_IM2COL"))yt=conv2dWithIm2Row({x:tt,filter:rt,convInfo:ht,backend:_e});else{const xt=new Conv2DProgram(ht);yt=_e.runWebGLProgram(xt,[tt,rt],"float32")}const vt=reshape({inputs:{x:yt},backend:_e,attrs:{shape:ht.outShape}});return _e.disposeIntermediateTensorInfo(yt),vt}const conv2DConfig={kernelName:Conv2D$1,backendName:"webgl",kernelFunc:conv2d};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Conv2DDerFilterProgram{constructor($){this.variableNames=["x","dy"],this.outputShape=$.filterShape;const _e=$.strideHeight,et=$.strideWidth,tt=$.padInfo.top,rt=$.padInfo.left,nt=$.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${$.batchSize}; b++) {
          for (int yR = 0; yR < ${$.outHeight}; yR++) {
            int xR = wR + yR * ${_e} - ${tt};

            if (xR < 0 || xR >= ${$.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${$.outWidth}; yC++) {
              int xC = wC + yC * ${et} - ${rt};

              if (xC < 0 || xC >= ${$.inWidth}) {
                continue;
              }

              ${nt?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Conv2DDerInputProgram{constructor($){this.variableNames=["dy","W"],this.outputShape=$.inShape;const _e=$.filterHeight,et=$.filterWidth,tt=$.strideHeight,rt=$.strideWidth,nt=$.dataFormat==="channelsLast",it=_e-1-$.padInfo.top,st=et-1-$.padInfo.left,at=nt?1:2,ot=nt?2:3,dt=nt?3:1;this.userCode=`
      const ivec2 pads = ivec2(${it}, ${st});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${dt}];

        ivec2 dyCorner = ivec2(coords[${at}], coords[${ot}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${_e}; wR++) {
          float dyR = float(dyRCorner + wR) / ${tt}.0;

          if (dyR < 0.0 || dyR >= ${$.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${_e} - 1 - wR;

          for (int wC = 0; wC < ${et}; wC++) {
            float dyC = float(dyCCorner + wC) / ${rt}.0;

            if (dyC < 0.0 || dyC >= ${$.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${et} - 1 - wC;

            for (int d2 = 0; d2 < ${$.outChannels}; d2++) {

              if (${nt}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Conv3DDerFilterProgram{constructor($){this.variableNames=["x","dy"],this.outputShape=$.filterShape;const _e=$.strideDepth,et=$.strideHeight,tt=$.strideWidth,rt=$.padInfo.front,nt=$.padInfo.top,it=$.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${$.batchSize}; b++) {
          for (int yF = 0; yF < ${$.outDepth}; yF++) {
            int xF = wF + yF * ${_e} - ${rt};

            if (xF < 0 || xF >= ${$.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${$.outHeight}; yR++) {
              int xR = wR + yR * ${et} - ${nt};

              if (xR < 0 || xR >= ${$.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${$.outWidth}; yC++) {
                int xC = wC + yC * ${tt} - ${it};

                if (xC < 0 || xC >= ${$.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Conv3DDerInputProgram{constructor($){this.variableNames=["dy","W"],this.outputShape=$.inShape;const _e=$.filterDepth,et=$.filterHeight,tt=$.filterWidth,rt=$.strideDepth,nt=$.strideHeight,it=$.strideWidth,st=_e-1-$.padInfo.front,at=et-1-$.padInfo.top,ot=tt-1-$.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${st}, ${at}, ${ot});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${_e}; wF++) {
          float dyF = float(dyFCorner + wF) / ${rt}.0;

          if (dyF < 0.0 || dyF >= ${$.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${_e} - 1 - wF;

          for (int wR = 0; wR < ${et}; wR++) {
            float dyR = float(dyRCorner + wR) / ${nt}.0;

            if (dyR < 0.0 || dyR >= ${$.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${et} - 1 - wR;

            for (int wC = 0; wC < ${tt}; wC++) {
              float dyC = float(dyCCorner + wC) / ${it}.0;

              if (dyC < 0.0 || dyC >= ${$.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${tt} - 1 - wC;

              for (int d2 = 0; d2 < ${$.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropFilter(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,dy:rt}=$,{strides:nt,pad:it,dataFormat:st,dimRoundingMode:at,filterShape:ot}=et,dt=convertConv2DDataFormat(st),ht=computeConv2DInfo(tt.shape,ot,nt,1,it,at,!1,dt),yt=new Conv2DDerFilterProgram(ht);return _e.runWebGLProgram(yt,[tt,rt],"float32")}const conv2DBackpropFilterConfig={kernelName:Conv2DBackpropFilter,backendName:"webgl",kernelFunc:conv2DBackpropFilter};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Conv2DDerInputPackedProgram{constructor($){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=$.inShape,this.enableShapeUniforms=useShapeUniforms(this.outputShape.length);const _e=$.filterHeight,et=$.filterWidth,tt=_e-1-$.padInfo.top,rt=et-1-$.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${tt}, ${rt});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${_e}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${$.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${_e} - 1 - wR;

          for (int wC = 0; wC < ${et}; wC++) {
            int wCPerm = ${et} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${$.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${$.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${$.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${$.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${$.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropInput(_){const{inputs:$,backend:_e,attrs:et}=_,{dy:tt,filter:rt}=$,{inputShape:nt,strides:it,pad:st,dataFormat:at,dimRoundingMode:ot}=et,dt=convertConv2DDataFormat(at),ht=computeConv2DInfo(nt,rt.shape,it,1,st,ot,!1,dt);if(env().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&dt==="channelsLast"){const yt=[[ht.strideHeight,ht.strideWidth]],vt=new Conv2DDerInputPackedProgram(ht);return _e.runWebGLProgram(vt,[tt,rt],"float32",yt)}else{const yt=new Conv2DDerInputProgram(ht);return _e.runWebGLProgram(yt,[tt,rt],"float32")}}const conv2DBackpropInputConfig={kernelName:Conv2DBackpropInput,backendName:"webgl",kernelFunc:conv2DBackpropInput};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3D(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,filter:rt}=$,{strides:nt,pad:it,dilations:st}=et,at=computeConv3DInfo(tt.shape,rt.shape,nt,st,it),ot=new Conv3DProgram(at);return _e.runWebGLProgram(ot,[tt,rt],"float32")}const conv3DConfig={kernelName:Conv3D$1,backendName:"webgl",kernelFunc:conv3D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropFilterV2(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,dy:rt}=$,{strides:nt,pad:it,filterShape:st}=et,at=computeConv3DInfo(tt.shape,st,nt,1,it),ot=new Conv3DDerFilterProgram(at);return _e.runWebGLProgram(ot,[tt,rt],"float32")}const conv3DBackpropFilterV2Config={kernelName:Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:conv3DBackpropFilterV2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropInput(_){const{inputs:$,backend:_e,attrs:et}=_,{dy:tt,filter:rt}=$,{pad:nt,strides:it,inputShape:st}=et,at=computeConv3DInfo(st,rt.shape,it,1,nt),ot=new Conv3DDerInputProgram(at);return _e.runWebGLProgram(ot,[tt,rt],"float32")}const conv3DBackpropInputConfig={kernelName:Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:conv3DBackpropInput};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COS=CHECK_NAN_SNIPPET_UNARY+`
  return cos(x);
`,COS_PACKED=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${CHECK_NAN_SNIPPET_PACKED}
  return result;
`,cos$1=unaryKernelFunc({opSnippet:COS,packedOpSnippet:COS_PACKED}),cosConfig={kernelName:Cos,backendName:"webgl",kernelFunc:cos$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COSH=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,cosh=unaryKernelFunc({opSnippet:COSH}),coshConfig={kernelName:Cosh,backendName:"webgl",kernelFunc:cosh};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CropAndResizeProgram{constructor($,_e,et,tt,rt){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[nt,it,st,at]=$,[ot]=_e,[dt,ht]=et;this.outputShape=[ot,dt,ht,at];const yt=tt==="bilinear"?1:0,[vt,xt]=[`${it-1}.0`,`${st-1}.0`],[wt,Et,At]=dt>1?[`${(it-1)/(dt-1)}`,"(y2-y1) * height_ratio",`y1*${vt} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${vt}`],[jt,kt,Lt]=ht>1?[`${(st-1)/(ht-1)}`,"(x2-x1) * width_ratio",`x1*${xt} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${xt}`];this.userCode=`
      const float height_ratio = float(${wt});
      const float width_ratio = float(${jt});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${nt}) {
          return;
        }

        float height_scale = ${Et};
        float width_scale = ${kt};

        float in_y = ${At};
        if( in_y < 0.0 || in_y > ${vt} ) {
          setOutput(float(${rt}));
          return;
        }
        float in_x = ${Lt};
        if( in_x < 0.0 || in_x > ${xt} ) {
          setOutput(float(${rt}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${yt} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cropAndResize=_=>{const{inputs:$,backend:_e,attrs:et}=_,{image:tt,boxes:rt,boxInd:nt}=$,{cropSize:it,method:st,extrapolationValue:at}=et,ot=new CropAndResizeProgram(tt.shape,rt.shape,it,st,at);return _e.runWebGLProgram(ot,[tt,rt,nt],"float32")},cropAndResizeConfig={kernelName:CropAndResize,backendName:"webgl",kernelFunc:cropAndResize};var CumOpType;(function(_){_.Prod="*",_.Sum="+"})(CumOpType||(CumOpType={}));class CumProgram{constructor($,_e,et,tt){this.op=$,this.outputShape=_e,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const rt=this.outputShape.length,nt=this.op===CumOpType.Prod?"1.0":"0.0",it=et?nt:`getX(${getCoords(rt,"coords",this.op)})`,st=this.outputShape[this.outputShape.length-1];let at="",ot="";et?(at=tt?`end != ${st-1}`:"end != 0",ot=tt?"end + 1":"end - 1"):(at=tt?`end + pow2 < ${st}`:"end >= pow2",ot=tt?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${getCoordsDataType(rt)} coords = getOutputCoords();
        int end = ${getFinalCoord(rt,"coords",this.op)};
        float val = ${it};
        int pow2 = int(pow(2.0, index));
        if (${at}) {
          int idx = ${ot};
          ${getFinalCoord(rt,"coords",this.op)} = idx;
          val ${this.op}= getX(${getCoords(rt,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function getCoords(_,$,_e){if(_===1)return`${$}`;if(_===2)return`${$}.x, ${$}.y`;if(_===3)return`${$}.x, ${$}.y, ${$}.z`;if(_===4)return`${$}.x, ${$}.y, ${$}.z, ${$}.w`;throw new Error(`Cumulative ${_e} for rank ${_} is not yet supported`)}function getFinalCoord(_,$,_e){if(_===1)return`${$}`;if(_===2)return`${$}.y`;if(_===3)return`${$}.z`;if(_===4)return`${$}.w`;throw new Error(`Cumulative ${_e} for rank ${_} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cumImpl(_,$,_e,et,tt,rt){const nt=$.shape.length,it=getAxesPermutation([et],nt);let st=$;it!=null&&(st=transpose({inputs:{x:$},backend:_e,attrs:{perm:it}}));const at=getInnerMostAxes(1,nt)[0];if(at!==nt-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${$.shape.length-1} but got axis=${et}`);const ot=st.shape[at];let dt=identity$c({inputs:{x:st},backend:_e});for(let ht=0;ht<=Math.ceil(Math.log2(ot))-1;ht++){const yt=new CumProgram(_,st.shape,!1,rt),vt=[[ht]],xt=dt;dt=_e.runWebGLProgram(yt,[dt],dt.dtype,vt),_e.disposeIntermediateTensorInfo(xt)}if(tt){const ht=new CumProgram(_,st.shape,tt,rt),yt=dt;dt=_e.runWebGLProgram(ht,[dt],dt.dtype),_e.disposeIntermediateTensorInfo(yt)}if(it!=null){const ht=getUndoAxesPermutation(it),yt=transpose({inputs:{x:dt},backend:_e,attrs:{perm:ht}});return _e.disposeIntermediateTensorInfo(dt),_e.disposeIntermediateTensorInfo(st),yt}return dt}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cumprod(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{axis:rt,exclusive:nt,reverse:it}=et;return cumImpl(CumOpType.Prod,tt,_e,rt,nt,it)}const cumprodConfig={kernelName:Cumprod,backendName:"webgl",kernelFunc:cumprod};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cumsum(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{axis:rt,exclusive:nt,reverse:it}=et;return cumImpl(CumOpType.Sum,tt,_e,rt,nt,it)}const cumsumConfig={kernelName:Cumsum,backendName:"webgl",kernelFunc:cumsum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function denseBincount(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,weights:rt}=$,{size:nt,binaryOutput:it}=et;if(tt.shape.length===1){const st=_e.readSync(tt.dataId),at=_e.readSync(rt.dataId),ot=bincountImplCPU(st,at,rt.dtype,rt.shape,nt);return _e.makeTensorInfo([nt],rt.dtype,ot)}else if(tt.shape.length===2){const st=_e.bufferSync(tt),at=_e.bufferSync(rt),ot=bincountReduceImplCPU(st,at,nt,it);return _e.makeTensorInfo(ot.shape,rt.dtype,ot.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${tt.shape.length}.`)}const denseBincountConfig={kernelName:DenseBincount,backendName:"webgl",kernelFunc:denseBincount};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DepthToSpaceProgram{constructor($,_e,et){this.variableNames=["x"],this.outputShape=[],this.outputShape=$,this.blockSize=_e,this.dataFormat=et,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${_e};
      int offset_h = imod(h, ${_e});
      int in_w = w / ${_e};
      int offset_w = imod(w, ${_e});
      int offset_d = (offset_h * ${_e} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthToSpace(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{blockSize:rt,dataFormat:nt}=et,it=tt.shape[0],st=nt==="NHWC"?tt.shape[1]:tt.shape[2],at=nt==="NHWC"?tt.shape[2]:tt.shape[3],ot=nt==="NHWC"?tt.shape[3]:tt.shape[1],dt=st*rt,ht=at*rt,yt=ot/(rt*rt),vt=nt==="NHWC"?[it,dt,ht,yt]:[it,yt,dt,ht],xt=new DepthToSpaceProgram(vt,rt,nt);return _e.runWebGLProgram(xt,[tt],tt.dtype)}const depthToSpaceConfig={kernelName:DepthToSpace,backendName:"webgl",kernelFunc:depthToSpace};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DepthwiseConv2DProgram{constructor($,_e=!1,et=null,tt=!1,rt=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=$.outShape,this.enableShapeUniforms=useShapeUniforms(this.outputShape.length);const nt=$.filterHeight,it=$.filterWidth,st=$.outChannels/$.inChannels;let at="",ot="";et&&(tt?at=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${et}
        }`:rt?at=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${et}
        }`:at=`
          float activation(float x) {
            ${et}
          }
        `,ot="result = activation(result);");const dt=_e?"result += getBiasAtOutCoords();":"";_e&&this.variableNames.push("bias"),tt&&this.variableNames.push("preluActivationWeights"),rt&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${at}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${st};
        int q = d2 - d1 * ${st};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${nt}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${it}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${dt}
        ${ot}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DepthwiseConvPacked2DProgram{constructor($,_e=!1,et=null,tt=!1,rt=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=$.outShape,this.enableShapeUniforms=useShapeUniforms(this.outputShape.length);const nt=$.outChannels/$.inChannels,it=$.padInfo.left,st=$.strideWidth,at=$.dilationWidth,ot=$.filterHeight,dt=$.filterWidth,ht=dt;let yt=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let Et=0;Et<dt;Et++)yt+=`
          vec4 xTexelC${Et*2};
          int xTexelC${Et*2}Ready;
          vec4 xTexelC${Et*2+1};
          int xTexelC${Et*2+1}Ready;
          vec4 xC${Et};`;yt+=`
    for (int r = 0; r < ${ot}; r++) {
      `;for(let Et=0;Et<dt;Et++)yt+=`
          xTexelC${Et*2} = vec4(0.0);
          xTexelC${Et*2}Ready = 0;
          xTexelC${Et*2+1} = vec4(0.0);
          xTexelC${Et*2+1}Ready = 0;
          xC${Et} = vec4(0.0);`;yt+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let Et=0;Et<(ht+1)/2;Et++){const At=Et*2;if(yt+=`
          xC = xCCorner + ${At*at};
          `,st===1){if(At<dt&&(it%2===1?(yt+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${At}Ready == 0) {
                  xTexelC${At} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${At}.zw = vec2(0.0);
                  }
                  xTexelC${At}Ready = 1;
                }
              `,at===1&&At>0?yt+=`
                xC${At} = vec4(xTexelC${At-2}.zw, xTexelC${At}.xy);
                `:yt+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${At} = vec4(previous.zw, xTexelC${At}.xy);
                  } else {
                    xC${At} = vec4(0.0, 0.0, xTexelC${At}.xy);
                  }
                  `):yt+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${At}Ready == 0) {
                  xTexelC${At} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${At}.zw = vec2(0.0);
                  }
                  xTexelC${At}Ready = 1;
                }

                xC${At} = xTexelC${At};
                `,At+1<dt)){const jt=it%2===0?nearestLargerEven(at):at;at%2===0&&it%2===1||at%2!==0&&it%2!==1?(yt+=`
                  xCOffset = xC + imod(pads[1], 2) + ${jt};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${At+1}Ready == 0) {
                    xTexelC${At+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${At+1}.zw = vec2(0.0);
                    }
                    xTexelC${At+1}Ready = 1;
                  }
                  `,at>1?yt+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${At+1} = vec4(previous.zw, xTexelC${At+1}.xy);
                    } else {
                     xC${At+1} = vec4(0.0, 0.0, xTexelC${At+1}.xy);
                    }
                    `:yt+=`
                    xC${At+1} = vec4(xTexelC${At}.zw, xTexelC${At+1}.xy);
                    `):jt===1?yt+=`
                    xC${At+1} = xTexelC${At};
                    `:yt+=`
                    xCOffset = xC + ${jt};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${At+1}Ready == 0) {
                      xTexelC${At+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${At+1}.zw = vec2(0.0);
                      }
                      xTexelC${At+1}Ready = 1;
                    }

                    xC${At+1} = xTexelC${At+1};
                    `}}else At<dt&&(it%2===1?(yt+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${At}Ready == 0) {
                  xTexelC${At} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${At}.zw = vec2(0.0);
                  }
                  xTexelC${At}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${At+1}Ready == 0) {
                  xTexelC${At+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${At+1}.zw = vec2(0.0);
                  }
                  xTexelC${At+1}Ready = 1;
                }

                xC${At} = vec4(xTexelC${At}.zw, xTexelC${At+1}.zw);
              `,At+1<dt&&(yt+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${At+1} = vec4(xTexelC${At+1}.xy, final.xy);
                `)):(yt+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${At}Ready == 0) {
                  xTexelC${At} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${At}.zw = vec2(0.0);
                  }
                  xTexelC${At}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${At+1}Ready == 0) {
                  xTexelC${At+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${At+1}.zw = vec2(0.);
                  }
                  xTexelC${At+1}Ready = 1;
                }

                xC${At} = vec4(
                  xTexelC${At}.xy, xTexelC${At+1}.xy);
              `,At+1<dt&&(yt+=`
                  xC${At+1} = vec4(xTexelC${At}.zw, xTexelC${At+1}.zw);
                `)));At<dt&&(yt+=`
            wTexel = getW(r, ${At}, d1, q);
            dotProd += xC${At} * vec4(wTexel.xz, wTexel.xz);
          `,At+1<dt&&(yt+=`
              wTexel = getW(r, ${At+1}, d1, q);
              dotProd += xC${At+1} * vec4(wTexel.xz, wTexel.xz);
            `))}yt+=`
    }
  `,yt+=`
      }
    `;let vt="",xt="";et&&(tt?vt=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${et}
        }`:rt?vt=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${et}
        }`:vt=`vec4 activation(vec4 x) {
          ${et}
        }`,xt="result = activation(result);");const wt=_e?"result += getBiasAtOutCoords();":"";_e&&this.variableNames.push("bias"),tt&&this.variableNames.push("preluActivationWeights"),rt&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${vt}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${nt};
        int q = d2 - d1 * ${nt};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${yt}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${wt}
        ${xt}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNative(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,filter:rt}=$,{strides:nt,pad:it,dilations:st,dimRoundingMode:at}=et;let ot=st;ot==null&&(ot=[1,1]),assert$1(eitherStridesOrDilationsAreOne(nt,ot),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${nt} and dilations '${ot}'`);const dt=computeConv2DInfo(tt.shape,rt.shape,nt,ot,it,at,!0);let ht;env().getBool("WEBGL_PACK_DEPTHWISECONV")&&dt.strideWidth<=2&&dt.outChannels/dt.inChannels===1?ht=new DepthwiseConvPacked2DProgram(dt):ht=new DepthwiseConv2DProgram(dt);const yt=[[dt.padInfo.top,dt.padInfo.left],[dt.strideHeight,dt.strideWidth],[dt.dilationHeight,dt.dilationWidth],[dt.inHeight,dt.inWidth]];return _e.runWebGLProgram(ht,[tt,rt],"float32",yt)}const depthwiseConv2dNativeConfig={kernelName:DepthwiseConv2dNative,backendName:"webgl",kernelFunc:depthwiseConv2dNative};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DepthwiseConv2DDerFilterProgram{constructor($){this.variableNames=["x","dy"],this.outputShape=$.filterShape;const _e=$.strideHeight,et=$.strideWidth,tt=$.padInfo.top,rt=$.padInfo.left,nt=$.outChannels/$.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${nt} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${$.batchSize}; b++) {
          for (int yR = 0; yR < ${$.outHeight}; yR++) {
            int xR = wR + yR * ${_e} - ${tt};

            if (xR < 0 || xR >= ${$.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${$.outWidth}; yC++) {
              int xC = wC + yC * ${et} - ${rt};

              if (xC < 0 || xC >= ${$.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class DepthwiseConv2DDerInputProgram{constructor($){this.variableNames=["dy","W"],this.outputShape=$.inShape;const _e=$.filterHeight,et=$.filterWidth,tt=$.strideHeight,rt=$.strideWidth,nt=_e-1-$.padInfo.top,it=et-1-$.padInfo.left,st=$.outChannels/$.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${nt}, ${it});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${_e}; wR++) {
          float dyR = float(dyRCorner + wR) / ${tt}.0;

          if (dyR < 0.0 || dyR >= ${$.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${_e} - 1 - wR;

          for (int wC = 0; wC < ${et}; wC++) {
            float dyC = float(dyCCorner + wC) / ${rt}.0;

            if (dyC < 0.0 || dyC >= ${$.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${et} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${st}; dm++) {
              int d2 = d1 * ${st} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropFilter(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,dy:rt}=$,{strides:nt,dilations:it,pad:st,dimRoundingMode:at,filterShape:ot}=et,dt=computeConv2DInfo(tt.shape,ot,nt,it,st,at,!0),ht=new DepthwiseConv2DDerFilterProgram(dt);return _e.runWebGLProgram(ht,[tt,rt],"float32")}const depthwiseConv2dNativeBackpropFilterConfig={kernelName:DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:depthwiseConv2dNativeBackpropFilter};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropInput(_){const{inputs:$,backend:_e,attrs:et}=_,{dy:tt,filter:rt}=$,{strides:nt,dilations:it,pad:st,dimRoundingMode:at,inputShape:ot}=et,dt=computeConv2DInfo(ot,rt.shape,nt,it,st,at,!0),ht=new DepthwiseConv2DDerInputProgram(dt);return _e.runWebGLProgram(ht,[tt,rt],"float32")}const depthwiseConv2dNativeBackpropInputConfig={kernelName:DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:depthwiseConv2dNativeBackpropInput};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DiagProgram{constructor($){this.variableNames=["X"],this.outputShape=[$,$],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function diag(_){const{inputs:$,backend:_e}=_,{x:et}=$,tt=[...et.shape,...et.shape],rt=sizeFromShape(et.shape),nt=reshape({inputs:{x:et},backend:_e,attrs:{shape:[rt]}}),it=new DiagProgram(rt),st=_e.runWebGLProgram(it,[nt],nt.dtype),at=reshape({inputs:{x:st},backend:_e,attrs:{shape:tt}});return _e.disposeIntermediateTensorInfo(nt),_e.disposeIntermediateTensorInfo(st),at}const diagConfig={kernelName:Diag,backendName:"webgl",kernelFunc:diag};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dilation2DProgram{constructor($){this.variableNames=["x","W"],this.outputShape=$.outShape;const{inHeight:_e,inWidth:et,padInfo:tt,strideHeight:rt,strideWidth:nt,filterHeight:it,filterWidth:st,dilationHeight:at,dilationWidth:ot}=$,{top:dt,left:ht}=tt;this.userCode=`
      const ivec2 strides = ivec2(${rt}, ${nt});
      const ivec2 pads = ivec2(${dt}, ${ht});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${it}; h++) {
          int hIn = hBeg + h * ${at};

          if (hIn >= 0 && hIn < ${_e}) {
            for (int w = 0; w < ${st}; w++) {
              int wIn = wBeg + w * ${ot};

              if (wIn >= 0 && wIn < ${et}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dilation2D(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,filter:rt}=$,{strides:nt,pad:it,dilations:st}=et,at=computeDilation2DInfo(tt.shape,rt.shape,nt,it,"NHWC",st);let ot;const dt=new Dilation2DProgram(at);ot=_e.runWebGLProgram(dt,[tt,rt],"float32");const ht=reshape({inputs:{x:ot},backend:_e,attrs:{shape:at.outShape}});return _e.disposeIntermediateTensorInfo(ot),ht}const dilation2DConfig={kernelName:Dilation2D,backendName:"webgl",kernelFunc:dilation2D};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function einsum(_){const{inputs:$,backend:_e,attrs:et}=_,{equation:tt}=et,rt=$,{allDims:nt,summedDims:it,idDims:st}=decodeEinsumEquation(tt,rt.length);checkEinsumDimSizes(nt.length,st,rt);const{path:at,steps:ot}=getEinsumComputePath(it,st),dt=ot.length;let ht=null,yt=nt.length;const vt=[];for(let xt=0;xt<dt;++xt){for(const wt of ot[xt]){const{permutationIndices:Et,expandDims:At}=getEinsumPermutation(yt,st[wt]);let jt;isIdentityPermutation(Et)?jt=rt[wt]:(jt=transpose({inputs:{x:rt[wt]},backend:_e,attrs:{perm:Et}}),vt.push(jt));const kt=jt.shape.slice();for(let Lt=0;Lt<At.length;++Lt)kt.splice(At[Lt],0,1);arraysEqual(jt.shape,kt)||(jt=reshape({inputs:{x:jt},backend:_e,attrs:{shape:kt}}),vt.push(jt)),ht===null?ht=jt:(ht=multiply({inputs:{a:jt,b:ht},backend:_e}),vt.push(ht))}xt<dt-1&&(at[xt]>=0&&(ht=sum({inputs:{x:ht},backend:_e,attrs:{axis:at[xt]-(nt.length-yt),keepDims:!1}}),vt.push(ht)),yt--)}for(const xt of vt)xt!==ht&&_e.disposeIntermediateTensorInfo(xt);return ht}const einsumConfig={kernelName:Einsum,backendName:"webgl",kernelFunc:einsum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ELU="return (x >= 0.0) ? x : (exp(x) - 1.0);",ELU_PACKED=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,elu=unaryKernelFunc({opSnippet:ELU,packedOpSnippet:ELU_PACKED}),eluConfig={kernelName:Elu$1,backendName:"webgl",kernelFunc:elu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ELU_DER="return (b >= 0.0) ? a : a * (b + 1.0);",ELU_DER_PACKED=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,eluGrad=_=>{const{inputs:$,backend:_e}=_,{dy:et,y:tt}=$,rt=env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new BinaryOpPackedProgram(ELU_DER_PACKED,et.shape,tt.shape):new BinaryOpProgram(ELU_DER,et.shape,tt.shape);return _e.runWebGLProgram(rt,[et,tt],et.dtype)},eluGradConfig={kernelName:EluGrad,backendName:"webgl",kernelFunc:eluGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PACKED_EQUAL=`
  return vec4(equal(a, b));
`,EQUAL="return float(a == b);",equal=binaryKernelFunc({opSnippet:EQUAL,packedOpSnippet:PACKED_EQUAL,dtype:"bool",cpuKernelImpl:equalImplCPU}),equalConfig={kernelName:Equal,backendName:"webgl",kernelFunc:equal};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ERF=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${ERF_P};
  float a1 = ${ERF_A1};
  float a2 = ${ERF_A2};
  float a3 = ${ERF_A3};
  float a4 = ${ERF_A4};
  float a5 = ${ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,erf=unaryKernelFunc({opSnippet:ERF}),erfConfig={kernelName:Erf,backendName:"webgl",kernelFunc:erf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EXP=CHECK_NAN_SNIPPET_UNARY+`
  return exp(x);
`,EXP_PACKED=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,exp$1=unaryKernelFunc({opSnippet:EXP,packedOpSnippet:EXP_PACKED,cpuKernelImpl:expImplCPU,dtype:"float32"}),expConfig={kernelName:Exp,backendName:"webgl",kernelFunc:exp$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function expandDims(_){const{inputs:$,attrs:_e,backend:et}=_,{dim:tt}=_e,{input:rt}=$,nt=rt.shape.length,it=rt.shape.slice();let st=tt;return tt<0&&(assert$1(-(nt+1)<=tt,()=>`Axis must be in the interval [${-(nt+1)}, ${nt}]`),st=nt+tt+1),it.splice(st,0,1),reshape({inputs:{x:rt},backend:et,attrs:{shape:it}})}const expandDimsConfig={kernelName:ExpandDims,backendName:"webgl",kernelFunc:expandDims};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EXPM1="return exp(x) - 1.0;",expm1=unaryKernelFunc({opSnippet:EXPM1,packedOpSnippet:EXPM1,cpuKernelImpl:expm1ImplCPU}),expm1Config={kernelName:Expm1,backendName:"webgl",kernelFunc:expm1};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FFTProgram{constructor($,_e,et){this.variableNames=["real","imag"];const tt=_e[1];this.outputShape=_e;const rt=et?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,nt=et?`${tt}.0`:"1.0";let it;if($==="real")it="return real * expR - imag * expI;";else if($==="imag")it="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${$}.`);this.userCode=`
      const float exponentMultiplier = ${rt};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${it}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${tt});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${tt}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${nt};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fftImpl(_,$,_e){const et=_e.texData.get(_.dataId),tt=sizeFromShape(_.shape),rt=_.shape[_.shape.length-1],nt=tt/rt,it=reshape({inputs:{x:_},backend:_e,attrs:{shape:[nt,rt]}}),st=it.shape,at=new FFTProgram("real",st,$),ot=new FFTProgram("imag",st,$),dt=[{dataId:et.complexTensorInfos.real.dataId,dtype:et.complexTensorInfos.real.dtype,shape:st},{dataId:et.complexTensorInfos.imag.dataId,dtype:et.complexTensorInfos.imag.dtype,shape:st}],ht=_e.runWebGLProgram(at,dt,"float32"),yt=_e.runWebGLProgram(ot,dt,"float32"),vt=complex({inputs:{real:ht,imag:yt},backend:_e});_e.disposeIntermediateTensorInfo(ht),_e.disposeIntermediateTensorInfo(yt);const xt=reshape({inputs:{x:vt},backend:_e,attrs:{shape:_.shape}});return _e.disposeIntermediateTensorInfo(it),_e.disposeIntermediateTensorInfo(vt),xt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fft(_){const{inputs:$,backend:_e}=_,{input:et}=$;return fftImpl(et,!1,_e)}const fftConfig={kernelName:FFT,backendName:"webgl",kernelFunc:fft};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FillProgram{constructor($,_e){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=$,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fill(_){const{backend:$,attrs:_e}=_,{shape:et,value:tt}=_e;let{dtype:rt}=_e;if(rt=rt||inferDtype(tt),rt==="string"){const nt=getArrayFromDType(rt,sizeFromShape(et));return nt.fill(tt),$.makeTensorInfo(et,rt,nt)}else{const nt=new FillProgram(et,tt),it=[[tt]];return $.runWebGLProgram(nt,[],rt,it)}}const fillConfig={kernelName:Fill,backendName:"webgl",kernelFunc:fill};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FlipLeftRightProgram{constructor($){this.variableNames=["Image"],this.outputShape=[];const _e=$[2];this.outputShape=$,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${_e} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${_e}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const flipLeftRightConfig={kernelName:FlipLeftRight,backendName:"webgl",kernelFunc:({inputs:_,backend:$})=>{const{image:_e}=_,et=$,tt=new FlipLeftRightProgram(_e.shape);return et.runWebGLProgram(tt,[_e],_e.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FLOOR="return floor(x);",floor=unaryKernelFunc({opSnippet:FLOOR,packedOpSnippet:FLOOR,cpuKernelImpl:floorImplCPU}),floorConfig={kernelName:Floor,backendName:"webgl",kernelFunc:floor};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const INT_DIV=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,INT_DIV_PACKED=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,floorDiv=binaryKernelFunc({opSnippet:INT_DIV,packedOpSnippet:INT_DIV_PACKED,dtype:"int32"}),floorDivConfig={kernelName:FloorDiv,backendName:"webgl",kernelFunc:floorDiv};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FromPixelsProgram{constructor($){this.variableNames=["A"];const _e=getGlslDifferences(),[et,tt]=$;this.outputShape=$,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${tt}.0, ${et}.0);

        vec4 values = ${_e.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FromPixelsPackedProgram{constructor($){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const _e=getGlslDifferences(),[et,tt]=$;this.outputShape=$,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${tt}.0, ${et}.0);
            vec4 values = ${_e.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${_e.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fromPixelsConfig={kernelName:FromPixels,backendName:"webgl",kernelFunc:fromPixels};let fromPixels2DContext,willReadFrequently=env().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function fromPixels(_){const{inputs:$,backend:_e,attrs:et}=_;let{pixels:tt}=$;const{numChannels:rt}=et,nt=typeof HTMLVideoElement<"u"&&tt instanceof HTMLVideoElement,it=typeof HTMLImageElement<"u"&&tt instanceof HTMLImageElement,[st,at]=nt?[tt.videoWidth,tt.videoHeight]:[tt.width,tt.height],ot=[at,st],dt=[at,st,rt];if(it||nt){const xt=env().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(fromPixels2DContext==null||xt!==willReadFrequently)&&(willReadFrequently=xt,fromPixels2DContext=document.createElement("canvas").getContext("2d",{willReadFrequently})),fromPixels2DContext.canvas.width=st,fromPixels2DContext.canvas.height=at,fromPixels2DContext.drawImage(tt,0,0,st,at),tt=fromPixels2DContext.canvas}const ht=_e.makeTensorInfo(ot,"int32");_e.texData.get(ht.dataId).usage=TextureUsage.PIXELS,_e.gpgpu.uploadPixelDataToTexture(_e.getTexture(ht.dataId),tt);const yt=env().getBool("WEBGL_PACK")?new FromPixelsPackedProgram(dt):new FromPixelsProgram(dt),vt=_e.runWebGLProgram(yt,[ht],"int32");return _e.disposeData(ht.dataId),vt}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedConv2d(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,filter:rt,bias:nt,preluActivationWeights:it}=$,{strides:st,pad:at,dataFormat:ot,dilations:dt,dimRoundingMode:ht,activation:yt,leakyreluAlpha:vt}=et,xt=convertConv2DDataFormat(ot),wt=computeConv2DInfo(tt.shape,rt.shape,st,dt,at,ht,!1,xt);let Et;const At=[],jt=nt!=null,kt=it!=null,Lt=yt==="leakyrelu",Bt=()=>{const er=[tt,rt],tr=(ar,Mt)=>{if(Mt==="NCHW"&&ar.shape.length===1&&ar.shape[0]!==1){const lt=reshape({inputs:{x:ar},backend:_e,attrs:{shape:[ar.shape[0],1,1]}});return At.push(lt),lt}return ar};if(jt&&er.push(tr(nt,ot)),kt&&er.push(tr(it,ot)),Lt){const ar=_e.makeTensorInfo([],"float32",createScalarValue(vt,"float32"));er.push(ar),At.push(ar)}return er};if(wt.filterHeight===1&&wt.filterWidth===1&&wt.dilationHeight===1&&wt.dilationWidth===1&&wt.strideHeight===1&&wt.strideWidth===1&&(wt.padInfo.type==="SAME"||wt.padInfo.type==="VALID"))Et=conv2dByMatMul({x:tt,filter:rt,convInfo:wt,backend:_e,bias:nt,activation:yt,preluActivationWeights:it,leakyreluAlpha:vt});else if(wt.strideWidth<=2&&xt==="channelsLast"&&env().getBool("WEBGL_EXP_CONV")){const er=yt?mapActivationToShaderProgram(yt,!0):null,tr=new Conv2DPackedProgram(wt,jt,er,kt,Lt),ar=[[wt.padInfo.top,wt.padInfo.left],[wt.strideHeight,wt.strideWidth],[wt.dilationHeight,wt.dilationWidth],[wt.inHeight,wt.inWidth]],Mt=Bt();Et=_e.runWebGLProgram(tr,Mt,"float32",ar)}else if(env().getBool("WEBGL_CONV_IM2COL"))Et=conv2dWithIm2Row({x:tt,filter:rt,convInfo:wt,backend:_e,bias:nt,activation:yt,preluActivationWeights:it,leakyreluAlpha:vt});else{const er=yt?mapActivationToShaderProgram(yt,!1):null,tr=new Conv2DProgram(wt,jt,er,kt,Lt),ar=Bt();Et=_e.runWebGLProgram(tr,ar,"float32")}const Gt=reshape({inputs:{x:Et},backend:_e,attrs:{shape:wt.outShape}});return At.push(Et),At.forEach(er=>_e.disposeIntermediateTensorInfo(er)),Gt}const fusedConv2DConfig={kernelName:FusedConv2D,backendName:"webgl",kernelFunc:fusedConv2d};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedDepthwiseConv2D(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,filter:rt,bias:nt,preluActivationWeights:it}=$,{strides:st,pad:at,dilations:ot,dimRoundingMode:dt,activation:ht,leakyreluAlpha:yt}=et,vt=[];let xt=ot;xt==null&&(xt=[1,1]),assert$1(eitherStridesOrDilationsAreOne(st,xt),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${st} and dilations '${xt}'`);const wt=computeConv2DInfo(tt.shape,rt.shape,st,xt,at,dt,!0),Et=env().getBool("WEBGL_PACK_DEPTHWISECONV")&&wt.strideWidth<=2&&wt.outChannels/wt.inChannels===1,At=ht?mapActivationToShaderProgram(ht,Et):null,jt=[tt,rt],kt=nt!=null,Lt=it!=null,Bt=ht==="leakyrelu";if(kt&&jt.push(nt),Lt&&jt.push(it),Bt){const ar=_e.makeTensorInfo([],"float32",createScalarValue(yt,"float32"));jt.push(ar),vt.push(ar)}let Gt;Et?Gt=new DepthwiseConvPacked2DProgram(wt,kt,At,Lt,Bt):Gt=new DepthwiseConv2DProgram(wt,kt,At,Lt,Bt);const er=[[wt.padInfo.top,wt.padInfo.left],[wt.strideHeight,wt.strideWidth],[wt.dilationHeight,wt.dilationWidth],[wt.inHeight,wt.inWidth]],tr=_e.runWebGLProgram(Gt,jt,"float32",er);return vt.forEach(ar=>_e.disposeIntermediateTensorInfo(ar)),tr}const fusedDepthwiseConv2DConfig={kernelName:FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:fusedDepthwiseConv2D};class GatherNDProgram{constructor($,_e,et,tt){this.sliceDim=$,this.strides=_e,this.paramsShape=tt,this.variableNames=["x","indices"],this.outputShape=et;const rt=getCoordsDataType(et.length);let nt=`
    int index;`;for(let it=0;it<this.sliceDim;it++)nt+=`
          index = round(getIndices(coords[0], ${it}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[it]};
          flattenIndex += index * ${this.strides[it]};`;this.userCode=`
         void main() {
          ${rt} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${nt}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherNd(_){const{inputs:$,backend:_e}=_,{params:et,indices:tt}=$,rt=tt.shape,nt=rt[rt.length-1],it=sizeFromShape(et.shape),[st,at,ot,dt]=prepareAndValidate(et,tt),ht=reshape({inputs:{x:tt},backend:_e,attrs:{shape:[at,nt]}}),yt=reshape({inputs:{x:et},backend:_e,attrs:{shape:[sizeFromShape(et.shape)/ot,ot]}});if(_e.shouldExecuteOnCPU([et,tt])||et.dtype==="string"){const Et=_e.readSync(tt.dataId),At=_e.bufferSync(et),jt=gatherNdImplCPU(Et,At,et.dtype,at,nt,ot,dt,et.shape,it);return _e.makeTensorInfo(st,et.dtype,jt.values)}const vt=new GatherNDProgram(nt,dt,[at,ot],et.shape),xt=_e.runWebGLProgram(vt,[yt,ht],yt.dtype),wt=reshape({inputs:{x:xt},backend:_e,attrs:{shape:st}});return _e.disposeIntermediateTensorInfo(ht),_e.disposeIntermediateTensorInfo(yt),_e.disposeIntermediateTensorInfo(xt),wt}const gatherNdConfig={kernelName:GatherNd,backendName:"webgl",kernelFunc:gatherNd};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GatherProgram{constructor($,_e){this.variableNames=["A","indices"],this.outputShape=_e,this.rank=_e.length;const et=getCoordsDataType(this.rank),tt=getSourceCoords$1($);this.userCode=`
      void main() {
        ${et} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${$[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${tt}));
      }
    `}}function getSourceCoords$1(_,$){const _e=["resRC.x","resRC.y","resRC.z","resRC.w"],et=[];for(let tt=0;tt<_.length;tt++)tt===2?et.push("index"):et.push(`${_e[tt]}`);return et.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherV2(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,indices:rt}=$,{axis:nt,batchDims:it}=et,st=parseAxisParam(nt,tt.shape)[0];if(env().get("DEBUG")){const At=_e.readSync(rt.dataId),jt=tt.shape[st];for(let kt=0;kt<At.length;++kt){const Lt=At[kt];assert$1(Lt<=jt-1&&Lt>=0,()=>`GatherV2: the index value ${Lt} is not in [0, ${jt-1}]`)}}const at=collectGatherOpShapeInfo(tt,rt,st,it),ot=sizeFromShape(rt.shape),dt=[],ht=reshape({inputs:{x:tt},backend:_e,attrs:{shape:[at.batchSize,at.outerSize,at.dimSize,at.sliceSize]}}),yt=reshape({inputs:{x:rt},backend:_e,attrs:{shape:[at.batchSize,ot/at.batchSize]}});dt.push(ht),dt.push(yt);const vt=[at.batchSize,at.outerSize,ot/at.batchSize,at.sliceSize];if(_e.shouldExecuteOnCPU([tt,rt])||tt.dtype==="string"){const At=_e.bufferSync(yt),jt=_e.bufferSync(ht),kt=gatherV2ImplCPU(jt,At,vt);return dt.forEach(Lt=>_e.disposeIntermediateTensorInfo(Lt)),_e.makeTensorInfo(at.outputShape,kt.dtype,kt.values)}const xt=new GatherProgram(ht.shape,vt),wt=_e.runWebGLProgram(xt,[ht,yt],ht.dtype);dt.push(wt);const Et=reshape({inputs:{x:wt},backend:_e,attrs:{shape:at.outputShape}});return dt.forEach(At=>_e.disposeIntermediateTensorInfo(At)),Et}const gatherV2Config={kernelName:GatherV2,backendName:"webgl",kernelFunc:gatherV2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GREATER="return float(a > b);",GREATER_PACKED=`
  return vec4(greaterThan(a, b));
`,greater=binaryKernelFunc({opSnippet:GREATER,packedOpSnippet:GREATER_PACKED,cpuKernelImpl:greaterImplCPU,dtype:"bool"}),greaterConfig={kernelName:Greater,backendName:"webgl",kernelFunc:greater};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GREATER_EQUAL="return float(a >= b);",GREATER_EQUAL_PACKED=`
  return vec4(greaterThanEqual(a, b));
`,greaterEqual=binaryKernelFunc({opSnippet:GREATER_EQUAL,packedOpSnippet:GREATER_EQUAL_PACKED,dtype:"bool",cpuKernelImpl:greaterEqualImplCPU}),greaterEqualConfig={kernelName:GreaterEqual,backendName:"webgl",kernelFunc:greaterEqual};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ifft(_){const{inputs:$,backend:_e}=_,{input:et}=$;return fftImpl(et,!0,_e)}const ifftConfig={kernelName:IFFT,backendName:"webgl",kernelFunc:ifft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IS_FINITE="return float(!isnan(x) && !isinf(x));",isFinite$1=unaryKernelFunc({opSnippet:IS_FINITE,dtype:"bool"}),isFiniteConfig={kernelName:IsFinite,backendName:"webgl",kernelFunc:isFinite$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IS_INF="return float(isinf(x));",isInf=unaryKernelFunc({opSnippet:IS_INF,dtype:"bool"}),isInfConfig={kernelName:IsInf,backendName:"webgl",kernelFunc:isInf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IS_NAN="return float(isnan(x));",isNaN$2=unaryKernelFunc({opSnippet:IS_NAN,dtype:"bool"}),isNaNConfig={kernelName:IsNan,backendName:"webgl",kernelFunc:isNaN$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LESS="return float(a < b);",LESS_PACKED=`
  return vec4(lessThan(a, b));
`,less=binaryKernelFunc({opSnippet:LESS,packedOpSnippet:LESS_PACKED,cpuKernelImpl:lessImplCPU,dtype:"bool"}),lessConfig={kernelName:Less,backendName:"webgl",kernelFunc:less};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LESS_EQUAL="return float(a <= b);",LESS_EQUAL_PACKED=`
  return vec4(lessThanEqual(a, b));
`,lessEqual=binaryKernelFunc({opSnippet:LESS_EQUAL,packedOpSnippet:LESS_EQUAL_PACKED,cpuKernelImpl:lessEqualImplCPU,dtype:"bool"}),lessEqualConfig={kernelName:LessEqual,backendName:"webgl",kernelFunc:lessEqual};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function linSpace(_){const{backend:$,attrs:_e}=_,{start:et,stop:tt,num:rt}=_e,nt=linSpaceImplCPU(et,tt,rt);return $.makeTensorInfo([nt.length],"float32",nt)}const linSpaceConfig={kernelName:LinSpace,backendName:"webgl",kernelFunc:linSpace};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOG=CHECK_NAN_SNIPPET_UNARY+`
  return x < 0.0 ? 0./0. : log(x);
`,LOG_PACKED=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,log$1=unaryKernelFunc({opSnippet:LOG,packedOpSnippet:LOG_PACKED,cpuKernelImpl:logImplCPU}),logConfig={kernelName:Log,backendName:"webgl",kernelFunc:log$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOG1P=CHECK_NAN_SNIPPET_UNARY+`
  return log(1.0 + x);
`,log1p=unaryKernelFunc({opSnippet:LOG1P}),log1pConfig={kernelName:Log1p,backendName:"webgl",kernelFunc:log1p};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOGICAL_AND="return float(a >= 1.0 && b >= 1.0);",LOGICAL_AND_PACKED=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,logicalAnd=binaryKernelFunc({opSnippet:LOGICAL_AND,packedOpSnippet:LOGICAL_AND_PACKED,dtype:"bool"}),logicalAndConfig={kernelName:LogicalAnd,backendName:"webgl",kernelFunc:logicalAnd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOGICAL_NOT="return float(!(x >= 1.0));",logicalNot=unaryKernelFunc({opSnippet:LOGICAL_NOT}),logicalNotConfig={kernelName:LogicalNot,backendName:"webgl",kernelFunc:logicalNot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOGICAL_OR="return float(a >= 1.0 || b >= 1.0);",LOGICAL_OR_PACKED=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,logicalOr=binaryKernelFunc({opSnippet:LOGICAL_OR,packedOpSnippet:LOGICAL_OR_PACKED,dtype:"bool"}),logicalOrConfig={kernelName:LogicalOr,backendName:"webgl",kernelFunc:logicalOr};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LRNProgram{constructor($,_e,et,tt,rt){this.variableNames=["x"],this.outputShape=[];const nt=_e,it=$[3]-1;this.outputShape=$;let st;const at=`float(${et}) + float(${tt}) * sum`;rt===.5?st=`inversesqrt(${at})`:rt===1?st=`1.0/(${at})`:st=`exp(log(${at}) * float(-${rt}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${nt}; j <= ${nt}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${it}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${st};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LRNPackedProgram{constructor($,_e,et,tt,rt){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const nt=_e,it=$[3]-1;this.outputShape=$;let st;const at=`float(${et}) + float(${tt}) * sum`;rt===.5?st=`inversesqrt(${at})`:rt===1?st=`1.0/(${at})`:st=`exp(log(${at}) * float(-${rt}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${nt};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${nt}; j <= ${nt}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${it}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${st};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lrn=_=>{const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{depthRadius:rt,bias:nt,alpha:it,beta:st}=et,at=env().getBool("WEBGL_PACK_NORMALIZATION")?new LRNPackedProgram(tt.shape,rt,nt,it,st):new LRNProgram(tt.shape,rt,nt,it,st);return _e.runWebGLProgram(at,[tt],tt.dtype)},LRNConfig={kernelName:LRN,backendName:"webgl",kernelFunc:lrn};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LRNGradProgram{constructor($,_e,et,tt,rt){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=$,this.depth=$[3],this.depthRadius=_e,this.bias=et,this.alpha=tt,this.beta=rt,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${_e})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${_e} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${tt}) * norm + float(${et});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${tt})
                * float(${rt})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${rt});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lrnGrad=_=>{const{inputs:$,backend:_e,attrs:et}=_,{x:tt,y:rt,dy:nt}=$,{depthRadius:it,bias:st,alpha:at,beta:ot}=et,dt=new LRNGradProgram(tt.shape,it,st,at,ot);return _e.runWebGLProgram(dt,[tt,rt,nt],tt.dtype)},LRNGradConfig={kernelName:LRNGrad,backendName:"webgl",kernelFunc:lrnGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxImpl(_,$,_e,et){const tt=sizeFromShape($),nt=sizeFromShape(_.shape)/tt,it=reshape({inputs:{x:_},attrs:{shape:[nt,tt]},backend:et}),st=reduce(it,_.dtype,"max",et),at=reshape({inputs:{x:st},attrs:{shape:_e},backend:et});return et.disposeIntermediateTensorInfo(it),et.disposeIntermediateTensorInfo(st),at}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function max$3(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{reductionIndices:rt,keepDims:nt}=et,it=tt.shape.length,st=parseAxisParam(rt,tt.shape);let at=st;const ot=getAxesPermutation(at,it),dt=ot!=null,ht=_e.shouldExecuteOnCPU([tt]);let yt=tt;if(dt){if(ht){const jt=_e.texData.get(yt.dataId).values,kt=new Array(it);for(let Gt=0;Gt<kt.length;Gt++)kt[Gt]=tt.shape[ot[Gt]];const Lt=transposeImplCPU(jt,tt.shape,tt.dtype,ot,kt);yt=_e.makeTensorInfo(kt,tt.dtype);const Bt=_e.texData.get(yt.dataId);Bt.values=Lt}else yt=transposeImpl(tt,ot,_e);at=getInnerMostAxes(at.length,it)}assertAxesAreInnerMostDims("max",at,it);const[vt,xt]=computeOutAndReduceShapes(yt.shape,at);let wt=vt;nt&&(wt=expandShapeToKeepDim(vt,st));let Et;if(ht){const jt=_e.texData.get(yt.dataId).values,kt=maxImplCPU(jt,sizeFromShape(xt),wt,tt.dtype);Et=_e.makeTensorInfo(wt,tt.dtype);const Lt=_e.texData.get(Et.dataId);Lt.values=kt}else Et=maxImpl(yt,xt,wt,_e);return dt&&_e.disposeIntermediateTensorInfo(yt),Et}const maxConfig={kernelName:Max,backendName:"webgl",kernelFunc:max$3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MAXIMUM=CHECK_NAN_SNIPPET+`
  return max(a, b);
`,MAXIMUM_PACKED=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+CHECK_NAN_SNIPPET_PACKED+`
  return result;
`,maximum=binaryKernelFunc({opSnippet:MAXIMUM,packedOpSnippet:MAXIMUM_PACKED,cpuKernelImpl:maximumImplCPU}),maximumConfig={kernelName:Maximum$1,backendName:"webgl",kernelFunc:maximum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$;assertNotComplex(tt,"maxPool");const{filterSize:rt,strides:nt,pad:it,dimRoundingMode:st}=et,at=1;assert$1(eitherStridesOrDilationsAreOne(nt,at),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${nt} and dilations '${at}'`);const ot=computePool2DInfo(tt.shape,rt,nt,at,it,st);if(ot.filterWidth===1&&ot.filterHeight===1&&arraysEqual(ot.inShape,ot.outShape))return identity$c({inputs:{x:tt},backend:_e});const dt=new Pool2DProgram(ot,"max",!1);return _e.runWebGLProgram(dt,[tt],tt.dtype)}const maxPoolConfig={kernelName:MaxPool,backendName:"webgl",kernelFunc:maxPool};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3d(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{filterSize:rt,strides:nt,pad:it,dataFormat:st,dimRoundingMode:at}=et,ot=[1,1,1],dt=computePool3DInfo(tt.shape,rt,nt,ot,it,at,st),ht=new Pool3DProgram(dt,"max",!1);return _e.runWebGLProgram(ht,[tt],tt.dtype)}const maxPool3DConfig={kernelName:MaxPool3D,backendName:"webgl",kernelFunc:maxPool3d};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MaxPool2DBackpropProgram{constructor($){this.variableNames=["dy","maxPos"],this.outputShape=$.inShape;const _e=$.strideHeight,et=$.strideWidth,tt=$.dilationHeight,rt=$.effectiveFilterHeight,nt=$.effectiveFilterWidth,it=rt-1-$.padInfo.top,st=nt-1-$.padInfo.left,at=rt*nt-1;this.userCode=`
      const ivec2 pads = ivec2(${it}, ${st});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${rt};
          wR += ${tt}) {
          float dyR = float(dyRCorner + wR) / ${_e}.0;

          if (dyR < 0.0 || dyR >= ${$.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${nt}; wC++) {
            float dyC = float(dyCCorner + wC) / ${et}.0;

            if (dyC < 0.0 || dyC >= ${$.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${at} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${nt} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class MaxPool3DBackpropProgram{constructor($){this.variableNames=["dy","maxPos"],this.outputShape=$.inShape;const _e=$.strideDepth,et=$.strideHeight,tt=$.strideWidth,rt=$.dilationDepth,nt=$.dilationHeight,it=$.dilationWidth,st=$.effectiveFilterDepth,at=$.effectiveFilterHeight,ot=$.effectiveFilterWidth,dt=st-1-$.padInfo.front,ht=at-1-$.padInfo.top,yt=ot-1-$.padInfo.left,vt=st*at*ot-1;this.userCode=`
      const ivec3 pads = ivec3(${dt}, ${ht}, ${yt});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${st};
           wD += ${rt}) {
          float dyD = float(dyDCorner + wD) / ${_e}.0;

          if (dyD < 0.0 || dyD >= ${$.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${at};
              wR += ${nt}) {
            float dyR = float(dyRCorner + wR) / ${et}.0;

            if (dyR < 0.0 || dyR >= ${$.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${ot};
                wC += ${it}) {
              float dyC = float(dyCCorner + wC) / ${tt}.0;

              if (dyC < 0.0 || dyC >= ${$.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${vt} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${at} * ${ot} +
                  wR * ${ot} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3DGrad(_){const{inputs:$,backend:_e,attrs:et}=_,{dy:tt,input:rt}=$,nt=rt,{filterSize:it,strides:st,pad:at,dimRoundingMode:ot}=et,dt=[1,1,1],ht=computePool3DInfo(nt.shape,it,st,dt,at,ot),yt=new Pool3DProgram(ht,"max",!0),vt=_e.runWebGLProgram(yt,[nt],nt.dtype),xt=new MaxPool3DBackpropProgram(ht),wt=_e.runWebGLProgram(xt,[tt,vt],nt.dtype);return _e.disposeIntermediateTensorInfo(vt),wt}const maxPool3DGradConfig={kernelName:MaxPool3DGrad,backendName:"webgl",kernelFunc:maxPool3DGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolGrad(_){const{inputs:$,backend:_e,attrs:et}=_,{dy:tt,input:rt,output:nt}=$,it=rt;assertNotComplex([rt,nt],"maxPoolGrad");const{filterSize:st,strides:at,pad:ot,dimRoundingMode:dt}=et,ht=computePool2DInfo(it.shape,st,at,1,ot,dt),yt=!0,vt=new Pool2DProgram(ht,"max",yt),xt=_e.runWebGLProgram(vt,[it],it.dtype),wt=new MaxPool2DBackpropProgram(ht),Et=_e.runWebGLProgram(wt,[tt,xt],it.dtype);return _e.disposeIntermediateTensorInfo(xt),Et}const maxPoolGradConfig={kernelName:MaxPoolGrad,backendName:"webgl",kernelFunc:maxPoolGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolWithArgmaxImpl(_,$,_e,et){let tt=new Pool2DProgram(_e,"max",!1);const rt=et.runWebGLProgram(tt,[_],"float32");tt=new Pool2DProgram(_e,"max",!0,!0,$);const nt=et.runWebGLProgram(tt,[_],"float32");return[rt,nt]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxPoolWithArgmaxConfig={kernelName:MaxPoolWithArgmax,backendName:"webgl",kernelFunc:({inputs:_,attrs:$,backend:_e})=>{const{x:et}=_,{filterSize:tt,strides:rt,pad:nt,includeBatchInIndex:it}=$,st=_e;assert$1(et.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${et.shape.length}.`);const at=[1,1];assert$1(eitherStridesOrDilationsAreOne(rt,at),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${rt} and dilations '${at}'`);const ot=computePool2DInfo(et.shape,tt,rt,at,nt),[dt,ht]=maxPoolWithArgmaxImpl(et,it,ot,st);return[dt,ht]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function meanImpl(_,$,_e,et){const tt=sizeFromShape($),nt=sizeFromShape(_.shape)/tt,it=reshape({inputs:{x:_},attrs:{shape:[nt,tt]},backend:et}),st=reduce(it,"float32","mean",et),at=reshape({inputs:{x:st},attrs:{shape:_e},backend:et});return et.disposeIntermediateTensorInfo(it),et.disposeIntermediateTensorInfo(st),at}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const meanConfig={kernelName:Mean,backendName:"webgl",kernelFunc:({inputs:_,attrs:$,backend:_e})=>{const{x:et}=_,{keepDims:tt,axis:rt}=$,nt=_e,it=et.shape.length,st=parseAxisParam(rt,et.shape);let at=st;const ot=getAxesPermutation(at,it),dt=ot!=null,ht=nt.shouldExecuteOnCPU([et]),yt=[];let vt=et;if(dt){if(ht){const kt=nt.texData.get(vt.dataId).values,Lt=new Array(it);for(let er=0;er<Lt.length;er++)Lt[er]=et.shape[ot[er]];const Bt=transposeImplCPU(kt,et.shape,et.dtype,ot,Lt);vt=nt.makeTensorInfo(Lt,et.dtype);const Gt=nt.texData.get(vt.dataId);Gt.values=Bt}else vt=transposeImpl(et,ot,nt);yt.push(vt),at=getInnerMostAxes(at.length,it)}assertAxesAreInnerMostDims("sum",at,it);const[xt,wt]=computeOutAndReduceShapes(vt.shape,at);let Et=xt;tt&&(Et=expandShapeToKeepDim(xt,st));const At=meanImpl(vt,wt,Et,nt);for(const jt of yt)nt.disposeIntermediateTensorInfo(jt);return At}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function min$3(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{axis:rt,keepDims:nt}=et,it=tt.shape.length,st=parseAxisParam(rt,tt.shape);let at=st;const ot=getAxesPermutation(at,it);let dt=tt;ot!=null&&(dt=transpose({inputs:{x:tt},backend:_e,attrs:{perm:ot}}),at=getInnerMostAxes(at.length,tt.shape.length)),assertAxesAreInnerMostDims("min",at,it);const[ht,yt]=computeOutAndReduceShapes(dt.shape,at),vt=sizeFromShape(yt),xt=reshape({inputs:{x:dt},backend:_e,attrs:{shape:[-1,vt]}}),wt=reduce(xt,xt.dtype,"min",_e);let Et;if(nt){const At=expandShapeToKeepDim(ht,st);Et=reshape({inputs:{x:wt},backend:_e,attrs:{shape:At}})}else Et=reshape({inputs:{x:wt},backend:_e,attrs:{shape:ht}});return _e.disposeIntermediateTensorInfo(xt),_e.disposeIntermediateTensorInfo(wt),ot!=null&&_e.disposeIntermediateTensorInfo(dt),Et}const minConfig={kernelName:Min,backendName:"webgl",kernelFunc:min$3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MINIMUM=CHECK_NAN_SNIPPET+`
  return min(a, b);
`,MINIMUM_PACKED=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+CHECK_NAN_SNIPPET_PACKED+`
  return result;
`,minimum=binaryKernelFunc({opSnippet:MINIMUM,packedOpSnippet:MINIMUM_PACKED,cpuKernelImpl:minimumImplCPU}),minimumConfig={kernelName:Minimum$1,backendName:"webgl",kernelFunc:minimum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MirrorPadProgram{constructor($,_e,et){this.variableNames=["x"],this.outputShape=_e.map((ot,dt)=>ot[0]+$[dt]+ot[1]);const tt=$.length,rt=getCoordsDataType(tt),nt=_e.map(ot=>ot[0]).join(","),it=_e.map((ot,dt)=>ot[0]+$[dt]).join(","),st=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,tt),at=et==="reflect"?0:1;if(tt===1){this.userCode=`
        int start = ${nt};
        int end = ${it};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${at};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${at};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${rt} start = ${rt}(${nt});
      ${rt} end = ${rt}(${it});

      void main() {
        ${rt} outC = getOutputCoords();
        for (int i = 0; i < ${tt}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${at};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${at};
          }
        }
        ${rt} coords = outC - start;
        setOutput(getX(${st}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MirrorPadPackedProgram{constructor($,_e,et){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=_e.map((vt,xt)=>vt[0]+$[xt]+vt[1]);const tt=$.length,rt=getCoordsDataType(tt),nt=_e.map(vt=>vt[0]).join(","),it=_e.map((vt,xt)=>vt[0]+$[xt]).join(","),st=getChannels("rc",tt),at=getChannels("source",tt),ot=`${st[tt-1]} < ${this.outputShape[tt-1]}`,dt=tt===1?"source":`vec2(${at.slice(-2).join()})`,ht=et==="reflect"?0:1;let yt="";if(tt===1){const vt=`
        ${rt} source = rc;
        if (source < start) {
          source = start * 2 - source - ${ht};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${ht};
        }
        source -= start;
      `;yt=`
        ${rt} rc = outputLoc;
        ${vt}
        result[0] = getChannel(getX(${at.join()}), ${dt});
        ${st[tt-1]} += 1;
        if(${ot}) {
          ${vt}
          result[1] = getChannel(getX(${at.join()}), ${dt});
        }
      `}else{const vt=`
        ${rt} source = rc;
        ${rt} lt = ${rt}(lessThan(source, start));
        ${rt} gte = ${rt}(greaterThanEqual(source, end));
        ${rt} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${ht}) +
                gte * ((end - 1) * 2 - source + ${ht});
        source -= start;
      `;yt=`
        ${rt} rc = outputLoc;
        ${vt}
        result[0] = getChannel(getX(${at.join()}), ${dt});
        ${st[tt-1]} += 1;
        if(${ot}) {
          ${vt}
          result[1] = getChannel(getX(${at.join()}), ${dt});
        }
        rc = outputLoc;
        ${st[tt-2]} += 1;
        if(${st[tt-2]} < ${this.outputShape[tt-2]}) {
          ${vt}
          result[2] = getChannel(getX(${at.join()}), ${dt});
          ${st[tt-1]} += 1;
          if(${ot}) {
            ${vt}
            result[3] = getChannel(getX(${at.join()}), ${dt});
          }
        }
      `}this.userCode=`
      const ${rt} start = ${rt}(${nt});
      const ${rt} end = ${rt}(${it});

      void main() {
        ${rt} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${yt}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mirrorPadKernelFunc=({inputs:_,backend:$,attrs:_e})=>{const{x:et}=_,{paddings:tt,mode:rt}=_e,nt=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new MirrorPadPackedProgram(et.shape,tt,rt):new MirrorPadProgram(et.shape,tt,rt);return $.runWebGLProgram(nt,[et],et.dtype)},mirrorPadConfig={kernelName:MirrorPad,backendName:"webgl",kernelFunc:mirrorPadKernelFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MOD=`if (b == 0.0) return NAN;
  return mod(a, b);`,MOD_PACKED=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+CHECK_NAN_SNIPPET_PACKED+`
  return result;
`,mod=binaryKernelFunc({opSnippet:MOD,packedOpSnippet:MOD_PACKED}),modConfig={kernelName:Mod,backendName:"webgl",kernelFunc:mod};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MultinomialProgram{constructor($,_e,et){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[$,et],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${_e-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${_e-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DIV=`
if (a == b) {
  return 1.0;
};
return a / b;`,DIV_PACKED=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,realDiv=binaryKernelFunc({opSnippet:DIV,packedOpSnippet:DIV_PACKED,checkOutOfBounds:!0}),realDivConfig={kernelName:RealDiv,backendName:"webgl",kernelFunc:realDiv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SUB="return a - b;",sub=binaryKernelFunc({opSnippet:SUB,packedOpSnippet:SUB,supportsComplex:!0,cpuKernelImpl:subImplCPU}),subConfig={kernelName:Sub,backendName:"webgl",kernelFunc:sub};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function softmax(_){const{inputs:$,backend:_e,attrs:et}=_,{logits:tt}=$,{dim:rt}=et,nt=parseAxisParam([rt],tt.shape),it=max$3({inputs:{x:tt},backend:_e,attrs:{reductionIndices:nt,keepDims:!1}}),st=expandShapeToKeepDim(it.shape,nt),at=reshape({inputs:{x:it},backend:_e,attrs:{shape:st}}),ot=sub({inputs:{a:tt,b:at},backend:_e}),dt=exp$1({inputs:{x:ot},backend:_e}),ht=sum({inputs:{x:dt},backend:_e,attrs:{axis:nt,keepDims:!1}}),yt=reshape({inputs:{x:ht},backend:_e,attrs:{shape:st}}),vt=realDiv({inputs:{a:dt,b:yt},backend:_e});return _e.disposeIntermediateTensorInfo(it),_e.disposeIntermediateTensorInfo(at),_e.disposeIntermediateTensorInfo(ot),_e.disposeIntermediateTensorInfo(dt),_e.disposeIntermediateTensorInfo(ht),_e.disposeIntermediateTensorInfo(yt),vt}const softmaxConfig={kernelName:Softmax$2,backendName:"webgl",kernelFunc:softmax};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function multinomial(_){const{inputs:$,backend:_e,attrs:et}=_,{logits:tt}=$,{numSamples:rt,seed:nt,normalized:it}=et,st=it?tt:softmax({inputs:{logits:tt},backend:_e,attrs:{dim:tt.shape.length-1}}),at=st.shape[0],ot=st.shape[1],dt=new MultinomialProgram(at,ot,rt),ht=[[nt]],yt=_e.runWebGLProgram(dt,[st],"int32",ht);return it||_e.disposeIntermediateTensorInfo(st),yt}const multinomialConfig={kernelName:Multinomial,backendName:"webgl",kernelFunc:multinomial};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NEG=CHECK_NAN_SNIPPET$1+`
  return -x;
`,NEG_PACKED=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function neg(_){const{inputs:$,backend:_e}=_,{x:et}=$;if(_e.shouldExecuteOnCPU([et])){const rt=_e.texData.get(et.dataId),[nt,it]=negImplCPU(rt.values,et.shape,et.dtype);return _e.makeTensorInfo(it,et.dtype,nt)}let tt;return env().getBool("WEBGL_PACK_UNARY_OPERATIONS")?tt=new UnaryOpPackedProgram(et.shape,NEG_PACKED):tt=new UnaryOpProgram(et.shape,NEG),_e.runWebGLProgram(tt,[et],et.dtype)}const negConfig={kernelName:Neg,backendName:"webgl",kernelFunc:neg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV3Impl=nonMaxSuppressionV3Impl$2;function nonMaxSuppressionV3(_){warn$1("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:$,backend:_e,attrs:et}=_,{boxes:tt,scores:rt}=$,{maxOutputSize:nt,iouThreshold:it,scoreThreshold:st}=et,at=_e.readSync(tt.dataId),ot=_e.readSync(rt.dataId),{selectedIndices:dt}=nonMaxSuppressionV3Impl(at,ot,nt,it,st);return _e.makeTensorInfo([dt.length],"int32",new Int32Array(dt))}const nonMaxSuppressionV3Config={kernelName:NonMaxSuppressionV3,backendName:"webgl",kernelFunc:nonMaxSuppressionV3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV4Impl=nonMaxSuppressionV4Impl$2;function nonMaxSuppressionV4(_){warn$1("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:$,backend:_e,attrs:et}=_,{boxes:tt,scores:rt}=$,{maxOutputSize:nt,iouThreshold:it,scoreThreshold:st,padToMaxOutputSize:at}=et,ot=_e.readSync(tt.dataId),dt=_e.readSync(rt.dataId),{selectedIndices:ht,validOutputs:yt}=nonMaxSuppressionV4Impl(ot,dt,nt,it,st,at);return[_e.makeTensorInfo([ht.length],"int32",new Int32Array(ht)),_e.makeTensorInfo([],"int32",new Int32Array([yt]))]}const nonMaxSuppressionV4Config={kernelName:NonMaxSuppressionV4,backendName:"webgl",kernelFunc:nonMaxSuppressionV4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV5Impl=nonMaxSuppressionV5Impl$2;function nonMaxSuppressionV5(_){warn$1("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:$,backend:_e,attrs:et}=_,{boxes:tt,scores:rt}=$,{maxOutputSize:nt,iouThreshold:it,scoreThreshold:st,softNmsSigma:at}=et,ot=_e.readSync(tt.dataId),dt=_e.readSync(rt.dataId),ht=nt,yt=it,vt=st,xt=at,{selectedIndices:wt,selectedScores:Et}=nonMaxSuppressionV5Impl(ot,dt,ht,yt,vt,xt);return[_e.makeTensorInfo([wt.length],"int32",new Int32Array(wt)),_e.makeTensorInfo([Et.length],"float32",new Float32Array(Et))]}const nonMaxSuppressionV5Config={kernelName:NonMaxSuppressionV5,backendName:"webgl",kernelFunc:nonMaxSuppressionV5};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OneHotProgram{constructor($,_e,et,tt){this.variableNames=["indices"],this.outputShape=[$,_e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${tt}), float(${et}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oneHot=_=>{const{inputs:$,backend:_e,attrs:et}=_,{indices:tt}=$,{dtype:rt,depth:nt,onValue:it,offValue:st}=et,at=sizeFromShape(tt.shape),ot=new OneHotProgram(at,nt,it,st),dt=reshape({inputs:{x:tt},backend:_e,attrs:{shape:[at]}}),ht=_e.runWebGLProgram(ot,[dt],rt);_e.disposeIntermediateTensorInfo(dt);const yt=[...tt.shape,nt],vt=reshape({inputs:{x:ht},backend:_e,attrs:{shape:yt}});return _e.disposeIntermediateTensorInfo(ht),vt},oneHotConfig={kernelName:OneHot,backendName:"webgl",kernelFunc:oneHot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zerosLike(_){const{inputs:$,backend:_e}=_,{x:et}=$;if(et.dtype==="complex64"){const tt=real({inputs:{input:et},backend:_e}),rt=zerosLike({inputs:{x:tt},backend:_e}),nt=imag({inputs:{input:et},backend:_e}),it=zerosLike({inputs:{x:nt},backend:_e}),st=complex({inputs:{real:rt,imag:it},backend:_e});return _e.disposeIntermediateTensorInfo(tt),_e.disposeIntermediateTensorInfo(rt),_e.disposeIntermediateTensorInfo(nt),_e.disposeIntermediateTensorInfo(it),st}else return fill({attrs:{shape:et.shape,dtype:et.dtype,value:et.dtype==="string"?"":0},backend:_e})}const zerosLikeConfig={kernelName:ZerosLike,backendName:"webgl",kernelFunc:zerosLike};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function onesLike(_){const{inputs:$,backend:_e}=_,{x:et}=$;if(et.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(et.dtype==="complex64"){const tt=real({inputs:{input:et},backend:_e}),rt=onesLike({inputs:{x:tt},backend:_e}),nt=imag({inputs:{input:et},backend:_e}),it=zerosLike({inputs:{x:nt},backend:_e}),st=complex({inputs:{real:rt,imag:it},backend:_e});return _e.disposeIntermediateTensorInfo(tt),_e.disposeIntermediateTensorInfo(rt),_e.disposeIntermediateTensorInfo(nt),_e.disposeIntermediateTensorInfo(it),st}else return fill({attrs:{shape:et.shape,dtype:et.dtype,value:1},backend:_e})}const onesLikeConfig={kernelName:OnesLike,backendName:"webgl",kernelFunc:onesLike};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pack(_){const{inputs:$,backend:_e,attrs:et}=_,{axis:tt}=et;if($.length===1)return expandDims({inputs:{input:$[0]},backend:_e,attrs:{dim:tt}});const rt=$[0].shape,nt=$[0].dtype;$.forEach(ot=>{assertShapesMatch(rt,ot.shape,"All tensors passed to stack must have matching shapes"),assert$1(nt===ot.dtype,()=>"All tensors passed to stack must have matching dtypes")});const it=[],st=$.map(ot=>{const dt=expandDims({inputs:{input:ot},backend:_e,attrs:{dim:tt}});return it.push(dt),dt}),at=concat({inputs:st,backend:_e,attrs:{axis:tt}});return it.forEach(ot=>_e.disposeIntermediateTensorInfo(ot)),at}const packConfig={kernelName:Pack,backendName:"webgl",kernelFunc:pack};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PadProgram{constructor($,_e,et){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=_e.map((at,ot)=>at[0]+$[ot]+at[1]);const tt=$.length,rt=getCoordsDataType(tt),nt=_e.map(at=>at[0]).join(","),it=_e.map((at,ot)=>at[0]+$[ot]).join(","),st=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,tt);if(tt===1){this.userCode=`
        int start = ${nt};
        int end = ${it};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${rt} start = ${rt}(${nt});
      ${rt} end = ${rt}(${it});

      void main() {
        ${rt} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${rt} coords = outC - start;
          setOutput(getX(${st}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PadPackedProgram{constructor($,_e,et){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=_e.map((xt,wt)=>xt[0]+$[wt]+xt[1]);const tt=$.length,rt=getCoordsDataType(tt),nt=_e.map(xt=>xt[0]).join(","),it=_e.map((xt,wt)=>xt[0]+$[wt]).join(","),st=getChannels("rc",tt),at=getChannels("source",tt),ot=`${st[tt-1]} < ${this.outputShape[tt-1]}`,dt=tt===1?"source":`vec2(${at.slice(-2).join()})`,ht=[`${rt} rc = outputLoc;`,`${st[tt-1]} += 1;
       if(${ot}) {
      `,tt===1?"":`}
       rc = outputLoc;
       ${st[tt-2]} += 1;
       if(${st[tt-2]} < ${this.outputShape[tt-2]}) {`,tt===1?"":`  ${st[tt-1]} += 1;
         if(${ot}) {`],yt=tt===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let vt="";for(let xt=0,wt=tt===1?2:4;xt<wt;xt++)vt+=`
        ${ht[xt]}
        if (${yt}) {
          result[${xt}] = float(value);
        } else {
          ${rt} source = rc - start;
          result[${xt}] = getChannel(getX(${at.join()}), ${dt});
        }
      `;vt+=tt===1?"} ":"}}",this.userCode=`
      const ${rt} start = ${rt}(${nt});
      const ${rt} end = ${rt}(${it});

      void main() {
        ${rt} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${vt}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const padV2=_=>{const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{paddings:rt,constantValue:nt}=et;if(sizeFromShape(tt.shape)===0){const at=rt.map((ot,dt)=>ot[0]+tt.shape[dt]+ot[1]);return fill({backend:_e,attrs:{shape:at,value:nt,dtype:tt.dtype}})}const it=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new PadPackedProgram(tt.shape,rt,nt):new PadProgram(tt.shape,rt,nt),st=[[nt]];return _e.runWebGLProgram(it,[tt],tt.dtype,st)},padV2Config={kernelName:PadV2,backendName:"webgl",kernelFunc:padV2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const POW=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,POW_PACKED=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+CHECK_NAN_SNIPPET_PACKED+`
  return result;
`,pow$1=binaryKernelFunc({opSnippet:POW,packedOpSnippet:POW_PACKED}),powConfig={kernelName:Pow,backendName:"webgl",kernelFunc:pow$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function prod(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{axis:rt,keepDims:nt}=et,it=tt.shape.length,st=[],at=parseAxisParam(rt,tt.shape);let ot=at;const dt=getAxesPermutation(ot,it);let ht=tt;dt!=null&&(ht=transpose({inputs:{x:tt},backend:_e,attrs:{perm:dt}}),ot=getInnerMostAxes(ot.length,it),st.push(ht)),assertAxesAreInnerMostDims("prod",ot,it);let yt;if(_e.shouldExecuteOnCPU([ht])){const vt=_e.texData.get(ht.dataId).values,{outVals:xt,outShape:wt,outDtype:Et}=prodImplCPU(ht.shape,ht.dtype,vt,ot);yt=_e.makeTensorInfo(wt,Et,xt)}else{const[vt,xt]=computeOutAndReduceShapes(ht.shape,ot),wt=sizeFromShape(xt),Et=reshape({inputs:{x:ht},backend:_e,attrs:{shape:[-1,wt]}}),At=sumOutType(tt.dtype),jt=reduce(Et,At,"prod",_e);yt=reshape({inputs:{x:jt},backend:_e,attrs:{shape:vt}}),st.push(Et),st.push(jt)}if(nt){st.push(yt);const vt=expandShapeToKeepDim(yt.shape,at);yt=reshape({inputs:{x:yt},backend:_e,attrs:{shape:vt}})}return st.forEach(vt=>_e.disposeIntermediateTensorInfo(vt)),yt}const prodConfig={kernelName:Prod,backendName:"webgl",kernelFunc:prod};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function raggedGather(_){const{inputs:$,backend:_e,attrs:et}=_,{paramsNestedSplits:tt,paramsDenseValues:rt,indices:nt}=$,{outputRaggedRank:it}=et,st=tt.map(Et=>_e.readSync(Et.dataId)),at=tt.map(Et=>Et.shape),ot=_e.readSync(rt.dataId),dt=_e.readSync(nt.dataId),[ht,yt,vt]=raggedGatherImplCPU(st,at,ot,rt.shape,rt.dtype,dt,nt.shape,it),xt=ht.map(Et=>_e.makeTensorInfo([Et.length],"int32",Et)),wt=_e.makeTensorInfo(vt,rt.dtype,yt);return xt.concat([wt])}const raggedGatherConfig={kernelName:RaggedGather,backendName:"webgl",kernelFunc:raggedGather};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function raggedRange(_){const{inputs:$,backend:_e}=_,{starts:et,limits:tt,deltas:rt}=$,nt=_e.readSync(et.dataId),it=_e.readSync(tt.dataId),st=_e.readSync(rt.dataId),[at,ot]=raggedRangeImplCPU(nt,et.shape,et.dtype,it,tt.shape,st,rt.shape),dt=_e.makeTensorInfo([at.length],"int32",at),ht=_e.makeTensorInfo([ot.length],et.dtype,ot);return[dt,ht]}const raggedRangeConfig={kernelName:RaggedRange,backendName:"webgl",kernelFunc:raggedRange};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function raggedTensorToTensor(_){const{inputs:$,backend:_e,attrs:et}=_,{shape:tt,values:rt,defaultValue:nt,rowPartitionTensors:it}=$,{rowPartitionTypes:st}=et,at=_e.readSync(tt.dataId),ot=_e.readSync(rt.dataId),dt=_e.readSync(nt.dataId),ht=it.map(wt=>_e.readSync(wt.dataId)),yt=it.map(wt=>wt.shape),[vt,xt]=raggedTensorToTensorImplCPU(at,tt.shape,ot,rt.shape,rt.dtype,dt,nt.shape,ht,yt,st);return _e.makeTensorInfo(vt,rt.dtype,xt)}const raggedTensorToTensorConfig={kernelName:RaggedTensorToTensor,backendName:"webgl",kernelFunc:raggedTensorToTensor};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const range$4=_=>{const{backend:$,attrs:_e}=_,{start:et,stop:tt,step:rt,dtype:nt}=_e,it=rangeImplCPU(et,tt,rt,nt);return $.makeTensorInfo([it.length],nt,it)},rangeConfig={kernelName:Range$1,backendName:"webgl",kernelFunc:range$4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RECIPROCAL="return 1.0 / x;",reciprocal=unaryKernelFunc({opSnippet:RECIPROCAL}),reciprocalConfig={kernelName:Reciprocal,backendName:"webgl",kernelFunc:reciprocal};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RELU=CHECK_NAN_SNIPPET$1+`
  return (x < 0.0) ? 0.0 : x;
`,RELU_PACKED=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,relu=unaryKernelFunc({opSnippet:RELU,packedOpSnippet:RELU_PACKED}),reluConfig={kernelName:Relu$1,backendName:"webgl",kernelFunc:relu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RELU6=CHECK_NAN_SNIPPET$1+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,RELU6_PACKED=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,relu6=unaryKernelFunc({opSnippet:RELU6,packedOpSnippet:RELU6_PACKED}),relu6Config={kernelName:Relu6$1,backendName:"webgl",kernelFunc:relu6};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeBilinearProgram{constructor($,_e,et,tt,rt){this.variableNames=["A"],this.outputShape=[];const[nt,it,st,at]=$;this.outputShape=[nt,_e,et,at];const ot=[tt&&_e>1?it-1:it,tt&&et>1?st-1:st],dt=[tt&&_e>1?_e-1:_e,tt&&et>1?et-1:et];let ht;rt?ht="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":ht="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${ot[0]/dt[0]},
          ${ot[1]/dt[1]});
      const vec2 inputShapeRC = vec2(${it}.0, ${st}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${ht};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeBilinearPackedProgram{constructor($,_e,et,tt,rt){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[nt,it,st,at]=$;this.outputShape=[nt,_e,et,at];const ot=[tt&&_e>1?it-1:it,tt&&et>1?st-1:st],dt=[tt&&_e>1?_e-1:_e,tt&&et>1?et-1:et];let ht;rt?ht="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":ht="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${ot[0]/dt[0]},
          ${ot[1]/dt[1]},
          ${ot[1]/dt[1]});
      const vec3 inputShapeRC = vec3(${it}.0, ${st}.0,
                                     ${st}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${ht};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${at-1};
        bool hasNextRow = coords.z < ${et-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinear(_){const{inputs:$,backend:_e,attrs:et}=_,{images:tt}=$,{alignCorners:rt,halfPixelCenters:nt,size:it}=et,[st,at]=it,ot=env().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ResizeBilinearPackedProgram(tt.shape,st,at,rt,nt):new ResizeBilinearProgram(tt.shape,st,at,rt,nt);return _e.runWebGLProgram(ot,[tt],"float32")}const resizeBilinearConfig={kernelName:ResizeBilinear,backendName:"webgl",kernelFunc:resizeBilinear};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeBilinearBackpropProgram{constructor($,_e,et){this.variableNames=["dy"],this.outputShape=[],this.outputShape=_e;const[,tt,rt]=_e,[,nt,it]=$,st=[et&&nt>1?tt-1:tt,et&&it>1?rt-1:rt],at=[et&&nt>1?nt-1:nt,et&&it>1?it-1:it],ot=st[0]/at[0],dt=st[1]/at[1],ht=1/ot,yt=1/dt,vt=Math.ceil(ht)*2+2,xt=Math.ceil(yt)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${ot});
        const float widthScale = float(${dt});

        const float invHeightScale = float(${ht});
        const float invWidthScale = float(${yt});

        const int winHeight = int(${vt});
        const int winWidth = int(${xt});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${nt}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${it}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${tt-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${rt-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinearGrad(_){const{inputs:$,backend:_e,attrs:et}=_,{images:tt,dy:rt}=$,{alignCorners:nt}=et,it=new ResizeBilinearBackpropProgram(rt.shape,tt.shape,nt);return _e.runWebGLProgram(it,[rt],rt.dtype)}const resizeBilinearGradConfig={kernelName:ResizeBilinearGrad,backendName:"webgl",kernelFunc:resizeBilinearGrad};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeNearestNeighborProgram{constructor($,_e,et,tt,rt){this.variableNames=["A"],this.outputShape=[];const[nt,it,st,at]=$;this.outputShape=[nt,_e,et,at];const ot=[tt&&_e>1?it-1:it,tt&&et>1?st-1:st],dt=[tt&&_e>1?_e-1:_e,tt&&et>1?et-1:et],ht=tt?"0.5":"0.0";let yt;rt?yt="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":yt="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${ot[0]/dt[0]},
          ${ot[1]/dt[1]});
      const vec2 inputShapeRC = vec2(${it}.0, ${st}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${yt};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${ht})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeNearestNeighborPackedProgram{constructor($,_e,et,tt,rt){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[nt,it,st,at]=$;this.outputShape=[nt,_e,et,at];const ot=[tt&&_e>1?it-1:it,tt&&et>1?st-1:st],dt=[tt&&_e>1?_e-1:_e,tt&&et>1?et-1:et],ht=tt?"0.5":"0.0";let yt;rt?yt="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":yt="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${ot[0]/dt[0]},
          ${ot[1]/dt[1]},
          ${ot[1]/dt[1]});
      const vec3 inputShapeRC = vec3(${it}.0, ${st}.0,
                                     ${st}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${yt};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${ht})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${at-1};
        bool hasNextRow = coords.z < ${et-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighbor(_){const{inputs:$,backend:_e,attrs:et}=_,{images:tt}=$,{alignCorners:rt,halfPixelCenters:nt,size:it}=et,[st,at]=it,ot=env().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ResizeNearestNeighborPackedProgram(tt.shape,st,at,rt,nt):new ResizeNearestNeighborProgram(tt.shape,st,at,rt,nt);return _e.runWebGLProgram(ot,[tt],tt.dtype)}const resizeNearestNeighborConfig={kernelName:ResizeNearestNeighbor,backendName:"webgl",kernelFunc:resizeNearestNeighbor};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeNearestNeigborBackpropProgram{constructor($,_e,et){this.variableNames=["dy"],this.outputShape=[],this.outputShape=_e;const[,tt,rt]=_e,[,nt,it]=$,st=[et&&nt>1?tt-1:tt,et&&it>1?rt-1:rt],at=[et&&nt>1?nt-1:nt,et&&it>1?it-1:it],ot=st[0]/at[0],dt=st[1]/at[1],ht=1/ot,yt=1/dt,vt=Math.ceil(ht)*2+2,xt=Math.ceil(yt)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${ot});
        const float widthScale = float(${dt});

        const float invHeightScale = float(${ht});
        const float invWidthScale = float(${yt});

        const int winHeight = int(${vt});
        const int winWidth = int(${xt});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${nt}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${it}) {
              continue;
            }

            float sourceFracRow =
              float(${st[0]}) *
                (float(dyR) / float(${at[0]}));

            float sourceFracCol =
                float(${st[1]}) *
                  (float(dyC) / float(${at[1]}));

            int sourceNearestRow = int(min(
                float(int(${tt}) - 1),
                ${et} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${rt}) - 1),
                ${et} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighborGrad(_){const{inputs:$,backend:_e,attrs:et}=_,{images:tt,dy:rt}=$,{alignCorners:nt}=et,it=new ResizeNearestNeigborBackpropProgram(rt.shape,tt.shape,nt);return _e.runWebGLProgram(it,[rt],rt.dtype)}const resizeNearestNeighborGradConfig={kernelName:ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:resizeNearestNeighborGrad};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ReverseProgram{constructor($,_e){this.variableNames=["x"];const et=$.length;if(et>4)throw new Error(`WebGL backend: Reverse of rank-${et} tensor is not yet supported`);if(this.outputShape=$,et===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${$[0]} - coord - 1));
        }
      `;return}const tt=it=>_e.indexOf(it)!==-1&&$[it]!==1?`${$[it]} - coords[${it}] - 1`:`coords[${it}]`,rt=$.map((it,st)=>tt(st)).join(","),nt=getCoordsDataType(et);this.userCode=`
      void main() {
        ${nt} coords = getOutputCoords();
        setOutput(getX(${rt}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ReversePackedProgram{constructor($,_e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const et=$.length;if(et>4)throw new Error(`WebGL backend: Reverse of rank-${et} tensor is not yet supported`);this.outputShape=$;const tt=getChannels("rc",et),rt=`${tt[et-1]} + 1 < ${this.outputShape[et-1]}`,nt=`${tt[et-2]} + 1 < ${this.outputShape[et-2]}`,it=getCoordsDataType(et);et===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${$[0]} - rc - 1),
            ${$[0]} - rc - 1);
          if(${rt}){
              result.g = getChannel(getX(${$[0]} - (rc  + 1) - 1),
                ${$[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${it} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${st(tt.slice())};
          if(${rt}){
            result.g = ${at(tt.slice())};
          }
          if(${nt}) {
            result.b = ${ot(tt.slice())};
            if(${rt}) {
              result.a = ${dt(tt.slice())};
            }
          }
          setOutput(result);
        }
    `;function st(vt){return ht(vt)}function at(vt){return vt[et-1]="("+vt[et-1]+" + 1)",ht(vt)}function ot(vt){return vt[et-2]="("+vt[et-2]+" + 1)",ht(vt)}function dt(vt){return vt[et-1]="("+vt[et-1]+" + 1)",vt[et-2]="("+vt[et-2]+" + 1)",ht(vt)}function ht(vt){const xt=$.map((At,jt)=>yt(jt,vt)),wt=xt.join(","),Et=xt.slice(-2).join(",");return`getChannel(getX(${wt}), vec2(${Et}))`}function yt(vt,xt){return _e.indexOf(vt)!==-1&&$[vt]!==1?`${$[vt]} - ${xt[vt]} - 1`:`${xt[vt]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reverse$1(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{dims:rt}=et,nt=tt.shape.length,it=parseAxisParam(rt,tt.shape);if(nt===0)return identity$c({inputs:{x:tt},backend:_e});const st=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ReversePackedProgram(tt.shape,it):new ReverseProgram(tt.shape,it);return _e.runWebGLProgram(st,[tt],tt.dtype)}const reverseConfig={kernelName:Reverse,backendName:"webgl",kernelFunc:reverse$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RotateProgram{constructor($,_e){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const et=$[1],tt=$[2];this.outputShape=$;let rt="";typeof _e=="number"?rt=`float outputValue = ${_e.toFixed(2)};`:rt=`
        vec3 fill = vec3(${_e.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${rt}
          if(coordX >= 0 && coordX < ${tt} && coordY >= 0 && coordY < ${et}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rotateWithOffsetConfig={kernelName:RotateWithOffset,backendName:"webgl",kernelFunc:({inputs:_,attrs:$,backend:_e})=>{const{image:et}=_,{radians:tt,fillValue:rt,center:nt}=$,it=_e,st=new RotateProgram(et.shape,rt),[at,ot]=getImageCenter(nt,et.shape[1],et.shape[2]),dt=[[at,ot,Math.sin(tt),Math.cos(tt)]];return it.runWebGLProgram(st,[et],et.dtype,dt)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ROUND=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,round$1=unaryKernelFunc({opSnippet:ROUND}),roundConfig={kernelName:Round,backendName:"webgl",kernelFunc:round$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RSQRT="return inversesqrt(x);",rsqrt=unaryKernelFunc({opSnippet:RSQRT,cpuKernelImpl:rsqrtImplCPU}),rsqrtConfig={kernelName:Rsqrt,backendName:"webgl",kernelFunc:rsqrt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ScatterProgram{constructor($,_e,et,tt,rt,nt,it=!0,st=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=nt;const at=getCoordsDataType(rt.length),ot=getCoordsDataType(nt.length);let dt="";et===1?dt="i":et===2&&(dt="i, j");const ht=`getIndices(${dt})`;let yt="";tt===1?yt="i":tt===2&&(yt="i, coords[1]");const vt=`getUpdates(${yt})`;let xt="";st&&(xt="coords[0], coords[1]");const wt=`getDefaultValue(${xt})`,Et=_e>1?"strides[j]":"strides";this.userCode=`
        ${at} strides = ${at}(${rt});

        void main() {
          ${ot} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${$}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${_e}; j++) {
              int index = round(${ht});
              flattenedIndex += index * ${Et};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${vt};
              found = true;
            }
          }
          setOutput(mix(${wt}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ScatterPackedProgram{constructor($,_e,et,tt,rt,nt,it=!0,st=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=nt;const at=getCoordsDataType(rt.length),ot=getCoordsDataType(nt.length);let dt="";et===1?dt="i":et===2&&(dt="i, j");const ht=`getIndices(${dt})`;let yt="";tt===1?yt="i":tt===2&&(yt="i, coords[1]");const vt=`getUpdates(${yt})`;let xt="";st&&(xt="coords[0], coords[1]");const wt=`getDefaultValue(${xt})`,Et=_e>1?"strides[j]":"strides",At=_e>1?"strides[j + 1]":"strides";this.userCode=`
        ${at} strides = ${at}(${rt});

        void main() {
          ${ot} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${$}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${_e}; j+=2) {
              ivec4 index = round(${ht});
              flattenedIndex += index.xz * ${Et};
              if (j + 1 < ${_e}) {
                flattenedIndex += index.yw * ${At};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${vt};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${wt}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function scatterNd(_){const{inputs:$,backend:_e,attrs:et}=_,{indices:tt,updates:rt}=$,{shape:nt}=et,{sliceRank:it,numUpdates:st,sliceSize:at,strides:ot,outputSize:dt}=calculateShapes(rt,tt,nt),ht=[dt/at,at];if(dt===0)return _e.makeTensorInfo(nt,tt.dtype);const yt=reshape({inputs:{x:tt},backend:_e,attrs:{shape:[st,it]}}),vt=reshape({inputs:{x:rt},backend:_e,attrs:{shape:[st,at]}}),xt=_e.makeTensorInfo([],"float32",new Float32Array([0]));let wt;env().getBool("WEBGL_PACK")?wt=new ScatterPackedProgram(st,it,yt.shape.length,vt.shape.length,ot,ht):wt=new ScatterProgram(st,it,yt.shape.length,vt.shape.length,ot,ht);const Et=_e.runWebGLProgram(wt,[vt,yt,xt],vt.dtype),At=reshape({inputs:{x:Et},backend:_e,attrs:{shape:nt}});return _e.disposeIntermediateTensorInfo(yt),_e.disposeIntermediateTensorInfo(vt),_e.disposeIntermediateTensorInfo(Et),_e.disposeIntermediateTensorInfo(xt),At}const scatterNdConfig={kernelName:ScatterNd,backendName:"webgl",kernelFunc:scatterNd};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SearchSortedProgram{constructor($,_e,et,tt){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[$,et];const rt="while (left < right) {",nt=`for (int i = 0; i < ${Math.ceil(Math.log2(_e+1))}; ++i) { if (left >= right) break;`,it=env().getNumber("WEBGL_VERSION")===2?rt:nt,st=tt==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${it}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${st} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function searchSorted(_){const{inputs:$,backend:_e,attrs:et}=_,{sortedSequence:tt,values:rt}=$,{side:nt}=et,it=new SearchSortedProgram(tt.shape[0],tt.shape[1],rt.shape[1],nt),st=[[tt.shape[1]]];return _e.runWebGLProgram(it,[tt,rt],"int32",st)}const searchSortedConfig={kernelName:SearchSorted,backendName:"webgl",kernelFunc:searchSorted};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SelectProgram{constructor($,_e,et){this.variableNames=["c","a","b"],this.outputShape=_e;let tt,rt;if(et>4)throw Error(`Where for rank ${et} is not yet supported`);if(et===1)rt="resRC",tt="resRC";else{const it=["resRC.x","resRC.y","resRC.z","resRC.w"],st=[],at=[];for(let ot=0;ot<_e.length;ot++)at.push(`${it[ot]}`),ot<$&&st.push(`${it[ot]}`);tt=st.join(),rt=at.join()}const nt=getCoordsDataType(et);this.userCode=`
      void main() {
        ${nt} resRC = getOutputCoords();
        float cVal = getC(${tt});
        if (cVal >= 1.0) {
          setOutput(getA(${rt}));
        } else {
          setOutput(getB(${rt}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function select(_){const{inputs:$,backend:_e}=_,{condition:et,t:tt,e:rt}=$,nt=new SelectProgram(et.shape.length,tt.shape,tt.shape.length);return _e.runWebGLProgram(nt,[et,tt,rt],upcastType(tt.dtype,rt.dtype))}const selectConfig={kernelName:Select,backendName:"webgl",kernelFunc:select};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SELU=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${SELU_SCALEALPHA};
  float scale = ${SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,selu=unaryKernelFunc({opSnippet:SELU}),seluConfig={kernelName:Selu$1,backendName:"webgl",kernelFunc:selu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SIGMOID=CHECK_NAN_SNIPPET_UNARY+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,SIGMOID_PACKED=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,sigmoid=unaryKernelFunc({opSnippet:SIGMOID,packedOpSnippet:SIGMOID_PACKED,cpuKernelImpl:sigmoidImplCPU}),sigmoidConfig={kernelName:Sigmoid$1,backendName:"webgl",kernelFunc:sigmoid};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SIGN=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,sign$1=unaryKernelFunc({opSnippet:SIGN}),signConfig={kernelName:Sign,backendName:"webgl",kernelFunc:sign$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SIN=CHECK_NAN_SNIPPET_UNARY+`
  return sin(x);
`,SIN_PACKED=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${CHECK_NAN_SNIPPET_PACKED}
  return result;
`,sin$1=unaryKernelFunc({opSnippet:SIN,packedOpSnippet:SIN_PACKED}),sinConfig={kernelName:Sin,backendName:"webgl",kernelFunc:sin$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SINH=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,sinh=unaryKernelFunc({opSnippet:SINH}),sinhConfig={kernelName:Sinh,backendName:"webgl",kernelFunc:sinh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SOFTPLUS=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,softplus=unaryKernelFunc({opSnippet:SOFTPLUS}),softplusConfig={kernelName:Softplus$1,backendName:"webgl",kernelFunc:softplus};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const spaceToBatchND=_=>{const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{blockShape:rt,paddings:nt}=et;assert$1(tt.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const it=rt.reduce((Et,At)=>Et*At),st=[[0,0]];st.push(...nt);for(let Et=1+rt.length;Et<tt.shape.length;++Et)st.push([0,0]);const at=[],ot=padV2({inputs:{x:tt},backend:_e,attrs:{paddings:st,constantValue:0}}),dt=getReshaped(ot.shape,rt,it,!1),ht=getPermuted(dt.length,rt.length,!1),yt=getReshapedPermuted(ot.shape,rt,it,!1),vt=reshape({inputs:{x:ot},backend:_e,attrs:{shape:dt}}),xt=transpose({inputs:{x:vt},backend:_e,attrs:{perm:ht}}),wt=reshape({inputs:{x:xt},backend:_e,attrs:{shape:yt}});return at.push(ot),at.push(vt),at.push(xt),at.forEach(Et=>_e.disposeIntermediateTensorInfo(Et)),wt},spaceToBatchNDConfig={kernelName:SpaceToBatchND,backendName:"webgl",kernelFunc:spaceToBatchND};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseFillEmptyRows(_){const{inputs:$,backend:_e}=_,{indices:et,values:tt,denseShape:rt,defaultValue:nt}=$;if(rt.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${rt.shape}`);if(et.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${et.shape}`);if(tt.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${tt.shape}`);if(nt.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${nt.shape}`);const it=_e.readSync(et.dataId),st=_e.readSync(tt.dataId),at=_e.readSync(rt.dataId),ot=_e.readSync(nt.dataId)[0],[dt,ht,yt,vt,xt]=sparseFillEmptyRowsImplCPU(it,et.shape,et.dtype,st,tt.dtype,at,ot);return[_e.makeTensorInfo(ht,et.dtype,dt),_e.makeTensorInfo([ht[0]],tt.dtype,yt),_e.makeTensorInfo([vt.length],"bool",new Uint8Array(vt.map(wt=>Number(wt)))),_e.makeTensorInfo([xt.length],et.dtype,new Int32Array(xt))]}const sparseFillEmptyRowsConfig={kernelName:SparseFillEmptyRows,backendName:"webgl",kernelFunc:sparseFillEmptyRows};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseReshape(_){const{inputs:$,backend:_e}=_,{inputIndices:et,inputShape:tt,newShape:rt}=$;if(et.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${et.shape}`);if(tt.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${tt.shape}`);if(rt.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${rt.shape}`);const nt=Array.from(_e.readSync(tt.dataId)),it=_e.readSync(et.dataId),st=Array.from(_e.readSync(rt.dataId)),[at,ot,dt]=sparseReshapeImplCPU(it,et.shape,et.dtype,nt,st);return[_e.makeTensorInfo(ot,et.dtype,at),_e.makeTensorInfo([dt.length],rt.dtype,new Int32Array(dt))]}const sparseReshapeConfig={kernelName:SparseReshape,backendName:"webgl",kernelFunc:sparseReshape};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseSegmentMean(_){const{inputs:$,backend:_e}=_,{data:et,indices:tt,segmentIds:rt}=$;if(et.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(tt.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${tt.shape}`);if(rt.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${rt.shape}`);const nt=_e.readSync(et.dataId),it=_e.readSync(tt.dataId),st=_e.readSync(rt.dataId),[at,ot]=sparseSegmentReductionImplCPU(nt,et.shape,et.dtype,it,st,!0);return _e.makeTensorInfo(ot,et.dtype,at)}const sparseSegmentMeanConfig={kernelName:SparseSegmentMean,backendName:"webgl",kernelFunc:sparseSegmentMean};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseSegmentSum(_){const{inputs:$,backend:_e}=_,{data:et,indices:tt,segmentIds:rt}=$;if(et.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(tt.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${tt.shape}`);if(rt.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${rt.shape}`);const nt=_e.readSync(et.dataId),it=_e.readSync(tt.dataId),st=_e.readSync(rt.dataId),[at,ot]=sparseSegmentReductionImplCPU(nt,et.shape,et.dtype,it,st);return _e.makeTensorInfo(ot,et.dtype,at)}const sparseSegmentSumConfig={kernelName:SparseSegmentSum,backendName:"webgl",kernelFunc:sparseSegmentSum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseToDense(_){const{inputs:$,backend:_e,attrs:et}=_,{sparseIndices:tt,sparseValues:rt,defaultValue:nt}=$,{outputShape:it}=et,{sliceRank:st,numUpdates:at,sliceSize:ot,strides:dt,outputSize:ht}=calculateShapes(rt,tt,it),yt=!1;if(rt.dtype==="string"){const Et=_e.bufferSync(tt),At=_e.bufferSync(rt),jt=decodeString(_e.readSync(nt.dataId)[0]),kt=scatterImplCPU(Et,At,it,ht,ot,at,st,dt,jt,yt);return _e.makeTensorInfo(it,kt.dtype,kt.values)}const vt=new ScatterProgram(at,st,tt.shape.length,rt.shape.length,dt,[ht,1],yt),xt=_e.runWebGLProgram(vt,[rt,tt,nt],rt.dtype),wt=reshape({inputs:{x:xt},backend:_e,attrs:{shape:it}});return _e.disposeIntermediateTensorInfo(xt),wt}const sparseToDenseConfig={kernelName:SparseToDense,backendName:"webgl",kernelFunc:sparseToDense};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function splitV(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{numOrSizeSplits:rt,axis:nt}=et,it=parseAxisParam(nt,tt.shape)[0],st=prepareSplitSize(tt,rt,it),at=tt.shape.length,ot=new Array(at).fill(0),dt=tt.shape.slice();return st.map(ht=>{const yt=[...dt];yt[it]=ht;const vt=slice({inputs:{x:tt},backend:_e,attrs:{begin:ot,size:yt}});return ot[it]+=ht,vt})}const splitVConfig={kernelName:SplitV,backendName:"webgl",kernelFunc:splitV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SQRT="return sqrt(x);",sqrt$2=unaryKernelFunc({opSnippet:SQRT,packedOpSnippet:SQRT,cpuKernelImpl:sqrtImplCPU}),sqrtConfig={kernelName:Sqrt,backendName:"webgl",kernelFunc:sqrt$2};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SQUARE="return x * x;",square$1=unaryKernelFunc({opSnippet:SQUARE}),squareConfig={kernelName:Square,backendName:"webgl",kernelFunc:square$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SQUARED_DIFFERENCE="return (a - b) * (a - b);",squaredDifference=binaryKernelFunc({opSnippet:SQUARED_DIFFERENCE,packedOpSnippet:SQUARED_DIFFERENCE}),squaredDifferenceConfig={kernelName:SquaredDifference,backendName:"webgl",kernelFunc:squaredDifference};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function staticRegexReplace(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$;if(tt.dtype!=="string")throw new Error("Input must be of datatype string");const rt=_e.readSync(tt.dataId),nt=fromUint8ToStringArray(rt),it=staticRegexReplaceImplCPU(nt,"string",et);return _e.makeTensorInfo(tt.shape,"string",it)}const staticRegexReplaceConfig={kernelName:StaticRegexReplace,backendName:"webgl",kernelFunc:staticRegexReplace};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function step({inputs:_,attrs:$,backend:_e}){const{x:et}=_,tt=CHECK_NAN_SNIPPET$1+`
    return x > 0.0 ? 1.0 : float(${$.alpha});
  `,rt=new UnaryOpProgram(et.shape,tt);return _e.runWebGLProgram(rt,[et],et.dtype)}const stepConfig={kernelName:Step$1,backendName:"webgl",kernelFunc:step};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class StridedSliceProgram{constructor($,_e,et){this.variableNames=["x"],this.outputShape=et;const tt=et.length,rt=getCoordsDataType(et.length),nt=getCoordsDataType(et.length);let it="";if(tt===1)it="coords * strides + begin";else{let st=0;it=et.map((at,ot)=>(st++,et.length===1?`coords * strides[${ot}] + begin[${ot}]`:`coords[${st-1}] * strides[${ot}] + begin[${ot}]`)).join(",")}this.userCode=`
      ${rt} begin = ${rt}(${$});
      ${rt} strides = ${rt}(${_e});

      void main() {
        ${nt} coords = getOutputCoords();
        setOutput(getX(${it}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stridedSlice(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{begin:rt,end:nt,strides:it,beginMask:st,endMask:at,ellipsisMask:ot,newAxisMask:dt,shrinkAxisMask:ht}=et,{finalShapeSparse:yt,finalShape:vt,isIdentity:xt,sliceDim0:wt,isSimpleSlice:Et,begin:At,end:jt,strides:kt}=sliceInfo(tt.shape,rt,nt,it,st,at,ot,dt,ht);let Lt;if(xt)Lt=reshape({inputs:{x:tt},backend:_e,attrs:{shape:vt}});else if(wt||Et){assert$1(tt.shape.length>=1,()=>`Input must have rank at least 1, got: ${tt.shape.length}`);const Gt=computeOutShape$2(At,jt,kt),er=slice({inputs:{x:tt},backend:_e,attrs:{begin:At,size:Gt}});Lt=reshape({inputs:{x:er},backend:_e,attrs:{shape:vt}}),_e.disposeIntermediateTensorInfo(er)}else if(_e.shouldExecuteOnCPU([tt])){const er=_e.readSync(tt.dataId),tr=buffer$1(tt.shape,tt.dtype,er),ar=stridedSliceImplCPU(yt,tr,kt,At);Lt=_e.makeTensorInfo(vt,tt.dtype,ar.values)}else{const er=new StridedSliceProgram(At,kt,yt);Lt=_e.runWebGLProgram(er,[tt],tt.dtype)}const Bt=reshape({inputs:{x:Lt},backend:_e,attrs:{shape:vt}});return _e.disposeIntermediateTensorInfo(Lt),Bt}const stridedSliceConfig={kernelName:StridedSlice,backendName:"webgl",kernelFunc:stridedSlice};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stringNGrams(_){const{inputs:$,backend:_e,attrs:et}=_,{separator:tt,nGramWidths:rt,leftPad:nt,rightPad:it,padWidth:st,preserveShortSequences:at}=et,{data:ot,dataSplits:dt}=$,ht=_e.readSync(ot.dataId),yt=_e.readSync(dt.dataId),[vt,xt]=stringNGramsImplCPU(ht,yt,tt,rt,nt,it,st,at);return[_e.makeTensorInfo([vt.length],"string",vt),_e.makeTensorInfo(dt.shape,"int32",xt)]}const stringNGramsConfig={kernelName:StringNGrams,backendName:"webgl",kernelFunc:stringNGrams};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stringSplit(_){const{inputs:$,backend:_e,attrs:et}=_,{skipEmpty:tt}=et,{input:rt,delimiter:nt}=$;if(rt.dtype!=="string")throw new Error("Input must be of datatype string");if(rt.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${rt.shape}`);if(nt.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${nt.shape}`);const it=_e.readSync(rt.dataId),st=_e.readSync(nt.dataId)[0],[at,ot,dt]=stringSplitImplCPU(it,st,tt),ht=ot.length;return[_e.makeTensorInfo([ht,2],"int32",at),_e.makeTensorInfo([ht],"string",ot),_e.makeTensorInfo([2],"int32",new Int32Array(dt))]}const stringSplitConfig={kernelName:StringSplit,backendName:"webgl",kernelFunc:stringSplit};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stringToHashBucketFast(_){const{inputs:$,backend:_e,attrs:et}=_,{numBuckets:tt}=et,{input:rt}=$;if(rt.dtype!=="string")throw new Error("Input must be of datatype string");if(tt<=0)throw new Error("Number of buckets must be at least 1");const nt=_e.readSync(rt.dataId),it=stringToHashBucketFastImplCPU(nt,tt);return _e.makeTensorInfo(rt.shape,"int32",it)}const stringToHashBucketFastConfig={kernelName:StringToHashBucketFast,backendName:"webgl",kernelFunc:stringToHashBucketFast};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TAN="return tan(x);",tan=unaryKernelFunc({opSnippet:TAN}),tanConfig={kernelName:Tan,backendName:"webgl",kernelFunc:tan};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TANH=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,tanh=unaryKernelFunc({opSnippet:TANH}),tanhConfig={kernelName:Tanh$1,backendName:"webgl",kernelFunc:tanh};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tensorScatterUpdate(_){const{inputs:$,backend:_e,attrs:et}=_,{tensor:tt,indices:rt,updates:nt}=$,{sliceRank:it,numUpdates:st,sliceSize:at,strides:ot,outputSize:dt}=calculateShapes(nt,rt,tt.shape),ht=[dt/at,at];if(dt===0)return _e.makeTensorInfo(tt.shape,rt.dtype);const yt=reshape({inputs:{x:rt},backend:_e,attrs:{shape:[st,it]}}),vt=reshape({inputs:{x:nt},backend:_e,attrs:{shape:[st,at]}}),xt=reshape({inputs:{x:tt},backend:_e,attrs:{shape:ht}}),wt=new ScatterProgram(st,it,yt.shape.length,vt.shape.length,ot,ht,!1,!0),Et=_e.runWebGLProgram(wt,[vt,yt,xt],xt.dtype),At=reshape({inputs:{x:Et},backend:_e,attrs:{shape:tt.shape}});return _e.disposeIntermediateTensorInfo(yt),_e.disposeIntermediateTensorInfo(vt),_e.disposeIntermediateTensorInfo(xt),_e.disposeIntermediateTensorInfo(Et),At}const tensorScatterUpdateConfig={kernelName:TensorScatterUpdate,backendName:"webgl",kernelFunc:tensorScatterUpdate};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TileProgram{constructor($,_e){this.variableNames=["A"];const et=new Array($.length);for(let nt=0;nt<et.length;nt++)et[nt]=$[nt]*_e[nt];this.outputShape=et,this.rank=et.length;const tt=getCoordsDataType(this.rank),rt=getSourceCoords($);this.userCode=`
      void main() {
        ${tt} resRC = getOutputCoords();
        setOutput(getA(${rt}));
      }
    `}}function getSourceCoords(_){const $=_.length;if($>5)throw Error(`Tile for rank ${$} is not yet supported`);if($===1)return`imod(resRC, ${_[0]})`;const _e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],et=[];for(let tt=0;tt<_.length;tt++)et.push(`imod(${_e[tt]}, ${_[tt]})`);return et.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tile(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{reps:rt}=et;if(tt.dtype==="string"||tt.shape.length>5){const st=_e.readSync(tt.dataId),at=tt.dtype==="string"?st.map(ht=>decodeString(ht)):st,ot=buffer$1(tt.shape,tt.dtype,at),dt=tileImplCPU(ot,rt);return _e.makeTensorInfo(dt.shape,dt.dtype,dt.values)}const nt=new TileProgram(tt.shape,rt);return _e.runWebGLProgram(nt,[tt],tt.dtype)}const tileConfig={kernelName:Tile,backendName:"webgl",kernelFunc:tile};class SwapProgram{constructor($){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=$,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class MergeProgram{constructor($){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=$,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function disposeIntermediateTensorInfoOrNull(_,$){$!==null&&_.disposeIntermediateTensorInfo($)}function roundUpToPow2(_){let $=1;for(;$<_;)$*=2;return $}function topK(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt}=$,{k:rt,sorted:nt}=et,it=env().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),st=env().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),at=tt.shape,ot=at[at.length-1];if(_e.shouldExecuteOnCPU([tt])||ot<it||rt>st){const ar=_e.readSync(tt.dataId),[Mt,lt]=topKImplCPU(ar,at,tt.dtype,rt,nt);return[_e.makeTensorInfo(Mt.shape,Mt.dtype,Mt.values),_e.makeTensorInfo(lt.shape,lt.dtype,lt.values)]}if(rt===0)return at[at.length-1]=0,[_e.makeTensorInfo(at,tt.dtype,[]),_e.makeTensorInfo(at,"int32",[])];if(ot===1)return[tt,fill({attrs:{shape:at,dtype:"int32",value:0},backend:_e})];const dt=_e.texData.get(tt.dataId),ht=dt!==null&&dt.isPacked,yt=ht?_e.unpackTensor(tt):tt,xt=sizeFromShape(at)/ot,wt=reshape({inputs:{x:yt},attrs:{shape:[xt,ot]},backend:_e});ht&&disposeIntermediateTensorInfoOrNull(_e,yt);const Et=roundUpToPow2(rt),At=roundUpToPow2(ot);let jt=null;const kt=()=>jt===null?[wt,wt]:[wt,jt],Lt=(ar,Mt,lt)=>{const mt=kt(),gt=new SwapProgram(lt),St=[[ot],[jt===null?1:0],[Number.NEGATIVE_INFINITY],[ar],[Mt]],Nt=jt;jt=_e.runWebGLProgram(gt,mt,"int32",St),disposeIntermediateTensorInfoOrNull(_e,Nt)};for(let ar=1;ar<Et;ar*=2){const Mt=ar*2;for(let lt=ar;lt>=1;lt/=2)Lt(Mt,lt,[xt,At])}for(let ar=At;ar>Et;ar/=2){const Mt=kt(),lt=new MergeProgram([xt,ar/2]),gt=[[ot],[jt===null?1:0],[Et]],bt=jt;jt=_e.runWebGLProgram(lt,Mt,"int32",gt),disposeIntermediateTensorInfoOrNull(_e,bt);const St=Et/2,Nt=St*2;for(let Pt=St;Pt>=1;Pt/=2)Lt(Nt,Pt,jt.shape)}let Bt=jt;jt=slice({inputs:{x:jt},backend:_e,attrs:{begin:0,size:[xt,rt]}}),disposeIntermediateTensorInfoOrNull(_e,Bt);let Gt=gatherV2({inputs:{x:wt,indices:jt},backend:_e,attrs:{axis:1,batchDims:1}});disposeIntermediateTensorInfoOrNull(_e,wt);const er=at.slice(0,-1);er.push(rt),Bt=jt,jt=reshape({inputs:{x:jt},attrs:{shape:er},backend:_e}),disposeIntermediateTensorInfoOrNull(_e,Bt);const tr=Gt;return Gt=reshape({inputs:{x:Gt},attrs:{shape:er},backend:_e}),disposeIntermediateTensorInfoOrNull(_e,tr),[Gt,jt]}const topKConfig={kernelName:TopK,backendName:"webgl",kernelFunc:topK};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TransformProgram{constructor($,_e,et,tt,rt,nt){this.variableNames=["Image","Transforms"],this.outputShape=nt;const it=et==="nearest"?1:2;let st;switch(tt){case"constant":st=1;break;case"reflect":st=2;break;case"wrap":st=3;break;case"nearest":st=4;break;default:st=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${st} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${st} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${st} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${$} && 0 <= coordX && coordX < ${_e}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${rt});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${rt});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${_e}));
                float mapY = mapCoord(inY, float(${$}));

                if (${it} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transform(_){const{inputs:$,backend:_e,attrs:et}=_,{image:tt,transforms:rt}=$,{interpolation:nt,fillMode:it,fillValue:st,outputShape:at}=et,[ot,dt,ht,yt]=tt.shape,[vt,xt]=at??[dt,ht],wt=[ot,vt,xt,yt],Et=new TransformProgram(dt,ht,nt,it,st,wt);return _e.runWebGLProgram(Et,[tt,rt],"float32")}const transformConfig={kernelName:Transform,backendName:"webgl",kernelFunc:transform};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unique(_){const{inputs:$,attrs:_e,backend:et}=_,{axis:tt}=_e,{x:rt}=$;assertNotComplex(rt,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const nt=et.readSync(rt.dataId),{outputValues:it,outputShape:st,indices:at}=uniqueImplCPU(nt,tt,rt.shape,rt.dtype);return[et.makeTensorInfo(st,rt.dtype,it),et.makeTensorInfo([at.length],"int32",at)]}const uniqueConfig={kernelName:Unique,backendName:"webgl",kernelFunc:unique};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unpack(_){const{inputs:$,backend:_e,attrs:et}=_,{value:tt}=$;let{axis:rt}=et;rt<0&&(rt+=tt.shape.length);const nt=tt,it=nt.shape.length,st=tt.shape[rt],at=new Array(it-1);let ot=0;for(let xt=0;xt<it;xt++)xt!==rt&&(at[ot++]=nt.shape[xt]);const dt=[],ht=new Array(it).fill(0),yt=nt.shape.slice();yt[rt]=1;const vt=new Array(st);for(let xt=0;xt<vt.length;xt++){ht[rt]=xt;const wt=slice({inputs:{x:nt},backend:_e,attrs:{begin:ht,size:yt}}),Et=reshape({inputs:{x:wt},backend:_e,attrs:{shape:at}});vt[xt]=Et,dt.push(wt)}return dt.forEach(xt=>_e.disposeIntermediateTensorInfo(xt)),vt}const unpackConfig={kernelName:Unpack,backendName:"webgl",kernelFunc:unpack};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SegmentOpProgram{constructor($,_e){this.variableNames=["x","segmentIds"];const et=$.windowSize,tt=$.batchSize,rt=$.inSize,nt=$.numSegments,it=nt*Math.ceil(rt/et);this.outputShape=[tt,it];const st="0.0",at="sumValue",ot=Math.floor(et/4)*4,dt=et%4,ht=`
        sumValue += dot(values, segFilter);
    `;let yt="";rt%et>0&&(yt=`
        if (inIdx < 0 || inIdx >= ${rt}) {
          return initializationValue;
        }
      `);let vt="";rt%et>0&&(vt=`
        if (inIdx < 0 || inIdx >= ${rt}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${st};

      float getValue(int batch, int inIdx) {
        ${yt}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${vt}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${nt})) * float(${et}));
        int currentSeg = int(mod(float(outIdx), float(${nt})));

        float sumValue = 0.0;

        for (int i = 0; i < ${ot}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${ht}
        }

        int inIdx = inOffset + ${ot};
        if (${dt===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${ht}
        } else if (${dt===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${ht}
        } else if (${dt===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${ht}
        }
        setOutput(${at});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unsortedSegmentSum(_){const{inputs:$,backend:_e,attrs:et}=_,{x:tt,segmentIds:rt}=$,{numSegments:nt}=et,it=tt.shape.length,st=[];let at=0;const ot=getAxesPermutation([at],it);let dt=tt;ot!=null&&(dt=transpose({inputs:{x:tt},backend:_e,attrs:{perm:ot}}),st.push(dt),at=getInnerMostAxes(1,it)[0]);const ht=computeOutShape(dt.shape,at,nt),yt=sizeFromShape([dt.shape[at]]),vt=reshape({inputs:{x:dt},backend:_e,attrs:{shape:[-1,yt]}});st.push(vt);const xt=sumOutType(tt.dtype),wt=(kt,Lt,Bt,Gt,er)=>{const tr=kt.shape[0],ar=kt.shape[1],Mt=segOpComputeOptimalWindowSize(ar,er),lt={windowSize:Mt,inSize:ar,batchSize:tr,numSegments:er},mt=new SegmentOpProgram(lt,Lt),gt=_e.compileAndRun(mt,[kt,Bt],Gt);if(st.push(gt),gt.shape[1]===er)return gt;const bt=range$4({backend:_e,attrs:{start:0,stop:er,step:1,dtype:"float32"}}),St=tile({inputs:{x:bt},backend:_e,attrs:{reps:[ar/Mt]}});return st.push(bt),st.push(St),wt(gt,Lt,St,Gt,er)},Et=wt(vt,"unsortedSegmentSum",rt,xt,nt),At=reshape({inputs:{x:Et},backend:_e,attrs:{shape:ht}});let jt=At;if(ot!=null){st.push(At);const kt=getUndoAxesPermutation(ot);jt=transpose({inputs:{x:jt},backend:_e,attrs:{perm:kt}})}return st.forEach(kt=>_e.disposeIntermediateTensorInfo(kt)),jt}const unsortedSegmentSumConfig={kernelName:UnsortedSegmentSum,backendName:"webgl",kernelFunc:unsortedSegmentSum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kernelConfigs=[_fusedMatMulConfig,absConfig,acosConfig,acoshConfig,addConfig,addNConfig,allConfig,anyConfig,argMaxConfig,argMinConfig,asinConfig,asinhConfig,atanConfig,atan2Config,atanhConfig,avgPoolConfig,avgPool3DConfig,avgPool3DGradConfig,avgPoolGradConfig,batchMatMulConfig,batchNormConfig,batchToSpaceNDConfig,bincountConfig,bitwiseAndConfig,broadcastArgsConfig,castConfig,ceilConfig,clipByValueConfig,complexConfig,complexAbsConfig,concatConfig,conv2DConfig,conv2DBackpropFilterConfig,conv2DBackpropInputConfig,conv3DConfig,conv3DBackpropFilterV2Config,conv3DBackpropInputConfig,cosConfig,coshConfig,cropAndResizeConfig,cumprodConfig,cumsumConfig,denseBincountConfig,depthToSpaceConfig,depthwiseConv2dNativeConfig,depthwiseConv2dNativeBackpropFilterConfig,depthwiseConv2dNativeBackpropInputConfig,diagConfig,dilation2DConfig,einsumConfig,eluConfig,eluGradConfig,equalConfig,erfConfig,expConfig,expandDimsConfig,expm1Config,fftConfig,fillConfig,flipLeftRightConfig,floorConfig,floorDivConfig,fromPixelsConfig,fusedConv2DConfig,fusedDepthwiseConv2DConfig,gatherNdConfig,gatherV2Config,greaterConfig,greaterEqualConfig,identityConfig,ifftConfig,imagConfig,isFiniteConfig,isInfConfig,isNaNConfig,leakyReluConfig,lessConfig,lessEqualConfig,linSpaceConfig,logConfig,log1pConfig,logicalAndConfig,logicalNotConfig,logicalOrConfig,LRNConfig,LRNGradConfig,maxConfig,maximumConfig,maxPoolConfig,maxPool3DConfig,maxPool3DGradConfig,maxPoolGradConfig,maxPoolWithArgmaxConfig,meanConfig,minConfig,minimumConfig,mirrorPadConfig,modConfig,multinomialConfig,multiplyConfig,negConfig,nonMaxSuppressionV3Config,nonMaxSuppressionV4Config,nonMaxSuppressionV5Config,notEqualConfig,oneHotConfig,onesLikeConfig,packConfig,padV2Config,powConfig,preluConfig,prodConfig,raggedGatherConfig,raggedRangeConfig,raggedTensorToTensorConfig,rangeConfig,realConfig,realDivConfig,reciprocalConfig,reluConfig,relu6Config,reshapeConfig,resizeBilinearConfig,resizeBilinearGradConfig,resizeNearestNeighborConfig,resizeNearestNeighborGradConfig,reverseConfig,rotateWithOffsetConfig,roundConfig,rsqrtConfig,scatterNdConfig,searchSortedConfig,selectConfig,seluConfig,sigmoidConfig,signConfig,sinConfig,sinhConfig,sliceConfig,softmaxConfig,softplusConfig,spaceToBatchNDConfig,sparseFillEmptyRowsConfig,sparseReshapeConfig,sparseSegmentMeanConfig,sparseSegmentSumConfig,sparseToDenseConfig,splitVConfig,sqrtConfig,squareConfig,squaredDifferenceConfig,staticRegexReplaceConfig,stepConfig,stridedSliceConfig,stringNGramsConfig,stringSplitConfig,stringToHashBucketFastConfig,subConfig,sumConfig,tanConfig,tanhConfig,tensorScatterUpdateConfig,tileConfig,topKConfig,transformConfig,transposeConfig,uniqueConfig,unpackConfig,unsortedSegmentSumConfig,zerosLikeConfig];for(const _ of kernelConfigs)registerKernel(_);/** @license See the LICENSE file. */const version$1="4.22.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const version={"tfjs-core":version$7,"tfjs-backend-cpu":version$3,"tfjs-backend-webgl":version$2,"tfjs-data":version$4,"tfjs-layers":version$6,"tfjs-converter":version$5,tfjs:version$1},tf=Object.freeze(Object.defineProperty({__proto__:null,Abs,Acos,Acosh,AdadeltaOptimizer,AdagradOptimizer,AdamOptimizer,AdamaxOptimizer,Add:Add$1,AddN,All,Any,ArgMax,ArgMin,Asin,Asinh,Atan,Atan2,Atanh,AvgPool,AvgPool3D,AvgPool3DGrad,AvgPoolGrad,BatchMatMul,BatchToSpaceND,Bincount,BitwiseAnd,BroadcastArgs,BroadcastTo,Callback,CallbackList,Cast,Ceil,ClipByValue,Complex,ComplexAbs,Concat,Conv2D:Conv2D$1,Conv2DBackpropFilter,Conv2DBackpropInput,Conv3D:Conv3D$1,Conv3DBackpropFilterV2,Conv3DBackpropInputV2,Cos,Cosh,CropAndResize,Cumprod,Cumsum,CustomCallback,DataStorage,DenseBincount,DepthToSpace,DepthwiseConv2dNative,DepthwiseConv2dNativeBackpropFilter,DepthwiseConv2dNativeBackpropInput,Diag,Dilation2D,Dilation2DBackpropFilter,Dilation2DBackpropInput,Draw,get ENV(){return ENV$4},EarlyStopping,Einsum,Elu:Elu$1,EluGrad,Environment,Equal,Erf,Exp,ExpandDims,Expm1,FFT,Fill,FlipLeftRight,Floor,FloorDiv,FromPixels,FusedBatchNorm,FusedConv2D,FusedDepthwiseConv2D,GPGPUContext,GatherNd,GatherV2,GraphModel,Greater,GreaterEqual,History:History$1,IFFT,Identity:Identity$1,Imag,InputSpec,IsFinite,IsInf,IsNan,KernelBackend,LRN,LRNGrad,LayerVariable,LayersModel,LeakyRelu,Less,LessEqual,LinSpace,Log,Log1p,LogSoftmax:LogSoftmax$1,LogicalAnd,LogicalNot,LogicalOr,LogicalXor,LowerBound,MathBackendCPU,MathBackendWebGL,MatrixBandPart,Max,MaxPool,MaxPool3D,MaxPool3DGrad,MaxPoolGrad,MaxPoolWithArgmax,Maximum:Maximum$1,Mean,Min,Minimum:Minimum$1,MirrorPad,Mod,MomentumOptimizer,Multinomial,Multiply:Multiply$1,Neg,NonMaxSuppressionV3,NonMaxSuppressionV4,NonMaxSuppressionV5,NotEqual,OP_SCOPE_SUFFIX,OneHot,OnesLike,Optimizer,OptimizerConstructors,Pack,PadV2,Pool,Pow,Prelu,Prod,RMSPropOptimizer,RNN,RaggedGather,RaggedRange,RaggedTensorToTensor,Range:Range$1,get Rank(){return Rank},Real,RealDiv,Reciprocal,get Reduction(){return Reduction},Relu:Relu$1,Relu6:Relu6$1,Reshape:Reshape$1,ResizeBilinear,ResizeBilinearGrad,ResizeNearestNeighbor,ResizeNearestNeighborGrad,Reverse,RotateWithOffset,Round,Rsqrt,SGDOptimizer,ScatterNd,SearchSorted,Select,Selu:Selu$1,Sequential,Sigmoid:Sigmoid$1,Sign,Sin,Sinh,Slice,Softmax:Softmax$2,Softplus:Softplus$1,SpaceToBatchND,SparseFillEmptyRows,SparseReshape,SparseSegmentMean,SparseSegmentSum,SparseToDense,SplitV,Sqrt,Square,SquaredDifference,StaticRegexReplace,Step:Step$1,StridedSlice,StringNGrams,StringSplit,StringToHashBucketFast,Sub,Sum,SymbolicTensor,Tan,Tanh:Tanh$1,Tensor,TensorBuffer,TensorScatterUpdate,Tile,TopK,Transform,Transpose,Unique,Unpack,UnsortedSegmentSum,UpperBound,Variable,ZerosLike,_FusedMatMul,abs:abs$2,acos:acos$2,acosh:acosh$2,add:add$3,addN:addN$2,all:all$2,any:any$2,argMax:argMax$2,argMin:argMin$2,asin:asin$2,asinh:asinh$2,atan:atan$2,atan2:atan2$2,atanh:atanh$2,avgPool:avgPool$2,avgPool3d:avgPool3d$1,backend,backend_util,basicLSTMCell,batchNorm:batchNorm$2,batchNorm2d,batchNorm3d,batchNorm4d,batchToSpaceND:batchToSpaceND$2,bincount:bincount$2,bitwiseAnd:bitwiseAnd$2,booleanMaskAsync,broadcastArgs:broadcastArgs$2,broadcastTo,broadcast_util,browser,buffer:buffer$1,callbacks,cast:cast$3,ceil:ceil$2,clipByValue:clipByValue$2,clone:clone$1,complex:complex$2,concat:concat$2,concat1d,concat2d,concat3d,concat4d,constraints:exports_constraints,conv1d:conv1d$1,conv2d:conv2d$3,conv2dTranspose:conv2dTranspose$1,conv3d:conv3d$1,conv3dTranspose:conv3dTranspose$1,copyRegisteredKernels,cos:cos$3,cosh:cosh$2,cosineWindow,cumprod:cumprod$2,cumsum:cumsum$2,customGrad,data:index,denseBincount:denseBincount$2,deprecationWarn,depthToSpace:depthToSpace$2,depthwiseConv2d:depthwiseConv2d$3,deregisterOp,device_util,diag:diag$2,dilation2d,disableDeprecationWarnings,dispose,disposeVariables,div:div$1,divNoNan,dot:dot$2,dropout:dropout$2,einsum:einsum$2,elu:elu$4,enableDebugMode,enableProdMode,enclosingPowerOfTwo,engine,ensureShape,env,equal:equal$2,erf:erf$2,euclideanNorm,exp:exp$3,expandDims:expandDims$3,expm1:expm1$2,eye,fft:fft$2,fill:fill$2,findBackend,findBackendFactory,floor:floor$2,floorDiv:floorDiv$2,forceHalfFloat,fused:fused_ops,gather:gather$1,gatherND,gather_util:gather_nd_util,getBackend,getGradient,getKernel,getKernelsForBackend,gpgpu_util,grad,grads,greater:greater$3,greaterEqual:greaterEqual$2,ifft:ifft$2,imag:imag$2,image:image$1,inTopKAsync,initializers:exports_initializers,input,io,irfft,isFinite:isFinite$3,isInf:isInf$2,isNaN:isNaN$4,keep,kernel_impls,layers:exports_layers,leakyRelu:leakyRelu$2,less:less$3,lessEqual:lessEqual$2,linalg,linspace,loadGraphModel,loadGraphModelSync,loadLayersModel,localResponseNormalization,log:log$3,log1p:log1p$2,logSigmoid,logSoftmax,logSumExp,logicalAnd:logicalAnd$2,logicalNot:logicalNot$2,logicalOr:logicalOr$2,logicalXor,losses,lowerBound:lowerBound$1,matMul:matMul$1,math,max:max$6,maxPool:maxPool$2,maxPool3d:maxPool3d$1,maxPoolWithArgmax,maximum:maximum$3,mean:mean$1,memory,meshgrid,metrics:exports_metrics,min:min$6,minimum:minimum$3,mirrorPad:mirrorPad$1,mod:mod$2,model,models:exports_models,moments,movingAverage,mul,multiRNNCell,multinomial:multinomial$2,neg:neg$2,nextFrame,norm,notEqual:notEqual$2,oneHot:oneHot$2,ones:ones$1,onesLike:onesLike$2,op,outerProduct,pad:pad$1,pad1d,pad2d,pad3d,pad4d,pool:pool$1,pow:pow$3,prelu:prelu$3,print,prod:prod$2,profile,raggedGather:raggedGather$2,raggedRange:raggedRange$2,raggedTensorToTensor:raggedTensorToTensor$2,rand,randomGamma,randomNormal:randomNormal$2,randomStandardNormal,randomUniform:randomUniform$1,randomUniformInt,range:range$7,ready,real:real$2,reciprocal:reciprocal$2,registerBackend,registerCallbackConstructor,registerGradient,registerKernel,registerOp,regularizers:exports_regularizers,relu:relu$2,relu6:relu6$2,removeBackend,reshape:reshape$3,reverse:reverse$3,reverse1d,reverse2d,reverse3d,reverse4d,rfft,round:round$3,rsqrt:rsqrt$2,scalar,scatterND,scatter_util:scatter_nd_util,searchSorted:searchSorted$2,selu:selu$2,separableConv2d:separableConv2d$1,sequential:sequential$1,serialization,setBackend,setPlatform,setWebGLContext,setdiff1dAsync,shared,sigmoid:sigmoid$2,sign:sign$3,signal,sin:sin$3,sinh:sinh$2,slice:slice$2,slice1d,slice2d,slice3d,slice4d,slice_util,softmax:softmax$3,softplus:softplus$2,spaceToBatchND:spaceToBatchND$2,sparse:sparse$1,sparseToDense:sparseToDense$2,spectral:spectral$1,split:split$2,sqrt:sqrt$4,square:square$3,squaredDifference:squaredDifference$2,squeeze,stack,step:step$2,stridedSlice:stridedSlice$2,string:string$2,sub:sub$2,sum:sum$2,sumOutType,tan:tan$2,tanh:tanh$2,tensor,tensor1d,tensor2d,tensor3d,tensor4d,tensor5d,tensor6d,tensorScatterUpdate:tensorScatterUpdate$2,tensor_util,test_util,tidy,tile:tile$3,time:time$1,topk,train,transpose:transpose$2,truncatedNormal:truncatedNormal$1,unique:unique$3,unregisterGradient,unregisterKernel,unsortedSegmentSum:unsortedSegmentSum$2,unstack,upcastType,upperBound:upperBound$1,util:util$2,valueAndGrad,valueAndGrads,variable,variableGrads,version,version_converter:version$5,version_core:version$7,version_cpu:version$3,version_layers:version$6,version_webgl:version$2,webgl,webgl_util,where,whereAsync,zeros:zeros$2,zerosLike:zerosLike$2},Symbol.toStringTag,{value:"Module"})),calculateRSI$1=(_,$=14)=>{if(_.length<$+1)return Array(_.length).fill(50);const _e=[],et=_.slice(1).map((st,at)=>st-_[at]);for(let st=0;st<$;st++)_e.push(50);let tt=0,rt=0;for(let st=0;st<$;st++){const at=et[st];at>0?tt+=at:rt-=at}let nt=tt/$,it=rt/$;for(let st=$;st<_.length;st++){const at=st>0?_[st]-_[st-1]:0;if(nt=(nt*($-1)+(at>0?at:0))/$,it=(it*($-1)+(at<0?-at:0))/$,it===0)_e.push(100);else{const dt=100-100/(1+nt/it);_e.push(dt)}}return _e},calculateSMA$1=(_,$)=>{const _e=[];for(let et=0;et<$-1;et++)_e.push(_[et]);for(let et=$-1;et<_.length;et++){let tt=0;for(let rt=0;rt<$;rt++)tt+=_[et-rt];_e.push(tt/$)}return _e},calculateEMA$1=(_,$)=>{const _e=[],et=2/($+1);for(let rt=0;rt<$-1;rt++)_e.push(_[rt]);const tt=_.slice(0,$).reduce((rt,nt)=>rt+nt,0)/$;_e.push(tt);for(let rt=$;rt<_.length;rt++)_e.push((_[rt]-_e[rt-1])*et+_e[rt-1]);return _e},calculateMACD=(_,$=12,_e=26,et=9)=>{const tt=calculateEMA$1(_,$),rt=calculateEMA$1(_,_e),nt=[];for(let at=0;at<_.length;at++)nt.push(tt[at]-rt[at]);const it=calculateEMA$1(nt,et),st=[];for(let at=0;at<_.length;at++)st.push(nt[at]-it[at]);return{macd:nt,signal:it,histogram:st}},normalize$1=_=>{if(_.length===0)return[];const $=Math.min(..._),_e=Math.max(..._);return _e===$?_.map(()=>.5):_.map(et=>(et-$)/(_e-$))},prepareFeatures=_=>{if(!_||_.length<30)return console.error("Insufficient data for feature engineering"),[];try{const $=_.map(jt=>jt.close),_e=_.map(jt=>jt.volume),et=calculateRSI$1($),tt=calculateSMA$1($,20),rt=calculateEMA$1($,10),nt=calculateEMA$1($,20),{macd:it,signal:st,histogram:at}=calculateMACD($),ot=normalize$1(_e),dt=$.map((jt,kt)=>tt[kt]?(jt-tt[kt])/tt[kt]*100:0),ht=rt.map((jt,kt)=>nt[kt]?(jt-nt[kt])/nt[kt]*100:0),yt=$.map((jt,kt)=>kt>0?(jt-$[kt-1])/$[kt-1]*100:0),vt=$.map((jt,kt)=>kt>=3?(jt-$[kt-3])/$[kt-3]*100:0),xt=$.map((jt,kt)=>kt>=5?(jt-$[kt-5])/$[kt-5]*100:0),wt=[],Et=10;for(let jt=0;jt<$.length;jt++){if(jt<Et){wt.push(0);continue}const kt=$.slice(jt-Et,jt),Lt=kt.slice(1).map((er,tr)=>(er-kt[tr])/kt[tr]),Bt=Lt.reduce((er,tr)=>er+tr,0)/Lt.length,Gt=Lt.reduce((er,tr)=>er+Math.pow(tr-Bt,2),0)/Lt.length;wt.push(Math.sqrt(Gt)*100)}const At=[];for(let jt=0;jt<_.length;jt++)jt<26||At.push([yt[jt],vt[jt],xt[jt],et[jt],dt[jt],ht[jt],it[jt],st[jt],at[jt],ot[jt],wt[jt],normalize$1($.slice(jt-3,jt+1))[0],normalize$1($.slice(jt-3,jt+1))[1],normalize$1($.slice(jt-3,jt+1))[2]]);return At}catch($){return console.error("Error preparing features:",$),[]}};class AITradingService{constructor(){vn(this,"model",null);vn(this,"isInitialized",!1);vn(this,"modelLoading",!1)}async initialize(){if(this.modelLoading){for(console.log("Model already loading, waiting...");this.modelLoading;)await new Promise($=>setTimeout($,100));return this.isInitialized}if(this.isInitialized)return console.log("Model already initialized"),!0;this.modelLoading=!0;try{if(console.log("Initializing AI Trading Service"),!tf)throw new Error("TensorFlow.js not available");try{console.log("Trying to load saved model..."),this.model=await loadLayersModel("localstorage://trading-model"),console.log("Loaded saved model")}catch{console.log("No saved model found, creating new one"),await this.createModel()}return this.isInitialized=!0,console.log("AI Trading Service initialized successfully"),!0}catch($){return console.error("Failed to initialize AI Trading Service:",$),this.isInitialized=!1,!1}finally{this.modelLoading=!1}}async createModel(){console.log("Creating new AI model");try{return this.model=sequential$1({layers:[dense({inputShape:[14],units:32,activation:"relu"}),dropout({rate:.2}),dense({units:16,activation:"relu"}),dense({units:3,activation:"softmax"})]}),this.model.compile({optimizer:train.adam(),loss:"categoricalCrossentropy",metrics:["accuracy"]}),console.log("Model created successfully"),await this.saveModel(),!0}catch($){return console.error("Error creating model:",$),!1}}async saveModel(){if(!this.model)return console.error("No model to save"),!1;try{return await this.model.save("localstorage://trading-model"),console.log("Model saved to localStorage"),!0}catch($){return console.error("Error saving model:",$),!1}}async predict($){if((!this.isInitialized||!this.model)&&!await this.initialize())return{action:"HOLD",confidence:0,factors:["Model not initialized"]};try{if($.length<30)return{action:"HOLD",confidence:0,factors:["Insufficient data"]};const _e=prepareFeatures($);if(!_e||_e.length===0)return{action:"HOLD",confidence:0,factors:["Failed to prepare features"]};const et=_e[_e.length-1],tt=tensor2d([et]),rt=this.model.predict(tt),nt=await rt.data();tt.dispose(),rt.dispose();const it=["BUY","HOLD","SELL"],st=Array.from(nt),at=st.indexOf(Math.max(...st)),ot=st[at],dt=this.determineFactors($,et);return{action:it[at],confidence:ot,factors:dt}}catch(_e){return console.error("Error making prediction:",_e),{action:"HOLD",confidence:0,factors:["Prediction error"]}}}determineFactors($,_e){const et=[],tt=$.slice(-5).map(ot=>ot.close),rt=(tt[tt.length-1]-tt[0])/tt[0]*100;rt>2?et.push("Strong upward price momentum (+2%)"):rt<-2&&et.push("Strong downward price momentum (-2%)");const nt=$.slice(-5).map(ot=>ot.volume),it=nt.reduce((ot,dt)=>ot+dt,0)/nt.length;nt[nt.length-1]>it*1.5&&et.push("Volume spike (+50% above average)");const at=_e[3];return at<30?et.push("Oversold conditions (RSI < 30)"):at>70&&et.push("Overbought conditions (RSI > 70)"),et.length===0&&et.push("Multiple technical indicators alignment"),et}}const aiTradingService=new AITradingService,useAI=_=>{const[$,_e]=reactExports.useState({isInitialized:!1,isLoading:!1,lastPrediction:null,error:null}),[et,tt]=useLocalStorage("crypto-ai-settings",{enabled:!1,model:"tensorflow",positionSize:5,confidenceThreshold:75,leverage:1,automatedTrading:!1,circuitBreaker:!0,sandboxMode:!0});reactExports.useEffect(()=>{let at=!0;return et.enabled&&!$.isInitialized?(_e(dt=>({...dt,isLoading:!0})),(async()=>{try{const dt=await aiTradingService.initialize();at&&_e(ht=>({...ht,isInitialized:dt,isLoading:!1,error:dt?null:"Failed to initialize AI"}))}catch(dt){at&&_e(ht=>({...ht,isInitialized:!1,isLoading:!1,error:`Error initializing AI: ${dt instanceof Error?dt.message:String(dt)}`}))}})()):!et.enabled&&$.isInitialized&&_e({isInitialized:!1,isLoading:!1,lastPrediction:null,error:null}),()=>{at=!1}},[et.enabled,$.isInitialized]);const rt=reactExports.useCallback(async at=>{if(!et.enabled)return{action:"HOLD",confidence:0,factors:["AI is disabled"]};if(!$.isInitialized)return{action:"HOLD",confidence:0,factors:["AI not initialized"]};const ot=at||_;if(!ot||ot.length<30)return{action:"HOLD",confidence:0,factors:["Insufficient data"]};_e(dt=>({...dt,isLoading:!0}));try{const dt=await aiTradingService.predict(ot);return dt.confidence<et.confidenceThreshold/100&&(dt.action="HOLD",dt.factors.unshift(`Confidence below threshold (${Math.round(dt.confidence*100)}% < ${et.confidenceThreshold}%)`)),_e(ht=>({...ht,isLoading:!1,lastPrediction:{...dt,timestamp:new Date().toISOString()},error:null})),dt}catch(dt){const ht=`Error making prediction: ${dt instanceof Error?dt.message:String(dt)}`;return _e(yt=>({...yt,isLoading:!1,error:ht})),{action:"HOLD",confidence:0,factors:[ht]}}},[et,$.isInitialized,_]),nt=reactExports.useCallback(at=>{tt(ot=>({...ot,...at}))},[tt]),it=reactExports.useCallback(async()=>{nt({enabled:!0});try{_e(ot=>({...ot,isLoading:!0}));const at=await aiTradingService.initialize();return _e(ot=>({...ot,isInitialized:at,isLoading:!1,error:at?null:"Failed to initialize AI"})),at}catch(at){return _e(ot=>({...ot,isLoading:!1,error:`Error enabling AI: ${at instanceof Error?at.message:String(at)}`})),!1}},[nt]),st=reactExports.useCallback(()=>{nt({enabled:!1}),_e(at=>({...at,isInitialized:!1,lastPrediction:null}))},[nt]);return{isEnabled:et.enabled,isInitialized:$.isInitialized,isLoading:$.isLoading,error:$.error,lastPrediction:$.lastPrediction,settings:et,updateSettings:nt,enableAI:it,disableAI:st,predict:rt}},calculateEMA=(_,$)=>{if(_.length<$)return _[_.length-1]||0;let _e=_.slice(0,$).reduce((tt,rt)=>tt+rt,0)/$;const et=2/($+1);for(let tt=$;tt<_.length;tt++)_e=_[tt]*et+_e*(1-et);return _e},calculateSMA=(_,$)=>_.length<$?_[_.length-1]||0:_.slice(_.length-$).reduce((et,tt)=>et+tt,0)/$,calculateRSI=(_,$=14)=>{if(_.length<=$)return 50;let _e=0,et=0;for(let rt=_.length-$;rt<_.length;rt++){const nt=_[rt]-_[rt-1];nt>=0?_e+=nt:et-=nt}return et===0?100:100-100/(1+_e/et)},calculateRelativeVolume=(_,$=20)=>{if(_.length<$)return 1;const _e=_.slice(_.length-$-1,_.length-1),et=_e.reduce((rt,nt)=>rt+nt,0)/_e.length,tt=_[_.length-1];return et>0?tt/et:1},detectCrossover=(_,$,_e)=>{if(_.length<_e+1)return null;const et=calculateEMA(_,$),tt=calculateEMA(_,_e),rt=_.slice(0,_.length-1),nt=calculateEMA(rt,$),it=calculateEMA(rt,_e);return nt<=it&&et>tt?"up":nt>=it&&et<tt?"down":null},extractPricesAndVolumes=_=>{const $=_.map(et=>et.close),_e=_.map(et=>et.volume);return{prices:$,volumes:_e}},determineTrendStrength=(_,$,_e,et,tt)=>{const rt=Math.abs(_-$)/$*100;return tt!==null||rt>2&&et>1.5&&(_e>65||_e<35)?"strong":rt>1&&et>1&&(_e>55||_e<45)?"moderate":"weak"},determineVolumeLevel=_=>_>1.5?"high":_<.7?"low":"average",useTrendAnalysis=_=>{const[$,_e]=reactExports.useState([]),[et,tt]=reactExports.useState([]),[rt,nt]=reactExports.useState([]),[it,st]=reactExports.useState(new Date),[at,ot]=reactExports.useState(!0),[dt,ht]=reactExports.useState(null);BinanceWebSocket.getInstance();const yt=async At=>{try{const jt=_.replace("/",""),Lt=await fetch(`https://testnet.binancefuture.com/fapi/v1/klines?symbol=${jt}&interval=${At}&limit=100`);if(!Lt.ok)throw new Error(`Failed to fetch klines: ${Lt.status} ${Lt.statusText}`);return(await Lt.json()).map(Gt=>({time:Gt[0],open:parseFloat(Gt[1]),high:parseFloat(Gt[2]),low:parseFloat(Gt[3]),close:parseFloat(Gt[4]),volume:parseFloat(Gt[5])}))}catch(jt){throw console.error(`Error fetching ${At} klines:`,jt),jt}},vt=async()=>{ot(!0),ht(null);try{const[At,jt,kt]=await Promise.all([yt("5m"),yt("1h"),yt("1d")]);_e(At),tt(jt),nt(kt),st(new Date)}catch(At){console.error("Error fetching trend data:",At),ht("Failed to fetch trend data. Please try again later.")}finally{ot(!1)}};reactExports.useEffect(()=>{vt();const At=setInterval(()=>{yt("5m").then(Lt=>_e(Lt)).catch(Lt=>console.error("Error updating 5m data:",Lt))},6e4),jt=setInterval(()=>{yt("1h").then(Lt=>tt(Lt)).catch(Lt=>console.error("Error updating 1h data:",Lt))},5*6e4),kt=setInterval(()=>{yt("1d").then(Lt=>nt(Lt)).catch(Lt=>console.error("Error updating 1d data:",Lt))},60*6e4);return()=>{clearInterval(At),clearInterval(jt),clearInterval(kt)}},[_]);const xt=reactExports.useMemo(()=>{if($.length<50)return{direction:"neutral",strength:"weak",volumeLevel:"average",ema9:0,sma50:0,rsi14:50,relativeVolume:1,isLoading:at,error:dt};const{prices:At,volumes:jt}=extractPricesAndVolumes($),kt=calculateEMA(At,9),Lt=calculateSMA(At,50),Bt=calculateRSI(At,14),Gt=calculateRelativeVolume(jt),er=detectCrossover(At,9,50);let tr;kt>Lt?tr="up":kt<Lt?tr="down":tr="neutral",(Bt>70&&tr==="up"||Bt<30&&tr==="down")&&(tr="neutral"),er==="up"?tr="up":er==="down"&&(tr="down");const ar=determineTrendStrength(kt,Lt,Bt,Gt,er),Mt=determineVolumeLevel(Gt);return{direction:tr,strength:ar,volumeLevel:Mt,ema9:kt,sma50:Lt,rsi14:Bt,relativeVolume:Gt,isLoading:at,error:dt}},[$,at,dt]),wt=reactExports.useMemo(()=>{if(et.length<50)return{direction:"neutral",strength:"weak",volumeLevel:"average",ema9:0,sma50:0,rsi14:50,relativeVolume:1,isLoading:at,error:dt};const{prices:At,volumes:jt}=extractPricesAndVolumes(et),kt=calculateEMA(At,9),Lt=calculateSMA(At,50),Bt=calculateRSI(At,14),Gt=calculateRelativeVolume(jt),er=detectCrossover(At,9,50);let tr;kt>Lt?tr="up":kt<Lt?tr="down":tr="neutral",(Bt>70&&tr==="up"||Bt<30&&tr==="down")&&(tr="neutral"),er==="up"?tr="up":er==="down"&&(tr="down");const ar=determineTrendStrength(kt,Lt,Bt,Gt,er),Mt=determineVolumeLevel(Gt);return{direction:tr,strength:ar,volumeLevel:Mt,ema9:kt,sma50:Lt,rsi14:Bt,relativeVolume:Gt,isLoading:at,error:dt}},[et,at,dt]),Et=reactExports.useMemo(()=>{if(rt.length<50)return{direction:"neutral",strength:"weak",volumeLevel:"average",ema9:0,sma50:0,rsi14:50,relativeVolume:1,isLoading:at,error:dt};const{prices:At,volumes:jt}=extractPricesAndVolumes(rt),kt=calculateEMA(At,9),Lt=calculateSMA(At,50),Bt=calculateRSI(At,14),Gt=calculateRelativeVolume(jt),er=detectCrossover(At,9,50);let tr;kt>Lt?tr="up":kt<Lt?tr="down":tr="neutral",(Bt>70&&tr==="up"||Bt<30&&tr==="down")&&(tr="neutral"),er==="up"?tr="up":er==="down"&&(tr="down");const ar=determineTrendStrength(kt,Lt,Bt,Gt,er),Mt=determineVolumeLevel(Gt);return{direction:tr,strength:ar,volumeLevel:Mt,ema9:kt,sma50:Lt,rsi14:Bt,relativeVolume:Gt,isLoading:at,error:dt}},[rt,at,dt]);return{shortTerm:xt,mediumTerm:wt,longTerm:Et,lastUpdated:it,isLoading:at,error:dt,refreshData:vt}},strengthToPercent=_=>{switch(_){case"weak":return 30;case"moderate":return 65;case"strong":return 90;default:return 0}},getTrendColor=(_,$)=>{if(_==="neutral")return"bg-gray-400 dark:bg-gray-600";if(_==="up")switch($){case"weak":return"bg-green-300 dark:bg-green-800";case"moderate":return"bg-green-500 dark:bg-green-600";case"strong":return"bg-green-700 dark:bg-green-500";default:return"bg-green-500"}else switch($){case"weak":return"bg-red-300 dark:bg-red-800";case"moderate":return"bg-red-500 dark:bg-red-600";case"strong":return"bg-red-700 dark:bg-red-500";default:return"bg-red-500"}},AIAnalysisCard=({symbol:_,timeframe:$})=>{const{klines:_e,isLoading:et}=useMarketData(_,$),{shortTerm:tt,mediumTerm:rt,longTerm:nt,lastUpdated:it,isLoading:st,error:at,refreshData:ot}=useTrendAnalysis(_),{isEnabled:dt,isLoading:ht,lastPrediction:yt,error:vt,predict:xt}=useAI(_e);reactExports.useEffect(()=>{dt&&_e&&_e.length>0&&!et&&xt(_e)},[_e,dt,xt,et]);const wt=et||ht||st,Et=vt||at,At=yt||{action:"HOLD",confidence:0,factors:dt?["Waiting for data..."]:["AI is disabled"],timestamp:new Date().toISOString()},kt={BUY:"buy",SELL:"sell",HOLD:"neutral"}[At.action],Lt={short:{direction:tt.direction==="up"?"bullish":tt.direction==="down"?"bearish":"neutral",strength:tt.strength,rsi:tt.rsi14,volumeLevel:tt.volumeLevel},medium:{direction:rt.direction==="up"?"bullish":rt.direction==="down"?"bearish":"neutral",strength:rt.strength,rsi:rt.rsi14,volumeLevel:rt.volumeLevel},long:{direction:nt.direction==="up"?"bullish":nt.direction==="down"?"bearish":"neutral",strength:nt.strength,rsi:nt.rsi14,volumeLevel:nt.volumeLevel}},Bt={trend:tt.direction==="up"?"uptrend":tt.direction==="down"?"downtrend":"sideways",volatility:tt.rsi14>70||tt.rsi14<30?"high":tt.rsi14>60||tt.rsi14<40?"medium":"low",momentum:rt.direction==="up"?"increasing":rt.direction==="down"?"decreasing":"stable",volume:tt.volumeLevel},Gt=At.factors&&At.factors.length>0?At.factors.join(". "):"Análise pendente. Aguardando mais dados para gerar previsões.",er=()=>jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"mr-2",children:"Tendência"}),jsxRuntimeExports.jsx("span",{className:Bt.trend==="uptrend"?"text-green-500":Bt.trend==="downtrend"?"text-red-500":"text-yellow-500",children:Bt.trend==="uptrend"?"Alta":Bt.trend==="downtrend"?"Baixa":"Lateral"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"mr-2",children:"Volatilidade"}),jsxRuntimeExports.jsx("span",{children:Bt.volatility==="low"?"Baixa":Bt.volatility==="medium"?"Média":"Alta"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"mr-2",children:"Momentum"}),jsxRuntimeExports.jsx("span",{children:Bt.momentum==="increasing"?"Crescente":Bt.momentum==="decreasing"?"Decrescente":"Estável"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Badge,{variant:"outline",className:"mr-2",children:"Volume"}),jsxRuntimeExports.jsx("span",{children:Bt.volume==="low"?"Baixo":Bt.volume==="average"?"Médio":"Alto"})]})]}),tr=()=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-4 mt-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),"Curto prazo (5min)"]}),jsxRuntimeExports.jsx(Badge,{variant:Lt.short.direction==="bullish"?"default":Lt.short.direction==="bearish"?"destructive":"secondary",children:Lt.short.direction==="bullish"?"Bullish":Lt.short.direction==="bearish"?"Bearish":"Neutro"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[jsxRuntimeExports.jsx("span",{children:"Força da tendência:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:Lt.short.strength==="strong"?"Forte":Lt.short.strength==="moderate"?"Moderada":"Fraca"})]}),jsxRuntimeExports.jsx(Progress,{value:strengthToPercent(Lt.short.strength),className:"h-2",indicatorClassName:getTrendColor(tt.direction,Lt.short.strength)})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),"Médio prazo (1h)"]}),jsxRuntimeExports.jsx(Badge,{variant:Lt.medium.direction==="bullish"?"default":Lt.medium.direction==="bearish"?"destructive":"secondary",children:Lt.medium.direction==="bullish"?"Bullish":Lt.medium.direction==="bearish"?"Bearish":"Neutro"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[jsxRuntimeExports.jsx("span",{children:"Força da tendência:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:Lt.medium.strength==="strong"?"Forte":Lt.medium.strength==="moderate"?"Moderada":"Fraca"})]}),jsxRuntimeExports.jsx(Progress,{value:strengthToPercent(Lt.medium.strength),className:"h-2",indicatorClassName:getTrendColor(rt.direction,Lt.medium.strength)})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),"Longo prazo (1d)"]}),jsxRuntimeExports.jsx(Badge,{variant:Lt.long.direction==="bullish"?"default":Lt.long.direction==="bearish"?"destructive":"secondary",children:Lt.long.direction==="bullish"?"Bullish":Lt.long.direction==="bearish"?"Bearish":"Neutro"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[jsxRuntimeExports.jsx("span",{children:"Força da tendência:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:Lt.long.strength==="strong"?"Forte":Lt.long.strength==="moderate"?"Moderada":"Fraca"})]}),jsxRuntimeExports.jsx(Progress,{value:strengthToPercent(Lt.long.strength),className:"h-2",indicatorClassName:getTrendColor(nt.direction,Lt.long.strength)})]})]})]});return jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-2",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs(CardTitle,{className:"text-lg",children:["Análise Integrada: ",_]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:ot,disabled:wt,className:"h-8 px-2",children:[jsxRuntimeExports.jsx(RefreshCw,{className:`w-4 h-4 ${wt?"animate-spin":""}`}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Atualizar"})]}),!wt&&jsxRuntimeExports.jsx(Badge,{variant:kt==="buy"?"default":kt==="sell"?"destructive":"secondary",children:kt==="buy"?jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(ArrowUp,{className:"mr-1 h-4 w-4"}),"Compra"]}):kt==="sell"?jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(ArrowDown,{className:"mr-1 h-4 w-4"}),"Venda"]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Layers,{className:"mr-1 h-4 w-4"}),"Neutro"]})})]})]})}),jsxRuntimeExports.jsx(CardContent,{children:wt?jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-full"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-full"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-3/4"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-24 w-full mt-4"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-24 w-full"})]}):Et?jsxRuntimeExports.jsxs("div",{className:"text-red-500 flex items-center",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"h-4 w-4 mr-2"}),jsxRuntimeExports.jsx("span",{children:Et})]}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm mb-4",children:Gt}),jsxRuntimeExports.jsxs("div",{className:"flex items-center mt-3 mb-4",children:[jsxRuntimeExports.jsx("span",{className:"mr-2",children:"Confiança:"}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded-full",children:jsxRuntimeExports.jsx("div",{className:`h-2 rounded-full ${At.confidence>.7?"bg-green-500":At.confidence>.4?"bg-yellow-500":"bg-red-500"}`,style:{width:`${At.confidence*100}%`}})}),jsxRuntimeExports.jsxs("span",{className:"ml-2",children:[Math.round(At.confidence*100),"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium mb-2",children:"Indicadores Técnicos"}),er()]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium mb-2",children:"Análise Multitimeframe"}),tr()]})]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-muted-foreground mt-4 pt-2 border-t flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:["Última atualização: ",it?it.toLocaleTimeString():new Date().toLocaleTimeString(),$&&` • Timeframe: ${$}`]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(ChartNoAxesColumnIncreasing,{className:"w-3 h-3"}),jsxRuntimeExports.jsx("span",{children:"EMA(9), SMA(50), RSI(14), Volume"})]})]})]})})]})},AIPerformanceCard=()=>{const _={winRate:.72,totalSignals:128,avgProfit:2.8,avgLoss:-1.2,profitFactor:2.33,lastTrades:[{symbol:"BTC/USDT",result:"win",profit:3.2,timestamp:"2023-04-02T14:30:00Z"},{symbol:"ETH/USDT",result:"loss",profit:-1.5,timestamp:"2023-04-01T09:15:00Z"},{symbol:"BNB/USDT",result:"win",profit:2.7,timestamp:"2023-03-31T18:45:00Z"}],lastUpdated:new Date().toISOString()},$=()=>jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium mb-2",children:"Últimas Operações"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:_.lastTrades.map((_e,et)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-sm bg-slate-50 dark:bg-slate-900 p-2 rounded-md",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:_e.symbol}),jsxRuntimeExports.jsx(Badge,{variant:_e.result==="win"?"default":"destructive",className:"ml-2",children:_e.result==="win"?"Ganho":"Perda"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsxs("span",{className:_e.profit>=0?"text-green-500":"text-red-500",children:[_e.profit>=0?"+":"",_e.profit,"%"]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:new Date(_e.timestamp).toLocaleDateString()})]})]},et))})]});return jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-2",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:"Performance da IA"})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Award,{className:"h-4 w-4 mr-2 text-blue-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Taxa de Acerto"})]}),jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold",children:[Math.round(_.winRate*100),"%"]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-muted-foreground",children:["Em ",_.totalSignals," sinais gerados"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(DollarSign,{className:"h-4 w-4 mr-2 text-green-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Fator de Lucro"})]}),jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold",children:_.profitFactor.toFixed(2)}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-muted-foreground",children:["Lucro/Perda média: ",_.avgProfit,"% / ",_.avgLoss,"%"]})]})]}),$(),jsxRuntimeExports.jsxs("div",{className:"text-xs text-muted-foreground mt-4",children:["Última atualização: ",new Date(_.lastUpdated).toLocaleTimeString()]})]})})]})},DEFAULT_SYMBOLS=["BTC/USDT","ETH/USDT","BNB/USDT","SOL/USDT","ADA/USDT","XRP/USDT","DOT/USDT","DOGE/USDT"],Dashboard=()=>{const[_,$]=reactExports.useState("BTC/USDT"),[_e,et]=reactExports.useState("1h"),[tt,rt]=reactExports.useState(DEFAULT_SYMBOLS),[nt,it]=reactExports.useState(!1),[st,at]=reactExports.useState(null),[ot,dt]=reactExports.useState({isBanned:!1,banUntil:0,remainingMinutes:0}),[ht,yt]=reactExports.useState(!1),vt=reactExports.useRef(!1),xt=reactExports.useRef(null),wt=reactExports.useRef({fetchPositions:async()=>Promise.resolve(),refetchKlines:async()=>Promise.resolve(),isBanned:!1}),Et=reactExports.useRef({checkBan:()=>{},initialize:async()=>Promise.resolve()}),At=BinanceWebSocket.getInstance(),jt=AuthService.getInstance(),{klines:kt,marketData:Lt,refetchKlines:Bt,isLoading:Gt,error:er}=useMarketData(_,_e),{trades:tr,positions:ar,syncTradesFromBinance:Mt,fetchPositions:lt,isLoading:mt,createOrder:gt,error:bt}=useTrades(),St=reactExports.useCallback(()=>{const rr=At.getBanStatus();dt(rr),rr.isBanned&&!(st!=null&&st.includes("IP ban"))?at(`Binance IP ban active for ${rr.remainingMinutes} more minutes. Using cached data where possible.`):!rr.isBanned&&(st!=null&&st.includes("IP ban"))&&at(null)},[At]),Nt=reactExports.useCallback(async()=>{if(!vt.current){vt.current=!0;try{const rr=At.getBanStatus();try{await At.connect(),console.log("WebSocket connected successfully")}catch(fr){console.warn("WebSocket connection failed, will retry automatically:",fr)}if(jt.hasApiCredentials())try{if(!rr.isBanned){await new Promise(gr=>setTimeout(gr,500)),await lt(),console.log("Positions fetched successfully"),await new Promise(gr=>setTimeout(gr,500));const dr=(await At.getAccountInfo()).positions.filter(gr=>parseFloat(gr.positionAmt)!==0).map(gr=>{const hr=gr.symbol,or=["USDT","USD","BTC","ETH","BNB"];for(const br of or)if(hr.endsWith(br))return`${hr.slice(0,-br.length)}/${br}`;return hr});dr.length>0&&rt([...new Set([...DEFAULT_SYMBOLS,...dr])])}}catch(fr){console.warn("Failed to get symbols from account, using defaults:",fr)}Bt(),it(!0)}catch(rr){console.error("Failed to initialize data:",rr),at("Failed to initialize. Using default symbols and cached data."),it(!0)}}},[At,jt,lt,Bt]);reactExports.useEffect(()=>{St(),Et.current={checkBan:St,initialize:Nt},xt.current=setInterval(()=>{Et.current.checkBan()},6e4);const rr=setTimeout(()=>{Et.current.initialize().catch(gr=>{console.error("Initialization error:",gr)})},1500),dr=setInterval(()=>{jt.hasApiCredentials()&&!vt.current&&Et.current.initialize().catch(hr=>{console.error("Initialization after credentials update error:",hr)})},3e3);return()=>{clearTimeout(rr),xt.current&&clearInterval(xt.current),clearInterval(dr)}},[]),reactExports.useEffect(()=>{let rr=null;bt?(rr=bt,(bt.includes("banned")||bt.includes("418"))&&At.getBanStatus()):er&&(rr=er),rr!==st&&at(rr)},[bt,er]),reactExports.useEffect(()=>{wt.current={fetchPositions:lt,refetchKlines:Bt,isBanned:ot.isBanned};const rr=setInterval(()=>{wt.current.isBanned||(async()=>{try{await wt.current.fetchPositions(),await new Promise(fr=>setTimeout(fr,2e3)),await wt.current.refetchKlines()}catch(fr){console.error("Error during periodic update:",fr)}})()},6e4);return()=>clearInterval(rr)},[]);const Pt=async()=>{try{yt(!0),await lt(),await new Promise(rr=>setTimeout(rr,2e3)),await Bt()}catch(rr){console.error("Manual refresh failed:",rr)}finally{yt(!1)}},Tt=tr.length;tr.filter(rr=>rr.status==="NEW"||rr.status==="PARTIALLY_FILLED").length;const pt=tr.filter(rr=>rr.status==="FILLED"||rr.status==="CANCELED"||rr.status==="EXPIRED"),Rt=pt.filter(rr=>(rr.profit||0)>0).length;pt.filter(rr=>(rr.profit||0)<0).length;const zt=pt.length>0?Rt/pt.length*100:0,Yt=pt.reduce((rr,fr)=>rr+(fr.profit||0),0),ir=ar.reduce((rr,fr)=>{const dr=fr.unrealizedPnL||0;return rr+dr},0),ur=()=>ot.isBanned?jsxRuntimeExports.jsxs(Alert,{variant:"destructive",className:"mb-4",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"h-4 w-4"}),jsxRuntimeExports.jsx(AlertTitle,{children:"IP Ban Detected"}),jsxRuntimeExports.jsxs(AlertDescription,{children:[jsxRuntimeExports.jsxs("p",{children:["Your IP has been banned by Binance until ",new Date(ot.banUntil).toLocaleString(),"(",ot.remainingMinutes," minutes remaining)."]}),jsxRuntimeExports.jsx("p",{className:"mt-2",children:"The application will continue to function using cached data. WebSocket connections for real-time updates remain active."}),jsxRuntimeExports.jsx("p",{className:"mt-2 font-semibold",children:"Trading functionality is limited until the ban expires."})]})]}):null,cr=()=>st?jsxRuntimeExports.jsx("div",{className:"p-4 mb-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:jsxRuntimeExports.jsx("div",{className:"text-red-700 dark:text-red-400 text-sm",children:st})}):null;return nt?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(PageHeader,{title:"Dashboard",subtitle:"Overview of your trading performance and market data",actions:jsxRuntimeExports.jsxs(Button,{onClick:Pt,variant:"outline",disabled:ht,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:ht?"animate-spin":"",children:"⟳"}),"Refresh Data"]})}),ur(),cr(),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{className:"p-4 pb-2",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Total Profit/Loss"})}),jsxRuntimeExports.jsxs(CardContent,{className:"p-4 pt-0",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold",children:mt?jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-[150px]"}):formatCurrency(Yt+ir)}),jsxRuntimeExports.jsx("div",{className:"flex items-center text-xs text-muted-foreground",children:jsxRuntimeExports.jsx("span",{children:"All Time"})})]})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{className:"p-4 pb-2",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Win Rate"})}),jsxRuntimeExports.jsxs(CardContent,{className:"p-4 pt-0",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold",children:mt?jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-[150px]"}):formatPercentage(zt)}),jsxRuntimeExports.jsx("div",{className:"flex items-center text-xs text-muted-foreground",children:jsxRuntimeExports.jsxs("span",{children:["Based on ",pt.length," closed trades"]})})]})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{className:"p-4 pb-2",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Open Positions"})}),jsxRuntimeExports.jsxs(CardContent,{className:"p-4 pt-0",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold",children:mt?jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-[150px]"}):ar.length||0}),jsxRuntimeExports.jsx("div",{className:"flex items-center text-xs text-muted-foreground",children:jsxRuntimeExports.jsxs("span",{children:["Out of ",Tt," total trades"]})})]})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{className:"p-4 pb-2",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Market Overview"})}),jsxRuntimeExports.jsx(CardContent,{className:"p-4 pt-0",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[Gt?jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-[150px]"}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold",children:Lt&&Lt.price?formatCurrency(Lt.price):"Waiting..."}),jsxRuntimeExports.jsx("div",{className:"text-xs text-muted-foreground",children:_})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center",children:!Gt&&Lt&&Lt.changePercent!==void 0&&jsxRuntimeExports.jsx(Badge,{variant:Lt.changePercent>=0?"default":"destructive",children:formatPercentage(Lt.changePercent/100)})})]})})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-end space-x-4 mt-6 mb-2",children:jsxRuntimeExports.jsxs(Select$1,{value:_,onValueChange:$,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[180px]",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select symbol"})}),jsxRuntimeExports.jsx(SelectContent,{children:tt.map(rr=>jsxRuntimeExports.jsx(SelectItem,{value:rr,children:rr},rr))})]})}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 md:grid-cols-2 mt-2",children:[jsxRuntimeExports.jsx("div",{className:"md:col-span-2",children:jsxRuntimeExports.jsx(AIAnalysisCard,{symbol:_,timeframe:_e})}),jsxRuntimeExports.jsx("div",{className:"md:col-span-2",children:jsxRuntimeExports.jsx(AIPerformanceCard,{})})]}),!1]}):jsxRuntimeExports.jsx("div",{className:"p-4",children:jsxRuntimeExports.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((rr,fr)=>jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{className:"p-4 pb-2",children:jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-[100px]"})}),jsxRuntimeExports.jsxs(CardContent,{className:"p-4 pt-0",children:[jsxRuntimeExports.jsx(Skeleton,{className:"h-8 w-[150px]"}),jsxRuntimeExports.jsx(Skeleton,{className:"h-4 w-[100px] mt-2"})]})]},fr))})})},Table=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx("div",{className:"relative w-full overflow-auto",children:jsxRuntimeExports.jsx("table",{ref:_e,className:cn("w-full caption-bottom text-sm",_),...$})}));Table.displayName="Table";const TableHeader=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx("thead",{ref:_e,className:cn("[&_tr]:border-b",_),...$}));TableHeader.displayName="TableHeader";const TableBody=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx("tbody",{ref:_e,className:cn("[&_tr:last-child]:border-0",_),...$}));TableBody.displayName="TableBody";const TableFooter=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx("tfoot",{ref:_e,className:cn("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",_),...$}));TableFooter.displayName="TableFooter";const TableRow=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx("tr",{ref:_e,className:cn("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",_),...$}));TableRow.displayName="TableRow";const TableHead=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx("th",{ref:_e,className:cn("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",_),...$}));TableHead.displayName="TableHead";const TableCell=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx("td",{ref:_e,className:cn("p-4 align-middle [&:has([role=checkbox])]:pr-0",_),...$}));TableCell.displayName="TableCell";const TableCaption=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx("caption",{ref:_e,className:cn("mt-4 text-sm text-muted-foreground",_),...$}));TableCaption.displayName="TableCaption";var TABS_NAME="Tabs",[createTabsContext,createTabsScope]=createContextScope$3(TABS_NAME,[createRovingFocusGroupScope]),useRovingFocusGroupScope=createRovingFocusGroupScope(),[TabsProvider,useTabsContext]=createTabsContext(TABS_NAME),Tabs$1=reactExports.forwardRef((_,$)=>{const{__scopeTabs:_e,value:et,onValueChange:tt,defaultValue:rt,orientation:nt="horizontal",dir:it,activationMode:st="automatic",...at}=_,ot=useDirection(it),[dt,ht]=useControllableState({prop:et,onChange:tt,defaultProp:rt});return jsxRuntimeExports.jsx(TabsProvider,{scope:_e,baseId:useId(),value:dt,onValueChange:ht,orientation:nt,dir:ot,activationMode:st,children:jsxRuntimeExports.jsx(Primitive.div,{dir:ot,"data-orientation":nt,...at,ref:$})})});Tabs$1.displayName=TABS_NAME;var TAB_LIST_NAME="TabsList",TabsList$1=reactExports.forwardRef((_,$)=>{const{__scopeTabs:_e,loop:et=!0,...tt}=_,rt=useTabsContext(TAB_LIST_NAME,_e),nt=useRovingFocusGroupScope(_e);return jsxRuntimeExports.jsx(Root$5,{asChild:!0,...nt,orientation:rt.orientation,dir:rt.dir,loop:et,children:jsxRuntimeExports.jsx(Primitive.div,{role:"tablist","aria-orientation":rt.orientation,...tt,ref:$})})});TabsList$1.displayName=TAB_LIST_NAME;var TRIGGER_NAME="TabsTrigger",TabsTrigger$1=reactExports.forwardRef((_,$)=>{const{__scopeTabs:_e,value:et,disabled:tt=!1,...rt}=_,nt=useTabsContext(TRIGGER_NAME,_e),it=useRovingFocusGroupScope(_e),st=makeTriggerId(nt.baseId,et),at=makeContentId(nt.baseId,et),ot=et===nt.value;return jsxRuntimeExports.jsx(Item$2,{asChild:!0,...it,focusable:!tt,active:ot,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"tab","aria-selected":ot,"aria-controls":at,"data-state":ot?"active":"inactive","data-disabled":tt?"":void 0,disabled:tt,id:st,...rt,ref:$,onMouseDown:composeEventHandlers(_.onMouseDown,dt=>{!tt&&dt.button===0&&dt.ctrlKey===!1?nt.onValueChange(et):dt.preventDefault()}),onKeyDown:composeEventHandlers(_.onKeyDown,dt=>{[" ","Enter"].includes(dt.key)&&nt.onValueChange(et)}),onFocus:composeEventHandlers(_.onFocus,()=>{const dt=nt.activationMode!=="manual";!ot&&!tt&&dt&&nt.onValueChange(et)})})})});TabsTrigger$1.displayName=TRIGGER_NAME;var CONTENT_NAME="TabsContent",TabsContent$1=reactExports.forwardRef((_,$)=>{const{__scopeTabs:_e,value:et,forceMount:tt,children:rt,...nt}=_,it=useTabsContext(CONTENT_NAME,_e),st=makeTriggerId(it.baseId,et),at=makeContentId(it.baseId,et),ot=et===it.value,dt=reactExports.useRef(ot);return reactExports.useEffect(()=>{const ht=requestAnimationFrame(()=>dt.current=!1);return()=>cancelAnimationFrame(ht)},[]),jsxRuntimeExports.jsx(Presence,{present:tt||ot,children:({present:ht})=>jsxRuntimeExports.jsx(Primitive.div,{"data-state":ot?"active":"inactive","data-orientation":it.orientation,role:"tabpanel","aria-labelledby":st,hidden:!ht,id:at,tabIndex:0,...nt,ref:$,style:{..._.style,animationDuration:dt.current?"0s":void 0},children:ht&&rt})})});TabsContent$1.displayName=CONTENT_NAME;function makeTriggerId(_,$){return`${_}-trigger-${$}`}function makeContentId(_,$){return`${_}-content-${$}`}var Root2=Tabs$1,List=TabsList$1,Trigger=TabsTrigger$1,Content=TabsContent$1;const Tabs=Root2,TabsList=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx(List,{ref:_e,className:cn("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",_),...$}));TabsList.displayName=List.displayName;const TabsTrigger=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx(Trigger,{ref:_e,className:cn("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",_),...$}));TabsTrigger.displayName=Trigger.displayName;const TabsContent=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx(Content,{ref:_e,className:cn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",_),...$}));TabsContent.displayName=Content.displayName;const History=()=>{const{trades:_,positions:$,syncTradesFromBinance:_e,fetchPositions:et,createOrder:tt,error:rt,isLoading:nt,getBanStatus:it}=useTrades(),{toast:st}=useToast(),[at,ot]=reactExports.useState(""),[dt,ht]=reactExports.useState("entryTime"),[yt,vt]=reactExports.useState("desc"),[xt,wt]=reactExports.useState("positions"),[Et,At]=reactExports.useState(!1),[jt,kt]=reactExports.useState(null),[Lt,Bt]=reactExports.useState(!1);reactExports.useEffect(()=>{const mt=()=>{const bt=it();Bt(bt.isBanned)};mt();const gt=setInterval(mt,3e4);return()=>clearInterval(gt)},[it]),reactExports.useEffect(()=>{if(xt==="positions"){const mt=setInterval(()=>{!nt&&!Lt&&et()},3e4);return()=>clearInterval(mt)}},[xt,et,nt,Lt]);const Gt=mt=>{mt===dt?vt(yt==="asc"?"desc":"asc"):(ht(mt),vt("desc"))},er=reactExports.useCallback(async()=>{At(!0);try{xt==="positions"?await et():await _e(),st({title:"Data refreshed",description:xt==="positions"?"Open positions updated":"Trade history updated"})}catch{st({title:"Refresh failed",description:"Could not refresh data. Please try again later.",variant:"destructive"})}finally{At(!1)}},[xt,et,_e,st]),tr=async()=>{if(jt)try{const{position:mt,closeType:gt,price:bt}=jt,St=mt.side==="LONG"?"SELL":"BUY";await tt(mt.symbol,St,gt,mt.size,gt==="LIMIT"?bt:void 0,mt.leverage),st({title:"Position closing initiated",description:`${mt.side} position on ${mt.symbol} is being closed`}),setTimeout(()=>et(),1e3),kt(null)}catch(mt){const gt=mt instanceof Error?mt.message:"Unknown error";st({title:"Failed to close position",description:gt,variant:"destructive"})}},ar=_.filter(mt=>at===""||mt.symbol.toLowerCase().includes(at.toLowerCase())).sort((mt,gt)=>{const bt=mt[dt],St=gt[dt];return bt===void 0?1:St===void 0?-1:bt<St?yt==="asc"?-1:1:bt>St?yt==="asc"?1:-1:0}),Mt=$.filter(mt=>at===""||mt.symbol.toLowerCase().includes(at.toLowerCase())).sort((mt,gt)=>mt.unrealizedPnL>gt.unrealizedPnL?yt==="asc"?1:-1:mt.unrealizedPnL<gt.unrealizedPnL?yt==="asc"?-1:1:0),lt=()=>{const gt=[["Symbol","Type","Entry Price","Exit Price","Quantity","Entry Time","Exit Time","Profit/Loss","P/L %"].join(","),...ar.map(Pt=>[Pt.symbol,Pt.side,Pt.entryPrice,Pt.exitPrice||"",Pt.quantity,Pt.entryTime,Pt.exitTime||"",Pt.profit||"",Pt.profitPercentage||""].join(","))].join(`
`),bt=new Blob([gt],{type:"text/csv;charset=utf-8;"}),St=URL.createObjectURL(bt),Nt=document.createElement("a");Nt.setAttribute("href",St),Nt.setAttribute("download",`trading-history-${new Date().toISOString().split("T")[0]}.csv`),Nt.click(),st({title:"Export Complete",description:"Your trading history has been exported as CSV"})};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(PageHeader,{title:"Positions & History",subtitle:"View and manage your open positions and trading history",actions:jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:er,variant:"outline",disabled:Et||nt,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(RefreshCw,{size:16,className:Et?"animate-spin":""}),jsxRuntimeExports.jsx("span",{children:"Refresh"})]}),jsxRuntimeExports.jsxs(Button,{onClick:lt,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{size:16}),jsxRuntimeExports.jsx("span",{children:"Export CSV"})]})]})}),Lt&&jsxRuntimeExports.jsxs(Alert,{variant:"destructive",className:"mb-4",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"h-4 w-4"}),jsxRuntimeExports.jsx(AlertTitle,{children:"IP Temporarily Banned"}),jsxRuntimeExports.jsx(AlertDescription,{children:"Your IP is currently banned by Binance API. Position management is limited. You can view cached data, but closing positions may not work until the ban expires."})]}),rt&&jsxRuntimeExports.jsxs(Alert,{variant:"destructive",className:"mb-4",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"h-4 w-4"}),jsxRuntimeExports.jsx(AlertTitle,{children:"Error"}),jsxRuntimeExports.jsx(AlertDescription,{children:rt})]}),jsxRuntimeExports.jsxs(Tabs,{defaultValue:"positions",value:xt,onValueChange:wt,children:[jsxRuntimeExports.jsxs(TabsList,{className:"mb-4",children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"positions",children:"Open Positions"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"history",children:"Trade History"})]}),jsxRuntimeExports.jsx(TabsContent,{value:"positions",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-3",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[jsxRuntimeExports.jsx(CardTitle,{children:"Open Positions"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap items-center gap-2",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Input$1,{placeholder:"Search symbol...",value:at,onChange:mt=>ot(mt.target.value),className:"w-[180px] pl-8"}),jsxRuntimeExports.jsx(Filter,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"})]})})]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("div",{className:"rounded-md border overflow-hidden",children:jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(TableHeader,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableHead,{children:"Symbol"}),jsxRuntimeExports.jsx(TableHead,{children:"Side"}),jsxRuntimeExports.jsx(TableHead,{className:"text-right",children:"Size"}),jsxRuntimeExports.jsx(TableHead,{className:"text-right",children:"Entry Price"}),jsxRuntimeExports.jsx(TableHead,{className:"text-right",children:"Mark Price"}),jsxRuntimeExports.jsx(TableHead,{className:"text-right",children:"Leverage"}),jsxRuntimeExports.jsx(TableHead,{className:"text-right",children:"Unrealized PnL"}),jsxRuntimeExports.jsx(TableHead,{className:"text-right",children:"Actions"})]})}),jsxRuntimeExports.jsx(TableBody,{children:nt?jsxRuntimeExports.jsx(TableRow,{children:jsxRuntimeExports.jsx(TableCell,{colSpan:8,className:"text-center h-24",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-2",children:[jsxRuntimeExports.jsx(RefreshCw,{size:16,className:"animate-spin"}),jsxRuntimeExports.jsx("span",{children:"Loading positions..."})]})})}):Mt.length===0?jsxRuntimeExports.jsx(TableRow,{children:jsxRuntimeExports.jsx(TableCell,{colSpan:8,className:"text-center h-24",children:"No open positions found"})}):Mt.map(mt=>{const gt=formatProfitLoss(mt.unrealizedPnL),bt=mt.entryPrice>0?mt.unrealizedPnL/(mt.size*mt.entryPrice)*100:0,St=formatProfitLossPercentage(bt);return jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{className:"font-medium",children:mt.symbol}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Badge,{variant:mt.side==="LONG"?"default":"destructive",children:mt.side})}),jsxRuntimeExports.jsx(TableCell,{className:"text-right",children:mt.size.toFixed(4)}),jsxRuntimeExports.jsx(TableCell,{className:"text-right",children:formatCurrency(mt.entryPrice)}),jsxRuntimeExports.jsx(TableCell,{className:"text-right",children:formatCurrency(mt.markPrice)}),jsxRuntimeExports.jsxs(TableCell,{className:"text-right",children:[mt.leverage,"x"]}),jsxRuntimeExports.jsxs(TableCell,{className:"text-right",children:[jsxRuntimeExports.jsx("div",{className:gt.className,children:gt.value}),jsxRuntimeExports.jsx("div",{className:`text-xs ${St.className}`,children:St.value})]}),jsxRuntimeExports.jsx(TableCell,{className:"text-right",children:jsxRuntimeExports.jsxs(Dialog,{children:[jsxRuntimeExports.jsx(DialogTrigger,{asChild:!0,children:jsxRuntimeExports.jsxs(Button,{variant:"destructive",size:"sm",disabled:Lt,children:[jsxRuntimeExports.jsx(CircleX,{className:"h-4 w-4 mr-1"})," Close"]})}),jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsxs(DialogHeader,{children:[jsxRuntimeExports.jsx(DialogTitle,{children:"Close Position"}),jsxRuntimeExports.jsxs(DialogDescription,{children:["Are you sure you want to close your ",mt.side.toLowerCase()," position on ",mt.symbol,"?"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4 py-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid gap-2",children:[jsxRuntimeExports.jsx(Label$2,{children:"Position Details"}),jsxRuntimeExports.jsxs("div",{className:"rounded-md bg-secondary p-3 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{children:"Symbol:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:mt.symbol})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mt-1",children:[jsxRuntimeExports.jsx("span",{children:"Side:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:mt.side})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mt-1",children:[jsxRuntimeExports.jsx("span",{children:"Size:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:mt.size.toFixed(4)})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mt-1",children:[jsxRuntimeExports.jsx("span",{children:"Entry Price:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:formatCurrency(mt.entryPrice)})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mt-1",children:[jsxRuntimeExports.jsx("span",{children:"Current P/L:"}),jsxRuntimeExports.jsx("span",{className:`font-medium ${gt.className}`,children:gt.value})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-2",children:[jsxRuntimeExports.jsx(Label$2,{children:"Close Type"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:!jt||jt.closeType==="MARKET"?"default":"outline",onClick:()=>kt({position:mt,closeType:"MARKET"}),className:"flex-1",children:"Market"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:(jt==null?void 0:jt.closeType)==="LIMIT"?"default":"outline",onClick:()=>kt({position:mt,closeType:"LIMIT",price:mt.markPrice}),className:"flex-1",children:"Limit"})]})]}),(jt==null?void 0:jt.closeType)==="LIMIT"&&jsxRuntimeExports.jsxs("div",{className:"grid gap-2",children:[jsxRuntimeExports.jsx(Label$2,{children:"Limit Price"}),jsxRuntimeExports.jsx(Input$1,{type:"number",value:jt.price,onChange:Nt=>kt({...jt,price:parseFloat(Nt.target.value)}),step:"0.00000001"})]})]}),jsxRuntimeExports.jsxs(DialogFooter,{children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",onClick:()=>kt(null),children:"Cancel"}),jsxRuntimeExports.jsx(Button,{variant:"destructive",onClick:tr,disabled:!jt||jt.closeType==="LIMIT"&&!jt.price,children:(jt==null?void 0:jt.closeType)==="MARKET"?"Close at Market":"Place Limit Order"})]})]})]})})]},`${mt.symbol}-${mt.side}`)})})]})})})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"history",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-3",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[jsxRuntimeExports.jsx(CardTitle,{children:"Trade History"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap items-center gap-2",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Input$1,{placeholder:"Search symbol...",value:at,onChange:mt=>ot(mt.target.value),className:"w-[180px] pl-8"}),jsxRuntimeExports.jsx(Filter,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"})]})})]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("div",{className:"rounded-md border overflow-hidden",children:jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(TableHeader,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsxs(TableHead,{onClick:()=>Gt("symbol"),className:"cursor-pointer",children:["Symbol ",dt==="symbol"&&(yt==="asc"?"↑":"↓")]}),jsxRuntimeExports.jsxs(TableHead,{onClick:()=>Gt("side"),className:"cursor-pointer",children:["Type ",dt==="side"&&(yt==="asc"?"↑":"↓")]}),jsxRuntimeExports.jsxs(TableHead,{onClick:()=>Gt("status"),className:"cursor-pointer",children:["Status ",dt==="status"&&(yt==="asc"?"↑":"↓")]}),jsxRuntimeExports.jsxs(TableHead,{onClick:()=>Gt("entryPrice"),className:"text-right cursor-pointer",children:["Entry Price ",dt==="entryPrice"&&(yt==="asc"?"↑":"↓")]}),jsxRuntimeExports.jsxs(TableHead,{onClick:()=>Gt("quantity"),className:"text-right cursor-pointer",children:["Quantity ",dt==="quantity"&&(yt==="asc"?"↑":"↓")]}),jsxRuntimeExports.jsxs(TableHead,{onClick:()=>Gt("entryTime"),className:"cursor-pointer",children:["Time ",dt==="entryTime"&&(yt==="asc"?"↑":"↓")]}),jsxRuntimeExports.jsxs(TableHead,{onClick:()=>Gt("profit"),className:"text-right cursor-pointer",children:["P/L ",dt==="profit"&&(yt==="asc"?"↑":"↓")]})]})}),jsxRuntimeExports.jsx(TableBody,{children:nt?jsxRuntimeExports.jsx(TableRow,{children:jsxRuntimeExports.jsx(TableCell,{colSpan:7,className:"text-center h-24",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-2",children:[jsxRuntimeExports.jsx(RefreshCw,{size:16,className:"animate-spin"}),jsxRuntimeExports.jsx("span",{children:"Loading trades..."})]})})}):ar.length===0?jsxRuntimeExports.jsx(TableRow,{children:jsxRuntimeExports.jsx(TableCell,{colSpan:7,className:"text-center h-24",children:"No trades found"})}):ar.map(mt=>{const gt=formatProfitLoss(mt.profit),bt=formatProfitLossPercentage(mt.profitPercentage);return jsxRuntimeExports.jsxs(TableRow,{className:"hover:bg-muted/50",children:[jsxRuntimeExports.jsx(TableCell,{className:"font-medium",children:mt.symbol}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx(Badge,{variant:mt.side==="BUY"?"default":"destructive",children:mt.side})}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsxs(Badge,{variant:mt.status==="FILLED"?"outline":mt.status==="NEW"||mt.status==="PARTIALLY_FILLED"?"secondary":"destructive",children:[mt.status==="NEW"&&jsxRuntimeExports.jsx(Clock,{className:"h-3 w-3 mr-1 inline"}),mt.status]})}),jsxRuntimeExports.jsx(TableCell,{className:"text-right",children:formatCurrency(mt.entryPrice)}),jsxRuntimeExports.jsx(TableCell,{className:"text-right",children:mt.quantity.toFixed(4)}),jsxRuntimeExports.jsx(TableCell,{children:formatDateTime(mt.entryTime)}),jsxRuntimeExports.jsx(TableCell,{className:"text-right",children:mt.profit!==void 0&&mt.profit!==null?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:gt.className,children:gt.value}),jsxRuntimeExports.jsx("div",{className:`text-xs ${bt.className}`,children:bt.value})]}):jsxRuntimeExports.jsx("span",{className:"text-muted-foreground",children:"—"})})]},mt.id)})})]})})})]})})]})]})};var SWITCH_NAME="Switch",[createSwitchContext,createSwitchScope]=createContextScope$3(SWITCH_NAME),[SwitchProvider,useSwitchContext]=createSwitchContext(SWITCH_NAME),Switch$1=reactExports.forwardRef((_,$)=>{const{__scopeSwitch:_e,name:et,checked:tt,defaultChecked:rt,required:nt,disabled:it,value:st="on",onCheckedChange:at,form:ot,...dt}=_,[ht,yt]=reactExports.useState(null),vt=useComposedRefs($,jt=>yt(jt)),xt=reactExports.useRef(!1),wt=ht?ot||!!ht.closest("form"):!0,[Et=!1,At]=useControllableState({prop:tt,defaultProp:rt,onChange:at});return jsxRuntimeExports.jsxs(SwitchProvider,{scope:_e,checked:Et,disabled:it,children:[jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"switch","aria-checked":Et,"aria-required":nt,"data-state":getState(Et),"data-disabled":it?"":void 0,disabled:it,value:st,...dt,ref:vt,onClick:composeEventHandlers(_.onClick,jt=>{At(kt=>!kt),wt&&(xt.current=jt.isPropagationStopped(),xt.current||jt.stopPropagation())})}),wt&&jsxRuntimeExports.jsx(BubbleInput$1,{control:ht,bubbles:!xt.current,name:et,value:st,checked:Et,required:nt,disabled:it,form:ot,style:{transform:"translateX(-100%)"}})]})});Switch$1.displayName=SWITCH_NAME;var THUMB_NAME$1="SwitchThumb",SwitchThumb=reactExports.forwardRef((_,$)=>{const{__scopeSwitch:_e,...et}=_,tt=useSwitchContext(THUMB_NAME$1,_e);return jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState(tt.checked),"data-disabled":tt.disabled?"":void 0,...et,ref:$})});SwitchThumb.displayName=THUMB_NAME$1;var BubbleInput$1=_=>{const{control:$,checked:_e,bubbles:et=!0,...tt}=_,rt=reactExports.useRef(null),nt=usePrevious(_e),it=useSize($);return reactExports.useEffect(()=>{const st=rt.current,at=window.HTMLInputElement.prototype,dt=Object.getOwnPropertyDescriptor(at,"checked").set;if(nt!==_e&&dt){const ht=new Event("click",{bubbles:et});dt.call(st,_e),st.dispatchEvent(ht)}},[nt,_e,et]),jsxRuntimeExports.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:_e,...tt,tabIndex:-1,ref:rt,style:{..._.style,...it,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function getState(_){return _?"checked":"unchecked"}var Root$1=Switch$1,Thumb$1=SwitchThumb;const Switch=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx(Root$1,{className:cn("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",_),...$,ref:_e,children:jsxRuntimeExports.jsx(Thumb$1,{className:cn("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Switch.displayName=Root$1.displayName;const randomNumber=(_,$)=>Math.random()*($-_)+_,randomDate=(_,$)=>new Date(_.getTime()+Math.random()*($.getTime()-_.getTime())),formatDate=_=>_.toISOString(),cryptoSymbols=["BTC/USDT","ETH/USDT","BNB/USDT","SOL/USDT","ADA/USDT","XRP/USDT","DOT/USDT","AVAX/USDT","MATIC/USDT","LINK/USDT"],generateMockStrategies=_=>{const $=[],_e=new Date,et=new Date(_e.getTime()-180*24*60*60*1e3),tt=["RSI","MACD","SMA","EMA","BB","STOCH"],rt=["GREATER_THAN","LESS_THAN","EQUAL_TO","CROSSES_ABOVE","CROSSES_BELOW"];for(let nt=0;nt<_;nt++){const it=formatDate(randomDate(et,_e)),st=formatDate(randomDate(new Date(it),_e)),at=cryptoSymbols[Math.floor(Math.random()*cryptoSymbols.length)],ot=Math.floor(randomNumber(1,4)),dt=[];for(let yt=0;yt<ot;yt++){const vt=tt[Math.floor(Math.random()*tt.length)];let xt={};switch(vt){case"RSI":xt={period:Math.floor(randomNumber(7,21))};break;case"MACD":xt={fastPeriod:Math.floor(randomNumber(8,15)),slowPeriod:Math.floor(randomNumber(20,30)),signalPeriod:Math.floor(randomNumber(5,10))};break;case"SMA":case"EMA":xt={period:Math.floor(randomNumber(10,200))};break;case"BB":xt={period:Math.floor(randomNumber(10,30)),stdDev:randomNumber(1.5,3)};break;case"STOCH":xt={kPeriod:Math.floor(randomNumber(5,15)),dPeriod:Math.floor(randomNumber(3,7)),slowing:Math.floor(randomNumber(1,5))};break}dt.push({id:`indicator-${nt}-${yt}`,type:vt,parameters:xt,color:`#${Math.floor(Math.random()*16777215).toString(16)}`})}const ht=[];for(let yt=0;yt<Math.floor(randomNumber(1,dt.length+1));yt++){const vt=dt[yt%dt.length];ht.push({id:`condition-${nt}-${yt}`,indicatorId:vt.id,operator:rt[Math.floor(Math.random()*rt.length)],value:vt.type==="RSI"?randomNumber(20,80):randomNumber(0,100),action:Math.random()>.5?"BUY":"SELL"})}$.push({id:`strategy-${nt}`,name:`Strategy ${nt+1}`,description:`This is a sample ${dt.map(yt=>yt.type).join("/")} strategy`,indicators:dt,conditions:ht,symbol:at,active:Math.random()>.3,performance:{winRate:randomNumber(30,70),totalTrades:Math.floor(randomNumber(10,100)),profit:randomNumber(-500,2e3),profitPercentage:randomNumber(-10,40)},createdAt:it,updatedAt:st})}return $},getBasePrice=_=>_.includes("BTC")?randomNumber(6e4,7e4):_.includes("ETH")?randomNumber(3e3,4e3):_.includes("BNB")?randomNumber(500,600):_.includes("SOL")?randomNumber(100,150):_.includes("ADA")||_.includes("XRP")?randomNumber(.5,1):_.includes("DOT")?randomNumber(10,20):_.includes("AVAX")?randomNumber(30,40):_.includes("MATIC")?randomNumber(1,2):_.includes("LINK")?randomNumber(15,20):randomNumber(10,100),generateMockKlines=(_,$,_e)=>{const et=[],tt=getBasePrice(_);let rt=tt;const nt=Math.floor(Date.now()/1e3);let it;switch($){case"1m":it=60;break;case"5m":it=300;break;case"15m":it=900;break;case"30m":it=1800;break;case"1h":it=3600;break;case"4h":it=14400;break;case"1d":it=86400;break;default:it=3600}for(let st=0;st<_e;st++){const at=nt-(_e-st)*it,ot=randomNumber(-2,2),dt=rt*(1+ot/100),ht=rt,yt=Math.max(ht,dt)*(1+randomNumber(.1,.5)/100),vt=Math.min(ht,dt)*(1-randomNumber(.1,.5)/100),xt=randomNumber(tt*1e3,tt*5e3);et.push({time:at,open:ht,high:yt,low:vt,close:dt,volume:xt}),rt=dt}return et},useStrategies=()=>{const[_,$]=useLocalStorage("crypto-strategies",generateMockStrategies(5)),[_e,et]=reactExports.useState(!1),[tt,rt]=reactExports.useState(null),nt=reactExports.useCallback(async()=>{try{return et(!0),rt(null),et(!1),_}catch{return rt("Failed to fetch strategies"),et(!1),[]}},[_]),it=reactExports.useCallback(ot=>{const dt=new Date().toISOString(),ht={...ot,id:`strategy-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:dt,updatedAt:dt};return $(yt=>[...yt,ht]),ht},[$]),st=reactExports.useCallback((ot,dt)=>{$(ht=>ht.map(yt=>yt.id===ot?{...yt,...dt,updatedAt:new Date().toISOString()}:yt))},[$]),at=reactExports.useCallback(ot=>{$(dt=>dt.filter(ht=>ht.id!==ot))},[$]);return{strategies:_,isLoading:_e,error:tt,fetchStrategies:nt,addStrategy:it,updateStrategy:st,deleteStrategy:at}};var isArray$f=Array.isArray,isArray_1=isArray$f,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$9=freeGlobal||freeSelf||Function("return this")(),_root=root$9,root$8=_root,Symbol$7=root$8.Symbol,_Symbol=Symbol$7,Symbol$6=_Symbol,objectProto$c=Object.prototype,hasOwnProperty$a=objectProto$c.hasOwnProperty,nativeObjectToString$1=objectProto$c.toString,symToStringTag$1=Symbol$6?Symbol$6.toStringTag:void 0;function getRawTag$1(_){var $=hasOwnProperty$a.call(_,symToStringTag$1),_e=_[symToStringTag$1];try{_[symToStringTag$1]=void 0;var et=!0}catch{}var tt=nativeObjectToString$1.call(_);return et&&($?_[symToStringTag$1]=_e:delete _[symToStringTag$1]),tt}var _getRawTag=getRawTag$1,objectProto$b=Object.prototype,nativeObjectToString=objectProto$b.toString;function objectToString$1(_){return nativeObjectToString.call(_)}var _objectToString=objectToString$1,Symbol$5=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$5?Symbol$5.toStringTag:void 0;function baseGetTag$9(_){return _==null?_===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(_)?getRawTag(_):objectToString(_)}var _baseGetTag=baseGetTag$9;function isObjectLike$9(_){return _!=null&&typeof _=="object"}var isObjectLike_1=isObjectLike$9,baseGetTag$8=_baseGetTag,isObjectLike$8=isObjectLike_1,symbolTag$1="[object Symbol]";function isSymbol$6(_){return typeof _=="symbol"||isObjectLike$8(_)&&baseGetTag$8(_)==symbolTag$1}var isSymbol_1=isSymbol$6,isArray$e=isArray_1,isSymbol$5=isSymbol_1,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey$3(_,$){if(isArray$e(_))return!1;var _e=typeof _;return _e=="number"||_e=="symbol"||_e=="boolean"||_==null||isSymbol$5(_)?!0:reIsPlainProp.test(_)||!reIsDeepProp.test(_)||$!=null&&_ in Object($)}var _isKey=isKey$3;function isObject$7(_){var $=typeof _;return _!=null&&($=="object"||$=="function")}var isObject_1=isObject$7;const isObject$8=getDefaultExportFromCjs$1(isObject_1);var baseGetTag$7=_baseGetTag,isObject$6=isObject_1,asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$2(_){if(!isObject$6(_))return!1;var $=baseGetTag$7(_);return $==funcTag$1||$==genTag||$==asyncTag||$==proxyTag}var isFunction_1=isFunction$2;const isFunction$3=getDefaultExportFromCjs$1(isFunction_1);var root$7=_root,coreJsData$1=root$7["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var _=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}();function isMasked$1(_){return!!maskSrcKey&&maskSrcKey in _}var _isMasked=isMasked$1,funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource$2(_){if(_!=null){try{return funcToString$2.call(_)}catch{}try{return _+""}catch{}}return""}var _toSource=toSource$2,isFunction$1=isFunction_1,isMasked=_isMasked,isObject$5=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$a=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$9=objectProto$a.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$9).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(_){if(!isObject$5(_)||isMasked(_))return!1;var $=isFunction$1(_)?reIsNative:reIsHostCtor;return $.test(toSource$1(_))}var _baseIsNative=baseIsNative$1;function getValue$1(_,$){return _==null?void 0:_[$]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$7(_,$){var _e=getValue(_,$);return baseIsNative(_e)?_e:void 0}var _getNative=getNative$7,getNative$6=_getNative,nativeCreate$4=getNative$6(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(_){var $=this.has(_)&&delete this.__data__[_];return this.size-=$?1:0,$}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function hashGet$1(_){var $=this.__data__;if(nativeCreate$2){var _e=$[_];return _e===HASH_UNDEFINED$2?void 0:_e}return hasOwnProperty$8.call($,_)?$[_]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function hashHas$1(_){var $=this.__data__;return nativeCreate$1?$[_]!==void 0:hasOwnProperty$7.call($,_)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(_,$){var _e=this.__data__;return this.size+=this.has(_)?0:1,_e[_]=nativeCreate&&$===void 0?HASH_UNDEFINED$1:$,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(_){var $=-1,_e=_==null?0:_.length;for(this.clear();++$<_e;){var et=_[$];this.set(et[0],et[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1;function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$3(_,$){return _===$||_!==_&&$!==$}var eq_1=eq$3,eq$2=eq_1;function assocIndexOf$4(_,$){for(var _e=_.length;_e--;)if(eq$2(_[_e][0],$))return _e;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(_){var $=this.__data__,_e=assocIndexOf$3($,_);if(_e<0)return!1;var et=$.length-1;return _e==et?$.pop():splice.call($,_e,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(_){var $=this.__data__,_e=assocIndexOf$2($,_);return _e<0?void 0:$[_e][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(_){return assocIndexOf$1(this.__data__,_)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(_,$){var _e=this.__data__,et=assocIndexOf(_e,_);return et<0?(++this.size,_e.push([_,$])):_e[et][1]=$,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(_){var $=-1,_e=_==null?0:_.length;for(this.clear();++$<_e;){var et=_[$];this.set(et[0],et[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,getNative$5=_getNative,root$6=_root,Map$4=getNative$5(root$6,"Map"),_Map=Map$4,Hash=_Hash,ListCache$3=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$3),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(_){var $=typeof _;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?_!=="__proto__":_===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(_,$){var _e=_.__data__;return isKeyable($)?_e[typeof $=="string"?"string":"hash"]:_e.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(_){var $=getMapData$3(this,_).delete(_);return this.size-=$?1:0,$}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(_){return getMapData$2(this,_).get(_)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(_){return getMapData$1(this,_).has(_)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(_,$){var _e=getMapData(this,_),et=_e.size;return _e.set(_,$),this.size+=_e.size==et?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$3(_){var $=-1,_e=_==null?0:_.length;for(this.clear();++$<_e;){var et=_[$];this.set(et[0],et[1])}}MapCache$3.prototype.clear=mapCacheClear;MapCache$3.prototype.delete=mapCacheDelete;MapCache$3.prototype.get=mapCacheGet;MapCache$3.prototype.has=mapCacheHas;MapCache$3.prototype.set=mapCacheSet;var _MapCache=MapCache$3,MapCache$2=_MapCache,FUNC_ERROR_TEXT$2="Expected a function";function memoize$2(_,$){if(typeof _!="function"||$!=null&&typeof $!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var _e=function(){var et=arguments,tt=$?$.apply(this,et):et[0],rt=_e.cache;if(rt.has(tt))return rt.get(tt);var nt=_.apply(this,et);return _e.cache=rt.set(tt,nt)||rt,nt};return _e.cache=new(memoize$2.Cache||MapCache$2),_e}memoize$2.Cache=MapCache$2;var memoize_1=memoize$2;const memoize$3=getDefaultExportFromCjs$1(memoize_1);var memoize$1=memoize_1,MAX_MEMOIZE_SIZE=500;function memoizeCapped$1(_){var $=memoize$1(_,function(et){return _e.size===MAX_MEMOIZE_SIZE&&_e.clear(),et}),_e=$.cache;return $}var _memoizeCapped=memoizeCapped$1,memoizeCapped=_memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath$1=memoizeCapped(function(_){var $=[];return _.charCodeAt(0)===46&&$.push(""),_.replace(rePropName,function(_e,et,tt,rt){$.push(tt?rt.replace(reEscapeChar,"$1"):et||_e)}),$}),_stringToPath=stringToPath$1;function arrayMap$3(_,$){for(var _e=-1,et=_==null?0:_.length,tt=Array(et);++_e<et;)tt[_e]=$(_[_e],_e,_);return tt}var _arrayMap=arrayMap$3,Symbol$4=_Symbol,arrayMap$2=_arrayMap,isArray$d=isArray_1,isSymbol$4=isSymbol_1,INFINITY$3=1/0,symbolProto$1=Symbol$4?Symbol$4.prototype:void 0,symbolToString=symbolProto$1?symbolProto$1.toString:void 0;function baseToString$1(_){if(typeof _=="string")return _;if(isArray$d(_))return arrayMap$2(_,baseToString$1)+"";if(isSymbol$4(_))return symbolToString?symbolToString.call(_):"";var $=_+"";return $=="0"&&1/_==-INFINITY$3?"-0":$}var _baseToString=baseToString$1,baseToString=_baseToString;function toString$3(_){return _==null?"":baseToString(_)}var toString_1=toString$3,isArray$c=isArray_1,isKey$2=_isKey,stringToPath=_stringToPath,toString$2=toString_1;function castPath$2(_,$){return isArray$c(_)?_:isKey$2(_,$)?[_]:stringToPath(toString$2(_))}var _castPath=castPath$2,isSymbol$3=isSymbol_1,INFINITY$2=1/0;function toKey$4(_){if(typeof _=="string"||isSymbol$3(_))return _;var $=_+"";return $=="0"&&1/_==-INFINITY$2?"-0":$}var _toKey=toKey$4,castPath$1=_castPath,toKey$3=_toKey;function baseGet$3(_,$){$=castPath$1($,_);for(var _e=0,et=$.length;_!=null&&_e<et;)_=_[toKey$3($[_e++])];return _e&&_e==et?_:void 0}var _baseGet=baseGet$3,baseGet$2=_baseGet;function get$1(_,$,_e){var et=_==null?void 0:baseGet$2(_,$);return et===void 0?_e:et}var get_1=get$1;const get$2=getDefaultExportFromCjs$1(get_1);function isNil(_){return _==null}var isNil_1=isNil;const isNil$1=getDefaultExportFromCjs$1(isNil_1);var baseGetTag$6=_baseGetTag,isArray$b=isArray_1,isObjectLike$7=isObjectLike_1,stringTag$2="[object String]";function isString(_){return typeof _=="string"||!isArray$b(_)&&isObjectLike$7(_)&&baseGetTag$6(_)==stringTag$2}var isString_1=isString;const isString$1=getDefaultExportFromCjs$1(isString_1);var reactIs={exports:{}},reactIs_production_min={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=Symbol.for("react.element"),c$1=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),e=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),h=Symbol.for("react.context"),k$1=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),n=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),t=Symbol.for("react.offscreen"),u;u=Symbol.for("react.module.reference");function v(_){if(typeof _=="object"&&_!==null){var $=_.$$typeof;switch($){case b:switch(_=_.type,_){case d:case f:case e:case m:case n:return _;default:switch(_=_&&_.$$typeof,_){case k$1:case h:case l:case q:case p:case g:return _;default:return $}}case c$1:return $}}}reactIs_production_min.ContextConsumer=h;reactIs_production_min.ContextProvider=g;reactIs_production_min.Element=b;reactIs_production_min.ForwardRef=l;reactIs_production_min.Fragment=d;reactIs_production_min.Lazy=q;reactIs_production_min.Memo=p;reactIs_production_min.Portal=c$1;reactIs_production_min.Profiler=f;reactIs_production_min.StrictMode=e;reactIs_production_min.Suspense=m;reactIs_production_min.SuspenseList=n;reactIs_production_min.isAsyncMode=function(){return!1};reactIs_production_min.isConcurrentMode=function(){return!1};reactIs_production_min.isContextConsumer=function(_){return v(_)===h};reactIs_production_min.isContextProvider=function(_){return v(_)===g};reactIs_production_min.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===b};reactIs_production_min.isForwardRef=function(_){return v(_)===l};reactIs_production_min.isFragment=function(_){return v(_)===d};reactIs_production_min.isLazy=function(_){return v(_)===q};reactIs_production_min.isMemo=function(_){return v(_)===p};reactIs_production_min.isPortal=function(_){return v(_)===c$1};reactIs_production_min.isProfiler=function(_){return v(_)===f};reactIs_production_min.isStrictMode=function(_){return v(_)===e};reactIs_production_min.isSuspense=function(_){return v(_)===m};reactIs_production_min.isSuspenseList=function(_){return v(_)===n};reactIs_production_min.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===d||_===f||_===e||_===m||_===n||_===t||typeof _=="object"&&_!==null&&(_.$$typeof===q||_.$$typeof===p||_.$$typeof===g||_.$$typeof===h||_.$$typeof===l||_.$$typeof===u||_.getModuleId!==void 0)};reactIs_production_min.typeOf=v;reactIs.exports=reactIs_production_min;var reactIsExports=reactIs.exports,baseGetTag$5=_baseGetTag,isObjectLike$6=isObjectLike_1,numberTag$2="[object Number]";function isNumber$2(_){return typeof _=="number"||isObjectLike$6(_)&&baseGetTag$5(_)==numberTag$2}var isNumber_1=isNumber$2;const isNumber$3=getDefaultExportFromCjs$1(isNumber_1);var isNumber$1=isNumber_1;function isNaN$1(_){return isNumber$1(_)&&_!=+_}var _isNaN=isNaN$1;const isNan=getDefaultExportFromCjs$1(_isNaN);var mathSign=function _($){return $===0?0:$>0?1:-1},isPercent=function _($){return isString$1($)&&$.indexOf("%")===$.length-1},isNumber=function _($){return isNumber$3($)&&!isNan($)},isNumOrStr=function _($){return isNumber($)||isString$1($)},idCounter=0,uniqueId=function _($){var _e=++idCounter;return"".concat($||"").concat(_e)},getPercentValue=function _($,_e){var et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,tt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!isNumber($)&&!isString$1($))return et;var rt;if(isPercent($)){var nt=$.indexOf("%");rt=_e*parseFloat($.slice(0,nt))/100}else rt=+$;return isNan(rt)&&(rt=et),tt&&rt>_e&&(rt=_e),rt},getAnyElementOfObject=function _($){if(!$)return null;var _e=Object.keys($);return _e&&_e.length?$[_e[0]]:null},hasDuplicate=function _($){if(!Array.isArray($))return!1;for(var _e=$.length,et={},tt=0;tt<_e;tt++)if(!et[$[tt]])et[$[tt]]=!0;else return!0;return!1},interpolateNumber$2=function _($,_e){return isNumber($)&&isNumber(_e)?function(et){return $+et*(_e-$)}:function(){return _e}};function findEntryInArray(_,$,_e){return!_||!_.length?null:_.find(function(et){return et&&(typeof $=="function"?$(et):get$2(et,$))===_e})}function shallowEqual(_,$){for(var _e in _)if({}.hasOwnProperty.call(_,_e)&&(!{}.hasOwnProperty.call($,_e)||_[_e]!==$[_e]))return!1;for(var et in $)if({}.hasOwnProperty.call($,et)&&!{}.hasOwnProperty.call(_,et))return!1;return!0}function _typeof$I(_){"@babel/helpers - typeof";return _typeof$I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$I(_)}var SVGContainerPropKeys=["viewBox","children"],SVGElementPropKeys=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],PolyElementKeys=["points","pathLength"],FilteredElementKeyMap={svg:SVGContainerPropKeys,polygon:PolyElementKeys,polyline:PolyElementKeys},EventKeys=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],adaptEventHandlers=function _($,_e){if(!$||typeof $=="function"||typeof $=="boolean")return null;var et=$;if(reactExports.isValidElement($)&&(et=$.props),!isObject$8(et))return null;var tt={};return Object.keys(et).forEach(function(rt){EventKeys.includes(rt)&&(tt[rt]=_e||function(nt){return et[rt](et,nt)})}),tt},getEventHandlerOfChild=function _($,_e,et){return function(tt){return $(_e,et,tt),null}},adaptEventsOfChild=function _($,_e,et){if(!isObject$8($)||_typeof$I($)!=="object")return null;var tt=null;return Object.keys($).forEach(function(rt){var nt=$[rt];EventKeys.includes(rt)&&typeof nt=="function"&&(tt||(tt={}),tt[rt]=getEventHandlerOfChild(nt,_e,et))}),tt},_excluded$h=["children"],_excluded2$6=["children"];function _objectWithoutProperties$h(_,$){if(_==null)return{};var _e=_objectWithoutPropertiesLoose$h(_,$),et,tt;if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_);for(tt=0;tt<rt.length;tt++)et=rt[tt],!($.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call(_,et)&&(_e[et]=_[et])}return _e}function _objectWithoutPropertiesLoose$h(_,$){if(_==null)return{};var _e={};for(var et in _)if(Object.prototype.hasOwnProperty.call(_,et)){if($.indexOf(et)>=0)continue;_e[et]=_[et]}return _e}function _typeof$H(_){"@babel/helpers - typeof";return _typeof$H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$H(_)}var REACT_BROWSER_EVENT_MAP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},getDisplayName=function _($){return typeof $=="string"?$:$?$.displayName||$.name||"Component":""},lastChildren=null,lastResult=null,toArray=function _($){if($===lastChildren&&Array.isArray(lastResult))return lastResult;var _e=[];return reactExports.Children.forEach($,function(et){isNil$1(et)||(reactIsExports.isFragment(et)?_e=_e.concat(_(et.props.children)):_e.push(et))}),lastResult=_e,lastChildren=$,_e};function findAllByType(_,$){var _e=[],et=[];return Array.isArray($)?et=$.map(function(tt){return getDisplayName(tt)}):et=[getDisplayName($)],toArray(_).forEach(function(tt){var rt=get$2(tt,"type.displayName")||get$2(tt,"type.name");et.indexOf(rt)!==-1&&_e.push(tt)}),_e}function findChildByType(_,$){var _e=findAllByType(_,$);return _e&&_e[0]}var validateWidthHeight=function _($){if(!$||!$.props)return!1;var _e=$.props,et=_e.width,tt=_e.height;return!(!isNumber(et)||et<=0||!isNumber(tt)||tt<=0)},SVG_TAGS=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],isSvgElement=function _($){return $&&$.type&&isString$1($.type)&&SVG_TAGS.indexOf($.type)>=0},hasClipDot=function _($){return $&&_typeof$H($)==="object"&&"clipDot"in $},isValidSpreadableProp=function _($,_e,et,tt){var rt,nt=(rt=FilteredElementKeyMap==null?void 0:FilteredElementKeyMap[tt])!==null&&rt!==void 0?rt:[];return!isFunction$3($)&&(tt&&nt.includes(_e)||SVGElementPropKeys.includes(_e))||et&&EventKeys.includes(_e)},filterProps=function _($,_e,et){if(!$||typeof $=="function"||typeof $=="boolean")return null;var tt=$;if(reactExports.isValidElement($)&&(tt=$.props),!isObject$8(tt))return null;var rt={};return Object.keys(tt).forEach(function(nt){var it;isValidSpreadableProp((it=tt)===null||it===void 0?void 0:it[nt],nt,_e,et)&&(rt[nt]=tt[nt])}),rt},isChildrenEqual=function _($,_e){if($===_e)return!0;var et=reactExports.Children.count($);if(et!==reactExports.Children.count(_e))return!1;if(et===0)return!0;if(et===1)return isSingleChildEqual(Array.isArray($)?$[0]:$,Array.isArray(_e)?_e[0]:_e);for(var tt=0;tt<et;tt++){var rt=$[tt],nt=_e[tt];if(Array.isArray(rt)||Array.isArray(nt)){if(!_(rt,nt))return!1}else if(!isSingleChildEqual(rt,nt))return!1}return!0},isSingleChildEqual=function _($,_e){if(isNil$1($)&&isNil$1(_e))return!0;if(!isNil$1($)&&!isNil$1(_e)){var et=$.props||{},tt=et.children,rt=_objectWithoutProperties$h(et,_excluded$h),nt=_e.props||{},it=nt.children,st=_objectWithoutProperties$h(nt,_excluded2$6);return tt&&it?shallowEqual(rt,st)&&isChildrenEqual(tt,it):!tt&&!it?shallowEqual(rt,st):!1}return!1},renderByOrder=function _($,_e){var et=[],tt={};return toArray($).forEach(function(rt,nt){if(isSvgElement(rt))et.push(rt);else if(rt){var it=getDisplayName(rt.type),st=_e[it]||{},at=st.handler,ot=st.once;if(at&&(!ot||!tt[it])){var dt=at(rt,it,nt);et.push(dt),tt[it]=!0}}}),et},getReactEventByType=function _($){var _e=$&&$.type;return _e&&REACT_BROWSER_EVENT_MAP[_e]?REACT_BROWSER_EVENT_MAP[_e]:null},parseChildIndex=function _($,_e){return toArray(_e).indexOf($)},_excluded$g=["children","width","height","viewBox","className","style","title","desc"];function _extends$q(){return _extends$q=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$q.apply(this,arguments)}function _objectWithoutProperties$g(_,$){if(_==null)return{};var _e=_objectWithoutPropertiesLoose$g(_,$),et,tt;if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_);for(tt=0;tt<rt.length;tt++)et=rt[tt],!($.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call(_,et)&&(_e[et]=_[et])}return _e}function _objectWithoutPropertiesLoose$g(_,$){if(_==null)return{};var _e={};for(var et in _)if(Object.prototype.hasOwnProperty.call(_,et)){if($.indexOf(et)>=0)continue;_e[et]=_[et]}return _e}function Surface(_){var $=_.children,_e=_.width,et=_.height,tt=_.viewBox,rt=_.className,nt=_.style,it=_.title,st=_.desc,at=_objectWithoutProperties$g(_,_excluded$g),ot=tt||{width:_e,height:et,x:0,y:0},dt=clsx("recharts-surface",rt);return React.createElement("svg",_extends$q({},filterProps(at,!0,"svg"),{className:dt,width:_e,height:et,style:nt,viewBox:"".concat(ot.x," ").concat(ot.y," ").concat(ot.width," ").concat(ot.height)}),React.createElement("title",null,it),React.createElement("desc",null,st),$)}var _excluded$f=["children","className"];function _extends$p(){return _extends$p=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$p.apply(this,arguments)}function _objectWithoutProperties$f(_,$){if(_==null)return{};var _e=_objectWithoutPropertiesLoose$f(_,$),et,tt;if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_);for(tt=0;tt<rt.length;tt++)et=rt[tt],!($.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call(_,et)&&(_e[et]=_[et])}return _e}function _objectWithoutPropertiesLoose$f(_,$){if(_==null)return{};var _e={};for(var et in _)if(Object.prototype.hasOwnProperty.call(_,et)){if($.indexOf(et)>=0)continue;_e[et]=_[et]}return _e}var Layer=React.forwardRef(function(_,$){var _e=_.children,et=_.className,tt=_objectWithoutProperties$f(_,_excluded$f),rt=clsx("recharts-layer",et);return React.createElement("g",_extends$p({className:rt},filterProps(tt,!0),{ref:$}),_e)}),warn=function _($,_e){for(var et=arguments.length,tt=new Array(et>2?et-2:0),rt=2;rt<et;rt++)tt[rt-2]=arguments[rt]};function baseSlice$1(_,$,_e){var et=-1,tt=_.length;$<0&&($=-$>tt?0:tt+$),_e=_e>tt?tt:_e,_e<0&&(_e+=tt),tt=$>_e?0:_e-$>>>0,$>>>=0;for(var rt=Array(tt);++et<tt;)rt[et]=_[et+$];return rt}var _baseSlice=baseSlice$1,baseSlice=_baseSlice;function castSlice$1(_,$,_e){var et=_.length;return _e=_e===void 0?et:_e,!$&&_e>=et?_:baseSlice(_,$,_e)}var _castSlice=castSlice$1,rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsZWJ$1="\\u200d",reHasUnicode=RegExp("["+rsZWJ$1+rsAstralRange$1+rsComboRange$1+rsVarRange$1+"]");function hasUnicode$2(_){return reHasUnicode.test(_)}var _hasUnicode=hasUnicode$2;function asciiToArray$1(_){return _.split("")}var _asciiToArray=asciiToArray$1,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange+"]",rsCombo="["+rsComboRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeToArray$1(_){return _.match(reUnicode)||[]}var _unicodeToArray=unicodeToArray$1,asciiToArray=_asciiToArray,hasUnicode$1=_hasUnicode,unicodeToArray=_unicodeToArray;function stringToArray$1(_){return hasUnicode$1(_)?unicodeToArray(_):asciiToArray(_)}var _stringToArray=stringToArray$1,castSlice=_castSlice,hasUnicode=_hasUnicode,stringToArray=_stringToArray,toString$1=toString_1;function createCaseFirst$1(_){return function($){$=toString$1($);var _e=hasUnicode($)?stringToArray($):void 0,et=_e?_e[0]:$.charAt(0),tt=_e?castSlice(_e,1).join(""):$.slice(1);return et[_]()+tt}}var _createCaseFirst=createCaseFirst$1,createCaseFirst=_createCaseFirst,upperFirst=createCaseFirst("toUpperCase"),upperFirst_1=upperFirst;const upperFirst$1=getDefaultExportFromCjs$1(upperFirst_1);function constant$3(_){return function(){return _}}const cos=Math.cos,sin=Math.sin,sqrt$1=Math.sqrt,pi$1=Math.PI,tau$1=2*pi$1,pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function append(_){this._+=_[0];for(let $=1,_e=_.length;$<_e;++$)this._+=arguments[$]+_[$]}function appendRound(_){let $=Math.floor(_);if(!($>=0))throw new Error(`invalid digits: ${_}`);if($>15)return append;const _e=10**$;return function(et){this._+=et[0];for(let tt=1,rt=et.length;tt<rt;++tt)this._+=Math.round(arguments[tt]*_e)/_e+et[tt]}}class Path{constructor($){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=$==null?append:appendRound($)}moveTo($,_e){this._append`M${this._x0=this._x1=+$},${this._y0=this._y1=+_e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo($,_e){this._append`L${this._x1=+$},${this._y1=+_e}`}quadraticCurveTo($,_e,et,tt){this._append`Q${+$},${+_e},${this._x1=+et},${this._y1=+tt}`}bezierCurveTo($,_e,et,tt,rt,nt){this._append`C${+$},${+_e},${+et},${+tt},${this._x1=+rt},${this._y1=+nt}`}arcTo($,_e,et,tt,rt){if($=+$,_e=+_e,et=+et,tt=+tt,rt=+rt,rt<0)throw new Error(`negative radius: ${rt}`);let nt=this._x1,it=this._y1,st=et-$,at=tt-_e,ot=nt-$,dt=it-_e,ht=ot*ot+dt*dt;if(this._x1===null)this._append`M${this._x1=$},${this._y1=_e}`;else if(ht>epsilon)if(!(Math.abs(dt*st-at*ot)>epsilon)||!rt)this._append`L${this._x1=$},${this._y1=_e}`;else{let yt=et-nt,vt=tt-it,xt=st*st+at*at,wt=yt*yt+vt*vt,Et=Math.sqrt(xt),At=Math.sqrt(ht),jt=rt*Math.tan((pi-Math.acos((xt+ht-wt)/(2*Et*At)))/2),kt=jt/At,Lt=jt/Et;Math.abs(kt-1)>epsilon&&this._append`L${$+kt*ot},${_e+kt*dt}`,this._append`A${rt},${rt},0,0,${+(dt*yt>ot*vt)},${this._x1=$+Lt*st},${this._y1=_e+Lt*at}`}}arc($,_e,et,tt,rt,nt){if($=+$,_e=+_e,et=+et,nt=!!nt,et<0)throw new Error(`negative radius: ${et}`);let it=et*Math.cos(tt),st=et*Math.sin(tt),at=$+it,ot=_e+st,dt=1^nt,ht=nt?tt-rt:rt-tt;this._x1===null?this._append`M${at},${ot}`:(Math.abs(this._x1-at)>epsilon||Math.abs(this._y1-ot)>epsilon)&&this._append`L${at},${ot}`,et&&(ht<0&&(ht=ht%tau+tau),ht>tauEpsilon?this._append`A${et},${et},0,1,${dt},${$-it},${_e-st}A${et},${et},0,1,${dt},${this._x1=at},${this._y1=ot}`:ht>epsilon&&this._append`A${et},${et},0,${+(ht>=pi)},${dt},${this._x1=$+et*Math.cos(rt)},${this._y1=_e+et*Math.sin(rt)}`)}rect($,_e,et,tt){this._append`M${this._x0=this._x1=+$},${this._y0=this._y1=+_e}h${et=+et}v${+tt}h${-et}Z`}toString(){return this._}}function withPath(_){let $=3;return _.digits=function(_e){if(!arguments.length)return $;if(_e==null)$=null;else{const et=Math.floor(_e);if(!(et>=0))throw new RangeError(`invalid digits: ${_e}`);$=et}return _},()=>new Path($)}function array(_){return typeof _=="object"&&"length"in _?_:Array.from(_)}function Linear(_){this._context=_}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(_,$){switch(_=+_,$=+$,this._point){case 0:this._point=1,this._line?this._context.lineTo(_,$):this._context.moveTo(_,$);break;case 1:this._point=2;default:this._context.lineTo(_,$);break}}};function curveLinear(_){return new Linear(_)}function x(_){return _[0]}function y(_){return _[1]}function shapeLine(_,$){var _e=constant$3(!0),et=null,tt=curveLinear,rt=null,nt=withPath(it);_=typeof _=="function"?_:_===void 0?x:constant$3(_),$=typeof $=="function"?$:$===void 0?y:constant$3($);function it(st){var at,ot=(st=array(st)).length,dt,ht=!1,yt;for(et==null&&(rt=tt(yt=nt())),at=0;at<=ot;++at)!(at<ot&&_e(dt=st[at],at,st))===ht&&((ht=!ht)?rt.lineStart():rt.lineEnd()),ht&&rt.point(+_(dt,at,st),+$(dt,at,st));if(yt)return rt=null,yt+""||null}return it.x=function(st){return arguments.length?(_=typeof st=="function"?st:constant$3(+st),it):_},it.y=function(st){return arguments.length?($=typeof st=="function"?st:constant$3(+st),it):$},it.defined=function(st){return arguments.length?(_e=typeof st=="function"?st:constant$3(!!st),it):_e},it.curve=function(st){return arguments.length?(tt=st,et!=null&&(rt=tt(et)),it):tt},it.context=function(st){return arguments.length?(st==null?et=rt=null:rt=tt(et=st),it):et},it}function shapeArea(_,$,_e){var et=null,tt=constant$3(!0),rt=null,nt=curveLinear,it=null,st=withPath(at);_=typeof _=="function"?_:_===void 0?x:constant$3(+_),$=typeof $=="function"?$:constant$3($===void 0?0:+$),_e=typeof _e=="function"?_e:_e===void 0?y:constant$3(+_e);function at(dt){var ht,yt,vt,xt=(dt=array(dt)).length,wt,Et=!1,At,jt=new Array(xt),kt=new Array(xt);for(rt==null&&(it=nt(At=st())),ht=0;ht<=xt;++ht){if(!(ht<xt&&tt(wt=dt[ht],ht,dt))===Et)if(Et=!Et)yt=ht,it.areaStart(),it.lineStart();else{for(it.lineEnd(),it.lineStart(),vt=ht-1;vt>=yt;--vt)it.point(jt[vt],kt[vt]);it.lineEnd(),it.areaEnd()}Et&&(jt[ht]=+_(wt,ht,dt),kt[ht]=+$(wt,ht,dt),it.point(et?+et(wt,ht,dt):jt[ht],_e?+_e(wt,ht,dt):kt[ht]))}if(At)return it=null,At+""||null}function ot(){return shapeLine().defined(tt).curve(nt).context(rt)}return at.x=function(dt){return arguments.length?(_=typeof dt=="function"?dt:constant$3(+dt),et=null,at):_},at.x0=function(dt){return arguments.length?(_=typeof dt=="function"?dt:constant$3(+dt),at):_},at.x1=function(dt){return arguments.length?(et=dt==null?null:typeof dt=="function"?dt:constant$3(+dt),at):et},at.y=function(dt){return arguments.length?($=typeof dt=="function"?dt:constant$3(+dt),_e=null,at):$},at.y0=function(dt){return arguments.length?($=typeof dt=="function"?dt:constant$3(+dt),at):$},at.y1=function(dt){return arguments.length?(_e=dt==null?null:typeof dt=="function"?dt:constant$3(+dt),at):_e},at.lineX0=at.lineY0=function(){return ot().x(_).y($)},at.lineY1=function(){return ot().x(_).y(_e)},at.lineX1=function(){return ot().x(et).y($)},at.defined=function(dt){return arguments.length?(tt=typeof dt=="function"?dt:constant$3(!!dt),at):tt},at.curve=function(dt){return arguments.length?(nt=dt,rt!=null&&(it=nt(rt)),at):nt},at.context=function(dt){return arguments.length?(dt==null?rt=it=null:it=nt(rt=dt),at):rt},at}class Bump{constructor($,_e){this._context=$,this._x=_e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point($,_e){switch($=+$,_e=+_e,this._point){case 0:{this._point=1,this._line?this._context.lineTo($,_e):this._context.moveTo($,_e);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+$)/2,this._y0,this._x0,_e,$,_e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+_e)/2,$,this._y0,$,_e);break}}this._x0=$,this._y0=_e}}function bumpX(_){return new Bump(_,!0)}function bumpY(_){return new Bump(_,!1)}const symbolCircle={draw(_,$){const _e=sqrt$1($/pi$1);_.moveTo(_e,0),_.arc(0,0,_e,0,tau$1)}},symbolCross={draw(_,$){const _e=sqrt$1($/5)/2;_.moveTo(-3*_e,-_e),_.lineTo(-_e,-_e),_.lineTo(-_e,-3*_e),_.lineTo(_e,-3*_e),_.lineTo(_e,-_e),_.lineTo(3*_e,-_e),_.lineTo(3*_e,_e),_.lineTo(_e,_e),_.lineTo(_e,3*_e),_.lineTo(-_e,3*_e),_.lineTo(-_e,_e),_.lineTo(-3*_e,_e),_.closePath()}},tan30=sqrt$1(1/3),tan30_2=tan30*2,symbolDiamond={draw(_,$){const _e=sqrt$1($/tan30_2),et=_e*tan30;_.moveTo(0,-_e),_.lineTo(et,0),_.lineTo(0,_e),_.lineTo(-et,0),_.closePath()}},symbolSquare={draw(_,$){const _e=sqrt$1($),et=-_e/2;_.rect(et,et,_e,_e)}},ka=.8908130915292852,kr=sin(pi$1/10)/sin(7*pi$1/10),kx=sin(tau$1/10)*kr,ky=-cos(tau$1/10)*kr,symbolStar={draw(_,$){const _e=sqrt$1($*ka),et=kx*_e,tt=ky*_e;_.moveTo(0,-_e),_.lineTo(et,tt);for(let rt=1;rt<5;++rt){const nt=tau$1*rt/5,it=cos(nt),st=sin(nt);_.lineTo(st*_e,-it*_e),_.lineTo(it*et-st*tt,st*et+it*tt)}_.closePath()}},sqrt3=sqrt$1(3),symbolTriangle={draw(_,$){const _e=-sqrt$1($/(sqrt3*3));_.moveTo(0,_e*2),_.lineTo(-sqrt3*_e,-_e),_.lineTo(sqrt3*_e,-_e),_.closePath()}},c=-.5,s=sqrt$1(3)/2,k=1/sqrt$1(12),a=(k/2+1)*3,symbolWye={draw(_,$){const _e=sqrt$1($/a),et=_e/2,tt=_e*k,rt=et,nt=_e*k+_e,it=-rt,st=nt;_.moveTo(et,tt),_.lineTo(rt,nt),_.lineTo(it,st),_.lineTo(c*et-s*tt,s*et+c*tt),_.lineTo(c*rt-s*nt,s*rt+c*nt),_.lineTo(c*it-s*st,s*it+c*st),_.lineTo(c*et+s*tt,c*tt-s*et),_.lineTo(c*rt+s*nt,c*nt-s*rt),_.lineTo(c*it+s*st,c*st-s*it),_.closePath()}};function Symbol$3(_,$){let _e=null,et=withPath(tt);_=typeof _=="function"?_:constant$3(_||symbolCircle),$=typeof $=="function"?$:constant$3($===void 0?64:+$);function tt(){let rt;if(_e||(_e=rt=et()),_.apply(this,arguments).draw(_e,+$.apply(this,arguments)),rt)return _e=null,rt+""||null}return tt.type=function(rt){return arguments.length?(_=typeof rt=="function"?rt:constant$3(rt),tt):_},tt.size=function(rt){return arguments.length?($=typeof rt=="function"?rt:constant$3(+rt),tt):$},tt.context=function(rt){return arguments.length?(_e=rt??null,tt):_e},tt}function noop$2(){}function point$2(_,$,_e){_._context.bezierCurveTo((2*_._x0+_._x1)/3,(2*_._y0+_._y1)/3,(_._x0+2*_._x1)/3,(_._y0+2*_._y1)/3,(_._x0+4*_._x1+$)/6,(_._y0+4*_._y1+_e)/6)}function Basis(_){this._context=_}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(_,$){switch(_=+_,$=+$,this._point){case 0:this._point=1,this._line?this._context.lineTo(_,$):this._context.moveTo(_,$);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$2(this,_,$);break}this._x0=this._x1,this._x1=_,this._y0=this._y1,this._y1=$}};function curveBasis(_){return new Basis(_)}function BasisClosed(_){this._context=_}BasisClosed.prototype={areaStart:noop$2,areaEnd:noop$2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(_,$){switch(_=+_,$=+$,this._point){case 0:this._point=1,this._x2=_,this._y2=$;break;case 1:this._point=2,this._x3=_,this._y3=$;break;case 2:this._point=3,this._x4=_,this._y4=$,this._context.moveTo((this._x0+4*this._x1+_)/6,(this._y0+4*this._y1+$)/6);break;default:point$2(this,_,$);break}this._x0=this._x1,this._x1=_,this._y0=this._y1,this._y1=$}};function curveBasisClosed(_){return new BasisClosed(_)}function BasisOpen(_){this._context=_}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(_,$){switch(_=+_,$=+$,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var _e=(this._x0+4*this._x1+_)/6,et=(this._y0+4*this._y1+$)/6;this._line?this._context.lineTo(_e,et):this._context.moveTo(_e,et);break;case 3:this._point=4;default:point$2(this,_,$);break}this._x0=this._x1,this._x1=_,this._y0=this._y1,this._y1=$}};function curveBasisOpen(_){return new BasisOpen(_)}function LinearClosed(_){this._context=_}LinearClosed.prototype={areaStart:noop$2,areaEnd:noop$2,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(_,$){_=+_,$=+$,this._point?this._context.lineTo(_,$):(this._point=1,this._context.moveTo(_,$))}};function curveLinearClosed(_){return new LinearClosed(_)}function sign(_){return _<0?-1:1}function slope3(_,$,_e){var et=_._x1-_._x0,tt=$-_._x1,rt=(_._y1-_._y0)/(et||tt<0&&-0),nt=(_e-_._y1)/(tt||et<0&&-0),it=(rt*tt+nt*et)/(et+tt);return(sign(rt)+sign(nt))*Math.min(Math.abs(rt),Math.abs(nt),.5*Math.abs(it))||0}function slope2(_,$){var _e=_._x1-_._x0;return _e?(3*(_._y1-_._y0)/_e-$)/2:$}function point$1(_,$,_e){var et=_._x0,tt=_._y0,rt=_._x1,nt=_._y1,it=(rt-et)/3;_._context.bezierCurveTo(et+it,tt+it*$,rt-it,nt-it*_e,rt,nt)}function MonotoneX(_){this._context=_}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(_,$){var _e=NaN;if(_=+_,$=+$,!(_===this._x1&&$===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(_,$):this._context.moveTo(_,$);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,_e=slope3(this,_,$)),_e);break;default:point$1(this,this._t0,_e=slope3(this,_,$));break}this._x0=this._x1,this._x1=_,this._y0=this._y1,this._y1=$,this._t0=_e}}};function MonotoneY(_){this._context=new ReflectContext(_)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(_,$){MonotoneX.prototype.point.call(this,$,_)};function ReflectContext(_){this._context=_}ReflectContext.prototype={moveTo:function(_,$){this._context.moveTo($,_)},closePath:function(){this._context.closePath()},lineTo:function(_,$){this._context.lineTo($,_)},bezierCurveTo:function(_,$,_e,et,tt,rt){this._context.bezierCurveTo($,_,et,_e,rt,tt)}};function monotoneX(_){return new MonotoneX(_)}function monotoneY(_){return new MonotoneY(_)}function Natural(_){this._context=_}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var _=this._x,$=this._y,_e=_.length;if(_e)if(this._line?this._context.lineTo(_[0],$[0]):this._context.moveTo(_[0],$[0]),_e===2)this._context.lineTo(_[1],$[1]);else for(var et=controlPoints(_),tt=controlPoints($),rt=0,nt=1;nt<_e;++rt,++nt)this._context.bezierCurveTo(et[0][rt],tt[0][rt],et[1][rt],tt[1][rt],_[nt],$[nt]);(this._line||this._line!==0&&_e===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(_,$){this._x.push(+_),this._y.push(+$)}};function controlPoints(_){var $,_e=_.length-1,et,tt=new Array(_e),rt=new Array(_e),nt=new Array(_e);for(tt[0]=0,rt[0]=2,nt[0]=_[0]+2*_[1],$=1;$<_e-1;++$)tt[$]=1,rt[$]=4,nt[$]=4*_[$]+2*_[$+1];for(tt[_e-1]=2,rt[_e-1]=7,nt[_e-1]=8*_[_e-1]+_[_e],$=1;$<_e;++$)et=tt[$]/rt[$-1],rt[$]-=et,nt[$]-=et*nt[$-1];for(tt[_e-1]=nt[_e-1]/rt[_e-1],$=_e-2;$>=0;--$)tt[$]=(nt[$]-tt[$+1])/rt[$];for(rt[_e-1]=(_[_e]+tt[_e-1])/2,$=0;$<_e-1;++$)rt[$]=2*_[$+1]-tt[$+1];return[tt,rt]}function curveNatural(_){return new Natural(_)}function Step(_,$){this._context=_,this._t=$}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(_,$){switch(_=+_,$=+$,this._point){case 0:this._point=1,this._line?this._context.lineTo(_,$):this._context.moveTo(_,$);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,$),this._context.lineTo(_,$);else{var _e=this._x*(1-this._t)+_*this._t;this._context.lineTo(_e,this._y),this._context.lineTo(_e,$)}break}}this._x=_,this._y=$}};function curveStep(_){return new Step(_,.5)}function stepBefore(_){return new Step(_,0)}function stepAfter(_){return new Step(_,1)}function stackOffsetNone(_,$){if((nt=_.length)>1)for(var _e=1,et,tt,rt=_[$[0]],nt,it=rt.length;_e<nt;++_e)for(tt=rt,rt=_[$[_e]],et=0;et<it;++et)rt[et][1]+=rt[et][0]=isNaN(tt[et][1])?tt[et][0]:tt[et][1]}function stackOrderNone(_){for(var $=_.length,_e=new Array($);--$>=0;)_e[$]=$;return _e}function stackValue(_,$){return _[$]}function stackSeries(_){const $=[];return $.key=_,$}function shapeStack(){var _=constant$3([]),$=stackOrderNone,_e=stackOffsetNone,et=stackValue;function tt(rt){var nt=Array.from(_.apply(this,arguments),stackSeries),it,st=nt.length,at=-1,ot;for(const dt of rt)for(it=0,++at;it<st;++it)(nt[it][at]=[0,+et(dt,nt[it].key,at,rt)]).data=dt;for(it=0,ot=array($(nt));it<st;++it)nt[ot[it]].index=it;return _e(nt,ot),nt}return tt.keys=function(rt){return arguments.length?(_=typeof rt=="function"?rt:constant$3(Array.from(rt)),tt):_},tt.value=function(rt){return arguments.length?(et=typeof rt=="function"?rt:constant$3(+rt),tt):et},tt.order=function(rt){return arguments.length?($=rt==null?stackOrderNone:typeof rt=="function"?rt:constant$3(Array.from(rt)),tt):$},tt.offset=function(rt){return arguments.length?(_e=rt??stackOffsetNone,tt):_e},tt}function stackOffsetExpand(_,$){if((et=_.length)>0){for(var _e,et,tt=0,rt=_[0].length,nt;tt<rt;++tt){for(nt=_e=0;_e<et;++_e)nt+=_[_e][tt][1]||0;if(nt)for(_e=0;_e<et;++_e)_[_e][tt][1]/=nt}stackOffsetNone(_,$)}}function stackOffsetSilhouette(_,$){if((tt=_.length)>0){for(var _e=0,et=_[$[0]],tt,rt=et.length;_e<rt;++_e){for(var nt=0,it=0;nt<tt;++nt)it+=_[nt][_e][1]||0;et[_e][1]+=et[_e][0]=-it/2}stackOffsetNone(_,$)}}function stackOffsetWiggle(_,$){if(!(!((nt=_.length)>0)||!((rt=(tt=_[$[0]]).length)>0))){for(var _e=0,et=1,tt,rt,nt;et<rt;++et){for(var it=0,st=0,at=0;it<nt;++it){for(var ot=_[$[it]],dt=ot[et][1]||0,ht=ot[et-1][1]||0,yt=(dt-ht)/2,vt=0;vt<it;++vt){var xt=_[$[vt]],wt=xt[et][1]||0,Et=xt[et-1][1]||0;yt+=wt-Et}st+=dt,at+=yt*dt}tt[et-1][1]+=tt[et-1][0]=_e,st&&(_e-=at/st)}tt[et-1][1]+=tt[et-1][0]=_e,stackOffsetNone(_,$)}}function _typeof$G(_){"@babel/helpers - typeof";return _typeof$G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$G(_)}var _excluded$e=["type","size","sizeType"];function _extends$o(){return _extends$o=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$o.apply(this,arguments)}function ownKeys$z(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$z(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$z(Object(_e),!0).forEach(function(et){_defineProperty$F(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$z(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$F(_,$,_e){return $=_toPropertyKey$F($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$F(_){var $=_toPrimitive$F(_,"string");return _typeof$G($)=="symbol"?$:$+""}function _toPrimitive$F(_,$){if(_typeof$G(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$G(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}function _objectWithoutProperties$e(_,$){if(_==null)return{};var _e=_objectWithoutPropertiesLoose$e(_,$),et,tt;if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_);for(tt=0;tt<rt.length;tt++)et=rt[tt],!($.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call(_,et)&&(_e[et]=_[et])}return _e}function _objectWithoutPropertiesLoose$e(_,$){if(_==null)return{};var _e={};for(var et in _)if(Object.prototype.hasOwnProperty.call(_,et)){if($.indexOf(et)>=0)continue;_e[et]=_[et]}return _e}var symbolFactories={symbolCircle,symbolCross,symbolDiamond,symbolSquare,symbolStar,symbolTriangle,symbolWye},RADIAN$1=Math.PI/180,getSymbolFactory=function _($){var _e="symbol".concat(upperFirst$1($));return symbolFactories[_e]||symbolCircle},calculateAreaSize=function _($,_e,et){if(_e==="area")return $;switch(et){case"cross":return 5*$*$/9;case"diamond":return .5*$*$/Math.sqrt(3);case"square":return $*$;case"star":{var tt=18*RADIAN$1;return 1.25*$*$*(Math.tan(tt)-Math.tan(tt*2)*Math.pow(Math.tan(tt),2))}case"triangle":return Math.sqrt(3)*$*$/4;case"wye":return(21-10*Math.sqrt(3))*$*$/8;default:return Math.PI*$*$/4}},registerSymbol=function _($,_e){symbolFactories["symbol".concat(upperFirst$1($))]=_e},Symbols=function _($){var _e=$.type,et=_e===void 0?"circle":_e,tt=$.size,rt=tt===void 0?64:tt,nt=$.sizeType,it=nt===void 0?"area":nt,st=_objectWithoutProperties$e($,_excluded$e),at=_objectSpread$z(_objectSpread$z({},st),{},{type:et,size:rt,sizeType:it}),ot=function(){var wt=getSymbolFactory(et),Et=Symbol$3().type(wt).size(calculateAreaSize(rt,it,et));return Et()},dt=at.className,ht=at.cx,yt=at.cy,vt=filterProps(at,!0);return ht===+ht&&yt===+yt&&rt===+rt?React.createElement("path",_extends$o({},vt,{className:clsx("recharts-symbols",dt),transform:"translate(".concat(ht,", ").concat(yt,")"),d:ot()})):null};Symbols.registerSymbol=registerSymbol;function _typeof$F(_){"@babel/helpers - typeof";return _typeof$F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$F(_)}function _extends$n(){return _extends$n=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$n.apply(this,arguments)}function ownKeys$y(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$y(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$y(Object(_e),!0).forEach(function(et){_defineProperty$E(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$y(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _classCallCheck$i(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties$i(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,_toPropertyKey$E(et.key),et)}}function _createClass$i(_,$,_e){return $&&_defineProperties$i(_.prototype,$),Object.defineProperty(_,"prototype",{writable:!1}),_}function _callSuper$e(_,$,_e){return $=_getPrototypeOf$f($),_possibleConstructorReturn$f(_,_isNativeReflectConstruct$f()?Reflect.construct($,_e||[],_getPrototypeOf$f(_).constructor):$.apply(_,_e))}function _possibleConstructorReturn$f(_,$){if($&&(_typeof$F($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$f(_)}function _assertThisInitialized$f(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _isNativeReflectConstruct$f(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$f=function(){return!!_})()}function _getPrototypeOf$f(_){return _getPrototypeOf$f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},_getPrototypeOf$f(_)}function _inherits$f(_,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create($&&$.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),$&&_setPrototypeOf$f(_,$)}function _setPrototypeOf$f(_,$){return _setPrototypeOf$f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(et,tt){return et.__proto__=tt,et},_setPrototypeOf$f(_,$)}function _defineProperty$E(_,$,_e){return $=_toPropertyKey$E($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$E(_){var $=_toPrimitive$E(_,"string");return _typeof$F($)=="symbol"?$:$+""}function _toPrimitive$E(_,$){if(_typeof$F(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$F(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var SIZE=32,DefaultLegendContent=function(_){function $(){return _classCallCheck$i(this,$),_callSuper$e(this,$,arguments)}return _inherits$f($,_),_createClass$i($,[{key:"renderIcon",value:function(et){var tt=this.props.inactiveColor,rt=SIZE/2,nt=SIZE/6,it=SIZE/3,st=et.inactive?tt:et.color;if(et.type==="plainline")return React.createElement("line",{strokeWidth:4,fill:"none",stroke:st,strokeDasharray:et.payload.strokeDasharray,x1:0,y1:rt,x2:SIZE,y2:rt,className:"recharts-legend-icon"});if(et.type==="line")return React.createElement("path",{strokeWidth:4,fill:"none",stroke:st,d:"M0,".concat(rt,"h").concat(it,`
            A`).concat(nt,",").concat(nt,",0,1,1,").concat(2*it,",").concat(rt,`
            H`).concat(SIZE,"M").concat(2*it,",").concat(rt,`
            A`).concat(nt,",").concat(nt,",0,1,1,").concat(it,",").concat(rt),className:"recharts-legend-icon"});if(et.type==="rect")return React.createElement("path",{stroke:"none",fill:st,d:"M0,".concat(SIZE/8,"h").concat(SIZE,"v").concat(SIZE*3/4,"h").concat(-SIZE,"z"),className:"recharts-legend-icon"});if(React.isValidElement(et.legendIcon)){var at=_objectSpread$y({},et);return delete at.legendIcon,React.cloneElement(et.legendIcon,at)}return React.createElement(Symbols,{fill:st,cx:rt,cy:rt,size:SIZE,sizeType:"diameter",type:et.type})}},{key:"renderItems",value:function(){var et=this,tt=this.props,rt=tt.payload,nt=tt.iconSize,it=tt.layout,st=tt.formatter,at=tt.inactiveColor,ot={x:0,y:0,width:SIZE,height:SIZE},dt={display:it==="horizontal"?"inline-block":"block",marginRight:10},ht={display:"inline-block",verticalAlign:"middle",marginRight:4};return rt.map(function(yt,vt){var xt=yt.formatter||st,wt=clsx(_defineProperty$E(_defineProperty$E({"recharts-legend-item":!0},"legend-item-".concat(vt),!0),"inactive",yt.inactive));if(yt.type==="none")return null;var Et=isFunction$3(yt.value)?null:yt.value;warn(!isFunction$3(yt.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var At=yt.inactive?at:yt.color;return React.createElement("li",_extends$n({className:wt,style:dt,key:"legend-item-".concat(vt)},adaptEventsOfChild(et.props,yt,vt)),React.createElement(Surface,{width:nt,height:nt,viewBox:ot,style:ht},et.renderIcon(yt)),React.createElement("span",{className:"recharts-legend-item-text",style:{color:At}},xt?xt(Et,yt,vt):Et))})}},{key:"render",value:function(){var et=this.props,tt=et.payload,rt=et.layout,nt=et.align;if(!tt||!tt.length)return null;var it={padding:0,margin:0,textAlign:rt==="horizontal"?nt:"left"};return React.createElement("ul",{className:"recharts-default-legend",style:it},this.renderItems())}}])}(reactExports.PureComponent);_defineProperty$E(DefaultLegendContent,"displayName","Legend");_defineProperty$E(DefaultLegendContent,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var ListCache$2=_ListCache;function stackClear$1(){this.__data__=new ListCache$2,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(_){var $=this.__data__,_e=$.delete(_);return this.size=$.size,_e}var _stackDelete=stackDelete$1;function stackGet$1(_){return this.__data__.get(_)}var _stackGet=stackGet$1;function stackHas$1(_){return this.__data__.has(_)}var _stackHas=stackHas$1,ListCache$1=_ListCache,Map$2=_Map,MapCache$1=_MapCache,LARGE_ARRAY_SIZE$1=200;function stackSet$1(_,$){var _e=this.__data__;if(_e instanceof ListCache$1){var et=_e.__data__;if(!Map$2||et.length<LARGE_ARRAY_SIZE$1-1)return et.push([_,$]),this.size=++_e.size,this;_e=this.__data__=new MapCache$1(et)}return _e.set(_,$),this.size=_e.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$2(_){var $=this.__data__=new ListCache(_);this.size=$.size}Stack$2.prototype.clear=stackClear;Stack$2.prototype.delete=stackDelete;Stack$2.prototype.get=stackGet;Stack$2.prototype.has=stackHas;Stack$2.prototype.set=stackSet;var _Stack=Stack$2,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(_){return this.__data__.set(_,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(_){return this.__data__.has(_)}var _setCacheHas=setCacheHas$1,MapCache=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$2(_){var $=-1,_e=_==null?0:_.length;for(this.__data__=new MapCache;++$<_e;)this.add(_[$])}SetCache$2.prototype.add=SetCache$2.prototype.push=setCacheAdd;SetCache$2.prototype.has=setCacheHas;var _SetCache=SetCache$2;function arraySome$2(_,$){for(var _e=-1,et=_==null?0:_.length;++_e<et;)if($(_[_e],_e,_))return!0;return!1}var _arraySome=arraySome$2;function cacheHas$2(_,$){return _.has($)}var _cacheHas=cacheHas$2,SetCache$1=_SetCache,arraySome$1=_arraySome,cacheHas$1=_cacheHas,COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays$2(_,$,_e,et,tt,rt){var nt=_e&COMPARE_PARTIAL_FLAG$5,it=_.length,st=$.length;if(it!=st&&!(nt&&st>it))return!1;var at=rt.get(_),ot=rt.get($);if(at&&ot)return at==$&&ot==_;var dt=-1,ht=!0,yt=_e&COMPARE_UNORDERED_FLAG$3?new SetCache$1:void 0;for(rt.set(_,$),rt.set($,_);++dt<it;){var vt=_[dt],xt=$[dt];if(et)var wt=nt?et(xt,vt,dt,$,_,rt):et(vt,xt,dt,_,$,rt);if(wt!==void 0){if(wt)continue;ht=!1;break}if(yt){if(!arraySome$1($,function(Et,At){if(!cacheHas$1(yt,At)&&(vt===Et||tt(vt,Et,_e,et,rt)))return yt.push(At)})){ht=!1;break}}else if(!(vt===xt||tt(vt,xt,_e,et,rt))){ht=!1;break}}return rt.delete(_),rt.delete($),ht}var _equalArrays=equalArrays$2,root$5=_root,Uint8Array$2=root$5.Uint8Array,_Uint8Array=Uint8Array$2;function mapToArray$1(_){var $=-1,_e=Array(_.size);return _.forEach(function(et,tt){_e[++$]=[tt,et]}),_e}var _mapToArray=mapToArray$1;function setToArray$3(_){var $=-1,_e=Array(_.size);return _.forEach(function(et){_e[++$]=et}),_e}var _setToArray=setToArray$3,Symbol$2=_Symbol,Uint8Array$1=_Uint8Array,eq$1=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray$2=_setToArray,COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag$2="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag$1(_,$,_e,et,tt,rt,nt){switch(_e){case dataViewTag$2:if(_.byteLength!=$.byteLength||_.byteOffset!=$.byteOffset)return!1;_=_.buffer,$=$.buffer;case arrayBufferTag$1:return!(_.byteLength!=$.byteLength||!rt(new Uint8Array$1(_),new Uint8Array$1($)));case boolTag$2:case dateTag$1:case numberTag$1:return eq$1(+_,+$);case errorTag$1:return _.name==$.name&&_.message==$.message;case regexpTag$1:case stringTag$1:return _==$+"";case mapTag$2:var it=mapToArray;case setTag$2:var st=et&COMPARE_PARTIAL_FLAG$4;if(it||(it=setToArray$2),_.size!=$.size&&!st)return!1;var at=nt.get(_);if(at)return at==$;et|=COMPARE_UNORDERED_FLAG$2,nt.set(_,$);var ot=equalArrays$1(it(_),it($),et,tt,rt,nt);return nt.delete(_),ot;case symbolTag:if(symbolValueOf)return symbolValueOf.call(_)==symbolValueOf.call($)}return!1}var _equalByTag=equalByTag$1;function arrayPush$2(_,$){for(var _e=-1,et=$.length,tt=_.length;++_e<et;)_[tt+_e]=$[_e];return _}var _arrayPush=arrayPush$2,arrayPush$1=_arrayPush,isArray$a=isArray_1;function baseGetAllKeys$1(_,$,_e){var et=$(_);return isArray$a(_)?et:arrayPush$1(et,_e(_))}var _baseGetAllKeys=baseGetAllKeys$1;function arrayFilter$1(_,$){for(var _e=-1,et=_==null?0:_.length,tt=0,rt=[];++_e<et;){var nt=_[_e];$(nt,_e,_)&&(rt[tt++]=nt)}return rt}var _arrayFilter=arrayFilter$1;function stubArray$1(){return[]}var stubArray_1=stubArray$1,arrayFilter=_arrayFilter,stubArray=stubArray_1,objectProto$7=Object.prototype,propertyIsEnumerable$1=objectProto$7.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols$1=nativeGetSymbols?function(_){return _==null?[]:(_=Object(_),arrayFilter(nativeGetSymbols(_),function($){return propertyIsEnumerable$1.call(_,$)}))}:stubArray,_getSymbols=getSymbols$1;function baseTimes$1(_,$){for(var _e=-1,et=Array(_);++_e<_;)et[_e]=$(_e);return et}var _baseTimes=baseTimes$1,baseGetTag$4=_baseGetTag,isObjectLike$5=isObjectLike_1,argsTag$2="[object Arguments]";function baseIsArguments$1(_){return isObjectLike$5(_)&&baseGetTag$4(_)==argsTag$2}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$4=isObjectLike_1,objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty,propertyIsEnumerable=objectProto$6.propertyIsEnumerable,isArguments$3=baseIsArguments(function(){return arguments}())?baseIsArguments:function(_){return isObjectLike$4(_)&&hasOwnProperty$6.call(_,"callee")&&!propertyIsEnumerable.call(_,"callee")},isArguments_1=isArguments$3,isBuffer$2={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;isBuffer$2.exports;(function(_,$){var _e=_root,et=stubFalse_1,tt=$&&!$.nodeType&&$,rt=tt&&!0&&_&&!_.nodeType&&_,nt=rt&&rt.exports===tt,it=nt?_e.Buffer:void 0,st=it?it.isBuffer:void 0,at=st||et;_.exports=at})(isBuffer$2,isBuffer$2.exports);var isBufferExports=isBuffer$2.exports,MAX_SAFE_INTEGER$2=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$3(_,$){var _e=typeof _;return $=$??MAX_SAFE_INTEGER$2,!!$&&(_e=="number"||_e!="symbol"&&reIsUint.test(_))&&_>-1&&_%1==0&&_<$}var _isIndex=isIndex$3,MAX_SAFE_INTEGER$1=9007199254740991;function isLength$3(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=MAX_SAFE_INTEGER$1}var isLength_1=isLength$3,baseGetTag$3=_baseGetTag,isLength$2=isLength_1,isObjectLike$3=isObjectLike_1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag$1="[object Map]",numberTag="[object Number]",objectTag$3="[object Object]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag$1]=typedArrayTags[numberTag]=typedArrayTags[objectTag$3]=typedArrayTags[regexpTag]=typedArrayTags[setTag$1]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray$1(_){return isObjectLike$3(_)&&isLength$2(_.length)&&!!typedArrayTags[baseGetTag$3(_)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$2(_){return function($){return _($)}}var _baseUnary=baseUnary$2,_nodeUtil={exports:{}};_nodeUtil.exports;(function(_,$){var _e=_freeGlobal,et=$&&!$.nodeType&&$,tt=et&&!0&&_&&!_.nodeType&&_,rt=tt&&tt.exports===et,nt=rt&&_e.process,it=function(){try{var st=tt&&tt.require&&tt.require("util").types;return st||nt&&nt.binding&&nt.binding("util")}catch{}}();_.exports=it})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary$1=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$3=nodeIsTypedArray?baseUnary$1(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$3,baseTimes=_baseTimes,isArguments$2=isArguments_1,isArray$9=isArray_1,isBuffer$1=isBufferExports,isIndex$2=_isIndex,isTypedArray$2=isTypedArray_1,objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function arrayLikeKeys$1(_,$){var _e=isArray$9(_),et=!_e&&isArguments$2(_),tt=!_e&&!et&&isBuffer$1(_),rt=!_e&&!et&&!tt&&isTypedArray$2(_),nt=_e||et||tt||rt,it=nt?baseTimes(_.length,String):[],st=it.length;for(var at in _)($||hasOwnProperty$5.call(_,at))&&!(nt&&(at=="length"||tt&&(at=="offset"||at=="parent")||rt&&(at=="buffer"||at=="byteLength"||at=="byteOffset")||isIndex$2(at,st)))&&it.push(at);return it}var _arrayLikeKeys=arrayLikeKeys$1,objectProto$4=Object.prototype;function isPrototype$1(_){var $=_&&_.constructor,_e=typeof $=="function"&&$.prototype||objectProto$4;return _===_e}var _isPrototype=isPrototype$1;function overArg$2(_,$){return function(_e){return _($(_e))}}var _overArg=overArg$2,overArg$1=_overArg,nativeKeys$1=overArg$1(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype=_isPrototype,nativeKeys=_nativeKeys,objectProto$3=Object.prototype,hasOwnProperty$4=objectProto$3.hasOwnProperty;function baseKeys$1(_){if(!isPrototype(_))return nativeKeys(_);var $=[];for(var _e in Object(_))hasOwnProperty$4.call(_,_e)&&_e!="constructor"&&$.push(_e);return $}var _baseKeys=baseKeys$1,isFunction=isFunction_1,isLength$1=isLength_1;function isArrayLike$5(_){return _!=null&&isLength$1(_.length)&&!isFunction(_)}var isArrayLike_1=isArrayLike$5,arrayLikeKeys=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike$4=isArrayLike_1;function keys$5(_){return isArrayLike$4(_)?arrayLikeKeys(_):baseKeys(_)}var keys_1=keys$5,baseGetAllKeys=_baseGetAllKeys,getSymbols=_getSymbols,keys$4=keys_1;function getAllKeys$1(_){return baseGetAllKeys(_,keys$4,getSymbols)}var _getAllKeys=getAllKeys$1,getAllKeys=_getAllKeys,COMPARE_PARTIAL_FLAG$3=1,objectProto$2=Object.prototype,hasOwnProperty$3=objectProto$2.hasOwnProperty;function equalObjects$1(_,$,_e,et,tt,rt){var nt=_e&COMPARE_PARTIAL_FLAG$3,it=getAllKeys(_),st=it.length,at=getAllKeys($),ot=at.length;if(st!=ot&&!nt)return!1;for(var dt=st;dt--;){var ht=it[dt];if(!(nt?ht in $:hasOwnProperty$3.call($,ht)))return!1}var yt=rt.get(_),vt=rt.get($);if(yt&&vt)return yt==$&&vt==_;var xt=!0;rt.set(_,$),rt.set($,_);for(var wt=nt;++dt<st;){ht=it[dt];var Et=_[ht],At=$[ht];if(et)var jt=nt?et(At,Et,ht,$,_,rt):et(Et,At,ht,_,$,rt);if(!(jt===void 0?Et===At||tt(Et,At,_e,et,rt):jt)){xt=!1;break}wt||(wt=ht=="constructor")}if(xt&&!wt){var kt=_.constructor,Lt=$.constructor;kt!=Lt&&"constructor"in _&&"constructor"in $&&!(typeof kt=="function"&&kt instanceof kt&&typeof Lt=="function"&&Lt instanceof Lt)&&(xt=!1)}return rt.delete(_),rt.delete($),xt}var _equalObjects=equalObjects$1,getNative$4=_getNative,root$4=_root,DataView$2=getNative$4(root$4,"DataView"),_DataView=DataView$2,getNative$3=_getNative,root$3=_root,Promise$2=getNative$3(root$3,"Promise"),_Promise=Promise$2,getNative$2=_getNative,root$2=_root,Set$3=getNative$2(root$2,"Set"),_Set=Set$3,getNative$1=_getNative,root$1=_root,WeakMap$2=getNative$1(root$1,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$2=_Set,WeakMap$1=_WeakMap,baseGetTag$2=_baseGetTag,toSource=_toSource,mapTag="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$1),getTag$2=baseGetTag$2;(DataView$1&&getTag$2(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$1&&getTag$2(new Map$1)!=mapTag||Promise$1&&getTag$2(Promise$1.resolve())!=promiseTag||Set$2&&getTag$2(new Set$2)!=setTag||WeakMap$1&&getTag$2(new WeakMap$1)!=weakMapTag)&&(getTag$2=function(_){var $=baseGetTag$2(_),_e=$==objectTag$2?_.constructor:void 0,et=_e?toSource(_e):"";if(et)switch(et){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return $});var _getTag=getTag$2,Stack$1=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag$1=_getTag,isArray$8=isArray_1,isBuffer=isBufferExports,isTypedArray$1=isTypedArray_1,COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag$1="[object Object]",objectProto$1=Object.prototype,hasOwnProperty$2=objectProto$1.hasOwnProperty;function baseIsEqualDeep$1(_,$,_e,et,tt,rt){var nt=isArray$8(_),it=isArray$8($),st=nt?arrayTag:getTag$1(_),at=it?arrayTag:getTag$1($);st=st==argsTag?objectTag$1:st,at=at==argsTag?objectTag$1:at;var ot=st==objectTag$1,dt=at==objectTag$1,ht=st==at;if(ht&&isBuffer(_)){if(!isBuffer($))return!1;nt=!0,ot=!1}if(ht&&!ot)return rt||(rt=new Stack$1),nt||isTypedArray$1(_)?equalArrays(_,$,_e,et,tt,rt):equalByTag(_,$,st,_e,et,tt,rt);if(!(_e&COMPARE_PARTIAL_FLAG$2)){var yt=ot&&hasOwnProperty$2.call(_,"__wrapped__"),vt=dt&&hasOwnProperty$2.call($,"__wrapped__");if(yt||vt){var xt=yt?_.value():_,wt=vt?$.value():$;return rt||(rt=new Stack$1),tt(xt,wt,_e,et,rt)}}return ht?(rt||(rt=new Stack$1),equalObjects(_,$,_e,et,tt,rt)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike$2=isObjectLike_1;function baseIsEqual$3(_,$,_e,et,tt){return _===$?!0:_==null||$==null||!isObjectLike$2(_)&&!isObjectLike$2($)?_!==_&&$!==$:baseIsEqualDeep(_,$,_e,et,baseIsEqual$3,tt)}var _baseIsEqual=baseIsEqual$3,Stack=_Stack,baseIsEqual$2=_baseIsEqual,COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch$1(_,$,_e,et){var tt=_e.length,rt=tt,nt=!et;if(_==null)return!rt;for(_=Object(_);tt--;){var it=_e[tt];if(nt&&it[2]?it[1]!==_[it[0]]:!(it[0]in _))return!1}for(;++tt<rt;){it=_e[tt];var st=it[0],at=_[st],ot=it[1];if(nt&&it[2]){if(at===void 0&&!(st in _))return!1}else{var dt=new Stack;if(et)var ht=et(at,ot,st,_,$,dt);if(!(ht===void 0?baseIsEqual$2(ot,at,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,et,dt):ht))return!1}}return!0}var _baseIsMatch=baseIsMatch$1,isObject$4=isObject_1;function isStrictComparable$2(_){return _===_&&!isObject$4(_)}var _isStrictComparable=isStrictComparable$2,isStrictComparable$1=_isStrictComparable,keys$3=keys_1;function getMatchData$1(_){for(var $=keys$3(_),_e=$.length;_e--;){var et=$[_e],tt=_[et];$[_e]=[et,tt,isStrictComparable$1(tt)]}return $}var _getMatchData=getMatchData$1;function matchesStrictComparable$2(_,$){return function(_e){return _e==null?!1:_e[_]===$&&($!==void 0||_ in Object(_e))}}var _matchesStrictComparable=matchesStrictComparable$2,baseIsMatch=_baseIsMatch,getMatchData=_getMatchData,matchesStrictComparable$1=_matchesStrictComparable;function baseMatches$1(_){var $=getMatchData(_);return $.length==1&&$[0][2]?matchesStrictComparable$1($[0][0],$[0][1]):function(_e){return _e===_||baseIsMatch(_e,_,$)}}var _baseMatches=baseMatches$1;function baseHasIn$1(_,$){return _!=null&&$ in Object(_)}var _baseHasIn=baseHasIn$1,castPath=_castPath,isArguments$1=isArguments_1,isArray$7=isArray_1,isIndex$1=_isIndex,isLength=isLength_1,toKey$2=_toKey;function hasPath$1(_,$,_e){$=castPath($,_);for(var et=-1,tt=$.length,rt=!1;++et<tt;){var nt=toKey$2($[et]);if(!(rt=_!=null&&_e(_,nt)))break;_=_[nt]}return rt||++et!=tt?rt:(tt=_==null?0:_.length,!!tt&&isLength(tt)&&isIndex$1(nt,tt)&&(isArray$7(_)||isArguments$1(_)))}var _hasPath=hasPath$1,baseHasIn=_baseHasIn,hasPath=_hasPath;function hasIn$1(_,$){return _!=null&&hasPath(_,$,baseHasIn)}var hasIn_1=hasIn$1,baseIsEqual$1=_baseIsEqual,get=get_1,hasIn=hasIn_1,isKey$1=_isKey,isStrictComparable=_isStrictComparable,matchesStrictComparable=_matchesStrictComparable,toKey$1=_toKey,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty$1(_,$){return isKey$1(_)&&isStrictComparable($)?matchesStrictComparable(toKey$1(_),$):function(_e){var et=get(_e,_);return et===void 0&&et===$?hasIn(_e,_):baseIsEqual$1($,et,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}var _baseMatchesProperty=baseMatchesProperty$1;function identity$b(_){return _}var identity_1=identity$b;function baseProperty$1(_){return function($){return $==null?void 0:$[_]}}var _baseProperty=baseProperty$1,baseGet$1=_baseGet;function basePropertyDeep$1(_){return function($){return baseGet$1($,_)}}var _basePropertyDeep=basePropertyDeep$1,baseProperty=_baseProperty,basePropertyDeep=_basePropertyDeep,isKey=_isKey,toKey=_toKey;function property$1(_){return isKey(_)?baseProperty(toKey(_)):basePropertyDeep(_)}var property_1=property$1,baseMatches=_baseMatches,baseMatchesProperty=_baseMatchesProperty,identity$a=identity_1,isArray$6=isArray_1,property=property_1;function baseIteratee$8(_){return typeof _=="function"?_:_==null?identity$a:typeof _=="object"?isArray$6(_)?baseMatchesProperty(_[0],_[1]):baseMatches(_):property(_)}var _baseIteratee=baseIteratee$8;function baseFindIndex$2(_,$,_e,et){for(var tt=_.length,rt=_e+(et?1:-1);et?rt--:++rt<tt;)if($(_[rt],rt,_))return rt;return-1}var _baseFindIndex=baseFindIndex$2;function baseIsNaN$1(_){return _!==_}var _baseIsNaN=baseIsNaN$1;function strictIndexOf$1(_,$,_e){for(var et=_e-1,tt=_.length;++et<tt;)if(_[et]===$)return et;return-1}var _strictIndexOf=strictIndexOf$1,baseFindIndex$1=_baseFindIndex,baseIsNaN=_baseIsNaN,strictIndexOf=_strictIndexOf;function baseIndexOf$1(_,$,_e){return $===$?strictIndexOf(_,$,_e):baseFindIndex$1(_,baseIsNaN,_e)}var _baseIndexOf=baseIndexOf$1,baseIndexOf=_baseIndexOf;function arrayIncludes$1(_,$){var _e=_==null?0:_.length;return!!_e&&baseIndexOf(_,$,0)>-1}var _arrayIncludes=arrayIncludes$1;function arrayIncludesWith$1(_,$,_e){for(var et=-1,tt=_==null?0:_.length;++et<tt;)if(_e($,_[et]))return!0;return!1}var _arrayIncludesWith=arrayIncludesWith$1;function noop$1(){}var noop_1=noop$1,Set$1=_Set,noop=noop_1,setToArray$1=_setToArray,INFINITY$1=1/0,createSet$1=Set$1&&1/setToArray$1(new Set$1([,-0]))[1]==INFINITY$1?function(_){return new Set$1(_)}:noop,_createSet=createSet$1,SetCache=_SetCache,arrayIncludes=_arrayIncludes,arrayIncludesWith=_arrayIncludesWith,cacheHas=_cacheHas,createSet=_createSet,setToArray=_setToArray,LARGE_ARRAY_SIZE=200;function baseUniq$1(_,$,_e){var et=-1,tt=arrayIncludes,rt=_.length,nt=!0,it=[],st=it;if(_e)nt=!1,tt=arrayIncludesWith;else if(rt>=LARGE_ARRAY_SIZE){var at=$?null:createSet(_);if(at)return setToArray(at);nt=!1,tt=cacheHas,st=new SetCache}else st=$?[]:it;e:for(;++et<rt;){var ot=_[et],dt=$?$(ot):ot;if(ot=_e||ot!==0?ot:0,nt&&dt===dt){for(var ht=st.length;ht--;)if(st[ht]===dt)continue e;$&&st.push(dt),it.push(ot)}else tt(st,dt,_e)||(st!==it&&st.push(dt),it.push(ot))}return it}var _baseUniq=baseUniq$1,baseIteratee$7=_baseIteratee,baseUniq=_baseUniq;function uniqBy(_,$){return _&&_.length?baseUniq(_,baseIteratee$7($)):[]}var uniqBy_1=uniqBy;const uniqBy$1=getDefaultExportFromCjs$1(uniqBy_1);function getUniqPayload(_,$,_e){return $===!0?uniqBy$1(_,_e):isFunction$3($)?uniqBy$1(_,$):_}function _typeof$E(_){"@babel/helpers - typeof";return _typeof$E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$E(_)}var _excluded$d=["ref"];function ownKeys$x(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$x(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$x(Object(_e),!0).forEach(function(et){_defineProperty$D(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$x(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _classCallCheck$h(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties$h(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,_toPropertyKey$D(et.key),et)}}function _createClass$h(_,$,_e){return $&&_defineProperties$h(_.prototype,$),_e&&_defineProperties$h(_,_e),Object.defineProperty(_,"prototype",{writable:!1}),_}function _callSuper$d(_,$,_e){return $=_getPrototypeOf$e($),_possibleConstructorReturn$e(_,_isNativeReflectConstruct$e()?Reflect.construct($,_e||[],_getPrototypeOf$e(_).constructor):$.apply(_,_e))}function _possibleConstructorReturn$e(_,$){if($&&(_typeof$E($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$e(_)}function _assertThisInitialized$e(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _isNativeReflectConstruct$e(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$e=function(){return!!_})()}function _getPrototypeOf$e(_){return _getPrototypeOf$e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},_getPrototypeOf$e(_)}function _inherits$e(_,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create($&&$.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),$&&_setPrototypeOf$e(_,$)}function _setPrototypeOf$e(_,$){return _setPrototypeOf$e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(et,tt){return et.__proto__=tt,et},_setPrototypeOf$e(_,$)}function _defineProperty$D(_,$,_e){return $=_toPropertyKey$D($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$D(_){var $=_toPrimitive$D(_,"string");return _typeof$E($)=="symbol"?$:$+""}function _toPrimitive$D(_,$){if(_typeof$E(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$E(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}function _objectWithoutProperties$d(_,$){if(_==null)return{};var _e=_objectWithoutPropertiesLoose$d(_,$),et,tt;if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_);for(tt=0;tt<rt.length;tt++)et=rt[tt],!($.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call(_,et)&&(_e[et]=_[et])}return _e}function _objectWithoutPropertiesLoose$d(_,$){if(_==null)return{};var _e={};for(var et in _)if(Object.prototype.hasOwnProperty.call(_,et)){if($.indexOf(et)>=0)continue;_e[et]=_[et]}return _e}function defaultUniqBy$1(_){return _.value}function renderContent$1(_,$){if(React.isValidElement(_))return React.cloneElement(_,$);if(typeof _=="function")return React.createElement(_,$);$.ref;var _e=_objectWithoutProperties$d($,_excluded$d);return React.createElement(DefaultLegendContent,_e)}var EPS$1=1,Legend=function(_){function $(){var _e;_classCallCheck$h(this,$);for(var et=arguments.length,tt=new Array(et),rt=0;rt<et;rt++)tt[rt]=arguments[rt];return _e=_callSuper$d(this,$,[].concat(tt)),_defineProperty$D(_e,"lastBoundingBox",{width:-1,height:-1}),_e}return _inherits$e($,_),_createClass$h($,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var et=this.wrapperNode.getBoundingClientRect();return et.height=this.wrapperNode.offsetHeight,et.width=this.wrapperNode.offsetWidth,et}return null}},{key:"updateBBox",value:function(){var et=this.props.onBBoxUpdate,tt=this.getBBox();tt?(Math.abs(tt.width-this.lastBoundingBox.width)>EPS$1||Math.abs(tt.height-this.lastBoundingBox.height)>EPS$1)&&(this.lastBoundingBox.width=tt.width,this.lastBoundingBox.height=tt.height,et&&et(tt)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,et&&et(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?_objectSpread$x({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(et){var tt=this.props,rt=tt.layout,nt=tt.align,it=tt.verticalAlign,st=tt.margin,at=tt.chartWidth,ot=tt.chartHeight,dt,ht;if(!et||(et.left===void 0||et.left===null)&&(et.right===void 0||et.right===null))if(nt==="center"&&rt==="vertical"){var yt=this.getBBoxSnapshot();dt={left:((at||0)-yt.width)/2}}else dt=nt==="right"?{right:st&&st.right||0}:{left:st&&st.left||0};if(!et||(et.top===void 0||et.top===null)&&(et.bottom===void 0||et.bottom===null))if(it==="middle"){var vt=this.getBBoxSnapshot();ht={top:((ot||0)-vt.height)/2}}else ht=it==="bottom"?{bottom:st&&st.bottom||0}:{top:st&&st.top||0};return _objectSpread$x(_objectSpread$x({},dt),ht)}},{key:"render",value:function(){var et=this,tt=this.props,rt=tt.content,nt=tt.width,it=tt.height,st=tt.wrapperStyle,at=tt.payloadUniqBy,ot=tt.payload,dt=_objectSpread$x(_objectSpread$x({position:"absolute",width:nt||"auto",height:it||"auto"},this.getDefaultPosition(st)),st);return React.createElement("div",{className:"recharts-legend-wrapper",style:dt,ref:function(yt){et.wrapperNode=yt}},renderContent$1(rt,_objectSpread$x(_objectSpread$x({},this.props),{},{payload:getUniqPayload(ot,at,defaultUniqBy$1)})))}}],[{key:"getWithHeight",value:function(et,tt){var rt=_objectSpread$x(_objectSpread$x({},this.defaultProps),et.props),nt=rt.layout;return nt==="vertical"&&isNumber(et.props.height)?{height:et.props.height}:nt==="horizontal"?{width:et.props.width||tt}:null}}])}(reactExports.PureComponent);_defineProperty$D(Legend,"displayName","Legend");_defineProperty$D(Legend,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Symbol$1=_Symbol,isArguments=isArguments_1,isArray$5=isArray_1,spreadableSymbol=Symbol$1?Symbol$1.isConcatSpreadable:void 0;function isFlattenable$1(_){return isArray$5(_)||isArguments(_)||!!(spreadableSymbol&&_&&_[spreadableSymbol])}var _isFlattenable=isFlattenable$1,arrayPush=_arrayPush,isFlattenable=_isFlattenable;function baseFlatten$2(_,$,_e,et,tt){var rt=-1,nt=_.length;for(_e||(_e=isFlattenable),tt||(tt=[]);++rt<nt;){var it=_[rt];$>0&&_e(it)?$>1?baseFlatten$2(it,$-1,_e,et,tt):arrayPush(tt,it):et||(tt[tt.length]=it)}return tt}var _baseFlatten=baseFlatten$2;function createBaseFor$1(_){return function($,_e,et){for(var tt=-1,rt=Object($),nt=et($),it=nt.length;it--;){var st=nt[_?it:++tt];if(_e(rt[st],st,rt)===!1)break}return $}}var _createBaseFor=createBaseFor$1,createBaseFor=_createBaseFor,baseFor$1=createBaseFor(),_baseFor=baseFor$1,baseFor=_baseFor,keys$2=keys_1;function baseForOwn$2(_,$){return _&&baseFor(_,$,keys$2)}var _baseForOwn=baseForOwn$2,isArrayLike$3=isArrayLike_1;function createBaseEach$1(_,$){return function(_e,et){if(_e==null)return _e;if(!isArrayLike$3(_e))return _(_e,et);for(var tt=_e.length,rt=$?tt:-1,nt=Object(_e);($?rt--:++rt<tt)&&et(nt[rt],rt,nt)!==!1;);return _e}}var _createBaseEach=createBaseEach$1,baseForOwn$1=_baseForOwn,createBaseEach=_createBaseEach,baseEach$3=createBaseEach(baseForOwn$1),_baseEach=baseEach$3,baseEach$2=_baseEach,isArrayLike$2=isArrayLike_1;function baseMap$2(_,$){var _e=-1,et=isArrayLike$2(_)?Array(_.length):[];return baseEach$2(_,function(tt,rt,nt){et[++_e]=$(tt,rt,nt)}),et}var _baseMap=baseMap$2;function baseSortBy$1(_,$){var _e=_.length;for(_.sort($);_e--;)_[_e]=_[_e].value;return _}var _baseSortBy=baseSortBy$1,isSymbol$2=isSymbol_1;function compareAscending$1(_,$){if(_!==$){var _e=_!==void 0,et=_===null,tt=_===_,rt=isSymbol$2(_),nt=$!==void 0,it=$===null,st=$===$,at=isSymbol$2($);if(!it&&!at&&!rt&&_>$||rt&&nt&&st&&!it&&!at||et&&nt&&st||!_e&&st||!tt)return 1;if(!et&&!rt&&!at&&_<$||at&&_e&&tt&&!et&&!rt||it&&_e&&tt||!nt&&tt||!st)return-1}return 0}var _compareAscending=compareAscending$1,compareAscending=_compareAscending;function compareMultiple$1(_,$,_e){for(var et=-1,tt=_.criteria,rt=$.criteria,nt=tt.length,it=_e.length;++et<nt;){var st=compareAscending(tt[et],rt[et]);if(st){if(et>=it)return st;var at=_e[et];return st*(at=="desc"?-1:1)}}return _.index-$.index}var _compareMultiple=compareMultiple$1,arrayMap$1=_arrayMap,baseGet=_baseGet,baseIteratee$6=_baseIteratee,baseMap$1=_baseMap,baseSortBy=_baseSortBy,baseUnary=_baseUnary,compareMultiple=_compareMultiple,identity$9=identity_1,isArray$4=isArray_1;function baseOrderBy$1(_,$,_e){$.length?$=arrayMap$1($,function(rt){return isArray$4(rt)?function(nt){return baseGet(nt,rt.length===1?rt[0]:rt)}:rt}):$=[identity$9];var et=-1;$=arrayMap$1($,baseUnary(baseIteratee$6));var tt=baseMap$1(_,function(rt,nt,it){var st=arrayMap$1($,function(at){return at(rt)});return{criteria:st,index:++et,value:rt}});return baseSortBy(tt,function(rt,nt){return compareMultiple(rt,nt,_e)})}var _baseOrderBy=baseOrderBy$1;function apply$1(_,$,_e){switch(_e.length){case 0:return _.call($);case 1:return _.call($,_e[0]);case 2:return _.call($,_e[0],_e[1]);case 3:return _.call($,_e[0],_e[1],_e[2])}return _.apply($,_e)}var _apply=apply$1,apply=_apply,nativeMax$3=Math.max;function overRest$1(_,$,_e){return $=nativeMax$3($===void 0?_.length-1:$,0),function(){for(var et=arguments,tt=-1,rt=nativeMax$3(et.length-$,0),nt=Array(rt);++tt<rt;)nt[tt]=et[$+tt];tt=-1;for(var it=Array($+1);++tt<$;)it[tt]=et[tt];return it[$]=_e(nt),apply(_,this,it)}}var _overRest=overRest$1;function constant$2(_){return function(){return _}}var constant_1=constant$2,getNative=_getNative,defineProperty$2=function(){try{var _=getNative(Object,"defineProperty");return _({},"",{}),_}catch{}}(),_defineProperty$C=defineProperty$2,constant$1=constant_1,defineProperty$1=_defineProperty$C,identity$8=identity_1,baseSetToString$1=defineProperty$1?function(_,$){return defineProperty$1(_,"toString",{configurable:!0,enumerable:!1,value:constant$1($),writable:!0})}:identity$8,_baseSetToString=baseSetToString$1,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut$1(_){var $=0,_e=0;return function(){var et=nativeNow(),tt=HOT_SPAN-(et-_e);if(_e=et,tt>0){if(++$>=HOT_COUNT)return arguments[0]}else $=0;return _.apply(void 0,arguments)}}var _shortOut=shortOut$1,baseSetToString=_baseSetToString,shortOut=_shortOut,setToString$1=shortOut(baseSetToString),_setToString=setToString$1,identity$7=identity_1,overRest=_overRest,setToString=_setToString;function baseRest$1(_,$){return setToString(overRest(_,$,identity$7),_+"")}var _baseRest=baseRest$1,eq=eq_1,isArrayLike$1=isArrayLike_1,isIndex=_isIndex,isObject$3=isObject_1;function isIterateeCall$4(_,$,_e){if(!isObject$3(_e))return!1;var et=typeof $;return(et=="number"?isArrayLike$1(_e)&&isIndex($,_e.length):et=="string"&&$ in _e)?eq(_e[$],_):!1}var _isIterateeCall=isIterateeCall$4,baseFlatten$1=_baseFlatten,baseOrderBy=_baseOrderBy,baseRest=_baseRest,isIterateeCall$3=_isIterateeCall,sortBy=baseRest(function(_,$){if(_==null)return[];var _e=$.length;return _e>1&&isIterateeCall$3(_,$[0],$[1])?$=[]:_e>2&&isIterateeCall$3($[0],$[1],$[2])&&($=[$[0]]),baseOrderBy(_,baseFlatten$1($,1),[])}),sortBy_1=sortBy;const sortBy$1=getDefaultExportFromCjs$1(sortBy_1);function _typeof$D(_){"@babel/helpers - typeof";return _typeof$D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$D(_)}function _extends$m(){return _extends$m=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$m.apply(this,arguments)}function _slicedToArray$b(_,$){return _arrayWithHoles$c(_)||_iterableToArrayLimit$b(_,$)||_unsupportedIterableToArray$i(_,$)||_nonIterableRest$c()}function _nonIterableRest$c(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$i(_,$){if(_){if(typeof _=="string")return _arrayLikeToArray$i(_,$);var _e=Object.prototype.toString.call(_).slice(8,-1);if(_e==="Object"&&_.constructor&&(_e=_.constructor.name),_e==="Map"||_e==="Set")return Array.from(_);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray$i(_,$)}}function _arrayLikeToArray$i(_,$){($==null||$>_.length)&&($=_.length);for(var _e=0,et=new Array($);_e<$;_e++)et[_e]=_[_e];return et}function _iterableToArrayLimit$b(_,$){var _e=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(_e!=null){var et,tt,rt,nt,it=[],st=!0,at=!1;try{if(rt=(_e=_e.call(_)).next,$!==0)for(;!(st=(et=rt.call(_e)).done)&&(it.push(et.value),it.length!==$);st=!0);}catch(ot){at=!0,tt=ot}finally{try{if(!st&&_e.return!=null&&(nt=_e.return(),Object(nt)!==nt))return}finally{if(at)throw tt}}return it}}function _arrayWithHoles$c(_){if(Array.isArray(_))return _}function ownKeys$w(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$w(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$w(Object(_e),!0).forEach(function(et){_defineProperty$B(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$w(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$B(_,$,_e){return $=_toPropertyKey$C($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$C(_){var $=_toPrimitive$C(_,"string");return _typeof$D($)=="symbol"?$:$+""}function _toPrimitive$C(_,$){if(_typeof$D(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$D(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}function defaultFormatter(_){return Array.isArray(_)&&isNumOrStr(_[0])&&isNumOrStr(_[1])?_.join(" ~ "):_}var DefaultTooltipContent=function _($){var _e=$.separator,et=_e===void 0?" : ":_e,tt=$.contentStyle,rt=tt===void 0?{}:tt,nt=$.itemStyle,it=nt===void 0?{}:nt,st=$.labelStyle,at=st===void 0?{}:st,ot=$.payload,dt=$.formatter,ht=$.itemSorter,yt=$.wrapperClassName,vt=$.labelClassName,xt=$.label,wt=$.labelFormatter,Et=$.accessibilityLayer,At=Et===void 0?!1:Et,jt=function(){if(ot&&ot.length){var lt={padding:0,margin:0},mt=(ht?sortBy$1(ot,ht):ot).map(function(gt,bt){if(gt.type==="none")return null;var St=_objectSpread$w({display:"block",paddingTop:4,paddingBottom:4,color:gt.color||"#000"},it),Nt=gt.formatter||dt||defaultFormatter,Pt=gt.value,Tt=gt.name,pt=Pt,Rt=Tt;if(Nt&&pt!=null&&Rt!=null){var zt=Nt(Pt,Tt,gt,bt,ot);if(Array.isArray(zt)){var Yt=_slicedToArray$b(zt,2);pt=Yt[0],Rt=Yt[1]}else pt=zt}return React.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(bt),style:St},isNumOrStr(Rt)?React.createElement("span",{className:"recharts-tooltip-item-name"},Rt):null,isNumOrStr(Rt)?React.createElement("span",{className:"recharts-tooltip-item-separator"},et):null,React.createElement("span",{className:"recharts-tooltip-item-value"},pt),React.createElement("span",{className:"recharts-tooltip-item-unit"},gt.unit||""))});return React.createElement("ul",{className:"recharts-tooltip-item-list",style:lt},mt)}return null},kt=_objectSpread$w({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},rt),Lt=_objectSpread$w({margin:0},at),Bt=!isNil$1(xt),Gt=Bt?xt:"",er=clsx("recharts-default-tooltip",yt),tr=clsx("recharts-tooltip-label",vt);Bt&&wt&&ot!==void 0&&ot!==null&&(Gt=wt(xt,ot));var ar=At?{role:"status","aria-live":"assertive"}:{};return React.createElement("div",_extends$m({className:er,style:kt},ar),React.createElement("p",{className:tr,style:Lt},React.isValidElement(Gt)?Gt:"".concat(Gt)),jt())};function _typeof$C(_){"@babel/helpers - typeof";return _typeof$C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$C(_)}function _defineProperty$A(_,$,_e){return $=_toPropertyKey$B($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$B(_){var $=_toPrimitive$B(_,"string");return _typeof$C($)=="symbol"?$:$+""}function _toPrimitive$B(_,$){if(_typeof$C(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$C(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var CSS_CLASS_PREFIX="recharts-tooltip-wrapper",TOOLTIP_HIDDEN={visibility:"hidden"};function getTooltipCSSClassName(_){var $=_.coordinate,_e=_.translateX,et=_.translateY;return clsx(CSS_CLASS_PREFIX,_defineProperty$A(_defineProperty$A(_defineProperty$A(_defineProperty$A({},"".concat(CSS_CLASS_PREFIX,"-right"),isNumber(_e)&&$&&isNumber($.x)&&_e>=$.x),"".concat(CSS_CLASS_PREFIX,"-left"),isNumber(_e)&&$&&isNumber($.x)&&_e<$.x),"".concat(CSS_CLASS_PREFIX,"-bottom"),isNumber(et)&&$&&isNumber($.y)&&et>=$.y),"".concat(CSS_CLASS_PREFIX,"-top"),isNumber(et)&&$&&isNumber($.y)&&et<$.y))}function getTooltipTranslateXY(_){var $=_.allowEscapeViewBox,_e=_.coordinate,et=_.key,tt=_.offsetTopLeft,rt=_.position,nt=_.reverseDirection,it=_.tooltipDimension,st=_.viewBox,at=_.viewBoxDimension;if(rt&&isNumber(rt[et]))return rt[et];var ot=_e[et]-it-tt,dt=_e[et]+tt;if($[et])return nt[et]?ot:dt;if(nt[et]){var ht=ot,yt=st[et];return ht<yt?Math.max(dt,st[et]):Math.max(ot,st[et])}var vt=dt+it,xt=st[et]+at;return vt>xt?Math.max(ot,st[et]):Math.max(dt,st[et])}function getTransformStyle(_){var $=_.translateX,_e=_.translateY,et=_.useTranslate3d;return{transform:et?"translate3d(".concat($,"px, ").concat(_e,"px, 0)"):"translate(".concat($,"px, ").concat(_e,"px)")}}function getTooltipTranslate(_){var $=_.allowEscapeViewBox,_e=_.coordinate,et=_.offsetTopLeft,tt=_.position,rt=_.reverseDirection,nt=_.tooltipBox,it=_.useTranslate3d,st=_.viewBox,at,ot,dt;return nt.height>0&&nt.width>0&&_e?(ot=getTooltipTranslateXY({allowEscapeViewBox:$,coordinate:_e,key:"x",offsetTopLeft:et,position:tt,reverseDirection:rt,tooltipDimension:nt.width,viewBox:st,viewBoxDimension:st.width}),dt=getTooltipTranslateXY({allowEscapeViewBox:$,coordinate:_e,key:"y",offsetTopLeft:et,position:tt,reverseDirection:rt,tooltipDimension:nt.height,viewBox:st,viewBoxDimension:st.height}),at=getTransformStyle({translateX:ot,translateY:dt,useTranslate3d:it})):at=TOOLTIP_HIDDEN,{cssProperties:at,cssClasses:getTooltipCSSClassName({translateX:ot,translateY:dt,coordinate:_e})}}function _typeof$B(_){"@babel/helpers - typeof";return _typeof$B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$B(_)}function ownKeys$v(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$v(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$v(Object(_e),!0).forEach(function(et){_defineProperty$z(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$v(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _classCallCheck$g(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties$g(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,_toPropertyKey$A(et.key),et)}}function _createClass$g(_,$,_e){return $&&_defineProperties$g(_.prototype,$),Object.defineProperty(_,"prototype",{writable:!1}),_}function _callSuper$c(_,$,_e){return $=_getPrototypeOf$d($),_possibleConstructorReturn$d(_,_isNativeReflectConstruct$d()?Reflect.construct($,_e||[],_getPrototypeOf$d(_).constructor):$.apply(_,_e))}function _possibleConstructorReturn$d(_,$){if($&&(_typeof$B($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$d(_)}function _assertThisInitialized$d(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _isNativeReflectConstruct$d(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$d=function(){return!!_})()}function _getPrototypeOf$d(_){return _getPrototypeOf$d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},_getPrototypeOf$d(_)}function _inherits$d(_,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create($&&$.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),$&&_setPrototypeOf$d(_,$)}function _setPrototypeOf$d(_,$){return _setPrototypeOf$d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(et,tt){return et.__proto__=tt,et},_setPrototypeOf$d(_,$)}function _defineProperty$z(_,$,_e){return $=_toPropertyKey$A($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$A(_){var $=_toPrimitive$A(_,"string");return _typeof$B($)=="symbol"?$:$+""}function _toPrimitive$A(_,$){if(_typeof$B(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$B(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var EPSILON=1,TooltipBoundingBox=function(_){function $(){var _e;_classCallCheck$g(this,$);for(var et=arguments.length,tt=new Array(et),rt=0;rt<et;rt++)tt[rt]=arguments[rt];return _e=_callSuper$c(this,$,[].concat(tt)),_defineProperty$z(_e,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),_defineProperty$z(_e,"handleKeyDown",function(nt){if(nt.key==="Escape"){var it,st,at,ot;_e.setState({dismissed:!0,dismissedAtCoordinate:{x:(it=(st=_e.props.coordinate)===null||st===void 0?void 0:st.x)!==null&&it!==void 0?it:0,y:(at=(ot=_e.props.coordinate)===null||ot===void 0?void 0:ot.y)!==null&&at!==void 0?at:0}})}}),_e}return _inherits$d($,_),_createClass$g($,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var et=this.wrapperNode.getBoundingClientRect();(Math.abs(et.width-this.state.lastBoundingBox.width)>EPSILON||Math.abs(et.height-this.state.lastBoundingBox.height)>EPSILON)&&this.setState({lastBoundingBox:{width:et.width,height:et.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var et,tt;this.props.active&&this.updateBBox(),this.state.dismissed&&(((et=this.props.coordinate)===null||et===void 0?void 0:et.x)!==this.state.dismissedAtCoordinate.x||((tt=this.props.coordinate)===null||tt===void 0?void 0:tt.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var et=this,tt=this.props,rt=tt.active,nt=tt.allowEscapeViewBox,it=tt.animationDuration,st=tt.animationEasing,at=tt.children,ot=tt.coordinate,dt=tt.hasPayload,ht=tt.isAnimationActive,yt=tt.offset,vt=tt.position,xt=tt.reverseDirection,wt=tt.useTranslate3d,Et=tt.viewBox,At=tt.wrapperStyle,jt=getTooltipTranslate({allowEscapeViewBox:nt,coordinate:ot,offsetTopLeft:yt,position:vt,reverseDirection:xt,tooltipBox:this.state.lastBoundingBox,useTranslate3d:wt,viewBox:Et}),kt=jt.cssClasses,Lt=jt.cssProperties,Bt=_objectSpread$v(_objectSpread$v({transition:ht&&rt?"transform ".concat(it,"ms ").concat(st):void 0},Lt),{},{pointerEvents:"none",visibility:!this.state.dismissed&&rt&&dt?"visible":"hidden",position:"absolute",top:0,left:0},At);return React.createElement("div",{tabIndex:-1,className:kt,style:Bt,ref:function(er){et.wrapperNode=er}},at)}}])}(reactExports.PureComponent),parseIsSsrByDefault=function _(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Global={isSsr:parseIsSsrByDefault(),get:function _($){return Global[$]},set:function _($,_e){if(typeof $=="string")Global[$]=_e;else{var et=Object.keys($);et&&et.length&&et.forEach(function(tt){Global[tt]=$[tt]})}}};function _typeof$A(_){"@babel/helpers - typeof";return _typeof$A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$A(_)}function ownKeys$u(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$u(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$u(Object(_e),!0).forEach(function(et){_defineProperty$y(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$u(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _classCallCheck$f(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties$f(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,_toPropertyKey$z(et.key),et)}}function _createClass$f(_,$,_e){return $&&_defineProperties$f(_.prototype,$),Object.defineProperty(_,"prototype",{writable:!1}),_}function _callSuper$b(_,$,_e){return $=_getPrototypeOf$c($),_possibleConstructorReturn$c(_,_isNativeReflectConstruct$c()?Reflect.construct($,_e||[],_getPrototypeOf$c(_).constructor):$.apply(_,_e))}function _possibleConstructorReturn$c(_,$){if($&&(_typeof$A($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$c(_)}function _assertThisInitialized$c(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _isNativeReflectConstruct$c(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$c=function(){return!!_})()}function _getPrototypeOf$c(_){return _getPrototypeOf$c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},_getPrototypeOf$c(_)}function _inherits$c(_,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create($&&$.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),$&&_setPrototypeOf$c(_,$)}function _setPrototypeOf$c(_,$){return _setPrototypeOf$c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(et,tt){return et.__proto__=tt,et},_setPrototypeOf$c(_,$)}function _defineProperty$y(_,$,_e){return $=_toPropertyKey$z($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$z(_){var $=_toPrimitive$z(_,"string");return _typeof$A($)=="symbol"?$:$+""}function _toPrimitive$z(_,$){if(_typeof$A(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$A(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}function defaultUniqBy(_){return _.dataKey}function renderContent(_,$){return React.isValidElement(_)?React.cloneElement(_,$):typeof _=="function"?React.createElement(_,$):React.createElement(DefaultTooltipContent,$)}var Tooltip=function(_){function $(){return _classCallCheck$f(this,$),_callSuper$b(this,$,arguments)}return _inherits$c($,_),_createClass$f($,[{key:"render",value:function(){var et=this,tt=this.props,rt=tt.active,nt=tt.allowEscapeViewBox,it=tt.animationDuration,st=tt.animationEasing,at=tt.content,ot=tt.coordinate,dt=tt.filterNull,ht=tt.isAnimationActive,yt=tt.offset,vt=tt.payload,xt=tt.payloadUniqBy,wt=tt.position,Et=tt.reverseDirection,At=tt.useTranslate3d,jt=tt.viewBox,kt=tt.wrapperStyle,Lt=vt??[];dt&&Lt.length&&(Lt=getUniqPayload(vt.filter(function(Gt){return Gt.value!=null&&(Gt.hide!==!0||et.props.includeHidden)}),xt,defaultUniqBy));var Bt=Lt.length>0;return React.createElement(TooltipBoundingBox,{allowEscapeViewBox:nt,animationDuration:it,animationEasing:st,isAnimationActive:ht,active:rt,coordinate:ot,hasPayload:Bt,offset:yt,position:wt,reverseDirection:Et,useTranslate3d:At,viewBox:jt,wrapperStyle:kt},renderContent(at,_objectSpread$u(_objectSpread$u({},this.props),{},{payload:Lt})))}}])}(reactExports.PureComponent);_defineProperty$y(Tooltip,"displayName","Tooltip");_defineProperty$y(Tooltip,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Global.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var root=_root,now$1=function(){return root.Date.now()},now_1=now$1,reWhitespace=/\s/;function trimmedEndIndex$1(_){for(var $=_.length;$--&&reWhitespace.test(_.charAt($)););return $}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(_){return _&&_.slice(0,trimmedEndIndex(_)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,baseTrim=_baseTrim,isObject$2=isObject_1,isSymbol$1=isSymbol_1,NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$2(_){if(typeof _=="number")return _;if(isSymbol$1(_))return NAN;if(isObject$2(_)){var $=typeof _.valueOf=="function"?_.valueOf():_;_=isObject$2($)?$+"":$}if(typeof _!="string")return _===0?_:+_;_=baseTrim(_);var _e=reIsBinary.test(_);return _e||reIsOctal.test(_)?freeParseInt(_.slice(2),_e?2:8):reIsBadHex.test(_)?NAN:+_}var toNumber_1=toNumber$2,isObject$1=isObject_1,now=now_1,toNumber$1=toNumber_1,FUNC_ERROR_TEXT$1="Expected a function",nativeMax$2=Math.max,nativeMin=Math.min;function debounce$1(_,$,_e){var et,tt,rt,nt,it,st,at=0,ot=!1,dt=!1,ht=!0;if(typeof _!="function")throw new TypeError(FUNC_ERROR_TEXT$1);$=toNumber$1($)||0,isObject$1(_e)&&(ot=!!_e.leading,dt="maxWait"in _e,rt=dt?nativeMax$2(toNumber$1(_e.maxWait)||0,$):rt,ht="trailing"in _e?!!_e.trailing:ht);function yt(Bt){var Gt=et,er=tt;return et=tt=void 0,at=Bt,nt=_.apply(er,Gt),nt}function vt(Bt){return at=Bt,it=setTimeout(Et,$),ot?yt(Bt):nt}function xt(Bt){var Gt=Bt-st,er=Bt-at,tr=$-Gt;return dt?nativeMin(tr,rt-er):tr}function wt(Bt){var Gt=Bt-st,er=Bt-at;return st===void 0||Gt>=$||Gt<0||dt&&er>=rt}function Et(){var Bt=now();if(wt(Bt))return At(Bt);it=setTimeout(Et,xt(Bt))}function At(Bt){return it=void 0,ht&&et?yt(Bt):(et=tt=void 0,nt)}function jt(){it!==void 0&&clearTimeout(it),at=0,et=st=tt=it=void 0}function kt(){return it===void 0?nt:At(now())}function Lt(){var Bt=now(),Gt=wt(Bt);if(et=arguments,tt=this,st=Bt,Gt){if(it===void 0)return vt(st);if(dt)return clearTimeout(it),it=setTimeout(Et,$),yt(st)}return it===void 0&&(it=setTimeout(Et,$)),nt}return Lt.cancel=jt,Lt.flush=kt,Lt}var debounce_1=debounce$1,debounce=debounce_1,isObject=isObject_1,FUNC_ERROR_TEXT="Expected a function";function throttle(_,$,_e){var et=!0,tt=!0;if(typeof _!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject(_e)&&(et="leading"in _e?!!_e.leading:et,tt="trailing"in _e?!!_e.trailing:tt),debounce(_,$,{leading:et,maxWait:$,trailing:tt})}var throttle_1=throttle;const throttle$1=getDefaultExportFromCjs$1(throttle_1);function _typeof$z(_){"@babel/helpers - typeof";return _typeof$z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$z(_)}function ownKeys$t(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$t(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$t(Object(_e),!0).forEach(function(et){_defineProperty$x(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$t(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$x(_,$,_e){return $=_toPropertyKey$y($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$y(_){var $=_toPrimitive$y(_,"string");return _typeof$z($)=="symbol"?$:$+""}function _toPrimitive$y(_,$){if(_typeof$z(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$z(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}function _slicedToArray$a(_,$){return _arrayWithHoles$b(_)||_iterableToArrayLimit$a(_,$)||_unsupportedIterableToArray$h(_,$)||_nonIterableRest$b()}function _nonIterableRest$b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$h(_,$){if(_){if(typeof _=="string")return _arrayLikeToArray$h(_,$);var _e=Object.prototype.toString.call(_).slice(8,-1);if(_e==="Object"&&_.constructor&&(_e=_.constructor.name),_e==="Map"||_e==="Set")return Array.from(_);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray$h(_,$)}}function _arrayLikeToArray$h(_,$){($==null||$>_.length)&&($=_.length);for(var _e=0,et=new Array($);_e<$;_e++)et[_e]=_[_e];return et}function _iterableToArrayLimit$a(_,$){var _e=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(_e!=null){var et,tt,rt,nt,it=[],st=!0,at=!1;try{if(rt=(_e=_e.call(_)).next,$!==0)for(;!(st=(et=rt.call(_e)).done)&&(it.push(et.value),it.length!==$);st=!0);}catch(ot){at=!0,tt=ot}finally{try{if(!st&&_e.return!=null&&(nt=_e.return(),Object(nt)!==nt))return}finally{if(at)throw tt}}return it}}function _arrayWithHoles$b(_){if(Array.isArray(_))return _}var ResponsiveContainer=reactExports.forwardRef(function(_,$){var _e=_.aspect,et=_.initialDimension,tt=et===void 0?{width:-1,height:-1}:et,rt=_.width,nt=rt===void 0?"100%":rt,it=_.height,st=it===void 0?"100%":it,at=_.minWidth,ot=at===void 0?0:at,dt=_.minHeight,ht=_.maxHeight,yt=_.children,vt=_.debounce,xt=vt===void 0?0:vt,wt=_.id,Et=_.className,At=_.onResize,jt=_.style,kt=jt===void 0?{}:jt,Lt=reactExports.useRef(null),Bt=reactExports.useRef();Bt.current=At,reactExports.useImperativeHandle($,function(){return Object.defineProperty(Lt.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),Lt.current},configurable:!0})});var Gt=reactExports.useState({containerWidth:tt.width,containerHeight:tt.height}),er=_slicedToArray$a(Gt,2),tr=er[0],ar=er[1],Mt=reactExports.useCallback(function(mt,gt){ar(function(bt){var St=Math.round(mt),Nt=Math.round(gt);return bt.containerWidth===St&&bt.containerHeight===Nt?bt:{containerWidth:St,containerHeight:Nt}})},[]);reactExports.useEffect(function(){var mt=function(Tt){var pt,Rt=Tt[0].contentRect,zt=Rt.width,Yt=Rt.height;Mt(zt,Yt),(pt=Bt.current)===null||pt===void 0||pt.call(Bt,zt,Yt)};xt>0&&(mt=throttle$1(mt,xt,{trailing:!0,leading:!1}));var gt=new ResizeObserver(mt),bt=Lt.current.getBoundingClientRect(),St=bt.width,Nt=bt.height;return Mt(St,Nt),gt.observe(Lt.current),function(){gt.disconnect()}},[Mt,xt]);var lt=reactExports.useMemo(function(){var mt=tr.containerWidth,gt=tr.containerHeight;if(mt<0||gt<0)return null;warn(isPercent(nt)||isPercent(st),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,nt,st),warn(!_e||_e>0,"The aspect(%s) must be greater than zero.",_e);var bt=isPercent(nt)?mt:nt,St=isPercent(st)?gt:st;_e&&_e>0&&(bt?St=bt/_e:St&&(bt=St*_e),ht&&St>ht&&(St=ht)),warn(bt>0||St>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,bt,St,nt,st,ot,dt,_e);var Nt=!Array.isArray(yt)&&getDisplayName(yt.type).endsWith("Chart");return React.Children.map(yt,function(Pt){return reactIsExports.isElement(Pt)?reactExports.cloneElement(Pt,_objectSpread$t({width:bt,height:St},Nt?{style:_objectSpread$t({height:"100%",width:"100%",maxHeight:St,maxWidth:bt},Pt.props.style)}:{})):Pt})},[_e,yt,st,ht,dt,ot,tr,nt]);return React.createElement("div",{id:wt?"".concat(wt):void 0,className:clsx("recharts-responsive-container",Et),style:_objectSpread$t(_objectSpread$t({},kt),{},{width:nt,height:st,minWidth:ot,minHeight:dt,maxHeight:ht}),ref:Lt},lt)}),Cell=function _($){return null};Cell.displayName="Cell";function _typeof$y(_){"@babel/helpers - typeof";return _typeof$y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$y(_)}function ownKeys$s(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$s(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$s(Object(_e),!0).forEach(function(et){_defineProperty$w(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$s(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$w(_,$,_e){return $=_toPropertyKey$x($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$x(_){var $=_toPrimitive$x(_,"string");return _typeof$y($)=="symbol"?$:$+""}function _toPrimitive$x(_,$){if(_typeof$y(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$y(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var stringCache={widthCache:{},cacheCount:0},MAX_CACHE_NUM=2e3,SPAN_STYLE={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MEASUREMENT_SPAN_ID="recharts_measurement_span";function removeInvalidKeys(_){var $=_objectSpread$s({},_);return Object.keys($).forEach(function(_e){$[_e]||delete $[_e]}),$}var getStringSize=function _($){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if($==null||Global.isSsr)return{width:0,height:0};var et=removeInvalidKeys(_e),tt=JSON.stringify({text:$,copyStyle:et});if(stringCache.widthCache[tt])return stringCache.widthCache[tt];try{var rt=document.getElementById(MEASUREMENT_SPAN_ID);rt||(rt=document.createElement("span"),rt.setAttribute("id",MEASUREMENT_SPAN_ID),rt.setAttribute("aria-hidden","true"),document.body.appendChild(rt));var nt=_objectSpread$s(_objectSpread$s({},SPAN_STYLE),et);Object.assign(rt.style,nt),rt.textContent="".concat($);var it=rt.getBoundingClientRect(),st={width:it.width,height:it.height};return stringCache.widthCache[tt]=st,++stringCache.cacheCount>MAX_CACHE_NUM&&(stringCache.cacheCount=0,stringCache.widthCache={}),st}catch{return{width:0,height:0}}},getOffset=function _($){return{top:$.top+window.scrollY-document.documentElement.clientTop,left:$.left+window.scrollX-document.documentElement.clientLeft}};function _typeof$x(_){"@babel/helpers - typeof";return _typeof$x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$x(_)}function _slicedToArray$9(_,$){return _arrayWithHoles$a(_)||_iterableToArrayLimit$9(_,$)||_unsupportedIterableToArray$g(_,$)||_nonIterableRest$a()}function _nonIterableRest$a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$g(_,$){if(_){if(typeof _=="string")return _arrayLikeToArray$g(_,$);var _e=Object.prototype.toString.call(_).slice(8,-1);if(_e==="Object"&&_.constructor&&(_e=_.constructor.name),_e==="Map"||_e==="Set")return Array.from(_);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray$g(_,$)}}function _arrayLikeToArray$g(_,$){($==null||$>_.length)&&($=_.length);for(var _e=0,et=new Array($);_e<$;_e++)et[_e]=_[_e];return et}function _iterableToArrayLimit$9(_,$){var _e=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(_e!=null){var et,tt,rt,nt,it=[],st=!0,at=!1;try{if(rt=(_e=_e.call(_)).next,$===0){if(Object(_e)!==_e)return;st=!1}else for(;!(st=(et=rt.call(_e)).done)&&(it.push(et.value),it.length!==$);st=!0);}catch(ot){at=!0,tt=ot}finally{try{if(!st&&_e.return!=null&&(nt=_e.return(),Object(nt)!==nt))return}finally{if(at)throw tt}}return it}}function _arrayWithHoles$a(_){if(Array.isArray(_))return _}function _classCallCheck$e(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties$e(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,_toPropertyKey$w(et.key),et)}}function _createClass$e(_,$,_e){return $&&_defineProperties$e(_.prototype,$),_e&&_defineProperties$e(_,_e),Object.defineProperty(_,"prototype",{writable:!1}),_}function _toPropertyKey$w(_){var $=_toPrimitive$w(_,"string");return _typeof$x($)=="symbol"?$:$+""}function _toPrimitive$w(_,$){if(_typeof$x(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$);if(_typeof$x(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_)}var MULTIPLY_OR_DIVIDE_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ADD_OR_SUBTRACT_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CSS_LENGTH_UNIT_REGEX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,NUM_SPLIT_REGEX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,CONVERSION_RATES={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FIXED_CSS_LENGTH_UNITS=Object.keys(CONVERSION_RATES),STR_NAN="NaN";function convertToPx(_,$){return _*CONVERSION_RATES[$]}var DecimalCSS=function(){function _($,_e){_classCallCheck$e(this,_),this.num=$,this.unit=_e,this.num=$,this.unit=_e,Number.isNaN($)&&(this.unit=""),_e!==""&&!CSS_LENGTH_UNIT_REGEX.test(_e)&&(this.num=NaN,this.unit=""),FIXED_CSS_LENGTH_UNITS.includes(_e)&&(this.num=convertToPx($,_e),this.unit="px")}return _createClass$e(_,[{key:"add",value:function(_e){return this.unit!==_e.unit?new _(NaN,""):new _(this.num+_e.num,this.unit)}},{key:"subtract",value:function(_e){return this.unit!==_e.unit?new _(NaN,""):new _(this.num-_e.num,this.unit)}},{key:"multiply",value:function(_e){return this.unit!==""&&_e.unit!==""&&this.unit!==_e.unit?new _(NaN,""):new _(this.num*_e.num,this.unit||_e.unit)}},{key:"divide",value:function(_e){return this.unit!==""&&_e.unit!==""&&this.unit!==_e.unit?new _(NaN,""):new _(this.num/_e.num,this.unit||_e.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(_e){var et,tt=(et=NUM_SPLIT_REGEX.exec(_e))!==null&&et!==void 0?et:[],rt=_slicedToArray$9(tt,3),nt=rt[1],it=rt[2];return new _(parseFloat(nt),it??"")}}])}();function calculateArithmetic(_){if(_.includes(STR_NAN))return STR_NAN;for(var $=_;$.includes("*")||$.includes("/");){var _e,et=(_e=MULTIPLY_OR_DIVIDE_REGEX.exec($))!==null&&_e!==void 0?_e:[],tt=_slicedToArray$9(et,4),rt=tt[1],nt=tt[2],it=tt[3],st=DecimalCSS.parse(rt??""),at=DecimalCSS.parse(it??""),ot=nt==="*"?st.multiply(at):st.divide(at);if(ot.isNaN())return STR_NAN;$=$.replace(MULTIPLY_OR_DIVIDE_REGEX,ot.toString())}for(;$.includes("+")||/.-\d+(?:\.\d+)?/.test($);){var dt,ht=(dt=ADD_OR_SUBTRACT_REGEX.exec($))!==null&&dt!==void 0?dt:[],yt=_slicedToArray$9(ht,4),vt=yt[1],xt=yt[2],wt=yt[3],Et=DecimalCSS.parse(vt??""),At=DecimalCSS.parse(wt??""),jt=xt==="+"?Et.add(At):Et.subtract(At);if(jt.isNaN())return STR_NAN;$=$.replace(ADD_OR_SUBTRACT_REGEX,jt.toString())}return $}var PARENTHESES_REGEX=/\(([^()]*)\)/;function calculateParentheses(_){for(var $=_;$.includes("(");){var _e=PARENTHESES_REGEX.exec($),et=_slicedToArray$9(_e,2),tt=et[1];$=$.replace(PARENTHESES_REGEX,calculateArithmetic(tt))}return $}function evaluateExpression(_){var $=_.replace(/\s+/g,"");return $=calculateParentheses($),$=calculateArithmetic($),$}function safeEvaluateExpression(_){try{return evaluateExpression(_)}catch{return STR_NAN}}function reduceCSSCalc(_){var $=safeEvaluateExpression(_.slice(5,-1));return $===STR_NAN?"":$}var _excluded$c=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_excluded2$5=["dx","dy","angle","className","breakAll"];function _extends$l(){return _extends$l=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$l.apply(this,arguments)}function _objectWithoutProperties$c(_,$){if(_==null)return{};var _e=_objectWithoutPropertiesLoose$c(_,$),et,tt;if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_);for(tt=0;tt<rt.length;tt++)et=rt[tt],!($.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call(_,et)&&(_e[et]=_[et])}return _e}function _objectWithoutPropertiesLoose$c(_,$){if(_==null)return{};var _e={};for(var et in _)if(Object.prototype.hasOwnProperty.call(_,et)){if($.indexOf(et)>=0)continue;_e[et]=_[et]}return _e}function _slicedToArray$8(_,$){return _arrayWithHoles$9(_)||_iterableToArrayLimit$8(_,$)||_unsupportedIterableToArray$f(_,$)||_nonIterableRest$9()}function _nonIterableRest$9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$f(_,$){if(_){if(typeof _=="string")return _arrayLikeToArray$f(_,$);var _e=Object.prototype.toString.call(_).slice(8,-1);if(_e==="Object"&&_.constructor&&(_e=_.constructor.name),_e==="Map"||_e==="Set")return Array.from(_);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray$f(_,$)}}function _arrayLikeToArray$f(_,$){($==null||$>_.length)&&($=_.length);for(var _e=0,et=new Array($);_e<$;_e++)et[_e]=_[_e];return et}function _iterableToArrayLimit$8(_,$){var _e=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(_e!=null){var et,tt,rt,nt,it=[],st=!0,at=!1;try{if(rt=(_e=_e.call(_)).next,$===0){if(Object(_e)!==_e)return;st=!1}else for(;!(st=(et=rt.call(_e)).done)&&(it.push(et.value),it.length!==$);st=!0);}catch(ot){at=!0,tt=ot}finally{try{if(!st&&_e.return!=null&&(nt=_e.return(),Object(nt)!==nt))return}finally{if(at)throw tt}}return it}}function _arrayWithHoles$9(_){if(Array.isArray(_))return _}var BREAKING_SPACES=/[ \f\n\r\t\v\u2028\u2029]+/,calculateWordWidths=function _($){var _e=$.children,et=$.breakAll,tt=$.style;try{var rt=[];isNil$1(_e)||(et?rt=_e.toString().split(""):rt=_e.toString().split(BREAKING_SPACES));var nt=rt.map(function(st){return{word:st,width:getStringSize(st,tt).width}}),it=et?0:getStringSize(" ",tt).width;return{wordsWithComputedWidth:nt,spaceWidth:it}}catch{return null}},calculateWordsByLines=function _($,_e,et,tt,rt){var nt=$.maxLines,it=$.children,st=$.style,at=$.breakAll,ot=isNumber(nt),dt=it,ht=function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return bt.reduce(function(St,Nt){var Pt=Nt.word,Tt=Nt.width,pt=St[St.length-1];if(pt&&(tt==null||rt||pt.width+Tt+et<Number(tt)))pt.words.push(Pt),pt.width+=Tt+et;else{var Rt={words:[Pt],width:Tt};St.push(Rt)}return St},[])},yt=ht(_e),vt=function(bt){return bt.reduce(function(St,Nt){return St.width>Nt.width?St:Nt})};if(!ot)return yt;for(var xt="…",wt=function(bt){var St=dt.slice(0,bt),Nt=calculateWordWidths({breakAll:at,style:st,children:St+xt}).wordsWithComputedWidth,Pt=ht(Nt),Tt=Pt.length>nt||vt(Pt).width>Number(tt);return[Tt,Pt]},Et=0,At=dt.length-1,jt=0,kt;Et<=At&&jt<=dt.length-1;){var Lt=Math.floor((Et+At)/2),Bt=Lt-1,Gt=wt(Bt),er=_slicedToArray$8(Gt,2),tr=er[0],ar=er[1],Mt=wt(Lt),lt=_slicedToArray$8(Mt,1),mt=lt[0];if(!tr&&!mt&&(Et=Lt+1),tr&&mt&&(At=Lt-1),!tr&&mt){kt=ar;break}jt++}return kt||yt},getWordsWithoutCalculate=function _($){var _e=isNil$1($)?[]:$.toString().split(BREAKING_SPACES);return[{words:_e}]},getWordsByLines=function _($){var _e=$.width,et=$.scaleToFit,tt=$.children,rt=$.style,nt=$.breakAll,it=$.maxLines;if((_e||et)&&!Global.isSsr){var st,at,ot=calculateWordWidths({breakAll:nt,children:tt,style:rt});if(ot){var dt=ot.wordsWithComputedWidth,ht=ot.spaceWidth;st=dt,at=ht}else return getWordsWithoutCalculate(tt);return calculateWordsByLines({breakAll:nt,children:tt,maxLines:it,style:rt},st,at,_e,et)}return getWordsWithoutCalculate(tt)},DEFAULT_FILL="#808080",Text=function _($){var _e=$.x,et=_e===void 0?0:_e,tt=$.y,rt=tt===void 0?0:tt,nt=$.lineHeight,it=nt===void 0?"1em":nt,st=$.capHeight,at=st===void 0?"0.71em":st,ot=$.scaleToFit,dt=ot===void 0?!1:ot,ht=$.textAnchor,yt=ht===void 0?"start":ht,vt=$.verticalAnchor,xt=vt===void 0?"end":vt,wt=$.fill,Et=wt===void 0?DEFAULT_FILL:wt,At=_objectWithoutProperties$c($,_excluded$c),jt=reactExports.useMemo(function(){return getWordsByLines({breakAll:At.breakAll,children:At.children,maxLines:At.maxLines,scaleToFit:dt,style:At.style,width:At.width})},[At.breakAll,At.children,At.maxLines,dt,At.style,At.width]),kt=At.dx,Lt=At.dy,Bt=At.angle,Gt=At.className,er=At.breakAll,tr=_objectWithoutProperties$c(At,_excluded2$5);if(!isNumOrStr(et)||!isNumOrStr(rt))return null;var ar=et+(isNumber(kt)?kt:0),Mt=rt+(isNumber(Lt)?Lt:0),lt;switch(xt){case"start":lt=reduceCSSCalc("calc(".concat(at,")"));break;case"middle":lt=reduceCSSCalc("calc(".concat((jt.length-1)/2," * -").concat(it," + (").concat(at," / 2))"));break;default:lt=reduceCSSCalc("calc(".concat(jt.length-1," * -").concat(it,")"));break}var mt=[];if(dt){var gt=jt[0].width,bt=At.width;mt.push("scale(".concat((isNumber(bt)?bt/gt:1)/gt,")"))}return Bt&&mt.push("rotate(".concat(Bt,", ").concat(ar,", ").concat(Mt,")")),mt.length&&(tr.transform=mt.join(" ")),React.createElement("text",_extends$l({},filterProps(tr,!0),{x:ar,y:Mt,className:clsx("recharts-text",Gt),textAnchor:yt,fill:Et.includes("url")?DEFAULT_FILL:Et}),jt.map(function(St,Nt){var Pt=St.words.join(er?"":" ");return React.createElement("tspan",{x:ar,dy:Nt===0?lt:it,key:"".concat(Pt,"-").concat(Nt)},Pt)}))};function ascending(_,$){return _==null||$==null?NaN:_<$?-1:_>$?1:_>=$?0:NaN}function descending(_,$){return _==null||$==null?NaN:$<_?-1:$>_?1:$>=_?0:NaN}function bisector(_){let $,_e,et;_.length!==2?($=ascending,_e=(it,st)=>ascending(_(it),st),et=(it,st)=>_(it)-st):($=_===ascending||_===descending?_:zero$1,_e=_,et=_);function tt(it,st,at=0,ot=it.length){if(at<ot){if($(st,st)!==0)return ot;do{const dt=at+ot>>>1;_e(it[dt],st)<0?at=dt+1:ot=dt}while(at<ot)}return at}function rt(it,st,at=0,ot=it.length){if(at<ot){if($(st,st)!==0)return ot;do{const dt=at+ot>>>1;_e(it[dt],st)<=0?at=dt+1:ot=dt}while(at<ot)}return at}function nt(it,st,at=0,ot=it.length){const dt=tt(it,st,at,ot-1);return dt>at&&et(it[dt-1],st)>-et(it[dt],st)?dt-1:dt}return{left:tt,center:nt,right:rt}}function zero$1(){return 0}function number$2(_){return _===null?NaN:+_}function*numbers(_,$){for(let _e of _)_e!=null&&(_e=+_e)>=_e&&(yield _e)}const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right;bisector(number$2).center;class InternMap extends Map{constructor($,_e=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:_e}}),$!=null)for(const[et,tt]of $)this.set(et,tt)}get($){return super.get(intern_get(this,$))}has($){return super.has(intern_get(this,$))}set($,_e){return super.set(intern_set(this,$),_e)}delete($){return super.delete(intern_delete(this,$))}}function intern_get({_intern:_,_key:$},_e){const et=$(_e);return _.has(et)?_.get(et):_e}function intern_set({_intern:_,_key:$},_e){const et=$(_e);return _.has(et)?_.get(et):(_.set(et,_e),_e)}function intern_delete({_intern:_,_key:$},_e){const et=$(_e);return _.has(et)&&(_e=_.get(et),_.delete(et)),_e}function keyof(_){return _!==null&&typeof _=="object"?_.valueOf():_}function compareDefined(_=ascending){if(_===ascending)return ascendingDefined;if(typeof _!="function")throw new TypeError("compare is not a function");return($,_e)=>{const et=_($,_e);return et||et===0?et:(_(_e,_e)===0)-(_($,$)===0)}}function ascendingDefined(_,$){return(_==null||!(_>=_))-($==null||!($>=$))||(_<$?-1:_>$?1:0)}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(_,$,_e){const et=($-_)/Math.max(0,_e),tt=Math.floor(Math.log10(et)),rt=et/Math.pow(10,tt),nt=rt>=e10?10:rt>=e5?5:rt>=e2?2:1;let it,st,at;return tt<0?(at=Math.pow(10,-tt)/nt,it=Math.round(_*at),st=Math.round($*at),it/at<_&&++it,st/at>$&&--st,at=-at):(at=Math.pow(10,tt)*nt,it=Math.round(_/at),st=Math.round($/at),it*at<_&&++it,st*at>$&&--st),st<it&&.5<=_e&&_e<2?tickSpec(_,$,_e*2):[it,st,at]}function ticks(_,$,_e){if($=+$,_=+_,_e=+_e,!(_e>0))return[];if(_===$)return[_];const et=$<_,[tt,rt,nt]=et?tickSpec($,_,_e):tickSpec(_,$,_e);if(!(rt>=tt))return[];const it=rt-tt+1,st=new Array(it);if(et)if(nt<0)for(let at=0;at<it;++at)st[at]=(rt-at)/-nt;else for(let at=0;at<it;++at)st[at]=(rt-at)*nt;else if(nt<0)for(let at=0;at<it;++at)st[at]=(tt+at)/-nt;else for(let at=0;at<it;++at)st[at]=(tt+at)*nt;return st}function tickIncrement(_,$,_e){return $=+$,_=+_,_e=+_e,tickSpec(_,$,_e)[2]}function tickStep(_,$,_e){$=+$,_=+_,_e=+_e;const et=$<_,tt=et?tickIncrement($,_,_e):tickIncrement(_,$,_e);return(et?-1:1)*(tt<0?1/-tt:tt)}function max$2(_,$){let _e;for(const et of _)et!=null&&(_e<et||_e===void 0&&et>=et)&&(_e=et);return _e}function min$2(_,$){let _e;for(const et of _)et!=null&&(_e>et||_e===void 0&&et>=et)&&(_e=et);return _e}function quickselect(_,$,_e=0,et=1/0,tt){if($=Math.floor($),_e=Math.floor(Math.max(0,_e)),et=Math.floor(Math.min(_.length-1,et)),!(_e<=$&&$<=et))return _;for(tt=tt===void 0?ascendingDefined:compareDefined(tt);et>_e;){if(et-_e>600){const st=et-_e+1,at=$-_e+1,ot=Math.log(st),dt=.5*Math.exp(2*ot/3),ht=.5*Math.sqrt(ot*dt*(st-dt)/st)*(at-st/2<0?-1:1),yt=Math.max(_e,Math.floor($-at*dt/st+ht)),vt=Math.min(et,Math.floor($+(st-at)*dt/st+ht));quickselect(_,$,yt,vt,tt)}const rt=_[$];let nt=_e,it=et;for(swap(_,_e,$),tt(_[et],rt)>0&&swap(_,_e,et);nt<it;){for(swap(_,nt,it),++nt,--it;tt(_[nt],rt)<0;)++nt;for(;tt(_[it],rt)>0;)--it}tt(_[_e],rt)===0?swap(_,_e,it):(++it,swap(_,it,et)),it<=$&&(_e=it+1),$<=it&&(et=it-1)}return _}function swap(_,$,_e){const et=_[$];_[$]=_[_e],_[_e]=et}function quantile$1(_,$,_e){if(_=Float64Array.from(numbers(_)),!(!(et=_.length)||isNaN($=+$))){if($<=0||et<2)return min$2(_);if($>=1)return max$2(_);var et,tt=(et-1)*$,rt=Math.floor(tt),nt=max$2(quickselect(_,rt).subarray(0,rt+1)),it=min$2(_.subarray(rt+1));return nt+(it-nt)*(tt-rt)}}function quantileSorted(_,$,_e=number$2){if(!(!(et=_.length)||isNaN($=+$))){if($<=0||et<2)return+_e(_[0],0,_);if($>=1)return+_e(_[et-1],et-1,_);var et,tt=(et-1)*$,rt=Math.floor(tt),nt=+_e(_[rt],rt,_),it=+_e(_[rt+1],rt+1,_);return nt+(it-nt)*(tt-rt)}}function range$3(_,$,_e){_=+_,$=+$,_e=(tt=arguments.length)<2?($=_,_=0,1):tt<3?1:+_e;for(var et=-1,tt=Math.max(0,Math.ceil(($-_)/_e))|0,rt=new Array(tt);++et<tt;)rt[et]=_+et*_e;return rt}function initRange(_,$){switch(arguments.length){case 0:break;case 1:this.range(_);break;default:this.range($).domain(_);break}return this}function initInterpolator(_,$){switch(arguments.length){case 0:break;case 1:{typeof _=="function"?this.interpolator(_):this.range(_);break}default:{this.domain(_),typeof $=="function"?this.interpolator($):this.range($);break}}return this}const implicit=Symbol("implicit");function ordinal(){var _=new InternMap,$=[],_e=[],et=implicit;function tt(rt){let nt=_.get(rt);if(nt===void 0){if(et!==implicit)return et;_.set(rt,nt=$.push(rt)-1)}return _e[nt%_e.length]}return tt.domain=function(rt){if(!arguments.length)return $.slice();$=[],_=new InternMap;for(const nt of rt)_.has(nt)||_.set(nt,$.push(nt)-1);return tt},tt.range=function(rt){return arguments.length?(_e=Array.from(rt),tt):_e.slice()},tt.unknown=function(rt){return arguments.length?(et=rt,tt):et},tt.copy=function(){return ordinal($,_e).unknown(et)},initRange.apply(tt,arguments),tt}function band(){var _=ordinal().unknown(void 0),$=_.domain,_e=_.range,et=0,tt=1,rt,nt,it=!1,st=0,at=0,ot=.5;delete _.unknown;function dt(){var ht=$().length,yt=tt<et,vt=yt?tt:et,xt=yt?et:tt;rt=(xt-vt)/Math.max(1,ht-st+at*2),it&&(rt=Math.floor(rt)),vt+=(xt-vt-rt*(ht-st))*ot,nt=rt*(1-st),it&&(vt=Math.round(vt),nt=Math.round(nt));var wt=range$3(ht).map(function(Et){return vt+rt*Et});return _e(yt?wt.reverse():wt)}return _.domain=function(ht){return arguments.length?($(ht),dt()):$()},_.range=function(ht){return arguments.length?([et,tt]=ht,et=+et,tt=+tt,dt()):[et,tt]},_.rangeRound=function(ht){return[et,tt]=ht,et=+et,tt=+tt,it=!0,dt()},_.bandwidth=function(){return nt},_.step=function(){return rt},_.round=function(ht){return arguments.length?(it=!!ht,dt()):it},_.padding=function(ht){return arguments.length?(st=Math.min(1,at=+ht),dt()):st},_.paddingInner=function(ht){return arguments.length?(st=Math.min(1,ht),dt()):st},_.paddingOuter=function(ht){return arguments.length?(at=+ht,dt()):at},_.align=function(ht){return arguments.length?(ot=Math.max(0,Math.min(1,ht)),dt()):ot},_.copy=function(){return band($(),[et,tt]).round(it).paddingInner(st).paddingOuter(at).align(ot)},initRange.apply(dt(),arguments)}function pointish(_){var $=_.copy;return _.padding=_.paddingOuter,delete _.paddingInner,delete _.paddingOuter,_.copy=function(){return pointish($())},_}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}function define(_,$,_e){_.prototype=$.prototype=_e,_e.constructor=_}function extend(_,$){var _e=Object.create(_.prototype);for(var et in $)_e[et]=$[et];return _e}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(_){return Object.assign(new this.constructor,this,_)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(_){var $,_e;return _=(_+"").trim().toLowerCase(),($=reHex.exec(_))?(_e=$[1].length,$=parseInt($[1],16),_e===6?rgbn($):_e===3?new Rgb($>>8&15|$>>4&240,$>>4&15|$&240,($&15)<<4|$&15,1):_e===8?rgba($>>24&255,$>>16&255,$>>8&255,($&255)/255):_e===4?rgba($>>12&15|$>>8&240,$>>8&15|$>>4&240,$>>4&15|$&240,(($&15)<<4|$&15)/255):null):($=reRgbInteger.exec(_))?new Rgb($[1],$[2],$[3],1):($=reRgbPercent.exec(_))?new Rgb($[1]*255/100,$[2]*255/100,$[3]*255/100,1):($=reRgbaInteger.exec(_))?rgba($[1],$[2],$[3],$[4]):($=reRgbaPercent.exec(_))?rgba($[1]*255/100,$[2]*255/100,$[3]*255/100,$[4]):($=reHslPercent.exec(_))?hsla($[1],$[2]/100,$[3]/100,1):($=reHslaPercent.exec(_))?hsla($[1],$[2]/100,$[3]/100,$[4]):named.hasOwnProperty(_)?rgbn(named[_]):_==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(_){return new Rgb(_>>16&255,_>>8&255,_&255,1)}function rgba(_,$,_e,et){return et<=0&&(_=$=_e=NaN),new Rgb(_,$,_e,et)}function rgbConvert(_){return _ instanceof Color||(_=color(_)),_?(_=_.rgb(),new Rgb(_.r,_.g,_.b,_.opacity)):new Rgb}function rgb$1(_,$,_e,et){return arguments.length===1?rgbConvert(_):new Rgb(_,$,_e,et??1)}function Rgb(_,$,_e,et){this.r=+_,this.g=+$,this.b=+_e,this.opacity=+et}define(Rgb,rgb$1,extend(Color,{brighter(_){return _=_==null?brighter:Math.pow(brighter,_),new Rgb(this.r*_,this.g*_,this.b*_,this.opacity)},darker(_){return _=_==null?darker:Math.pow(darker,_),new Rgb(this.r*_,this.g*_,this.b*_,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const _=clampa(this.opacity);return`${_===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${_===1?")":`, ${_})`}`}function clampa(_){return isNaN(_)?1:Math.max(0,Math.min(1,_))}function clampi(_){return Math.max(0,Math.min(255,Math.round(_)||0))}function hex(_){return _=clampi(_),(_<16?"0":"")+_.toString(16)}function hsla(_,$,_e,et){return et<=0?_=$=_e=NaN:_e<=0||_e>=1?_=$=NaN:$<=0&&(_=NaN),new Hsl(_,$,_e,et)}function hslConvert(_){if(_ instanceof Hsl)return new Hsl(_.h,_.s,_.l,_.opacity);if(_ instanceof Color||(_=color(_)),!_)return new Hsl;if(_ instanceof Hsl)return _;_=_.rgb();var $=_.r/255,_e=_.g/255,et=_.b/255,tt=Math.min($,_e,et),rt=Math.max($,_e,et),nt=NaN,it=rt-tt,st=(rt+tt)/2;return it?($===rt?nt=(_e-et)/it+(_e<et)*6:_e===rt?nt=(et-$)/it+2:nt=($-_e)/it+4,it/=st<.5?rt+tt:2-rt-tt,nt*=60):it=st>0&&st<1?0:nt,new Hsl(nt,it,st,_.opacity)}function hsl(_,$,_e,et){return arguments.length===1?hslConvert(_):new Hsl(_,$,_e,et??1)}function Hsl(_,$,_e,et){this.h=+_,this.s=+$,this.l=+_e,this.opacity=+et}define(Hsl,hsl,extend(Color,{brighter(_){return _=_==null?brighter:Math.pow(brighter,_),new Hsl(this.h,this.s,this.l*_,this.opacity)},darker(_){return _=_==null?darker:Math.pow(darker,_),new Hsl(this.h,this.s,this.l*_,this.opacity)},rgb(){var _=this.h%360+(this.h<0)*360,$=isNaN(_)||isNaN(this.s)?0:this.s,_e=this.l,et=_e+(_e<.5?_e:1-_e)*$,tt=2*_e-et;return new Rgb(hsl2rgb(_>=240?_-240:_+120,tt,et),hsl2rgb(_,tt,et),hsl2rgb(_<120?_+240:_-120,tt,et),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const _=clampa(this.opacity);return`${_===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${_===1?")":`, ${_})`}`}}));function clamph(_){return _=(_||0)%360,_<0?_+360:_}function clampt(_){return Math.max(0,Math.min(1,_||0))}function hsl2rgb(_,$,_e){return(_<60?$+(_e-$)*_/60:_<180?_e:_<240?$+(_e-$)*(240-_)/60:$)*255}const constant=_=>()=>_;function linear$1(_,$){return function(_e){return _+_e*$}}function exponential(_,$,_e){return _=Math.pow(_,_e),$=Math.pow($,_e)-_,_e=1/_e,function(et){return Math.pow(_+et*$,_e)}}function gamma(_){return(_=+_)==1?nogamma:function($,_e){return _e-$?exponential($,_e,_):constant(isNaN($)?_e:$)}}function nogamma(_,$){var _e=$-_;return _e?linear$1(_,_e):constant(isNaN(_)?$:_)}const rgb=function _($){var _e=gamma($);function et(tt,rt){var nt=_e((tt=rgb$1(tt)).r,(rt=rgb$1(rt)).r),it=_e(tt.g,rt.g),st=_e(tt.b,rt.b),at=nogamma(tt.opacity,rt.opacity);return function(ot){return tt.r=nt(ot),tt.g=it(ot),tt.b=st(ot),tt.opacity=at(ot),tt+""}}return et.gamma=_,et}(1);function numberArray(_,$){$||($=[]);var _e=_?Math.min($.length,_.length):0,et=$.slice(),tt;return function(rt){for(tt=0;tt<_e;++tt)et[tt]=_[tt]*(1-rt)+$[tt]*rt;return et}}function isNumberArray(_){return ArrayBuffer.isView(_)&&!(_ instanceof DataView)}function genericArray(_,$){var _e=$?$.length:0,et=_?Math.min(_e,_.length):0,tt=new Array(et),rt=new Array(_e),nt;for(nt=0;nt<et;++nt)tt[nt]=interpolate(_[nt],$[nt]);for(;nt<_e;++nt)rt[nt]=$[nt];return function(it){for(nt=0;nt<et;++nt)rt[nt]=tt[nt](it);return rt}}function date$1(_,$){var _e=new Date;return _=+_,$=+$,function(et){return _e.setTime(_*(1-et)+$*et),_e}}function interpolateNumber$1(_,$){return _=+_,$=+$,function(_e){return _*(1-_e)+$*_e}}function object(_,$){var _e={},et={},tt;(_===null||typeof _!="object")&&(_={}),($===null||typeof $!="object")&&($={});for(tt in $)tt in _?_e[tt]=interpolate(_[tt],$[tt]):et[tt]=$[tt];return function(rt){for(tt in _e)et[tt]=_e[tt](rt);return et}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(_){return function(){return _}}function one(_){return function($){return _($)+""}}function string(_,$){var _e=reA.lastIndex=reB.lastIndex=0,et,tt,rt,nt=-1,it=[],st=[];for(_=_+"",$=$+"";(et=reA.exec(_))&&(tt=reB.exec($));)(rt=tt.index)>_e&&(rt=$.slice(_e,rt),it[nt]?it[nt]+=rt:it[++nt]=rt),(et=et[0])===(tt=tt[0])?it[nt]?it[nt]+=tt:it[++nt]=tt:(it[++nt]=null,st.push({i:nt,x:interpolateNumber$1(et,tt)})),_e=reB.lastIndex;return _e<$.length&&(rt=$.slice(_e),it[nt]?it[nt]+=rt:it[++nt]=rt),it.length<2?st[0]?one(st[0].x):zero($):($=st.length,function(at){for(var ot=0,dt;ot<$;++ot)it[(dt=st[ot]).i]=dt.x(at);return it.join("")})}function interpolate(_,$){var _e=typeof $,et;return $==null||_e==="boolean"?constant($):(_e==="number"?interpolateNumber$1:_e==="string"?(et=color($))?($=et,rgb):string:$ instanceof color?rgb:$ instanceof Date?date$1:isNumberArray($)?numberArray:Array.isArray($)?genericArray:typeof $.valueOf!="function"&&typeof $.toString!="function"||isNaN($)?object:interpolateNumber$1)(_,$)}function interpolateRound(_,$){return _=+_,$=+$,function(_e){return Math.round(_*(1-_e)+$*_e)}}function piecewise(_,$){$===void 0&&($=_,_=interpolate);for(var _e=0,et=$.length-1,tt=$[0],rt=new Array(et<0?0:et);_e<et;)rt[_e]=_(tt,tt=$[++_e]);return function(nt){var it=Math.max(0,Math.min(et-1,Math.floor(nt*=et)));return rt[it](nt-it)}}function constants(_){return function(){return _}}function number$1(_){return+_}var unit=[0,1];function identity$6(_){return _}function normalize(_,$){return($-=_=+_)?function(_e){return(_e-_)/$}:constants(isNaN($)?NaN:.5)}function clamper(_,$){var _e;return _>$&&(_e=_,_=$,$=_e),function(et){return Math.max(_,Math.min($,et))}}function bimap(_,$,_e){var et=_[0],tt=_[1],rt=$[0],nt=$[1];return tt<et?(et=normalize(tt,et),rt=_e(nt,rt)):(et=normalize(et,tt),rt=_e(rt,nt)),function(it){return rt(et(it))}}function polymap(_,$,_e){var et=Math.min(_.length,$.length)-1,tt=new Array(et),rt=new Array(et),nt=-1;for(_[et]<_[0]&&(_=_.slice().reverse(),$=$.slice().reverse());++nt<et;)tt[nt]=normalize(_[nt],_[nt+1]),rt[nt]=_e($[nt],$[nt+1]);return function(it){var st=bisectRight(_,it,1,et)-1;return rt[st](tt[st](it))}}function copy$1(_,$){return $.domain(_.domain()).range(_.range()).interpolate(_.interpolate()).clamp(_.clamp()).unknown(_.unknown())}function transformer$2(){var _=unit,$=unit,_e=interpolate,et,tt,rt,nt=identity$6,it,st,at;function ot(){var ht=Math.min(_.length,$.length);return nt!==identity$6&&(nt=clamper(_[0],_[ht-1])),it=ht>2?polymap:bimap,st=at=null,dt}function dt(ht){return ht==null||isNaN(ht=+ht)?rt:(st||(st=it(_.map(et),$,_e)))(et(nt(ht)))}return dt.invert=function(ht){return nt(tt((at||(at=it($,_.map(et),interpolateNumber$1)))(ht)))},dt.domain=function(ht){return arguments.length?(_=Array.from(ht,number$1),ot()):_.slice()},dt.range=function(ht){return arguments.length?($=Array.from(ht),ot()):$.slice()},dt.rangeRound=function(ht){return $=Array.from(ht),_e=interpolateRound,ot()},dt.clamp=function(ht){return arguments.length?(nt=ht?!0:identity$6,ot()):nt!==identity$6},dt.interpolate=function(ht){return arguments.length?(_e=ht,ot()):_e},dt.unknown=function(ht){return arguments.length?(rt=ht,dt):rt},function(ht,yt){return et=ht,tt=yt,ot()}}function continuous(){return transformer$2()(identity$6,identity$6)}function formatDecimal(_){return Math.abs(_=Math.round(_))>=1e21?_.toLocaleString("en").replace(/,/g,""):_.toString(10)}function formatDecimalParts(_,$){if((_e=(_=$?_.toExponential($-1):_.toExponential()).indexOf("e"))<0)return null;var _e,et=_.slice(0,_e);return[et.length>1?et[0]+et.slice(2):et,+_.slice(_e+1)]}function exponent(_){return _=formatDecimalParts(Math.abs(_)),_?_[1]:NaN}function formatGroup(_,$){return function(_e,et){for(var tt=_e.length,rt=[],nt=0,it=_[0],st=0;tt>0&&it>0&&(st+it+1>et&&(it=Math.max(1,et-st)),rt.push(_e.substring(tt-=it,tt+it)),!((st+=it+1)>et));)it=_[nt=(nt+1)%_.length];return rt.reverse().join($)}}function formatNumerals(_){return function($){return $.replace(/[0-9]/g,function(_e){return _[+_e]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(_){if(!($=re.exec(_)))throw new Error("invalid format: "+_);var $;return new FormatSpecifier({fill:$[1],align:$[2],sign:$[3],symbol:$[4],zero:$[5],width:$[6],comma:$[7],precision:$[8]&&$[8].slice(1),trim:$[9],type:$[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(_){this.fill=_.fill===void 0?" ":_.fill+"",this.align=_.align===void 0?">":_.align+"",this.sign=_.sign===void 0?"-":_.sign+"",this.symbol=_.symbol===void 0?"":_.symbol+"",this.zero=!!_.zero,this.width=_.width===void 0?void 0:+_.width,this.comma=!!_.comma,this.precision=_.precision===void 0?void 0:+_.precision,this.trim=!!_.trim,this.type=_.type===void 0?"":_.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(_){e:for(var $=_.length,_e=1,et=-1,tt;_e<$;++_e)switch(_[_e]){case".":et=tt=_e;break;case"0":et===0&&(et=_e),tt=_e;break;default:if(!+_[_e])break e;et>0&&(et=0);break}return et>0?_.slice(0,et)+_.slice(tt+1):_}var prefixExponent;function formatPrefixAuto(_,$){var _e=formatDecimalParts(_,$);if(!_e)return _+"";var et=_e[0],tt=_e[1],rt=tt-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(tt/3)))*3)+1,nt=et.length;return rt===nt?et:rt>nt?et+new Array(rt-nt+1).join("0"):rt>0?et.slice(0,rt)+"."+et.slice(rt):"0."+new Array(1-rt).join("0")+formatDecimalParts(_,Math.max(0,$+rt-1))[0]}function formatRounded(_,$){var _e=formatDecimalParts(_,$);if(!_e)return _+"";var et=_e[0],tt=_e[1];return tt<0?"0."+new Array(-tt).join("0")+et:et.length>tt+1?et.slice(0,tt+1)+"."+et.slice(tt+1):et+new Array(tt-et.length+2).join("0")}const formatTypes={"%":(_,$)=>(_*100).toFixed($),b:_=>Math.round(_).toString(2),c:_=>_+"",d:formatDecimal,e:(_,$)=>_.toExponential($),f:(_,$)=>_.toFixed($),g:(_,$)=>_.toPrecision($),o:_=>Math.round(_).toString(8),p:(_,$)=>formatRounded(_*100,$),r:formatRounded,s:formatPrefixAuto,X:_=>Math.round(_).toString(16).toUpperCase(),x:_=>Math.round(_).toString(16)};function identity$5(_){return _}var map$3=Array.prototype.map,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(_){var $=_.grouping===void 0||_.thousands===void 0?identity$5:formatGroup(map$3.call(_.grouping,Number),_.thousands+""),_e=_.currency===void 0?"":_.currency[0]+"",et=_.currency===void 0?"":_.currency[1]+"",tt=_.decimal===void 0?".":_.decimal+"",rt=_.numerals===void 0?identity$5:formatNumerals(map$3.call(_.numerals,String)),nt=_.percent===void 0?"%":_.percent+"",it=_.minus===void 0?"−":_.minus+"",st=_.nan===void 0?"NaN":_.nan+"";function at(dt){dt=formatSpecifier(dt);var ht=dt.fill,yt=dt.align,vt=dt.sign,xt=dt.symbol,wt=dt.zero,Et=dt.width,At=dt.comma,jt=dt.precision,kt=dt.trim,Lt=dt.type;Lt==="n"?(At=!0,Lt="g"):formatTypes[Lt]||(jt===void 0&&(jt=12),kt=!0,Lt="g"),(wt||ht==="0"&&yt==="=")&&(wt=!0,ht="0",yt="=");var Bt=xt==="$"?_e:xt==="#"&&/[boxX]/.test(Lt)?"0"+Lt.toLowerCase():"",Gt=xt==="$"?et:/[%p]/.test(Lt)?nt:"",er=formatTypes[Lt],tr=/[defgprs%]/.test(Lt);jt=jt===void 0?6:/[gprs]/.test(Lt)?Math.max(1,Math.min(21,jt)):Math.max(0,Math.min(20,jt));function ar(Mt){var lt=Bt,mt=Gt,gt,bt,St;if(Lt==="c")mt=er(Mt)+mt,Mt="";else{Mt=+Mt;var Nt=Mt<0||1/Mt<0;if(Mt=isNaN(Mt)?st:er(Math.abs(Mt),jt),kt&&(Mt=formatTrim(Mt)),Nt&&+Mt==0&&vt!=="+"&&(Nt=!1),lt=(Nt?vt==="("?vt:it:vt==="-"||vt==="("?"":vt)+lt,mt=(Lt==="s"?prefixes[8+prefixExponent/3]:"")+mt+(Nt&&vt==="("?")":""),tr){for(gt=-1,bt=Mt.length;++gt<bt;)if(St=Mt.charCodeAt(gt),48>St||St>57){mt=(St===46?tt+Mt.slice(gt+1):Mt.slice(gt))+mt,Mt=Mt.slice(0,gt);break}}}At&&!wt&&(Mt=$(Mt,1/0));var Pt=lt.length+Mt.length+mt.length,Tt=Pt<Et?new Array(Et-Pt+1).join(ht):"";switch(At&&wt&&(Mt=$(Tt+Mt,Tt.length?Et-mt.length:1/0),Tt=""),yt){case"<":Mt=lt+Mt+mt+Tt;break;case"=":Mt=lt+Tt+Mt+mt;break;case"^":Mt=Tt.slice(0,Pt=Tt.length>>1)+lt+Mt+mt+Tt.slice(Pt);break;default:Mt=Tt+lt+Mt+mt;break}return rt(Mt)}return ar.toString=function(){return dt+""},ar}function ot(dt,ht){var yt=at((dt=formatSpecifier(dt),dt.type="f",dt)),vt=Math.max(-8,Math.min(8,Math.floor(exponent(ht)/3)))*3,xt=Math.pow(10,-vt),wt=prefixes[8+vt/3];return function(Et){return yt(xt*Et)+wt}}return{format:at,formatPrefix:ot}}var locale$1,format,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(_){return locale$1=formatLocale$1(_),format=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(_){return Math.max(0,-exponent(Math.abs(_)))}function precisionPrefix(_,$){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent($)/3)))*3-exponent(Math.abs(_)))}function precisionRound(_,$){return _=Math.abs(_),$=Math.abs($)-_,Math.max(0,exponent($)-exponent(_))+1}function tickFormat(_,$,_e,et){var tt=tickStep(_,$,_e),rt;switch(et=formatSpecifier(et??",f"),et.type){case"s":{var nt=Math.max(Math.abs(_),Math.abs($));return et.precision==null&&!isNaN(rt=precisionPrefix(tt,nt))&&(et.precision=rt),formatPrefix(et,nt)}case"":case"e":case"g":case"p":case"r":{et.precision==null&&!isNaN(rt=precisionRound(tt,Math.max(Math.abs(_),Math.abs($))))&&(et.precision=rt-(et.type==="e"));break}case"f":case"%":{et.precision==null&&!isNaN(rt=precisionFixed(tt))&&(et.precision=rt-(et.type==="%")*2);break}}return format(et)}function linearish(_){var $=_.domain;return _.ticks=function(_e){var et=$();return ticks(et[0],et[et.length-1],_e??10)},_.tickFormat=function(_e,et){var tt=$();return tickFormat(tt[0],tt[tt.length-1],_e??10,et)},_.nice=function(_e){_e==null&&(_e=10);var et=$(),tt=0,rt=et.length-1,nt=et[tt],it=et[rt],st,at,ot=10;for(it<nt&&(at=nt,nt=it,it=at,at=tt,tt=rt,rt=at);ot-- >0;){if(at=tickIncrement(nt,it,_e),at===st)return et[tt]=nt,et[rt]=it,$(et);if(at>0)nt=Math.floor(nt/at)*at,it=Math.ceil(it/at)*at;else if(at<0)nt=Math.ceil(nt*at)/at,it=Math.floor(it*at)/at;else break;st=at}return _},_}function linear(){var _=continuous();return _.copy=function(){return copy$1(_,linear())},initRange.apply(_,arguments),linearish(_)}function identity$4(_){var $;function _e(et){return et==null||isNaN(et=+et)?$:et}return _e.invert=_e,_e.domain=_e.range=function(et){return arguments.length?(_=Array.from(et,number$1),_e):_.slice()},_e.unknown=function(et){return arguments.length?($=et,_e):$},_e.copy=function(){return identity$4(_).unknown($)},_=arguments.length?Array.from(_,number$1):[0,1],linearish(_e)}function nice(_,$){_=_.slice();var _e=0,et=_.length-1,tt=_[_e],rt=_[et],nt;return rt<tt&&(nt=_e,_e=et,et=nt,nt=tt,tt=rt,rt=nt),_[_e]=$.floor(tt),_[et]=$.ceil(rt),_}function transformLog(_){return Math.log(_)}function transformExp(_){return Math.exp(_)}function transformLogn(_){return-Math.log(-_)}function transformExpn(_){return-Math.exp(-_)}function pow10(_){return isFinite(_)?+("1e"+_):_<0?0:_}function powp(_){return _===10?pow10:_===Math.E?Math.exp:$=>Math.pow(_,$)}function logp(_){return _===Math.E?Math.log:_===10&&Math.log10||_===2&&Math.log2||(_=Math.log(_),$=>Math.log($)/_)}function reflect(_){return($,_e)=>-_(-$,_e)}function loggish(_){const $=_(transformLog,transformExp),_e=$.domain;let et=10,tt,rt;function nt(){return tt=logp(et),rt=powp(et),_e()[0]<0?(tt=reflect(tt),rt=reflect(rt),_(transformLogn,transformExpn)):_(transformLog,transformExp),$}return $.base=function(it){return arguments.length?(et=+it,nt()):et},$.domain=function(it){return arguments.length?(_e(it),nt()):_e()},$.ticks=it=>{const st=_e();let at=st[0],ot=st[st.length-1];const dt=ot<at;dt&&([at,ot]=[ot,at]);let ht=tt(at),yt=tt(ot),vt,xt;const wt=it==null?10:+it;let Et=[];if(!(et%1)&&yt-ht<wt){if(ht=Math.floor(ht),yt=Math.ceil(yt),at>0){for(;ht<=yt;++ht)for(vt=1;vt<et;++vt)if(xt=ht<0?vt/rt(-ht):vt*rt(ht),!(xt<at)){if(xt>ot)break;Et.push(xt)}}else for(;ht<=yt;++ht)for(vt=et-1;vt>=1;--vt)if(xt=ht>0?vt/rt(-ht):vt*rt(ht),!(xt<at)){if(xt>ot)break;Et.push(xt)}Et.length*2<wt&&(Et=ticks(at,ot,wt))}else Et=ticks(ht,yt,Math.min(yt-ht,wt)).map(rt);return dt?Et.reverse():Et},$.tickFormat=(it,st)=>{if(it==null&&(it=10),st==null&&(st=et===10?"s":","),typeof st!="function"&&(!(et%1)&&(st=formatSpecifier(st)).precision==null&&(st.trim=!0),st=format(st)),it===1/0)return st;const at=Math.max(1,et*it/$.ticks().length);return ot=>{let dt=ot/rt(Math.round(tt(ot)));return dt*et<et-.5&&(dt*=et),dt<=at?st(ot):""}},$.nice=()=>_e(nice(_e(),{floor:it=>rt(Math.floor(tt(it))),ceil:it=>rt(Math.ceil(tt(it)))})),$}function log(){const _=loggish(transformer$2()).domain([1,10]);return _.copy=()=>copy$1(_,log()).base(_.base()),initRange.apply(_,arguments),_}function transformSymlog(_){return function($){return Math.sign($)*Math.log1p(Math.abs($/_))}}function transformSymexp(_){return function($){return Math.sign($)*Math.expm1(Math.abs($))*_}}function symlogish(_){var $=1,_e=_(transformSymlog($),transformSymexp($));return _e.constant=function(et){return arguments.length?_(transformSymlog($=+et),transformSymexp($)):$},linearish(_e)}function symlog(){var _=symlogish(transformer$2());return _.copy=function(){return copy$1(_,symlog()).constant(_.constant())},initRange.apply(_,arguments)}function transformPow(_){return function($){return $<0?-Math.pow(-$,_):Math.pow($,_)}}function transformSqrt(_){return _<0?-Math.sqrt(-_):Math.sqrt(_)}function transformSquare(_){return _<0?-_*_:_*_}function powish(_){var $=_(identity$6,identity$6),_e=1;function et(){return _e===1?_(identity$6,identity$6):_e===.5?_(transformSqrt,transformSquare):_(transformPow(_e),transformPow(1/_e))}return $.exponent=function(tt){return arguments.length?(_e=+tt,et()):_e},linearish($)}function pow(){var _=powish(transformer$2());return _.copy=function(){return copy$1(_,pow()).exponent(_.exponent())},initRange.apply(_,arguments),_}function sqrt(){return pow.apply(null,arguments).exponent(.5)}function square(_){return Math.sign(_)*_*_}function unsquare(_){return Math.sign(_)*Math.sqrt(Math.abs(_))}function radial(){var _=continuous(),$=[0,1],_e=!1,et;function tt(rt){var nt=unsquare(_(rt));return isNaN(nt)?et:_e?Math.round(nt):nt}return tt.invert=function(rt){return _.invert(square(rt))},tt.domain=function(rt){return arguments.length?(_.domain(rt),tt):_.domain()},tt.range=function(rt){return arguments.length?(_.range(($=Array.from(rt,number$1)).map(square)),tt):$.slice()},tt.rangeRound=function(rt){return tt.range(rt).round(!0)},tt.round=function(rt){return arguments.length?(_e=!!rt,tt):_e},tt.clamp=function(rt){return arguments.length?(_.clamp(rt),tt):_.clamp()},tt.unknown=function(rt){return arguments.length?(et=rt,tt):et},tt.copy=function(){return radial(_.domain(),$).round(_e).clamp(_.clamp()).unknown(et)},initRange.apply(tt,arguments),linearish(tt)}function quantile(){var _=[],$=[],_e=[],et;function tt(){var nt=0,it=Math.max(1,$.length);for(_e=new Array(it-1);++nt<it;)_e[nt-1]=quantileSorted(_,nt/it);return rt}function rt(nt){return nt==null||isNaN(nt=+nt)?et:$[bisectRight(_e,nt)]}return rt.invertExtent=function(nt){var it=$.indexOf(nt);return it<0?[NaN,NaN]:[it>0?_e[it-1]:_[0],it<_e.length?_e[it]:_[_.length-1]]},rt.domain=function(nt){if(!arguments.length)return _.slice();_=[];for(let it of nt)it!=null&&!isNaN(it=+it)&&_.push(it);return _.sort(ascending),tt()},rt.range=function(nt){return arguments.length?($=Array.from(nt),tt()):$.slice()},rt.unknown=function(nt){return arguments.length?(et=nt,rt):et},rt.quantiles=function(){return _e.slice()},rt.copy=function(){return quantile().domain(_).range($).unknown(et)},initRange.apply(rt,arguments)}function quantize(){var _=0,$=1,_e=1,et=[.5],tt=[0,1],rt;function nt(st){return st!=null&&st<=st?tt[bisectRight(et,st,0,_e)]:rt}function it(){var st=-1;for(et=new Array(_e);++st<_e;)et[st]=((st+1)*$-(st-_e)*_)/(_e+1);return nt}return nt.domain=function(st){return arguments.length?([_,$]=st,_=+_,$=+$,it()):[_,$]},nt.range=function(st){return arguments.length?(_e=(tt=Array.from(st)).length-1,it()):tt.slice()},nt.invertExtent=function(st){var at=tt.indexOf(st);return at<0?[NaN,NaN]:at<1?[_,et[0]]:at>=_e?[et[_e-1],$]:[et[at-1],et[at]]},nt.unknown=function(st){return arguments.length&&(rt=st),nt},nt.thresholds=function(){return et.slice()},nt.copy=function(){return quantize().domain([_,$]).range(tt).unknown(rt)},initRange.apply(linearish(nt),arguments)}function threshold(){var _=[.5],$=[0,1],_e,et=1;function tt(rt){return rt!=null&&rt<=rt?$[bisectRight(_,rt,0,et)]:_e}return tt.domain=function(rt){return arguments.length?(_=Array.from(rt),et=Math.min(_.length,$.length-1),tt):_.slice()},tt.range=function(rt){return arguments.length?($=Array.from(rt),et=Math.min(_.length,$.length-1),tt):$.slice()},tt.invertExtent=function(rt){var nt=$.indexOf(rt);return[_[nt-1],_[nt]]},tt.unknown=function(rt){return arguments.length?(_e=rt,tt):_e},tt.copy=function(){return threshold().domain(_).range($).unknown(_e)},initRange.apply(tt,arguments)}const t0=new Date,t1=new Date;function timeInterval(_,$,_e,et){function tt(rt){return _(rt=arguments.length===0?new Date:new Date(+rt)),rt}return tt.floor=rt=>(_(rt=new Date(+rt)),rt),tt.ceil=rt=>(_(rt=new Date(rt-1)),$(rt,1),_(rt),rt),tt.round=rt=>{const nt=tt(rt),it=tt.ceil(rt);return rt-nt<it-rt?nt:it},tt.offset=(rt,nt)=>($(rt=new Date(+rt),nt==null?1:Math.floor(nt)),rt),tt.range=(rt,nt,it)=>{const st=[];if(rt=tt.ceil(rt),it=it==null?1:Math.floor(it),!(rt<nt)||!(it>0))return st;let at;do st.push(at=new Date(+rt)),$(rt,it),_(rt);while(at<rt&&rt<nt);return st},tt.filter=rt=>timeInterval(nt=>{if(nt>=nt)for(;_(nt),!rt(nt);)nt.setTime(nt-1)},(nt,it)=>{if(nt>=nt)if(it<0)for(;++it<=0;)for(;$(nt,-1),!rt(nt););else for(;--it>=0;)for(;$(nt,1),!rt(nt););}),_e&&(tt.count=(rt,nt)=>(t0.setTime(+rt),t1.setTime(+nt),_(t0),_(t1),Math.floor(_e(t0,t1))),tt.every=rt=>(rt=Math.floor(rt),!isFinite(rt)||!(rt>0)?null:rt>1?tt.filter(et?nt=>et(nt)%rt===0:nt=>tt.count(0,nt)%rt===0):tt)),tt}const millisecond=timeInterval(()=>{},(_,$)=>{_.setTime(+_+$)},(_,$)=>$-_);millisecond.every=_=>(_=Math.floor(_),!isFinite(_)||!(_>0)?null:_>1?timeInterval($=>{$.setTime(Math.floor($/_)*_)},($,_e)=>{$.setTime(+$+_e*_)},($,_e)=>(_e-$)/_):millisecond);millisecond.range;const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,second=timeInterval(_=>{_.setTime(_-_.getMilliseconds())},(_,$)=>{_.setTime(+_+$*durationSecond)},(_,$)=>($-_)/durationSecond,_=>_.getUTCSeconds());second.range;const timeMinute=timeInterval(_=>{_.setTime(_-_.getMilliseconds()-_.getSeconds()*durationSecond)},(_,$)=>{_.setTime(+_+$*durationMinute)},(_,$)=>($-_)/durationMinute,_=>_.getMinutes());timeMinute.range;const utcMinute=timeInterval(_=>{_.setUTCSeconds(0,0)},(_,$)=>{_.setTime(+_+$*durationMinute)},(_,$)=>($-_)/durationMinute,_=>_.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(_=>{_.setTime(_-_.getMilliseconds()-_.getSeconds()*durationSecond-_.getMinutes()*durationMinute)},(_,$)=>{_.setTime(+_+$*durationHour)},(_,$)=>($-_)/durationHour,_=>_.getHours());timeHour.range;const utcHour=timeInterval(_=>{_.setUTCMinutes(0,0,0)},(_,$)=>{_.setTime(+_+$*durationHour)},(_,$)=>($-_)/durationHour,_=>_.getUTCHours());utcHour.range;const timeDay=timeInterval(_=>_.setHours(0,0,0,0),(_,$)=>_.setDate(_.getDate()+$),(_,$)=>($-_-($.getTimezoneOffset()-_.getTimezoneOffset())*durationMinute)/durationDay,_=>_.getDate()-1);timeDay.range;const utcDay=timeInterval(_=>{_.setUTCHours(0,0,0,0)},(_,$)=>{_.setUTCDate(_.getUTCDate()+$)},(_,$)=>($-_)/durationDay,_=>_.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(_=>{_.setUTCHours(0,0,0,0)},(_,$)=>{_.setUTCDate(_.getUTCDate()+$)},(_,$)=>($-_)/durationDay,_=>Math.floor(_/durationDay));unixDay.range;function timeWeekday(_){return timeInterval($=>{$.setDate($.getDate()-($.getDay()+7-_)%7),$.setHours(0,0,0,0)},($,_e)=>{$.setDate($.getDate()+_e*7)},($,_e)=>(_e-$-(_e.getTimezoneOffset()-$.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(_){return timeInterval($=>{$.setUTCDate($.getUTCDate()-($.getUTCDay()+7-_)%7),$.setUTCHours(0,0,0,0)},($,_e)=>{$.setUTCDate($.getUTCDate()+_e*7)},($,_e)=>(_e-$)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval(_=>{_.setDate(1),_.setHours(0,0,0,0)},(_,$)=>{_.setMonth(_.getMonth()+$)},(_,$)=>$.getMonth()-_.getMonth()+($.getFullYear()-_.getFullYear())*12,_=>_.getMonth());timeMonth.range;const utcMonth=timeInterval(_=>{_.setUTCDate(1),_.setUTCHours(0,0,0,0)},(_,$)=>{_.setUTCMonth(_.getUTCMonth()+$)},(_,$)=>$.getUTCMonth()-_.getUTCMonth()+($.getUTCFullYear()-_.getUTCFullYear())*12,_=>_.getUTCMonth());utcMonth.range;const timeYear=timeInterval(_=>{_.setMonth(0,1),_.setHours(0,0,0,0)},(_,$)=>{_.setFullYear(_.getFullYear()+$)},(_,$)=>$.getFullYear()-_.getFullYear(),_=>_.getFullYear());timeYear.every=_=>!isFinite(_=Math.floor(_))||!(_>0)?null:timeInterval($=>{$.setFullYear(Math.floor($.getFullYear()/_)*_),$.setMonth(0,1),$.setHours(0,0,0,0)},($,_e)=>{$.setFullYear($.getFullYear()+_e*_)});timeYear.range;const utcYear=timeInterval(_=>{_.setUTCMonth(0,1),_.setUTCHours(0,0,0,0)},(_,$)=>{_.setUTCFullYear(_.getUTCFullYear()+$)},(_,$)=>$.getUTCFullYear()-_.getUTCFullYear(),_=>_.getUTCFullYear());utcYear.every=_=>!isFinite(_=Math.floor(_))||!(_>0)?null:timeInterval($=>{$.setUTCFullYear(Math.floor($.getUTCFullYear()/_)*_),$.setUTCMonth(0,1),$.setUTCHours(0,0,0,0)},($,_e)=>{$.setUTCFullYear($.getUTCFullYear()+_e*_)});utcYear.range;function ticker(_,$,_e,et,tt,rt){const nt=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[rt,1,durationMinute],[rt,5,5*durationMinute],[rt,15,15*durationMinute],[rt,30,30*durationMinute],[tt,1,durationHour],[tt,3,3*durationHour],[tt,6,6*durationHour],[tt,12,12*durationHour],[et,1,durationDay],[et,2,2*durationDay],[_e,1,durationWeek],[$,1,durationMonth],[$,3,3*durationMonth],[_,1,durationYear]];function it(at,ot,dt){const ht=ot<at;ht&&([at,ot]=[ot,at]);const yt=dt&&typeof dt.range=="function"?dt:st(at,ot,dt),vt=yt?yt.range(at,+ot+1):[];return ht?vt.reverse():vt}function st(at,ot,dt){const ht=Math.abs(ot-at)/dt,yt=bisector(([,,wt])=>wt).right(nt,ht);if(yt===nt.length)return _.every(tickStep(at/durationYear,ot/durationYear,dt));if(yt===0)return millisecond.every(Math.max(tickStep(at,ot,dt),1));const[vt,xt]=nt[ht/nt[yt-1][2]<nt[yt][2]/ht?yt-1:yt];return vt.every(xt)}return[it,st]}const[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(_){if(0<=_.y&&_.y<100){var $=new Date(-1,_.m,_.d,_.H,_.M,_.S,_.L);return $.setFullYear(_.y),$}return new Date(_.y,_.m,_.d,_.H,_.M,_.S,_.L)}function utcDate(_){if(0<=_.y&&_.y<100){var $=new Date(Date.UTC(-1,_.m,_.d,_.H,_.M,_.S,_.L));return $.setUTCFullYear(_.y),$}return new Date(Date.UTC(_.y,_.m,_.d,_.H,_.M,_.S,_.L))}function newDate(_,$,_e){return{y:_,m:$,d:_e,H:0,M:0,S:0,L:0}}function formatLocale(_){var $=_.dateTime,_e=_.date,et=_.time,tt=_.periods,rt=_.days,nt=_.shortDays,it=_.months,st=_.shortMonths,at=formatRe(tt),ot=formatLookup(tt),dt=formatRe(rt),ht=formatLookup(rt),yt=formatRe(nt),vt=formatLookup(nt),xt=formatRe(it),wt=formatLookup(it),Et=formatRe(st),At=formatLookup(st),jt={a:Nt,A:Pt,b:Tt,B:pt,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:Rt,q:zt,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},kt={a:Yt,A:ir,b:ur,B:cr,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:rr,q:fr,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},Lt={a:ar,A:Mt,b:lt,B:mt,c:gt,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:tr,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:bt,X:St,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};jt.x=Bt(_e,jt),jt.X=Bt(et,jt),jt.c=Bt($,jt),kt.x=Bt(_e,kt),kt.X=Bt(et,kt),kt.c=Bt($,kt);function Bt(dr,gr){return function(hr){var or=[],br=-1,Rr=0,_r=dr.length,Er,Hr,xr;for(hr instanceof Date||(hr=new Date(+hr));++br<_r;)dr.charCodeAt(br)===37&&(or.push(dr.slice(Rr,br)),(Hr=pads[Er=dr.charAt(++br)])!=null?Er=dr.charAt(++br):Hr=Er==="e"?" ":"0",(xr=gr[Er])&&(Er=xr(hr,Hr)),or.push(Er),Rr=br+1);return or.push(dr.slice(Rr,br)),or.join("")}}function Gt(dr,gr){return function(hr){var or=newDate(1900,void 0,1),br=er(or,dr,hr+="",0),Rr,_r;if(br!=hr.length)return null;if("Q"in or)return new Date(or.Q);if("s"in or)return new Date(or.s*1e3+("L"in or?or.L:0));if(gr&&!("Z"in or)&&(or.Z=0),"p"in or&&(or.H=or.H%12+or.p*12),or.m===void 0&&(or.m="q"in or?or.q:0),"V"in or){if(or.V<1||or.V>53)return null;"w"in or||(or.w=1),"Z"in or?(Rr=utcDate(newDate(or.y,0,1)),_r=Rr.getUTCDay(),Rr=_r>4||_r===0?utcMonday.ceil(Rr):utcMonday(Rr),Rr=utcDay.offset(Rr,(or.V-1)*7),or.y=Rr.getUTCFullYear(),or.m=Rr.getUTCMonth(),or.d=Rr.getUTCDate()+(or.w+6)%7):(Rr=localDate(newDate(or.y,0,1)),_r=Rr.getDay(),Rr=_r>4||_r===0?timeMonday.ceil(Rr):timeMonday(Rr),Rr=timeDay.offset(Rr,(or.V-1)*7),or.y=Rr.getFullYear(),or.m=Rr.getMonth(),or.d=Rr.getDate()+(or.w+6)%7)}else("W"in or||"U"in or)&&("w"in or||(or.w="u"in or?or.u%7:"W"in or?1:0),_r="Z"in or?utcDate(newDate(or.y,0,1)).getUTCDay():localDate(newDate(or.y,0,1)).getDay(),or.m=0,or.d="W"in or?(or.w+6)%7+or.W*7-(_r+5)%7:or.w+or.U*7-(_r+6)%7);return"Z"in or?(or.H+=or.Z/100|0,or.M+=or.Z%100,utcDate(or)):localDate(or)}}function er(dr,gr,hr,or){for(var br=0,Rr=gr.length,_r=hr.length,Er,Hr;br<Rr;){if(or>=_r)return-1;if(Er=gr.charCodeAt(br++),Er===37){if(Er=gr.charAt(br++),Hr=Lt[Er in pads?gr.charAt(br++):Er],!Hr||(or=Hr(dr,hr,or))<0)return-1}else if(Er!=hr.charCodeAt(or++))return-1}return or}function tr(dr,gr,hr){var or=at.exec(gr.slice(hr));return or?(dr.p=ot.get(or[0].toLowerCase()),hr+or[0].length):-1}function ar(dr,gr,hr){var or=yt.exec(gr.slice(hr));return or?(dr.w=vt.get(or[0].toLowerCase()),hr+or[0].length):-1}function Mt(dr,gr,hr){var or=dt.exec(gr.slice(hr));return or?(dr.w=ht.get(or[0].toLowerCase()),hr+or[0].length):-1}function lt(dr,gr,hr){var or=Et.exec(gr.slice(hr));return or?(dr.m=At.get(or[0].toLowerCase()),hr+or[0].length):-1}function mt(dr,gr,hr){var or=xt.exec(gr.slice(hr));return or?(dr.m=wt.get(or[0].toLowerCase()),hr+or[0].length):-1}function gt(dr,gr,hr){return er(dr,$,gr,hr)}function bt(dr,gr,hr){return er(dr,_e,gr,hr)}function St(dr,gr,hr){return er(dr,et,gr,hr)}function Nt(dr){return nt[dr.getDay()]}function Pt(dr){return rt[dr.getDay()]}function Tt(dr){return st[dr.getMonth()]}function pt(dr){return it[dr.getMonth()]}function Rt(dr){return tt[+(dr.getHours()>=12)]}function zt(dr){return 1+~~(dr.getMonth()/3)}function Yt(dr){return nt[dr.getUTCDay()]}function ir(dr){return rt[dr.getUTCDay()]}function ur(dr){return st[dr.getUTCMonth()]}function cr(dr){return it[dr.getUTCMonth()]}function rr(dr){return tt[+(dr.getUTCHours()>=12)]}function fr(dr){return 1+~~(dr.getUTCMonth()/3)}return{format:function(dr){var gr=Bt(dr+="",jt);return gr.toString=function(){return dr},gr},parse:function(dr){var gr=Gt(dr+="",!1);return gr.toString=function(){return dr},gr},utcFormat:function(dr){var gr=Bt(dr+="",kt);return gr.toString=function(){return dr},gr},utcParse:function(dr){var gr=Gt(dr+="",!0);return gr.toString=function(){return dr},gr}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(_,$,_e){var et=_<0?"-":"",tt=(et?-_:_)+"",rt=tt.length;return et+(rt<_e?new Array(_e-rt+1).join($)+tt:tt)}function requote(_){return _.replace(requoteRe,"\\$&")}function formatRe(_){return new RegExp("^(?:"+_.map(requote).join("|")+")","i")}function formatLookup(_){return new Map(_.map(($,_e)=>[$.toLowerCase(),_e]))}function parseWeekdayNumberSunday(_,$,_e){var et=numberRe.exec($.slice(_e,_e+1));return et?(_.w=+et[0],_e+et[0].length):-1}function parseWeekdayNumberMonday(_,$,_e){var et=numberRe.exec($.slice(_e,_e+1));return et?(_.u=+et[0],_e+et[0].length):-1}function parseWeekNumberSunday(_,$,_e){var et=numberRe.exec($.slice(_e,_e+2));return et?(_.U=+et[0],_e+et[0].length):-1}function parseWeekNumberISO(_,$,_e){var et=numberRe.exec($.slice(_e,_e+2));return et?(_.V=+et[0],_e+et[0].length):-1}function parseWeekNumberMonday(_,$,_e){var et=numberRe.exec($.slice(_e,_e+2));return et?(_.W=+et[0],_e+et[0].length):-1}function parseFullYear(_,$,_e){var et=numberRe.exec($.slice(_e,_e+4));return et?(_.y=+et[0],_e+et[0].length):-1}function parseYear(_,$,_e){var et=numberRe.exec($.slice(_e,_e+2));return et?(_.y=+et[0]+(+et[0]>68?1900:2e3),_e+et[0].length):-1}function parseZone(_,$,_e){var et=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec($.slice(_e,_e+6));return et?(_.Z=et[1]?0:-(et[2]+(et[3]||"00")),_e+et[0].length):-1}function parseQuarter(_,$,_e){var et=numberRe.exec($.slice(_e,_e+1));return et?(_.q=et[0]*3-3,_e+et[0].length):-1}function parseMonthNumber(_,$,_e){var et=numberRe.exec($.slice(_e,_e+2));return et?(_.m=et[0]-1,_e+et[0].length):-1}function parseDayOfMonth(_,$,_e){var et=numberRe.exec($.slice(_e,_e+2));return et?(_.d=+et[0],_e+et[0].length):-1}function parseDayOfYear(_,$,_e){var et=numberRe.exec($.slice(_e,_e+3));return et?(_.m=0,_.d=+et[0],_e+et[0].length):-1}function parseHour24(_,$,_e){var et=numberRe.exec($.slice(_e,_e+2));return et?(_.H=+et[0],_e+et[0].length):-1}function parseMinutes(_,$,_e){var et=numberRe.exec($.slice(_e,_e+2));return et?(_.M=+et[0],_e+et[0].length):-1}function parseSeconds(_,$,_e){var et=numberRe.exec($.slice(_e,_e+2));return et?(_.S=+et[0],_e+et[0].length):-1}function parseMilliseconds(_,$,_e){var et=numberRe.exec($.slice(_e,_e+3));return et?(_.L=+et[0],_e+et[0].length):-1}function parseMicroseconds(_,$,_e){var et=numberRe.exec($.slice(_e,_e+6));return et?(_.L=Math.floor(et[0]/1e3),_e+et[0].length):-1}function parseLiteralPercent(_,$,_e){var et=percentRe.exec($.slice(_e,_e+1));return et?_e+et[0].length:-1}function parseUnixTimestamp(_,$,_e){var et=numberRe.exec($.slice(_e));return et?(_.Q=+et[0],_e+et[0].length):-1}function parseUnixTimestampSeconds(_,$,_e){var et=numberRe.exec($.slice(_e));return et?(_.s=+et[0],_e+et[0].length):-1}function formatDayOfMonth(_,$){return pad(_.getDate(),$,2)}function formatHour24(_,$){return pad(_.getHours(),$,2)}function formatHour12(_,$){return pad(_.getHours()%12||12,$,2)}function formatDayOfYear(_,$){return pad(1+timeDay.count(timeYear(_),_),$,3)}function formatMilliseconds(_,$){return pad(_.getMilliseconds(),$,3)}function formatMicroseconds(_,$){return formatMilliseconds(_,$)+"000"}function formatMonthNumber(_,$){return pad(_.getMonth()+1,$,2)}function formatMinutes(_,$){return pad(_.getMinutes(),$,2)}function formatSeconds(_,$){return pad(_.getSeconds(),$,2)}function formatWeekdayNumberMonday(_){var $=_.getDay();return $===0?7:$}function formatWeekNumberSunday(_,$){return pad(timeSunday.count(timeYear(_)-1,_),$,2)}function dISO(_){var $=_.getDay();return $>=4||$===0?timeThursday(_):timeThursday.ceil(_)}function formatWeekNumberISO(_,$){return _=dISO(_),pad(timeThursday.count(timeYear(_),_)+(timeYear(_).getDay()===4),$,2)}function formatWeekdayNumberSunday(_){return _.getDay()}function formatWeekNumberMonday(_,$){return pad(timeMonday.count(timeYear(_)-1,_),$,2)}function formatYear(_,$){return pad(_.getFullYear()%100,$,2)}function formatYearISO(_,$){return _=dISO(_),pad(_.getFullYear()%100,$,2)}function formatFullYear(_,$){return pad(_.getFullYear()%1e4,$,4)}function formatFullYearISO(_,$){var _e=_.getDay();return _=_e>=4||_e===0?timeThursday(_):timeThursday.ceil(_),pad(_.getFullYear()%1e4,$,4)}function formatZone(_){var $=_.getTimezoneOffset();return($>0?"-":($*=-1,"+"))+pad($/60|0,"0",2)+pad($%60,"0",2)}function formatUTCDayOfMonth(_,$){return pad(_.getUTCDate(),$,2)}function formatUTCHour24(_,$){return pad(_.getUTCHours(),$,2)}function formatUTCHour12(_,$){return pad(_.getUTCHours()%12||12,$,2)}function formatUTCDayOfYear(_,$){return pad(1+utcDay.count(utcYear(_),_),$,3)}function formatUTCMilliseconds(_,$){return pad(_.getUTCMilliseconds(),$,3)}function formatUTCMicroseconds(_,$){return formatUTCMilliseconds(_,$)+"000"}function formatUTCMonthNumber(_,$){return pad(_.getUTCMonth()+1,$,2)}function formatUTCMinutes(_,$){return pad(_.getUTCMinutes(),$,2)}function formatUTCSeconds(_,$){return pad(_.getUTCSeconds(),$,2)}function formatUTCWeekdayNumberMonday(_){var $=_.getUTCDay();return $===0?7:$}function formatUTCWeekNumberSunday(_,$){return pad(utcSunday.count(utcYear(_)-1,_),$,2)}function UTCdISO(_){var $=_.getUTCDay();return $>=4||$===0?utcThursday(_):utcThursday.ceil(_)}function formatUTCWeekNumberISO(_,$){return _=UTCdISO(_),pad(utcThursday.count(utcYear(_),_)+(utcYear(_).getUTCDay()===4),$,2)}function formatUTCWeekdayNumberSunday(_){return _.getUTCDay()}function formatUTCWeekNumberMonday(_,$){return pad(utcMonday.count(utcYear(_)-1,_),$,2)}function formatUTCYear(_,$){return pad(_.getUTCFullYear()%100,$,2)}function formatUTCYearISO(_,$){return _=UTCdISO(_),pad(_.getUTCFullYear()%100,$,2)}function formatUTCFullYear(_,$){return pad(_.getUTCFullYear()%1e4,$,4)}function formatUTCFullYearISO(_,$){var _e=_.getUTCDay();return _=_e>=4||_e===0?utcThursday(_):utcThursday.ceil(_),pad(_.getUTCFullYear()%1e4,$,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(_){return+_}function formatUnixTimestampSeconds(_){return Math.floor(+_/1e3)}var locale,timeFormat,utcFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(_){return locale=formatLocale(_),timeFormat=locale.format,locale.parse,utcFormat=locale.utcFormat,locale.utcParse,locale}function date(_){return new Date(_)}function number(_){return _ instanceof Date?+_:+new Date(+_)}function calendar(_,$,_e,et,tt,rt,nt,it,st,at){var ot=continuous(),dt=ot.invert,ht=ot.domain,yt=at(".%L"),vt=at(":%S"),xt=at("%I:%M"),wt=at("%I %p"),Et=at("%a %d"),At=at("%b %d"),jt=at("%B"),kt=at("%Y");function Lt(Bt){return(st(Bt)<Bt?yt:it(Bt)<Bt?vt:nt(Bt)<Bt?xt:rt(Bt)<Bt?wt:et(Bt)<Bt?tt(Bt)<Bt?Et:At:_e(Bt)<Bt?jt:kt)(Bt)}return ot.invert=function(Bt){return new Date(dt(Bt))},ot.domain=function(Bt){return arguments.length?ht(Array.from(Bt,number)):ht().map(date)},ot.ticks=function(Bt){var Gt=ht();return _(Gt[0],Gt[Gt.length-1],Bt??10)},ot.tickFormat=function(Bt,Gt){return Gt==null?Lt:at(Gt)},ot.nice=function(Bt){var Gt=ht();return(!Bt||typeof Bt.range!="function")&&(Bt=$(Gt[0],Gt[Gt.length-1],Bt??10)),Bt?ht(nice(Gt,Bt)):ot},ot.copy=function(){return copy$1(ot,calendar(_,$,_e,et,tt,rt,nt,it,st,at))},ot}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function transformer$1(){var _=0,$=1,_e,et,tt,rt,nt=identity$6,it=!1,st;function at(dt){return dt==null||isNaN(dt=+dt)?st:nt(tt===0?.5:(dt=(rt(dt)-_e)*tt,it?Math.max(0,Math.min(1,dt)):dt))}at.domain=function(dt){return arguments.length?([_,$]=dt,_e=rt(_=+_),et=rt($=+$),tt=_e===et?0:1/(et-_e),at):[_,$]},at.clamp=function(dt){return arguments.length?(it=!!dt,at):it},at.interpolator=function(dt){return arguments.length?(nt=dt,at):nt};function ot(dt){return function(ht){var yt,vt;return arguments.length?([yt,vt]=ht,nt=dt(yt,vt),at):[nt(0),nt(1)]}}return at.range=ot(interpolate),at.rangeRound=ot(interpolateRound),at.unknown=function(dt){return arguments.length?(st=dt,at):st},function(dt){return rt=dt,_e=dt(_),et=dt($),tt=_e===et?0:1/(et-_e),at}}function copy(_,$){return $.domain(_.domain()).interpolator(_.interpolator()).clamp(_.clamp()).unknown(_.unknown())}function sequential(){var _=linearish(transformer$1()(identity$6));return _.copy=function(){return copy(_,sequential())},initInterpolator.apply(_,arguments)}function sequentialLog(){var _=loggish(transformer$1()).domain([1,10]);return _.copy=function(){return copy(_,sequentialLog()).base(_.base())},initInterpolator.apply(_,arguments)}function sequentialSymlog(){var _=symlogish(transformer$1());return _.copy=function(){return copy(_,sequentialSymlog()).constant(_.constant())},initInterpolator.apply(_,arguments)}function sequentialPow(){var _=powish(transformer$1());return _.copy=function(){return copy(_,sequentialPow()).exponent(_.exponent())},initInterpolator.apply(_,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function sequentialQuantile(){var _=[],$=identity$6;function _e(et){if(et!=null&&!isNaN(et=+et))return $((bisectRight(_,et,1)-1)/(_.length-1))}return _e.domain=function(et){if(!arguments.length)return _.slice();_=[];for(let tt of et)tt!=null&&!isNaN(tt=+tt)&&_.push(tt);return _.sort(ascending),_e},_e.interpolator=function(et){return arguments.length?($=et,_e):$},_e.range=function(){return _.map((et,tt)=>$(tt/(_.length-1)))},_e.quantiles=function(et){return Array.from({length:et+1},(tt,rt)=>quantile$1(_,rt/et))},_e.copy=function(){return sequentialQuantile($).domain(_)},initInterpolator.apply(_e,arguments)}function transformer(){var _=0,$=.5,_e=1,et=1,tt,rt,nt,it,st,at=identity$6,ot,dt=!1,ht;function yt(xt){return isNaN(xt=+xt)?ht:(xt=.5+((xt=+ot(xt))-rt)*(et*xt<et*rt?it:st),at(dt?Math.max(0,Math.min(1,xt)):xt))}yt.domain=function(xt){return arguments.length?([_,$,_e]=xt,tt=ot(_=+_),rt=ot($=+$),nt=ot(_e=+_e),it=tt===rt?0:.5/(rt-tt),st=rt===nt?0:.5/(nt-rt),et=rt<tt?-1:1,yt):[_,$,_e]},yt.clamp=function(xt){return arguments.length?(dt=!!xt,yt):dt},yt.interpolator=function(xt){return arguments.length?(at=xt,yt):at};function vt(xt){return function(wt){var Et,At,jt;return arguments.length?([Et,At,jt]=wt,at=piecewise(xt,[Et,At,jt]),yt):[at(0),at(.5),at(1)]}}return yt.range=vt(interpolate),yt.rangeRound=vt(interpolateRound),yt.unknown=function(xt){return arguments.length?(ht=xt,yt):ht},function(xt){return ot=xt,tt=xt(_),rt=xt($),nt=xt(_e),it=tt===rt?0:.5/(rt-tt),st=rt===nt?0:.5/(nt-rt),et=rt<tt?-1:1,yt}}function diverging(){var _=linearish(transformer()(identity$6));return _.copy=function(){return copy(_,diverging())},initInterpolator.apply(_,arguments)}function divergingLog(){var _=loggish(transformer()).domain([.1,1,10]);return _.copy=function(){return copy(_,divergingLog()).base(_.base())},initInterpolator.apply(_,arguments)}function divergingSymlog(){var _=symlogish(transformer());return _.copy=function(){return copy(_,divergingSymlog()).constant(_.constant())},initInterpolator.apply(_,arguments)}function divergingPow(){var _=powish(transformer());return _.copy=function(){return copy(_,divergingPow()).exponent(_.exponent())},initInterpolator.apply(_,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}const d3Scales=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:band,scaleDiverging:diverging,scaleDivergingLog:divergingLog,scaleDivergingPow:divergingPow,scaleDivergingSqrt:divergingSqrt,scaleDivergingSymlog:divergingSymlog,scaleIdentity:identity$4,scaleImplicit:implicit,scaleLinear:linear,scaleLog:log,scaleOrdinal:ordinal,scalePoint:point,scalePow:pow,scaleQuantile:quantile,scaleQuantize:quantize,scaleRadial:radial,scaleSequential:sequential,scaleSequentialLog:sequentialLog,scaleSequentialPow:sequentialPow,scaleSequentialQuantile:sequentialQuantile,scaleSequentialSqrt:sequentialSqrt,scaleSequentialSymlog:sequentialSymlog,scaleSqrt:sqrt,scaleSymlog:symlog,scaleThreshold:threshold,scaleTime:time,scaleUtc:utcTime,tickFormat},Symbol.toStringTag,{value:"Module"}));var isSymbol=isSymbol_1;function baseExtremum$2(_,$,_e){for(var et=-1,tt=_.length;++et<tt;){var rt=_[et],nt=$(rt);if(nt!=null&&(it===void 0?nt===nt&&!isSymbol(nt):_e(nt,it)))var it=nt,st=rt}return st}var _baseExtremum=baseExtremum$2;function baseGt$1(_,$){return _>$}var _baseGt=baseGt$1,baseExtremum$1=_baseExtremum,baseGt=_baseGt,identity$3=identity_1;function max(_){return _&&_.length?baseExtremum$1(_,identity$3,baseGt):void 0}var max_1=max;const max$1=getDefaultExportFromCjs$1(max_1);function baseLt$1(_,$){return _<$}var _baseLt=baseLt$1,baseExtremum=_baseExtremum,baseLt=_baseLt,identity$2=identity_1;function min(_){return _&&_.length?baseExtremum(_,identity$2,baseLt):void 0}var min_1=min;const min$1=getDefaultExportFromCjs$1(min_1);var arrayMap=_arrayMap,baseIteratee$5=_baseIteratee,baseMap=_baseMap,isArray$3=isArray_1;function map$2(_,$){var _e=isArray$3(_)?arrayMap:baseMap;return _e(_,baseIteratee$5($))}var map_1=map$2,baseFlatten=_baseFlatten,map$1=map_1;function flatMap(_,$){return baseFlatten(map$1(_,$),1)}var flatMap_1=flatMap;const flatMap$1=getDefaultExportFromCjs$1(flatMap_1);var baseIsEqual=_baseIsEqual;function isEqual(_,$){return baseIsEqual(_,$)}var isEqual_1=isEqual;const isEqual$1=getDefaultExportFromCjs$1(isEqual_1);var MAX_DIGITS=1e9,defaults={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Decimal,external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",exponentOutOfRange=decimalError+"Exponent out of range: ",mathfloor=Math.floor,mathpow=Math.pow,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ONE,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,MAX_E=mathfloor(MAX_SAFE_INTEGER/LOG_BASE),P={};P.absoluteValue=P.abs=function(){var _=new this.constructor(this);return _.s&&(_.s=1),_};P.comparedTo=P.cmp=function(_){var $,_e,et,tt,rt=this;if(_=new rt.constructor(_),rt.s!==_.s)return rt.s||-_.s;if(rt.e!==_.e)return rt.e>_.e^rt.s<0?1:-1;for(et=rt.d.length,tt=_.d.length,$=0,_e=et<tt?et:tt;$<_e;++$)if(rt.d[$]!==_.d[$])return rt.d[$]>_.d[$]^rt.s<0?1:-1;return et===tt?0:et>tt^rt.s<0?1:-1};P.decimalPlaces=P.dp=function(){var _=this,$=_.d.length-1,_e=($-_.e)*LOG_BASE;if($=_.d[$],$)for(;$%10==0;$/=10)_e--;return _e<0?0:_e};P.dividedBy=P.div=function(_){return divide(this,new this.constructor(_))};P.dividedToIntegerBy=P.idiv=function(_){var $=this,_e=$.constructor;return round(divide($,new _e(_),0,1),_e.precision)};P.equals=P.eq=function(_){return!this.cmp(_)};P.exponent=function(){return getBase10Exponent(this)};P.greaterThan=P.gt=function(_){return this.cmp(_)>0};P.greaterThanOrEqualTo=P.gte=function(_){return this.cmp(_)>=0};P.isInteger=P.isint=function(){return this.e>this.d.length-2};P.isNegative=P.isneg=function(){return this.s<0};P.isPositive=P.ispos=function(){return this.s>0};P.isZero=function(){return this.s===0};P.lessThan=P.lt=function(_){return this.cmp(_)<0};P.lessThanOrEqualTo=P.lte=function(_){return this.cmp(_)<1};P.logarithm=P.log=function(_){var $,_e=this,et=_e.constructor,tt=et.precision,rt=tt+5;if(_===void 0)_=new et(10);else if(_=new et(_),_.s<1||_.eq(ONE))throw Error(decimalError+"NaN");if(_e.s<1)throw Error(decimalError+(_e.s?"NaN":"-Infinity"));return _e.eq(ONE)?new et(0):(external=!1,$=divide(ln(_e,rt),ln(_,rt),rt),external=!0,round($,tt))};P.minus=P.sub=function(_){var $=this;return _=new $.constructor(_),$.s==_.s?subtract($,_):add($,(_.s=-_.s,_))};P.modulo=P.mod=function(_){var $,_e=this,et=_e.constructor,tt=et.precision;if(_=new et(_),!_.s)throw Error(decimalError+"NaN");return _e.s?(external=!1,$=divide(_e,_,0,1).times(_),external=!0,_e.minus($)):round(new et(_e),tt)};P.naturalExponential=P.exp=function(){return exp(this)};P.naturalLogarithm=P.ln=function(){return ln(this)};P.negated=P.neg=function(){var _=new this.constructor(this);return _.s=-_.s||0,_};P.plus=P.add=function(_){var $=this;return _=new $.constructor(_),$.s==_.s?add($,_):subtract($,(_.s=-_.s,_))};P.precision=P.sd=function(_){var $,_e,et,tt=this;if(_!==void 0&&_!==!!_&&_!==1&&_!==0)throw Error(invalidArgument+_);if($=getBase10Exponent(tt)+1,et=tt.d.length-1,_e=et*LOG_BASE+1,et=tt.d[et],et){for(;et%10==0;et/=10)_e--;for(et=tt.d[0];et>=10;et/=10)_e++}return _&&$>_e?$:_e};P.squareRoot=P.sqrt=function(){var _,$,_e,et,tt,rt,nt,it=this,st=it.constructor;if(it.s<1){if(!it.s)return new st(0);throw Error(decimalError+"NaN")}for(_=getBase10Exponent(it),external=!1,tt=Math.sqrt(+it),tt==0||tt==1/0?($=digitsToString(it.d),($.length+_)%2==0&&($+="0"),tt=Math.sqrt($),_=mathfloor((_+1)/2)-(_<0||_%2),tt==1/0?$="5e"+_:($=tt.toExponential(),$=$.slice(0,$.indexOf("e")+1)+_),et=new st($)):et=new st(tt.toString()),_e=st.precision,tt=nt=_e+3;;)if(rt=et,et=rt.plus(divide(it,rt,nt+2)).times(.5),digitsToString(rt.d).slice(0,nt)===($=digitsToString(et.d)).slice(0,nt)){if($=$.slice(nt-3,nt+1),tt==nt&&$=="4999"){if(round(rt,_e+1,0),rt.times(rt).eq(it)){et=rt;break}}else if($!="9999")break;nt+=4}return external=!0,round(et,_e)};P.times=P.mul=function(_){var $,_e,et,tt,rt,nt,it,st,at,ot=this,dt=ot.constructor,ht=ot.d,yt=(_=new dt(_)).d;if(!ot.s||!_.s)return new dt(0);for(_.s*=ot.s,_e=ot.e+_.e,st=ht.length,at=yt.length,st<at&&(rt=ht,ht=yt,yt=rt,nt=st,st=at,at=nt),rt=[],nt=st+at,et=nt;et--;)rt.push(0);for(et=at;--et>=0;){for($=0,tt=st+et;tt>et;)it=rt[tt]+yt[et]*ht[tt-et-1]+$,rt[tt--]=it%BASE|0,$=it/BASE|0;rt[tt]=(rt[tt]+$)%BASE|0}for(;!rt[--nt];)rt.pop();return $?++_e:rt.shift(),_.d=rt,_.e=_e,external?round(_,dt.precision):_};P.toDecimalPlaces=P.todp=function(_,$){var _e=this,et=_e.constructor;return _e=new et(_e),_===void 0?_e:(checkInt32(_,0,MAX_DIGITS),$===void 0?$=et.rounding:checkInt32($,0,8),round(_e,_+getBase10Exponent(_e)+1,$))};P.toExponential=function(_,$){var _e,et=this,tt=et.constructor;return _===void 0?_e=toString(et,!0):(checkInt32(_,0,MAX_DIGITS),$===void 0?$=tt.rounding:checkInt32($,0,8),et=round(new tt(et),_+1,$),_e=toString(et,!0,_+1)),_e};P.toFixed=function(_,$){var _e,et,tt=this,rt=tt.constructor;return _===void 0?toString(tt):(checkInt32(_,0,MAX_DIGITS),$===void 0?$=rt.rounding:checkInt32($,0,8),et=round(new rt(tt),_+getBase10Exponent(tt)+1,$),_e=toString(et.abs(),!1,_+getBase10Exponent(et)+1),tt.isneg()&&!tt.isZero()?"-"+_e:_e)};P.toInteger=P.toint=function(){var _=this,$=_.constructor;return round(new $(_),getBase10Exponent(_)+1,$.rounding)};P.toNumber=function(){return+this};P.toPower=P.pow=function(_){var $,_e,et,tt,rt,nt,it=this,st=it.constructor,at=12,ot=+(_=new st(_));if(!_.s)return new st(ONE);if(it=new st(it),!it.s){if(_.s<1)throw Error(decimalError+"Infinity");return it}if(it.eq(ONE))return it;if(et=st.precision,_.eq(ONE))return round(it,et);if($=_.e,_e=_.d.length-1,nt=$>=_e,rt=it.s,nt){if((_e=ot<0?-ot:ot)<=MAX_SAFE_INTEGER){for(tt=new st(ONE),$=Math.ceil(et/LOG_BASE+4),external=!1;_e%2&&(tt=tt.times(it),truncate(tt.d,$)),_e=mathfloor(_e/2),_e!==0;)it=it.times(it),truncate(it.d,$);return external=!0,_.s<0?new st(ONE).div(tt):round(tt,et)}}else if(rt<0)throw Error(decimalError+"NaN");return rt=rt<0&&_.d[Math.max($,_e)]&1?-1:1,it.s=1,external=!1,tt=_.times(ln(it,et+at)),external=!0,tt=exp(tt),tt.s=rt,tt};P.toPrecision=function(_,$){var _e,et,tt=this,rt=tt.constructor;return _===void 0?(_e=getBase10Exponent(tt),et=toString(tt,_e<=rt.toExpNeg||_e>=rt.toExpPos)):(checkInt32(_,1,MAX_DIGITS),$===void 0?$=rt.rounding:checkInt32($,0,8),tt=round(new rt(tt),_,$),_e=getBase10Exponent(tt),et=toString(tt,_<=_e||_e<=rt.toExpNeg,_)),et};P.toSignificantDigits=P.tosd=function(_,$){var _e=this,et=_e.constructor;return _===void 0?(_=et.precision,$=et.rounding):(checkInt32(_,1,MAX_DIGITS),$===void 0?$=et.rounding:checkInt32($,0,8)),round(new et(_e),_,$)};P.toString=P.valueOf=P.val=P.toJSON=P[Symbol.for("nodejs.util.inspect.custom")]=function(){var _=this,$=getBase10Exponent(_),_e=_.constructor;return toString(_,$<=_e.toExpNeg||$>=_e.toExpPos)};function add(_,$){var _e,et,tt,rt,nt,it,st,at,ot=_.constructor,dt=ot.precision;if(!_.s||!$.s)return $.s||($=new ot(_)),external?round($,dt):$;if(st=_.d,at=$.d,nt=_.e,tt=$.e,st=st.slice(),rt=nt-tt,rt){for(rt<0?(et=st,rt=-rt,it=at.length):(et=at,tt=nt,it=st.length),nt=Math.ceil(dt/LOG_BASE),it=nt>it?nt+1:it+1,rt>it&&(rt=it,et.length=1),et.reverse();rt--;)et.push(0);et.reverse()}for(it=st.length,rt=at.length,it-rt<0&&(rt=it,et=at,at=st,st=et),_e=0;rt;)_e=(st[--rt]=st[rt]+at[rt]+_e)/BASE|0,st[rt]%=BASE;for(_e&&(st.unshift(_e),++tt),it=st.length;st[--it]==0;)st.pop();return $.d=st,$.e=tt,external?round($,dt):$}function checkInt32(_,$,_e){if(_!==~~_||_<$||_>_e)throw Error(invalidArgument+_)}function digitsToString(_){var $,_e,et,tt=_.length-1,rt="",nt=_[0];if(tt>0){for(rt+=nt,$=1;$<tt;$++)et=_[$]+"",_e=LOG_BASE-et.length,_e&&(rt+=getZeroString(_e)),rt+=et;nt=_[$],et=nt+"",_e=LOG_BASE-et.length,_e&&(rt+=getZeroString(_e))}else if(nt===0)return"0";for(;nt%10===0;)nt/=10;return rt+nt}var divide=function(){function _(et,tt){var rt,nt=0,it=et.length;for(et=et.slice();it--;)rt=et[it]*tt+nt,et[it]=rt%BASE|0,nt=rt/BASE|0;return nt&&et.unshift(nt),et}function $(et,tt,rt,nt){var it,st;if(rt!=nt)st=rt>nt?1:-1;else for(it=st=0;it<rt;it++)if(et[it]!=tt[it]){st=et[it]>tt[it]?1:-1;break}return st}function _e(et,tt,rt){for(var nt=0;rt--;)et[rt]-=nt,nt=et[rt]<tt[rt]?1:0,et[rt]=nt*BASE+et[rt]-tt[rt];for(;!et[0]&&et.length>1;)et.shift()}return function(et,tt,rt,nt){var it,st,at,ot,dt,ht,yt,vt,xt,wt,Et,At,jt,kt,Lt,Bt,Gt,er,tr=et.constructor,ar=et.s==tt.s?1:-1,Mt=et.d,lt=tt.d;if(!et.s)return new tr(et);if(!tt.s)throw Error(decimalError+"Division by zero");for(st=et.e-tt.e,Gt=lt.length,Lt=Mt.length,yt=new tr(ar),vt=yt.d=[],at=0;lt[at]==(Mt[at]||0);)++at;if(lt[at]>(Mt[at]||0)&&--st,rt==null?At=rt=tr.precision:nt?At=rt+(getBase10Exponent(et)-getBase10Exponent(tt))+1:At=rt,At<0)return new tr(0);if(At=At/LOG_BASE+2|0,at=0,Gt==1)for(ot=0,lt=lt[0],At++;(at<Lt||ot)&&At--;at++)jt=ot*BASE+(Mt[at]||0),vt[at]=jt/lt|0,ot=jt%lt|0;else{for(ot=BASE/(lt[0]+1)|0,ot>1&&(lt=_(lt,ot),Mt=_(Mt,ot),Gt=lt.length,Lt=Mt.length),kt=Gt,xt=Mt.slice(0,Gt),wt=xt.length;wt<Gt;)xt[wt++]=0;er=lt.slice(),er.unshift(0),Bt=lt[0],lt[1]>=BASE/2&&++Bt;do ot=0,it=$(lt,xt,Gt,wt),it<0?(Et=xt[0],Gt!=wt&&(Et=Et*BASE+(xt[1]||0)),ot=Et/Bt|0,ot>1?(ot>=BASE&&(ot=BASE-1),dt=_(lt,ot),ht=dt.length,wt=xt.length,it=$(dt,xt,ht,wt),it==1&&(ot--,_e(dt,Gt<ht?er:lt,ht))):(ot==0&&(it=ot=1),dt=lt.slice()),ht=dt.length,ht<wt&&dt.unshift(0),_e(xt,dt,wt),it==-1&&(wt=xt.length,it=$(lt,xt,Gt,wt),it<1&&(ot++,_e(xt,Gt<wt?er:lt,wt))),wt=xt.length):it===0&&(ot++,xt=[0]),vt[at++]=ot,it&&xt[0]?xt[wt++]=Mt[kt]||0:(xt=[Mt[kt]],wt=1);while((kt++<Lt||xt[0]!==void 0)&&At--)}return vt[0]||vt.shift(),yt.e=st,round(yt,nt?rt+getBase10Exponent(yt)+1:rt)}}();function exp(_,$){var _e,et,tt,rt,nt,it,st=0,at=0,ot=_.constructor,dt=ot.precision;if(getBase10Exponent(_)>16)throw Error(exponentOutOfRange+getBase10Exponent(_));if(!_.s)return new ot(ONE);for($==null?(external=!1,it=dt):it=$,nt=new ot(.03125);_.abs().gte(.1);)_=_.times(nt),at+=5;for(et=Math.log(mathpow(2,at))/Math.LN10*2+5|0,it+=et,_e=tt=rt=new ot(ONE),ot.precision=it;;){if(tt=round(tt.times(_),it),_e=_e.times(++st),nt=rt.plus(divide(tt,_e,it)),digitsToString(nt.d).slice(0,it)===digitsToString(rt.d).slice(0,it)){for(;at--;)rt=round(rt.times(rt),it);return ot.precision=dt,$==null?(external=!0,round(rt,dt)):rt}rt=nt}}function getBase10Exponent(_){for(var $=_.e*LOG_BASE,_e=_.d[0];_e>=10;_e/=10)$++;return $}function getLn10(_,$,_e){if($>_.LN10.sd())throw external=!0,_e&&(_.precision=_e),Error(decimalError+"LN10 precision limit exceeded");return round(new _(_.LN10),$)}function getZeroString(_){for(var $="";_--;)$+="0";return $}function ln(_,$){var _e,et,tt,rt,nt,it,st,at,ot,dt=1,ht=10,yt=_,vt=yt.d,xt=yt.constructor,wt=xt.precision;if(yt.s<1)throw Error(decimalError+(yt.s?"NaN":"-Infinity"));if(yt.eq(ONE))return new xt(0);if($==null?(external=!1,at=wt):at=$,yt.eq(10))return $==null&&(external=!0),getLn10(xt,at);if(at+=ht,xt.precision=at,_e=digitsToString(vt),et=_e.charAt(0),rt=getBase10Exponent(yt),Math.abs(rt)<15e14){for(;et<7&&et!=1||et==1&&_e.charAt(1)>3;)yt=yt.times(_),_e=digitsToString(yt.d),et=_e.charAt(0),dt++;rt=getBase10Exponent(yt),et>1?(yt=new xt("0."+_e),rt++):yt=new xt(et+"."+_e.slice(1))}else return st=getLn10(xt,at+2,wt).times(rt+""),yt=ln(new xt(et+"."+_e.slice(1)),at-ht).plus(st),xt.precision=wt,$==null?(external=!0,round(yt,wt)):yt;for(it=nt=yt=divide(yt.minus(ONE),yt.plus(ONE),at),ot=round(yt.times(yt),at),tt=3;;){if(nt=round(nt.times(ot),at),st=it.plus(divide(nt,new xt(tt),at)),digitsToString(st.d).slice(0,at)===digitsToString(it.d).slice(0,at))return it=it.times(2),rt!==0&&(it=it.plus(getLn10(xt,at+2,wt).times(rt+""))),it=divide(it,new xt(dt),at),xt.precision=wt,$==null?(external=!0,round(it,wt)):it;it=st,tt+=2}}function parseDecimal(_,$){var _e,et,tt;for((_e=$.indexOf("."))>-1&&($=$.replace(".","")),(et=$.search(/e/i))>0?(_e<0&&(_e=et),_e+=+$.slice(et+1),$=$.substring(0,et)):_e<0&&(_e=$.length),et=0;$.charCodeAt(et)===48;)++et;for(tt=$.length;$.charCodeAt(tt-1)===48;)--tt;if($=$.slice(et,tt),$){if(tt-=et,_e=_e-et-1,_.e=mathfloor(_e/LOG_BASE),_.d=[],et=(_e+1)%LOG_BASE,_e<0&&(et+=LOG_BASE),et<tt){for(et&&_.d.push(+$.slice(0,et)),tt-=LOG_BASE;et<tt;)_.d.push(+$.slice(et,et+=LOG_BASE));$=$.slice(et),et=LOG_BASE-$.length}else et-=tt;for(;et--;)$+="0";if(_.d.push(+$),external&&(_.e>MAX_E||_.e<-MAX_E))throw Error(exponentOutOfRange+_e)}else _.s=0,_.e=0,_.d=[0];return _}function round(_,$,_e){var et,tt,rt,nt,it,st,at,ot,dt=_.d;for(nt=1,rt=dt[0];rt>=10;rt/=10)nt++;if(et=$-nt,et<0)et+=LOG_BASE,tt=$,at=dt[ot=0];else{if(ot=Math.ceil((et+1)/LOG_BASE),rt=dt.length,ot>=rt)return _;for(at=rt=dt[ot],nt=1;rt>=10;rt/=10)nt++;et%=LOG_BASE,tt=et-LOG_BASE+nt}if(_e!==void 0&&(rt=mathpow(10,nt-tt-1),it=at/rt%10|0,st=$<0||dt[ot+1]!==void 0||at%rt,st=_e<4?(it||st)&&(_e==0||_e==(_.s<0?3:2)):it>5||it==5&&(_e==4||st||_e==6&&(et>0?tt>0?at/mathpow(10,nt-tt):0:dt[ot-1])%10&1||_e==(_.s<0?8:7))),$<1||!dt[0])return st?(rt=getBase10Exponent(_),dt.length=1,$=$-rt-1,dt[0]=mathpow(10,(LOG_BASE-$%LOG_BASE)%LOG_BASE),_.e=mathfloor(-$/LOG_BASE)||0):(dt.length=1,dt[0]=_.e=_.s=0),_;if(et==0?(dt.length=ot,rt=1,ot--):(dt.length=ot+1,rt=mathpow(10,LOG_BASE-et),dt[ot]=tt>0?(at/mathpow(10,nt-tt)%mathpow(10,tt)|0)*rt:0),st)for(;;)if(ot==0){(dt[0]+=rt)==BASE&&(dt[0]=1,++_.e);break}else{if(dt[ot]+=rt,dt[ot]!=BASE)break;dt[ot--]=0,rt=1}for(et=dt.length;dt[--et]===0;)dt.pop();if(external&&(_.e>MAX_E||_.e<-MAX_E))throw Error(exponentOutOfRange+getBase10Exponent(_));return _}function subtract(_,$){var _e,et,tt,rt,nt,it,st,at,ot,dt,ht=_.constructor,yt=ht.precision;if(!_.s||!$.s)return $.s?$.s=-$.s:$=new ht(_),external?round($,yt):$;if(st=_.d,dt=$.d,et=$.e,at=_.e,st=st.slice(),nt=at-et,nt){for(ot=nt<0,ot?(_e=st,nt=-nt,it=dt.length):(_e=dt,et=at,it=st.length),tt=Math.max(Math.ceil(yt/LOG_BASE),it)+2,nt>tt&&(nt=tt,_e.length=1),_e.reverse(),tt=nt;tt--;)_e.push(0);_e.reverse()}else{for(tt=st.length,it=dt.length,ot=tt<it,ot&&(it=tt),tt=0;tt<it;tt++)if(st[tt]!=dt[tt]){ot=st[tt]<dt[tt];break}nt=0}for(ot&&(_e=st,st=dt,dt=_e,$.s=-$.s),it=st.length,tt=dt.length-it;tt>0;--tt)st[it++]=0;for(tt=dt.length;tt>nt;){if(st[--tt]<dt[tt]){for(rt=tt;rt&&st[--rt]===0;)st[rt]=BASE-1;--st[rt],st[tt]+=BASE}st[tt]-=dt[tt]}for(;st[--it]===0;)st.pop();for(;st[0]===0;st.shift())--et;return st[0]?($.d=st,$.e=et,external?round($,yt):$):new ht(0)}function toString(_,$,_e){var et,tt=getBase10Exponent(_),rt=digitsToString(_.d),nt=rt.length;return $?(_e&&(et=_e-nt)>0?rt=rt.charAt(0)+"."+rt.slice(1)+getZeroString(et):nt>1&&(rt=rt.charAt(0)+"."+rt.slice(1)),rt=rt+(tt<0?"e":"e+")+tt):tt<0?(rt="0."+getZeroString(-tt-1)+rt,_e&&(et=_e-nt)>0&&(rt+=getZeroString(et))):tt>=nt?(rt+=getZeroString(tt+1-nt),_e&&(et=_e-tt-1)>0&&(rt=rt+"."+getZeroString(et))):((et=tt+1)<nt&&(rt=rt.slice(0,et)+"."+rt.slice(et)),_e&&(et=_e-nt)>0&&(tt+1===nt&&(rt+="."),rt+=getZeroString(et))),_.s<0?"-"+rt:rt}function truncate(_,$){if(_.length>$)return _.length=$,!0}function clone(_){var $,_e,et;function tt(rt){var nt=this;if(!(nt instanceof tt))return new tt(rt);if(nt.constructor=tt,rt instanceof tt){nt.s=rt.s,nt.e=rt.e,nt.d=(rt=rt.d)?rt.slice():rt;return}if(typeof rt=="number"){if(rt*0!==0)throw Error(invalidArgument+rt);if(rt>0)nt.s=1;else if(rt<0)rt=-rt,nt.s=-1;else{nt.s=0,nt.e=0,nt.d=[0];return}if(rt===~~rt&&rt<1e7){nt.e=0,nt.d=[rt];return}return parseDecimal(nt,rt.toString())}else if(typeof rt!="string")throw Error(invalidArgument+rt);if(rt.charCodeAt(0)===45?(rt=rt.slice(1),nt.s=-1):nt.s=1,isDecimal.test(rt))parseDecimal(nt,rt);else throw Error(invalidArgument+rt)}if(tt.prototype=P,tt.ROUND_UP=0,tt.ROUND_DOWN=1,tt.ROUND_CEIL=2,tt.ROUND_FLOOR=3,tt.ROUND_HALF_UP=4,tt.ROUND_HALF_DOWN=5,tt.ROUND_HALF_EVEN=6,tt.ROUND_HALF_CEIL=7,tt.ROUND_HALF_FLOOR=8,tt.clone=clone,tt.config=tt.set=config,_===void 0&&(_={}),_)for(et=["precision","rounding","toExpNeg","toExpPos","LN10"],$=0;$<et.length;)_.hasOwnProperty(_e=et[$++])||(_[_e]=this[_e]);return tt.config(_),tt}function config(_){if(!_||typeof _!="object")throw Error(decimalError+"Object expected");var $,_e,et,tt=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for($=0;$<tt.length;$+=3)if((et=_[_e=tt[$]])!==void 0)if(mathfloor(et)===et&&et>=tt[$+1]&&et<=tt[$+2])this[_e]=et;else throw Error(invalidArgument+_e+": "+et);if((et=_[_e="LN10"])!==void 0)if(et==Math.LN10)this[_e]=new this(et);else throw Error(invalidArgument+_e+": "+et);return this}var Decimal=clone(defaults);ONE=new Decimal(1);const Decimal$1=Decimal;function _toConsumableArray$9(_){return _arrayWithoutHoles$9(_)||_iterableToArray$a(_)||_unsupportedIterableToArray$e(_)||_nonIterableSpread$9()}function _nonIterableSpread$9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$e(_,$){if(_){if(typeof _=="string")return _arrayLikeToArray$e(_,$);var _e=Object.prototype.toString.call(_).slice(8,-1);if(_e==="Object"&&_.constructor&&(_e=_.constructor.name),_e==="Map"||_e==="Set")return Array.from(_);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray$e(_,$)}}function _iterableToArray$a(_){if(typeof Symbol<"u"&&Symbol.iterator in Object(_))return Array.from(_)}function _arrayWithoutHoles$9(_){if(Array.isArray(_))return _arrayLikeToArray$e(_)}function _arrayLikeToArray$e(_,$){($==null||$>_.length)&&($=_.length);for(var _e=0,et=new Array($);_e<$;_e++)et[_e]=_[_e];return et}var identity$1=function _($){return $},PLACE_HOLDER={"@@functional/placeholder":!0},isPlaceHolder=function _($){return $===PLACE_HOLDER},curry0=function _($){return function _e(){return arguments.length===0||arguments.length===1&&isPlaceHolder(arguments.length<=0?void 0:arguments[0])?_e:$.apply(void 0,arguments)}},curryN=function _($,_e){return $===1?_e:curry0(function(){for(var et=arguments.length,tt=new Array(et),rt=0;rt<et;rt++)tt[rt]=arguments[rt];var nt=tt.filter(function(it){return it!==PLACE_HOLDER}).length;return nt>=$?_e.apply(void 0,tt):_($-nt,curry0(function(){for(var it=arguments.length,st=new Array(it),at=0;at<it;at++)st[at]=arguments[at];var ot=tt.map(function(dt){return isPlaceHolder(dt)?st.shift():dt});return _e.apply(void 0,_toConsumableArray$9(ot).concat(st))}))})},curry=function _($){return curryN($.length,$)},range$2=function _($,_e){for(var et=[],tt=$;tt<_e;++tt)et[tt-$]=tt;return et},map=curry(function(_,$){return Array.isArray($)?$.map(_):Object.keys($).map(function(_e){return $[_e]}).map(_)}),compose=function _(){for(var $=arguments.length,_e=new Array($),et=0;et<$;et++)_e[et]=arguments[et];if(!_e.length)return identity$1;var tt=_e.reverse(),rt=tt[0],nt=tt.slice(1);return function(){return nt.reduce(function(it,st){return st(it)},rt.apply(void 0,arguments))}},reverse=function _($){return Array.isArray($)?$.reverse():$.split("").reverse.join("")},memoize=function _($){var _e=null,et=null;return function(){for(var tt=arguments.length,rt=new Array(tt),nt=0;nt<tt;nt++)rt[nt]=arguments[nt];return _e&&rt.every(function(it,st){return it===_e[st]})||(_e=rt,et=$.apply(void 0,rt)),et}};function getDigitCount(_){var $;return _===0?$=1:$=Math.floor(new Decimal$1(_).abs().log(10).toNumber())+1,$}function rangeStep(_,$,_e){for(var et=new Decimal$1(_),tt=0,rt=[];et.lt($)&&tt<1e5;)rt.push(et.toNumber()),et=et.add(_e),tt++;return rt}var interpolateNumber=curry(function(_,$,_e){var et=+_,tt=+$;return et+_e*(tt-et)}),uninterpolateNumber=curry(function(_,$,_e){var et=$-+_;return et=et||1/0,(_e-_)/et}),uninterpolateTruncation=curry(function(_,$,_e){var et=$-+_;return et=et||1/0,Math.max(0,Math.min(1,(_e-_)/et))});const Arithmetic={rangeStep,getDigitCount,interpolateNumber,uninterpolateNumber,uninterpolateTruncation};function _toConsumableArray$8(_){return _arrayWithoutHoles$8(_)||_iterableToArray$9(_)||_unsupportedIterableToArray$d(_)||_nonIterableSpread$8()}function _nonIterableSpread$8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$9(_){if(typeof Symbol<"u"&&Symbol.iterator in Object(_))return Array.from(_)}function _arrayWithoutHoles$8(_){if(Array.isArray(_))return _arrayLikeToArray$d(_)}function _slicedToArray$7(_,$){return _arrayWithHoles$8(_)||_iterableToArrayLimit$7(_,$)||_unsupportedIterableToArray$d(_,$)||_nonIterableRest$8()}function _nonIterableRest$8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$d(_,$){if(_){if(typeof _=="string")return _arrayLikeToArray$d(_,$);var _e=Object.prototype.toString.call(_).slice(8,-1);if(_e==="Object"&&_.constructor&&(_e=_.constructor.name),_e==="Map"||_e==="Set")return Array.from(_);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray$d(_,$)}}function _arrayLikeToArray$d(_,$){($==null||$>_.length)&&($=_.length);for(var _e=0,et=new Array($);_e<$;_e++)et[_e]=_[_e];return et}function _iterableToArrayLimit$7(_,$){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(_)))){var _e=[],et=!0,tt=!1,rt=void 0;try{for(var nt=_[Symbol.iterator](),it;!(et=(it=nt.next()).done)&&(_e.push(it.value),!($&&_e.length===$));et=!0);}catch(st){tt=!0,rt=st}finally{try{!et&&nt.return!=null&&nt.return()}finally{if(tt)throw rt}}return _e}}function _arrayWithHoles$8(_){if(Array.isArray(_))return _}function getValidInterval(_){var $=_slicedToArray$7(_,2),_e=$[0],et=$[1],tt=_e,rt=et;return _e>et&&(tt=et,rt=_e),[tt,rt]}function getFormatStep(_,$,_e){if(_.lte(0))return new Decimal$1(0);var et=Arithmetic.getDigitCount(_.toNumber()),tt=new Decimal$1(10).pow(et),rt=_.div(tt),nt=et!==1?.05:.1,it=new Decimal$1(Math.ceil(rt.div(nt).toNumber())).add(_e).mul(nt),st=it.mul(tt);return $?st:new Decimal$1(Math.ceil(st))}function getTickOfSingleValue(_,$,_e){var et=1,tt=new Decimal$1(_);if(!tt.isint()&&_e){var rt=Math.abs(_);rt<1?(et=new Decimal$1(10).pow(Arithmetic.getDigitCount(_)-1),tt=new Decimal$1(Math.floor(tt.div(et).toNumber())).mul(et)):rt>1&&(tt=new Decimal$1(Math.floor(_)))}else _===0?tt=new Decimal$1(Math.floor(($-1)/2)):_e||(tt=new Decimal$1(Math.floor(_)));var nt=Math.floor(($-1)/2),it=compose(map(function(st){return tt.add(new Decimal$1(st-nt).mul(et)).toNumber()}),range$2);return it(0,$)}function calculateStep(_,$,_e,et){var tt=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite(($-_)/(_e-1)))return{step:new Decimal$1(0),tickMin:new Decimal$1(0),tickMax:new Decimal$1(0)};var rt=getFormatStep(new Decimal$1($).sub(_).div(_e-1),et,tt),nt;_<=0&&$>=0?nt=new Decimal$1(0):(nt=new Decimal$1(_).add($).div(2),nt=nt.sub(new Decimal$1(nt).mod(rt)));var it=Math.ceil(nt.sub(_).div(rt).toNumber()),st=Math.ceil(new Decimal$1($).sub(nt).div(rt).toNumber()),at=it+st+1;return at>_e?calculateStep(_,$,_e,et,tt+1):(at<_e&&(st=$>0?st+(_e-at):st,it=$>0?it:it+(_e-at)),{step:rt,tickMin:nt.sub(new Decimal$1(it).mul(rt)),tickMax:nt.add(new Decimal$1(st).mul(rt))})}function getNiceTickValuesFn(_){var $=_slicedToArray$7(_,2),_e=$[0],et=$[1],tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,nt=Math.max(tt,2),it=getValidInterval([_e,et]),st=_slicedToArray$7(it,2),at=st[0],ot=st[1];if(at===-1/0||ot===1/0){var dt=ot===1/0?[at].concat(_toConsumableArray$8(range$2(0,tt-1).map(function(){return 1/0}))):[].concat(_toConsumableArray$8(range$2(0,tt-1).map(function(){return-1/0})),[ot]);return _e>et?reverse(dt):dt}if(at===ot)return getTickOfSingleValue(at,tt,rt);var ht=calculateStep(at,ot,nt,rt),yt=ht.step,vt=ht.tickMin,xt=ht.tickMax,wt=Arithmetic.rangeStep(vt,xt.add(new Decimal$1(.1).mul(yt)),yt);return _e>et?reverse(wt):wt}function getTickValuesFixedDomainFn(_,$){var _e=_slicedToArray$7(_,2),et=_e[0],tt=_e[1],rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,nt=getValidInterval([et,tt]),it=_slicedToArray$7(nt,2),st=it[0],at=it[1];if(st===-1/0||at===1/0)return[et,tt];if(st===at)return[st];var ot=Math.max($,2),dt=getFormatStep(new Decimal$1(at).sub(st).div(ot-1),rt,0),ht=[].concat(_toConsumableArray$8(Arithmetic.rangeStep(new Decimal$1(st),new Decimal$1(at).sub(new Decimal$1(.99).mul(dt)),dt)),[at]);return et>tt?reverse(ht):ht}var getNiceTickValues=memoize(getNiceTickValuesFn),getTickValuesFixedDomain=memoize(getTickValuesFixedDomainFn),prefix="Invariant failed";function invariant(_,$){throw new Error(prefix)}var _excluded$b=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function _typeof$w(_){"@babel/helpers - typeof";return _typeof$w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$w(_)}function _extends$k(){return _extends$k=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$k.apply(this,arguments)}function _slicedToArray$6(_,$){return _arrayWithHoles$7(_)||_iterableToArrayLimit$6(_,$)||_unsupportedIterableToArray$c(_,$)||_nonIterableRest$7()}function _nonIterableRest$7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$c(_,$){if(_){if(typeof _=="string")return _arrayLikeToArray$c(_,$);var _e=Object.prototype.toString.call(_).slice(8,-1);if(_e==="Object"&&_.constructor&&(_e=_.constructor.name),_e==="Map"||_e==="Set")return Array.from(_);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray$c(_,$)}}function _arrayLikeToArray$c(_,$){($==null||$>_.length)&&($=_.length);for(var _e=0,et=new Array($);_e<$;_e++)et[_e]=_[_e];return et}function _iterableToArrayLimit$6(_,$){var _e=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(_e!=null){var et,tt,rt,nt,it=[],st=!0,at=!1;try{if(rt=(_e=_e.call(_)).next,$!==0)for(;!(st=(et=rt.call(_e)).done)&&(it.push(et.value),it.length!==$);st=!0);}catch(ot){at=!0,tt=ot}finally{try{if(!st&&_e.return!=null&&(nt=_e.return(),Object(nt)!==nt))return}finally{if(at)throw tt}}return it}}function _arrayWithHoles$7(_){if(Array.isArray(_))return _}function _objectWithoutProperties$b(_,$){if(_==null)return{};var _e=_objectWithoutPropertiesLoose$b(_,$),et,tt;if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_);for(tt=0;tt<rt.length;tt++)et=rt[tt],!($.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call(_,et)&&(_e[et]=_[et])}return _e}function _objectWithoutPropertiesLoose$b(_,$){if(_==null)return{};var _e={};for(var et in _)if(Object.prototype.hasOwnProperty.call(_,et)){if($.indexOf(et)>=0)continue;_e[et]=_[et]}return _e}function _classCallCheck$d(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties$d(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,_toPropertyKey$v(et.key),et)}}function _createClass$d(_,$,_e){return $&&_defineProperties$d(_.prototype,$),Object.defineProperty(_,"prototype",{writable:!1}),_}function _callSuper$a(_,$,_e){return $=_getPrototypeOf$b($),_possibleConstructorReturn$b(_,_isNativeReflectConstruct$b()?Reflect.construct($,_e||[],_getPrototypeOf$b(_).constructor):$.apply(_,_e))}function _possibleConstructorReturn$b(_,$){if($&&(_typeof$w($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$b(_)}function _assertThisInitialized$b(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _isNativeReflectConstruct$b(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$b=function(){return!!_})()}function _getPrototypeOf$b(_){return _getPrototypeOf$b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},_getPrototypeOf$b(_)}function _inherits$b(_,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create($&&$.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),$&&_setPrototypeOf$b(_,$)}function _setPrototypeOf$b(_,$){return _setPrototypeOf$b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(et,tt){return et.__proto__=tt,et},_setPrototypeOf$b(_,$)}function _defineProperty$v(_,$,_e){return $=_toPropertyKey$v($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$v(_){var $=_toPrimitive$v(_,"string");return _typeof$w($)=="symbol"?$:$+""}function _toPrimitive$v(_,$){if(_typeof$w(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$w(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var ErrorBar=function(_){function $(){return _classCallCheck$d(this,$),_callSuper$a(this,$,arguments)}return _inherits$b($,_),_createClass$d($,[{key:"render",value:function(){var et=this.props,tt=et.offset,rt=et.layout,nt=et.width,it=et.dataKey,st=et.data,at=et.dataPointFormatter,ot=et.xAxis,dt=et.yAxis,ht=_objectWithoutProperties$b(et,_excluded$b),yt=filterProps(ht,!1);this.props.direction==="x"&&ot.type!=="number"&&invariant();var vt=st.map(function(xt){var wt=at(xt,it),Et=wt.x,At=wt.y,jt=wt.value,kt=wt.errorVal;if(!kt)return null;var Lt=[],Bt,Gt;if(Array.isArray(kt)){var er=_slicedToArray$6(kt,2);Bt=er[0],Gt=er[1]}else Bt=Gt=kt;if(rt==="vertical"){var tr=ot.scale,ar=At+tt,Mt=ar+nt,lt=ar-nt,mt=tr(jt-Bt),gt=tr(jt+Gt);Lt.push({x1:gt,y1:Mt,x2:gt,y2:lt}),Lt.push({x1:mt,y1:ar,x2:gt,y2:ar}),Lt.push({x1:mt,y1:Mt,x2:mt,y2:lt})}else if(rt==="horizontal"){var bt=dt.scale,St=Et+tt,Nt=St-nt,Pt=St+nt,Tt=bt(jt-Bt),pt=bt(jt+Gt);Lt.push({x1:Nt,y1:pt,x2:Pt,y2:pt}),Lt.push({x1:St,y1:Tt,x2:St,y2:pt}),Lt.push({x1:Nt,y1:Tt,x2:Pt,y2:Tt})}return React.createElement(Layer,_extends$k({className:"recharts-errorBar",key:"bar-".concat(Lt.map(function(Rt){return"".concat(Rt.x1,"-").concat(Rt.x2,"-").concat(Rt.y1,"-").concat(Rt.y2)}))},yt),Lt.map(function(Rt){return React.createElement("line",_extends$k({},Rt,{key:"line-".concat(Rt.x1,"-").concat(Rt.x2,"-").concat(Rt.y1,"-").concat(Rt.y2)}))}))});return React.createElement(Layer,{className:"recharts-errorBars"},vt)}}])}(React.Component);_defineProperty$v(ErrorBar,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});_defineProperty$v(ErrorBar,"displayName","ErrorBar");function _typeof$v(_){"@babel/helpers - typeof";return _typeof$v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$v(_)}function ownKeys$r(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$r(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$r(Object(_e),!0).forEach(function(et){_defineProperty$u(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$r(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$u(_,$,_e){return $=_toPropertyKey$u($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$u(_){var $=_toPrimitive$u(_,"string");return _typeof$v($)=="symbol"?$:$+""}function _toPrimitive$u(_,$){if(_typeof$v(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$v(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var getLegendProps=function _($){var _e=$.children,et=$.formattedGraphicalItems,tt=$.legendWidth,rt=$.legendContent,nt=findChildByType(_e,Legend);if(!nt)return null;var it=Legend.defaultProps,st=it!==void 0?_objectSpread$r(_objectSpread$r({},it),nt.props):{},at;return nt.props&&nt.props.payload?at=nt.props&&nt.props.payload:rt==="children"?at=(et||[]).reduce(function(ot,dt){var ht=dt.item,yt=dt.props,vt=yt.sectors||yt.data||[];return ot.concat(vt.map(function(xt){return{type:nt.props.iconType||ht.props.legendType,value:xt.name,color:xt.fill,payload:xt}}))},[]):at=(et||[]).map(function(ot){var dt=ot.item,ht=dt.type.defaultProps,yt=ht!==void 0?_objectSpread$r(_objectSpread$r({},ht),dt.props):{},vt=yt.dataKey,xt=yt.name,wt=yt.legendType,Et=yt.hide;return{inactive:Et,dataKey:vt,type:st.iconType||wt||"square",color:getMainColorOfGraphicItem(dt),value:xt||vt,payload:yt}}),_objectSpread$r(_objectSpread$r(_objectSpread$r({},st),Legend.getWithHeight(nt,tt)),{},{payload:at,item:nt})};function _typeof$u(_){"@babel/helpers - typeof";return _typeof$u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$u(_)}function _toConsumableArray$7(_){return _arrayWithoutHoles$7(_)||_iterableToArray$8(_)||_unsupportedIterableToArray$b(_)||_nonIterableSpread$7()}function _nonIterableSpread$7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$b(_,$){if(_){if(typeof _=="string")return _arrayLikeToArray$b(_,$);var _e=Object.prototype.toString.call(_).slice(8,-1);if(_e==="Object"&&_.constructor&&(_e=_.constructor.name),_e==="Map"||_e==="Set")return Array.from(_);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray$b(_,$)}}function _iterableToArray$8(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function _arrayWithoutHoles$7(_){if(Array.isArray(_))return _arrayLikeToArray$b(_)}function _arrayLikeToArray$b(_,$){($==null||$>_.length)&&($=_.length);for(var _e=0,et=new Array($);_e<$;_e++)et[_e]=_[_e];return et}function ownKeys$q(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$q(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$q(Object(_e),!0).forEach(function(et){_defineProperty$t(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$q(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$t(_,$,_e){return $=_toPropertyKey$t($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$t(_){var $=_toPrimitive$t(_,"string");return _typeof$u($)=="symbol"?$:$+""}function _toPrimitive$t(_,$){if(_typeof$u(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$u(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}function getValueByDataKey(_,$,_e){return isNil$1(_)||isNil$1($)?_e:isNumOrStr($)?get$2(_,$,_e):isFunction$3($)?$(_):_e}function getDomainOfDataByKey(_,$,_e,et){var tt=flatMap$1(_,function(it){return getValueByDataKey(it,$)});if(_e==="number"){var rt=tt.filter(function(it){return isNumber(it)||parseFloat(it)});return rt.length?[min$1(rt),max$1(rt)]:[1/0,-1/0]}var nt=et?tt.filter(function(it){return!isNil$1(it)}):tt;return nt.map(function(it){return isNumOrStr(it)||it instanceof Date?it:""})}var calculateActiveTickIndex=function _($){var _e,et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],tt=arguments.length>2?arguments[2]:void 0,rt=arguments.length>3?arguments[3]:void 0,nt=-1,it=(_e=et==null?void 0:et.length)!==null&&_e!==void 0?_e:0;if(it<=1)return 0;if(rt&&rt.axisType==="angleAxis"&&Math.abs(Math.abs(rt.range[1]-rt.range[0])-360)<=1e-6)for(var st=rt.range,at=0;at<it;at++){var ot=at>0?tt[at-1].coordinate:tt[it-1].coordinate,dt=tt[at].coordinate,ht=at>=it-1?tt[0].coordinate:tt[at+1].coordinate,yt=void 0;if(mathSign(dt-ot)!==mathSign(ht-dt)){var vt=[];if(mathSign(ht-dt)===mathSign(st[1]-st[0])){yt=ht;var xt=dt+st[1]-st[0];vt[0]=Math.min(xt,(xt+ot)/2),vt[1]=Math.max(xt,(xt+ot)/2)}else{yt=ot;var wt=ht+st[1]-st[0];vt[0]=Math.min(dt,(wt+dt)/2),vt[1]=Math.max(dt,(wt+dt)/2)}var Et=[Math.min(dt,(yt+dt)/2),Math.max(dt,(yt+dt)/2)];if($>Et[0]&&$<=Et[1]||$>=vt[0]&&$<=vt[1]){nt=tt[at].index;break}}else{var At=Math.min(ot,ht),jt=Math.max(ot,ht);if($>(At+dt)/2&&$<=(jt+dt)/2){nt=tt[at].index;break}}}else for(var kt=0;kt<it;kt++)if(kt===0&&$<=(et[kt].coordinate+et[kt+1].coordinate)/2||kt>0&&kt<it-1&&$>(et[kt].coordinate+et[kt-1].coordinate)/2&&$<=(et[kt].coordinate+et[kt+1].coordinate)/2||kt===it-1&&$>(et[kt].coordinate+et[kt-1].coordinate)/2){nt=et[kt].index;break}return nt},getMainColorOfGraphicItem=function _($){var _e,et=$,tt=et.type.displayName,rt=(_e=$.type)!==null&&_e!==void 0&&_e.defaultProps?_objectSpread$q(_objectSpread$q({},$.type.defaultProps),$.props):$.props,nt=rt.stroke,it=rt.fill,st;switch(tt){case"Line":st=nt;break;case"Area":case"Radar":st=nt&&nt!=="none"?nt:it;break;default:st=it;break}return st},getBarSizeList=function _($){var _e=$.barSize,et=$.totalSize,tt=$.stackGroups,rt=tt===void 0?{}:tt;if(!rt)return{};for(var nt={},it=Object.keys(rt),st=0,at=it.length;st<at;st++)for(var ot=rt[it[st]].stackGroups,dt=Object.keys(ot),ht=0,yt=dt.length;ht<yt;ht++){var vt=ot[dt[ht]],xt=vt.items,wt=vt.cateAxisId,Et=xt.filter(function(Gt){return getDisplayName(Gt.type).indexOf("Bar")>=0});if(Et&&Et.length){var At=Et[0].type.defaultProps,jt=At!==void 0?_objectSpread$q(_objectSpread$q({},At),Et[0].props):Et[0].props,kt=jt.barSize,Lt=jt[wt];nt[Lt]||(nt[Lt]=[]);var Bt=isNil$1(kt)?_e:kt;nt[Lt].push({item:Et[0],stackList:Et.slice(1),barSize:isNil$1(Bt)?void 0:getPercentValue(Bt,et,0)})}}return nt},getBarPosition=function _($){var _e=$.barGap,et=$.barCategoryGap,tt=$.bandSize,rt=$.sizeList,nt=rt===void 0?[]:rt,it=$.maxBarSize,st=nt.length;if(st<1)return null;var at=getPercentValue(_e,tt,0,!0),ot,dt=[];if(nt[0].barSize===+nt[0].barSize){var ht=!1,yt=tt/st,vt=nt.reduce(function(kt,Lt){return kt+Lt.barSize||0},0);vt+=(st-1)*at,vt>=tt&&(vt-=(st-1)*at,at=0),vt>=tt&&yt>0&&(ht=!0,yt*=.9,vt=st*yt);var xt=(tt-vt)/2>>0,wt={offset:xt-at,size:0};ot=nt.reduce(function(kt,Lt){var Bt={item:Lt.item,position:{offset:wt.offset+wt.size+at,size:ht?yt:Lt.barSize}},Gt=[].concat(_toConsumableArray$7(kt),[Bt]);return wt=Gt[Gt.length-1].position,Lt.stackList&&Lt.stackList.length&&Lt.stackList.forEach(function(er){Gt.push({item:er,position:wt})}),Gt},dt)}else{var Et=getPercentValue(et,tt,0,!0);tt-2*Et-(st-1)*at<=0&&(at=0);var At=(tt-2*Et-(st-1)*at)/st;At>1&&(At>>=0);var jt=it===+it?Math.min(At,it):At;ot=nt.reduce(function(kt,Lt,Bt){var Gt=[].concat(_toConsumableArray$7(kt),[{item:Lt.item,position:{offset:Et+(At+at)*Bt+(At-jt)/2,size:jt}}]);return Lt.stackList&&Lt.stackList.length&&Lt.stackList.forEach(function(er){Gt.push({item:er,position:Gt[Gt.length-1].position})}),Gt},dt)}return ot},appendOffsetOfLegend=function _($,_e,et,tt){var rt=et.children,nt=et.width,it=et.margin,st=nt-(it.left||0)-(it.right||0),at=getLegendProps({children:rt,legendWidth:st});if(at){var ot=tt||{},dt=ot.width,ht=ot.height,yt=at.align,vt=at.verticalAlign,xt=at.layout;if((xt==="vertical"||xt==="horizontal"&&vt==="middle")&&yt!=="center"&&isNumber($[yt]))return _objectSpread$q(_objectSpread$q({},$),{},_defineProperty$t({},yt,$[yt]+(dt||0)));if((xt==="horizontal"||xt==="vertical"&&yt==="center")&&vt!=="middle"&&isNumber($[vt]))return _objectSpread$q(_objectSpread$q({},$),{},_defineProperty$t({},vt,$[vt]+(ht||0)))}return $},isErrorBarRelevantForAxis=function _($,_e,et){return isNil$1(_e)?!0:$==="horizontal"?_e==="yAxis":$==="vertical"||et==="x"?_e==="xAxis":et==="y"?_e==="yAxis":!0},getDomainOfErrorBars=function _($,_e,et,tt,rt){var nt=_e.props.children,it=findAllByType(nt,ErrorBar).filter(function(at){return isErrorBarRelevantForAxis(tt,rt,at.props.direction)});if(it&&it.length){var st=it.map(function(at){return at.props.dataKey});return $.reduce(function(at,ot){var dt=getValueByDataKey(ot,et);if(isNil$1(dt))return at;var ht=Array.isArray(dt)?[min$1(dt),max$1(dt)]:[dt,dt],yt=st.reduce(function(vt,xt){var wt=getValueByDataKey(ot,xt,0),Et=ht[0]-Math.abs(Array.isArray(wt)?wt[0]:wt),At=ht[1]+Math.abs(Array.isArray(wt)?wt[1]:wt);return[Math.min(Et,vt[0]),Math.max(At,vt[1])]},[1/0,-1/0]);return[Math.min(yt[0],at[0]),Math.max(yt[1],at[1])]},[1/0,-1/0])}return null},parseErrorBarsOfAxis=function _($,_e,et,tt,rt){var nt=_e.map(function(it){return getDomainOfErrorBars($,it,et,rt,tt)}).filter(function(it){return!isNil$1(it)});return nt&&nt.length?nt.reduce(function(it,st){return[Math.min(it[0],st[0]),Math.max(it[1],st[1])]},[1/0,-1/0]):null},getDomainOfItemsWithSameAxis=function _($,_e,et,tt,rt){var nt=_e.map(function(st){var at=st.props.dataKey;return et==="number"&&at&&getDomainOfErrorBars($,st,at,tt)||getDomainOfDataByKey($,at,et,rt)});if(et==="number")return nt.reduce(function(st,at){return[Math.min(st[0],at[0]),Math.max(st[1],at[1])]},[1/0,-1/0]);var it={};return nt.reduce(function(st,at){for(var ot=0,dt=at.length;ot<dt;ot++)it[at[ot]]||(it[at[ot]]=!0,st.push(at[ot]));return st},[])},isCategoricalAxis=function _($,_e){return $==="horizontal"&&_e==="xAxis"||$==="vertical"&&_e==="yAxis"||$==="centric"&&_e==="angleAxis"||$==="radial"&&_e==="radiusAxis"},getCoordinatesOfGrid=function _($,_e,et,tt){if(tt)return $.map(function(st){return st.coordinate});var rt,nt,it=$.map(function(st){return st.coordinate===_e&&(rt=!0),st.coordinate===et&&(nt=!0),st.coordinate});return rt||it.push(_e),nt||it.push(et),it},getTicksOfAxis=function _($,_e,et){if(!$)return null;var tt=$.scale,rt=$.duplicateDomain,nt=$.type,it=$.range,st=$.realScaleType==="scaleBand"?tt.bandwidth()/2:2,at=(_e||et)&&nt==="category"&&tt.bandwidth?tt.bandwidth()/st:0;if(at=$.axisType==="angleAxis"&&(it==null?void 0:it.length)>=2?mathSign(it[0]-it[1])*2*at:at,_e&&($.ticks||$.niceTicks)){var ot=($.ticks||$.niceTicks).map(function(dt){var ht=rt?rt.indexOf(dt):dt;return{coordinate:tt(ht)+at,value:dt,offset:at}});return ot.filter(function(dt){return!isNan(dt.coordinate)})}return $.isCategorical&&$.categoricalDomain?$.categoricalDomain.map(function(dt,ht){return{coordinate:tt(dt)+at,value:dt,index:ht,offset:at}}):tt.ticks&&!et?tt.ticks($.tickCount).map(function(dt){return{coordinate:tt(dt)+at,value:dt,offset:at}}):tt.domain().map(function(dt,ht){return{coordinate:tt(dt)+at,value:rt?rt[dt]:dt,index:ht,offset:at}})},handlerWeakMap=new WeakMap,combineEventHandlers=function _($,_e){if(typeof _e!="function")return $;handlerWeakMap.has($)||handlerWeakMap.set($,new WeakMap);var et=handlerWeakMap.get($);if(et.has(_e))return et.get(_e);var tt=function(){$.apply(void 0,arguments),_e.apply(void 0,arguments)};return et.set(_e,tt),tt},parseScale=function _($,_e,et){var tt=$.scale,rt=$.type,nt=$.layout,it=$.axisType;if(tt==="auto")return nt==="radial"&&it==="radiusAxis"?{scale:band(),realScaleType:"band"}:nt==="radial"&&it==="angleAxis"?{scale:linear(),realScaleType:"linear"}:rt==="category"&&_e&&(_e.indexOf("LineChart")>=0||_e.indexOf("AreaChart")>=0||_e.indexOf("ComposedChart")>=0&&!et)?{scale:point(),realScaleType:"point"}:rt==="category"?{scale:band(),realScaleType:"band"}:{scale:linear(),realScaleType:"linear"};if(isString$1(tt)){var st="scale".concat(upperFirst$1(tt));return{scale:(d3Scales[st]||point)(),realScaleType:d3Scales[st]?st:"point"}}return isFunction$3(tt)?{scale:tt}:{scale:point(),realScaleType:"point"}},EPS=1e-4,checkDomainOfScale=function _($){var _e=$.domain();if(!(!_e||_e.length<=2)){var et=_e.length,tt=$.range(),rt=Math.min(tt[0],tt[1])-EPS,nt=Math.max(tt[0],tt[1])+EPS,it=$(_e[0]),st=$(_e[et-1]);(it<rt||it>nt||st<rt||st>nt)&&$.domain([_e[0],_e[et-1]])}},findPositionOfBar=function _($,_e){if(!$)return null;for(var et=0,tt=$.length;et<tt;et++)if($[et].item===_e)return $[et].position;return null},truncateByDomain=function _($,_e){if(!_e||_e.length!==2||!isNumber(_e[0])||!isNumber(_e[1]))return $;var et=Math.min(_e[0],_e[1]),tt=Math.max(_e[0],_e[1]),rt=[$[0],$[1]];return(!isNumber($[0])||$[0]<et)&&(rt[0]=et),(!isNumber($[1])||$[1]>tt)&&(rt[1]=tt),rt[0]>tt&&(rt[0]=tt),rt[1]<et&&(rt[1]=et),rt},offsetSign=function _($){var _e=$.length;if(!(_e<=0))for(var et=0,tt=$[0].length;et<tt;++et)for(var rt=0,nt=0,it=0;it<_e;++it){var st=isNan($[it][et][1])?$[it][et][0]:$[it][et][1];st>=0?($[it][et][0]=rt,$[it][et][1]=rt+st,rt=$[it][et][1]):($[it][et][0]=nt,$[it][et][1]=nt+st,nt=$[it][et][1])}},offsetPositive=function _($){var _e=$.length;if(!(_e<=0))for(var et=0,tt=$[0].length;et<tt;++et)for(var rt=0,nt=0;nt<_e;++nt){var it=isNan($[nt][et][1])?$[nt][et][0]:$[nt][et][1];it>=0?($[nt][et][0]=rt,$[nt][et][1]=rt+it,rt=$[nt][et][1]):($[nt][et][0]=0,$[nt][et][1]=0)}},STACK_OFFSET_MAP={sign:offsetSign,expand:stackOffsetExpand,none:stackOffsetNone,silhouette:stackOffsetSilhouette,wiggle:stackOffsetWiggle,positive:offsetPositive},getStackedData=function _($,_e,et){var tt=_e.map(function(it){return it.props.dataKey}),rt=STACK_OFFSET_MAP[et],nt=shapeStack().keys(tt).value(function(it,st){return+getValueByDataKey(it,st,0)}).order(stackOrderNone).offset(rt);return nt($)},getStackGroupsByAxisId=function _($,_e,et,tt,rt,nt){if(!$)return null;var it=nt?_e.reverse():_e,st={},at=it.reduce(function(dt,ht){var yt,vt=(yt=ht.type)!==null&&yt!==void 0&&yt.defaultProps?_objectSpread$q(_objectSpread$q({},ht.type.defaultProps),ht.props):ht.props,xt=vt.stackId,wt=vt.hide;if(wt)return dt;var Et=vt[et],At=dt[Et]||{hasStack:!1,stackGroups:{}};if(isNumOrStr(xt)){var jt=At.stackGroups[xt]||{numericAxisId:et,cateAxisId:tt,items:[]};jt.items.push(ht),At.hasStack=!0,At.stackGroups[xt]=jt}else At.stackGroups[uniqueId("_stackId_")]={numericAxisId:et,cateAxisId:tt,items:[ht]};return _objectSpread$q(_objectSpread$q({},dt),{},_defineProperty$t({},Et,At))},st),ot={};return Object.keys(at).reduce(function(dt,ht){var yt=at[ht];if(yt.hasStack){var vt={};yt.stackGroups=Object.keys(yt.stackGroups).reduce(function(xt,wt){var Et=yt.stackGroups[wt];return _objectSpread$q(_objectSpread$q({},xt),{},_defineProperty$t({},wt,{numericAxisId:et,cateAxisId:tt,items:Et.items,stackedData:getStackedData($,Et.items,rt)}))},vt)}return _objectSpread$q(_objectSpread$q({},dt),{},_defineProperty$t({},ht,yt))},ot)},getTicksOfScale=function _($,_e){var et=_e.realScaleType,tt=_e.type,rt=_e.tickCount,nt=_e.originalDomain,it=_e.allowDecimals,st=et||_e.scale;if(st!=="auto"&&st!=="linear")return null;if(rt&&tt==="number"&&nt&&(nt[0]==="auto"||nt[1]==="auto")){var at=$.domain();if(!at.length)return null;var ot=getNiceTickValues(at,rt,it);return $.domain([min$1(ot),max$1(ot)]),{niceTicks:ot}}if(rt&&tt==="number"){var dt=$.domain(),ht=getTickValuesFixedDomain(dt,rt,it);return{niceTicks:ht}}return null};function getCateCoordinateOfLine(_){var $=_.axis,_e=_.ticks,et=_.bandSize,tt=_.entry,rt=_.index,nt=_.dataKey;if($.type==="category"){if(!$.allowDuplicatedCategory&&$.dataKey&&!isNil$1(tt[$.dataKey])){var it=findEntryInArray(_e,"value",tt[$.dataKey]);if(it)return it.coordinate+et/2}return _e[rt]?_e[rt].coordinate+et/2:null}var st=getValueByDataKey(tt,isNil$1(nt)?$.dataKey:nt);return isNil$1(st)?null:$.scale(st)}var getCateCoordinateOfBar=function _($){var _e=$.axis,et=$.ticks,tt=$.offset,rt=$.bandSize,nt=$.entry,it=$.index;if(_e.type==="category")return et[it]?et[it].coordinate+tt:null;var st=getValueByDataKey(nt,_e.dataKey,_e.domain[it]);return isNil$1(st)?null:_e.scale(st)-rt/2+tt},getBaseValueOfBar=function _($){var _e=$.numericAxis,et=_e.scale.domain();if(_e.type==="number"){var tt=Math.min(et[0],et[1]),rt=Math.max(et[0],et[1]);return tt<=0&&rt>=0?0:rt<0?rt:tt}return et[0]},getStackedDataOfItem=function _($,_e){var et,tt=(et=$.type)!==null&&et!==void 0&&et.defaultProps?_objectSpread$q(_objectSpread$q({},$.type.defaultProps),$.props):$.props,rt=tt.stackId;if(isNumOrStr(rt)){var nt=_e[rt];if(nt){var it=nt.items.indexOf($);return it>=0?nt.stackedData[it]:null}}return null},getDomainOfSingle=function _($){return $.reduce(function(_e,et){return[min$1(et.concat([_e[0]]).filter(isNumber)),max$1(et.concat([_e[1]]).filter(isNumber))]},[1/0,-1/0])},getDomainOfStackGroups=function _($,_e,et){return Object.keys($).reduce(function(tt,rt){var nt=$[rt],it=nt.stackedData,st=it.reduce(function(at,ot){var dt=getDomainOfSingle(ot.slice(_e,et+1));return[Math.min(at[0],dt[0]),Math.max(at[1],dt[1])]},[1/0,-1/0]);return[Math.min(st[0],tt[0]),Math.max(st[1],tt[1])]},[1/0,-1/0]).map(function(tt){return tt===1/0||tt===-1/0?0:tt})},MIN_VALUE_REG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MAX_VALUE_REG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,parseSpecifiedDomain=function _($,_e,et){if(isFunction$3($))return $(_e,et);if(!Array.isArray($))return _e;var tt=[];if(isNumber($[0]))tt[0]=et?$[0]:Math.min($[0],_e[0]);else if(MIN_VALUE_REG.test($[0])){var rt=+MIN_VALUE_REG.exec($[0])[1];tt[0]=_e[0]-rt}else isFunction$3($[0])?tt[0]=$[0](_e[0]):tt[0]=_e[0];if(isNumber($[1]))tt[1]=et?$[1]:Math.max($[1],_e[1]);else if(MAX_VALUE_REG.test($[1])){var nt=+MAX_VALUE_REG.exec($[1])[1];tt[1]=_e[1]+nt}else isFunction$3($[1])?tt[1]=$[1](_e[1]):tt[1]=_e[1];return tt},getBandSizeOfAxis=function _($,_e,et){if($&&$.scale&&$.scale.bandwidth){var tt=$.scale.bandwidth();if(!et||tt>0)return tt}if($&&_e&&_e.length>=2){for(var rt=sortBy$1(_e,function(dt){return dt.coordinate}),nt=1/0,it=1,st=rt.length;it<st;it++){var at=rt[it],ot=rt[it-1];nt=Math.min((at.coordinate||0)-(ot.coordinate||0),nt)}return nt===1/0?0:nt}return et?void 0:0},parseDomainOfCategoryAxis=function _($,_e,et){return!$||!$.length||isEqual$1($,get$2(et,"type.defaultProps.domain"))?_e:$},getTooltipItem=function _($,_e){var et=$.type.defaultProps?_objectSpread$q(_objectSpread$q({},$.type.defaultProps),$.props):$.props,tt=et.dataKey,rt=et.name,nt=et.unit,it=et.formatter,st=et.tooltipType,at=et.chartType,ot=et.hide;return _objectSpread$q(_objectSpread$q({},filterProps($,!1)),{},{dataKey:tt,unit:nt,formatter:it,name:rt||tt,color:getMainColorOfGraphicItem($),value:getValueByDataKey(_e,tt),type:st,payload:_e,chartType:at,hide:ot})};function _typeof$t(_){"@babel/helpers - typeof";return _typeof$t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$t(_)}function ownKeys$p(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$p(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$p(Object(_e),!0).forEach(function(et){_defineProperty$s(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$p(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$s(_,$,_e){return $=_toPropertyKey$s($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$s(_){var $=_toPrimitive$s(_,"string");return _typeof$t($)=="symbol"?$:$+""}function _toPrimitive$s(_,$){if(_typeof$t(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$t(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var RADIAN=Math.PI/180,radianToDegree=function _($){return $*180/Math.PI},polarToCartesian=function _($,_e,et,tt){return{x:$+Math.cos(-RADIAN*tt)*et,y:_e+Math.sin(-RADIAN*tt)*et}},distanceBetweenPoints=function _($,_e){var et=$.x,tt=$.y,rt=_e.x,nt=_e.y;return Math.sqrt(Math.pow(et-rt,2)+Math.pow(tt-nt,2))},getAngleOfPoint=function _($,_e){var et=$.x,tt=$.y,rt=_e.cx,nt=_e.cy,it=distanceBetweenPoints({x:et,y:tt},{x:rt,y:nt});if(it<=0)return{radius:it};var st=(et-rt)/it,at=Math.acos(st);return tt>nt&&(at=2*Math.PI-at),{radius:it,angle:radianToDegree(at),angleInRadian:at}},formatAngleOfSector=function _($){var _e=$.startAngle,et=$.endAngle,tt=Math.floor(_e/360),rt=Math.floor(et/360),nt=Math.min(tt,rt);return{startAngle:_e-nt*360,endAngle:et-nt*360}},reverseFormatAngleOfSetor=function _($,_e){var et=_e.startAngle,tt=_e.endAngle,rt=Math.floor(et/360),nt=Math.floor(tt/360),it=Math.min(rt,nt);return $+it*360},inRangeOfSector=function _($,_e){var et=$.x,tt=$.y,rt=getAngleOfPoint({x:et,y:tt},_e),nt=rt.radius,it=rt.angle,st=_e.innerRadius,at=_e.outerRadius;if(nt<st||nt>at)return!1;if(nt===0)return!0;var ot=formatAngleOfSector(_e),dt=ot.startAngle,ht=ot.endAngle,yt=it,vt;if(dt<=ht){for(;yt>ht;)yt-=360;for(;yt<dt;)yt+=360;vt=yt>=dt&&yt<=ht}else{for(;yt>dt;)yt-=360;for(;yt<ht;)yt+=360;vt=yt>=ht&&yt<=dt}return vt?_objectSpread$p(_objectSpread$p({},_e),{},{radius:nt,angle:reverseFormatAngleOfSetor(yt,_e)}):null};function _typeof$s(_){"@babel/helpers - typeof";return _typeof$s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$s(_)}var _excluded$a=["offset"];function _toConsumableArray$6(_){return _arrayWithoutHoles$6(_)||_iterableToArray$7(_)||_unsupportedIterableToArray$a(_)||_nonIterableSpread$6()}function _nonIterableSpread$6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$a(_,$){if(_){if(typeof _=="string")return _arrayLikeToArray$a(_,$);var _e=Object.prototype.toString.call(_).slice(8,-1);if(_e==="Object"&&_.constructor&&(_e=_.constructor.name),_e==="Map"||_e==="Set")return Array.from(_);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray$a(_,$)}}function _iterableToArray$7(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function _arrayWithoutHoles$6(_){if(Array.isArray(_))return _arrayLikeToArray$a(_)}function _arrayLikeToArray$a(_,$){($==null||$>_.length)&&($=_.length);for(var _e=0,et=new Array($);_e<$;_e++)et[_e]=_[_e];return et}function _objectWithoutProperties$a(_,$){if(_==null)return{};var _e=_objectWithoutPropertiesLoose$a(_,$),et,tt;if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_);for(tt=0;tt<rt.length;tt++)et=rt[tt],!($.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call(_,et)&&(_e[et]=_[et])}return _e}function _objectWithoutPropertiesLoose$a(_,$){if(_==null)return{};var _e={};for(var et in _)if(Object.prototype.hasOwnProperty.call(_,et)){if($.indexOf(et)>=0)continue;_e[et]=_[et]}return _e}function ownKeys$o(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$o(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$o(Object(_e),!0).forEach(function(et){_defineProperty$r(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$o(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$r(_,$,_e){return $=_toPropertyKey$r($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$r(_){var $=_toPrimitive$r(_,"string");return _typeof$s($)=="symbol"?$:$+""}function _toPrimitive$r(_,$){if(_typeof$s(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$s(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}function _extends$j(){return _extends$j=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$j.apply(this,arguments)}var getLabel$1=function _($){var _e=$.value,et=$.formatter,tt=isNil$1($.children)?_e:$.children;return isFunction$3(et)?et(tt):tt},getDeltaAngle$1=function _($,_e){var et=mathSign(_e-$),tt=Math.min(Math.abs(_e-$),360);return et*tt},renderRadialLabel=function _($,_e,et){var tt=$.position,rt=$.viewBox,nt=$.offset,it=$.className,st=rt,at=st.cx,ot=st.cy,dt=st.innerRadius,ht=st.outerRadius,yt=st.startAngle,vt=st.endAngle,xt=st.clockWise,wt=(dt+ht)/2,Et=getDeltaAngle$1(yt,vt),At=Et>=0?1:-1,jt,kt;tt==="insideStart"?(jt=yt+At*nt,kt=xt):tt==="insideEnd"?(jt=vt-At*nt,kt=!xt):tt==="end"&&(jt=vt+At*nt,kt=xt),kt=Et<=0?kt:!kt;var Lt=polarToCartesian(at,ot,wt,jt),Bt=polarToCartesian(at,ot,wt,jt+(kt?1:-1)*359),Gt="M".concat(Lt.x,",").concat(Lt.y,`
    A`).concat(wt,",").concat(wt,",0,1,").concat(kt?0:1,`,
    `).concat(Bt.x,",").concat(Bt.y),er=isNil$1($.id)?uniqueId("recharts-radial-line-"):$.id;return React.createElement("text",_extends$j({},et,{dominantBaseline:"central",className:clsx("recharts-radial-bar-label",it)}),React.createElement("defs",null,React.createElement("path",{id:er,d:Gt})),React.createElement("textPath",{xlinkHref:"#".concat(er)},_e))},getAttrsOfPolarLabel=function _($){var _e=$.viewBox,et=$.offset,tt=$.position,rt=_e,nt=rt.cx,it=rt.cy,st=rt.innerRadius,at=rt.outerRadius,ot=rt.startAngle,dt=rt.endAngle,ht=(ot+dt)/2;if(tt==="outside"){var yt=polarToCartesian(nt,it,at+et,ht),vt=yt.x,xt=yt.y;return{x:vt,y:xt,textAnchor:vt>=nt?"start":"end",verticalAnchor:"middle"}}if(tt==="center")return{x:nt,y:it,textAnchor:"middle",verticalAnchor:"middle"};if(tt==="centerTop")return{x:nt,y:it,textAnchor:"middle",verticalAnchor:"start"};if(tt==="centerBottom")return{x:nt,y:it,textAnchor:"middle",verticalAnchor:"end"};var wt=(st+at)/2,Et=polarToCartesian(nt,it,wt,ht),At=Et.x,jt=Et.y;return{x:At,y:jt,textAnchor:"middle",verticalAnchor:"middle"}},getAttrsOfCartesianLabel=function _($){var _e=$.viewBox,et=$.parentViewBox,tt=$.offset,rt=$.position,nt=_e,it=nt.x,st=nt.y,at=nt.width,ot=nt.height,dt=ot>=0?1:-1,ht=dt*tt,yt=dt>0?"end":"start",vt=dt>0?"start":"end",xt=at>=0?1:-1,wt=xt*tt,Et=xt>0?"end":"start",At=xt>0?"start":"end";if(rt==="top"){var jt={x:it+at/2,y:st-dt*tt,textAnchor:"middle",verticalAnchor:yt};return _objectSpread$o(_objectSpread$o({},jt),et?{height:Math.max(st-et.y,0),width:at}:{})}if(rt==="bottom"){var kt={x:it+at/2,y:st+ot+ht,textAnchor:"middle",verticalAnchor:vt};return _objectSpread$o(_objectSpread$o({},kt),et?{height:Math.max(et.y+et.height-(st+ot),0),width:at}:{})}if(rt==="left"){var Lt={x:it-wt,y:st+ot/2,textAnchor:Et,verticalAnchor:"middle"};return _objectSpread$o(_objectSpread$o({},Lt),et?{width:Math.max(Lt.x-et.x,0),height:ot}:{})}if(rt==="right"){var Bt={x:it+at+wt,y:st+ot/2,textAnchor:At,verticalAnchor:"middle"};return _objectSpread$o(_objectSpread$o({},Bt),et?{width:Math.max(et.x+et.width-Bt.x,0),height:ot}:{})}var Gt=et?{width:at,height:ot}:{};return rt==="insideLeft"?_objectSpread$o({x:it+wt,y:st+ot/2,textAnchor:At,verticalAnchor:"middle"},Gt):rt==="insideRight"?_objectSpread$o({x:it+at-wt,y:st+ot/2,textAnchor:Et,verticalAnchor:"middle"},Gt):rt==="insideTop"?_objectSpread$o({x:it+at/2,y:st+ht,textAnchor:"middle",verticalAnchor:vt},Gt):rt==="insideBottom"?_objectSpread$o({x:it+at/2,y:st+ot-ht,textAnchor:"middle",verticalAnchor:yt},Gt):rt==="insideTopLeft"?_objectSpread$o({x:it+wt,y:st+ht,textAnchor:At,verticalAnchor:vt},Gt):rt==="insideTopRight"?_objectSpread$o({x:it+at-wt,y:st+ht,textAnchor:Et,verticalAnchor:vt},Gt):rt==="insideBottomLeft"?_objectSpread$o({x:it+wt,y:st+ot-ht,textAnchor:At,verticalAnchor:yt},Gt):rt==="insideBottomRight"?_objectSpread$o({x:it+at-wt,y:st+ot-ht,textAnchor:Et,verticalAnchor:yt},Gt):isObject$8(rt)&&(isNumber(rt.x)||isPercent(rt.x))&&(isNumber(rt.y)||isPercent(rt.y))?_objectSpread$o({x:it+getPercentValue(rt.x,at),y:st+getPercentValue(rt.y,ot),textAnchor:"end",verticalAnchor:"end"},Gt):_objectSpread$o({x:it+at/2,y:st+ot/2,textAnchor:"middle",verticalAnchor:"middle"},Gt)},isPolar=function _($){return"cx"in $&&isNumber($.cx)};function Label(_){var $=_.offset,_e=$===void 0?5:$,et=_objectWithoutProperties$a(_,_excluded$a),tt=_objectSpread$o({offset:_e},et),rt=tt.viewBox,nt=tt.position,it=tt.value,st=tt.children,at=tt.content,ot=tt.className,dt=ot===void 0?"":ot,ht=tt.textBreakAll;if(!rt||isNil$1(it)&&isNil$1(st)&&!reactExports.isValidElement(at)&&!isFunction$3(at))return null;if(reactExports.isValidElement(at))return reactExports.cloneElement(at,tt);var yt;if(isFunction$3(at)){if(yt=reactExports.createElement(at,tt),reactExports.isValidElement(yt))return yt}else yt=getLabel$1(tt);var vt=isPolar(rt),xt=filterProps(tt,!0);if(vt&&(nt==="insideStart"||nt==="insideEnd"||nt==="end"))return renderRadialLabel(tt,yt,xt);var wt=vt?getAttrsOfPolarLabel(tt):getAttrsOfCartesianLabel(tt);return React.createElement(Text,_extends$j({className:clsx("recharts-label",dt)},xt,wt,{breakAll:ht}),yt)}Label.displayName="Label";var parseViewBox=function _($){var _e=$.cx,et=$.cy,tt=$.angle,rt=$.startAngle,nt=$.endAngle,it=$.r,st=$.radius,at=$.innerRadius,ot=$.outerRadius,dt=$.x,ht=$.y,yt=$.top,vt=$.left,xt=$.width,wt=$.height,Et=$.clockWise,At=$.labelViewBox;if(At)return At;if(isNumber(xt)&&isNumber(wt)){if(isNumber(dt)&&isNumber(ht))return{x:dt,y:ht,width:xt,height:wt};if(isNumber(yt)&&isNumber(vt))return{x:yt,y:vt,width:xt,height:wt}}return isNumber(dt)&&isNumber(ht)?{x:dt,y:ht,width:0,height:0}:isNumber(_e)&&isNumber(et)?{cx:_e,cy:et,startAngle:rt||tt||0,endAngle:nt||tt||0,innerRadius:at||0,outerRadius:ot||st||it||0,clockWise:Et}:$.viewBox?$.viewBox:{}},parseLabel=function _($,_e){return $?$===!0?React.createElement(Label,{key:"label-implicit",viewBox:_e}):isNumOrStr($)?React.createElement(Label,{key:"label-implicit",viewBox:_e,value:$}):reactExports.isValidElement($)?$.type===Label?reactExports.cloneElement($,{key:"label-implicit",viewBox:_e}):React.createElement(Label,{key:"label-implicit",content:$,viewBox:_e}):isFunction$3($)?React.createElement(Label,{key:"label-implicit",content:$,viewBox:_e}):isObject$8($)?React.createElement(Label,_extends$j({viewBox:_e},$,{key:"label-implicit"})):null:null},renderCallByParent$1=function _($,_e){var et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!$||!$.children&&et&&!$.label)return null;var tt=$.children,rt=parseViewBox($),nt=findAllByType(tt,Label).map(function(st,at){return reactExports.cloneElement(st,{viewBox:_e||rt,key:"label-".concat(at)})});if(!et)return nt;var it=parseLabel($.label,_e||rt);return[it].concat(_toConsumableArray$6(nt))};Label.parseViewBox=parseViewBox;Label.renderCallByParent=renderCallByParent$1;function last(_){var $=_==null?0:_.length;return $?_[$-1]:void 0}var last_1=last;const last$1=getDefaultExportFromCjs$1(last_1);function _typeof$r(_){"@babel/helpers - typeof";return _typeof$r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$r(_)}var _excluded$9=["valueAccessor"],_excluded2$4=["data","dataKey","clockWise","id","textBreakAll"];function _toConsumableArray$5(_){return _arrayWithoutHoles$5(_)||_iterableToArray$6(_)||_unsupportedIterableToArray$9(_)||_nonIterableSpread$5()}function _nonIterableSpread$5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$9(_,$){if(_){if(typeof _=="string")return _arrayLikeToArray$9(_,$);var _e=Object.prototype.toString.call(_).slice(8,-1);if(_e==="Object"&&_.constructor&&(_e=_.constructor.name),_e==="Map"||_e==="Set")return Array.from(_);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray$9(_,$)}}function _iterableToArray$6(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function _arrayWithoutHoles$5(_){if(Array.isArray(_))return _arrayLikeToArray$9(_)}function _arrayLikeToArray$9(_,$){($==null||$>_.length)&&($=_.length);for(var _e=0,et=new Array($);_e<$;_e++)et[_e]=_[_e];return et}function _extends$i(){return _extends$i=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$i.apply(this,arguments)}function ownKeys$n(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$n(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$n(Object(_e),!0).forEach(function(et){_defineProperty$q(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$n(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$q(_,$,_e){return $=_toPropertyKey$q($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$q(_){var $=_toPrimitive$q(_,"string");return _typeof$r($)=="symbol"?$:$+""}function _toPrimitive$q(_,$){if(_typeof$r(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$r(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}function _objectWithoutProperties$9(_,$){if(_==null)return{};var _e=_objectWithoutPropertiesLoose$9(_,$),et,tt;if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_);for(tt=0;tt<rt.length;tt++)et=rt[tt],!($.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call(_,et)&&(_e[et]=_[et])}return _e}function _objectWithoutPropertiesLoose$9(_,$){if(_==null)return{};var _e={};for(var et in _)if(Object.prototype.hasOwnProperty.call(_,et)){if($.indexOf(et)>=0)continue;_e[et]=_[et]}return _e}var defaultAccessor=function _($){return Array.isArray($.value)?last$1($.value):$.value};function LabelList(_){var $=_.valueAccessor,_e=$===void 0?defaultAccessor:$,et=_objectWithoutProperties$9(_,_excluded$9),tt=et.data,rt=et.dataKey,nt=et.clockWise,it=et.id,st=et.textBreakAll,at=_objectWithoutProperties$9(et,_excluded2$4);return!tt||!tt.length?null:React.createElement(Layer,{className:"recharts-label-list"},tt.map(function(ot,dt){var ht=isNil$1(rt)?_e(ot,dt):getValueByDataKey(ot&&ot.payload,rt),yt=isNil$1(it)?{}:{id:"".concat(it,"-").concat(dt)};return React.createElement(Label,_extends$i({},filterProps(ot,!0),at,yt,{parentViewBox:ot.parentViewBox,value:ht,textBreakAll:st,viewBox:Label.parseViewBox(isNil$1(nt)?ot:_objectSpread$n(_objectSpread$n({},ot),{},{clockWise:nt})),key:"label-".concat(dt),index:dt}))}))}LabelList.displayName="LabelList";function parseLabelList(_,$){return _?_===!0?React.createElement(LabelList,{key:"labelList-implicit",data:$}):React.isValidElement(_)||isFunction$3(_)?React.createElement(LabelList,{key:"labelList-implicit",data:$,content:_}):isObject$8(_)?React.createElement(LabelList,_extends$i({data:$},_,{key:"labelList-implicit"})):null:null}function renderCallByParent(_,$){var _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!_||!_.children&&_e&&!_.label)return null;var et=_.children,tt=findAllByType(et,LabelList).map(function(nt,it){return reactExports.cloneElement(nt,{data:$,key:"labelList-".concat(it)})});if(!_e)return tt;var rt=parseLabelList(_.label,$);return[rt].concat(_toConsumableArray$5(tt))}LabelList.renderCallByParent=renderCallByParent;function _typeof$q(_){"@babel/helpers - typeof";return _typeof$q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$q(_)}function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$h.apply(this,arguments)}function ownKeys$m(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$m(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$m(Object(_e),!0).forEach(function(et){_defineProperty$p(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$m(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$p(_,$,_e){return $=_toPropertyKey$p($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$p(_){var $=_toPrimitive$p(_,"string");return _typeof$q($)=="symbol"?$:$+""}function _toPrimitive$p(_,$){if(_typeof$q(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$q(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var getDeltaAngle=function _($,_e){var et=mathSign(_e-$),tt=Math.min(Math.abs(_e-$),359.999);return et*tt},getTangentCircle=function _($){var _e=$.cx,et=$.cy,tt=$.radius,rt=$.angle,nt=$.sign,it=$.isExternal,st=$.cornerRadius,at=$.cornerIsExternal,ot=st*(it?1:-1)+tt,dt=Math.asin(st/ot)/RADIAN,ht=at?rt:rt+nt*dt,yt=polarToCartesian(_e,et,ot,ht),vt=polarToCartesian(_e,et,tt,ht),xt=at?rt-nt*dt:rt,wt=polarToCartesian(_e,et,ot*Math.cos(dt*RADIAN),xt);return{center:yt,circleTangency:vt,lineTangency:wt,theta:dt}},getSectorPath=function _($){var _e=$.cx,et=$.cy,tt=$.innerRadius,rt=$.outerRadius,nt=$.startAngle,it=$.endAngle,st=getDeltaAngle(nt,it),at=nt+st,ot=polarToCartesian(_e,et,rt,nt),dt=polarToCartesian(_e,et,rt,at),ht="M ".concat(ot.x,",").concat(ot.y,`
    A `).concat(rt,",").concat(rt,`,0,
    `).concat(+(Math.abs(st)>180),",").concat(+(nt>at),`,
    `).concat(dt.x,",").concat(dt.y,`
  `);if(tt>0){var yt=polarToCartesian(_e,et,tt,nt),vt=polarToCartesian(_e,et,tt,at);ht+="L ".concat(vt.x,",").concat(vt.y,`
            A `).concat(tt,",").concat(tt,`,0,
            `).concat(+(Math.abs(st)>180),",").concat(+(nt<=at),`,
            `).concat(yt.x,",").concat(yt.y," Z")}else ht+="L ".concat(_e,",").concat(et," Z");return ht},getSectorWithCorner=function _($){var _e=$.cx,et=$.cy,tt=$.innerRadius,rt=$.outerRadius,nt=$.cornerRadius,it=$.forceCornerRadius,st=$.cornerIsExternal,at=$.startAngle,ot=$.endAngle,dt=mathSign(ot-at),ht=getTangentCircle({cx:_e,cy:et,radius:rt,angle:at,sign:dt,cornerRadius:nt,cornerIsExternal:st}),yt=ht.circleTangency,vt=ht.lineTangency,xt=ht.theta,wt=getTangentCircle({cx:_e,cy:et,radius:rt,angle:ot,sign:-dt,cornerRadius:nt,cornerIsExternal:st}),Et=wt.circleTangency,At=wt.lineTangency,jt=wt.theta,kt=st?Math.abs(at-ot):Math.abs(at-ot)-xt-jt;if(kt<0)return it?"M ".concat(vt.x,",").concat(vt.y,`
        a`).concat(nt,",").concat(nt,",0,0,1,").concat(nt*2,`,0
        a`).concat(nt,",").concat(nt,",0,0,1,").concat(-nt*2,`,0
      `):getSectorPath({cx:_e,cy:et,innerRadius:tt,outerRadius:rt,startAngle:at,endAngle:ot});var Lt="M ".concat(vt.x,",").concat(vt.y,`
    A`).concat(nt,",").concat(nt,",0,0,").concat(+(dt<0),",").concat(yt.x,",").concat(yt.y,`
    A`).concat(rt,",").concat(rt,",0,").concat(+(kt>180),",").concat(+(dt<0),",").concat(Et.x,",").concat(Et.y,`
    A`).concat(nt,",").concat(nt,",0,0,").concat(+(dt<0),",").concat(At.x,",").concat(At.y,`
  `);if(tt>0){var Bt=getTangentCircle({cx:_e,cy:et,radius:tt,angle:at,sign:dt,isExternal:!0,cornerRadius:nt,cornerIsExternal:st}),Gt=Bt.circleTangency,er=Bt.lineTangency,tr=Bt.theta,ar=getTangentCircle({cx:_e,cy:et,radius:tt,angle:ot,sign:-dt,isExternal:!0,cornerRadius:nt,cornerIsExternal:st}),Mt=ar.circleTangency,lt=ar.lineTangency,mt=ar.theta,gt=st?Math.abs(at-ot):Math.abs(at-ot)-tr-mt;if(gt<0&&nt===0)return"".concat(Lt,"L").concat(_e,",").concat(et,"Z");Lt+="L".concat(lt.x,",").concat(lt.y,`
      A`).concat(nt,",").concat(nt,",0,0,").concat(+(dt<0),",").concat(Mt.x,",").concat(Mt.y,`
      A`).concat(tt,",").concat(tt,",0,").concat(+(gt>180),",").concat(+(dt>0),",").concat(Gt.x,",").concat(Gt.y,`
      A`).concat(nt,",").concat(nt,",0,0,").concat(+(dt<0),",").concat(er.x,",").concat(er.y,"Z")}else Lt+="L".concat(_e,",").concat(et,"Z");return Lt},defaultProps$3={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Sector=function _($){var _e=_objectSpread$m(_objectSpread$m({},defaultProps$3),$),et=_e.cx,tt=_e.cy,rt=_e.innerRadius,nt=_e.outerRadius,it=_e.cornerRadius,st=_e.forceCornerRadius,at=_e.cornerIsExternal,ot=_e.startAngle,dt=_e.endAngle,ht=_e.className;if(nt<rt||ot===dt)return null;var yt=clsx("recharts-sector",ht),vt=nt-rt,xt=getPercentValue(it,vt,0,!0),wt;return xt>0&&Math.abs(ot-dt)<360?wt=getSectorWithCorner({cx:et,cy:tt,innerRadius:rt,outerRadius:nt,cornerRadius:Math.min(xt,vt/2),forceCornerRadius:st,cornerIsExternal:at,startAngle:ot,endAngle:dt}):wt=getSectorPath({cx:et,cy:tt,innerRadius:rt,outerRadius:nt,startAngle:ot,endAngle:dt}),React.createElement("path",_extends$h({},filterProps(_e,!0),{className:yt,d:wt,role:"img"}))};function _typeof$p(_){"@babel/helpers - typeof";return _typeof$p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$p(_)}function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$g.apply(this,arguments)}function ownKeys$l(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$l(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$l(Object(_e),!0).forEach(function(et){_defineProperty$o(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$l(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$o(_,$,_e){return $=_toPropertyKey$o($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$o(_){var $=_toPrimitive$o(_,"string");return _typeof$p($)=="symbol"?$:$+""}function _toPrimitive$o(_,$){if(_typeof$p(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$p(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var CURVE_FACTORIES={curveBasisClosed,curveBasisOpen,curveBasis,curveBumpX:bumpX,curveBumpY:bumpY,curveLinearClosed,curveLinear,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural,curveStep,curveStepAfter:stepAfter,curveStepBefore:stepBefore},defined=function _($){return $.x===+$.x&&$.y===+$.y},getX=function _($){return $.x},getY=function _($){return $.y},getCurveFactory=function _($,_e){if(isFunction$3($))return $;var et="curve".concat(upperFirst$1($));return(et==="curveMonotone"||et==="curveBump")&&_e?CURVE_FACTORIES["".concat(et).concat(_e==="vertical"?"Y":"X")]:CURVE_FACTORIES[et]||curveLinear},getPath$1=function _($){var _e=$.type,et=_e===void 0?"linear":_e,tt=$.points,rt=tt===void 0?[]:tt,nt=$.baseLine,it=$.layout,st=$.connectNulls,at=st===void 0?!1:st,ot=getCurveFactory(et,it),dt=at?rt.filter(function(xt){return defined(xt)}):rt,ht;if(Array.isArray(nt)){var yt=at?nt.filter(function(xt){return defined(xt)}):nt,vt=dt.map(function(xt,wt){return _objectSpread$l(_objectSpread$l({},xt),{},{base:yt[wt]})});return it==="vertical"?ht=shapeArea().y(getY).x1(getX).x0(function(xt){return xt.base.x}):ht=shapeArea().x(getX).y1(getY).y0(function(xt){return xt.base.y}),ht.defined(defined).curve(ot),ht(vt)}return it==="vertical"&&isNumber(nt)?ht=shapeArea().y(getY).x1(getX).x0(nt):isNumber(nt)?ht=shapeArea().x(getX).y1(getY).y0(nt):ht=shapeLine().x(getX).y(getY),ht.defined(defined).curve(ot),ht(dt)},Curve=function _($){var _e=$.className,et=$.points,tt=$.path,rt=$.pathRef;if((!et||!et.length)&&!tt)return null;var nt=et&&et.length?getPath$1($):tt;return React.createElement("path",_extends$g({},filterProps($,!1),adaptEventHandlers($),{className:clsx("recharts-curve",_e),d:nt,ref:rt}))},propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function _(et,tt,rt,nt,it,st){if(st!==ReactPropTypesSecret){var at=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw at.name="Invariant Violation",at}}_.isRequired=_;function $(){return _}var _e={array:_,bigint:_,bool:_,func:_,number:_,object:_,string:_,symbol:_,any:_,arrayOf:$,element:_,elementType:_,instanceOf:$,node:_,objectOf:$,oneOf:$,oneOfType:$,shape:$,exact:$,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return _e.PropTypes=_e,_e};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs$1(propTypesExports);var getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty$1=Object.prototype.hasOwnProperty;function combineComparators(_,$){return function(et,tt,rt){return _(et,tt,rt)&&$(et,tt,rt)}}function createIsCircular(_){return function(_e,et,tt){if(!_e||!et||typeof _e!="object"||typeof et!="object")return _(_e,et,tt);var rt=tt.cache,nt=rt.get(_e),it=rt.get(et);if(nt&&it)return nt===et&&it===_e;rt.set(_e,et),rt.set(et,_e);var st=_(_e,et,tt);return rt.delete(_e),rt.delete(et),st}}function getStrictProperties(_){return getOwnPropertyNames(_).concat(getOwnPropertySymbols(_))}var hasOwn=Object.hasOwn||function(_,$){return hasOwnProperty$1.call(_,$)};function sameValueZeroEqual(_,$){return _||$?_===$:_===$||_!==_&&$!==$}var OWNER="_owner",getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,keys$1=Object.keys;function areArraysEqual(_,$,_e){var et=_.length;if($.length!==et)return!1;for(;et-- >0;)if(!_e.equals(_[et],$[et],et,et,_,$,_e))return!1;return!0}function areDatesEqual(_,$){return sameValueZeroEqual(_.getTime(),$.getTime())}function areMapsEqual(_,$,_e){if(_.size!==$.size)return!1;for(var et={},tt=_.entries(),rt=0,nt,it;(nt=tt.next())&&!nt.done;){for(var st=$.entries(),at=!1,ot=0;(it=st.next())&&!it.done;){var dt=nt.value,ht=dt[0],yt=dt[1],vt=it.value,xt=vt[0],wt=vt[1];!at&&!et[ot]&&(at=_e.equals(ht,xt,rt,ot,_,$,_e)&&_e.equals(yt,wt,ht,xt,_,$,_e))&&(et[ot]=!0),ot++}if(!at)return!1;rt++}return!0}function areObjectsEqual(_,$,_e){var et=keys$1(_),tt=et.length;if(keys$1($).length!==tt)return!1;for(var rt;tt-- >0;)if(rt=et[tt],rt===OWNER&&(_.$$typeof||$.$$typeof)&&_.$$typeof!==$.$$typeof||!hasOwn($,rt)||!_e.equals(_[rt],$[rt],rt,rt,_,$,_e))return!1;return!0}function areObjectsEqualStrict(_,$,_e){var et=getStrictProperties(_),tt=et.length;if(getStrictProperties($).length!==tt)return!1;for(var rt,nt,it;tt-- >0;)if(rt=et[tt],rt===OWNER&&(_.$$typeof||$.$$typeof)&&_.$$typeof!==$.$$typeof||!hasOwn($,rt)||!_e.equals(_[rt],$[rt],rt,rt,_,$,_e)||(nt=getOwnPropertyDescriptor(_,rt),it=getOwnPropertyDescriptor($,rt),(nt||it)&&(!nt||!it||nt.configurable!==it.configurable||nt.enumerable!==it.enumerable||nt.writable!==it.writable)))return!1;return!0}function arePrimitiveWrappersEqual(_,$){return sameValueZeroEqual(_.valueOf(),$.valueOf())}function areRegExpsEqual(_,$){return _.source===$.source&&_.flags===$.flags}function areSetsEqual(_,$,_e){if(_.size!==$.size)return!1;for(var et={},tt=_.values(),rt,nt;(rt=tt.next())&&!rt.done;){for(var it=$.values(),st=!1,at=0;(nt=it.next())&&!nt.done;)!st&&!et[at]&&(st=_e.equals(rt.value,nt.value,rt.value,nt.value,_,$,_e))&&(et[at]=!0),at++;if(!st)return!1}return!0}function areTypedArraysEqual(_,$){var _e=_.length;if($.length!==_e)return!1;for(;_e-- >0;)if(_[_e]!==$[_e])return!1;return!0}var ARGUMENTS_TAG="[object Arguments]",BOOLEAN_TAG="[object Boolean]",DATE_TAG="[object Date]",MAP_TAG="[object Map]",NUMBER_TAG="[object Number]",OBJECT_TAG="[object Object]",REG_EXP_TAG="[object RegExp]",SET_TAG="[object Set]",STRING_TAG="[object String]",isArray$2=Array.isArray,isTypedArray=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,assign=Object.assign,getTag=Object.prototype.toString.call.bind(Object.prototype.toString);function createEqualityComparator(_){var $=_.areArraysEqual,_e=_.areDatesEqual,et=_.areMapsEqual,tt=_.areObjectsEqual,rt=_.arePrimitiveWrappersEqual,nt=_.areRegExpsEqual,it=_.areSetsEqual,st=_.areTypedArraysEqual;return function(ot,dt,ht){if(ot===dt)return!0;if(ot==null||dt==null||typeof ot!="object"||typeof dt!="object")return ot!==ot&&dt!==dt;var yt=ot.constructor;if(yt!==dt.constructor)return!1;if(yt===Object)return tt(ot,dt,ht);if(isArray$2(ot))return $(ot,dt,ht);if(isTypedArray!=null&&isTypedArray(ot))return st(ot,dt,ht);if(yt===Date)return _e(ot,dt,ht);if(yt===RegExp)return nt(ot,dt,ht);if(yt===Map)return et(ot,dt,ht);if(yt===Set)return it(ot,dt,ht);var vt=getTag(ot);return vt===DATE_TAG?_e(ot,dt,ht):vt===REG_EXP_TAG?nt(ot,dt,ht):vt===MAP_TAG?et(ot,dt,ht):vt===SET_TAG?it(ot,dt,ht):vt===OBJECT_TAG?typeof ot.then!="function"&&typeof dt.then!="function"&&tt(ot,dt,ht):vt===ARGUMENTS_TAG?tt(ot,dt,ht):vt===BOOLEAN_TAG||vt===NUMBER_TAG||vt===STRING_TAG?rt(ot,dt,ht):!1}}function createEqualityComparatorConfig(_){var $=_.circular,_e=_.createCustomConfig,et=_.strict,tt={areArraysEqual:et?areObjectsEqualStrict:areArraysEqual,areDatesEqual,areMapsEqual:et?combineComparators(areMapsEqual,areObjectsEqualStrict):areMapsEqual,areObjectsEqual:et?areObjectsEqualStrict:areObjectsEqual,arePrimitiveWrappersEqual,areRegExpsEqual,areSetsEqual:et?combineComparators(areSetsEqual,areObjectsEqualStrict):areSetsEqual,areTypedArraysEqual:et?areObjectsEqualStrict:areTypedArraysEqual};if(_e&&(tt=assign({},tt,_e(tt))),$){var rt=createIsCircular(tt.areArraysEqual),nt=createIsCircular(tt.areMapsEqual),it=createIsCircular(tt.areObjectsEqual),st=createIsCircular(tt.areSetsEqual);tt=assign({},tt,{areArraysEqual:rt,areMapsEqual:nt,areObjectsEqual:it,areSetsEqual:st})}return tt}function createInternalEqualityComparator(_){return function($,_e,et,tt,rt,nt,it){return _($,_e,it)}}function createIsEqual(_){var $=_.circular,_e=_.comparator,et=_.createState,tt=_.equals,rt=_.strict;if(et)return function(st,at){var ot=et(),dt=ot.cache,ht=dt===void 0?$?new WeakMap:void 0:dt,yt=ot.meta;return _e(st,at,{cache:ht,equals:tt,meta:yt,strict:rt})};if($)return function(st,at){return _e(st,at,{cache:new WeakMap,equals:tt,meta:void 0,strict:rt})};var nt={cache:void 0,equals:tt,meta:void 0,strict:rt};return function(st,at){return _e(st,at,nt)}}var deepEqual=createCustomEqual();createCustomEqual({strict:!0});createCustomEqual({circular:!0});createCustomEqual({circular:!0,strict:!0});createCustomEqual({createInternalComparator:function(){return sameValueZeroEqual}});createCustomEqual({strict:!0,createInternalComparator:function(){return sameValueZeroEqual}});createCustomEqual({circular:!0,createInternalComparator:function(){return sameValueZeroEqual}});createCustomEqual({circular:!0,createInternalComparator:function(){return sameValueZeroEqual},strict:!0});function createCustomEqual(_){_===void 0&&(_={});var $=_.circular,_e=$===void 0?!1:$,et=_.createInternalComparator,tt=_.createState,rt=_.strict,nt=rt===void 0?!1:rt,it=createEqualityComparatorConfig(_),st=createEqualityComparator(it),at=et?et(st):createInternalEqualityComparator(st);return createIsEqual({circular:_e,comparator:st,createState:tt,equals:at,strict:nt})}function safeRequestAnimationFrame(_){typeof requestAnimationFrame<"u"&&requestAnimationFrame(_)}function setRafTimeout(_){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,_e=-1,et=function tt(rt){_e<0&&(_e=rt),rt-_e>$?(_(rt),_e=-1):safeRequestAnimationFrame(tt)};requestAnimationFrame(et)}function _typeof$o(_){"@babel/helpers - typeof";return _typeof$o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$o(_)}function _toArray(_){return _arrayWithHoles$6(_)||_iterableToArray$5(_)||_unsupportedIterableToArray$8(_)||_nonIterableRest$6()}function _nonIterableRest$6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$8(_,$){if(_){if(typeof _=="string")return _arrayLikeToArray$8(_,$);var _e=Object.prototype.toString.call(_).slice(8,-1);if(_e==="Object"&&_.constructor&&(_e=_.constructor.name),_e==="Map"||_e==="Set")return Array.from(_);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray$8(_,$)}}function _arrayLikeToArray$8(_,$){($==null||$>_.length)&&($=_.length);for(var _e=0,et=new Array($);_e<$;_e++)et[_e]=_[_e];return et}function _iterableToArray$5(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function _arrayWithHoles$6(_){if(Array.isArray(_))return _}function createAnimateManager(){var _={},$=function(){return null},_e=!1,et=function tt(rt){if(!_e){if(Array.isArray(rt)){if(!rt.length)return;var nt=rt,it=_toArray(nt),st=it[0],at=it.slice(1);if(typeof st=="number"){setRafTimeout(tt.bind(null,at),st);return}tt(st),setRafTimeout(tt.bind(null,at));return}_typeof$o(rt)==="object"&&(_=rt,$(_)),typeof rt=="function"&&rt()}};return{stop:function(){_e=!0},start:function(rt){_e=!1,et(rt)},subscribe:function(rt){return $=rt,function(){$=function(){return null}}}}}function _typeof$n(_){"@babel/helpers - typeof";return _typeof$n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$n(_)}function ownKeys$k(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$k(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$k(Object(_e),!0).forEach(function(et){_defineProperty$n(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$k(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$n(_,$,_e){return $=_toPropertyKey$n($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$n(_){var $=_toPrimitive$n(_,"string");return _typeof$n($)==="symbol"?$:String($)}function _toPrimitive$n(_,$){if(_typeof$n(_)!=="object"||_===null)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$n(et)!=="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var getIntersectionKeys=function _($,_e){return[Object.keys($),Object.keys(_e)].reduce(function(et,tt){return et.filter(function(rt){return tt.includes(rt)})})},identity=function _($){return $},getDashCase=function _($){return $.replace(/([A-Z])/g,function(_e){return"-".concat(_e.toLowerCase())})},mapObject=function _($,_e){return Object.keys(_e).reduce(function(et,tt){return _objectSpread$k(_objectSpread$k({},et),{},_defineProperty$n({},tt,$(tt,_e[tt])))},{})},getTransitionVal=function _($,_e,et){return $.map(function(tt){return"".concat(getDashCase(tt)," ").concat(_e,"ms ").concat(et)}).join(",")};function _slicedToArray$5(_,$){return _arrayWithHoles$5(_)||_iterableToArrayLimit$5(_,$)||_unsupportedIterableToArray$7(_,$)||_nonIterableRest$5()}function _nonIterableRest$5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArrayLimit$5(_,$){var _e=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(_e!=null){var et,tt,rt,nt,it=[],st=!0,at=!1;try{if(rt=(_e=_e.call(_)).next,$!==0)for(;!(st=(et=rt.call(_e)).done)&&(it.push(et.value),it.length!==$);st=!0);}catch(ot){at=!0,tt=ot}finally{try{if(!st&&_e.return!=null&&(nt=_e.return(),Object(nt)!==nt))return}finally{if(at)throw tt}}return it}}function _arrayWithHoles$5(_){if(Array.isArray(_))return _}function _toConsumableArray$4(_){return _arrayWithoutHoles$4(_)||_iterableToArray$4(_)||_unsupportedIterableToArray$7(_)||_nonIterableSpread$4()}function _nonIterableSpread$4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$7(_,$){if(_){if(typeof _=="string")return _arrayLikeToArray$7(_,$);var _e=Object.prototype.toString.call(_).slice(8,-1);if(_e==="Object"&&_.constructor&&(_e=_.constructor.name),_e==="Map"||_e==="Set")return Array.from(_);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray$7(_,$)}}function _iterableToArray$4(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function _arrayWithoutHoles$4(_){if(Array.isArray(_))return _arrayLikeToArray$7(_)}function _arrayLikeToArray$7(_,$){($==null||$>_.length)&&($=_.length);for(var _e=0,et=new Array($);_e<$;_e++)et[_e]=_[_e];return et}var ACCURACY=1e-4,cubicBezierFactor=function _($,_e){return[0,3*$,3*_e-6*$,3*$-3*_e+1]},multyTime=function _($,_e){return $.map(function(et,tt){return et*Math.pow(_e,tt)}).reduce(function(et,tt){return et+tt})},cubicBezier=function _($,_e){return function(et){var tt=cubicBezierFactor($,_e);return multyTime(tt,et)}},derivativeCubicBezier=function _($,_e){return function(et){var tt=cubicBezierFactor($,_e),rt=[].concat(_toConsumableArray$4(tt.map(function(nt,it){return nt*it}).slice(1)),[0]);return multyTime(rt,et)}},configBezier=function _(){for(var $=arguments.length,_e=new Array($),et=0;et<$;et++)_e[et]=arguments[et];var tt=_e[0],rt=_e[1],nt=_e[2],it=_e[3];if(_e.length===1)switch(_e[0]){case"linear":tt=0,rt=0,nt=1,it=1;break;case"ease":tt=.25,rt=.1,nt=.25,it=1;break;case"ease-in":tt=.42,rt=0,nt=1,it=1;break;case"ease-out":tt=.42,rt=0,nt=.58,it=1;break;case"ease-in-out":tt=0,rt=0,nt=.58,it=1;break;default:{var st=_e[0].split("(");if(st[0]==="cubic-bezier"&&st[1].split(")")[0].split(",").length===4){var at=st[1].split(")")[0].split(",").map(function(wt){return parseFloat(wt)}),ot=_slicedToArray$5(at,4);tt=ot[0],rt=ot[1],nt=ot[2],it=ot[3]}}}var dt=cubicBezier(tt,nt),ht=cubicBezier(rt,it),yt=derivativeCubicBezier(tt,nt),vt=function(Et){return Et>1?1:Et<0?0:Et},xt=function(Et){for(var At=Et>1?1:Et,jt=At,kt=0;kt<8;++kt){var Lt=dt(jt)-At,Bt=yt(jt);if(Math.abs(Lt-At)<ACCURACY||Bt<ACCURACY)return ht(jt);jt=vt(jt-Lt/Bt)}return ht(jt)};return xt.isStepper=!1,xt},configSpring=function _(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_e=$.stiff,et=_e===void 0?100:_e,tt=$.damping,rt=tt===void 0?8:tt,nt=$.dt,it=nt===void 0?17:nt,st=function(ot,dt,ht){var yt=-(ot-dt)*et,vt=ht*rt,xt=ht+(yt-vt)*it/1e3,wt=ht*it/1e3+ot;return Math.abs(wt-dt)<ACCURACY&&Math.abs(xt)<ACCURACY?[dt,0]:[wt,xt]};return st.isStepper=!0,st.dt=it,st},configEasing=function _(){for(var $=arguments.length,_e=new Array($),et=0;et<$;et++)_e[et]=arguments[et];var tt=_e[0];if(typeof tt=="string")switch(tt){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return configBezier(tt);case"spring":return configSpring();default:if(tt.split("(")[0]==="cubic-bezier")return configBezier(tt)}return typeof tt=="function"?tt:null};function _typeof$m(_){"@babel/helpers - typeof";return _typeof$m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$m(_)}function _toConsumableArray$3(_){return _arrayWithoutHoles$3(_)||_iterableToArray$3(_)||_unsupportedIterableToArray$6(_)||_nonIterableSpread$3()}function _nonIterableSpread$3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$3(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function _arrayWithoutHoles$3(_){if(Array.isArray(_))return _arrayLikeToArray$6(_)}function ownKeys$j(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$j(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$j(Object(_e),!0).forEach(function(et){_defineProperty$m(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$j(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$m(_,$,_e){return $=_toPropertyKey$m($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$m(_){var $=_toPrimitive$m(_,"string");return _typeof$m($)==="symbol"?$:String($)}function _toPrimitive$m(_,$){if(_typeof$m(_)!=="object"||_===null)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$m(et)!=="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}function _slicedToArray$4(_,$){return _arrayWithHoles$4(_)||_iterableToArrayLimit$4(_,$)||_unsupportedIterableToArray$6(_,$)||_nonIterableRest$4()}function _nonIterableRest$4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$6(_,$){if(_){if(typeof _=="string")return _arrayLikeToArray$6(_,$);var _e=Object.prototype.toString.call(_).slice(8,-1);if(_e==="Object"&&_.constructor&&(_e=_.constructor.name),_e==="Map"||_e==="Set")return Array.from(_);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray$6(_,$)}}function _arrayLikeToArray$6(_,$){($==null||$>_.length)&&($=_.length);for(var _e=0,et=new Array($);_e<$;_e++)et[_e]=_[_e];return et}function _iterableToArrayLimit$4(_,$){var _e=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(_e!=null){var et,tt,rt,nt,it=[],st=!0,at=!1;try{if(rt=(_e=_e.call(_)).next,$!==0)for(;!(st=(et=rt.call(_e)).done)&&(it.push(et.value),it.length!==$);st=!0);}catch(ot){at=!0,tt=ot}finally{try{if(!st&&_e.return!=null&&(nt=_e.return(),Object(nt)!==nt))return}finally{if(at)throw tt}}return it}}function _arrayWithHoles$4(_){if(Array.isArray(_))return _}var alpha=function _($,_e,et){return $+(_e-$)*et},needContinue=function _($){var _e=$.from,et=$.to;return _e!==et},calStepperVals=function _($,_e,et){var tt=mapObject(function(rt,nt){if(needContinue(nt)){var it=$(nt.from,nt.to,nt.velocity),st=_slicedToArray$4(it,2),at=st[0],ot=st[1];return _objectSpread$j(_objectSpread$j({},nt),{},{from:at,velocity:ot})}return nt},_e);return et<1?mapObject(function(rt,nt){return needContinue(nt)?_objectSpread$j(_objectSpread$j({},nt),{},{velocity:alpha(nt.velocity,tt[rt].velocity,et),from:alpha(nt.from,tt[rt].from,et)}):nt},_e):_($,tt,et-1)};const configUpdate=function(_,$,_e,et,tt){var rt=getIntersectionKeys(_,$),nt=rt.reduce(function(wt,Et){return _objectSpread$j(_objectSpread$j({},wt),{},_defineProperty$m({},Et,[_[Et],$[Et]]))},{}),it=rt.reduce(function(wt,Et){return _objectSpread$j(_objectSpread$j({},wt),{},_defineProperty$m({},Et,{from:_[Et],velocity:0,to:$[Et]}))},{}),st=-1,at,ot,dt=function(){return null},ht=function(){return mapObject(function(Et,At){return At.from},it)},yt=function(){return!Object.values(it).filter(needContinue).length},vt=function(Et){at||(at=Et);var At=Et-at,jt=At/_e.dt;it=calStepperVals(_e,it,jt),tt(_objectSpread$j(_objectSpread$j(_objectSpread$j({},_),$),ht())),at=Et,yt()||(st=requestAnimationFrame(dt))},xt=function(Et){ot||(ot=Et);var At=(Et-ot)/et,jt=mapObject(function(Lt,Bt){return alpha.apply(void 0,_toConsumableArray$3(Bt).concat([_e(At)]))},nt);if(tt(_objectSpread$j(_objectSpread$j(_objectSpread$j({},_),$),jt)),At<1)st=requestAnimationFrame(dt);else{var kt=mapObject(function(Lt,Bt){return alpha.apply(void 0,_toConsumableArray$3(Bt).concat([_e(1)]))},nt);tt(_objectSpread$j(_objectSpread$j(_objectSpread$j({},_),$),kt))}};return dt=_e.isStepper?vt:xt,function(){return requestAnimationFrame(dt),function(){cancelAnimationFrame(st)}}};function _typeof$l(_){"@babel/helpers - typeof";return _typeof$l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$l(_)}var _excluded$8=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function _objectWithoutProperties$8(_,$){if(_==null)return{};var _e=_objectWithoutPropertiesLoose$8(_,$),et,tt;if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_);for(tt=0;tt<rt.length;tt++)et=rt[tt],!($.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call(_,et)&&(_e[et]=_[et])}return _e}function _objectWithoutPropertiesLoose$8(_,$){if(_==null)return{};var _e={},et=Object.keys(_),tt,rt;for(rt=0;rt<et.length;rt++)tt=et[rt],!($.indexOf(tt)>=0)&&(_e[tt]=_[tt]);return _e}function _toConsumableArray$2(_){return _arrayWithoutHoles$2(_)||_iterableToArray$2(_)||_unsupportedIterableToArray$5(_)||_nonIterableSpread$2()}function _nonIterableSpread$2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$5(_,$){if(_){if(typeof _=="string")return _arrayLikeToArray$5(_,$);var _e=Object.prototype.toString.call(_).slice(8,-1);if(_e==="Object"&&_.constructor&&(_e=_.constructor.name),_e==="Map"||_e==="Set")return Array.from(_);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray$5(_,$)}}function _iterableToArray$2(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function _arrayWithoutHoles$2(_){if(Array.isArray(_))return _arrayLikeToArray$5(_)}function _arrayLikeToArray$5(_,$){($==null||$>_.length)&&($=_.length);for(var _e=0,et=new Array($);_e<$;_e++)et[_e]=_[_e];return et}function ownKeys$i(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$i(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$i(Object(_e),!0).forEach(function(et){_defineProperty$l(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$i(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$l(_,$,_e){return $=_toPropertyKey$l($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _classCallCheck$c(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties$c(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,_toPropertyKey$l(et.key),et)}}function _createClass$c(_,$,_e){return $&&_defineProperties$c(_.prototype,$),Object.defineProperty(_,"prototype",{writable:!1}),_}function _toPropertyKey$l(_){var $=_toPrimitive$l(_,"string");return _typeof$l($)==="symbol"?$:String($)}function _toPrimitive$l(_,$){if(_typeof$l(_)!=="object"||_===null)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$l(et)!=="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}function _inherits$a(_,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create($&&$.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),$&&_setPrototypeOf$a(_,$)}function _setPrototypeOf$a(_,$){return _setPrototypeOf$a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(et,tt){return et.__proto__=tt,et},_setPrototypeOf$a(_,$)}function _createSuper(_){var $=_isNativeReflectConstruct$a();return function(){var et=_getPrototypeOf$a(_),tt;if($){var rt=_getPrototypeOf$a(this).constructor;tt=Reflect.construct(et,arguments,rt)}else tt=et.apply(this,arguments);return _possibleConstructorReturn$a(this,tt)}}function _possibleConstructorReturn$a(_,$){if($&&(_typeof$l($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$a(_)}function _assertThisInitialized$a(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _isNativeReflectConstruct$a(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$a(_){return _getPrototypeOf$a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},_getPrototypeOf$a(_)}var Animate=function(_){_inherits$a(_e,_);var $=_createSuper(_e);function _e(et,tt){var rt;_classCallCheck$c(this,_e),rt=$.call(this,et,tt);var nt=rt.props,it=nt.isActive,st=nt.attributeName,at=nt.from,ot=nt.to,dt=nt.steps,ht=nt.children,yt=nt.duration;if(rt.handleStyleChange=rt.handleStyleChange.bind(_assertThisInitialized$a(rt)),rt.changeStyle=rt.changeStyle.bind(_assertThisInitialized$a(rt)),!it||yt<=0)return rt.state={style:{}},typeof ht=="function"&&(rt.state={style:ot}),_possibleConstructorReturn$a(rt);if(dt&&dt.length)rt.state={style:dt[0].style};else if(at){if(typeof ht=="function")return rt.state={style:at},_possibleConstructorReturn$a(rt);rt.state={style:st?_defineProperty$l({},st,at):at}}else rt.state={style:{}};return rt}return _createClass$c(_e,[{key:"componentDidMount",value:function(){var tt=this.props,rt=tt.isActive,nt=tt.canBegin;this.mounted=!0,!(!rt||!nt)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(tt){var rt=this.props,nt=rt.isActive,it=rt.canBegin,st=rt.attributeName,at=rt.shouldReAnimate,ot=rt.to,dt=rt.from,ht=this.state.style;if(it){if(!nt){var yt={style:st?_defineProperty$l({},st,ot):ot};this.state&&ht&&(st&&ht[st]!==ot||!st&&ht!==ot)&&this.setState(yt);return}if(!(deepEqual(tt.to,ot)&&tt.canBegin&&tt.isActive)){var vt=!tt.canBegin||!tt.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var xt=vt||at?dt:tt.to;if(this.state&&ht){var wt={style:st?_defineProperty$l({},st,xt):xt};(st&&ht[st]!==xt||!st&&ht!==xt)&&this.setState(wt)}this.runAnimation(_objectSpread$i(_objectSpread$i({},this.props),{},{from:xt,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var tt=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),tt&&tt()}},{key:"handleStyleChange",value:function(tt){this.changeStyle(tt)}},{key:"changeStyle",value:function(tt){this.mounted&&this.setState({style:tt})}},{key:"runJSAnimation",value:function(tt){var rt=this,nt=tt.from,it=tt.to,st=tt.duration,at=tt.easing,ot=tt.begin,dt=tt.onAnimationEnd,ht=tt.onAnimationStart,yt=configUpdate(nt,it,configEasing(at),st,this.changeStyle),vt=function(){rt.stopJSAnimation=yt()};this.manager.start([ht,ot,vt,st,dt])}},{key:"runStepAnimation",value:function(tt){var rt=this,nt=tt.steps,it=tt.begin,st=tt.onAnimationStart,at=nt[0],ot=at.style,dt=at.duration,ht=dt===void 0?0:dt,yt=function(xt,wt,Et){if(Et===0)return xt;var At=wt.duration,jt=wt.easing,kt=jt===void 0?"ease":jt,Lt=wt.style,Bt=wt.properties,Gt=wt.onAnimationEnd,er=Et>0?nt[Et-1]:wt,tr=Bt||Object.keys(Lt);if(typeof kt=="function"||kt==="spring")return[].concat(_toConsumableArray$2(xt),[rt.runJSAnimation.bind(rt,{from:er.style,to:Lt,duration:At,easing:kt}),At]);var ar=getTransitionVal(tr,At,kt),Mt=_objectSpread$i(_objectSpread$i(_objectSpread$i({},er.style),Lt),{},{transition:ar});return[].concat(_toConsumableArray$2(xt),[Mt,At,Gt]).filter(identity)};return this.manager.start([st].concat(_toConsumableArray$2(nt.reduce(yt,[ot,Math.max(ht,it)])),[tt.onAnimationEnd]))}},{key:"runAnimation",value:function(tt){this.manager||(this.manager=createAnimateManager());var rt=tt.begin,nt=tt.duration,it=tt.attributeName,st=tt.to,at=tt.easing,ot=tt.onAnimationStart,dt=tt.onAnimationEnd,ht=tt.steps,yt=tt.children,vt=this.manager;if(this.unSubscribe=vt.subscribe(this.handleStyleChange),typeof at=="function"||typeof yt=="function"||at==="spring"){this.runJSAnimation(tt);return}if(ht.length>1){this.runStepAnimation(tt);return}var xt=it?_defineProperty$l({},it,st):st,wt=getTransitionVal(Object.keys(xt),nt,at);vt.start([ot,rt,_objectSpread$i(_objectSpread$i({},xt),{},{transition:wt}),nt,dt])}},{key:"render",value:function(){var tt=this.props,rt=tt.children;tt.begin;var nt=tt.duration;tt.attributeName,tt.easing;var it=tt.isActive;tt.steps,tt.from,tt.to,tt.canBegin,tt.onAnimationEnd,tt.shouldReAnimate,tt.onAnimationReStart;var st=_objectWithoutProperties$8(tt,_excluded$8),at=reactExports.Children.count(rt),ot=this.state.style;if(typeof rt=="function")return rt(ot);if(!it||at===0||nt<=0)return rt;var dt=function(yt){var vt=yt.props,xt=vt.style,wt=xt===void 0?{}:xt,Et=vt.className,At=reactExports.cloneElement(yt,_objectSpread$i(_objectSpread$i({},st),{},{style:_objectSpread$i(_objectSpread$i({},wt),ot),className:Et}));return At};return at===1?dt(reactExports.Children.only(rt)):React.createElement("div",null,reactExports.Children.map(rt,function(ht){return dt(ht)}))}}]),_e}(reactExports.PureComponent);Animate.displayName="Animate";Animate.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function _(){},onAnimationStart:function _(){}};Animate.propTypes={from:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),to:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),attributeName:PropTypes.string,duration:PropTypes.number,begin:PropTypes.number,easing:PropTypes.oneOfType([PropTypes.string,PropTypes.func]),steps:PropTypes.arrayOf(PropTypes.shape({duration:PropTypes.number.isRequired,style:PropTypes.object.isRequired,easing:PropTypes.oneOfType([PropTypes.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),PropTypes.func]),properties:PropTypes.arrayOf("string"),onAnimationEnd:PropTypes.func})),children:PropTypes.oneOfType([PropTypes.node,PropTypes.func]),isActive:PropTypes.bool,canBegin:PropTypes.bool,onAnimationEnd:PropTypes.func,shouldReAnimate:PropTypes.bool,onAnimationStart:PropTypes.func,onAnimationReStart:PropTypes.func};PropTypes.object,PropTypes.object,PropTypes.object,PropTypes.element;PropTypes.object,PropTypes.object,PropTypes.object,PropTypes.oneOfType([PropTypes.array,PropTypes.element]),PropTypes.any;function _typeof$k(_){"@babel/helpers - typeof";return _typeof$k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$k(_)}function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$f.apply(this,arguments)}function _slicedToArray$3(_,$){return _arrayWithHoles$3(_)||_iterableToArrayLimit$3(_,$)||_unsupportedIterableToArray$4(_,$)||_nonIterableRest$3()}function _nonIterableRest$3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$4(_,$){if(_){if(typeof _=="string")return _arrayLikeToArray$4(_,$);var _e=Object.prototype.toString.call(_).slice(8,-1);if(_e==="Object"&&_.constructor&&(_e=_.constructor.name),_e==="Map"||_e==="Set")return Array.from(_);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray$4(_,$)}}function _arrayLikeToArray$4(_,$){($==null||$>_.length)&&($=_.length);for(var _e=0,et=new Array($);_e<$;_e++)et[_e]=_[_e];return et}function _iterableToArrayLimit$3(_,$){var _e=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(_e!=null){var et,tt,rt,nt,it=[],st=!0,at=!1;try{if(rt=(_e=_e.call(_)).next,$!==0)for(;!(st=(et=rt.call(_e)).done)&&(it.push(et.value),it.length!==$);st=!0);}catch(ot){at=!0,tt=ot}finally{try{if(!st&&_e.return!=null&&(nt=_e.return(),Object(nt)!==nt))return}finally{if(at)throw tt}}return it}}function _arrayWithHoles$3(_){if(Array.isArray(_))return _}function ownKeys$h(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$h(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$h(Object(_e),!0).forEach(function(et){_defineProperty$k(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$h(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$k(_,$,_e){return $=_toPropertyKey$k($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$k(_){var $=_toPrimitive$k(_,"string");return _typeof$k($)=="symbol"?$:$+""}function _toPrimitive$k(_,$){if(_typeof$k(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$k(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var getRectanglePath=function _($,_e,et,tt,rt){var nt=Math.min(Math.abs(et)/2,Math.abs(tt)/2),it=tt>=0?1:-1,st=et>=0?1:-1,at=tt>=0&&et>=0||tt<0&&et<0?1:0,ot;if(nt>0&&rt instanceof Array){for(var dt=[0,0,0,0],ht=0,yt=4;ht<yt;ht++)dt[ht]=rt[ht]>nt?nt:rt[ht];ot="M".concat($,",").concat(_e+it*dt[0]),dt[0]>0&&(ot+="A ".concat(dt[0],",").concat(dt[0],",0,0,").concat(at,",").concat($+st*dt[0],",").concat(_e)),ot+="L ".concat($+et-st*dt[1],",").concat(_e),dt[1]>0&&(ot+="A ".concat(dt[1],",").concat(dt[1],",0,0,").concat(at,`,
        `).concat($+et,",").concat(_e+it*dt[1])),ot+="L ".concat($+et,",").concat(_e+tt-it*dt[2]),dt[2]>0&&(ot+="A ".concat(dt[2],",").concat(dt[2],",0,0,").concat(at,`,
        `).concat($+et-st*dt[2],",").concat(_e+tt)),ot+="L ".concat($+st*dt[3],",").concat(_e+tt),dt[3]>0&&(ot+="A ".concat(dt[3],",").concat(dt[3],",0,0,").concat(at,`,
        `).concat($,",").concat(_e+tt-it*dt[3])),ot+="Z"}else if(nt>0&&rt===+rt&&rt>0){var vt=Math.min(nt,rt);ot="M ".concat($,",").concat(_e+it*vt,`
            A `).concat(vt,",").concat(vt,",0,0,").concat(at,",").concat($+st*vt,",").concat(_e,`
            L `).concat($+et-st*vt,",").concat(_e,`
            A `).concat(vt,",").concat(vt,",0,0,").concat(at,",").concat($+et,",").concat(_e+it*vt,`
            L `).concat($+et,",").concat(_e+tt-it*vt,`
            A `).concat(vt,",").concat(vt,",0,0,").concat(at,",").concat($+et-st*vt,",").concat(_e+tt,`
            L `).concat($+st*vt,",").concat(_e+tt,`
            A `).concat(vt,",").concat(vt,",0,0,").concat(at,",").concat($,",").concat(_e+tt-it*vt," Z")}else ot="M ".concat($,",").concat(_e," h ").concat(et," v ").concat(tt," h ").concat(-et," Z");return ot},isInRectangle=function _($,_e){if(!$||!_e)return!1;var et=$.x,tt=$.y,rt=_e.x,nt=_e.y,it=_e.width,st=_e.height;if(Math.abs(it)>0&&Math.abs(st)>0){var at=Math.min(rt,rt+it),ot=Math.max(rt,rt+it),dt=Math.min(nt,nt+st),ht=Math.max(nt,nt+st);return et>=at&&et<=ot&&tt>=dt&&tt<=ht}return!1},defaultProps$2={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rectangle=function _($){var _e=_objectSpread$h(_objectSpread$h({},defaultProps$2),$),et=reactExports.useRef(),tt=reactExports.useState(-1),rt=_slicedToArray$3(tt,2),nt=rt[0],it=rt[1];reactExports.useEffect(function(){if(et.current&&et.current.getTotalLength)try{var kt=et.current.getTotalLength();kt&&it(kt)}catch{}},[]);var st=_e.x,at=_e.y,ot=_e.width,dt=_e.height,ht=_e.radius,yt=_e.className,vt=_e.animationEasing,xt=_e.animationDuration,wt=_e.animationBegin,Et=_e.isAnimationActive,At=_e.isUpdateAnimationActive;if(st!==+st||at!==+at||ot!==+ot||dt!==+dt||ot===0||dt===0)return null;var jt=clsx("recharts-rectangle",yt);return At?React.createElement(Animate,{canBegin:nt>0,from:{width:ot,height:dt,x:st,y:at},to:{width:ot,height:dt,x:st,y:at},duration:xt,animationEasing:vt,isActive:At},function(kt){var Lt=kt.width,Bt=kt.height,Gt=kt.x,er=kt.y;return React.createElement(Animate,{canBegin:nt>0,from:"0px ".concat(nt===-1?1:nt,"px"),to:"".concat(nt,"px 0px"),attributeName:"strokeDasharray",begin:wt,duration:xt,isActive:Et,easing:vt},React.createElement("path",_extends$f({},filterProps(_e,!0),{className:jt,d:getRectanglePath(Gt,er,Lt,Bt,ht),ref:et})))}):React.createElement("path",_extends$f({},filterProps(_e,!0),{className:jt,d:getRectanglePath(st,at,ot,dt,ht)}))};function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$e.apply(this,arguments)}var Dot=function _($){var _e=$.cx,et=$.cy,tt=$.r,rt=$.className,nt=clsx("recharts-dot",rt);return _e===+_e&&et===+et&&tt===+tt?React.createElement("circle",_extends$e({},filterProps($,!1),adaptEventHandlers($),{className:nt,cx:_e,cy:et,r:tt})):null};function _typeof$j(_){"@babel/helpers - typeof";return _typeof$j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$j(_)}var _excluded$7=["x","y","top","left","width","height","className"];function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$d.apply(this,arguments)}function ownKeys$g(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$g(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$g(Object(_e),!0).forEach(function(et){_defineProperty$j(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$g(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$j(_,$,_e){return $=_toPropertyKey$j($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$j(_){var $=_toPrimitive$j(_,"string");return _typeof$j($)=="symbol"?$:$+""}function _toPrimitive$j(_,$){if(_typeof$j(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$j(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}function _objectWithoutProperties$7(_,$){if(_==null)return{};var _e=_objectWithoutPropertiesLoose$7(_,$),et,tt;if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_);for(tt=0;tt<rt.length;tt++)et=rt[tt],!($.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call(_,et)&&(_e[et]=_[et])}return _e}function _objectWithoutPropertiesLoose$7(_,$){if(_==null)return{};var _e={};for(var et in _)if(Object.prototype.hasOwnProperty.call(_,et)){if($.indexOf(et)>=0)continue;_e[et]=_[et]}return _e}var getPath=function _($,_e,et,tt,rt,nt){return"M".concat($,",").concat(rt,"v").concat(tt,"M").concat(nt,",").concat(_e,"h").concat(et)},Cross=function _($){var _e=$.x,et=_e===void 0?0:_e,tt=$.y,rt=tt===void 0?0:tt,nt=$.top,it=nt===void 0?0:nt,st=$.left,at=st===void 0?0:st,ot=$.width,dt=ot===void 0?0:ot,ht=$.height,yt=ht===void 0?0:ht,vt=$.className,xt=_objectWithoutProperties$7($,_excluded$7),wt=_objectSpread$g({x:et,y:rt,top:it,left:at,width:dt,height:yt},xt);return!isNumber(et)||!isNumber(rt)||!isNumber(dt)||!isNumber(yt)||!isNumber(it)||!isNumber(at)?null:React.createElement("path",_extends$d({},filterProps(wt,!0),{className:clsx("recharts-cross",vt),d:getPath(et,rt,dt,yt,it,at)}))},overArg=_overArg,getPrototype$1=overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype$1,baseGetTag$1=_baseGetTag,getPrototype=_getPrototype,isObjectLike$1=isObjectLike_1,objectTag="[object Object]",funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(_){if(!isObjectLike$1(_)||baseGetTag$1(_)!=objectTag)return!1;var $=getPrototype(_);if($===null)return!0;var _e=hasOwnProperty.call($,"constructor")&&$.constructor;return typeof _e=="function"&&_e instanceof _e&&funcToString.call(_e)==objectCtorString}var isPlainObject_1=isPlainObject;const isPlainObject$1=getDefaultExportFromCjs$1(isPlainObject_1);var baseGetTag=_baseGetTag,isObjectLike=isObjectLike_1,boolTag="[object Boolean]";function isBoolean(_){return _===!0||_===!1||isObjectLike(_)&&baseGetTag(_)==boolTag}var isBoolean_1=isBoolean;const isBoolean$1=getDefaultExportFromCjs$1(isBoolean_1);function _typeof$i(_){"@babel/helpers - typeof";return _typeof$i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$i(_)}function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$c.apply(this,arguments)}function _slicedToArray$2(_,$){return _arrayWithHoles$2(_)||_iterableToArrayLimit$2(_,$)||_unsupportedIterableToArray$3(_,$)||_nonIterableRest$2()}function _nonIterableRest$2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$3(_,$){if(_){if(typeof _=="string")return _arrayLikeToArray$3(_,$);var _e=Object.prototype.toString.call(_).slice(8,-1);if(_e==="Object"&&_.constructor&&(_e=_.constructor.name),_e==="Map"||_e==="Set")return Array.from(_);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray$3(_,$)}}function _arrayLikeToArray$3(_,$){($==null||$>_.length)&&($=_.length);for(var _e=0,et=new Array($);_e<$;_e++)et[_e]=_[_e];return et}function _iterableToArrayLimit$2(_,$){var _e=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(_e!=null){var et,tt,rt,nt,it=[],st=!0,at=!1;try{if(rt=(_e=_e.call(_)).next,$!==0)for(;!(st=(et=rt.call(_e)).done)&&(it.push(et.value),it.length!==$);st=!0);}catch(ot){at=!0,tt=ot}finally{try{if(!st&&_e.return!=null&&(nt=_e.return(),Object(nt)!==nt))return}finally{if(at)throw tt}}return it}}function _arrayWithHoles$2(_){if(Array.isArray(_))return _}function ownKeys$f(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$f(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$f(Object(_e),!0).forEach(function(et){_defineProperty$i(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$f(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$i(_,$,_e){return $=_toPropertyKey$i($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$i(_){var $=_toPrimitive$i(_,"string");return _typeof$i($)=="symbol"?$:$+""}function _toPrimitive$i(_,$){if(_typeof$i(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$i(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var getTrapezoidPath=function _($,_e,et,tt,rt){var nt=et-tt,it;return it="M ".concat($,",").concat(_e),it+="L ".concat($+et,",").concat(_e),it+="L ".concat($+et-nt/2,",").concat(_e+rt),it+="L ".concat($+et-nt/2-tt,",").concat(_e+rt),it+="L ".concat($,",").concat(_e," Z"),it},defaultProps$1={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Trapezoid=function _($){var _e=_objectSpread$f(_objectSpread$f({},defaultProps$1),$),et=reactExports.useRef(),tt=reactExports.useState(-1),rt=_slicedToArray$2(tt,2),nt=rt[0],it=rt[1];reactExports.useEffect(function(){if(et.current&&et.current.getTotalLength)try{var jt=et.current.getTotalLength();jt&&it(jt)}catch{}},[]);var st=_e.x,at=_e.y,ot=_e.upperWidth,dt=_e.lowerWidth,ht=_e.height,yt=_e.className,vt=_e.animationEasing,xt=_e.animationDuration,wt=_e.animationBegin,Et=_e.isUpdateAnimationActive;if(st!==+st||at!==+at||ot!==+ot||dt!==+dt||ht!==+ht||ot===0&&dt===0||ht===0)return null;var At=clsx("recharts-trapezoid",yt);return Et?React.createElement(Animate,{canBegin:nt>0,from:{upperWidth:0,lowerWidth:0,height:ht,x:st,y:at},to:{upperWidth:ot,lowerWidth:dt,height:ht,x:st,y:at},duration:xt,animationEasing:vt,isActive:Et},function(jt){var kt=jt.upperWidth,Lt=jt.lowerWidth,Bt=jt.height,Gt=jt.x,er=jt.y;return React.createElement(Animate,{canBegin:nt>0,from:"0px ".concat(nt===-1?1:nt,"px"),to:"".concat(nt,"px 0px"),attributeName:"strokeDasharray",begin:wt,duration:xt,easing:vt},React.createElement("path",_extends$c({},filterProps(_e,!0),{className:At,d:getTrapezoidPath(Gt,er,kt,Lt,Bt),ref:et})))}):React.createElement("g",null,React.createElement("path",_extends$c({},filterProps(_e,!0),{className:At,d:getTrapezoidPath(st,at,ot,dt,ht)})))},_excluded$6=["option","shapeType","propTransformer","activeClassName","isActive"];function _typeof$h(_){"@babel/helpers - typeof";return _typeof$h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$h(_)}function _objectWithoutProperties$6(_,$){if(_==null)return{};var _e=_objectWithoutPropertiesLoose$6(_,$),et,tt;if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_);for(tt=0;tt<rt.length;tt++)et=rt[tt],!($.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call(_,et)&&(_e[et]=_[et])}return _e}function _objectWithoutPropertiesLoose$6(_,$){if(_==null)return{};var _e={};for(var et in _)if(Object.prototype.hasOwnProperty.call(_,et)){if($.indexOf(et)>=0)continue;_e[et]=_[et]}return _e}function ownKeys$e(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$e(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$e(Object(_e),!0).forEach(function(et){_defineProperty$h(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$e(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$h(_,$,_e){return $=_toPropertyKey$h($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$h(_){var $=_toPrimitive$h(_,"string");return _typeof$h($)=="symbol"?$:$+""}function _toPrimitive$h(_,$){if(_typeof$h(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$h(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}function defaultPropTransformer(_,$){return _objectSpread$e(_objectSpread$e({},$),_)}function isSymbolsProps(_,$){return _==="symbols"}function ShapeSelector(_){var $=_.shapeType,_e=_.elementProps;switch($){case"rectangle":return React.createElement(Rectangle,_e);case"trapezoid":return React.createElement(Trapezoid,_e);case"sector":return React.createElement(Sector,_e);case"symbols":if(isSymbolsProps($))return React.createElement(Symbols,_e);break;default:return null}}function getPropsFromShapeOption(_){return reactExports.isValidElement(_)?_.props:_}function Shape(_){var $=_.option,_e=_.shapeType,et=_.propTransformer,tt=et===void 0?defaultPropTransformer:et,rt=_.activeClassName,nt=rt===void 0?"recharts-active-shape":rt,it=_.isActive,st=_objectWithoutProperties$6(_,_excluded$6),at;if(reactExports.isValidElement($))at=reactExports.cloneElement($,_objectSpread$e(_objectSpread$e({},st),getPropsFromShapeOption($)));else if(isFunction$3($))at=$(st);else if(isPlainObject$1($)&&!isBoolean$1($)){var ot=tt($,st);at=React.createElement(ShapeSelector,{shapeType:_e,elementProps:ot})}else{var dt=st;at=React.createElement(ShapeSelector,{shapeType:_e,elementProps:dt})}return it?React.createElement(Layer,{className:nt},at):at}function isFunnel(_,$){return $!=null&&"trapezoids"in _.props}function isPie(_,$){return $!=null&&"sectors"in _.props}function isScatter(_,$){return $!=null&&"points"in _.props}function compareFunnel(_,$){var _e,et,tt=_.x===($==null||(_e=$.labelViewBox)===null||_e===void 0?void 0:_e.x)||_.x===$.x,rt=_.y===($==null||(et=$.labelViewBox)===null||et===void 0?void 0:et.y)||_.y===$.y;return tt&&rt}function comparePie(_,$){var _e=_.endAngle===$.endAngle,et=_.startAngle===$.startAngle;return _e&&et}function compareScatter(_,$){var _e=_.x===$.x,et=_.y===$.y,tt=_.z===$.z;return _e&&et&&tt}function getComparisonFn(_,$){var _e;return isFunnel(_,$)?_e=compareFunnel:isPie(_,$)?_e=comparePie:isScatter(_,$)&&(_e=compareScatter),_e}function getShapeDataKey(_,$){var _e;return isFunnel(_,$)?_e="trapezoids":isPie(_,$)?_e="sectors":isScatter(_,$)&&(_e="points"),_e}function getActiveShapeTooltipPayload(_,$){if(isFunnel(_,$)){var _e;return(_e=$.tooltipPayload)===null||_e===void 0||(_e=_e[0])===null||_e===void 0||(_e=_e.payload)===null||_e===void 0?void 0:_e.payload}if(isPie(_,$)){var et;return(et=$.tooltipPayload)===null||et===void 0||(et=et[0])===null||et===void 0||(et=et.payload)===null||et===void 0?void 0:et.payload}return isScatter(_,$)?$.payload:{}}function getActiveShapeIndexForTooltip(_){var $=_.activeTooltipItem,_e=_.graphicalItem,et=_.itemData,tt=getShapeDataKey(_e,$),rt=getActiveShapeTooltipPayload(_e,$),nt=et.filter(function(st,at){var ot=isEqual$1(rt,st),dt=_e.props[tt].filter(function(vt){var xt=getComparisonFn(_e,$);return xt(vt,$)}),ht=_e.props[tt].indexOf(dt[dt.length-1]),yt=at===ht;return ot&&yt}),it=et.indexOf(nt[nt.length-1]);return it}var nativeCeil=Math.ceil,nativeMax$1=Math.max;function baseRange$1(_,$,_e,et){for(var tt=-1,rt=nativeMax$1(nativeCeil(($-_)/(_e||1)),0),nt=Array(rt);rt--;)nt[et?rt:++tt]=_,_+=_e;return nt}var _baseRange=baseRange$1,toNumber=toNumber_1,INFINITY=1/0,MAX_INTEGER=17976931348623157e292;function toFinite$2(_){if(!_)return _===0?_:0;if(_=toNumber(_),_===INFINITY||_===-INFINITY){var $=_<0?-1:1;return $*MAX_INTEGER}return _===_?_:0}var toFinite_1=toFinite$2,baseRange=_baseRange,isIterateeCall$2=_isIterateeCall,toFinite$1=toFinite_1;function createRange$1(_){return function($,_e,et){return et&&typeof et!="number"&&isIterateeCall$2($,_e,et)&&(_e=et=void 0),$=toFinite$1($),_e===void 0?(_e=$,$=0):_e=toFinite$1(_e),et=et===void 0?$<_e?1:-1:toFinite$1(et),baseRange($,_e,et,_)}}var _createRange=createRange$1,createRange=_createRange,range=createRange(),range_1=range;const range$1=getDefaultExportFromCjs$1(range_1);function _typeof$g(_){"@babel/helpers - typeof";return _typeof$g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$g(_)}function ownKeys$d(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$d(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$d(Object(_e),!0).forEach(function(et){_defineProperty$g(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$d(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$g(_,$,_e){return $=_toPropertyKey$g($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$g(_){var $=_toPrimitive$g(_,"string");return _typeof$g($)=="symbol"?$:$+""}function _toPrimitive$g(_,$){if(_typeof$g(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$g(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var PREFIX_LIST=["Webkit","Moz","O","ms"],generatePrefixStyle=function _($,_e){var et=$.replace(/(\w)/,function(rt){return rt.toUpperCase()}),tt=PREFIX_LIST.reduce(function(rt,nt){return _objectSpread$d(_objectSpread$d({},rt),{},_defineProperty$g({},nt+et,_e))},{});return tt[$]=_e,tt};function _typeof$f(_){"@babel/helpers - typeof";return _typeof$f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$f(_)}function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$b.apply(this,arguments)}function ownKeys$c(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$c(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$c(Object(_e),!0).forEach(function(et){_defineProperty$f(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$c(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _classCallCheck$b(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties$b(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,_toPropertyKey$f(et.key),et)}}function _createClass$b(_,$,_e){return $&&_defineProperties$b(_.prototype,$),_e&&_defineProperties$b(_,_e),Object.defineProperty(_,"prototype",{writable:!1}),_}function _callSuper$9(_,$,_e){return $=_getPrototypeOf$9($),_possibleConstructorReturn$9(_,_isNativeReflectConstruct$9()?Reflect.construct($,_e||[],_getPrototypeOf$9(_).constructor):$.apply(_,_e))}function _possibleConstructorReturn$9(_,$){if($&&(_typeof$f($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$9(_)}function _assertThisInitialized$9(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _isNativeReflectConstruct$9(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$9=function(){return!!_})()}function _getPrototypeOf$9(_){return _getPrototypeOf$9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},_getPrototypeOf$9(_)}function _inherits$9(_,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create($&&$.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),$&&_setPrototypeOf$9(_,$)}function _setPrototypeOf$9(_,$){return _setPrototypeOf$9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(et,tt){return et.__proto__=tt,et},_setPrototypeOf$9(_,$)}function _defineProperty$f(_,$,_e){return $=_toPropertyKey$f($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$f(_){var $=_toPrimitive$f(_,"string");return _typeof$f($)=="symbol"?$:$+""}function _toPrimitive$f(_,$){if(_typeof$f(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$f(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var createScale=function _($){var _e=$.data,et=$.startIndex,tt=$.endIndex,rt=$.x,nt=$.width,it=$.travellerWidth;if(!_e||!_e.length)return{};var st=_e.length,at=point().domain(range$1(0,st)).range([rt,rt+nt-it]),ot=at.domain().map(function(dt){return at(dt)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:at(et),endX:at(tt),scale:at,scaleValues:ot}},isTouch=function _($){return $.changedTouches&&!!$.changedTouches.length},Brush=function(_){function $(_e){var et;return _classCallCheck$b(this,$),et=_callSuper$9(this,$,[_e]),_defineProperty$f(et,"handleDrag",function(tt){et.leaveTimer&&(clearTimeout(et.leaveTimer),et.leaveTimer=null),et.state.isTravellerMoving?et.handleTravellerMove(tt):et.state.isSlideMoving&&et.handleSlideDrag(tt)}),_defineProperty$f(et,"handleTouchMove",function(tt){tt.changedTouches!=null&&tt.changedTouches.length>0&&et.handleDrag(tt.changedTouches[0])}),_defineProperty$f(et,"handleDragEnd",function(){et.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var tt=et.props,rt=tt.endIndex,nt=tt.onDragEnd,it=tt.startIndex;nt==null||nt({endIndex:rt,startIndex:it})}),et.detachDragEndListener()}),_defineProperty$f(et,"handleLeaveWrapper",function(){(et.state.isTravellerMoving||et.state.isSlideMoving)&&(et.leaveTimer=window.setTimeout(et.handleDragEnd,et.props.leaveTimeOut))}),_defineProperty$f(et,"handleEnterSlideOrTraveller",function(){et.setState({isTextActive:!0})}),_defineProperty$f(et,"handleLeaveSlideOrTraveller",function(){et.setState({isTextActive:!1})}),_defineProperty$f(et,"handleSlideDragStart",function(tt){var rt=isTouch(tt)?tt.changedTouches[0]:tt;et.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:rt.pageX}),et.attachDragEndListener()}),et.travellerDragStartHandlers={startX:et.handleTravellerDragStart.bind(et,"startX"),endX:et.handleTravellerDragStart.bind(et,"endX")},et.state={},et}return _inherits$9($,_),_createClass$b($,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(et){var tt=et.startX,rt=et.endX,nt=this.state.scaleValues,it=this.props,st=it.gap,at=it.data,ot=at.length-1,dt=Math.min(tt,rt),ht=Math.max(tt,rt),yt=$.getIndexInRange(nt,dt),vt=$.getIndexInRange(nt,ht);return{startIndex:yt-yt%st,endIndex:vt===ot?ot:vt-vt%st}}},{key:"getTextOfTick",value:function(et){var tt=this.props,rt=tt.data,nt=tt.tickFormatter,it=tt.dataKey,st=getValueByDataKey(rt[et],it,et);return isFunction$3(nt)?nt(st,et):st}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(et){var tt=this.state,rt=tt.slideMoveStartX,nt=tt.startX,it=tt.endX,st=this.props,at=st.x,ot=st.width,dt=st.travellerWidth,ht=st.startIndex,yt=st.endIndex,vt=st.onChange,xt=et.pageX-rt;xt>0?xt=Math.min(xt,at+ot-dt-it,at+ot-dt-nt):xt<0&&(xt=Math.max(xt,at-nt,at-it));var wt=this.getIndex({startX:nt+xt,endX:it+xt});(wt.startIndex!==ht||wt.endIndex!==yt)&&vt&&vt(wt),this.setState({startX:nt+xt,endX:it+xt,slideMoveStartX:et.pageX})}},{key:"handleTravellerDragStart",value:function(et,tt){var rt=isTouch(tt)?tt.changedTouches[0]:tt;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:et,brushMoveStartX:rt.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(et){var tt=this.state,rt=tt.brushMoveStartX,nt=tt.movingTravellerId,it=tt.endX,st=tt.startX,at=this.state[nt],ot=this.props,dt=ot.x,ht=ot.width,yt=ot.travellerWidth,vt=ot.onChange,xt=ot.gap,wt=ot.data,Et={startX:this.state.startX,endX:this.state.endX},At=et.pageX-rt;At>0?At=Math.min(At,dt+ht-yt-at):At<0&&(At=Math.max(At,dt-at)),Et[nt]=at+At;var jt=this.getIndex(Et),kt=jt.startIndex,Lt=jt.endIndex,Bt=function(){var er=wt.length-1;return nt==="startX"&&(it>st?kt%xt===0:Lt%xt===0)||it<st&&Lt===er||nt==="endX"&&(it>st?Lt%xt===0:kt%xt===0)||it>st&&Lt===er};this.setState(_defineProperty$f(_defineProperty$f({},nt,at+At),"brushMoveStartX",et.pageX),function(){vt&&Bt()&&vt(jt)})}},{key:"handleTravellerMoveKeyboard",value:function(et,tt){var rt=this,nt=this.state,it=nt.scaleValues,st=nt.startX,at=nt.endX,ot=this.state[tt],dt=it.indexOf(ot);if(dt!==-1){var ht=dt+et;if(!(ht===-1||ht>=it.length)){var yt=it[ht];tt==="startX"&&yt>=at||tt==="endX"&&yt<=st||this.setState(_defineProperty$f({},tt,yt),function(){rt.props.onChange(rt.getIndex({startX:rt.state.startX,endX:rt.state.endX}))})}}}},{key:"renderBackground",value:function(){var et=this.props,tt=et.x,rt=et.y,nt=et.width,it=et.height,st=et.fill,at=et.stroke;return React.createElement("rect",{stroke:at,fill:st,x:tt,y:rt,width:nt,height:it})}},{key:"renderPanorama",value:function(){var et=this.props,tt=et.x,rt=et.y,nt=et.width,it=et.height,st=et.data,at=et.children,ot=et.padding,dt=reactExports.Children.only(at);return dt?React.cloneElement(dt,{x:tt,y:rt,width:nt,height:it,margin:ot,compact:!0,data:st}):null}},{key:"renderTravellerLayer",value:function(et,tt){var rt,nt,it=this,st=this.props,at=st.y,ot=st.travellerWidth,dt=st.height,ht=st.traveller,yt=st.ariaLabel,vt=st.data,xt=st.startIndex,wt=st.endIndex,Et=Math.max(et,this.props.x),At=_objectSpread$c(_objectSpread$c({},filterProps(this.props,!1)),{},{x:Et,y:at,width:ot,height:dt}),jt=yt||"Min value: ".concat((rt=vt[xt])===null||rt===void 0?void 0:rt.name,", Max value: ").concat((nt=vt[wt])===null||nt===void 0?void 0:nt.name);return React.createElement(Layer,{tabIndex:0,role:"slider","aria-label":jt,"aria-valuenow":et,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[tt],onTouchStart:this.travellerDragStartHandlers[tt],onKeyDown:function(Lt){["ArrowLeft","ArrowRight"].includes(Lt.key)&&(Lt.preventDefault(),Lt.stopPropagation(),it.handleTravellerMoveKeyboard(Lt.key==="ArrowRight"?1:-1,tt))},onFocus:function(){it.setState({isTravellerFocused:!0})},onBlur:function(){it.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},$.renderTraveller(ht,At))}},{key:"renderSlide",value:function(et,tt){var rt=this.props,nt=rt.y,it=rt.height,st=rt.stroke,at=rt.travellerWidth,ot=Math.min(et,tt)+at,dt=Math.max(Math.abs(tt-et)-at,0);return React.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:st,fillOpacity:.2,x:ot,y:nt,width:dt,height:it})}},{key:"renderText",value:function(){var et=this.props,tt=et.startIndex,rt=et.endIndex,nt=et.y,it=et.height,st=et.travellerWidth,at=et.stroke,ot=this.state,dt=ot.startX,ht=ot.endX,yt=5,vt={pointerEvents:"none",fill:at};return React.createElement(Layer,{className:"recharts-brush-texts"},React.createElement(Text,_extends$b({textAnchor:"end",verticalAnchor:"middle",x:Math.min(dt,ht)-yt,y:nt+it/2},vt),this.getTextOfTick(tt)),React.createElement(Text,_extends$b({textAnchor:"start",verticalAnchor:"middle",x:Math.max(dt,ht)+st+yt,y:nt+it/2},vt),this.getTextOfTick(rt)))}},{key:"render",value:function(){var et=this.props,tt=et.data,rt=et.className,nt=et.children,it=et.x,st=et.y,at=et.width,ot=et.height,dt=et.alwaysShowText,ht=this.state,yt=ht.startX,vt=ht.endX,xt=ht.isTextActive,wt=ht.isSlideMoving,Et=ht.isTravellerMoving,At=ht.isTravellerFocused;if(!tt||!tt.length||!isNumber(it)||!isNumber(st)||!isNumber(at)||!isNumber(ot)||at<=0||ot<=0)return null;var jt=clsx("recharts-brush",rt),kt=React.Children.count(nt)===1,Lt=generatePrefixStyle("userSelect","none");return React.createElement(Layer,{className:jt,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:Lt},this.renderBackground(),kt&&this.renderPanorama(),this.renderSlide(yt,vt),this.renderTravellerLayer(yt,"startX"),this.renderTravellerLayer(vt,"endX"),(xt||wt||Et||At||dt)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(et){var tt=et.x,rt=et.y,nt=et.width,it=et.height,st=et.stroke,at=Math.floor(rt+it/2)-1;return React.createElement(React.Fragment,null,React.createElement("rect",{x:tt,y:rt,width:nt,height:it,fill:st,stroke:"none"}),React.createElement("line",{x1:tt+1,y1:at,x2:tt+nt-1,y2:at,fill:"none",stroke:"#fff"}),React.createElement("line",{x1:tt+1,y1:at+2,x2:tt+nt-1,y2:at+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(et,tt){var rt;return React.isValidElement(et)?rt=React.cloneElement(et,tt):isFunction$3(et)?rt=et(tt):rt=$.renderDefaultTraveller(tt),rt}},{key:"getDerivedStateFromProps",value:function(et,tt){var rt=et.data,nt=et.width,it=et.x,st=et.travellerWidth,at=et.updateId,ot=et.startIndex,dt=et.endIndex;if(rt!==tt.prevData||at!==tt.prevUpdateId)return _objectSpread$c({prevData:rt,prevTravellerWidth:st,prevUpdateId:at,prevX:it,prevWidth:nt},rt&&rt.length?createScale({data:rt,width:nt,x:it,travellerWidth:st,startIndex:ot,endIndex:dt}):{scale:null,scaleValues:null});if(tt.scale&&(nt!==tt.prevWidth||it!==tt.prevX||st!==tt.prevTravellerWidth)){tt.scale.range([it,it+nt-st]);var ht=tt.scale.domain().map(function(yt){return tt.scale(yt)});return{prevData:rt,prevTravellerWidth:st,prevUpdateId:at,prevX:it,prevWidth:nt,startX:tt.scale(et.startIndex),endX:tt.scale(et.endIndex),scaleValues:ht}}return null}},{key:"getIndexInRange",value:function(et,tt){for(var rt=et.length,nt=0,it=rt-1;it-nt>1;){var st=Math.floor((nt+it)/2);et[st]>tt?it=st:nt=st}return tt>=et[it]?it:nt}}])}(reactExports.PureComponent);_defineProperty$f(Brush,"displayName","Brush");_defineProperty$f(Brush,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var baseEach$1=_baseEach;function baseSome$1(_,$){var _e;return baseEach$1(_,function(et,tt,rt){return _e=$(et,tt,rt),!_e}),!!_e}var _baseSome=baseSome$1,arraySome=_arraySome,baseIteratee$4=_baseIteratee,baseSome=_baseSome,isArray$1=isArray_1,isIterateeCall$1=_isIterateeCall;function some(_,$,_e){var et=isArray$1(_)?arraySome:baseSome;return _e&&isIterateeCall$1(_,$,_e)&&($=void 0),et(_,baseIteratee$4($))}var some_1=some;const some$1=getDefaultExportFromCjs$1(some_1);var ifOverflowMatches=function _($,_e){var et=$.alwaysShow,tt=$.ifOverflow;return et&&(tt="extendDomain"),tt===_e},defineProperty=_defineProperty$C;function baseAssignValue$1(_,$,_e){$=="__proto__"&&defineProperty?defineProperty(_,$,{configurable:!0,enumerable:!0,value:_e,writable:!0}):_[$]=_e}var _baseAssignValue=baseAssignValue$1,baseAssignValue=_baseAssignValue,baseForOwn=_baseForOwn,baseIteratee$3=_baseIteratee;function mapValues(_,$){var _e={};return $=baseIteratee$3($),baseForOwn(_,function(et,tt,rt){baseAssignValue(_e,tt,$(et,tt,rt))}),_e}var mapValues_1=mapValues;const mapValues$1=getDefaultExportFromCjs$1(mapValues_1);function arrayEvery$1(_,$){for(var _e=-1,et=_==null?0:_.length;++_e<et;)if(!$(_[_e],_e,_))return!1;return!0}var _arrayEvery=arrayEvery$1,baseEach=_baseEach;function baseEvery$1(_,$){var _e=!0;return baseEach(_,function(et,tt,rt){return _e=!!$(et,tt,rt),_e}),_e}var _baseEvery=baseEvery$1,arrayEvery=_arrayEvery,baseEvery=_baseEvery,baseIteratee$2=_baseIteratee,isArray=isArray_1,isIterateeCall=_isIterateeCall;function every(_,$,_e){var et=isArray(_)?arrayEvery:baseEvery;return _e&&isIterateeCall(_,$,_e)&&($=void 0),et(_,baseIteratee$2($))}var every_1=every;const every$1=getDefaultExportFromCjs$1(every_1);var _excluded$5=["x","y"];function _typeof$e(_){"@babel/helpers - typeof";return _typeof$e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$e(_)}function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$a.apply(this,arguments)}function ownKeys$b(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$b(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$b(Object(_e),!0).forEach(function(et){_defineProperty$e(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$b(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$e(_,$,_e){return $=_toPropertyKey$e($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$e(_){var $=_toPrimitive$e(_,"string");return _typeof$e($)=="symbol"?$:$+""}function _toPrimitive$e(_,$){if(_typeof$e(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$e(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}function _objectWithoutProperties$5(_,$){if(_==null)return{};var _e=_objectWithoutPropertiesLoose$5(_,$),et,tt;if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_);for(tt=0;tt<rt.length;tt++)et=rt[tt],!($.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call(_,et)&&(_e[et]=_[et])}return _e}function _objectWithoutPropertiesLoose$5(_,$){if(_==null)return{};var _e={};for(var et in _)if(Object.prototype.hasOwnProperty.call(_,et)){if($.indexOf(et)>=0)continue;_e[et]=_[et]}return _e}function typeguardBarRectangleProps(_,$){var _e=_.x,et=_.y,tt=_objectWithoutProperties$5(_,_excluded$5),rt="".concat(_e),nt=parseInt(rt,10),it="".concat(et),st=parseInt(it,10),at="".concat($.height||tt.height),ot=parseInt(at,10),dt="".concat($.width||tt.width),ht=parseInt(dt,10);return _objectSpread$b(_objectSpread$b(_objectSpread$b(_objectSpread$b(_objectSpread$b({},$),tt),nt?{x:nt}:{}),st?{y:st}:{}),{},{height:ot,width:ht,name:$.name,radius:$.radius})}function BarRectangle(_){return React.createElement(Shape,_extends$a({shapeType:"rectangle",propTransformer:typeguardBarRectangleProps,activeClassName:"recharts-active-bar"},_))}var minPointSizeCallback=function _($){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(et,tt){if(typeof $=="number")return $;var rt=typeof et=="number";return rt?$(et,tt):(rt||invariant(),_e)}},_excluded$4=["value","background"],_Bar;function _typeof$d(_){"@babel/helpers - typeof";return _typeof$d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$d(_)}function _objectWithoutProperties$4(_,$){if(_==null)return{};var _e=_objectWithoutPropertiesLoose$4(_,$),et,tt;if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_);for(tt=0;tt<rt.length;tt++)et=rt[tt],!($.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call(_,et)&&(_e[et]=_[et])}return _e}function _objectWithoutPropertiesLoose$4(_,$){if(_==null)return{};var _e={};for(var et in _)if(Object.prototype.hasOwnProperty.call(_,et)){if($.indexOf(et)>=0)continue;_e[et]=_[et]}return _e}function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$9.apply(this,arguments)}function ownKeys$a(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$a(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$a(Object(_e),!0).forEach(function(et){_defineProperty$d(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$a(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _classCallCheck$a(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties$a(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,_toPropertyKey$d(et.key),et)}}function _createClass$a(_,$,_e){return $&&_defineProperties$a(_.prototype,$),_e&&_defineProperties$a(_,_e),Object.defineProperty(_,"prototype",{writable:!1}),_}function _callSuper$8(_,$,_e){return $=_getPrototypeOf$8($),_possibleConstructorReturn$8(_,_isNativeReflectConstruct$8()?Reflect.construct($,_e||[],_getPrototypeOf$8(_).constructor):$.apply(_,_e))}function _possibleConstructorReturn$8(_,$){if($&&(_typeof$d($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$8(_)}function _assertThisInitialized$8(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _isNativeReflectConstruct$8(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$8=function(){return!!_})()}function _getPrototypeOf$8(_){return _getPrototypeOf$8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},_getPrototypeOf$8(_)}function _inherits$8(_,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create($&&$.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),$&&_setPrototypeOf$8(_,$)}function _setPrototypeOf$8(_,$){return _setPrototypeOf$8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(et,tt){return et.__proto__=tt,et},_setPrototypeOf$8(_,$)}function _defineProperty$d(_,$,_e){return $=_toPropertyKey$d($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$d(_){var $=_toPrimitive$d(_,"string");return _typeof$d($)=="symbol"?$:$+""}function _toPrimitive$d(_,$){if(_typeof$d(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$d(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var Bar=function(_){function $(){var _e;_classCallCheck$a(this,$);for(var et=arguments.length,tt=new Array(et),rt=0;rt<et;rt++)tt[rt]=arguments[rt];return _e=_callSuper$8(this,$,[].concat(tt)),_defineProperty$d(_e,"state",{isAnimationFinished:!1}),_defineProperty$d(_e,"id",uniqueId("recharts-bar-")),_defineProperty$d(_e,"handleAnimationEnd",function(){var nt=_e.props.onAnimationEnd;_e.setState({isAnimationFinished:!0}),nt&&nt()}),_defineProperty$d(_e,"handleAnimationStart",function(){var nt=_e.props.onAnimationStart;_e.setState({isAnimationFinished:!1}),nt&&nt()}),_e}return _inherits$8($,_),_createClass$a($,[{key:"renderRectanglesStatically",value:function(et){var tt=this,rt=this.props,nt=rt.shape,it=rt.dataKey,st=rt.activeIndex,at=rt.activeBar,ot=filterProps(this.props,!1);return et&&et.map(function(dt,ht){var yt=ht===st,vt=yt?at:nt,xt=_objectSpread$a(_objectSpread$a(_objectSpread$a({},ot),dt),{},{isActive:yt,option:vt,index:ht,dataKey:it,onAnimationStart:tt.handleAnimationStart,onAnimationEnd:tt.handleAnimationEnd});return React.createElement(Layer,_extends$9({className:"recharts-bar-rectangle"},adaptEventsOfChild(tt.props,dt,ht),{key:"rectangle-".concat(dt==null?void 0:dt.x,"-").concat(dt==null?void 0:dt.y,"-").concat(dt==null?void 0:dt.value)}),React.createElement(BarRectangle,xt))})}},{key:"renderRectanglesWithAnimation",value:function(){var et=this,tt=this.props,rt=tt.data,nt=tt.layout,it=tt.isAnimationActive,st=tt.animationBegin,at=tt.animationDuration,ot=tt.animationEasing,dt=tt.animationId,ht=this.state.prevData;return React.createElement(Animate,{begin:st,duration:at,isActive:it,easing:ot,from:{t:0},to:{t:1},key:"bar-".concat(dt),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(yt){var vt=yt.t,xt=rt.map(function(wt,Et){var At=ht&&ht[Et];if(At){var jt=interpolateNumber$2(At.x,wt.x),kt=interpolateNumber$2(At.y,wt.y),Lt=interpolateNumber$2(At.width,wt.width),Bt=interpolateNumber$2(At.height,wt.height);return _objectSpread$a(_objectSpread$a({},wt),{},{x:jt(vt),y:kt(vt),width:Lt(vt),height:Bt(vt)})}if(nt==="horizontal"){var Gt=interpolateNumber$2(0,wt.height),er=Gt(vt);return _objectSpread$a(_objectSpread$a({},wt),{},{y:wt.y+wt.height-er,height:er})}var tr=interpolateNumber$2(0,wt.width),ar=tr(vt);return _objectSpread$a(_objectSpread$a({},wt),{},{width:ar})});return React.createElement(Layer,null,et.renderRectanglesStatically(xt))})}},{key:"renderRectangles",value:function(){var et=this.props,tt=et.data,rt=et.isAnimationActive,nt=this.state.prevData;return rt&&tt&&tt.length&&(!nt||!isEqual$1(nt,tt))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(tt)}},{key:"renderBackground",value:function(){var et=this,tt=this.props,rt=tt.data,nt=tt.dataKey,it=tt.activeIndex,st=filterProps(this.props.background,!1);return rt.map(function(at,ot){at.value;var dt=at.background,ht=_objectWithoutProperties$4(at,_excluded$4);if(!dt)return null;var yt=_objectSpread$a(_objectSpread$a(_objectSpread$a(_objectSpread$a(_objectSpread$a({},ht),{},{fill:"#eee"},dt),st),adaptEventsOfChild(et.props,at,ot)),{},{onAnimationStart:et.handleAnimationStart,onAnimationEnd:et.handleAnimationEnd,dataKey:nt,index:ot,className:"recharts-bar-background-rectangle"});return React.createElement(BarRectangle,_extends$9({key:"background-bar-".concat(ot),option:et.props.background,isActive:ot===it},yt))})}},{key:"renderErrorBar",value:function(et,tt){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var rt=this.props,nt=rt.data,it=rt.xAxis,st=rt.yAxis,at=rt.layout,ot=rt.children,dt=findAllByType(ot,ErrorBar);if(!dt)return null;var ht=at==="vertical"?nt[0].height/2:nt[0].width/2,yt=function(wt,Et){var At=Array.isArray(wt.value)?wt.value[1]:wt.value;return{x:wt.x,y:wt.y,value:At,errorVal:getValueByDataKey(wt,Et)}},vt={clipPath:et?"url(#clipPath-".concat(tt,")"):null};return React.createElement(Layer,vt,dt.map(function(xt){return React.cloneElement(xt,{key:"error-bar-".concat(tt,"-").concat(xt.props.dataKey),data:nt,xAxis:it,yAxis:st,layout:at,offset:ht,dataPointFormatter:yt})}))}},{key:"render",value:function(){var et=this.props,tt=et.hide,rt=et.data,nt=et.className,it=et.xAxis,st=et.yAxis,at=et.left,ot=et.top,dt=et.width,ht=et.height,yt=et.isAnimationActive,vt=et.background,xt=et.id;if(tt||!rt||!rt.length)return null;var wt=this.state.isAnimationFinished,Et=clsx("recharts-bar",nt),At=it&&it.allowDataOverflow,jt=st&&st.allowDataOverflow,kt=At||jt,Lt=isNil$1(xt)?this.id:xt;return React.createElement(Layer,{className:Et},At||jt?React.createElement("defs",null,React.createElement("clipPath",{id:"clipPath-".concat(Lt)},React.createElement("rect",{x:At?at:at-dt/2,y:jt?ot:ot-ht/2,width:At?dt:dt*2,height:jt?ht:ht*2}))):null,React.createElement(Layer,{className:"recharts-bar-rectangles",clipPath:kt?"url(#clipPath-".concat(Lt,")"):null},vt?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(kt,Lt),(!yt||wt)&&LabelList.renderCallByParent(this.props,rt))}}],[{key:"getDerivedStateFromProps",value:function(et,tt){return et.animationId!==tt.prevAnimationId?{prevAnimationId:et.animationId,curData:et.data,prevData:tt.curData}:et.data!==tt.curData?{curData:et.data}:null}}])}(reactExports.PureComponent);_Bar=Bar;_defineProperty$d(Bar,"displayName","Bar");_defineProperty$d(Bar,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Global.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});_defineProperty$d(Bar,"getComposedData",function(_){var $=_.props,_e=_.item,et=_.barPosition,tt=_.bandSize,rt=_.xAxis,nt=_.yAxis,it=_.xAxisTicks,st=_.yAxisTicks,at=_.stackedData,ot=_.dataStartIndex,dt=_.displayedData,ht=_.offset,yt=findPositionOfBar(et,_e);if(!yt)return null;var vt=$.layout,xt=_e.type.defaultProps,wt=xt!==void 0?_objectSpread$a(_objectSpread$a({},xt),_e.props):_e.props,Et=wt.dataKey,At=wt.children,jt=wt.minPointSize,kt=vt==="horizontal"?nt:rt,Lt=at?kt.scale.domain():null,Bt=getBaseValueOfBar({numericAxis:kt}),Gt=findAllByType(At,Cell),er=dt.map(function(tr,ar){var Mt,lt,mt,gt,bt,St;at?Mt=truncateByDomain(at[ot+ar],Lt):(Mt=getValueByDataKey(tr,Et),Array.isArray(Mt)||(Mt=[Bt,Mt]));var Nt=minPointSizeCallback(jt,_Bar.defaultProps.minPointSize)(Mt[1],ar);if(vt==="horizontal"){var Pt,Tt=[nt.scale(Mt[0]),nt.scale(Mt[1])],pt=Tt[0],Rt=Tt[1];lt=getCateCoordinateOfBar({axis:rt,ticks:it,bandSize:tt,offset:yt.offset,entry:tr,index:ar}),mt=(Pt=Rt??pt)!==null&&Pt!==void 0?Pt:void 0,gt=yt.size;var zt=pt-Rt;if(bt=Number.isNaN(zt)?0:zt,St={x:lt,y:nt.y,width:gt,height:nt.height},Math.abs(Nt)>0&&Math.abs(bt)<Math.abs(Nt)){var Yt=mathSign(bt||Nt)*(Math.abs(Nt)-Math.abs(bt));mt-=Yt,bt+=Yt}}else{var ir=[rt.scale(Mt[0]),rt.scale(Mt[1])],ur=ir[0],cr=ir[1];if(lt=ur,mt=getCateCoordinateOfBar({axis:nt,ticks:st,bandSize:tt,offset:yt.offset,entry:tr,index:ar}),gt=cr-ur,bt=yt.size,St={x:rt.x,y:mt,width:rt.width,height:bt},Math.abs(Nt)>0&&Math.abs(gt)<Math.abs(Nt)){var rr=mathSign(gt||Nt)*(Math.abs(Nt)-Math.abs(gt));gt+=rr}}return _objectSpread$a(_objectSpread$a(_objectSpread$a({},tr),{},{x:lt,y:mt,width:gt,height:bt,value:at?Mt:Mt[1],payload:tr,background:St},Gt&&Gt[ar]&&Gt[ar].props),{},{tooltipPayload:[getTooltipItem(_e,tr)],tooltipPosition:{x:lt+gt/2,y:mt+bt/2}})});return _objectSpread$a({data:er,layout:vt},ht)});function _typeof$c(_){"@babel/helpers - typeof";return _typeof$c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$c(_)}function _classCallCheck$9(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties$9(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,_toPropertyKey$c(et.key),et)}}function _createClass$9(_,$,_e){return $&&_defineProperties$9(_.prototype,$),_e&&_defineProperties$9(_,_e),Object.defineProperty(_,"prototype",{writable:!1}),_}function ownKeys$9(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$9(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$9(Object(_e),!0).forEach(function(et){_defineProperty$c(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$9(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$c(_,$,_e){return $=_toPropertyKey$c($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$c(_){var $=_toPrimitive$c(_,"string");return _typeof$c($)=="symbol"?$:$+""}function _toPrimitive$c(_,$){if(_typeof$c(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$c(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var formatAxisMap=function _($,_e,et,tt,rt){var nt=$.width,it=$.height,st=$.layout,at=$.children,ot=Object.keys(_e),dt={left:et.left,leftMirror:et.left,right:nt-et.right,rightMirror:nt-et.right,top:et.top,topMirror:et.top,bottom:it-et.bottom,bottomMirror:it-et.bottom},ht=!!findChildByType(at,Bar);return ot.reduce(function(yt,vt){var xt=_e[vt],wt=xt.orientation,Et=xt.domain,At=xt.padding,jt=At===void 0?{}:At,kt=xt.mirror,Lt=xt.reversed,Bt="".concat(wt).concat(kt?"Mirror":""),Gt,er,tr,ar,Mt;if(xt.type==="number"&&(xt.padding==="gap"||xt.padding==="no-gap")){var lt=Et[1]-Et[0],mt=1/0,gt=xt.categoricalDomain.sort();if(gt.forEach(function(ir,ur){ur>0&&(mt=Math.min((ir||0)-(gt[ur-1]||0),mt))}),Number.isFinite(mt)){var bt=mt/lt,St=xt.layout==="vertical"?et.height:et.width;if(xt.padding==="gap"&&(Gt=bt*St/2),xt.padding==="no-gap"){var Nt=getPercentValue($.barCategoryGap,bt*St),Pt=bt*St/2;Gt=Pt-Nt-(Pt-Nt)/St*Nt}}}tt==="xAxis"?er=[et.left+(jt.left||0)+(Gt||0),et.left+et.width-(jt.right||0)-(Gt||0)]:tt==="yAxis"?er=st==="horizontal"?[et.top+et.height-(jt.bottom||0),et.top+(jt.top||0)]:[et.top+(jt.top||0)+(Gt||0),et.top+et.height-(jt.bottom||0)-(Gt||0)]:er=xt.range,Lt&&(er=[er[1],er[0]]);var Tt=parseScale(xt,rt,ht),pt=Tt.scale,Rt=Tt.realScaleType;pt.domain(Et).range(er),checkDomainOfScale(pt);var zt=getTicksOfScale(pt,_objectSpread$9(_objectSpread$9({},xt),{},{realScaleType:Rt}));tt==="xAxis"?(Mt=wt==="top"&&!kt||wt==="bottom"&&kt,tr=et.left,ar=dt[Bt]-Mt*xt.height):tt==="yAxis"&&(Mt=wt==="left"&&!kt||wt==="right"&&kt,tr=dt[Bt]-Mt*xt.width,ar=et.top);var Yt=_objectSpread$9(_objectSpread$9(_objectSpread$9({},xt),zt),{},{realScaleType:Rt,x:tr,y:ar,scale:pt,width:tt==="xAxis"?et.width:xt.width,height:tt==="yAxis"?et.height:xt.height});return Yt.bandSize=getBandSizeOfAxis(Yt,zt),!xt.hide&&tt==="xAxis"?dt[Bt]+=(Mt?-1:1)*Yt.height:xt.hide||(dt[Bt]+=(Mt?-1:1)*Yt.width),_objectSpread$9(_objectSpread$9({},yt),{},_defineProperty$c({},vt,Yt))},{})},rectWithPoints=function _($,_e){var et=$.x,tt=$.y,rt=_e.x,nt=_e.y;return{x:Math.min(et,rt),y:Math.min(tt,nt),width:Math.abs(rt-et),height:Math.abs(nt-tt)}},rectWithCoords=function _($){var _e=$.x1,et=$.y1,tt=$.x2,rt=$.y2;return rectWithPoints({x:_e,y:et},{x:tt,y:rt})},ScaleHelper=function(){function _($){_classCallCheck$9(this,_),this.scale=$}return _createClass$9(_,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(_e){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},tt=et.bandAware,rt=et.position;if(_e!==void 0){if(rt)switch(rt){case"start":return this.scale(_e);case"middle":{var nt=this.bandwidth?this.bandwidth()/2:0;return this.scale(_e)+nt}case"end":{var it=this.bandwidth?this.bandwidth():0;return this.scale(_e)+it}default:return this.scale(_e)}if(tt){var st=this.bandwidth?this.bandwidth()/2:0;return this.scale(_e)+st}return this.scale(_e)}}},{key:"isInRange",value:function(_e){var et=this.range(),tt=et[0],rt=et[et.length-1];return tt<=rt?_e>=tt&&_e<=rt:_e>=rt&&_e<=tt}}],[{key:"create",value:function(_e){return new _(_e)}}])}();_defineProperty$c(ScaleHelper,"EPS",1e-4);var createLabeledScales=function _($){var _e=Object.keys($).reduce(function(et,tt){return _objectSpread$9(_objectSpread$9({},et),{},_defineProperty$c({},tt,ScaleHelper.create($[tt])))},{});return _objectSpread$9(_objectSpread$9({},_e),{},{apply:function(tt){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},nt=rt.bandAware,it=rt.position;return mapValues$1(tt,function(st,at){return _e[at].apply(st,{bandAware:nt,position:it})})},isInRange:function(tt){return every$1(tt,function(rt,nt){return _e[nt].isInRange(rt)})}})};function normalizeAngle(_){return(_%180+180)%180}var getAngledRectangleWidth=function _($){var _e=$.width,et=$.height,tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,rt=normalizeAngle(tt),nt=rt*Math.PI/180,it=Math.atan(et/_e),st=nt>it&&nt<Math.PI-it?et/Math.sin(nt):_e/Math.cos(nt);return Math.abs(st)},baseIteratee$1=_baseIteratee,isArrayLike=isArrayLike_1,keys=keys_1;function createFind$1(_){return function($,_e,et){var tt=Object($);if(!isArrayLike($)){var rt=baseIteratee$1(_e);$=keys($),_e=function(it){return rt(tt[it],it,tt)}}var nt=_($,_e,et);return nt>-1?tt[rt?$[nt]:nt]:void 0}}var _createFind=createFind$1,toFinite=toFinite_1;function toInteger$1(_){var $=toFinite(_),_e=$%1;return $===$?_e?$-_e:$:0}var toInteger_1=toInteger$1,baseFindIndex=_baseFindIndex,baseIteratee=_baseIteratee,toInteger=toInteger_1,nativeMax=Math.max;function findIndex$1(_,$,_e){var et=_==null?0:_.length;if(!et)return-1;var tt=_e==null?0:toInteger(_e);return tt<0&&(tt=nativeMax(et+tt,0)),baseFindIndex(_,baseIteratee($),tt)}var findIndex_1=findIndex$1,createFind=_createFind,findIndex=findIndex_1,find=createFind(findIndex),find_1=find;const find$1=getDefaultExportFromCjs$1(find_1);var calculateViewBox=memoize$3(function(_){return{x:_.left,y:_.top,width:_.width,height:_.height}},function(_){return["l",_.left,"t",_.top,"w",_.width,"h",_.height].join("")}),XAxisContext=reactExports.createContext(void 0),YAxisContext=reactExports.createContext(void 0),ViewBoxContext=reactExports.createContext(void 0),OffsetContext=reactExports.createContext({}),ClipPathIdContext=reactExports.createContext(void 0),ChartHeightContext=reactExports.createContext(0),ChartWidthContext=reactExports.createContext(0),ChartLayoutContextProvider=function _($){var _e=$.state,et=_e.xAxisMap,tt=_e.yAxisMap,rt=_e.offset,nt=$.clipPathId,it=$.children,st=$.width,at=$.height,ot=calculateViewBox(rt);return React.createElement(XAxisContext.Provider,{value:et},React.createElement(YAxisContext.Provider,{value:tt},React.createElement(OffsetContext.Provider,{value:rt},React.createElement(ViewBoxContext.Provider,{value:ot},React.createElement(ClipPathIdContext.Provider,{value:nt},React.createElement(ChartHeightContext.Provider,{value:at},React.createElement(ChartWidthContext.Provider,{value:st},it)))))))},useClipPathId=function _(){return reactExports.useContext(ClipPathIdContext)},useXAxisOrThrow=function _($){var _e=reactExports.useContext(XAxisContext);_e==null&&invariant();var et=_e[$];return et==null&&invariant(),et},useArbitraryXAxis=function _(){var $=reactExports.useContext(XAxisContext);return getAnyElementOfObject($)},useYAxisWithFiniteDomainOrRandom=function _(){var $=reactExports.useContext(YAxisContext),_e=find$1($,function(et){return every$1(et.domain,Number.isFinite)});return _e||getAnyElementOfObject($)},useYAxisOrThrow=function _($){var _e=reactExports.useContext(YAxisContext);_e==null&&invariant();var et=_e[$];return et==null&&invariant(),et},useViewBox=function _(){var $=reactExports.useContext(ViewBoxContext);return $},useOffset=function _(){return reactExports.useContext(OffsetContext)},useChartWidth=function _(){return reactExports.useContext(ChartWidthContext)},useChartHeight=function _(){return reactExports.useContext(ChartHeightContext)};function _typeof$b(_){"@babel/helpers - typeof";return _typeof$b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$b(_)}function _classCallCheck$8(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties$8(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,_toPropertyKey$b(et.key),et)}}function _createClass$8(_,$,_e){return $&&_defineProperties$8(_.prototype,$),Object.defineProperty(_,"prototype",{writable:!1}),_}function _callSuper$7(_,$,_e){return $=_getPrototypeOf$7($),_possibleConstructorReturn$7(_,_isNativeReflectConstruct$7()?Reflect.construct($,_e||[],_getPrototypeOf$7(_).constructor):$.apply(_,_e))}function _possibleConstructorReturn$7(_,$){if($&&(_typeof$b($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$7(_)}function _assertThisInitialized$7(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _isNativeReflectConstruct$7(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$7=function(){return!!_})()}function _getPrototypeOf$7(_){return _getPrototypeOf$7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},_getPrototypeOf$7(_)}function _inherits$7(_,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create($&&$.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),$&&_setPrototypeOf$7(_,$)}function _setPrototypeOf$7(_,$){return _setPrototypeOf$7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(et,tt){return et.__proto__=tt,et},_setPrototypeOf$7(_,$)}function ownKeys$8(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$8(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$8(Object(_e),!0).forEach(function(et){_defineProperty$b(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$8(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$b(_,$,_e){return $=_toPropertyKey$b($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$b(_){var $=_toPrimitive$b(_,"string");return _typeof$b($)=="symbol"?$:$+""}function _toPrimitive$b(_,$){if(_typeof$b(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$b(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}function _slicedToArray$1(_,$){return _arrayWithHoles$1(_)||_iterableToArrayLimit$1(_,$)||_unsupportedIterableToArray$2(_,$)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$2(_,$){if(_){if(typeof _=="string")return _arrayLikeToArray$2(_,$);var _e=Object.prototype.toString.call(_).slice(8,-1);if(_e==="Object"&&_.constructor&&(_e=_.constructor.name),_e==="Map"||_e==="Set")return Array.from(_);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray$2(_,$)}}function _arrayLikeToArray$2(_,$){($==null||$>_.length)&&($=_.length);for(var _e=0,et=new Array($);_e<$;_e++)et[_e]=_[_e];return et}function _iterableToArrayLimit$1(_,$){var _e=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(_e!=null){var et,tt,rt,nt,it=[],st=!0,at=!1;try{if(rt=(_e=_e.call(_)).next,$!==0)for(;!(st=(et=rt.call(_e)).done)&&(it.push(et.value),it.length!==$);st=!0);}catch(ot){at=!0,tt=ot}finally{try{if(!st&&_e.return!=null&&(nt=_e.return(),Object(nt)!==nt))return}finally{if(at)throw tt}}return it}}function _arrayWithHoles$1(_){if(Array.isArray(_))return _}function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$8.apply(this,arguments)}var renderLine=function _($,_e){var et;return React.isValidElement($)?et=React.cloneElement($,_e):isFunction$3($)?et=$(_e):et=React.createElement("line",_extends$8({},_e,{className:"recharts-reference-line-line"})),et},getEndPoints=function _($,_e,et,tt,rt,nt,it,st,at){var ot=rt.x,dt=rt.y,ht=rt.width,yt=rt.height;if(et){var vt=at.y,xt=$.y.apply(vt,{position:nt});if(ifOverflowMatches(at,"discard")&&!$.y.isInRange(xt))return null;var wt=[{x:ot+ht,y:xt},{x:ot,y:xt}];return st==="left"?wt.reverse():wt}if(_e){var Et=at.x,At=$.x.apply(Et,{position:nt});if(ifOverflowMatches(at,"discard")&&!$.x.isInRange(At))return null;var jt=[{x:At,y:dt+yt},{x:At,y:dt}];return it==="top"?jt.reverse():jt}if(tt){var kt=at.segment,Lt=kt.map(function(Bt){return $.apply(Bt,{position:nt})});return ifOverflowMatches(at,"discard")&&some$1(Lt,function(Bt){return!$.isInRange(Bt)})?null:Lt}return null};function ReferenceLineImpl(_){var $=_.x,_e=_.y,et=_.segment,tt=_.xAxisId,rt=_.yAxisId,nt=_.shape,it=_.className,st=_.alwaysShow,at=useClipPathId(),ot=useXAxisOrThrow(tt),dt=useYAxisOrThrow(rt),ht=useViewBox();if(!at||!ht)return null;warn(st===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var yt=createLabeledScales({x:ot.scale,y:dt.scale}),vt=isNumOrStr($),xt=isNumOrStr(_e),wt=et&&et.length===2,Et=getEndPoints(yt,vt,xt,wt,ht,_.position,ot.orientation,dt.orientation,_);if(!Et)return null;var At=_slicedToArray$1(Et,2),jt=At[0],kt=jt.x,Lt=jt.y,Bt=At[1],Gt=Bt.x,er=Bt.y,tr=ifOverflowMatches(_,"hidden")?"url(#".concat(at,")"):void 0,ar=_objectSpread$8(_objectSpread$8({clipPath:tr},filterProps(_,!0)),{},{x1:kt,y1:Lt,x2:Gt,y2:er});return React.createElement(Layer,{className:clsx("recharts-reference-line",it)},renderLine(nt,ar),Label.renderCallByParent(_,rectWithCoords({x1:kt,y1:Lt,x2:Gt,y2:er})))}var ReferenceLine=function(_){function $(){return _classCallCheck$8(this,$),_callSuper$7(this,$,arguments)}return _inherits$7($,_),_createClass$8($,[{key:"render",value:function(){return React.createElement(ReferenceLineImpl,this.props)}}])}(React.Component);_defineProperty$b(ReferenceLine,"displayName","ReferenceLine");_defineProperty$b(ReferenceLine,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$7.apply(this,arguments)}function _typeof$a(_){"@babel/helpers - typeof";return _typeof$a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$a(_)}function ownKeys$7(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$7(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$7(Object(_e),!0).forEach(function(et){_defineProperty$a(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$7(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _classCallCheck$7(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,_toPropertyKey$a(et.key),et)}}function _createClass$7(_,$,_e){return $&&_defineProperties$7(_.prototype,$),Object.defineProperty(_,"prototype",{writable:!1}),_}function _callSuper$6(_,$,_e){return $=_getPrototypeOf$6($),_possibleConstructorReturn$6(_,_isNativeReflectConstruct$6()?Reflect.construct($,_e||[],_getPrototypeOf$6(_).constructor):$.apply(_,_e))}function _possibleConstructorReturn$6(_,$){if($&&(_typeof$a($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$6(_)}function _assertThisInitialized$6(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _isNativeReflectConstruct$6(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$6=function(){return!!_})()}function _getPrototypeOf$6(_){return _getPrototypeOf$6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},_getPrototypeOf$6(_)}function _inherits$6(_,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create($&&$.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),$&&_setPrototypeOf$6(_,$)}function _setPrototypeOf$6(_,$){return _setPrototypeOf$6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(et,tt){return et.__proto__=tt,et},_setPrototypeOf$6(_,$)}function _defineProperty$a(_,$,_e){return $=_toPropertyKey$a($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$a(_){var $=_toPrimitive$a(_,"string");return _typeof$a($)=="symbol"?$:$+""}function _toPrimitive$a(_,$){if(_typeof$a(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$a(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var getCoordinate=function _($){var _e=$.x,et=$.y,tt=$.xAxis,rt=$.yAxis,nt=createLabeledScales({x:tt.scale,y:rt.scale}),it=nt.apply({x:_e,y:et},{bandAware:!0});return ifOverflowMatches($,"discard")&&!nt.isInRange(it)?null:it},ReferenceDot=function(_){function $(){return _classCallCheck$7(this,$),_callSuper$6(this,$,arguments)}return _inherits$6($,_),_createClass$7($,[{key:"render",value:function(){var et=this.props,tt=et.x,rt=et.y,nt=et.r,it=et.alwaysShow,st=et.clipPathId,at=isNumOrStr(tt),ot=isNumOrStr(rt);if(warn(it===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!at||!ot)return null;var dt=getCoordinate(this.props);if(!dt)return null;var ht=dt.x,yt=dt.y,vt=this.props,xt=vt.shape,wt=vt.className,Et=ifOverflowMatches(this.props,"hidden")?"url(#".concat(st,")"):void 0,At=_objectSpread$7(_objectSpread$7({clipPath:Et},filterProps(this.props,!0)),{},{cx:ht,cy:yt});return React.createElement(Layer,{className:clsx("recharts-reference-dot",wt)},$.renderDot(xt,At),Label.renderCallByParent(this.props,{x:ht-nt,y:yt-nt,width:2*nt,height:2*nt}))}}])}(React.Component);_defineProperty$a(ReferenceDot,"displayName","ReferenceDot");_defineProperty$a(ReferenceDot,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});_defineProperty$a(ReferenceDot,"renderDot",function(_,$){var _e;return React.isValidElement(_)?_e=React.cloneElement(_,$):isFunction$3(_)?_e=_($):_e=React.createElement(Dot,_extends$7({},$,{cx:$.cx,cy:$.cy,className:"recharts-reference-dot-dot"})),_e});function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$6.apply(this,arguments)}function _typeof$9(_){"@babel/helpers - typeof";return _typeof$9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$9(_)}function ownKeys$6(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$6(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$6(Object(_e),!0).forEach(function(et){_defineProperty$9(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$6(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _classCallCheck$6(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,_toPropertyKey$9(et.key),et)}}function _createClass$6(_,$,_e){return $&&_defineProperties$6(_.prototype,$),Object.defineProperty(_,"prototype",{writable:!1}),_}function _callSuper$5(_,$,_e){return $=_getPrototypeOf$5($),_possibleConstructorReturn$5(_,_isNativeReflectConstruct$5()?Reflect.construct($,_e||[],_getPrototypeOf$5(_).constructor):$.apply(_,_e))}function _possibleConstructorReturn$5(_,$){if($&&(_typeof$9($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$5(_)}function _assertThisInitialized$5(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _isNativeReflectConstruct$5(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$5=function(){return!!_})()}function _getPrototypeOf$5(_){return _getPrototypeOf$5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},_getPrototypeOf$5(_)}function _inherits$5(_,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create($&&$.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),$&&_setPrototypeOf$5(_,$)}function _setPrototypeOf$5(_,$){return _setPrototypeOf$5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(et,tt){return et.__proto__=tt,et},_setPrototypeOf$5(_,$)}function _defineProperty$9(_,$,_e){return $=_toPropertyKey$9($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$9(_){var $=_toPrimitive$9(_,"string");return _typeof$9($)=="symbol"?$:$+""}function _toPrimitive$9(_,$){if(_typeof$9(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$9(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var getRect=function _($,_e,et,tt,rt){var nt=rt.x1,it=rt.x2,st=rt.y1,at=rt.y2,ot=rt.xAxis,dt=rt.yAxis;if(!ot||!dt)return null;var ht=createLabeledScales({x:ot.scale,y:dt.scale}),yt={x:$?ht.x.apply(nt,{position:"start"}):ht.x.rangeMin,y:et?ht.y.apply(st,{position:"start"}):ht.y.rangeMin},vt={x:_e?ht.x.apply(it,{position:"end"}):ht.x.rangeMax,y:tt?ht.y.apply(at,{position:"end"}):ht.y.rangeMax};return ifOverflowMatches(rt,"discard")&&(!ht.isInRange(yt)||!ht.isInRange(vt))?null:rectWithPoints(yt,vt)},ReferenceArea=function(_){function $(){return _classCallCheck$6(this,$),_callSuper$5(this,$,arguments)}return _inherits$5($,_),_createClass$6($,[{key:"render",value:function(){var et=this.props,tt=et.x1,rt=et.x2,nt=et.y1,it=et.y2,st=et.className,at=et.alwaysShow,ot=et.clipPathId;warn(at===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var dt=isNumOrStr(tt),ht=isNumOrStr(rt),yt=isNumOrStr(nt),vt=isNumOrStr(it),xt=this.props.shape;if(!dt&&!ht&&!yt&&!vt&&!xt)return null;var wt=getRect(dt,ht,yt,vt,this.props);if(!wt&&!xt)return null;var Et=ifOverflowMatches(this.props,"hidden")?"url(#".concat(ot,")"):void 0;return React.createElement(Layer,{className:clsx("recharts-reference-area",st)},$.renderRect(xt,_objectSpread$6(_objectSpread$6({clipPath:Et},filterProps(this.props,!0)),wt)),Label.renderCallByParent(this.props,wt))}}])}(React.Component);_defineProperty$9(ReferenceArea,"displayName","ReferenceArea");_defineProperty$9(ReferenceArea,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});_defineProperty$9(ReferenceArea,"renderRect",function(_,$){var _e;return React.isValidElement(_)?_e=React.cloneElement(_,$):isFunction$3(_)?_e=_($):_e=React.createElement(Rectangle,_extends$6({},$,{className:"recharts-reference-area-rect"})),_e});function getEveryNthWithCondition(_,$,_e){if($<1)return[];if($===1&&_e===void 0)return _;for(var et=[],tt=0;tt<_.length;tt+=$)et.push(_[tt]);return et}function getAngledTickWidth(_,$,_e){var et={width:_.width+$.width,height:_.height+$.height};return getAngledRectangleWidth(et,_e)}function getTickBoundaries(_,$,_e){var et=_e==="width",tt=_.x,rt=_.y,nt=_.width,it=_.height;return $===1?{start:et?tt:rt,end:et?tt+nt:rt+it}:{start:et?tt+nt:rt+it,end:et?tt:rt}}function isVisible(_,$,_e,et,tt){if(_*$<_*et||_*$>_*tt)return!1;var rt=_e();return _*($-_*rt/2-et)>=0&&_*($+_*rt/2-tt)<=0}function getNumberIntervalTicks(_,$){return getEveryNthWithCondition(_,$+1)}function getEquidistantTicks(_,$,_e,et,tt){for(var rt=(et||[]).slice(),nt=$.start,it=$.end,st=0,at=1,ot=nt,dt=function(){var vt=et==null?void 0:et[st];if(vt===void 0)return{v:getEveryNthWithCondition(et,at)};var xt=st,wt,Et=function(){return wt===void 0&&(wt=_e(vt,xt)),wt},At=vt.coordinate,jt=st===0||isVisible(_,At,Et,ot,it);jt||(st=0,ot=nt,at+=1),jt&&(ot=At+_*(Et()/2+tt),st+=at)},ht;at<=rt.length;)if(ht=dt(),ht)return ht.v;return[]}function _typeof$8(_){"@babel/helpers - typeof";return _typeof$8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$8(_)}function ownKeys$5(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$5(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$5(Object(_e),!0).forEach(function(et){_defineProperty$8(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$5(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$8(_,$,_e){return $=_toPropertyKey$8($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$8(_){var $=_toPrimitive$8(_,"string");return _typeof$8($)=="symbol"?$:$+""}function _toPrimitive$8(_,$){if(_typeof$8(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$8(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}function getTicksEnd(_,$,_e,et,tt){for(var rt=(et||[]).slice(),nt=rt.length,it=$.start,st=$.end,at=function(ht){var yt=rt[ht],vt,xt=function(){return vt===void 0&&(vt=_e(yt,ht)),vt};if(ht===nt-1){var wt=_*(yt.coordinate+_*xt()/2-st);rt[ht]=yt=_objectSpread$5(_objectSpread$5({},yt),{},{tickCoord:wt>0?yt.coordinate-wt*_:yt.coordinate})}else rt[ht]=yt=_objectSpread$5(_objectSpread$5({},yt),{},{tickCoord:yt.coordinate});var Et=isVisible(_,yt.tickCoord,xt,it,st);Et&&(st=yt.tickCoord-_*(xt()/2+tt),rt[ht]=_objectSpread$5(_objectSpread$5({},yt),{},{isShow:!0}))},ot=nt-1;ot>=0;ot--)at(ot);return rt}function getTicksStart(_,$,_e,et,tt,rt){var nt=(et||[]).slice(),it=nt.length,st=$.start,at=$.end;if(rt){var ot=et[it-1],dt=_e(ot,it-1),ht=_*(ot.coordinate+_*dt/2-at);nt[it-1]=ot=_objectSpread$5(_objectSpread$5({},ot),{},{tickCoord:ht>0?ot.coordinate-ht*_:ot.coordinate});var yt=isVisible(_,ot.tickCoord,function(){return dt},st,at);yt&&(at=ot.tickCoord-_*(dt/2+tt),nt[it-1]=_objectSpread$5(_objectSpread$5({},ot),{},{isShow:!0}))}for(var vt=rt?it-1:it,xt=function(At){var jt=nt[At],kt,Lt=function(){return kt===void 0&&(kt=_e(jt,At)),kt};if(At===0){var Bt=_*(jt.coordinate-_*Lt()/2-st);nt[At]=jt=_objectSpread$5(_objectSpread$5({},jt),{},{tickCoord:Bt<0?jt.coordinate-Bt*_:jt.coordinate})}else nt[At]=jt=_objectSpread$5(_objectSpread$5({},jt),{},{tickCoord:jt.coordinate});var Gt=isVisible(_,jt.tickCoord,Lt,st,at);Gt&&(st=jt.tickCoord+_*(Lt()/2+tt),nt[At]=_objectSpread$5(_objectSpread$5({},jt),{},{isShow:!0}))},wt=0;wt<vt;wt++)xt(wt);return nt}function getTicks(_,$,_e){var et=_.tick,tt=_.ticks,rt=_.viewBox,nt=_.minTickGap,it=_.orientation,st=_.interval,at=_.tickFormatter,ot=_.unit,dt=_.angle;if(!tt||!tt.length||!et)return[];if(isNumber(st)||Global.isSsr)return getNumberIntervalTicks(tt,typeof st=="number"&&isNumber(st)?st:0);var ht=[],yt=it==="top"||it==="bottom"?"width":"height",vt=ot&&yt==="width"?getStringSize(ot,{fontSize:$,letterSpacing:_e}):{width:0,height:0},xt=function(jt,kt){var Lt=isFunction$3(at)?at(jt.value,kt):jt.value;return yt==="width"?getAngledTickWidth(getStringSize(Lt,{fontSize:$,letterSpacing:_e}),vt,dt):getStringSize(Lt,{fontSize:$,letterSpacing:_e})[yt]},wt=tt.length>=2?mathSign(tt[1].coordinate-tt[0].coordinate):1,Et=getTickBoundaries(rt,wt,yt);return st==="equidistantPreserveStart"?getEquidistantTicks(wt,Et,xt,tt,nt):(st==="preserveStart"||st==="preserveStartEnd"?ht=getTicksStart(wt,Et,xt,tt,nt,st==="preserveStartEnd"):ht=getTicksEnd(wt,Et,xt,tt,nt),ht.filter(function(At){return At.isShow}))}var _excluded$3=["viewBox"],_excluded2$3=["viewBox"],_excluded3=["ticks"];function _typeof$7(_){"@babel/helpers - typeof";return _typeof$7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$7(_)}function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$5.apply(this,arguments)}function ownKeys$4(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$4(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$4(Object(_e),!0).forEach(function(et){_defineProperty$7(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$4(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _objectWithoutProperties$3(_,$){if(_==null)return{};var _e=_objectWithoutPropertiesLoose$3(_,$),et,tt;if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_);for(tt=0;tt<rt.length;tt++)et=rt[tt],!($.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call(_,et)&&(_e[et]=_[et])}return _e}function _objectWithoutPropertiesLoose$3(_,$){if(_==null)return{};var _e={};for(var et in _)if(Object.prototype.hasOwnProperty.call(_,et)){if($.indexOf(et)>=0)continue;_e[et]=_[et]}return _e}function _classCallCheck$5(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,_toPropertyKey$7(et.key),et)}}function _createClass$5(_,$,_e){return $&&_defineProperties$5(_.prototype,$),_e&&_defineProperties$5(_,_e),Object.defineProperty(_,"prototype",{writable:!1}),_}function _callSuper$4(_,$,_e){return $=_getPrototypeOf$4($),_possibleConstructorReturn$4(_,_isNativeReflectConstruct$4()?Reflect.construct($,_e||[],_getPrototypeOf$4(_).constructor):$.apply(_,_e))}function _possibleConstructorReturn$4(_,$){if($&&(_typeof$7($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$4(_)}function _assertThisInitialized$4(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _isNativeReflectConstruct$4(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$4=function(){return!!_})()}function _getPrototypeOf$4(_){return _getPrototypeOf$4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},_getPrototypeOf$4(_)}function _inherits$4(_,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create($&&$.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),$&&_setPrototypeOf$4(_,$)}function _setPrototypeOf$4(_,$){return _setPrototypeOf$4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(et,tt){return et.__proto__=tt,et},_setPrototypeOf$4(_,$)}function _defineProperty$7(_,$,_e){return $=_toPropertyKey$7($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$7(_){var $=_toPrimitive$7(_,"string");return _typeof$7($)=="symbol"?$:$+""}function _toPrimitive$7(_,$){if(_typeof$7(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$7(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var CartesianAxis=function(_){function $(_e){var et;return _classCallCheck$5(this,$),et=_callSuper$4(this,$,[_e]),et.state={fontSize:"",letterSpacing:""},et}return _inherits$4($,_),_createClass$5($,[{key:"shouldComponentUpdate",value:function(et,tt){var rt=et.viewBox,nt=_objectWithoutProperties$3(et,_excluded$3),it=this.props,st=it.viewBox,at=_objectWithoutProperties$3(it,_excluded2$3);return!shallowEqual(rt,st)||!shallowEqual(nt,at)||!shallowEqual(tt,this.state)}},{key:"componentDidMount",value:function(){var et=this.layerReference;if(et){var tt=et.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];tt&&this.setState({fontSize:window.getComputedStyle(tt).fontSize,letterSpacing:window.getComputedStyle(tt).letterSpacing})}}},{key:"getTickLineCoord",value:function(et){var tt=this.props,rt=tt.x,nt=tt.y,it=tt.width,st=tt.height,at=tt.orientation,ot=tt.tickSize,dt=tt.mirror,ht=tt.tickMargin,yt,vt,xt,wt,Et,At,jt=dt?-1:1,kt=et.tickSize||ot,Lt=isNumber(et.tickCoord)?et.tickCoord:et.coordinate;switch(at){case"top":yt=vt=et.coordinate,wt=nt+ +!dt*st,xt=wt-jt*kt,At=xt-jt*ht,Et=Lt;break;case"left":xt=wt=et.coordinate,vt=rt+ +!dt*it,yt=vt-jt*kt,Et=yt-jt*ht,At=Lt;break;case"right":xt=wt=et.coordinate,vt=rt+ +dt*it,yt=vt+jt*kt,Et=yt+jt*ht,At=Lt;break;default:yt=vt=et.coordinate,wt=nt+ +dt*st,xt=wt+jt*kt,At=xt+jt*ht,Et=Lt;break}return{line:{x1:yt,y1:xt,x2:vt,y2:wt},tick:{x:Et,y:At}}}},{key:"getTickTextAnchor",value:function(){var et=this.props,tt=et.orientation,rt=et.mirror,nt;switch(tt){case"left":nt=rt?"start":"end";break;case"right":nt=rt?"end":"start";break;default:nt="middle";break}return nt}},{key:"getTickVerticalAnchor",value:function(){var et=this.props,tt=et.orientation,rt=et.mirror,nt="end";switch(tt){case"left":case"right":nt="middle";break;case"top":nt=rt?"start":"end";break;default:nt=rt?"end":"start";break}return nt}},{key:"renderAxisLine",value:function(){var et=this.props,tt=et.x,rt=et.y,nt=et.width,it=et.height,st=et.orientation,at=et.mirror,ot=et.axisLine,dt=_objectSpread$4(_objectSpread$4(_objectSpread$4({},filterProps(this.props,!1)),filterProps(ot,!1)),{},{fill:"none"});if(st==="top"||st==="bottom"){var ht=+(st==="top"&&!at||st==="bottom"&&at);dt=_objectSpread$4(_objectSpread$4({},dt),{},{x1:tt,y1:rt+ht*it,x2:tt+nt,y2:rt+ht*it})}else{var yt=+(st==="left"&&!at||st==="right"&&at);dt=_objectSpread$4(_objectSpread$4({},dt),{},{x1:tt+yt*nt,y1:rt,x2:tt+yt*nt,y2:rt+it})}return React.createElement("line",_extends$5({},dt,{className:clsx("recharts-cartesian-axis-line",get$2(ot,"className"))}))}},{key:"renderTicks",value:function(et,tt,rt){var nt=this,it=this.props,st=it.tickLine,at=it.stroke,ot=it.tick,dt=it.tickFormatter,ht=it.unit,yt=getTicks(_objectSpread$4(_objectSpread$4({},this.props),{},{ticks:et}),tt,rt),vt=this.getTickTextAnchor(),xt=this.getTickVerticalAnchor(),wt=filterProps(this.props,!1),Et=filterProps(ot,!1),At=_objectSpread$4(_objectSpread$4({},wt),{},{fill:"none"},filterProps(st,!1)),jt=yt.map(function(kt,Lt){var Bt=nt.getTickLineCoord(kt),Gt=Bt.line,er=Bt.tick,tr=_objectSpread$4(_objectSpread$4(_objectSpread$4(_objectSpread$4({textAnchor:vt,verticalAnchor:xt},wt),{},{stroke:"none",fill:at},Et),er),{},{index:Lt,payload:kt,visibleTicksCount:yt.length,tickFormatter:dt});return React.createElement(Layer,_extends$5({className:"recharts-cartesian-axis-tick",key:"tick-".concat(kt.value,"-").concat(kt.coordinate,"-").concat(kt.tickCoord)},adaptEventsOfChild(nt.props,kt,Lt)),st&&React.createElement("line",_extends$5({},At,Gt,{className:clsx("recharts-cartesian-axis-tick-line",get$2(st,"className"))})),ot&&$.renderTickItem(ot,tr,"".concat(isFunction$3(dt)?dt(kt.value,Lt):kt.value).concat(ht||"")))});return React.createElement("g",{className:"recharts-cartesian-axis-ticks"},jt)}},{key:"render",value:function(){var et=this,tt=this.props,rt=tt.axisLine,nt=tt.width,it=tt.height,st=tt.ticksGenerator,at=tt.className,ot=tt.hide;if(ot)return null;var dt=this.props,ht=dt.ticks,yt=_objectWithoutProperties$3(dt,_excluded3),vt=ht;return isFunction$3(st)&&(vt=ht&&ht.length>0?st(this.props):st(yt)),nt<=0||it<=0||!vt||!vt.length?null:React.createElement(Layer,{className:clsx("recharts-cartesian-axis",at),ref:function(wt){et.layerReference=wt}},rt&&this.renderAxisLine(),this.renderTicks(vt,this.state.fontSize,this.state.letterSpacing),Label.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(et,tt,rt){var nt;return React.isValidElement(et)?nt=React.cloneElement(et,tt):isFunction$3(et)?nt=et(tt):nt=React.createElement(Text,_extends$5({},tt,{className:"recharts-cartesian-axis-tick-value"}),rt),nt}}])}(reactExports.Component);_defineProperty$7(CartesianAxis,"displayName","CartesianAxis");_defineProperty$7(CartesianAxis,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var _excluded$2=["x1","y1","x2","y2","key"],_excluded2$2=["offset"];function _typeof$6(_){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$6(_)}function ownKeys$3(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$3(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$3(Object(_e),!0).forEach(function(et){_defineProperty$6(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$3(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$6(_,$,_e){return $=_toPropertyKey$6($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$6(_){var $=_toPrimitive$6(_,"string");return _typeof$6($)=="symbol"?$:$+""}function _toPrimitive$6(_,$){if(_typeof$6(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$6(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$4.apply(this,arguments)}function _objectWithoutProperties$2(_,$){if(_==null)return{};var _e=_objectWithoutPropertiesLoose$2(_,$),et,tt;if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_);for(tt=0;tt<rt.length;tt++)et=rt[tt],!($.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call(_,et)&&(_e[et]=_[et])}return _e}function _objectWithoutPropertiesLoose$2(_,$){if(_==null)return{};var _e={};for(var et in _)if(Object.prototype.hasOwnProperty.call(_,et)){if($.indexOf(et)>=0)continue;_e[et]=_[et]}return _e}var Background=function _($){var _e=$.fill;if(!_e||_e==="none")return null;var et=$.fillOpacity,tt=$.x,rt=$.y,nt=$.width,it=$.height,st=$.ry;return React.createElement("rect",{x:tt,y:rt,ry:st,width:nt,height:it,stroke:"none",fill:_e,fillOpacity:et,className:"recharts-cartesian-grid-bg"})};function renderLineItem(_,$){var _e;if(React.isValidElement(_))_e=React.cloneElement(_,$);else if(isFunction$3(_))_e=_($);else{var et=$.x1,tt=$.y1,rt=$.x2,nt=$.y2,it=$.key,st=_objectWithoutProperties$2($,_excluded$2),at=filterProps(st,!1);at.offset;var ot=_objectWithoutProperties$2(at,_excluded2$2);_e=React.createElement("line",_extends$4({},ot,{x1:et,y1:tt,x2:rt,y2:nt,fill:"none",key:it}))}return _e}function HorizontalGridLines(_){var $=_.x,_e=_.width,et=_.horizontal,tt=et===void 0?!0:et,rt=_.horizontalPoints;if(!tt||!rt||!rt.length)return null;var nt=rt.map(function(it,st){var at=_objectSpread$3(_objectSpread$3({},_),{},{x1:$,y1:it,x2:$+_e,y2:it,key:"line-".concat(st),index:st});return renderLineItem(tt,at)});return React.createElement("g",{className:"recharts-cartesian-grid-horizontal"},nt)}function VerticalGridLines(_){var $=_.y,_e=_.height,et=_.vertical,tt=et===void 0?!0:et,rt=_.verticalPoints;if(!tt||!rt||!rt.length)return null;var nt=rt.map(function(it,st){var at=_objectSpread$3(_objectSpread$3({},_),{},{x1:it,y1:$,x2:it,y2:$+_e,key:"line-".concat(st),index:st});return renderLineItem(tt,at)});return React.createElement("g",{className:"recharts-cartesian-grid-vertical"},nt)}function HorizontalStripes(_){var $=_.horizontalFill,_e=_.fillOpacity,et=_.x,tt=_.y,rt=_.width,nt=_.height,it=_.horizontalPoints,st=_.horizontal,at=st===void 0?!0:st;if(!at||!$||!$.length)return null;var ot=it.map(function(ht){return Math.round(ht+tt-tt)}).sort(function(ht,yt){return ht-yt});tt!==ot[0]&&ot.unshift(0);var dt=ot.map(function(ht,yt){var vt=!ot[yt+1],xt=vt?tt+nt-ht:ot[yt+1]-ht;if(xt<=0)return null;var wt=yt%$.length;return React.createElement("rect",{key:"react-".concat(yt),y:ht,x:et,height:xt,width:rt,stroke:"none",fill:$[wt],fillOpacity:_e,className:"recharts-cartesian-grid-bg"})});return React.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},dt)}function VerticalStripes(_){var $=_.vertical,_e=$===void 0?!0:$,et=_.verticalFill,tt=_.fillOpacity,rt=_.x,nt=_.y,it=_.width,st=_.height,at=_.verticalPoints;if(!_e||!et||!et.length)return null;var ot=at.map(function(ht){return Math.round(ht+rt-rt)}).sort(function(ht,yt){return ht-yt});rt!==ot[0]&&ot.unshift(0);var dt=ot.map(function(ht,yt){var vt=!ot[yt+1],xt=vt?rt+it-ht:ot[yt+1]-ht;if(xt<=0)return null;var wt=yt%et.length;return React.createElement("rect",{key:"react-".concat(yt),x:ht,y:nt,width:xt,height:st,stroke:"none",fill:et[wt],fillOpacity:tt,className:"recharts-cartesian-grid-bg"})});return React.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},dt)}var defaultVerticalCoordinatesGenerator=function _($,_e){var et=$.xAxis,tt=$.width,rt=$.height,nt=$.offset;return getCoordinatesOfGrid(getTicks(_objectSpread$3(_objectSpread$3(_objectSpread$3({},CartesianAxis.defaultProps),et),{},{ticks:getTicksOfAxis(et,!0),viewBox:{x:0,y:0,width:tt,height:rt}})),nt.left,nt.left+nt.width,_e)},defaultHorizontalCoordinatesGenerator=function _($,_e){var et=$.yAxis,tt=$.width,rt=$.height,nt=$.offset;return getCoordinatesOfGrid(getTicks(_objectSpread$3(_objectSpread$3(_objectSpread$3({},CartesianAxis.defaultProps),et),{},{ticks:getTicksOfAxis(et,!0),viewBox:{x:0,y:0,width:tt,height:rt}})),nt.top,nt.top+nt.height,_e)},defaultProps={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function CartesianGrid(_){var $,_e,et,tt,rt,nt,it=useChartWidth(),st=useChartHeight(),at=useOffset(),ot=_objectSpread$3(_objectSpread$3({},_),{},{stroke:($=_.stroke)!==null&&$!==void 0?$:defaultProps.stroke,fill:(_e=_.fill)!==null&&_e!==void 0?_e:defaultProps.fill,horizontal:(et=_.horizontal)!==null&&et!==void 0?et:defaultProps.horizontal,horizontalFill:(tt=_.horizontalFill)!==null&&tt!==void 0?tt:defaultProps.horizontalFill,vertical:(rt=_.vertical)!==null&&rt!==void 0?rt:defaultProps.vertical,verticalFill:(nt=_.verticalFill)!==null&&nt!==void 0?nt:defaultProps.verticalFill,x:isNumber(_.x)?_.x:at.left,y:isNumber(_.y)?_.y:at.top,width:isNumber(_.width)?_.width:at.width,height:isNumber(_.height)?_.height:at.height}),dt=ot.x,ht=ot.y,yt=ot.width,vt=ot.height,xt=ot.syncWithTicks,wt=ot.horizontalValues,Et=ot.verticalValues,At=useArbitraryXAxis(),jt=useYAxisWithFiniteDomainOrRandom();if(!isNumber(yt)||yt<=0||!isNumber(vt)||vt<=0||!isNumber(dt)||dt!==+dt||!isNumber(ht)||ht!==+ht)return null;var kt=ot.verticalCoordinatesGenerator||defaultVerticalCoordinatesGenerator,Lt=ot.horizontalCoordinatesGenerator||defaultHorizontalCoordinatesGenerator,Bt=ot.horizontalPoints,Gt=ot.verticalPoints;if((!Bt||!Bt.length)&&isFunction$3(Lt)){var er=wt&&wt.length,tr=Lt({yAxis:jt?_objectSpread$3(_objectSpread$3({},jt),{},{ticks:er?wt:jt.ticks}):void 0,width:it,height:st,offset:at},er?!0:xt);warn(Array.isArray(tr),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(_typeof$6(tr),"]")),Array.isArray(tr)&&(Bt=tr)}if((!Gt||!Gt.length)&&isFunction$3(kt)){var ar=Et&&Et.length,Mt=kt({xAxis:At?_objectSpread$3(_objectSpread$3({},At),{},{ticks:ar?Et:At.ticks}):void 0,width:it,height:st,offset:at},ar?!0:xt);warn(Array.isArray(Mt),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(_typeof$6(Mt),"]")),Array.isArray(Mt)&&(Gt=Mt)}return React.createElement("g",{className:"recharts-cartesian-grid"},React.createElement(Background,{fill:ot.fill,fillOpacity:ot.fillOpacity,x:ot.x,y:ot.y,width:ot.width,height:ot.height,ry:ot.ry}),React.createElement(HorizontalGridLines,_extends$4({},ot,{offset:at,horizontalPoints:Bt,xAxis:At,yAxis:jt})),React.createElement(VerticalGridLines,_extends$4({},ot,{offset:at,verticalPoints:Gt,xAxis:At,yAxis:jt})),React.createElement(HorizontalStripes,_extends$4({},ot,{horizontalPoints:Bt})),React.createElement(VerticalStripes,_extends$4({},ot,{verticalPoints:Gt})))}CartesianGrid.displayName="CartesianGrid";var _excluded$1=["layout","type","stroke","connectNulls","isRange","ref"],_excluded2$1=["key"],_Area;function _typeof$5(_){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$5(_)}function _objectWithoutProperties$1(_,$){if(_==null)return{};var _e=_objectWithoutPropertiesLoose$1(_,$),et,tt;if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_);for(tt=0;tt<rt.length;tt++)et=rt[tt],!($.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call(_,et)&&(_e[et]=_[et])}return _e}function _objectWithoutPropertiesLoose$1(_,$){if(_==null)return{};var _e={};for(var et in _)if(Object.prototype.hasOwnProperty.call(_,et)){if($.indexOf(et)>=0)continue;_e[et]=_[et]}return _e}function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$3.apply(this,arguments)}function ownKeys$2(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$2(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$2(Object(_e),!0).forEach(function(et){_defineProperty$5(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$2(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _classCallCheck$4(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,_toPropertyKey$5(et.key),et)}}function _createClass$4(_,$,_e){return $&&_defineProperties$4(_.prototype,$),_e&&_defineProperties$4(_,_e),Object.defineProperty(_,"prototype",{writable:!1}),_}function _callSuper$3(_,$,_e){return $=_getPrototypeOf$3($),_possibleConstructorReturn$3(_,_isNativeReflectConstruct$3()?Reflect.construct($,_e||[],_getPrototypeOf$3(_).constructor):$.apply(_,_e))}function _possibleConstructorReturn$3(_,$){if($&&(_typeof$5($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$3(_)}function _assertThisInitialized$3(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _isNativeReflectConstruct$3(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$3=function(){return!!_})()}function _getPrototypeOf$3(_){return _getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},_getPrototypeOf$3(_)}function _inherits$3(_,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create($&&$.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),$&&_setPrototypeOf$3(_,$)}function _setPrototypeOf$3(_,$){return _setPrototypeOf$3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(et,tt){return et.__proto__=tt,et},_setPrototypeOf$3(_,$)}function _defineProperty$5(_,$,_e){return $=_toPropertyKey$5($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$5(_){var $=_toPrimitive$5(_,"string");return _typeof$5($)=="symbol"?$:$+""}function _toPrimitive$5(_,$){if(_typeof$5(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$5(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var Area=function(_){function $(){var _e;_classCallCheck$4(this,$);for(var et=arguments.length,tt=new Array(et),rt=0;rt<et;rt++)tt[rt]=arguments[rt];return _e=_callSuper$3(this,$,[].concat(tt)),_defineProperty$5(_e,"state",{isAnimationFinished:!0}),_defineProperty$5(_e,"id",uniqueId("recharts-area-")),_defineProperty$5(_e,"handleAnimationEnd",function(){var nt=_e.props.onAnimationEnd;_e.setState({isAnimationFinished:!0}),isFunction$3(nt)&&nt()}),_defineProperty$5(_e,"handleAnimationStart",function(){var nt=_e.props.onAnimationStart;_e.setState({isAnimationFinished:!1}),isFunction$3(nt)&&nt()}),_e}return _inherits$3($,_),_createClass$4($,[{key:"renderDots",value:function(et,tt,rt){var nt=this.props.isAnimationActive,it=this.state.isAnimationFinished;if(nt&&!it)return null;var st=this.props,at=st.dot,ot=st.points,dt=st.dataKey,ht=filterProps(this.props,!1),yt=filterProps(at,!0),vt=ot.map(function(wt,Et){var At=_objectSpread$2(_objectSpread$2(_objectSpread$2({key:"dot-".concat(Et),r:3},ht),yt),{},{index:Et,cx:wt.x,cy:wt.y,dataKey:dt,value:wt.value,payload:wt.payload,points:ot});return $.renderDotItem(at,At)}),xt={clipPath:et?"url(#clipPath-".concat(tt?"":"dots-").concat(rt,")"):null};return React.createElement(Layer,_extends$3({className:"recharts-area-dots"},xt),vt)}},{key:"renderHorizontalRect",value:function(et){var tt=this.props,rt=tt.baseLine,nt=tt.points,it=tt.strokeWidth,st=nt[0].x,at=nt[nt.length-1].x,ot=et*Math.abs(st-at),dt=max$1(nt.map(function(ht){return ht.y||0}));return isNumber(rt)&&typeof rt=="number"?dt=Math.max(rt,dt):rt&&Array.isArray(rt)&&rt.length&&(dt=Math.max(max$1(rt.map(function(ht){return ht.y||0})),dt)),isNumber(dt)?React.createElement("rect",{x:st<at?st:st-ot,y:0,width:ot,height:Math.floor(dt+(it?parseInt("".concat(it),10):1))}):null}},{key:"renderVerticalRect",value:function(et){var tt=this.props,rt=tt.baseLine,nt=tt.points,it=tt.strokeWidth,st=nt[0].y,at=nt[nt.length-1].y,ot=et*Math.abs(st-at),dt=max$1(nt.map(function(ht){return ht.x||0}));return isNumber(rt)&&typeof rt=="number"?dt=Math.max(rt,dt):rt&&Array.isArray(rt)&&rt.length&&(dt=Math.max(max$1(rt.map(function(ht){return ht.x||0})),dt)),isNumber(dt)?React.createElement("rect",{x:0,y:st<at?st:st-ot,width:dt+(it?parseInt("".concat(it),10):1),height:Math.floor(ot)}):null}},{key:"renderClipRect",value:function(et){var tt=this.props.layout;return tt==="vertical"?this.renderVerticalRect(et):this.renderHorizontalRect(et)}},{key:"renderAreaStatically",value:function(et,tt,rt,nt){var it=this.props,st=it.layout,at=it.type,ot=it.stroke,dt=it.connectNulls,ht=it.isRange;it.ref;var yt=_objectWithoutProperties$1(it,_excluded$1);return React.createElement(Layer,{clipPath:rt?"url(#clipPath-".concat(nt,")"):null},React.createElement(Curve,_extends$3({},filterProps(yt,!0),{points:et,connectNulls:dt,type:at,baseLine:tt,layout:st,stroke:"none",className:"recharts-area-area"})),ot!=="none"&&React.createElement(Curve,_extends$3({},filterProps(this.props,!1),{className:"recharts-area-curve",layout:st,type:at,connectNulls:dt,fill:"none",points:et})),ot!=="none"&&ht&&React.createElement(Curve,_extends$3({},filterProps(this.props,!1),{className:"recharts-area-curve",layout:st,type:at,connectNulls:dt,fill:"none",points:tt})))}},{key:"renderAreaWithAnimation",value:function(et,tt){var rt=this,nt=this.props,it=nt.points,st=nt.baseLine,at=nt.isAnimationActive,ot=nt.animationBegin,dt=nt.animationDuration,ht=nt.animationEasing,yt=nt.animationId,vt=this.state,xt=vt.prevPoints,wt=vt.prevBaseLine;return React.createElement(Animate,{begin:ot,duration:dt,isActive:at,easing:ht,from:{t:0},to:{t:1},key:"area-".concat(yt),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(Et){var At=Et.t;if(xt){var jt=xt.length/it.length,kt=it.map(function(er,tr){var ar=Math.floor(tr*jt);if(xt[ar]){var Mt=xt[ar],lt=interpolateNumber$2(Mt.x,er.x),mt=interpolateNumber$2(Mt.y,er.y);return _objectSpread$2(_objectSpread$2({},er),{},{x:lt(At),y:mt(At)})}return er}),Lt;if(isNumber(st)&&typeof st=="number"){var Bt=interpolateNumber$2(wt,st);Lt=Bt(At)}else if(isNil$1(st)||isNan(st)){var Gt=interpolateNumber$2(wt,0);Lt=Gt(At)}else Lt=st.map(function(er,tr){var ar=Math.floor(tr*jt);if(wt[ar]){var Mt=wt[ar],lt=interpolateNumber$2(Mt.x,er.x),mt=interpolateNumber$2(Mt.y,er.y);return _objectSpread$2(_objectSpread$2({},er),{},{x:lt(At),y:mt(At)})}return er});return rt.renderAreaStatically(kt,Lt,et,tt)}return React.createElement(Layer,null,React.createElement("defs",null,React.createElement("clipPath",{id:"animationClipPath-".concat(tt)},rt.renderClipRect(At))),React.createElement(Layer,{clipPath:"url(#animationClipPath-".concat(tt,")")},rt.renderAreaStatically(it,st,et,tt)))})}},{key:"renderArea",value:function(et,tt){var rt=this.props,nt=rt.points,it=rt.baseLine,st=rt.isAnimationActive,at=this.state,ot=at.prevPoints,dt=at.prevBaseLine,ht=at.totalLength;return st&&nt&&nt.length&&(!ot&&ht>0||!isEqual$1(ot,nt)||!isEqual$1(dt,it))?this.renderAreaWithAnimation(et,tt):this.renderAreaStatically(nt,it,et,tt)}},{key:"render",value:function(){var et,tt=this.props,rt=tt.hide,nt=tt.dot,it=tt.points,st=tt.className,at=tt.top,ot=tt.left,dt=tt.xAxis,ht=tt.yAxis,yt=tt.width,vt=tt.height,xt=tt.isAnimationActive,wt=tt.id;if(rt||!it||!it.length)return null;var Et=this.state.isAnimationFinished,At=it.length===1,jt=clsx("recharts-area",st),kt=dt&&dt.allowDataOverflow,Lt=ht&&ht.allowDataOverflow,Bt=kt||Lt,Gt=isNil$1(wt)?this.id:wt,er=(et=filterProps(nt,!1))!==null&&et!==void 0?et:{r:3,strokeWidth:2},tr=er.r,ar=tr===void 0?3:tr,Mt=er.strokeWidth,lt=Mt===void 0?2:Mt,mt=hasClipDot(nt)?nt:{},gt=mt.clipDot,bt=gt===void 0?!0:gt,St=ar*2+lt;return React.createElement(Layer,{className:jt},kt||Lt?React.createElement("defs",null,React.createElement("clipPath",{id:"clipPath-".concat(Gt)},React.createElement("rect",{x:kt?ot:ot-yt/2,y:Lt?at:at-vt/2,width:kt?yt:yt*2,height:Lt?vt:vt*2})),!bt&&React.createElement("clipPath",{id:"clipPath-dots-".concat(Gt)},React.createElement("rect",{x:ot-St/2,y:at-St/2,width:yt+St,height:vt+St}))):null,At?null:this.renderArea(Bt,Gt),(nt||At)&&this.renderDots(Bt,bt,Gt),(!xt||Et)&&LabelList.renderCallByParent(this.props,it))}}],[{key:"getDerivedStateFromProps",value:function(et,tt){return et.animationId!==tt.prevAnimationId?{prevAnimationId:et.animationId,curPoints:et.points,curBaseLine:et.baseLine,prevPoints:tt.curPoints,prevBaseLine:tt.curBaseLine}:et.points!==tt.curPoints||et.baseLine!==tt.curBaseLine?{curPoints:et.points,curBaseLine:et.baseLine}:null}}])}(reactExports.PureComponent);_Area=Area;_defineProperty$5(Area,"displayName","Area");_defineProperty$5(Area,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Global.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});_defineProperty$5(Area,"getBaseValue",function(_,$,_e,et){var tt=_.layout,rt=_.baseValue,nt=$.props.baseValue,it=nt??rt;if(isNumber(it)&&typeof it=="number")return it;var st=tt==="horizontal"?et:_e,at=st.scale.domain();if(st.type==="number"){var ot=Math.max(at[0],at[1]),dt=Math.min(at[0],at[1]);return it==="dataMin"?dt:it==="dataMax"||ot<0?ot:Math.max(Math.min(at[0],at[1]),0)}return it==="dataMin"?at[0]:it==="dataMax"?at[1]:at[0]});_defineProperty$5(Area,"getComposedData",function(_){var $=_.props,_e=_.item,et=_.xAxis,tt=_.yAxis,rt=_.xAxisTicks,nt=_.yAxisTicks,it=_.bandSize,st=_.dataKey,at=_.stackedData,ot=_.dataStartIndex,dt=_.displayedData,ht=_.offset,yt=$.layout,vt=at&&at.length,xt=_Area.getBaseValue($,_e,et,tt),wt=yt==="horizontal",Et=!1,At=dt.map(function(kt,Lt){var Bt;vt?Bt=at[ot+Lt]:(Bt=getValueByDataKey(kt,st),Array.isArray(Bt)?Et=!0:Bt=[xt,Bt]);var Gt=Bt[1]==null||vt&&getValueByDataKey(kt,st)==null;return wt?{x:getCateCoordinateOfLine({axis:et,ticks:rt,bandSize:it,entry:kt,index:Lt}),y:Gt?null:tt.scale(Bt[1]),value:Bt,payload:kt}:{x:Gt?null:et.scale(Bt[1]),y:getCateCoordinateOfLine({axis:tt,ticks:nt,bandSize:it,entry:kt,index:Lt}),value:Bt,payload:kt}}),jt;return vt||Et?jt=At.map(function(kt){var Lt=Array.isArray(kt.value)?kt.value[0]:null;return wt?{x:kt.x,y:Lt!=null&&kt.y!=null?tt.scale(Lt):null}:{x:Lt!=null?et.scale(Lt):null,y:kt.y}}):jt=wt?tt.scale(xt):et.scale(xt),_objectSpread$2({points:At,baseLine:jt,layout:yt,isRange:Et},ht)});_defineProperty$5(Area,"renderDotItem",function(_,$){var _e;if(React.isValidElement(_))_e=React.cloneElement(_,$);else if(isFunction$3(_))_e=_($);else{var et=clsx("recharts-area-dot",typeof _!="boolean"?_.className:""),tt=$.key,rt=_objectWithoutProperties$1($,_excluded2$1);_e=React.createElement(Dot,_extends$3({},rt,{key:tt,className:et}))}return _e});function _typeof$4(_){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$4(_)}function _classCallCheck$3(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,_toPropertyKey$4(et.key),et)}}function _createClass$3(_,$,_e){return $&&_defineProperties$3(_.prototype,$),Object.defineProperty(_,"prototype",{writable:!1}),_}function _callSuper$2(_,$,_e){return $=_getPrototypeOf$2($),_possibleConstructorReturn$2(_,_isNativeReflectConstruct$2()?Reflect.construct($,_e||[],_getPrototypeOf$2(_).constructor):$.apply(_,_e))}function _possibleConstructorReturn$2(_,$){if($&&(_typeof$4($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$2(_)}function _assertThisInitialized$2(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _isNativeReflectConstruct$2(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$2=function(){return!!_})()}function _getPrototypeOf$2(_){return _getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},_getPrototypeOf$2(_)}function _inherits$2(_,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create($&&$.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),$&&_setPrototypeOf$2(_,$)}function _setPrototypeOf$2(_,$){return _setPrototypeOf$2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(et,tt){return et.__proto__=tt,et},_setPrototypeOf$2(_,$)}function _defineProperty$4(_,$,_e){return $=_toPropertyKey$4($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$4(_){var $=_toPrimitive$4(_,"string");return _typeof$4($)=="symbol"?$:$+""}function _toPrimitive$4(_,$){if(_typeof$4(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$4(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$2.apply(this,arguments)}function XAxisImpl(_){var $=_.xAxisId,_e=useChartWidth(),et=useChartHeight(),tt=useXAxisOrThrow($);return tt==null?null:React.createElement(CartesianAxis,_extends$2({},tt,{className:clsx("recharts-".concat(tt.axisType," ").concat(tt.axisType),tt.className),viewBox:{x:0,y:0,width:_e,height:et},ticksGenerator:function(nt){return getTicksOfAxis(nt,!0)}}))}var XAxis=function(_){function $(){return _classCallCheck$3(this,$),_callSuper$2(this,$,arguments)}return _inherits$2($,_),_createClass$3($,[{key:"render",value:function(){return React.createElement(XAxisImpl,this.props)}}])}(React.Component);_defineProperty$4(XAxis,"displayName","XAxis");_defineProperty$4(XAxis,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function _typeof$3(_){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$3(_)}function _classCallCheck$2(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,_toPropertyKey$3(et.key),et)}}function _createClass$2(_,$,_e){return $&&_defineProperties$2(_.prototype,$),Object.defineProperty(_,"prototype",{writable:!1}),_}function _callSuper$1(_,$,_e){return $=_getPrototypeOf$1($),_possibleConstructorReturn$1(_,_isNativeReflectConstruct$1()?Reflect.construct($,_e||[],_getPrototypeOf$1(_).constructor):$.apply(_,_e))}function _possibleConstructorReturn$1(_,$){if($&&(_typeof$3($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(_)}function _assertThisInitialized$1(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _isNativeReflectConstruct$1(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$1=function(){return!!_})()}function _getPrototypeOf$1(_){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},_getPrototypeOf$1(_)}function _inherits$1(_,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create($&&$.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),$&&_setPrototypeOf$1(_,$)}function _setPrototypeOf$1(_,$){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(et,tt){return et.__proto__=tt,et},_setPrototypeOf$1(_,$)}function _defineProperty$3(_,$,_e){return $=_toPropertyKey$3($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$3(_){var $=_toPrimitive$3(_,"string");return _typeof$3($)=="symbol"?$:$+""}function _toPrimitive$3(_,$){if(_typeof$3(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$3(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends$1.apply(this,arguments)}var YAxisImpl=function _($){var _e=$.yAxisId,et=useChartWidth(),tt=useChartHeight(),rt=useYAxisOrThrow(_e);return rt==null?null:React.createElement(CartesianAxis,_extends$1({},rt,{className:clsx("recharts-".concat(rt.axisType," ").concat(rt.axisType),rt.className),viewBox:{x:0,y:0,width:et,height:tt},ticksGenerator:function(it){return getTicksOfAxis(it,!0)}}))},YAxis=function(_){function $(){return _classCallCheck$2(this,$),_callSuper$1(this,$,arguments)}return _inherits$1($,_),_createClass$2($,[{key:"render",value:function(){return React.createElement(YAxisImpl,this.props)}}])}(React.Component);_defineProperty$3(YAxis,"displayName","YAxis");_defineProperty$3(YAxis,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function _toConsumableArray$1(_){return _arrayWithoutHoles$1(_)||_iterableToArray$1(_)||_unsupportedIterableToArray$1(_)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(_,$){if(_){if(typeof _=="string")return _arrayLikeToArray$1(_,$);var _e=Object.prototype.toString.call(_).slice(8,-1);if(_e==="Object"&&_.constructor&&(_e=_.constructor.name),_e==="Map"||_e==="Set")return Array.from(_);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray$1(_,$)}}function _iterableToArray$1(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function _arrayWithoutHoles$1(_){if(Array.isArray(_))return _arrayLikeToArray$1(_)}function _arrayLikeToArray$1(_,$){($==null||$>_.length)&&($=_.length);for(var _e=0,et=new Array($);_e<$;_e++)et[_e]=_[_e];return et}var detectReferenceElementsDomain=function _($,_e,et,tt,rt){var nt=findAllByType($,ReferenceLine),it=findAllByType($,ReferenceDot),st=[].concat(_toConsumableArray$1(nt),_toConsumableArray$1(it)),at=findAllByType($,ReferenceArea),ot="".concat(tt,"Id"),dt=tt[0],ht=_e;if(st.length&&(ht=st.reduce(function(xt,wt){if(wt.props[ot]===et&&ifOverflowMatches(wt.props,"extendDomain")&&isNumber(wt.props[dt])){var Et=wt.props[dt];return[Math.min(xt[0],Et),Math.max(xt[1],Et)]}return xt},ht)),at.length){var yt="".concat(dt,"1"),vt="".concat(dt,"2");ht=at.reduce(function(xt,wt){if(wt.props[ot]===et&&ifOverflowMatches(wt.props,"extendDomain")&&isNumber(wt.props[yt])&&isNumber(wt.props[vt])){var Et=wt.props[yt],At=wt.props[vt];return[Math.min(xt[0],Et,At),Math.max(xt[1],Et,At)]}return xt},ht)}return rt&&rt.length&&(ht=rt.reduce(function(xt,wt){return isNumber(wt)?[Math.min(xt[0],wt),Math.max(xt[1],wt)]:xt},ht)),ht},eventemitter3={exports:{}};(function(_){var $=Object.prototype.hasOwnProperty,_e="~";function et(){}Object.create&&(et.prototype=Object.create(null),new et().__proto__||(_e=!1));function tt(st,at,ot){this.fn=st,this.context=at,this.once=ot||!1}function rt(st,at,ot,dt,ht){if(typeof ot!="function")throw new TypeError("The listener must be a function");var yt=new tt(ot,dt||st,ht),vt=_e?_e+at:at;return st._events[vt]?st._events[vt].fn?st._events[vt]=[st._events[vt],yt]:st._events[vt].push(yt):(st._events[vt]=yt,st._eventsCount++),st}function nt(st,at){--st._eventsCount===0?st._events=new et:delete st._events[at]}function it(){this._events=new et,this._eventsCount=0}it.prototype.eventNames=function(){var at=[],ot,dt;if(this._eventsCount===0)return at;for(dt in ot=this._events)$.call(ot,dt)&&at.push(_e?dt.slice(1):dt);return Object.getOwnPropertySymbols?at.concat(Object.getOwnPropertySymbols(ot)):at},it.prototype.listeners=function(at){var ot=_e?_e+at:at,dt=this._events[ot];if(!dt)return[];if(dt.fn)return[dt.fn];for(var ht=0,yt=dt.length,vt=new Array(yt);ht<yt;ht++)vt[ht]=dt[ht].fn;return vt},it.prototype.listenerCount=function(at){var ot=_e?_e+at:at,dt=this._events[ot];return dt?dt.fn?1:dt.length:0},it.prototype.emit=function(at,ot,dt,ht,yt,vt){var xt=_e?_e+at:at;if(!this._events[xt])return!1;var wt=this._events[xt],Et=arguments.length,At,jt;if(wt.fn){switch(wt.once&&this.removeListener(at,wt.fn,void 0,!0),Et){case 1:return wt.fn.call(wt.context),!0;case 2:return wt.fn.call(wt.context,ot),!0;case 3:return wt.fn.call(wt.context,ot,dt),!0;case 4:return wt.fn.call(wt.context,ot,dt,ht),!0;case 5:return wt.fn.call(wt.context,ot,dt,ht,yt),!0;case 6:return wt.fn.call(wt.context,ot,dt,ht,yt,vt),!0}for(jt=1,At=new Array(Et-1);jt<Et;jt++)At[jt-1]=arguments[jt];wt.fn.apply(wt.context,At)}else{var kt=wt.length,Lt;for(jt=0;jt<kt;jt++)switch(wt[jt].once&&this.removeListener(at,wt[jt].fn,void 0,!0),Et){case 1:wt[jt].fn.call(wt[jt].context);break;case 2:wt[jt].fn.call(wt[jt].context,ot);break;case 3:wt[jt].fn.call(wt[jt].context,ot,dt);break;case 4:wt[jt].fn.call(wt[jt].context,ot,dt,ht);break;default:if(!At)for(Lt=1,At=new Array(Et-1);Lt<Et;Lt++)At[Lt-1]=arguments[Lt];wt[jt].fn.apply(wt[jt].context,At)}}return!0},it.prototype.on=function(at,ot,dt){return rt(this,at,ot,dt,!1)},it.prototype.once=function(at,ot,dt){return rt(this,at,ot,dt,!0)},it.prototype.removeListener=function(at,ot,dt,ht){var yt=_e?_e+at:at;if(!this._events[yt])return this;if(!ot)return nt(this,yt),this;var vt=this._events[yt];if(vt.fn)vt.fn===ot&&(!ht||vt.once)&&(!dt||vt.context===dt)&&nt(this,yt);else{for(var xt=0,wt=[],Et=vt.length;xt<Et;xt++)(vt[xt].fn!==ot||ht&&!vt[xt].once||dt&&vt[xt].context!==dt)&&wt.push(vt[xt]);wt.length?this._events[yt]=wt.length===1?wt[0]:wt:nt(this,yt)}return this},it.prototype.removeAllListeners=function(at){var ot;return at?(ot=_e?_e+at:at,this._events[ot]&&nt(this,ot)):(this._events=new et,this._eventsCount=0),this},it.prototype.off=it.prototype.removeListener,it.prototype.addListener=it.prototype.on,it.prefixed=_e,it.EventEmitter=it,_.exports=it})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter=getDefaultExportFromCjs$1(eventemitter3Exports);var eventCenter=new EventEmitter,SYNC_EVENT="recharts.syncMouseEvents";function _typeof$2(_){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$2(_)}function _classCallCheck$1(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,_toPropertyKey$2(et.key),et)}}function _createClass$1(_,$,_e){return $&&_defineProperties$1(_.prototype,$),Object.defineProperty(_,"prototype",{writable:!1}),_}function _defineProperty$2(_,$,_e){return $=_toPropertyKey$2($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$2(_){var $=_toPrimitive$2(_,"string");return _typeof$2($)=="symbol"?$:$+""}function _toPrimitive$2(_,$){if(_typeof$2(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$);if(_typeof$2(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_)}var AccessibilityManager=function(){function _(){_classCallCheck$1(this,_),_defineProperty$2(this,"activeIndex",0),_defineProperty$2(this,"coordinateList",[]),_defineProperty$2(this,"layout","horizontal")}return _createClass$1(_,[{key:"setDetails",value:function(_e){var et,tt=_e.coordinateList,rt=tt===void 0?null:tt,nt=_e.container,it=nt===void 0?null:nt,st=_e.layout,at=st===void 0?null:st,ot=_e.offset,dt=ot===void 0?null:ot,ht=_e.mouseHandlerCallback,yt=ht===void 0?null:ht;this.coordinateList=(et=rt??this.coordinateList)!==null&&et!==void 0?et:[],this.container=it??this.container,this.layout=at??this.layout,this.offset=dt??this.offset,this.mouseHandlerCallback=yt??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(_e){if(this.coordinateList.length!==0)switch(_e.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(_e){this.activeIndex=_e}},{key:"spoofMouse",value:function(){var _e,et;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var tt=this.container.getBoundingClientRect(),rt=tt.x,nt=tt.y,it=tt.height,st=this.coordinateList[this.activeIndex].coordinate,at=((_e=window)===null||_e===void 0?void 0:_e.scrollX)||0,ot=((et=window)===null||et===void 0?void 0:et.scrollY)||0,dt=rt+st+at,ht=nt+this.offset.top+it/2+ot;this.mouseHandlerCallback({pageX:dt,pageY:ht})}}}])}();function isDomainSpecifiedByUser(_,$,_e){if(_e==="number"&&$===!0&&Array.isArray(_)){var et=_==null?void 0:_[0],tt=_==null?void 0:_[1];if(et&&tt&&isNumber(et)&&isNumber(tt))return!0}return!1}function getCursorRectangle(_,$,_e,et){var tt=et/2;return{stroke:"none",fill:"#ccc",x:_==="horizontal"?$.x-tt:_e.left+.5,y:_==="horizontal"?_e.top+.5:$.y-tt,width:_==="horizontal"?et:_e.width-1,height:_==="horizontal"?_e.height-1:et}}function getRadialCursorPoints(_){var $=_.cx,_e=_.cy,et=_.radius,tt=_.startAngle,rt=_.endAngle,nt=polarToCartesian($,_e,et,tt),it=polarToCartesian($,_e,et,rt);return{points:[nt,it],cx:$,cy:_e,radius:et,startAngle:tt,endAngle:rt}}function getCursorPoints(_,$,_e){var et,tt,rt,nt;if(_==="horizontal")et=$.x,rt=et,tt=_e.top,nt=_e.top+_e.height;else if(_==="vertical")tt=$.y,nt=tt,et=_e.left,rt=_e.left+_e.width;else if($.cx!=null&&$.cy!=null)if(_==="centric"){var it=$.cx,st=$.cy,at=$.innerRadius,ot=$.outerRadius,dt=$.angle,ht=polarToCartesian(it,st,at,dt),yt=polarToCartesian(it,st,ot,dt);et=ht.x,tt=ht.y,rt=yt.x,nt=yt.y}else return getRadialCursorPoints($);return[{x:et,y:tt},{x:rt,y:nt}]}function _typeof$1(_){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof$1(_)}function ownKeys$1(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread$1(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys$1(Object(_e),!0).forEach(function(et){_defineProperty$1(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys$1(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty$1(_,$,_e){return $=_toPropertyKey$1($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey$1(_){var $=_toPrimitive$1(_,"string");return _typeof$1($)=="symbol"?$:$+""}function _toPrimitive$1(_,$){if(_typeof$1(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof$1(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}function Cursor(_){var $,_e,et=_.element,tt=_.tooltipEventType,rt=_.isActive,nt=_.activeCoordinate,it=_.activePayload,st=_.offset,at=_.activeTooltipIndex,ot=_.tooltipAxisBandSize,dt=_.layout,ht=_.chartName,yt=($=et.props.cursor)!==null&&$!==void 0?$:(_e=et.type.defaultProps)===null||_e===void 0?void 0:_e.cursor;if(!et||!yt||!rt||!nt||ht!=="ScatterChart"&&tt!=="axis")return null;var vt,xt=Curve;if(ht==="ScatterChart")vt=nt,xt=Cross;else if(ht==="BarChart")vt=getCursorRectangle(dt,nt,st,ot),xt=Rectangle;else if(dt==="radial"){var wt=getRadialCursorPoints(nt),Et=wt.cx,At=wt.cy,jt=wt.radius,kt=wt.startAngle,Lt=wt.endAngle;vt={cx:Et,cy:At,startAngle:kt,endAngle:Lt,innerRadius:jt,outerRadius:jt},xt=Sector}else vt={points:getCursorPoints(dt,nt,st)},xt=Curve;var Bt=_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1({stroke:"#ccc",pointerEvents:"none"},st),vt),filterProps(yt,!1)),{},{payload:it,payloadIndex:at,className:clsx("recharts-tooltip-cursor",yt.className)});return reactExports.isValidElement(yt)?reactExports.cloneElement(yt,Bt):reactExports.createElement(xt,Bt)}var _excluded=["item"],_excluded2=["children","className","width","height","style","compact","title","desc"];function _typeof(_){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},_typeof(_)}function _extends(){return _extends=Object.assign?Object.assign.bind():function(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&(_[et]=_e[et])}return _},_extends.apply(this,arguments)}function _slicedToArray(_,$){return _arrayWithHoles(_)||_iterableToArrayLimit(_,$)||_unsupportedIterableToArray(_,$)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArrayLimit(_,$){var _e=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(_e!=null){var et,tt,rt,nt,it=[],st=!0,at=!1;try{if(rt=(_e=_e.call(_)).next,$!==0)for(;!(st=(et=rt.call(_e)).done)&&(it.push(et.value),it.length!==$);st=!0);}catch(ot){at=!0,tt=ot}finally{try{if(!st&&_e.return!=null&&(nt=_e.return(),Object(nt)!==nt))return}finally{if(at)throw tt}}return it}}function _arrayWithHoles(_){if(Array.isArray(_))return _}function _objectWithoutProperties(_,$){if(_==null)return{};var _e=_objectWithoutPropertiesLoose(_,$),et,tt;if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_);for(tt=0;tt<rt.length;tt++)et=rt[tt],!($.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call(_,et)&&(_e[et]=_[et])}return _e}function _objectWithoutPropertiesLoose(_,$){if(_==null)return{};var _e={};for(var et in _)if(Object.prototype.hasOwnProperty.call(_,et)){if($.indexOf(et)>=0)continue;_e[et]=_[et]}return _e}function _classCallCheck(_,$){if(!(_ instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties(_,$){for(var _e=0;_e<$.length;_e++){var et=$[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(_,_toPropertyKey(et.key),et)}}function _createClass(_,$,_e){return $&&_defineProperties(_.prototype,$),Object.defineProperty(_,"prototype",{writable:!1}),_}function _callSuper(_,$,_e){return $=_getPrototypeOf($),_possibleConstructorReturn(_,_isNativeReflectConstruct()?Reflect.construct($,_e||[],_getPrototypeOf(_).constructor):$.apply(_,_e))}function _possibleConstructorReturn(_,$){if($&&(_typeof($)==="object"||typeof $=="function"))return $;if($!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(_)}function _assertThisInitialized(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function _isNativeReflectConstruct(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct=function(){return!!_})()}function _getPrototypeOf(_){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_e){return _e.__proto__||Object.getPrototypeOf(_e)},_getPrototypeOf(_)}function _inherits(_,$){if(typeof $!="function"&&$!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create($&&$.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),$&&_setPrototypeOf(_,$)}function _setPrototypeOf(_,$){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(et,tt){return et.__proto__=tt,et},_setPrototypeOf(_,$)}function _toConsumableArray(_){return _arrayWithoutHoles(_)||_iterableToArray(_)||_unsupportedIterableToArray(_)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(_,$){if(_){if(typeof _=="string")return _arrayLikeToArray(_,$);var _e=Object.prototype.toString.call(_).slice(8,-1);if(_e==="Object"&&_.constructor&&(_e=_.constructor.name),_e==="Map"||_e==="Set")return Array.from(_);if(_e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_e))return _arrayLikeToArray(_,$)}}function _iterableToArray(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function _arrayWithoutHoles(_){if(Array.isArray(_))return _arrayLikeToArray(_)}function _arrayLikeToArray(_,$){($==null||$>_.length)&&($=_.length);for(var _e=0,et=new Array($);_e<$;_e++)et[_e]=_[_e];return et}function ownKeys(_,$){var _e=Object.keys(_);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(_);$&&(et=et.filter(function(tt){return Object.getOwnPropertyDescriptor(_,tt).enumerable})),_e.push.apply(_e,et)}return _e}function _objectSpread(_){for(var $=1;$<arguments.length;$++){var _e=arguments[$]!=null?arguments[$]:{};$%2?ownKeys(Object(_e),!0).forEach(function(et){_defineProperty(_,et,_e[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(_e)):ownKeys(Object(_e)).forEach(function(et){Object.defineProperty(_,et,Object.getOwnPropertyDescriptor(_e,et))})}return _}function _defineProperty(_,$,_e){return $=_toPropertyKey($),$ in _?Object.defineProperty(_,$,{value:_e,enumerable:!0,configurable:!0,writable:!0}):_[$]=_e,_}function _toPropertyKey(_){var $=_toPrimitive(_,"string");return _typeof($)=="symbol"?$:$+""}function _toPrimitive(_,$){if(_typeof(_)!="object"||!_)return _;var _e=_[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call(_,$||"default");if(_typeof(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(_)}var ORIENT_MAP={xAxis:["bottom","top"],yAxis:["left","right"]},FULL_WIDTH_AND_HEIGHT={width:"100%",height:"100%"},originCoordinate={x:0,y:0};function renderAsIs(_){return _}var calculateTooltipPos=function _($,_e){return _e==="horizontal"?$.x:_e==="vertical"?$.y:_e==="centric"?$.angle:$.radius},getActiveCoordinate=function _($,_e,et,tt){var rt=_e.find(function(ot){return ot&&ot.index===et});if(rt){if($==="horizontal")return{x:rt.coordinate,y:tt.y};if($==="vertical")return{x:tt.x,y:rt.coordinate};if($==="centric"){var nt=rt.coordinate,it=tt.radius;return _objectSpread(_objectSpread(_objectSpread({},tt),polarToCartesian(tt.cx,tt.cy,it,nt)),{},{angle:nt,radius:it})}var st=rt.coordinate,at=tt.angle;return _objectSpread(_objectSpread(_objectSpread({},tt),polarToCartesian(tt.cx,tt.cy,st,at)),{},{angle:at,radius:st})}return originCoordinate},getDisplayedData=function _($,_e){var et=_e.graphicalItems,tt=_e.dataStartIndex,rt=_e.dataEndIndex,nt=(et??[]).reduce(function(it,st){var at=st.props.data;return at&&at.length?[].concat(_toConsumableArray(it),_toConsumableArray(at)):it},[]);return nt.length>0?nt:$&&$.length&&isNumber(tt)&&isNumber(rt)?$.slice(tt,rt+1):[]};function getDefaultDomainByAxisType(_){return _==="number"?[0,"auto"]:void 0}var getTooltipContent=function _($,_e,et,tt){var rt=$.graphicalItems,nt=$.tooltipAxis,it=getDisplayedData(_e,$);return et<0||!rt||!rt.length||et>=it.length?null:rt.reduce(function(st,at){var ot,dt=(ot=at.props.data)!==null&&ot!==void 0?ot:_e;dt&&$.dataStartIndex+$.dataEndIndex!==0&&$.dataEndIndex-$.dataStartIndex>=et&&(dt=dt.slice($.dataStartIndex,$.dataEndIndex+1));var ht;if(nt.dataKey&&!nt.allowDuplicatedCategory){var yt=dt===void 0?it:dt;ht=findEntryInArray(yt,nt.dataKey,tt)}else ht=dt&&dt[et]||it[et];return ht?[].concat(_toConsumableArray(st),[getTooltipItem(at,ht)]):st},[])},getTooltipData=function _($,_e,et,tt){var rt=tt||{x:$.chartX,y:$.chartY},nt=calculateTooltipPos(rt,et),it=$.orderedTooltipTicks,st=$.tooltipAxis,at=$.tooltipTicks,ot=calculateActiveTickIndex(nt,it,at,st);if(ot>=0&&at){var dt=at[ot]&&at[ot].value,ht=getTooltipContent($,_e,ot,dt),yt=getActiveCoordinate(et,it,ot,rt);return{activeTooltipIndex:ot,activeLabel:dt,activePayload:ht,activeCoordinate:yt}}return null},getAxisMapByAxes=function _($,_e){var et=_e.axes,tt=_e.graphicalItems,rt=_e.axisType,nt=_e.axisIdKey,it=_e.stackGroups,st=_e.dataStartIndex,at=_e.dataEndIndex,ot=$.layout,dt=$.children,ht=$.stackOffset,yt=isCategoricalAxis(ot,rt);return et.reduce(function(vt,xt){var wt,Et=xt.type.defaultProps!==void 0?_objectSpread(_objectSpread({},xt.type.defaultProps),xt.props):xt.props,At=Et.type,jt=Et.dataKey,kt=Et.allowDataOverflow,Lt=Et.allowDuplicatedCategory,Bt=Et.scale,Gt=Et.ticks,er=Et.includeHidden,tr=Et[nt];if(vt[tr])return vt;var ar=getDisplayedData($.data,{graphicalItems:tt.filter(function(zt){var Yt,ir=nt in zt.props?zt.props[nt]:(Yt=zt.type.defaultProps)===null||Yt===void 0?void 0:Yt[nt];return ir===tr}),dataStartIndex:st,dataEndIndex:at}),Mt=ar.length,lt,mt,gt;isDomainSpecifiedByUser(Et.domain,kt,At)&&(lt=parseSpecifiedDomain(Et.domain,null,kt),yt&&(At==="number"||Bt!=="auto")&&(gt=getDomainOfDataByKey(ar,jt,"category")));var bt=getDefaultDomainByAxisType(At);if(!lt||lt.length===0){var St,Nt=(St=Et.domain)!==null&&St!==void 0?St:bt;if(jt){if(lt=getDomainOfDataByKey(ar,jt,At),At==="category"&&yt){var Pt=hasDuplicate(lt);Lt&&Pt?(mt=lt,lt=range$1(0,Mt)):Lt||(lt=parseDomainOfCategoryAxis(Nt,lt,xt).reduce(function(zt,Yt){return zt.indexOf(Yt)>=0?zt:[].concat(_toConsumableArray(zt),[Yt])},[]))}else if(At==="category")Lt?lt=lt.filter(function(zt){return zt!==""&&!isNil$1(zt)}):lt=parseDomainOfCategoryAxis(Nt,lt,xt).reduce(function(zt,Yt){return zt.indexOf(Yt)>=0||Yt===""||isNil$1(Yt)?zt:[].concat(_toConsumableArray(zt),[Yt])},[]);else if(At==="number"){var Tt=parseErrorBarsOfAxis(ar,tt.filter(function(zt){var Yt,ir,ur=nt in zt.props?zt.props[nt]:(Yt=zt.type.defaultProps)===null||Yt===void 0?void 0:Yt[nt],cr="hide"in zt.props?zt.props.hide:(ir=zt.type.defaultProps)===null||ir===void 0?void 0:ir.hide;return ur===tr&&(er||!cr)}),jt,rt,ot);Tt&&(lt=Tt)}yt&&(At==="number"||Bt!=="auto")&&(gt=getDomainOfDataByKey(ar,jt,"category"))}else yt?lt=range$1(0,Mt):it&&it[tr]&&it[tr].hasStack&&At==="number"?lt=ht==="expand"?[0,1]:getDomainOfStackGroups(it[tr].stackGroups,st,at):lt=getDomainOfItemsWithSameAxis(ar,tt.filter(function(zt){var Yt=nt in zt.props?zt.props[nt]:zt.type.defaultProps[nt],ir="hide"in zt.props?zt.props.hide:zt.type.defaultProps.hide;return Yt===tr&&(er||!ir)}),At,ot,!0);if(At==="number")lt=detectReferenceElementsDomain(dt,lt,tr,rt,Gt),Nt&&(lt=parseSpecifiedDomain(Nt,lt,kt));else if(At==="category"&&Nt){var pt=Nt,Rt=lt.every(function(zt){return pt.indexOf(zt)>=0});Rt&&(lt=pt)}}return _objectSpread(_objectSpread({},vt),{},_defineProperty({},tr,_objectSpread(_objectSpread({},Et),{},{axisType:rt,domain:lt,categoricalDomain:gt,duplicateDomain:mt,originalDomain:(wt=Et.domain)!==null&&wt!==void 0?wt:bt,isCategorical:yt,layout:ot})))},{})},getAxisMapByItems=function _($,_e){var et=_e.graphicalItems,tt=_e.Axis,rt=_e.axisType,nt=_e.axisIdKey,it=_e.stackGroups,st=_e.dataStartIndex,at=_e.dataEndIndex,ot=$.layout,dt=$.children,ht=getDisplayedData($.data,{graphicalItems:et,dataStartIndex:st,dataEndIndex:at}),yt=ht.length,vt=isCategoricalAxis(ot,rt),xt=-1;return et.reduce(function(wt,Et){var At=Et.type.defaultProps!==void 0?_objectSpread(_objectSpread({},Et.type.defaultProps),Et.props):Et.props,jt=At[nt],kt=getDefaultDomainByAxisType("number");if(!wt[jt]){xt++;var Lt;return vt?Lt=range$1(0,yt):it&&it[jt]&&it[jt].hasStack?(Lt=getDomainOfStackGroups(it[jt].stackGroups,st,at),Lt=detectReferenceElementsDomain(dt,Lt,jt,rt)):(Lt=parseSpecifiedDomain(kt,getDomainOfItemsWithSameAxis(ht,et.filter(function(Bt){var Gt,er,tr=nt in Bt.props?Bt.props[nt]:(Gt=Bt.type.defaultProps)===null||Gt===void 0?void 0:Gt[nt],ar="hide"in Bt.props?Bt.props.hide:(er=Bt.type.defaultProps)===null||er===void 0?void 0:er.hide;return tr===jt&&!ar}),"number",ot),tt.defaultProps.allowDataOverflow),Lt=detectReferenceElementsDomain(dt,Lt,jt,rt)),_objectSpread(_objectSpread({},wt),{},_defineProperty({},jt,_objectSpread(_objectSpread({axisType:rt},tt.defaultProps),{},{hide:!0,orientation:get$2(ORIENT_MAP,"".concat(rt,".").concat(xt%2),null),domain:Lt,originalDomain:kt,isCategorical:vt,layout:ot})))}return wt},{})},getAxisMap=function _($,_e){var et=_e.axisType,tt=et===void 0?"xAxis":et,rt=_e.AxisComp,nt=_e.graphicalItems,it=_e.stackGroups,st=_e.dataStartIndex,at=_e.dataEndIndex,ot=$.children,dt="".concat(tt,"Id"),ht=findAllByType(ot,rt),yt={};return ht&&ht.length?yt=getAxisMapByAxes($,{axes:ht,graphicalItems:nt,axisType:tt,axisIdKey:dt,stackGroups:it,dataStartIndex:st,dataEndIndex:at}):nt&&nt.length&&(yt=getAxisMapByItems($,{Axis:rt,graphicalItems:nt,axisType:tt,axisIdKey:dt,stackGroups:it,dataStartIndex:st,dataEndIndex:at})),yt},tooltipTicksGenerator=function _($){var _e=getAnyElementOfObject($),et=getTicksOfAxis(_e,!1,!0);return{tooltipTicks:et,orderedTooltipTicks:sortBy$1(et,function(tt){return tt.coordinate}),tooltipAxis:_e,tooltipAxisBandSize:getBandSizeOfAxis(_e,et)}},createDefaultState=function _($){var _e=$.children,et=$.defaultShowTooltip,tt=findChildByType(_e,Brush),rt=0,nt=0;return $.data&&$.data.length!==0&&(nt=$.data.length-1),tt&&tt.props&&(tt.props.startIndex>=0&&(rt=tt.props.startIndex),tt.props.endIndex>=0&&(nt=tt.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:rt,dataEndIndex:nt,activeTooltipIndex:-1,isTooltipActive:!!et}},hasGraphicalBarItem=function _($){return!$||!$.length?!1:$.some(function(_e){var et=getDisplayName(_e&&_e.type);return et&&et.indexOf("Bar")>=0})},getAxisNameByLayout=function _($){return $==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:$==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:$==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},calculateOffset=function _($,_e){var et=$.props,tt=$.graphicalItems,rt=$.xAxisMap,nt=rt===void 0?{}:rt,it=$.yAxisMap,st=it===void 0?{}:it,at=et.width,ot=et.height,dt=et.children,ht=et.margin||{},yt=findChildByType(dt,Brush),vt=findChildByType(dt,Legend),xt=Object.keys(st).reduce(function(Lt,Bt){var Gt=st[Bt],er=Gt.orientation;return!Gt.mirror&&!Gt.hide?_objectSpread(_objectSpread({},Lt),{},_defineProperty({},er,Lt[er]+Gt.width)):Lt},{left:ht.left||0,right:ht.right||0}),wt=Object.keys(nt).reduce(function(Lt,Bt){var Gt=nt[Bt],er=Gt.orientation;return!Gt.mirror&&!Gt.hide?_objectSpread(_objectSpread({},Lt),{},_defineProperty({},er,get$2(Lt,"".concat(er))+Gt.height)):Lt},{top:ht.top||0,bottom:ht.bottom||0}),Et=_objectSpread(_objectSpread({},wt),xt),At=Et.bottom;yt&&(Et.bottom+=yt.props.height||Brush.defaultProps.height),vt&&_e&&(Et=appendOffsetOfLegend(Et,tt,et,_e));var jt=at-Et.left-Et.right,kt=ot-Et.top-Et.bottom;return _objectSpread(_objectSpread({brushBottom:At},Et),{},{width:Math.max(jt,0),height:Math.max(kt,0)})},getCartesianAxisSize=function _($,_e){if(_e==="xAxis")return $[_e].width;if(_e==="yAxis")return $[_e].height},generateCategoricalChart=function _($){var _e=$.chartName,et=$.GraphicalChild,tt=$.defaultTooltipEventType,rt=tt===void 0?"axis":tt,nt=$.validateTooltipEventTypes,it=nt===void 0?["axis"]:nt,st=$.axisComponents,at=$.legendContent,ot=$.formatAxisMap,dt=$.defaultProps,ht=function(wt,Et){var At=Et.graphicalItems,jt=Et.stackGroups,kt=Et.offset,Lt=Et.updateId,Bt=Et.dataStartIndex,Gt=Et.dataEndIndex,er=wt.barSize,tr=wt.layout,ar=wt.barGap,Mt=wt.barCategoryGap,lt=wt.maxBarSize,mt=getAxisNameByLayout(tr),gt=mt.numericAxisName,bt=mt.cateAxisName,St=hasGraphicalBarItem(At),Nt=[];return At.forEach(function(Pt,Tt){var pt=getDisplayedData(wt.data,{graphicalItems:[Pt],dataStartIndex:Bt,dataEndIndex:Gt}),Rt=Pt.type.defaultProps!==void 0?_objectSpread(_objectSpread({},Pt.type.defaultProps),Pt.props):Pt.props,zt=Rt.dataKey,Yt=Rt.maxBarSize,ir=Rt["".concat(gt,"Id")],ur=Rt["".concat(bt,"Id")],cr={},rr=st.reduce(function(Ar,$r){var Tr=Et["".concat($r.axisType,"Map")],jr=Rt["".concat($r.axisType,"Id")];Tr&&Tr[jr]||$r.axisType==="zAxis"||invariant();var Cr=Tr[jr];return _objectSpread(_objectSpread({},Ar),{},_defineProperty(_defineProperty({},$r.axisType,Cr),"".concat($r.axisType,"Ticks"),getTicksOfAxis(Cr)))},cr),fr=rr[bt],dr=rr["".concat(bt,"Ticks")],gr=jt&&jt[ir]&&jt[ir].hasStack&&getStackedDataOfItem(Pt,jt[ir].stackGroups),hr=getDisplayName(Pt.type).indexOf("Bar")>=0,or=getBandSizeOfAxis(fr,dr),br=[],Rr=St&&getBarSizeList({barSize:er,stackGroups:jt,totalSize:getCartesianAxisSize(rr,bt)});if(hr){var _r,Er,Hr=isNil$1(Yt)?lt:Yt,xr=(_r=(Er=getBandSizeOfAxis(fr,dr,!0))!==null&&Er!==void 0?Er:Hr)!==null&&_r!==void 0?_r:0;br=getBarPosition({barGap:ar,barCategoryGap:Mt,bandSize:xr!==or?xr:or,sizeList:Rr[ur],maxBarSize:Hr}),xr!==or&&(br=br.map(function(Ar){return _objectSpread(_objectSpread({},Ar),{},{position:_objectSpread(_objectSpread({},Ar.position),{},{offset:Ar.position.offset-xr/2})})}))}var yr=Pt&&Pt.type&&Pt.type.getComposedData;yr&&Nt.push({props:_objectSpread(_objectSpread({},yr(_objectSpread(_objectSpread({},rr),{},{displayedData:pt,props:wt,dataKey:zt,item:Pt,bandSize:or,barPosition:br,offset:kt,stackedData:gr,layout:tr,dataStartIndex:Bt,dataEndIndex:Gt}))),{},_defineProperty(_defineProperty(_defineProperty({key:Pt.key||"item-".concat(Tt)},gt,rr[gt]),bt,rr[bt]),"animationId",Lt)),childIndex:parseChildIndex(Pt,wt.children),item:Pt})}),Nt},yt=function(wt,Et){var At=wt.props,jt=wt.dataStartIndex,kt=wt.dataEndIndex,Lt=wt.updateId;if(!validateWidthHeight({props:At}))return null;var Bt=At.children,Gt=At.layout,er=At.stackOffset,tr=At.data,ar=At.reverseStackOrder,Mt=getAxisNameByLayout(Gt),lt=Mt.numericAxisName,mt=Mt.cateAxisName,gt=findAllByType(Bt,et),bt=getStackGroupsByAxisId(tr,gt,"".concat(lt,"Id"),"".concat(mt,"Id"),er,ar),St=st.reduce(function(Rt,zt){var Yt="".concat(zt.axisType,"Map");return _objectSpread(_objectSpread({},Rt),{},_defineProperty({},Yt,getAxisMap(At,_objectSpread(_objectSpread({},zt),{},{graphicalItems:gt,stackGroups:zt.axisType===lt&&bt,dataStartIndex:jt,dataEndIndex:kt}))))},{}),Nt=calculateOffset(_objectSpread(_objectSpread({},St),{},{props:At,graphicalItems:gt}),Et==null?void 0:Et.legendBBox);Object.keys(St).forEach(function(Rt){St[Rt]=ot(At,St[Rt],Nt,Rt.replace("Map",""),_e)});var Pt=St["".concat(mt,"Map")],Tt=tooltipTicksGenerator(Pt),pt=ht(At,_objectSpread(_objectSpread({},St),{},{dataStartIndex:jt,dataEndIndex:kt,updateId:Lt,graphicalItems:gt,stackGroups:bt,offset:Nt}));return _objectSpread(_objectSpread({formattedGraphicalItems:pt,graphicalItems:gt,offset:Nt,stackGroups:bt},Tt),St)},vt=function(xt){function wt(Et){var At,jt,kt;return _classCallCheck(this,wt),kt=_callSuper(this,wt,[Et]),_defineProperty(kt,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),_defineProperty(kt,"accessibilityManager",new AccessibilityManager),_defineProperty(kt,"handleLegendBBoxUpdate",function(Lt){if(Lt){var Bt=kt.state,Gt=Bt.dataStartIndex,er=Bt.dataEndIndex,tr=Bt.updateId;kt.setState(_objectSpread({legendBBox:Lt},yt({props:kt.props,dataStartIndex:Gt,dataEndIndex:er,updateId:tr},_objectSpread(_objectSpread({},kt.state),{},{legendBBox:Lt}))))}}),_defineProperty(kt,"handleReceiveSyncEvent",function(Lt,Bt,Gt){if(kt.props.syncId===Lt){if(Gt===kt.eventEmitterSymbol&&typeof kt.props.syncMethod!="function")return;kt.applySyncEvent(Bt)}}),_defineProperty(kt,"handleBrushChange",function(Lt){var Bt=Lt.startIndex,Gt=Lt.endIndex;if(Bt!==kt.state.dataStartIndex||Gt!==kt.state.dataEndIndex){var er=kt.state.updateId;kt.setState(function(){return _objectSpread({dataStartIndex:Bt,dataEndIndex:Gt},yt({props:kt.props,dataStartIndex:Bt,dataEndIndex:Gt,updateId:er},kt.state))}),kt.triggerSyncEvent({dataStartIndex:Bt,dataEndIndex:Gt})}}),_defineProperty(kt,"handleMouseEnter",function(Lt){var Bt=kt.getMouseInfo(Lt);if(Bt){var Gt=_objectSpread(_objectSpread({},Bt),{},{isTooltipActive:!0});kt.setState(Gt),kt.triggerSyncEvent(Gt);var er=kt.props.onMouseEnter;isFunction$3(er)&&er(Gt,Lt)}}),_defineProperty(kt,"triggeredAfterMouseMove",function(Lt){var Bt=kt.getMouseInfo(Lt),Gt=Bt?_objectSpread(_objectSpread({},Bt),{},{isTooltipActive:!0}):{isTooltipActive:!1};kt.setState(Gt),kt.triggerSyncEvent(Gt);var er=kt.props.onMouseMove;isFunction$3(er)&&er(Gt,Lt)}),_defineProperty(kt,"handleItemMouseEnter",function(Lt){kt.setState(function(){return{isTooltipActive:!0,activeItem:Lt,activePayload:Lt.tooltipPayload,activeCoordinate:Lt.tooltipPosition||{x:Lt.cx,y:Lt.cy}}})}),_defineProperty(kt,"handleItemMouseLeave",function(){kt.setState(function(){return{isTooltipActive:!1}})}),_defineProperty(kt,"handleMouseMove",function(Lt){Lt.persist(),kt.throttleTriggeredAfterMouseMove(Lt)}),_defineProperty(kt,"handleMouseLeave",function(Lt){kt.throttleTriggeredAfterMouseMove.cancel();var Bt={isTooltipActive:!1};kt.setState(Bt),kt.triggerSyncEvent(Bt);var Gt=kt.props.onMouseLeave;isFunction$3(Gt)&&Gt(Bt,Lt)}),_defineProperty(kt,"handleOuterEvent",function(Lt){var Bt=getReactEventByType(Lt),Gt=get$2(kt.props,"".concat(Bt));if(Bt&&isFunction$3(Gt)){var er,tr;/.*touch.*/i.test(Bt)?tr=kt.getMouseInfo(Lt.changedTouches[0]):tr=kt.getMouseInfo(Lt),Gt((er=tr)!==null&&er!==void 0?er:{},Lt)}}),_defineProperty(kt,"handleClick",function(Lt){var Bt=kt.getMouseInfo(Lt);if(Bt){var Gt=_objectSpread(_objectSpread({},Bt),{},{isTooltipActive:!0});kt.setState(Gt),kt.triggerSyncEvent(Gt);var er=kt.props.onClick;isFunction$3(er)&&er(Gt,Lt)}}),_defineProperty(kt,"handleMouseDown",function(Lt){var Bt=kt.props.onMouseDown;if(isFunction$3(Bt)){var Gt=kt.getMouseInfo(Lt);Bt(Gt,Lt)}}),_defineProperty(kt,"handleMouseUp",function(Lt){var Bt=kt.props.onMouseUp;if(isFunction$3(Bt)){var Gt=kt.getMouseInfo(Lt);Bt(Gt,Lt)}}),_defineProperty(kt,"handleTouchMove",function(Lt){Lt.changedTouches!=null&&Lt.changedTouches.length>0&&kt.throttleTriggeredAfterMouseMove(Lt.changedTouches[0])}),_defineProperty(kt,"handleTouchStart",function(Lt){Lt.changedTouches!=null&&Lt.changedTouches.length>0&&kt.handleMouseDown(Lt.changedTouches[0])}),_defineProperty(kt,"handleTouchEnd",function(Lt){Lt.changedTouches!=null&&Lt.changedTouches.length>0&&kt.handleMouseUp(Lt.changedTouches[0])}),_defineProperty(kt,"triggerSyncEvent",function(Lt){kt.props.syncId!==void 0&&eventCenter.emit(SYNC_EVENT,kt.props.syncId,Lt,kt.eventEmitterSymbol)}),_defineProperty(kt,"applySyncEvent",function(Lt){var Bt=kt.props,Gt=Bt.layout,er=Bt.syncMethod,tr=kt.state.updateId,ar=Lt.dataStartIndex,Mt=Lt.dataEndIndex;if(Lt.dataStartIndex!==void 0||Lt.dataEndIndex!==void 0)kt.setState(_objectSpread({dataStartIndex:ar,dataEndIndex:Mt},yt({props:kt.props,dataStartIndex:ar,dataEndIndex:Mt,updateId:tr},kt.state)));else if(Lt.activeTooltipIndex!==void 0){var lt=Lt.chartX,mt=Lt.chartY,gt=Lt.activeTooltipIndex,bt=kt.state,St=bt.offset,Nt=bt.tooltipTicks;if(!St)return;if(typeof er=="function")gt=er(Nt,Lt);else if(er==="value"){gt=-1;for(var Pt=0;Pt<Nt.length;Pt++)if(Nt[Pt].value===Lt.activeLabel){gt=Pt;break}}var Tt=_objectSpread(_objectSpread({},St),{},{x:St.left,y:St.top}),pt=Math.min(lt,Tt.x+Tt.width),Rt=Math.min(mt,Tt.y+Tt.height),zt=Nt[gt]&&Nt[gt].value,Yt=getTooltipContent(kt.state,kt.props.data,gt),ir=Nt[gt]?{x:Gt==="horizontal"?Nt[gt].coordinate:pt,y:Gt==="horizontal"?Rt:Nt[gt].coordinate}:originCoordinate;kt.setState(_objectSpread(_objectSpread({},Lt),{},{activeLabel:zt,activeCoordinate:ir,activePayload:Yt,activeTooltipIndex:gt}))}else kt.setState(Lt)}),_defineProperty(kt,"renderCursor",function(Lt){var Bt,Gt=kt.state,er=Gt.isTooltipActive,tr=Gt.activeCoordinate,ar=Gt.activePayload,Mt=Gt.offset,lt=Gt.activeTooltipIndex,mt=Gt.tooltipAxisBandSize,gt=kt.getTooltipEventType(),bt=(Bt=Lt.props.active)!==null&&Bt!==void 0?Bt:er,St=kt.props.layout,Nt=Lt.key||"_recharts-cursor";return React.createElement(Cursor,{key:Nt,activeCoordinate:tr,activePayload:ar,activeTooltipIndex:lt,chartName:_e,element:Lt,isActive:bt,layout:St,offset:Mt,tooltipAxisBandSize:mt,tooltipEventType:gt})}),_defineProperty(kt,"renderPolarAxis",function(Lt,Bt,Gt){var er=get$2(Lt,"type.axisType"),tr=get$2(kt.state,"".concat(er,"Map")),ar=Lt.type.defaultProps,Mt=ar!==void 0?_objectSpread(_objectSpread({},ar),Lt.props):Lt.props,lt=tr&&tr[Mt["".concat(er,"Id")]];return reactExports.cloneElement(Lt,_objectSpread(_objectSpread({},lt),{},{className:clsx(er,lt.className),key:Lt.key||"".concat(Bt,"-").concat(Gt),ticks:getTicksOfAxis(lt,!0)}))}),_defineProperty(kt,"renderPolarGrid",function(Lt){var Bt=Lt.props,Gt=Bt.radialLines,er=Bt.polarAngles,tr=Bt.polarRadius,ar=kt.state,Mt=ar.radiusAxisMap,lt=ar.angleAxisMap,mt=getAnyElementOfObject(Mt),gt=getAnyElementOfObject(lt),bt=gt.cx,St=gt.cy,Nt=gt.innerRadius,Pt=gt.outerRadius;return reactExports.cloneElement(Lt,{polarAngles:Array.isArray(er)?er:getTicksOfAxis(gt,!0).map(function(Tt){return Tt.coordinate}),polarRadius:Array.isArray(tr)?tr:getTicksOfAxis(mt,!0).map(function(Tt){return Tt.coordinate}),cx:bt,cy:St,innerRadius:Nt,outerRadius:Pt,key:Lt.key||"polar-grid",radialLines:Gt})}),_defineProperty(kt,"renderLegend",function(){var Lt=kt.state.formattedGraphicalItems,Bt=kt.props,Gt=Bt.children,er=Bt.width,tr=Bt.height,ar=kt.props.margin||{},Mt=er-(ar.left||0)-(ar.right||0),lt=getLegendProps({children:Gt,formattedGraphicalItems:Lt,legendWidth:Mt,legendContent:at});if(!lt)return null;var mt=lt.item,gt=_objectWithoutProperties(lt,_excluded);return reactExports.cloneElement(mt,_objectSpread(_objectSpread({},gt),{},{chartWidth:er,chartHeight:tr,margin:ar,onBBoxUpdate:kt.handleLegendBBoxUpdate}))}),_defineProperty(kt,"renderTooltip",function(){var Lt,Bt=kt.props,Gt=Bt.children,er=Bt.accessibilityLayer,tr=findChildByType(Gt,Tooltip);if(!tr)return null;var ar=kt.state,Mt=ar.isTooltipActive,lt=ar.activeCoordinate,mt=ar.activePayload,gt=ar.activeLabel,bt=ar.offset,St=(Lt=tr.props.active)!==null&&Lt!==void 0?Lt:Mt;return reactExports.cloneElement(tr,{viewBox:_objectSpread(_objectSpread({},bt),{},{x:bt.left,y:bt.top}),active:St,label:gt,payload:St?mt:[],coordinate:lt,accessibilityLayer:er})}),_defineProperty(kt,"renderBrush",function(Lt){var Bt=kt.props,Gt=Bt.margin,er=Bt.data,tr=kt.state,ar=tr.offset,Mt=tr.dataStartIndex,lt=tr.dataEndIndex,mt=tr.updateId;return reactExports.cloneElement(Lt,{key:Lt.key||"_recharts-brush",onChange:combineEventHandlers(kt.handleBrushChange,Lt.props.onChange),data:er,x:isNumber(Lt.props.x)?Lt.props.x:ar.left,y:isNumber(Lt.props.y)?Lt.props.y:ar.top+ar.height+ar.brushBottom-(Gt.bottom||0),width:isNumber(Lt.props.width)?Lt.props.width:ar.width,startIndex:Mt,endIndex:lt,updateId:"brush-".concat(mt)})}),_defineProperty(kt,"renderReferenceElement",function(Lt,Bt,Gt){if(!Lt)return null;var er=kt,tr=er.clipPathId,ar=kt.state,Mt=ar.xAxisMap,lt=ar.yAxisMap,mt=ar.offset,gt=Lt.type.defaultProps||{},bt=Lt.props,St=bt.xAxisId,Nt=St===void 0?gt.xAxisId:St,Pt=bt.yAxisId,Tt=Pt===void 0?gt.yAxisId:Pt;return reactExports.cloneElement(Lt,{key:Lt.key||"".concat(Bt,"-").concat(Gt),xAxis:Mt[Nt],yAxis:lt[Tt],viewBox:{x:mt.left,y:mt.top,width:mt.width,height:mt.height},clipPathId:tr})}),_defineProperty(kt,"renderActivePoints",function(Lt){var Bt=Lt.item,Gt=Lt.activePoint,er=Lt.basePoint,tr=Lt.childIndex,ar=Lt.isRange,Mt=[],lt=Bt.props.key,mt=Bt.item.type.defaultProps!==void 0?_objectSpread(_objectSpread({},Bt.item.type.defaultProps),Bt.item.props):Bt.item.props,gt=mt.activeDot,bt=mt.dataKey,St=_objectSpread(_objectSpread({index:tr,dataKey:bt,cx:Gt.x,cy:Gt.y,r:4,fill:getMainColorOfGraphicItem(Bt.item),strokeWidth:2,stroke:"#fff",payload:Gt.payload,value:Gt.value},filterProps(gt,!1)),adaptEventHandlers(gt));return Mt.push(wt.renderActiveDot(gt,St,"".concat(lt,"-activePoint-").concat(tr))),er?Mt.push(wt.renderActiveDot(gt,_objectSpread(_objectSpread({},St),{},{cx:er.x,cy:er.y}),"".concat(lt,"-basePoint-").concat(tr))):ar&&Mt.push(null),Mt}),_defineProperty(kt,"renderGraphicChild",function(Lt,Bt,Gt){var er=kt.filterFormatItem(Lt,Bt,Gt);if(!er)return null;var tr=kt.getTooltipEventType(),ar=kt.state,Mt=ar.isTooltipActive,lt=ar.tooltipAxis,mt=ar.activeTooltipIndex,gt=ar.activeLabel,bt=kt.props.children,St=findChildByType(bt,Tooltip),Nt=er.props,Pt=Nt.points,Tt=Nt.isRange,pt=Nt.baseLine,Rt=er.item.type.defaultProps!==void 0?_objectSpread(_objectSpread({},er.item.type.defaultProps),er.item.props):er.item.props,zt=Rt.activeDot,Yt=Rt.hide,ir=Rt.activeBar,ur=Rt.activeShape,cr=!!(!Yt&&Mt&&St&&(zt||ir||ur)),rr={};tr!=="axis"&&St&&St.props.trigger==="click"?rr={onClick:combineEventHandlers(kt.handleItemMouseEnter,Lt.props.onClick)}:tr!=="axis"&&(rr={onMouseLeave:combineEventHandlers(kt.handleItemMouseLeave,Lt.props.onMouseLeave),onMouseEnter:combineEventHandlers(kt.handleItemMouseEnter,Lt.props.onMouseEnter)});var fr=reactExports.cloneElement(Lt,_objectSpread(_objectSpread({},er.props),rr));function dr($r){return typeof lt.dataKey=="function"?lt.dataKey($r.payload):null}if(cr)if(mt>=0){var gr,hr;if(lt.dataKey&&!lt.allowDuplicatedCategory){var or=typeof lt.dataKey=="function"?dr:"payload.".concat(lt.dataKey.toString());gr=findEntryInArray(Pt,or,gt),hr=Tt&&pt&&findEntryInArray(pt,or,gt)}else gr=Pt==null?void 0:Pt[mt],hr=Tt&&pt&&pt[mt];if(ur||ir){var br=Lt.props.activeIndex!==void 0?Lt.props.activeIndex:mt;return[reactExports.cloneElement(Lt,_objectSpread(_objectSpread(_objectSpread({},er.props),rr),{},{activeIndex:br})),null,null]}if(!isNil$1(gr))return[fr].concat(_toConsumableArray(kt.renderActivePoints({item:er,activePoint:gr,basePoint:hr,childIndex:mt,isRange:Tt})))}else{var Rr,_r=(Rr=kt.getItemByXY(kt.state.activeCoordinate))!==null&&Rr!==void 0?Rr:{graphicalItem:fr},Er=_r.graphicalItem,Hr=Er.item,xr=Hr===void 0?Lt:Hr,yr=Er.childIndex,Ar=_objectSpread(_objectSpread(_objectSpread({},er.props),rr),{},{activeIndex:yr});return[reactExports.cloneElement(xr,Ar),null,null]}return Tt?[fr,null,null]:[fr,null]}),_defineProperty(kt,"renderCustomized",function(Lt,Bt,Gt){return reactExports.cloneElement(Lt,_objectSpread(_objectSpread({key:"recharts-customized-".concat(Gt)},kt.props),kt.state))}),_defineProperty(kt,"renderMap",{CartesianGrid:{handler:renderAsIs,once:!0},ReferenceArea:{handler:kt.renderReferenceElement},ReferenceLine:{handler:renderAsIs},ReferenceDot:{handler:kt.renderReferenceElement},XAxis:{handler:renderAsIs},YAxis:{handler:renderAsIs},Brush:{handler:kt.renderBrush,once:!0},Bar:{handler:kt.renderGraphicChild},Line:{handler:kt.renderGraphicChild},Area:{handler:kt.renderGraphicChild},Radar:{handler:kt.renderGraphicChild},RadialBar:{handler:kt.renderGraphicChild},Scatter:{handler:kt.renderGraphicChild},Pie:{handler:kt.renderGraphicChild},Funnel:{handler:kt.renderGraphicChild},Tooltip:{handler:kt.renderCursor,once:!0},PolarGrid:{handler:kt.renderPolarGrid,once:!0},PolarAngleAxis:{handler:kt.renderPolarAxis},PolarRadiusAxis:{handler:kt.renderPolarAxis},Customized:{handler:kt.renderCustomized}}),kt.clipPathId="".concat((At=Et.id)!==null&&At!==void 0?At:uniqueId("recharts"),"-clip"),kt.throttleTriggeredAfterMouseMove=throttle$1(kt.triggeredAfterMouseMove,(jt=Et.throttleDelay)!==null&&jt!==void 0?jt:1e3/60),kt.state={},kt}return _inherits(wt,xt),_createClass(wt,[{key:"componentDidMount",value:function(){var At,jt;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(At=this.props.margin.left)!==null&&At!==void 0?At:0,top:(jt=this.props.margin.top)!==null&&jt!==void 0?jt:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var At=this.props,jt=At.children,kt=At.data,Lt=At.height,Bt=At.layout,Gt=findChildByType(jt,Tooltip);if(Gt){var er=Gt.props.defaultIndex;if(!(typeof er!="number"||er<0||er>this.state.tooltipTicks.length-1)){var tr=this.state.tooltipTicks[er]&&this.state.tooltipTicks[er].value,ar=getTooltipContent(this.state,kt,er,tr),Mt=this.state.tooltipTicks[er].coordinate,lt=(this.state.offset.top+Lt)/2,mt=Bt==="horizontal",gt=mt?{x:Mt,y:lt}:{y:Mt,x:lt},bt=this.state.formattedGraphicalItems.find(function(Nt){var Pt=Nt.item;return Pt.type.name==="Scatter"});bt&&(gt=_objectSpread(_objectSpread({},gt),bt.props.points[er].tooltipPosition),ar=bt.props.points[er].tooltipPayload);var St={activeTooltipIndex:er,isTooltipActive:!0,activeLabel:tr,activePayload:ar,activeCoordinate:gt};this.setState(St),this.renderCursor(Gt),this.accessibilityManager.setIndex(er)}}}},{key:"getSnapshotBeforeUpdate",value:function(At,jt){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==jt.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==At.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==At.margin){var kt,Lt;this.accessibilityManager.setDetails({offset:{left:(kt=this.props.margin.left)!==null&&kt!==void 0?kt:0,top:(Lt=this.props.margin.top)!==null&&Lt!==void 0?Lt:0}})}return null}},{key:"componentDidUpdate",value:function(At){isChildrenEqual([findChildByType(At.children,Tooltip)],[findChildByType(this.props.children,Tooltip)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var At=findChildByType(this.props.children,Tooltip);if(At&&typeof At.props.shared=="boolean"){var jt=At.props.shared?"axis":"item";return it.indexOf(jt)>=0?jt:rt}return rt}},{key:"getMouseInfo",value:function(At){if(!this.container)return null;var jt=this.container,kt=jt.getBoundingClientRect(),Lt=getOffset(kt),Bt={chartX:Math.round(At.pageX-Lt.left),chartY:Math.round(At.pageY-Lt.top)},Gt=kt.width/jt.offsetWidth||1,er=this.inRange(Bt.chartX,Bt.chartY,Gt);if(!er)return null;var tr=this.state,ar=tr.xAxisMap,Mt=tr.yAxisMap,lt=this.getTooltipEventType();if(lt!=="axis"&&ar&&Mt){var mt=getAnyElementOfObject(ar).scale,gt=getAnyElementOfObject(Mt).scale,bt=mt&&mt.invert?mt.invert(Bt.chartX):null,St=gt&&gt.invert?gt.invert(Bt.chartY):null;return _objectSpread(_objectSpread({},Bt),{},{xValue:bt,yValue:St})}var Nt=getTooltipData(this.state,this.props.data,this.props.layout,er);return Nt?_objectSpread(_objectSpread({},Bt),Nt):null}},{key:"inRange",value:function(At,jt){var kt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,Lt=this.props.layout,Bt=At/kt,Gt=jt/kt;if(Lt==="horizontal"||Lt==="vertical"){var er=this.state.offset,tr=Bt>=er.left&&Bt<=er.left+er.width&&Gt>=er.top&&Gt<=er.top+er.height;return tr?{x:Bt,y:Gt}:null}var ar=this.state,Mt=ar.angleAxisMap,lt=ar.radiusAxisMap;if(Mt&&lt){var mt=getAnyElementOfObject(Mt);return inRangeOfSector({x:Bt,y:Gt},mt)}return null}},{key:"parseEventsOfWrapper",value:function(){var At=this.props.children,jt=this.getTooltipEventType(),kt=findChildByType(At,Tooltip),Lt={};kt&&jt==="axis"&&(kt.props.trigger==="click"?Lt={onClick:this.handleClick}:Lt={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var Bt=adaptEventHandlers(this.props,this.handleOuterEvent);return _objectSpread(_objectSpread({},Bt),Lt)}},{key:"addListener",value:function(){eventCenter.on(SYNC_EVENT,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){eventCenter.removeListener(SYNC_EVENT,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(At,jt,kt){for(var Lt=this.state.formattedGraphicalItems,Bt=0,Gt=Lt.length;Bt<Gt;Bt++){var er=Lt[Bt];if(er.item===At||er.props.key===At.key||jt===getDisplayName(er.item.type)&&kt===er.childIndex)return er}return null}},{key:"renderClipPath",value:function(){var At=this.clipPathId,jt=this.state.offset,kt=jt.left,Lt=jt.top,Bt=jt.height,Gt=jt.width;return React.createElement("defs",null,React.createElement("clipPath",{id:At},React.createElement("rect",{x:kt,y:Lt,height:Bt,width:Gt})))}},{key:"getXScales",value:function(){var At=this.state.xAxisMap;return At?Object.entries(At).reduce(function(jt,kt){var Lt=_slicedToArray(kt,2),Bt=Lt[0],Gt=Lt[1];return _objectSpread(_objectSpread({},jt),{},_defineProperty({},Bt,Gt.scale))},{}):null}},{key:"getYScales",value:function(){var At=this.state.yAxisMap;return At?Object.entries(At).reduce(function(jt,kt){var Lt=_slicedToArray(kt,2),Bt=Lt[0],Gt=Lt[1];return _objectSpread(_objectSpread({},jt),{},_defineProperty({},Bt,Gt.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(At){var jt;return(jt=this.state.xAxisMap)===null||jt===void 0||(jt=jt[At])===null||jt===void 0?void 0:jt.scale}},{key:"getYScaleByAxisId",value:function(At){var jt;return(jt=this.state.yAxisMap)===null||jt===void 0||(jt=jt[At])===null||jt===void 0?void 0:jt.scale}},{key:"getItemByXY",value:function(At){var jt=this.state,kt=jt.formattedGraphicalItems,Lt=jt.activeItem;if(kt&&kt.length)for(var Bt=0,Gt=kt.length;Bt<Gt;Bt++){var er=kt[Bt],tr=er.props,ar=er.item,Mt=ar.type.defaultProps!==void 0?_objectSpread(_objectSpread({},ar.type.defaultProps),ar.props):ar.props,lt=getDisplayName(ar.type);if(lt==="Bar"){var mt=(tr.data||[]).find(function(Nt){return isInRectangle(At,Nt)});if(mt)return{graphicalItem:er,payload:mt}}else if(lt==="RadialBar"){var gt=(tr.data||[]).find(function(Nt){return inRangeOfSector(At,Nt)});if(gt)return{graphicalItem:er,payload:gt}}else if(isFunnel(er,Lt)||isPie(er,Lt)||isScatter(er,Lt)){var bt=getActiveShapeIndexForTooltip({graphicalItem:er,activeTooltipItem:Lt,itemData:Mt.data}),St=Mt.activeIndex===void 0?bt:Mt.activeIndex;return{graphicalItem:_objectSpread(_objectSpread({},er),{},{childIndex:St}),payload:isScatter(er,Lt)?Mt.data[bt]:er.props.data[bt]}}}return null}},{key:"render",value:function(){var At=this;if(!validateWidthHeight(this))return null;var jt=this.props,kt=jt.children,Lt=jt.className,Bt=jt.width,Gt=jt.height,er=jt.style,tr=jt.compact,ar=jt.title,Mt=jt.desc,lt=_objectWithoutProperties(jt,_excluded2),mt=filterProps(lt,!1);if(tr)return React.createElement(ChartLayoutContextProvider,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},React.createElement(Surface,_extends({},mt,{width:Bt,height:Gt,title:ar,desc:Mt}),this.renderClipPath(),renderByOrder(kt,this.renderMap)));if(this.props.accessibilityLayer){var gt,bt;mt.tabIndex=(gt=this.props.tabIndex)!==null&&gt!==void 0?gt:0,mt.role=(bt=this.props.role)!==null&&bt!==void 0?bt:"application",mt.onKeyDown=function(Nt){At.accessibilityManager.keyboardEvent(Nt)},mt.onFocus=function(){At.accessibilityManager.focus()}}var St=this.parseEventsOfWrapper();return React.createElement(ChartLayoutContextProvider,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},React.createElement("div",_extends({className:clsx("recharts-wrapper",Lt),style:_objectSpread({position:"relative",cursor:"default",width:Bt,height:Gt},er)},St,{ref:function(Pt){At.container=Pt}}),React.createElement(Surface,_extends({},mt,{width:Bt,height:Gt,title:ar,desc:Mt,style:FULL_WIDTH_AND_HEIGHT}),this.renderClipPath(),renderByOrder(kt,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(reactExports.Component);return _defineProperty(vt,"displayName",_e),_defineProperty(vt,"defaultProps",_objectSpread({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},dt)),_defineProperty(vt,"getDerivedStateFromProps",function(xt,wt){var Et=xt.dataKey,At=xt.data,jt=xt.children,kt=xt.width,Lt=xt.height,Bt=xt.layout,Gt=xt.stackOffset,er=xt.margin,tr=wt.dataStartIndex,ar=wt.dataEndIndex;if(wt.updateId===void 0){var Mt=createDefaultState(xt);return _objectSpread(_objectSpread(_objectSpread({},Mt),{},{updateId:0},yt(_objectSpread(_objectSpread({props:xt},Mt),{},{updateId:0}),wt)),{},{prevDataKey:Et,prevData:At,prevWidth:kt,prevHeight:Lt,prevLayout:Bt,prevStackOffset:Gt,prevMargin:er,prevChildren:jt})}if(Et!==wt.prevDataKey||At!==wt.prevData||kt!==wt.prevWidth||Lt!==wt.prevHeight||Bt!==wt.prevLayout||Gt!==wt.prevStackOffset||!shallowEqual(er,wt.prevMargin)){var lt=createDefaultState(xt),mt={chartX:wt.chartX,chartY:wt.chartY,isTooltipActive:wt.isTooltipActive},gt=_objectSpread(_objectSpread({},getTooltipData(wt,At,Bt)),{},{updateId:wt.updateId+1}),bt=_objectSpread(_objectSpread(_objectSpread({},lt),mt),gt);return _objectSpread(_objectSpread(_objectSpread({},bt),yt(_objectSpread({props:xt},bt),wt)),{},{prevDataKey:Et,prevData:At,prevWidth:kt,prevHeight:Lt,prevLayout:Bt,prevStackOffset:Gt,prevMargin:er,prevChildren:jt})}if(!isChildrenEqual(jt,wt.prevChildren)){var St,Nt,Pt,Tt,pt=findChildByType(jt,Brush),Rt=pt&&(St=(Nt=pt.props)===null||Nt===void 0?void 0:Nt.startIndex)!==null&&St!==void 0?St:tr,zt=pt&&(Pt=(Tt=pt.props)===null||Tt===void 0?void 0:Tt.endIndex)!==null&&Pt!==void 0?Pt:ar,Yt=Rt!==tr||zt!==ar,ir=!isNil$1(At),ur=ir&&!Yt?wt.updateId:wt.updateId+1;return _objectSpread(_objectSpread({updateId:ur},yt(_objectSpread(_objectSpread({props:xt},wt),{},{updateId:ur,dataStartIndex:Rt,dataEndIndex:zt}),wt)),{},{prevChildren:jt,dataStartIndex:Rt,dataEndIndex:zt})}return null}),_defineProperty(vt,"renderActiveDot",function(xt,wt,Et){var At;return reactExports.isValidElement(xt)?At=reactExports.cloneElement(xt,wt):isFunction$3(xt)?At=xt(wt):At=React.createElement(Dot,wt),React.createElement(Layer,{className:"recharts-active-dot",key:Et},At)}),function(wt){return React.createElement(vt,wt)}},AreaChart=generateCategoricalChart({chartName:"AreaChart",GraphicalChild:Area,axisComponents:[{axisType:"xAxis",AxisComp:XAxis},{axisType:"yAxis",AxisComp:YAxis}],formatAxisMap});const CandlestickChart=({data:_,height:$=400})=>{const _e=_.map(rt=>({date:new Date(rt.time*1e3),value:rt.close,open:rt.open,high:rt.high,low:rt.low,close:rt.close,volume:rt.volume})),et=Math.min(..._.map(rt=>rt.low))*.99,tt=Math.max(..._.map(rt=>rt.high))*1.01;return jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:$,children:jsxRuntimeExports.jsxs(AreaChart,{data:_e,margin:{top:10,right:30,left:0,bottom:0},children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"colorPrice",x1:"0",y1:"0",x2:"0",y2:"1",children:[jsxRuntimeExports.jsx("stop",{offset:"5%",stopColor:"#3861FB",stopOpacity:.8}),jsxRuntimeExports.jsx("stop",{offset:"95%",stopColor:"#3861FB",stopOpacity:0})]})}),jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",stroke:"#333",strokeOpacity:.2}),jsxRuntimeExports.jsx(XAxis,{dataKey:"date",tickFormatter:rt=>format$1(rt,"HH:mm"),minTickGap:50}),jsxRuntimeExports.jsx(YAxis,{domain:[et,tt],tickFormatter:rt=>rt.toLocaleString(),width:70}),jsxRuntimeExports.jsx(Tooltip,{content:({active:rt,payload:nt})=>{if(rt&&nt&&nt.length){const it=nt[0].payload;return jsxRuntimeExports.jsxs("div",{className:"bg-background border border-border rounded p-2 shadow-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium",children:format$1(it.date,"MMM d, yyyy HH:mm")}),jsxRuntimeExports.jsxs("p",{className:"text-sm",children:["Open: ",jsxRuntimeExports.jsx("span",{className:"text-neutral",children:it.open.toFixed(2)})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm",children:["High: ",jsxRuntimeExports.jsx("span",{className:"text-profit",children:it.high.toFixed(2)})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm",children:["Low: ",jsxRuntimeExports.jsx("span",{className:"text-loss",children:it.low.toFixed(2)})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm font-medium",children:["Close: ",jsxRuntimeExports.jsx("span",{children:it.close.toFixed(2)})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-neutral",children:["Volume: ",(it.volume/1e3).toFixed(2),"K"]})]})}return null}}),jsxRuntimeExports.jsx(Area,{type:"monotone",dataKey:"value",stroke:"#3861FB",fillOpacity:1,fill:"url(#colorPrice)"})]})})},Textarea=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsx("textarea",{className:cn("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 text-foreground",_),ref:_e,...$}));Textarea.displayName="Textarea";var PAGE_KEYS=["PageUp","PageDown"],ARROW_KEYS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],BACK_KEYS={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},SLIDER_NAME="Slider",[Collection,useCollection,createCollectionScope]=createCollection(SLIDER_NAME),[createSliderContext,createSliderScope]=createContextScope$3(SLIDER_NAME,[createCollectionScope]),[SliderProvider,useSliderContext]=createSliderContext(SLIDER_NAME),Slider$1=reactExports.forwardRef((_,$)=>{const{name:_e,min:et=0,max:tt=100,step:rt=1,orientation:nt="horizontal",disabled:it=!1,minStepsBetweenThumbs:st=0,defaultValue:at=[et],value:ot,onValueChange:dt=()=>{},onValueCommit:ht=()=>{},inverted:yt=!1,form:vt,...xt}=_,wt=reactExports.useRef(new Set),Et=reactExports.useRef(0),jt=nt==="horizontal"?SliderHorizontal:SliderVertical,[kt=[],Lt]=useControllableState({prop:ot,defaultProp:at,onChange:Mt=>{var mt;(mt=[...wt.current][Et.current])==null||mt.focus(),dt(Mt)}}),Bt=reactExports.useRef(kt);function Gt(Mt){const lt=getClosestValueIndex(kt,Mt);ar(Mt,lt)}function er(Mt){ar(Mt,Et.current)}function tr(){const Mt=Bt.current[Et.current];kt[Et.current]!==Mt&&ht(kt)}function ar(Mt,lt,{commit:mt}={commit:!1}){const gt=getDecimalCount(rt),bt=roundValue(Math.round((Mt-et)/rt)*rt+et,gt),St=clamp$1(bt,[et,tt]);Lt((Nt=[])=>{const Pt=getNextSortedValues(Nt,St,lt);if(hasMinStepsBetweenValues(Pt,st*rt)){Et.current=Pt.indexOf(St);const Tt=String(Pt)!==String(Nt);return Tt&&mt&&ht(Pt),Tt?Pt:Nt}else return Nt})}return jsxRuntimeExports.jsx(SliderProvider,{scope:_.__scopeSlider,name:_e,disabled:it,min:et,max:tt,valueIndexToChangeRef:Et,thumbs:wt.current,values:kt,orientation:nt,form:vt,children:jsxRuntimeExports.jsx(Collection.Provider,{scope:_.__scopeSlider,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:_.__scopeSlider,children:jsxRuntimeExports.jsx(jt,{"aria-disabled":it,"data-disabled":it?"":void 0,...xt,ref:$,onPointerDown:composeEventHandlers(xt.onPointerDown,()=>{it||(Bt.current=kt)}),min:et,max:tt,inverted:yt,onSlideStart:it?void 0:Gt,onSlideMove:it?void 0:er,onSlideEnd:it?void 0:tr,onHomeKeyDown:()=>!it&&ar(et,0,{commit:!0}),onEndKeyDown:()=>!it&&ar(tt,kt.length-1,{commit:!0}),onStepKeyDown:({event:Mt,direction:lt})=>{if(!it){const bt=PAGE_KEYS.includes(Mt.key)||Mt.shiftKey&&ARROW_KEYS.includes(Mt.key)?10:1,St=Et.current,Nt=kt[St],Pt=rt*bt*lt;ar(Nt+Pt,St,{commit:!0})}}})})})})});Slider$1.displayName=SLIDER_NAME;var[SliderOrientationProvider,useSliderOrientationContext]=createSliderContext(SLIDER_NAME,{startEdge:"left",endEdge:"right",size:"width",direction:1}),SliderHorizontal=reactExports.forwardRef((_,$)=>{const{min:_e,max:et,dir:tt,inverted:rt,onSlideStart:nt,onSlideMove:it,onSlideEnd:st,onStepKeyDown:at,...ot}=_,[dt,ht]=reactExports.useState(null),yt=useComposedRefs($,jt=>ht(jt)),vt=reactExports.useRef(),xt=useDirection(tt),wt=xt==="ltr",Et=wt&&!rt||!wt&&rt;function At(jt){const kt=vt.current||dt.getBoundingClientRect(),Lt=[0,kt.width],Gt=linearScale(Lt,Et?[_e,et]:[et,_e]);return vt.current=kt,Gt(jt-kt.left)}return jsxRuntimeExports.jsx(SliderOrientationProvider,{scope:_.__scopeSlider,startEdge:Et?"left":"right",endEdge:Et?"right":"left",direction:Et?1:-1,size:"width",children:jsxRuntimeExports.jsx(SliderImpl,{dir:xt,"data-orientation":"horizontal",...ot,ref:yt,style:{...ot.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:jt=>{const kt=At(jt.clientX);nt==null||nt(kt)},onSlideMove:jt=>{const kt=At(jt.clientX);it==null||it(kt)},onSlideEnd:()=>{vt.current=void 0,st==null||st()},onStepKeyDown:jt=>{const Lt=BACK_KEYS[Et?"from-left":"from-right"].includes(jt.key);at==null||at({event:jt,direction:Lt?-1:1})}})})}),SliderVertical=reactExports.forwardRef((_,$)=>{const{min:_e,max:et,inverted:tt,onSlideStart:rt,onSlideMove:nt,onSlideEnd:it,onStepKeyDown:st,...at}=_,ot=reactExports.useRef(null),dt=useComposedRefs($,ot),ht=reactExports.useRef(),yt=!tt;function vt(xt){const wt=ht.current||ot.current.getBoundingClientRect(),Et=[0,wt.height],jt=linearScale(Et,yt?[et,_e]:[_e,et]);return ht.current=wt,jt(xt-wt.top)}return jsxRuntimeExports.jsx(SliderOrientationProvider,{scope:_.__scopeSlider,startEdge:yt?"bottom":"top",endEdge:yt?"top":"bottom",size:"height",direction:yt?1:-1,children:jsxRuntimeExports.jsx(SliderImpl,{"data-orientation":"vertical",...at,ref:dt,style:{...at.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:xt=>{const wt=vt(xt.clientY);rt==null||rt(wt)},onSlideMove:xt=>{const wt=vt(xt.clientY);nt==null||nt(wt)},onSlideEnd:()=>{ht.current=void 0,it==null||it()},onStepKeyDown:xt=>{const Et=BACK_KEYS[yt?"from-bottom":"from-top"].includes(xt.key);st==null||st({event:xt,direction:Et?-1:1})}})})}),SliderImpl=reactExports.forwardRef((_,$)=>{const{__scopeSlider:_e,onSlideStart:et,onSlideMove:tt,onSlideEnd:rt,onHomeKeyDown:nt,onEndKeyDown:it,onStepKeyDown:st,...at}=_,ot=useSliderContext(SLIDER_NAME,_e);return jsxRuntimeExports.jsx(Primitive.span,{...at,ref:$,onKeyDown:composeEventHandlers(_.onKeyDown,dt=>{dt.key==="Home"?(nt(dt),dt.preventDefault()):dt.key==="End"?(it(dt),dt.preventDefault()):PAGE_KEYS.concat(ARROW_KEYS).includes(dt.key)&&(st(dt),dt.preventDefault())}),onPointerDown:composeEventHandlers(_.onPointerDown,dt=>{const ht=dt.target;ht.setPointerCapture(dt.pointerId),dt.preventDefault(),ot.thumbs.has(ht)?ht.focus():et(dt)}),onPointerMove:composeEventHandlers(_.onPointerMove,dt=>{dt.target.hasPointerCapture(dt.pointerId)&&tt(dt)}),onPointerUp:composeEventHandlers(_.onPointerUp,dt=>{const ht=dt.target;ht.hasPointerCapture(dt.pointerId)&&(ht.releasePointerCapture(dt.pointerId),rt(dt))})})}),TRACK_NAME="SliderTrack",SliderTrack=reactExports.forwardRef((_,$)=>{const{__scopeSlider:_e,...et}=_,tt=useSliderContext(TRACK_NAME,_e);return jsxRuntimeExports.jsx(Primitive.span,{"data-disabled":tt.disabled?"":void 0,"data-orientation":tt.orientation,...et,ref:$})});SliderTrack.displayName=TRACK_NAME;var RANGE_NAME="SliderRange",SliderRange=reactExports.forwardRef((_,$)=>{const{__scopeSlider:_e,...et}=_,tt=useSliderContext(RANGE_NAME,_e),rt=useSliderOrientationContext(RANGE_NAME,_e),nt=reactExports.useRef(null),it=useComposedRefs($,nt),st=tt.values.length,at=tt.values.map(ht=>convertValueToPercentage(ht,tt.min,tt.max)),ot=st>1?Math.min(...at):0,dt=100-Math.max(...at);return jsxRuntimeExports.jsx(Primitive.span,{"data-orientation":tt.orientation,"data-disabled":tt.disabled?"":void 0,...et,ref:it,style:{..._.style,[rt.startEdge]:ot+"%",[rt.endEdge]:dt+"%"}})});SliderRange.displayName=RANGE_NAME;var THUMB_NAME="SliderThumb",SliderThumb=reactExports.forwardRef((_,$)=>{const _e=useCollection(_.__scopeSlider),[et,tt]=reactExports.useState(null),rt=useComposedRefs($,it=>tt(it)),nt=reactExports.useMemo(()=>et?_e().findIndex(it=>it.ref.current===et):-1,[_e,et]);return jsxRuntimeExports.jsx(SliderThumbImpl,{..._,ref:rt,index:nt})}),SliderThumbImpl=reactExports.forwardRef((_,$)=>{const{__scopeSlider:_e,index:et,name:tt,...rt}=_,nt=useSliderContext(THUMB_NAME,_e),it=useSliderOrientationContext(THUMB_NAME,_e),[st,at]=reactExports.useState(null),ot=useComposedRefs($,At=>at(At)),dt=st?nt.form||!!st.closest("form"):!0,ht=useSize(st),yt=nt.values[et],vt=yt===void 0?0:convertValueToPercentage(yt,nt.min,nt.max),xt=getLabel(et,nt.values.length),wt=ht==null?void 0:ht[it.size],Et=wt?getThumbInBoundsOffset(wt,vt,it.direction):0;return reactExports.useEffect(()=>{if(st)return nt.thumbs.add(st),()=>{nt.thumbs.delete(st)}},[st,nt.thumbs]),jsxRuntimeExports.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[it.startEdge]:`calc(${vt}% + ${Et}px)`},children:[jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:_.__scopeSlider,children:jsxRuntimeExports.jsx(Primitive.span,{role:"slider","aria-label":_["aria-label"]||xt,"aria-valuemin":nt.min,"aria-valuenow":yt,"aria-valuemax":nt.max,"aria-orientation":nt.orientation,"data-orientation":nt.orientation,"data-disabled":nt.disabled?"":void 0,tabIndex:nt.disabled?void 0:0,...rt,ref:ot,style:yt===void 0?{display:"none"}:_.style,onFocus:composeEventHandlers(_.onFocus,()=>{nt.valueIndexToChangeRef.current=et})})}),dt&&jsxRuntimeExports.jsx(BubbleInput,{name:tt??(nt.name?nt.name+(nt.values.length>1?"[]":""):void 0),form:nt.form,value:yt},et)]})});SliderThumb.displayName=THUMB_NAME;var BubbleInput=_=>{const{value:$,..._e}=_,et=reactExports.useRef(null),tt=usePrevious($);return reactExports.useEffect(()=>{const rt=et.current,nt=window.HTMLInputElement.prototype,st=Object.getOwnPropertyDescriptor(nt,"value").set;if(tt!==$&&st){const at=new Event("input",{bubbles:!0});st.call(rt,$),rt.dispatchEvent(at)}},[tt,$]),jsxRuntimeExports.jsx("input",{style:{display:"none"},..._e,ref:et,defaultValue:$})};function getNextSortedValues(_=[],$,_e){const et=[..._];return et[_e]=$,et.sort((tt,rt)=>tt-rt)}function convertValueToPercentage(_,$,_e){const rt=100/(_e-$)*(_-$);return clamp$1(rt,[0,100])}function getLabel(_,$){return $>2?`Value ${_+1} of ${$}`:$===2?["Minimum","Maximum"][_]:void 0}function getClosestValueIndex(_,$){if(_.length===1)return 0;const _e=_.map(tt=>Math.abs(tt-$)),et=Math.min(..._e);return _e.indexOf(et)}function getThumbInBoundsOffset(_,$,_e){const et=_/2,rt=linearScale([0,50],[0,et]);return(et-rt($)*_e)*_e}function getStepsBetweenValues(_){return _.slice(0,-1).map(($,_e)=>_[_e+1]-$)}function hasMinStepsBetweenValues(_,$){if($>0){const _e=getStepsBetweenValues(_);return Math.min(..._e)>=$}return!0}function linearScale(_,$){return _e=>{if(_[0]===_[1]||$[0]===$[1])return $[0];const et=($[1]-$[0])/(_[1]-_[0]);return $[0]+et*(_e-_[0])}}function getDecimalCount(_){return(String(_).split(".")[1]||"").length}function roundValue(_,$){const _e=Math.pow(10,$);return Math.round(_*_e)/_e}var Root=Slider$1,Track=SliderTrack,Range=SliderRange,Thumb=SliderThumb;const Slider=reactExports.forwardRef(({className:_,...$},_e)=>jsxRuntimeExports.jsxs(Root,{ref:_e,className:cn("relative flex w-full touch-none select-none items-center",_),...$,children:[jsxRuntimeExports.jsx(Track,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:jsxRuntimeExports.jsx(Range,{className:"absolute h-full bg-primary"})}),jsxRuntimeExports.jsx(Thumb,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Slider.displayName=Root.displayName;const Strategies=()=>{const{strategies:_,updateStrategy:$,deleteStrategy:_e}=useStrategies(),{toast:et}=useToast(),[tt,rt]=reactExports.useState("list"),[nt,it]=reactExports.useState("BTC/USDT"),st=generateMockKlines(nt,"1h",100),{isEnabled:at,isInitialized:ot,isLoading:dt,settings:ht,updateSettings:yt,enableAI:vt,disableAI:xt,error:wt}=useAI(),Et=(Bt,Gt)=>{var er;$(Bt,{active:Gt}),et({title:Gt?"Strategy Activated":"Strategy Deactivated",description:`Strategy ${(er=_.find(tr=>tr.id===Bt))==null?void 0:er.name} has been ${Gt?"activated":"deactivated"}`})},At=(Bt,Gt)=>{confirm(`Are you sure you want to delete the strategy "${Gt}"?`)&&(_e(Bt),et({title:"Strategy Deleted",description:`Strategy "${Gt}" has been deleted`}))},jt=(Bt,Gt)=>{yt({[Bt]:Gt}),et({title:"AI Settings Updated",description:`${Bt.charAt(0).toUpperCase()+Bt.slice(1)} has been updated.`})},kt=async()=>{try{const Bt=await vt();et(Bt?{title:"AI System Activated",description:"The AI trading system has been successfully activated."}:{title:"AI Activation Failed",description:"Could not activate the AI system.",variant:"destructive"})}catch(Bt){console.error("Error activating AI:",Bt),et({title:"AI Activation Failed",description:"Could not activate the AI system. Check console for details.",variant:"destructive"})}},Lt=()=>{xt(),et({title:"AI System Deactivated",description:"The AI trading system has been deactivated."})};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(PageHeader,{title:"Trading Strategies",subtitle:"Create and manage automated trading strategies",actions:jsxRuntimeExports.jsxs(Button,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),jsxRuntimeExports.jsx("span",{children:"New Strategy"})]})}),jsxRuntimeExports.jsxs(Tabs,{defaultValue:"list",value:tt,onValueChange:rt,children:[jsxRuntimeExports.jsxs(TabsList,{className:"mb-4",children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"list",children:"Strategies List"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"backtest",children:"Backtesting"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"create",children:"Create Strategy"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"ai-settings",children:"AI Settings"})]}),jsxRuntimeExports.jsx(TabsContent,{value:"list",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{children:"Your Trading Strategies"})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("div",{className:"rounded-md border overflow-hidden",children:jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(TableHeader,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableHead,{children:"Name"}),jsxRuntimeExports.jsx(TableHead,{children:"Symbol"}),jsxRuntimeExports.jsx(TableHead,{children:"Type"}),jsxRuntimeExports.jsx(TableHead,{className:"text-right",children:"Win Rate"}),jsxRuntimeExports.jsx(TableHead,{className:"text-right",children:"Profit"}),jsxRuntimeExports.jsx(TableHead,{className:"text-center",children:"Status"}),jsxRuntimeExports.jsx(TableHead,{className:"text-right",children:"Actions"})]})}),jsxRuntimeExports.jsx(TableBody,{children:_.length===0?jsxRuntimeExports.jsx(TableRow,{children:jsxRuntimeExports.jsx(TableCell,{colSpan:7,className:"text-center h-24",children:"No strategies found"})}):_.map(Bt=>{var Gt,er,tr,ar;return jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{className:"font-medium",children:Bt.name}),jsxRuntimeExports.jsx(TableCell,{children:Bt.symbol}),jsxRuntimeExports.jsx(TableCell,{children:Bt.indicators.map(Mt=>Mt.type).join("/")}),jsxRuntimeExports.jsxs(TableCell,{className:"text-right",children:[(Gt=Bt.performance)==null?void 0:Gt.winRate.toFixed(1),"%"]}),jsxRuntimeExports.jsxs(TableCell,{className:`text-right ${(((er=Bt.performance)==null?void 0:er.profit)||0)>=0?"text-profit":"text-loss"}`,children:[formatCurrency(((tr=Bt.performance)==null?void 0:tr.profit)||0),jsxRuntimeExports.jsx("span",{className:"text-xs block",children:formatPercentage(((ar=Bt.performance)==null?void 0:ar.profitPercentage)||0)})]}),jsxRuntimeExports.jsx(TableCell,{className:"text-center",children:jsxRuntimeExports.jsx(Switch,{checked:Bt.active,onCheckedChange:Mt=>Et(Bt.id,Mt)})}),jsxRuntimeExports.jsx(TableCell,{className:"text-right",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",children:jsxRuntimeExports.jsx(Eye,{size:16})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",children:jsxRuntimeExports.jsx(PencilLine,{size:16})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>At(Bt.id,Bt.name),children:jsxRuntimeExports.jsx(Trash2,{size:16})})]})})]},Bt.id)})})]})})})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"backtest",children:jsxRuntimeExports.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[jsxRuntimeExports.jsxs(Card,{className:"md:col-span-2",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{children:"Backtest Chart"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",children:"BTC/USDT"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",children:"1H"}),jsxRuntimeExports.jsxs(Button,{variant:"default",size:"sm",className:"gap-1",children:[jsxRuntimeExports.jsx(Zap,{size:14}),"Run Test"]})]})]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("div",{className:"h-[500px]",children:jsxRuntimeExports.jsx(CandlestickChart,{data:st,height:500})})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-2",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:"Strategy Parameters"})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium",children:"Select Strategy"}),jsxRuntimeExports.jsx("select",{className:"mt-1 w-full rounded-md border border-input p-2",children:_.map(Bt=>jsxRuntimeExports.jsx("option",{value:Bt.id,children:Bt.name},Bt.id))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium",children:"Timeframe"}),jsxRuntimeExports.jsxs("div",{className:"mt-1 grid grid-cols-4 gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",children:"1H"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",children:"4H"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",children:"1D"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",children:"1W"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium",children:"Test Period"}),jsxRuntimeExports.jsxs("div",{className:"mt-1 flex gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",className:"flex-1",children:"1M"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",className:"flex-1",children:"3M"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",className:"flex-1",children:"6M"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",className:"flex-1",children:"1Y"})]})]})]})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-2",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:"Backtest Results"})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Net Profit"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-profit",children:"+$2,458.32"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Win Rate"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"68.5%"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Total Trades"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"54"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Profit Factor"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"2.3"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Max Drawdown"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-loss",children:"-$742.19"})]}),jsxRuntimeExports.jsx(Button,{className:"w-full mt-2",children:"Save as Strategy"})]})})]})]})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"create",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Activity,{size:20}),"Create New Strategy"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-foreground",children:"Strategy Name"}),jsxRuntimeExports.jsx(Input$1,{type:"text",placeholder:"My Strategy",className:"mt-1 w-full"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-foreground",children:"Trading Pair"}),jsxRuntimeExports.jsxs("select",{className:"mt-1 w-full rounded-md border border-input p-2 bg-background text-foreground",children:[jsxRuntimeExports.jsx("option",{children:"BTC/USDT"}),jsxRuntimeExports.jsx("option",{children:"ETH/USDT"}),jsxRuntimeExports.jsx("option",{children:"BNB/USDT"}),jsxRuntimeExports.jsx("option",{children:"SOL/USDT"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-foreground",children:"Description (Optional)"}),jsxRuntimeExports.jsx(Textarea,{placeholder:"Strategy description...",className:"mt-1 w-full h-24"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-foreground",children:"Indicators"}),jsxRuntimeExports.jsxs("div",{className:"mt-1 space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-end gap-2 p-3 border rounded-md",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium text-foreground",children:"Indicator Type"}),jsxRuntimeExports.jsxs("select",{className:"mt-1 w-full rounded-md border border-input p-2 bg-background text-foreground",children:[jsxRuntimeExports.jsx("option",{children:"RSI"}),jsxRuntimeExports.jsx("option",{children:"MACD"}),jsxRuntimeExports.jsx("option",{children:"Moving Average"}),jsxRuntimeExports.jsx("option",{children:"Bollinger Bands"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium text-foreground",children:"Period"}),jsxRuntimeExports.jsx(Input$1,{type:"number",defaultValue:"14",className:"mt-1 w-full"})]}),jsxRuntimeExports.jsx(Button,{variant:"outline",className:"shrink-0",children:"Remove"})]}),jsxRuntimeExports.jsx(Button,{variant:"outline",className:"w-full",children:"+ Add Indicator"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-foreground",children:"Conditions"}),jsxRuntimeExports.jsxs("div",{className:"mt-1 space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-end flex-wrap gap-2 p-3 border rounded-md",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-[200px]",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium text-foreground",children:"Indicator"}),jsxRuntimeExports.jsx("select",{className:"mt-1 w-full rounded-md border border-input p-2 bg-background text-foreground",children:jsxRuntimeExports.jsx("option",{children:"RSI(14)"})})]}),jsxRuntimeExports.jsxs("div",{className:"w-[120px]",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium text-foreground",children:"Operator"}),jsxRuntimeExports.jsxs("select",{className:"mt-1 w-full rounded-md border border-input p-2 bg-background text-foreground",children:[jsxRuntimeExports.jsx("option",{children:"Crosses Below"}),jsxRuntimeExports.jsx("option",{children:"Crosses Above"}),jsxRuntimeExports.jsx("option",{children:"Greater Than"}),jsxRuntimeExports.jsx("option",{children:"Less Than"})]})]}),jsxRuntimeExports.jsxs("div",{className:"w-[80px]",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium text-foreground",children:"Value"}),jsxRuntimeExports.jsx(Input$1,{type:"number",defaultValue:"30",className:"mt-1 w-full"})]}),jsxRuntimeExports.jsxs("div",{className:"w-[100px]",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium text-foreground",children:"Action"}),jsxRuntimeExports.jsxs("select",{className:"mt-1 w-full rounded-md border border-input p-2 bg-background text-foreground",children:[jsxRuntimeExports.jsx("option",{children:"BUY"}),jsxRuntimeExports.jsx("option",{children:"SELL"})]})]}),jsxRuntimeExports.jsx(Button,{variant:"outline",className:"shrink-0",children:"Remove"})]}),jsxRuntimeExports.jsx(Button,{variant:"outline",className:"w-full",children:"+ Add Condition"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",children:"Cancel"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{et({title:"Strategy Created",description:"Your new strategy has been created successfully."}),rt("list")},children:"Save Strategy"})]})]})})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"ai-settings",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Cpu,{size:20}),"AI Trading Configuration"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium",children:"Enable AI Trading System"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Activate the AI system to analyze markets and generate trading signals"})]}),jsxRuntimeExports.jsx(Switch,{checked:at,onCheckedChange:Bt=>Bt?kt():Lt()})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$2,{children:"AI Model"}),jsxRuntimeExports.jsxs(Select$1,{value:ht.model,onValueChange:Bt=>jt("model",Bt),disabled:!at,children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select AI model"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"tensorflow",children:"TensorFlow.js (Client-side)"}),jsxRuntimeExports.jsx(SelectItem,{value:"backend",children:"Advanced LSTM (Server-side)"}),jsxRuntimeExports.jsx(SelectItem,{value:"ensemble",children:"Ensemble (Combined models)"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx(Label$2,{children:"Position Size (% of Balance)"}),jsxRuntimeExports.jsxs("span",{className:"text-sm",children:[ht.positionSize,"%"]})]}),jsxRuntimeExports.jsx(Slider,{value:[ht.positionSize],min:1,max:25,step:1,disabled:!at,onValueChange:Bt=>jt("positionSize",Bt[0])})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx(Label$2,{children:"Confidence Threshold"}),jsxRuntimeExports.jsxs("span",{className:"text-sm",children:[ht.confidenceThreshold,"%"]})]}),jsxRuntimeExports.jsx(Slider,{value:[ht.confidenceThreshold],min:50,max:95,step:5,disabled:!at,onValueChange:Bt=>jt("confidenceThreshold",Bt[0])})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx(Label$2,{children:"Leverage"}),jsxRuntimeExports.jsxs("span",{className:"text-sm",children:[ht.leverage,"x"]})]}),jsxRuntimeExports.jsx(Slider,{value:[ht.leverage],min:1,max:20,step:1,disabled:!at,onValueChange:Bt=>jt("leverage",Bt[0])})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[jsxRuntimeExports.jsx(Switch,{id:"trade-automation",checked:ht.automatedTrading,disabled:!at,onCheckedChange:Bt=>jt("automatedTrading",Bt)}),jsxRuntimeExports.jsx(Label$2,{htmlFor:"trade-automation",children:"Enable Automated Trading"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pt-4",children:[jsxRuntimeExports.jsx(Label$2,{children:"Safety Features"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Switch,{id:"safety-circuitBreaker",checked:ht.circuitBreaker,disabled:!at,onCheckedChange:Bt=>jt("circuitBreaker",Bt)}),jsxRuntimeExports.jsx(Label$2,{htmlFor:"safety-circuitBreaker",children:"Circuit Breaker"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Switch,{id:"safety-sandboxMode",checked:ht.sandboxMode,disabled:!at,onCheckedChange:Bt=>jt("sandboxMode",Bt)}),jsxRuntimeExports.jsx(Label$2,{htmlFor:"safety-sandboxMode",children:"Sandbox Mode"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"pt-4",children:jsxRuntimeExports.jsx(Button,{className:"w-full",disabled:!at,onClick:()=>{et({title:"AI Settings Saved",description:"Your AI configuration has been saved successfully."})},children:"Save Configuration"})})]})]})})]})})]})]})},Alerts=()=>{const[_,$]=useLocalStorage("crypto-alerts",[]),[_e,et]=reactExports.useState({symbol:"BTC/USDT",type:"price",condition:"above",value:0,active:!0}),{toast:tt}=useToast(),rt=["BTC/USDT","ETH/USDT","BNB/USDT","SOL/USDT","ADA/USDT","XRP/USDT","DOT/USDT","DOGE/USDT"],nt=()=>{if(_e.value<=0){tt({title:"Invalid value",description:"Please enter a value greater than 0",variant:"destructive"});return}const ot={..._e,id:`alert-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString()};$([..._,ot]),tt({title:"Alert created",description:`${_e.symbol} ${_e.condition} ${_e.value}`}),et(dt=>({...dt,type:"price",condition:"above",value:0}))},it=ot=>{$(_.filter(dt=>dt.id!==ot)),tt({title:"Alert deleted",description:"The alert has been removed"})},st=ot=>{$(_.map(dt=>dt.id===ot?{...dt,active:!dt.active}:dt))},at=ot=>{switch(ot){case"above":return">";case"below":return"<";case"crosses":return"⟷";default:return ot}};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx(PageHeader,{title:"Market Alerts",subtitle:"Set up custom alerts for market conditions",actions:jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>$([]),children:"Clear All"})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsx("div",{className:"md:col-span-1",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{children:"Create Alert"})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"symbol",children:"Market Pair"}),jsxRuntimeExports.jsxs(Select$1,{value:_e.symbol,onValueChange:ot=>et(dt=>({...dt,symbol:ot})),children:[jsxRuntimeExports.jsx(SelectTrigger,{id:"symbol",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select pair"})}),jsxRuntimeExports.jsx(SelectContent,{children:rt.map(ot=>jsxRuntimeExports.jsx(SelectItem,{value:ot,children:ot},ot))})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$2,{children:"Alert Type"}),jsxRuntimeExports.jsxs(Tabs,{value:_e.type,onValueChange:ot=>et(dt=>({...dt,type:ot})),className:"w-full",children:[jsxRuntimeExports.jsxs(TabsList,{className:"grid w-full grid-cols-3",children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"price",children:"Price"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"volume",children:"Volume"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"indicator",children:"Indicator"})]}),jsxRuntimeExports.jsx(TabsContent,{value:"price",className:"pt-4",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"condition",children:"Condition"}),jsxRuntimeExports.jsxs(Select$1,{value:_e.condition,onValueChange:ot=>et(dt=>({...dt,condition:ot})),children:[jsxRuntimeExports.jsx(SelectTrigger,{id:"condition",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select condition"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"above",children:"Above"}),jsxRuntimeExports.jsx(SelectItem,{value:"below",children:"Below"}),jsxRuntimeExports.jsx(SelectItem,{value:"crosses",children:"Crosses"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"value",children:"Price Value"}),jsxRuntimeExports.jsx(Input$1,{id:"value",type:"number",value:_e.value||"",onChange:ot=>et(dt=>({...dt,value:parseFloat(ot.target.value)})),placeholder:"0.00",min:"0"})]})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"volume",className:"pt-4",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"condition",children:"Condition"}),jsxRuntimeExports.jsxs(Select$1,{value:_e.condition,onValueChange:ot=>et(dt=>({...dt,condition:ot})),children:[jsxRuntimeExports.jsx(SelectTrigger,{id:"condition",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select condition"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"above",children:"Above"}),jsxRuntimeExports.jsx(SelectItem,{value:"below",children:"Below"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"value",children:"Volume (24h)"}),jsxRuntimeExports.jsx(Input$1,{id:"value",type:"number",value:_e.value||"",onChange:ot=>et(dt=>({...dt,value:parseFloat(ot.target.value)})),placeholder:"0.00",min:"0"})]})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"indicator",className:"pt-4",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"indicator",children:"Indicator"}),jsxRuntimeExports.jsxs(Select$1,{defaultValue:"rsi",children:[jsxRuntimeExports.jsx(SelectTrigger,{id:"indicator",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select indicator"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"rsi",children:"RSI"}),jsxRuntimeExports.jsx(SelectItem,{value:"macd",children:"MACD"}),jsxRuntimeExports.jsx(SelectItem,{value:"sma",children:"SMA"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"condition",children:"Condition"}),jsxRuntimeExports.jsxs(Select$1,{value:_e.condition,onValueChange:ot=>et(dt=>({...dt,condition:ot})),children:[jsxRuntimeExports.jsx(SelectTrigger,{id:"condition",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select condition"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"above",children:"Above"}),jsxRuntimeExports.jsx(SelectItem,{value:"below",children:"Below"}),jsxRuntimeExports.jsx(SelectItem,{value:"crosses",children:"Crosses"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label$2,{htmlFor:"value",children:"Value"}),jsxRuntimeExports.jsx(Input$1,{id:"value",type:"number",value:_e.value||"",onChange:ot=>et(dt=>({...dt,value:parseFloat(ot.target.value)})),placeholder:"0.00",min:"0"})]})]})})]})]})]})}),jsxRuntimeExports.jsx(CardFooter,{children:jsxRuntimeExports.jsxs(Button,{className:"w-full",onClick:nt,children:[jsxRuntimeExports.jsx(Bell,{className:"mr-2 h-4 w-4"}),"Create Alert"]})})]})}),jsxRuntimeExports.jsx("div",{className:"md:col-span-2",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{children:"Your Alerts"})}),jsxRuntimeExports.jsx(CardContent,{children:_.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"mx-auto h-12 w-12 text-muted-foreground opacity-50 mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"No alerts set up yet"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Create an alert to get notified when market conditions change"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-4",children:_.map(ot=>jsxRuntimeExports.jsx(Card,{className:"overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("div",{className:`p-2 rounded-full ${ot.active?"bg-green-100 dark:bg-green-900/30":"bg-gray-100 dark:bg-gray-800"}`,children:ot.active?jsxRuntimeExports.jsx(Bell,{className:"h-5 w-5 text-green-500"}):jsxRuntimeExports.jsx(BellOff,{className:"h-5 w-5 text-gray-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium",children:ot.symbol}),jsxRuntimeExports.jsx(Badge,{variant:"outline",children:ot.type})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-muted-foreground",children:[ot.type.charAt(0).toUpperCase()+ot.type.slice(1)," ",at(ot.condition)," ",ot.value]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx(Switch,{checked:ot.active,onCheckedChange:()=>st(ot.id)}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:()=>it(ot.id),children:jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4 text-muted-foreground"})})]})]})},ot.id))})})]})})]})]})},rs=class rs{constructor(){vn(this,"exchange",null);vn(this,"cache",new Map);vn(this,"CACHE_TTL",5e3);vn(this,"lastRequestTime",0);vn(this,"MIN_REQUEST_INTERVAL",1e3)}static getInstance(){return rs.instance||(rs.instance=new rs),rs.instance}async ensureExchange(){if(!this.exchange)try{this.exchange=new ccxt.binance({options:{defaultType:"future",adjustForTimeDifference:!0,recvWindow:6e4,timeout:6e4,testnet:!0},urls:{api:{market:"https://testnet.binance.vision/api/v3",public:"https://testnet.binance.vision/api/v3",private:"https://testnet.binance.vision/api/v3",v1:"https://testnet.binance.vision/api/v3"}}}),console.log("Exchange Binance Futures Testnet initialized successfully")}catch($){throw console.error("Failed to initialize exchange:",$),$}return this.exchange}async withRetry($,_e=3){let et;for(let tt=0;tt<_e;tt++)try{return await $()}catch(rt){et=rt,console.warn(`Tentativa ${tt+1} falhou, tentando novamente...`,rt),await new Promise(nt=>setTimeout(nt,1e3*(tt+1)))}throw et}updateCredentials($){try{this.exchange=new ccxt.binance({apiKey:$.apiKey,secret:$.apiSecret,options:{defaultType:"future",adjustForTimeDifference:!0,recvWindow:6e4,timeout:6e4,testnet:!0},urls:{api:{market:"https://testnet.binance.vision/api/v3",public:"https://testnet.binance.vision/api/v3",private:"https://testnet.binance.vision/api/v3",v1:"https://testnet.binance.vision/api/v3"}}}),console.log("Credentials updated successfully")}catch(_e){throw console.error("Failed to update credentials:",_e),_e}}formatSymbol($){return $.replace("/","")}ccxtSymbol($){if($.includes("/"))return $;const _e=["USDT","USD","BTC","ETH","BNB"];for(const et of _e)if($.endsWith(et))return`${$.slice(0,-et.length)}/${et}`;return $}async rateLimit(){const _e=Date.now()-this.lastRequestTime;_e<this.MIN_REQUEST_INTERVAL&&await new Promise(et=>setTimeout(et,this.MIN_REQUEST_INTERVAL-_e)),this.lastRequestTime=Date.now()}getCachedData($){const _e=this.cache.get($);return _e&&Date.now()-_e.timestamp<this.CACHE_TTL?_e.data:null}setCachedData($,_e){this.cache.set($,{data:_e,timestamp:Date.now()})}async getMarketData($){const _e=`marketData-${$}`,et=this.getCachedData(_e);if(et)return et;await this.rateLimit();const tt=this.ccxtSymbol($);try{const rt=await this.ensureExchange();console.log(`Buscando dados de mercado para ${tt}`),await rt.loadMarkets();const nt=await rt.fetchTicker(tt),it={symbol:$,price:nt.last||nt.close,change:nt.change||0,changePercent:nt.percentage||0,volume:nt.quoteVolume||nt.baseVolume||0,high24h:nt.high||0,low24h:nt.low||0,lastUpdated:new Date(nt.timestamp||Date.now()).toISOString()};return this.setCachedData(_e,it),it}catch(rt){throw console.error(`Falha ao obter dados de mercado para ${tt}`,rt),new Error(`Falha ao obter dados de mercado para ${$}`)}}async getCandles($,_e){try{const et=await this.ensureExchange(),tt=this.formatSymbol($);return(await et.fetchOHLCV(tt,_e)).map(nt=>({time:nt[0],open:nt[1],high:nt[2],low:nt[3],close:nt[4],volume:nt[5]}))}catch(et){throw console.error("Failed to fetch candles:",et),et}}async getSymbols(){try{const $=await this.ensureExchange();console.log("Buscando símbolos disponíveis"),await $.loadMarkets();const _e=Object.keys($.markets).filter(et=>et.includes("/")).filter(et=>et.endsWith("/USDT"));return console.log(`${_e.length} símbolos encontrados`),_e}catch($){throw console.error("Erro ao obter símbolos:",$),new Error("Falha ao obter símbolos disponíveis")}}async getAccountInfo(){try{if(!this.exchange)throw new Error("Conexão CCXT não inicializada com credenciais");await this.exchange.checkRequiredCredentials(),console.log("Buscando informações da conta");const $=await this.exchange.fetchBalance();return console.log("Informações de saldo obtidas"),$}catch($){throw console.error("Erro ao obter informações da conta:",$),new Error("Falha ao obter informações da conta. Verifique suas credenciais da API.")}}async createOrder($,_e,et,tt,rt,nt){try{const it=await this.ensureExchange(),st=this.formatSymbol($);nt&&await it.setLeverage(nt,st);const at=await it.createOrder(st,et.toLowerCase(),_e.toLowerCase(),tt,rt);return{id:at.id,symbol:at.symbol,side:at.side.toUpperCase(),type:at.type.toUpperCase(),quantity:at.amount,price:at.price||0,timestamp:at.timestamp,status:at.status.toUpperCase(),leverage:nt||1,entryPrice:at.price||0,entryTime:new Date(at.timestamp).toISOString()}}catch(it){throw console.error("Failed to create order:",it),it}}async getOrderHistory($){const _e=`orderHistory-${$||"all"}`,et=this.getCachedData(_e);if(et)return et;await this.rateLimit();try{if(!this.exchange)throw new Error("Conexão CCXT não inicializada com credenciais");await this.exchange.checkRequiredCredentials(),console.log("Buscando histórico de ordens",{symbol:$});const tt=$?await this.exchange.fetchClosedOrders(this.ccxtSymbol($)):await this.exchange.fetchClosedOrders();return this.setCachedData(_e,tt),tt}catch(tt){throw console.error("Falha ao obter histórico de ordens",tt),tt}}async getOpenPositions($){return this.withRetry(async()=>{try{const _e=await this.ensureExchange();await _e.checkRequiredCredentials();const et=$?this.ccxtSymbol($):void 0;console.log("Buscando posições abertas",{symbol:et});const tt=await _e.fetchPositions(et?[et]:void 0);return console.log("Posições abertas obtidas com sucesso",{count:tt.length,symbol:et}),tt}catch(_e){throw console.error("Falha ao obter posições abertas",_e),_e instanceof ccxt.AuthenticationError?new Error("Falha ao obter posições abertas. Verifique suas credenciais da API."):_e instanceof ccxt.NetworkError?new Error("Falha ao obter posições abertas. Verifique sua conexão com a internet."):new Error("Falha ao obter posições abertas. Tente novamente mais tarde.")}})}async setLeverage($,_e){try{const et=await this.ensureExchange(),tt=this.formatSymbol($);await et.setLeverage(_e,tt),console.log(`Leverage set to ${_e}x for ${$}`)}catch(et){throw console.error("Failed to set leverage:",et),et}}};vn(rs,"instance");let BinanceService=rs;const apiFormSchema=z.object({binanceApiKey:z.string().min(1,"API Key is required"),binanceSecretKey:z.string().min(1,"Secret Key is required")}),notificationFormSchema=z.object({email:z.boolean(),push:z.boolean(),desktop:z.boolean()}),tradingLimitsFormSchema=z.object({maxTradeSize:z.string().min(1,"Maximum trade size is required"),maxDailyLoss:z.string().min(1,"Maximum daily loss is required"),maxOpenTrades:z.string().min(1,"Maximum open trades is required")}),appearanceFormSchema=z.object({theme:z.enum(["light","dark"])}),Settings=()=>{var wt,Et,At,jt,kt,Lt,Bt,Gt,er,tr,ar,Mt,lt;const{user:_,updateUser:$}=useAuth(),{theme:_e,setTheme:et}=useTheme(),{toast:tt}=useToast(),{syncTradesFromBinance:rt}=useTrades(),nt=AuthService.getInstance(),it=BinanceService.getInstance();reactExports.useEffect(()=>{const mt=nt.getApiCredentials();mt&&(st.setValue("binanceApiKey",mt.binanceApiKey),st.setValue("binanceSecretKey",mt.binanceSecretKey))},[]);const st=useForm({resolver:t$1(apiFormSchema),defaultValues:{binanceApiKey:"",binanceSecretKey:""}}),at=useForm({resolver:t$1(notificationFormSchema),defaultValues:{email:((Et=(wt=_==null?void 0:_.settings)==null?void 0:wt.notificationSettings)==null?void 0:Et.email)??!0,push:((jt=(At=_==null?void 0:_.settings)==null?void 0:At.notificationSettings)==null?void 0:jt.push)??!0,desktop:((Lt=(kt=_==null?void 0:_.settings)==null?void 0:kt.notificationSettings)==null?void 0:Lt.desktop)??!0}}),ot=useForm({resolver:t$1(tradingLimitsFormSchema),defaultValues:{maxTradeSize:String(((Gt=(Bt=_==null?void 0:_.settings)==null?void 0:Bt.tradingLimits)==null?void 0:Gt.maxTradeSize)||1e3),maxDailyLoss:String(((tr=(er=_==null?void 0:_.settings)==null?void 0:er.tradingLimits)==null?void 0:tr.maxDailyLoss)||500),maxOpenTrades:String(((Mt=(ar=_==null?void 0:_.settings)==null?void 0:ar.tradingLimits)==null?void 0:Mt.maxOpenTrades)||5)}}),dt=useForm({resolver:t$1(appearanceFormSchema),defaultValues:{theme:((lt=_==null?void 0:_.settings)==null?void 0:lt.theme)||_e}}),ht=async mt=>{try{nt.saveApiCredentials({binanceApiKey:mt.binanceApiKey,binanceSecretKey:mt.binanceSecretKey}),it.updateCredentials({apiKey:mt.binanceApiKey,apiSecret:mt.binanceSecretKey});try{await it.getAccountInfo(),tt({title:"API Settings Saved",description:"Your Binance Futures Testnet credentials have been successfully verified and saved"}),await rt()}catch{tt({title:"API Connection Failed",description:"The provided Testnet API credentials are invalid or have insufficient permissions",variant:"destructive"}),nt.clearApiCredentials()}$({apiKeys:{binanceApiKey:mt.binanceApiKey,binanceSecretKey:mt.binanceSecretKey}})}catch(gt){console.error("Error saving API credentials:",gt),tt({title:"Error",description:"Failed to save API credentials",variant:"destructive"})}},yt=mt=>{$({settings:{..._==null?void 0:_.settings,notificationSettings:{email:mt.email,push:mt.push,desktop:mt.desktop}}}),tt({title:"Notification Settings Saved",description:"Your notification preferences have been updated"})},vt=mt=>{$({settings:{..._==null?void 0:_.settings,tradingLimits:{maxTradeSize:Number(mt.maxTradeSize),maxDailyLoss:Number(mt.maxDailyLoss),maxOpenTrades:Number(mt.maxOpenTrades)}}}),tt({title:"Trading Limits Saved",description:"Your trading limits have been updated successfully"})},xt=mt=>{$({settings:{..._==null?void 0:_.settings,theme:mt.theme}}),et(mt.theme),tt({title:"Appearance Saved",description:`Theme switched to ${mt.theme} mode`})};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(PageHeader,{title:"Settings",subtitle:"Manage your account settings and preferences"}),jsxRuntimeExports.jsxs(Tabs,{defaultValue:"api",className:"space-y-4",children:[jsxRuntimeExports.jsxs(TabsList,{children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"api",children:"API Settings"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"notifications",children:"Notifications"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"tradingLimits",children:"Trading Limits"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"appearance",children:"Appearance"})]}),jsxRuntimeExports.jsx(TabsContent,{value:"api",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Binance Futures Testnet API Credentials"}),jsxRuntimeExports.jsx(CardDescription,{children:"Enter your Binance Futures Testnet API credentials to connect to the trading testnet"})]}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-6",children:[jsxRuntimeExports.jsxs(Alert,{children:[jsxRuntimeExports.jsx(Info,{className:"h-4 w-4"}),jsxRuntimeExports.jsx(AlertTitle,{children:"Testnet Information"}),jsxRuntimeExports.jsxs(AlertDescription,{children:[jsxRuntimeExports.jsx("p",{className:"mb-2",children:"This app uses Binance Futures Testnet for practice trading with virtual funds."}),jsxRuntimeExports.jsxs("ol",{className:"list-decimal pl-4 space-y-1 text-sm",children:[jsxRuntimeExports.jsxs("li",{children:["Visit ",jsxRuntimeExports.jsx("a",{href:"https://testnet.binancefuture.com/en/futures/BTCUSDT",className:"text-blue-500 underline",target:"_blank",rel:"noreferrer",children:"Binance Futures Testnet"})]}),jsxRuntimeExports.jsx("li",{children:"Register for a testnet account or log in if you already have one"}),jsxRuntimeExports.jsx("li",{children:"Go to your account settings and create an API key"}),jsxRuntimeExports.jsx("li",{children:"Copy both the API Key and Secret Key and paste them below"})]})]})]}),jsxRuntimeExports.jsx(Form,{...st,children:jsxRuntimeExports.jsxs("form",{onSubmit:st.handleSubmit(ht),className:"space-y-4",children:[jsxRuntimeExports.jsx(FormField,{control:st.control,name:"binanceApiKey",render:({field:mt})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"API Key"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input$1,{placeholder:"Enter your Binance Futures Testnet API key",...mt})}),jsxRuntimeExports.jsx(FormDescription,{children:"Your API key from Binance Futures Testnet. This is used to authenticate requests."}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:st.control,name:"binanceSecretKey",render:({field:mt})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Secret Key"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input$1,{type:"password",placeholder:"Enter your Binance Futures Testnet secret key",...mt})}),jsxRuntimeExports.jsx(FormDescription,{children:"Your secret key from Binance Futures Testnet. Keep this secure and never share it."}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(Button,{type:"submit",children:"Save API Credentials"})]})})]}),jsxRuntimeExports.jsx(CardFooter,{className:"border-t px-6 py-4",children:jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{nt.clearApiCredentials(),st.reset({binanceApiKey:"",binanceSecretKey:""}),tt({title:"Credentials Cleared",description:"Your API credentials have been removed"})},children:"Clear Credentials"})})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"notifications",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Notification Preferences"}),jsxRuntimeExports.jsx(CardDescription,{children:"Choose how you want to receive trading notifications"})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx(Form,{...at,children:jsxRuntimeExports.jsxs("form",{onSubmit:at.handleSubmit(yt),className:"space-y-4",children:[jsxRuntimeExports.jsx(FormField,{control:at.control,name:"email",render:({field:mt})=>jsxRuntimeExports.jsxs(FormItem,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-0.5",children:[jsxRuntimeExports.jsx(FormLabel,{children:"Email Notifications"}),jsxRuntimeExports.jsx(FormDescription,{children:"Receive trading alerts via email"})]}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Switch,{checked:mt.value,onCheckedChange:mt.onChange})})]})}),jsxRuntimeExports.jsx(FormField,{control:at.control,name:"push",render:({field:mt})=>jsxRuntimeExports.jsxs(FormItem,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-0.5",children:[jsxRuntimeExports.jsx(FormLabel,{children:"Push Notifications"}),jsxRuntimeExports.jsx(FormDescription,{children:"Receive push notifications on your device"})]}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Switch,{checked:mt.value,onCheckedChange:mt.onChange})})]})}),jsxRuntimeExports.jsx(FormField,{control:at.control,name:"desktop",render:({field:mt})=>jsxRuntimeExports.jsxs(FormItem,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-0.5",children:[jsxRuntimeExports.jsx(FormLabel,{children:"Desktop Notifications"}),jsxRuntimeExports.jsx(FormDescription,{children:"Show notifications in your browser"})]}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Switch,{checked:mt.value,onCheckedChange:mt.onChange})})]})}),jsxRuntimeExports.jsx(Button,{type:"submit",children:"Save Notification Settings"})]})})})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"tradingLimits",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Trading Limits"}),jsxRuntimeExports.jsx(CardDescription,{children:"Set risk management limits for your trading activities"})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx(Form,{...ot,children:jsxRuntimeExports.jsxs("form",{onSubmit:ot.handleSubmit(vt),className:"space-y-4",children:[jsxRuntimeExports.jsx(FormField,{control:ot.control,name:"maxTradeSize",render:({field:mt})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Maximum Trade Size (USDT)"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input$1,{type:"number",...mt})}),jsxRuntimeExports.jsx(FormDescription,{children:"The maximum size for any single trade"}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:ot.control,name:"maxDailyLoss",render:({field:mt})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Maximum Daily Loss (USDT)"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input$1,{type:"number",...mt})}),jsxRuntimeExports.jsx(FormDescription,{children:"Stop trading if you lose this amount in a day"}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:ot.control,name:"maxOpenTrades",render:({field:mt})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Maximum Open Trades"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input$1,{type:"number",...mt})}),jsxRuntimeExports.jsx(FormDescription,{children:"Maximum number of positions to have open at once"}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(Button,{type:"submit",children:"Save Trading Limits"})]})})})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"appearance",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Appearance"}),jsxRuntimeExports.jsx(CardDescription,{children:"Customize the look and feel of the application"})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx(Form,{...dt,children:jsxRuntimeExports.jsxs("form",{onSubmit:dt.handleSubmit(xt),className:"space-y-4",children:[jsxRuntimeExports.jsx(FormField,{control:dt.control,name:"theme",render:({field:mt})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Theme"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:`cursor-pointer border rounded-lg p-3 flex flex-col items-center space-y-2 ${mt.value==="light"?"border-primary":"border-muted"}`,onClick:()=>mt.onChange("light"),children:[jsxRuntimeExports.jsx("div",{className:"h-24 w-full bg-white border rounded-md"}),jsxRuntimeExports.jsx("span",{children:"Light"})]}),jsxRuntimeExports.jsxs("div",{className:`cursor-pointer border rounded-lg p-3 flex flex-col items-center space-y-2 ${mt.value==="dark"?"border-primary":"border-muted"}`,onClick:()=>mt.onChange("dark"),children:[jsxRuntimeExports.jsx("div",{className:"h-24 w-full bg-slate-900 border rounded-md"}),jsxRuntimeExports.jsx("span",{children:"Dark"})]})]}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(Button,{type:"submit",children:"Save Appearance Settings"})]})})})]})})]})]})},Profile=()=>{const{user:_}=useAuth(),$={joinDate:new Date(2023,0,15),lastLogin:new Date,totalTrades:248,successRate:58.4,totalProfit:8325.65};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx(PageHeader,{title:"Profile",subtitle:"View and manage your account information"}),jsxRuntimeExports.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[jsxRuntimeExports.jsxs(Card,{className:"md:col-span-1",children:[jsxRuntimeExports.jsx(CardHeader,{className:"p-4 pb-2",children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2 text-lg",children:[jsxRuntimeExports.jsx(User,{className:"h-5 w-5"}),"Account Information"]})}),jsxRuntimeExports.jsx(CardContent,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center space-y-2 pb-4",children:[jsxRuntimeExports.jsx("div",{className:"h-24 w-24 rounded-full bg-primary/10 flex items-center justify-center",children:jsxRuntimeExports.jsx(User,{className:"h-12 w-12 text-primary"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium",children:(_==null?void 0:_.name)||"User"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[jsxRuntimeExports.jsx(Mail,{className:"h-3 w-3"}),(_==null?void 0:_.email)||"email@example.com"]})]}),jsxRuntimeExports.jsx(Separator$1,{}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-muted-foreground",children:"Member since"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:$.joinDate.toLocaleDateString()})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-muted-foreground",children:"Last login"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:$.lastLogin.toLocaleDateString()})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-muted-foreground",children:"Account status"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-green-400 flex items-center gap-1",children:[jsxRuntimeExports.jsx(Shield,{className:"h-3 w-3"}),"Active"]})]})]})]})})]}),jsxRuntimeExports.jsxs(Card,{className:"md:col-span-2",children:[jsxRuntimeExports.jsx(CardHeader,{className:"p-4 pb-2",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-lg",children:"Trading Performance"})}),jsxRuntimeExports.jsxs(CardContent,{className:"p-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-accent/30 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm text-muted-foreground mb-1",children:"Total Trades"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-semibold",children:$.totalTrades})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-accent/30 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm text-muted-foreground mb-1",children:"Success Rate"}),jsxRuntimeExports.jsxs("p",{className:"text-2xl font-semibold",children:[$.successRate,"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-accent/30 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm text-muted-foreground mb-1",children:"Total Profit"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-semibold",children:formatCurrency($.totalProfit)})]})]}),jsxRuntimeExports.jsx(Separator$1,{className:"my-4"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-medium",children:"Account Settings"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"You can manage your account settings, notification preferences, and trading limits in the Settings section."})]})]})]})]})]})},linkVariants=cva("inline-flex items-center gap-1 rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",{variants:{variant:{default:"text-primary hover:text-primary/80",subtle:"text-muted-foreground hover:text-foreground",underline:"underline-offset-4 hover:underline text-foreground",ghost:"hover:text-foreground hover:underline"},size:{default:"text-base",sm:"text-sm",lg:"text-lg"}},defaultVariants:{variant:"default",size:"default"}}),Link=reactExports.forwardRef(({className:_,variant:$,size:_e,asChild:et=!1,external:tt=!1,...rt},nt)=>{const it=et?reactExports.Fragment:"a",st=tt?{target:"_blank",rel:"noopener noreferrer"}:{};return jsxRuntimeExports.jsx(it,{className:cn(linkVariants({variant:$,size:_e,className:_})),ref:nt,...st,...rt})});Link.displayName="Link";const About=()=>jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx(PageHeader,{title:"About Crypto Navigation Suite",subtitle:"Learn about this project and how to use the Binance Futures testnet"}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsx(CardTitle,{children:"Project Overview"}),jsxRuntimeExports.jsx(CardDescription,{children:"A modern crypto trading interface using Binance Futures testnet"})]}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium mb-2",children:"What is this app?"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground",children:"Crypto Navigation Suite is a demonstration project that shows how to build a modern cryptocurrency trading interface. It connects to the Binance Futures testnet, allowing you to practice trading with virtual funds without risking real money."})]}),jsxRuntimeExports.jsx(Separator$1,{}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium mb-2",children:"Technologies Used"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[jsxRuntimeExports.jsx(Badge,{variant:"outline",children:"React"}),jsxRuntimeExports.jsx(Badge,{variant:"outline",children:"TypeScript"}),jsxRuntimeExports.jsx(Badge,{variant:"outline",children:"CCXT"}),jsxRuntimeExports.jsx(Badge,{variant:"outline",children:"Tailwind CSS"}),jsxRuntimeExports.jsx(Badge,{variant:"outline",children:"Shadcn/UI"}),jsxRuntimeExports.jsx(Badge,{variant:"outline",children:"Chart.js"}),jsxRuntimeExports.jsx(Badge,{variant:"outline",children:"React Hook Form"}),jsxRuntimeExports.jsx(Badge,{variant:"outline",children:"Zod"})]})]}),jsxRuntimeExports.jsx(Separator$1,{}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium mb-2",children:"How to Use the Binance Futures Testnet"}),jsxRuntimeExports.jsxs("ol",{className:"list-decimal pl-6 space-y-3",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Create a Testnet Account:"}),jsxRuntimeExports.jsxs("p",{className:"text-muted-foreground mt-1",children:["Visit the"," ",jsxRuntimeExports.jsx(Link,{href:"https://testnet.binancefuture.com/en/futures",external:!0,variant:"underline",children:"Binance Futures Testnet"})," ","and create an account if you don't already have one."]})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Generate API Keys:"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground mt-1",children:"After logging in, navigate to the API Management section to generate your testnet API and Secret keys. Make sure to enable futures trading permissions."})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Configure this App:"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground mt-1",children:"Go to the Settings page in this app and enter your Binance Futures Testnet API credentials. Once saved, you'll be able to see market data and place test trades."})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Trading with Leverage:"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground mt-1",children:"The Trading page allows you to set leverage for your futures positions. Remember that higher leverage means higher risk, even with test funds."})]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Monitor Positions:"}),jsxRuntimeExports.jsx("p",{className:"text-muted-foreground mt-1",children:"Use the Dashboard to track your open positions, account balance, and trading history."})]})]})]}),jsxRuntimeExports.jsx(Separator$1,{}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium mb-2",children:"Important Notes"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[jsxRuntimeExports.jsx("li",{className:"text-muted-foreground",children:"This is a demonstration project and should not be used for real trading."}),jsxRuntimeExports.jsx("li",{className:"text-muted-foreground",children:"The Binance Futures Testnet occasionally resets data. If you see unexpected behavior, check the testnet status or regenerate your API keys."}),jsxRuntimeExports.jsx("li",{className:"text-muted-foreground",children:"API credentials are stored locally in your browser and are never sent to any server."})]})]})]})]})]}),NotFound=()=>{const _=useLocation();return reactExports.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",_.pathname)},[_.pathname]),jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:jsxRuntimeExports.jsxs(Card,{className:"max-w-md w-full",children:[jsxRuntimeExports.jsxs(CardHeader,{className:"pb-2",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx("div",{className:"h-12 w-12 rounded-full bg-muted flex items-center justify-center",children:jsxRuntimeExports.jsx(CircleAlert,{className:"h-6 w-6 text-muted-foreground"})})}),jsxRuntimeExports.jsx(CardTitle,{className:"text-2xl text-center",children:"Page Not Found"})]}),jsxRuntimeExports.jsxs(CardContent,{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"mb-6 text-muted-foreground",children:"The page you're looking for doesn't exist or has been moved."}),jsxRuntimeExports.jsx(Button,{asChild:!0,className:"min-w-[150px]",children:jsxRuntimeExports.jsx(Link$1,{to:"/dashboard",children:"Return to Dashboard"})})]})]})})},ProtectedRoute=({children:_})=>{const{user:$,isLoading:_e}=useAuth(),et=useLocation();return _e?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"animate-pulse-light",children:"Loading..."})}):$?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_}):jsxRuntimeExports.jsx(Navigate,{to:"/login",state:{from:et},replace:!0})},registerSchema=z.object({name:z.string().min(2,{message:"Name must be at least 2 characters"}),email:z.string().email({message:"Please enter a valid email address"}),password:z.string().min(6,{message:"Password must be at least 6 characters"}),confirmPassword:z.string().min(6,{message:"Password must be at least 6 characters"})}).refine(_=>_.password===_.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),RegisterForm=()=>{const[_,$]=reactExports.useState(!1),{updateUser:_e}=useAuth(),et=useForm({resolver:t$1(registerSchema),defaultValues:{name:"",email:"",password:"",confirmPassword:""}}),tt=async rt=>{try{$(!0);const nt={id:Date.now().toString(),name:rt.name,email:rt.email,avatar:"https://github.com/shadcn.png"};localStorage.setItem("user",JSON.stringify(nt)),_e(nt);const it={email:rt.email,password:rt.password};localStorage.setItem("credentials",JSON.stringify(it)),window.location.href="/dashboard"}catch(nt){console.error("Registration error:",nt)}finally{$(!1)}};return jsxRuntimeExports.jsxs(Card,{className:"w-full max-w-md mx-auto shadow-lg",children:[jsxRuntimeExports.jsxs(CardHeader,{className:"space-y-1 flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center mb-2",children:jsxRuntimeExports.jsx(ChartArea,{className:"h-8 w-8 text-cryptoBlue"})}),jsxRuntimeExports.jsx(CardTitle,{className:"text-2xl text-center",children:"Create Account"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Enter your details to create your account"})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx(Form,{...et,children:jsxRuntimeExports.jsxs("form",{onSubmit:et.handleSubmit(tt),className:"space-y-4",children:[jsxRuntimeExports.jsx(FormField,{control:et.control,name:"name",render:({field:rt})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Name"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input$1,{placeholder:"John Doe",...rt})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:et.control,name:"email",render:({field:rt})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Email"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input$1,{type:"email",placeholder:"email@example.com",...rt})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:et.control,name:"password",render:({field:rt})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Password"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input$1,{type:"password",placeholder:"••••••••",...rt})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(FormField,{control:et.control,name:"confirmPassword",render:({field:rt})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Confirm Password"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input$1,{type:"password",placeholder:"••••••••",...rt})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"w-full",disabled:_,children:_?"Creating account...":"Create account"})]})})}),jsxRuntimeExports.jsx(CardFooter,{className:"flex justify-center",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-muted-foreground",children:["Already have an account?"," ",jsxRuntimeExports.jsx("a",{href:"/login",className:"text-primary hover:underline",children:"Sign in"})]})})]})},Register=()=>{const{user:_,isLoading:$}=useAuth(),_e=useNavigate();return reactExports.useEffect(()=>{_&&_e("/dashboard")},[_,_e]),$?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"animate-pulse",children:"Loading..."})}):jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:jsxRuntimeExports.jsx("div",{className:"w-full max-w-md",children:jsxRuntimeExports.jsx(RegisterForm,{})})})},queryClient=new QueryClient,App=()=>jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(ThemeProvider,{children:jsxRuntimeExports.jsxs(TooltipProvider,{children:[jsxRuntimeExports.jsx(Toaster$1,{}),jsxRuntimeExports.jsx(Toaster,{}),jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Index,{})}),jsxRuntimeExports.jsx(Route,{path:"/login",element:jsxRuntimeExports.jsx(Login,{})}),jsxRuntimeExports.jsx(Route,{path:"/register",element:jsxRuntimeExports.jsx(Register,{})}),jsxRuntimeExports.jsxs(Route,{element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(AppLayout,{})}),children:[jsxRuntimeExports.jsx(Route,{path:"/dashboard",element:jsxRuntimeExports.jsx(Dashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"/history",element:jsxRuntimeExports.jsx(History,{})}),jsxRuntimeExports.jsx(Route,{path:"/strategies",element:jsxRuntimeExports.jsx(Strategies,{})}),jsxRuntimeExports.jsx(Route,{path:"/alerts",element:jsxRuntimeExports.jsx(Alerts,{})}),jsxRuntimeExports.jsx(Route,{path:"/settings",element:jsxRuntimeExports.jsx(Settings,{})}),jsxRuntimeExports.jsx(Route,{path:"/profile",element:jsxRuntimeExports.jsx(Profile,{})}),jsxRuntimeExports.jsx(Route,{path:"/about",element:jsxRuntimeExports.jsx(About,{})}),jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Navigate,{to:"/dashboard",replace:!0})})]}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]})})]})})})});createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}));
